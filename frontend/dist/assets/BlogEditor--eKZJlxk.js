const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/core-UJTxJtEN.js","assets/react-vendor-MaXSxttp.js","assets/core-WQA5OQ4D.js","assets/index-AEOaPG7e.js"])))=>i.map(i=>d[i]);
import{i as isShadowRoot,a as isHTMLElement,b as isNode$1,u as useFloating$1,c as isElement$1,g as getWindow,d as getOverflowAncestors,e as isWebKit,f as isLastTraversableNode,h as getParentNode,j as getComputedStyle$1,k as getNodeName,l as flip,m as autoPlacement,o as offset$1,s as shift$2,n as limitShift,p as autoUpdate,q as arrow$1,r as size$1,_ as __vitePreload,t as computePosition,v as jsxDevRuntimeExports,w as useToast,B as Button$1,I as Icon$1,x as uploadBlogImage,P as Primitive,y as cn$2,z as cva,A as useControllableState,C as createContextScope,D as useId$1,E as Presence,F as Portal$3,G as composeEventHandlers,H as useComposedRefs,J as hideOthers,R as ReactRemoveScroll,K as createSlot,L as useFocusGuards,M as FocusScope,N as DismissableLayer,O as createContext2,Q as composeRefs,X as X$1,S as Search,T as createPopperScope,U as Root2$1,V as Anchor,W as Content$2,Y as Arrow,Z as Check$1,$ as updatePost,a0 as createPost,a1 as Input,a2 as fetchCategories,a3 as fetchTags}from"./main-zCmjgbKP.js";import{r as reactExports,j as jsxRuntimeExports,i as requireShim,e as React,f as ReactDOM,R as React$1,d as reactDomExports,k as invariant$1,u as useNavigate}from"./router-QwDz13ax.js";import{c as commonjsGlobal,g as getDefaultExportFromCjs,r as requireReact,b as getAugmentedNamespace}from"./react-vendor-MaXSxttp.js";function _mergeNamespaces(e,t){for(var r=0;r<t.length;r++){const n=t[r];if("string"!=typeof n&&!Array.isArray(n))for(const t in n)if("default"!==t&&!(t in e)){const r=Object.getOwnPropertyDescriptor(n,t);r&&Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:()=>n[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function OrderedMap(e){this.content=e}function findDiffStart(e,t,r){for(let n=0;;n++){if(n==e.childCount||n==t.childCount)return e.childCount==t.childCount?null:r;let i=e.child(n),o=t.child(n);if(i!=o){if(!i.sameMarkup(o))return r;if(i.isText&&i.text!=o.text){for(let e=0;i.text[e]==o.text[e];e++)r++;return r}if(i.content.size||o.content.size){let e=findDiffStart(i.content,o.content,r+1);if(null!=e)return e}r+=i.nodeSize}else r+=i.nodeSize}}function findDiffEnd(e,t,r,n){for(let i=e.childCount,o=t.childCount;;){if(0==i||0==o)return i==o?null:{a:r,b:n};let s=e.child(--i),a=t.child(--o),l=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:r,b:n};if(s.isText&&s.text!=a.text){let e=0,t=Math.min(s.text.length,a.text.length);for(;e<t&&s.text[s.text.length-e-1]==a.text[a.text.length-e-1];)e++,r--,n--;return{a:r,b:n}}if(s.content.size||a.content.size){let e=findDiffEnd(s.content,a.content,r-1,n-1);if(e)return e}r-=l,n-=l}else r-=l,n-=l}}OrderedMap.prototype={constructor:OrderedMap,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,r){var n=r&&r!=e?this.remove(r):this,i=n.find(e),o=n.content.slice();return-1==i?o.push(r||e,t):(o[i+1]=t,r&&(o[i]=r)),new OrderedMap(o)},remove:function(e){var t=this.find(e);if(-1==t)return this;var r=this.content.slice();return r.splice(t,2),new OrderedMap(r)},addToStart:function(e,t){return new OrderedMap([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var r=this.remove(e).content.slice();return r.push(e,t),new OrderedMap(r)},addBefore:function(e,t,r){var n=this.remove(t),i=n.content.slice(),o=n.find(e);return i.splice(-1==o?i.length:o,0,t,r),new OrderedMap(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=OrderedMap.from(e)).size?new OrderedMap(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=OrderedMap.from(e)).size?new OrderedMap(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=OrderedMap.from(e);for(var r=0;r<e.content.length;r+=2)t=t.remove(e.content[r]);return t},toObject:function(){var e={};return this.forEach(function(t,r){e[t]=r}),e},get size(){return this.content.length>>1}},OrderedMap.from=function(e){if(e instanceof OrderedMap)return e;var t=[];if(e)for(var r in e)t.push(r,e[r]);return new OrderedMap(t)};class Fragment{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,n=0,i){for(let o=0,s=0;s<t;o++){let a=this.content[o],l=s+a.nodeSize;if(l>e&&!1!==r(a,n+s,i||null,o)&&a.content.size){let i=s+1;a.nodesBetween(Math.max(0,e-i),Math.min(a.content.size,t-i),r,n+i)}s=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,n){let i="",o=!0;return this.nodesBetween(e,t,(s,a)=>{let l=s.isText?s.text.slice(Math.max(e,a)-a,t-a):s.isLeaf?n?"function"==typeof n?n(s):n:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&l||s.isTextblock)&&r&&(o?o=!1:i+=r),i+=l},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,n=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(r)&&(n[n.length-1]=t.withText(t.text+r.text),i=1);i<e.content.length;i++)n.push(e.content[i]);return new Fragment(n,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let r=[],n=0;if(t>e)for(let i=0,o=0;o<t;i++){let s=this.content[i],a=o+s.nodeSize;a>e&&((o<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-o),Math.min(s.text.length,t-o)):s.cut(Math.max(0,e-o-1),Math.min(s.content.size,t-o-1))),r.push(s),n+=s.nodeSize),o=a}return new Fragment(r,n)}cutByIndex(e,t){return e==t?Fragment.empty:0==e&&t==this.content.length?this:new Fragment(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let n=this.content.slice(),i=this.size+t.nodeSize-r.nodeSize;return n[e]=t,new Fragment(n,i)}addToStart(e){return new Fragment([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Fragment(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let n=this.content[t];e(n,r,t),r+=n.nodeSize}}findDiffStart(e,t=0){return findDiffStart(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return findDiffEnd(this,e,t,r)}findIndex(e){if(0==e)return retIndex(0,e);if(e==this.size)return retIndex(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,r=0;;t++){let n=r+this.child(t).nodeSize;if(n>=e)return n==e?retIndex(t+1,n):retIndex(t,r);r=n}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Fragment.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Fragment.empty;let t,r=0;for(let n=0;n<e.length;n++){let i=e[n];r+=i.nodeSize,n&&i.isText&&e[n-1].sameMarkup(i)?(t||(t=e.slice(0,n)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new Fragment(t||e,r)}static from(e){if(!e)return Fragment.empty;if(e instanceof Fragment)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Fragment([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(e,t){return found.index=e,found.offset=t,found}function compareDeep(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let r=Array.isArray(e);if(Array.isArray(t)!=r)return!1;if(r){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!compareDeep(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!compareDeep(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let Mark$1=class e{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let n=0;n<e.length;n++){let i=e[n];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,n));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,n)),t.push(this),r=!0),t&&t.push(i)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&compareDeep(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let n=r.create(t.attrs);return r.checkAttrs(n.attrs),n}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&0==t.length)return e.none;if(t instanceof e)return[t];let r=t.slice();return r.sort((e,t)=>e.type.rank-t.type.rank),r}};Mark$1.none=[];class ReplaceError extends Error{}class Slice{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=insertInto(this.content,e+this.openStart,t);return r&&new Slice(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Slice(removeRange(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Slice.empty;let r=t.openStart||0,n=t.openEnd||0;if("number"!=typeof r||"number"!=typeof n)throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(e,t.content),r,n)}static maxOpen(e,t=!0){let r=0,n=0;for(let i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)n++;return new Slice(e,r,n)}}function removeRange(e,t,r){let{index:n,offset:i}=e.findIndex(t),o=e.maybeChild(n),{index:s,offset:a}=e.findIndex(r);if(i==t||o.isText){if(a!=r&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(r))}if(n!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(n,o.copy(removeRange(o.content,t-i-1,r-i-1)))}function insertInto(e,t,r,n){let{index:i,offset:o}=e.findIndex(t),s=e.maybeChild(i);if(o==t||s.isText)return n&&!n.canReplace(i,i,r)?null:e.cut(0,t).append(r).append(e.cut(t));let a=insertInto(s.content,t-o-1,r,s);return a&&e.replaceChild(i,s.copy(a))}function replace$5(e,t,r){if(r.openStart>e.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(e.depth-r.openStart!=t.depth-r.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(e,t,r,0)}function replaceOuter(e,t,r,n){let i=e.index(n),o=e.node(n);if(i==t.index(n)&&n<e.depth-r.openStart){let s=replaceOuter(e,t,r,n+1);return o.copy(o.content.replaceChild(i,s))}if(r.content.size){if(r.openStart||r.openEnd||e.depth!=n||t.depth!=n){let{start:i,end:s}=prepareSliceForReplace(r,e);return close$4(o,replaceThreeWay(e,i,s,t,n))}{let n=e.parent,i=n.content;return close$4(n,i.cut(0,e.parentOffset).append(r.content).append(i.cut(t.parentOffset)))}}return close$4(o,replaceTwoWay(e,t,n))}function checkJoin(e,t){if(!t.type.compatibleContent(e.type))throw new ReplaceError("Cannot join "+t.type.name+" onto "+e.type.name)}function joinable$1(e,t,r){let n=e.node(r);return checkJoin(n,t.node(r)),n}function addNode(e,t){let r=t.length-1;r>=0&&e.isText&&e.sameMarkup(t[r])?t[r]=e.withText(t[r].text+e.text):t.push(e)}function addRange$1(e,t,r,n){let i=(t||e).node(r),o=0,s=t?t.index(r):i.childCount;e&&(o=e.index(r),e.depth>r?o++:e.textOffset&&(addNode(e.nodeAfter,n),o++));for(let a=o;a<s;a++)addNode(i.child(a),n);t&&t.depth==r&&t.textOffset&&addNode(t.nodeBefore,n)}function close$4(e,t){return e.type.checkContent(t),e.copy(t)}function replaceThreeWay(e,t,r,n,i){let o=e.depth>i&&joinable$1(e,t,i+1),s=n.depth>i&&joinable$1(r,n,i+1),a=[];return addRange$1(null,e,i,a),o&&s&&t.index(i)==r.index(i)?(checkJoin(o,s),addNode(close$4(o,replaceThreeWay(e,t,r,n,i+1)),a)):(o&&addNode(close$4(o,replaceTwoWay(e,t,i+1)),a),addRange$1(t,r,i,a),s&&addNode(close$4(s,replaceTwoWay(r,n,i+1)),a)),addRange$1(n,null,i,a),new Fragment(a)}function replaceTwoWay(e,t,r){let n=[];return addRange$1(null,e,r,n),e.depth>r&&addNode(close$4(joinable$1(e,t,r+1),replaceTwoWay(e,t,r+1)),n),addRange$1(t,null,r,n),new Fragment(n)}function prepareSliceForReplace(e,t){let r=t.depth-e.openStart,n=t.node(r).copy(e.content);for(let i=r-1;i>=0;i--)n=t.node(i).copy(Fragment.from(n));return{start:n.resolveNoCache(e.openStart+r),end:n.resolveNoCache(n.content.size-e.openEnd-r)}}Slice.empty=new Slice(Fragment.empty,0,0);class ResolvedPos{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],n=e.child(t);return r?e.child(t).cut(r):n}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[3*t],n=0==t?0:this.path[3*t-1]+1;for(let i=0;i<e;i++)n+=r.child(i).nodeSize;return n}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return Mark$1.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),n=e.maybeChild(t);if(!r){let e=r;r=n,n=e}let i=r.marks;for(var o=0;o<i.length;o++)!1!==i[o].type.spec.inclusive||n&&i[o].isInSet(n.marks)||(i=i[o--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,n=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)!1!==r[i].type.spec.inclusive||n&&r[i].isInSet(n.marks)||(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new NodeRange(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],n=0,i=t;for(let o=e;;){let{index:e,offset:t}=o.content.findIndex(i),s=i-t;if(r.push(o,e,n+t),!s)break;if(o=o.child(e),o.isText)break;i=s-1,n+=t+1}return new ResolvedPos(t,r,i)}static resolveCached(e,t){let r=resolveCache.get(e);if(r)for(let i=0;i<r.elts.length;i++){let e=r.elts[i];if(e.pos==t)return e}else resolveCache.set(e,r=new ResolveCache);let n=r.elts[r.i]=ResolvedPos.resolve(e,t);return r.i=(r.i+1)%resolveCacheSize,n}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const resolveCacheSize=12,resolveCache=new WeakMap;class NodeRange{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$2=class e{constructor(e,t,r,n=Mark$1.none){this.type=e,this.attrs=t,this.marks=n,this.content=r||Fragment.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,n=0){this.content.nodesBetween(e,t,r,n,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,n){return this.content.textBetween(e,t,r,n)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&compareDeep(this.attrs,t||e.defaultAttrs||emptyAttrs)&&Mark$1.sameSet(this.marks,r||Mark$1.none)}copy(t=null){return t==this.content?this:new e(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new e(this.type,this.attrs,this.content,t)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return Slice.empty;let n=this.resolve(e),i=this.resolve(t),o=r?0:n.sharedDepth(t),s=n.start(o),a=n.node(o).content.cut(n.pos-s,i.pos-s);return new Slice(a,n.depth-o,i.depth-o)}replace(e,t,r){return replace$5(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:n}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(n==e||t.isText)return t;e-=n+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let n=this.content.child(t-1);return{node:n,index:t-1,offset:r-n.nodeSize}}resolve(e){return ResolvedPos.resolveCached(this,e)}resolveNoCache(e){return ResolvedPos.resolve(this,e)}rangeHasMark(e,t,r){let n=!1;return t>e&&this.nodesBetween(e,t,e=>(r.isInSet(e.marks)&&(n=!0),!n)),n}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),wrapMarks$1(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=Fragment.empty,n=0,i=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,n,i),s=o&&o.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(let a=n;a<i;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,t,r,n){if(n&&!this.type.allowsMarks(n))return!1;let i=this.contentMatchAt(e).matchType(r),o=i&&i.matchFragment(this.content,t);return!!o&&o.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Mark$1.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Mark$1.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let n=Fragment.fromJSON(e,t.content),i=e.nodeType(t.type).create(t.attrs,n,r);return i.type.checkAttrs(i.attrs),i}};Node$2.prototype.text=void 0;let TextNode$1=class e extends Node$2{constructor(e,t,r,n){if(super(e,t,null,n),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks$1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function wrapMarks$1(e,t){for(let r=e.length-1;r>=0;r--)t=e[r].type.name+"("+t+")";return t}class ContentMatch{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new TokenStream(e,t);if(null==r.next)return ContentMatch.empty;let n=parseExpr(r);r.next&&r.err("Unexpected trailing text");let i=dfa(nfa(n));return checkForDeadEnds(i,r),i}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let n=this;for(let i=t;n&&i<r;i++)n=n.matchType(e.child(i).type);return n}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let n=[this];return function i(o,s){let a=o.matchFragment(e,r);if(a&&(!t||a.validEnd))return Fragment.from(s.map(e=>e.createAndFill()));for(let e=0;e<o.next.length;e++){let{type:t,next:r}=o.next[e];if(!t.isText&&!t.hasRequiredAttrs()&&-1==n.indexOf(r)){n.push(r);let e=i(r,s.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let n=r.shift(),i=n.match;if(i.matchType(e)){let e=[];for(let t=n;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<i.next.length;e++){let{type:o,next:s}=i.next[e];o.isLeaf||o.hasRequiredAttrs()||o.name in t||n.type&&!s.validEnd||(r.push({match:o.contentMatch,type:o,via:n}),t[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(r){e.push(r);for(let n=0;n<r.next.length;n++)-1==e.indexOf(r.next[n].next)&&t(r.next[n].next)}(this),e.map((t,r)=>{let n=r+(t.validEnd?"*":" ")+" ";for(let i=0;i<t.next.length;i++)n+=(i?", ":"")+t.next[i].type.name+"->"+e.indexOf(t.next[i].next);return n}).join("\n")}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function parseExpr(e){let t=[];do{t.push(parseExprSeq(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function parseExprSeq(e){let t=[];do{t.push(parseExprSubscript(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function parseExprSubscript(e){let t=parseExprAtom(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=parseExprRange(e,t)}return t}function parseNum(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function parseExprRange(e,t){let r=parseNum(e),n=r;return e.eat(",")&&(n="}"!=e.next?parseNum(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:t}}function resolveName(e,t){let r=e.nodeTypes,n=r[t];if(n)return[n];let i=[];for(let o in r){let e=r[o];e.isInGroup(t)&&i.push(e)}return 0==i.length&&e.err("No node type or group '"+t+"' found"),i}function parseExprAtom(e){if(e.eat("(")){let t=parseExpr(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){let t=resolveName(e,e.next).map(t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}e.err("Unexpected token '"+e.next+"'")}function nfa(e){let t=[[]];return i(function e(t,o){if("choice"==t.type)return t.exprs.reduce((t,r)=>t.concat(e(r,o)),[]);if("seq"!=t.type){if("star"==t.type){let s=r();return n(o,s),i(e(t.expr,s),s),[n(s)]}if("plus"==t.type){let s=r();return i(e(t.expr,o),s),i(e(t.expr,s),s),[n(s)]}if("opt"==t.type)return[n(o)].concat(e(t.expr,o));if("range"==t.type){let s=o;for(let n=0;n<t.min;n++){let n=r();i(e(t.expr,s),n),s=n}if(-1==t.max)i(e(t.expr,s),s);else for(let o=t.min;o<t.max;o++){let o=r();n(s,o),i(e(t.expr,s),o),s=o}return[n(s)]}if("name"==t.type)return[n(o,void 0,t.value)];throw new Error("Unknown expr type")}for(let n=0;;n++){let s=e(t.exprs[n],o);if(n==t.exprs.length-1)return s;i(s,o=r())}}(e,0),r()),t;function r(){return t.push([])-1}function n(e,r,n){let i={term:n,to:r};return t[e].push(i),i}function i(e,t){e.forEach(e=>e.to=t)}}function cmp(e,t){return t-e}function nullFrom(e,t){let r=[];return function t(n){let i=e[n];if(1==i.length&&!i[0].term)return t(i[0].to);r.push(n);for(let e=0;e<i.length;e++){let{term:n,to:o}=i[e];n||-1!=r.indexOf(o)||t(o)}}(t),r.sort(cmp)}function dfa(e){let t=Object.create(null);return function r(n){let i=[];n.forEach(t=>{e[t].forEach(({term:t,to:r})=>{if(!t)return;let n;for(let e=0;e<i.length;e++)i[e][0]==t&&(n=i[e][1]);nullFrom(e,r).forEach(e=>{n||i.push([t,n=[]]),-1==n.indexOf(e)&&n.push(e)})})});let o=t[n.join(",")]=new ContentMatch(n.indexOf(e.length-1)>-1);for(let e=0;e<i.length;e++){let n=i[e][1].sort(cmp);o.next.push({type:i[e][0],next:t[n.join(",")]||r(n)})}return o}(nullFrom(e,0))}function checkForDeadEnds(e,t){for(let r=0,n=[e];r<n.length;r++){let e=n[r],i=!e.validEnd,o=[];for(let t=0;t<e.next.length;t++){let{type:r,next:s}=e.next[t];o.push(r.name),!i||r.isText||r.hasRequiredAttrs()||(i=!1),-1==n.indexOf(s)&&n.push(s)}i&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs$1(e){let t=Object.create(null);for(let r in e){let n=e[r];if(!n.hasDefault)return null;t[r]=n.default}return t}function computeAttrs(e,t){let r=Object.create(null);for(let n in e){let i=t&&t[n];if(void 0===i){let t=e[n];if(!t.hasDefault)throw new RangeError("No value supplied for attribute "+n);i=t.default}r[n]=i}return r}function checkAttrs(e,t,r,n){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${r} of type ${i}`);for(let i in e){let r=e[i];r.validate&&r.validate(t[i])}}function initAttrs(e,t){let r=Object.create(null);if(t)for(let n in t)r[n]=new Attribute$1(e,n,t[n]);return r}let NodeType$2=class e{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=initAttrs(e,r.attrs),this.defaultAttrs=defaultAttrs$1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$2(this,this.computeAttrs(e),Fragment.from(t),Mark$1.setFrom(r))}createChecked(e=null,t,r){return t=Fragment.from(t),this.checkContent(t),new Node$2(this,this.computeAttrs(e),t,Mark$1.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),(t=Fragment.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let n=this.contentMatch.matchFragment(t),i=n&&n.fillBefore(Fragment.empty,!0);return i?new Node$2(this,e,t.append(i),Mark$1.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){checkAttrs(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Mark$1.none:e}static compile(t,r){let n=Object.create(null);t.forEach((t,i)=>n[t]=new e(t,r,i));let i=r.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let e in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function validateType(e,t,r){let n=r.split("|");return r=>{let i=null===r?"null":typeof r;if(n.indexOf(i)<0)throw new RangeError(`Expected value of type ${n} for attribute ${t} on type ${e}, got ${i}`)}}let Attribute$1=class{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate="string"==typeof r.validate?validateType(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}};class MarkType{constructor(e,t,r,n){this.name=e,this.rank=t,this.schema=r,this.spec=n,this.attrs=initAttrs(e,n.attrs),this.excluded=null;let i=defaultAttrs$1(this.attrs);this.instance=i?new Mark$1(this,i):null}create(e=null){return!e&&this.instance?this.instance:new Mark$1(this,computeAttrs(this.attrs,e))}static compile(e,t){let r=Object.create(null),n=0;return e.forEach((e,i)=>r[e]=new MarkType(e,n++,t,i)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){checkAttrs(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}let Schema$1=class{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let n in e)t[n]=e[n];t.nodes=OrderedMap.from(e.nodes),t.marks=OrderedMap.from(e.marks||{}),this.nodes=NodeType$2.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let r=Object.create(null);for(let n in this.nodes){if(n in this.marks)throw new RangeError(n+" can not be both a node and a mark");let e=this.nodes[n],t=e.spec.content||"",i=e.spec.marks;if(e.contentMatch=r[t]||(r[t]=ContentMatch.parse(t,this.nodes)),e.inlineContent=e.contentMatch.inlineContent,e.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!e.isInline||!e.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=e}e.markSet="_"==i?null:i?gatherMarks(this,i.split(" ")):""!=i&&e.inlineContent?null:[]}for(let n in this.marks){let e=this.marks[n],t=e.spec.excludes;e.excluded=null==t?[e]:""==t?[]:gatherMarks(this,t.split(" "))}this.nodeFromJSON=e=>Node$2.fromJSON(this,e),this.markFromJSON=e=>Mark$1.fromJSON(this,e),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,n){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof NodeType$2))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,r,n)}text(e,t){let r=this.nodes.text;return new TextNode$1(r,r.defaultAttrs,e,Mark$1.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}};function gatherMarks(e,t){let r=[];for(let n=0;n<t.length;n++){let i=t[n],o=e.marks[i],s=o;if(o)r.push(o);else for(let t in e.marks){let n=e.marks[t];("_"==i||n.spec.group&&n.spec.group.split(" ").indexOf(i)>-1)&&r.push(s=n)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[n]+"'")}return r}function isTagRule(e){return null!=e.tag}function isStyleRule(e){return null!=e.style}let DOMParser$1=class e{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(e=>{if(isTagRule(e))this.tags.push(e);else if(isStyleRule(e)){let t=/[^=]*/.exec(e.style)[0];r.indexOf(t)<0&&r.push(t),this.styles.push(e)}}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let r=e.nodes[t.node];return r.contentMatch.matchType(r)})}parse(e,t={}){let r=new ParseContext$1(this,t,!1);return r.addAll(e,Mark$1.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new ParseContext$1(this,t,!0);return r.addAll(e,Mark$1.none,t.from,t.to),Slice.maxOpen(r.finish())}matchTag(e,t,r){for(let n=r?this.tags.indexOf(r)+1:0;n<this.tags.length;n++){let r=this.tags[n];if(matches$1(e,r.tag)&&(void 0===r.namespace||e.namespaceURI==r.namespace)&&(!r.context||t.matchesContext(r.context))){if(r.getAttrs){let t=r.getAttrs(e);if(!1===t)continue;r.attrs=t||void 0}return r}}}matchStyle(e,t,r,n){for(let i=n?this.styles.indexOf(n)+1:0;i<this.styles.length;i++){let n=this.styles[i],o=n.style;if(!(0!=o.indexOf(e)||n.context&&!r.matchesContext(n.context)||o.length>e.length&&(61!=o.charCodeAt(e.length)||o.slice(e.length+1)!=t))){if(n.getAttrs){let e=n.getAttrs(t);if(!1===e)continue;n.attrs=e||void 0}return n}}}static schemaRules(e){let t=[];function r(e){let r=null==e.priority?50:e.priority,n=0;for(;n<t.length;n++){let e=t[n];if((null==e.priority?50:e.priority)<r)break}t.splice(n,0,e)}for(let n in e.marks){let t=e.marks[n].spec.parseDOM;t&&t.forEach(e=>{r(e=copy(e)),e.mark||e.ignore||e.clearMark||(e.mark=n)})}for(let n in e.nodes){let t=e.nodes[n].spec.parseDOM;t&&t.forEach(e=>{r(e=copy(e)),e.node||e.ignore||e.mark||(e.node=n)})}return t}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new e(t,e.schemaRules(t)))}};const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(e,t,r){return null!=t?(t?OPT_PRESERVE_WS:0)|("full"===t?OPT_PRESERVE_WS_FULL:0):e&&"pre"==e.whitespace?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:r&~OPT_OPEN_LEFT}class NodeContext{constructor(e,t,r,n,i,o){this.type=e,this.attrs=t,this.marks=r,this.solid=n,this.options=o,this.content=[],this.activeMarks=Mark$1.none,this.match=i||(o&OPT_OPEN_LEFT?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Fragment.from(e));if(!t){let t,r=this.type.contentMatch;return(t=r.findWrapping(e.type))?(this.match=r,t):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&OPT_PRESERVE_WS)){let e,t=this.content[this.content.length-1];if(t&&t.isText&&(e=/[ \t\r\n\u000c]+$/.exec(t.text))){let r=t;t.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-e[0].length))}}let t=Fragment.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!blockTags.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}let ParseContext$1=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let n,i=t.topNode,o=wsOptionsFor(null,t.preserveWhitespace,0)|(r?OPT_OPEN_LEFT:0);n=i?new NodeContext(i.type,i.attrs,Mark$1.none,!0,t.topMatch||i.type.contentMatch,o):new NodeContext(r?null:e.schema.topNodeType,null,Mark$1.none,!0,null,o),this.nodes=[n],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,n=this.top,i=n.options&OPT_PRESERVE_WS_FULL?"full":this.localPreserveWS||(n.options&OPT_PRESERVE_WS)>0,{schema:o}=this.parser;if("full"===i||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)if("full"===i)r=r.replace(/\r\n?/g,"\n");else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let e=r.split(/\r?\n|\r/);for(let r=0;r<e.length;r++)r&&this.insertNode(o.linebreakReplacement.create(),t,!0),e[r]&&this.insertNode(o.text(e[r]),t,!/\S/.test(e[r]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let t=n.content[n.content.length-1],i=e.previousSibling;(!t||i&&"BR"==i.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let n=this.localPreserveWS,i=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o,s=e.nodeName.toLowerCase();listTags.hasOwnProperty(s)&&this.parser.normalizeLists&&normalizeList(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,r));e:if(a?a.ignore:ignoreTags.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,t);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let r,n=this.needsBlock;if(blockTags.hasOwnProperty(s))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),r=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let o=a&&a.skip?t:this.readStyles(e,t);o&&this.addAll(e,o),r&&this.sync(i),this.needsBlock=n}else{let r=this.readStyles(e,t);r&&this.addElementByRule(e,a,r,!1===a.consuming?o:void 0)}this.localPreserveWS=n}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let n=0;n<this.parser.matchedStyles.length;n++){let e=this.parser.matchedStyles[n],i=r.getPropertyValue(e);if(i)for(let r;;){let n=this.parser.matchStyle(e,i,this,r);if(!n)break;if(n.ignore)return null;if(t=n.clearMark?t.filter(e=>!n.clearMark(e)):t.concat(this.parser.schema.marks[n.mark].create(n.attrs)),!1!==n.consuming)break;r=n}}return t}addElementByRule(e,t,r,n){let i,o;if(t.node)if(o=this.parser.schema.nodes[t.node],o.isLeaf)this.insertNode(o.create(t.attrs),r,"BR"==e.nodeName)||this.leafFallback(e,r);else{let e=this.enter(o,t.attrs||null,r,t.preserveWhitespace);e&&(i=!0,r=e)}else{let e=this.parser.schema.marks[t.mark];r=r.concat(e.create(t.attrs))}let s=this.top;if(o&&o.isLeaf)this.findInside(e);else if(n)this.addElement(e,r,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e,r,!1));else{let n=e;"string"==typeof t.contentElement?n=e.querySelector(t.contentElement):"function"==typeof t.contentElement?n=t.contentElement(e):t.contentElement&&(n=t.contentElement),this.findAround(e,n,!0),this.addAll(n,r),this.findAround(e,n,!1)}i&&this.sync(s)&&this.open--}addAll(e,t,r,n){let i=r||0;for(let o=r?e.childNodes[r]:e.firstChild,s=null==n?null:e.childNodes[n];o!=s;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,t);this.findAtPoint(e,i)}findPlace(e,t,r){let n,i;for(let o=this.open,s=0;o>=0;o--){let t=this.nodes[o],a=t.findWrapping(e);if(a&&(!n||n.length>a.length+s)&&(n=a,i=t,!a.length))break;if(t.solid){if(r)break;s+=2}}if(!n)return null;this.sync(i);for(let o=0;o<n.length;o++)t=this.enterInner(n[o],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(t=this.enterInner(e,null,t))}let n=this.findPlace(e,t,r);if(n){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(e.type));let r=Mark$1.none;for(let i of n.concat(e.marks))(t.type?t.type.allowsMarkType(i.type):markMayApply(i.type,e.type))&&(r=i.addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r,n){let i=this.findPlace(e.create(t),r,!1);return i&&(i=this.enterInner(e,t,r,!0,n)),i}enterInner(e,t,r,n=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let s=wsOptionsFor(e,i,o.options);o.options&OPT_OPEN_LEFT&&0==o.content.length&&(s|=OPT_OPEN_LEFT);let a=Mark$1.none;return r=r.filter(t=>!(o.type?o.type.allowsMarkType(t.type):markMayApply(t.type,e))||(a=t.addToSet(a),!1)),this.nodes.push(new NodeContext(e,t,a,n,null,s)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!(!this.isOpen&&!this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=OPT_PRESERVE_WS)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let t=r.length-1;t>=0;t--)e+=r[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let n=0;n<this.find.length;n++)null==this.find[n].pos&&1==e.nodeType&&e.contains(this.find[n].node)&&t.compareDocumentPosition(this.find[n].node)&(r?2:4)&&(this.find[n].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,n=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),i=-(r?r.depth+1:0)+(n?0:1),o=(e,s)=>{for(;e>=0;e--){let a=t[e];if(""==a){if(e==t.length-1||0==e)continue;for(;s>=i;s--)if(o(e-1,s))return!0;return!1}{let e=s>0||0==s&&n?this.nodes[s].type:r&&s>=i?r.node(s-i).type:null;if(!e||e.name!=a&&!e.isInGroup(a))return!1;s--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}};function normalizeList(e){for(let t=e.firstChild,r=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&listTags.hasOwnProperty(e)&&r?(r.appendChild(t),t=r):"li"==e?r=t:e&&(r=null)}}function matches$1(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function copy(e){let t={};for(let r in e)t[r]=e[r];return t}function markMayApply(e,t){let r=t.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(e))continue;let o=[],s=e=>{o.push(e);for(let r=0;r<e.edgeCount;r++){let{type:n,next:i}=e.edge(r);if(n==t)return!0;if(o.indexOf(i)<0&&s(i))return!0}};if(s(i.contentMatch))return!0}}class DOMSerializer{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=doc$2(t).createDocumentFragment());let n=r,i=[];return e.forEach(e=>{if(i.length||e.marks.length){let r=0,o=0;for(;r<i.length&&o<e.marks.length;){let t=e.marks[o];if(this.marks[t.type.name]){if(!t.eq(i[r][0])||!1===t.type.spec.spanning)break;r++,o++}else o++}for(;r<i.length;)n=i.pop()[1];for(;o<e.marks.length;){let r=e.marks[o++],s=this.serializeMark(r,e.isInline,t);s&&(i.push([r,n]),n.appendChild(s.dom),n=s.contentDOM||s.dom)}}n.appendChild(this.serializeNodeInner(e,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:n}=renderSpec(doc$2(t),this.nodes[e.type.name](e),null,e.attrs);if(n){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,n)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let n=e.marks.length-1;n>=0;n--){let i=this.serializeMark(e.marks[n],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,t,r={}){let n=this.marks[e.type.name];return n&&renderSpec(doc$2(r),n(e,t),null,e.attrs)}static renderSpec(e,t,r=null,n){return renderSpec(e,t,r,n)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=gatherToDOM(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return gatherToDOM(e.marks)}}function gatherToDOM(e){let t={};for(let r in e){let n=e[r].spec.toDOM;n&&(t[r]=n)}return t}function doc$2(e){return e.document||window.document}const suspiciousAttributeCache=new WeakMap;function suspiciousAttributes(e){let t=suspiciousAttributeCache.get(e);return void 0===t&&suspiciousAttributeCache.set(e,t=suspiciousAttributesInner(e)),t}function suspiciousAttributesInner(e){let t=null;return function e(r){if(r&&"object"==typeof r)if(Array.isArray(r))if("string"==typeof r[0])t||(t=[]),t.push(r);else for(let t=0;t<r.length;t++)e(r[t]);else for(let t in r)e(r[t])}(e),t}function renderSpec(e,t,r,n){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let i,o=t[0];if("string"!=typeof o)throw new RangeError("Invalid array passed to renderSpec");if(n&&(i=suspiciousAttributes(n))&&i.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s,a=o.indexOf(" ");a>0&&(r=o.slice(0,a),o=o.slice(a+1));let l=r?e.createElementNS(r,o):e.createElement(o),c=t[1],u=1;if(c&&"object"==typeof c&&null==c.nodeType&&!Array.isArray(c)){u=2;for(let e in c)if(null!=c[e]){let t=e.indexOf(" ");t>0?l.setAttributeNS(e.slice(0,t),e.slice(t+1),c[e]):"style"==e&&l.style?l.style.cssText=c[e]:l.setAttribute(e,c[e])}}for(let d=u;d<t.length;d++){let i=t[d];if(0===i){if(d<t.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}{let{dom:t,contentDOM:o}=renderSpec(e,i,r,n);if(l.appendChild(t),o){if(s)throw new RangeError("Multiple content holes");s=o}}}return{dom:l,contentDOM:s}}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(e,t){return e+t*factor16}function recoverIndex(e){return e&lower16}function recoverOffset(e){return(e-(e&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&StepMap.empty)return StepMap.empty}recover(e){let t=0,r=recoverIndex(e);if(!this.inverted)for(let n=0;n<r;n++)t+=this.ranges[3*n+2]-this.ranges[3*n+1];return this.ranges[3*r]+t+recoverOffset(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let n=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let a=this.ranges[s]-(this.inverted?n:0);if(a>e)break;let l=this.ranges[s+i],c=this.ranges[s+o],u=a+l;if(e<=u){let i=a+n+((l?e==a?-1:e==u?1:t:t)<0?0:c);if(r)return i;let o=e==(t<0?a:u)?null:makeRecover(s/3,e-a),d=e==a?DEL_AFTER:e==u?DEL_BEFORE:DEL_ACROSS;return(t<0?e!=a:e!=u)&&(d|=DEL_SIDE),new MapResult(i,d,o)}n+=c-l}return r?e+n:new MapResult(e+n,0,null)}touches(e,t){let r=0,n=recoverIndex(t),i=this.inverted?2:1,o=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let t=this.ranges[s]-(this.inverted?r:0);if(t>e)break;let a=this.ranges[s+i];if(e<=t+a&&s==3*n)return!0;r+=this.ranges[s+o]-a}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let n=0,i=0;n<this.ranges.length;n+=3){let o=this.ranges[n],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),l=this.ranges[n+t],c=this.ranges[n+r];e(s,s+l,a,a+c),i+=c-l}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?StepMap.empty:new StepMap(e<0?[0,-e,0]:[0,0,e])}}StepMap.empty=new StepMap([]);class Mapping{constructor(e,t,r=0,n=(e?e.length:0)){this.mirror=t,this.from=r,this.to=n,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Mapping(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),null!=t&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let n=e.getMirror(t);this.appendMap(e._maps[t],null!=n&&n<t?r+n:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let n=e.getMirror(t);this.appendMap(e._maps[t].invert(),null!=n&&n>t?r-n-1:void 0)}}invert(){let e=new Mapping;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let n=0;for(let i=this.from;i<this.to;i++){let r=this._maps[i].mapResult(e,t);if(null!=r.recover){let t=this.getMirror(i);if(null!=t&&t>i&&t<this.to){i=t,e=this._maps[t].recover(r.recover);continue}}n|=r.delInfo,e=r.pos}return r?e:new MapResult(e,n,null)}}const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=stepsByID[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+e);return stepsByID[e]=t,t.prototype.jsonID=e,t}}class StepResult{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new StepResult(e,null)}static fail(e){return new StepResult(null,e)}static fromReplace(e,t,r,n){try{return StepResult.ok(e.replace(t,r,n))}catch(i){if(i instanceof ReplaceError)return StepResult.fail(i.message);throw i}}}function mapFragment(e,t,r){let n=[];for(let i=0;i<e.childCount;i++){let o=e.child(i);o.content.size&&(o=o.copy(mapFragment(o.content,t,o))),o.isInline&&(o=t(o,r,i)),n.push(o)}return Fragment.fromArray(n)}class AddMarkStep extends Step{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),n=r.node(r.sharedDepth(this.to)),i=new Slice(mapFragment(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,n),t.openStart,t.openEnd);return StepResult.fromReplace(e,this.from,this.to,i)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new AddMarkStep(t.pos,r.pos,this.mark)}merge(e){return e instanceof AddMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new AddMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(t.from,t.to,e.markFromJSON(t.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new Slice(mapFragment(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return StepResult.fromReplace(e,this.from,this.to,r)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new RemoveMarkStep(t.pos,r.pos,this.mark)}merge(e){return e instanceof RemoveMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new RemoveMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(t.from,t.to,e.markFromJSON(t.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return StepResult.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let r=0;r<t.marks.length;r++)if(!t.marks[r].isInSet(e))return new AddNodeMarkStep(this.pos,t.marks[r]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new AddNodeMarkStep(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(t.pos,e.markFromJSON(t.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return StepResult.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new AddNodeMarkStep(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new RemoveNodeMarkStep(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(t.pos,e.markFromJSON(t.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(e,t,r,n=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=n}apply(e){return this.structure&&contentBetween(e,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(e){return new ReplaceStep(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new ReplaceStep(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof ReplaceStep)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?Slice.empty:new Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ReplaceStep(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?Slice.empty:new Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ReplaceStep(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(t.from,t.to,Slice.fromJSON(e,t.slice),!!t.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(e,t,r,n,i,o,s=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=n,this.slice=i,this.insert=o,this.structure=s}apply(e){if(this.structure&&(contentBetween(e,this.from,this.gapFrom)||contentBetween(e,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return StepResult.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?StepResult.fromReplace(e,this.from,this.to,r):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),n=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||n<t.pos||i>r.pos?null:new ReplaceAroundStep(t.pos,r.pos,n,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(t.from,t.to,t.gapFrom,t.gapTo,Slice.fromJSON(e,t.slice),t.insert,!!t.structure)}}function contentBetween(e,t,r){let n=e.resolve(t),i=r-t,o=n.depth;for(;i>0&&o>0&&n.indexAfter(o)==n.node(o).childCount;)o--,i--;if(i>0){let e=n.node(o).maybeChild(n.indexAfter(o));for(;i>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,i--}}return!1}function addMark(e,t,r,n){let i,o,s=[],a=[];e.doc.nodesBetween(t,r,(e,l,c)=>{if(!e.isInline)return;let u=e.marks;if(!n.isInSet(u)&&c.type.allowsMarkType(n.type)){let c=Math.max(l,t),d=Math.min(l+e.nodeSize,r),p=n.addToSet(u);for(let e=0;e<u.length;e++)u[e].isInSet(p)||(i&&i.to==c&&i.mark.eq(u[e])?i.to=d:s.push(i=new RemoveMarkStep(c,d,u[e])));o&&o.to==c?o.to=d:a.push(o=new AddMarkStep(c,d,n))}}),s.forEach(t=>e.step(t)),a.forEach(t=>e.step(t))}function removeMark(e,t,r,n){let i=[],o=0;e.doc.nodesBetween(t,r,(e,s)=>{if(!e.isInline)return;o++;let a=null;if(n instanceof MarkType){let t,r=e.marks;for(;t=n.isInSet(r);)(a||(a=[])).push(t),r=t.removeFromSet(r)}else n?n.isInSet(e.marks)&&(a=[n]):a=e.marks;if(a&&a.length){let n=Math.min(s+e.nodeSize,r);for(let e=0;e<a.length;e++){let r,l=a[e];for(let e=0;e<i.length;e++){let t=i[e];t.step==o-1&&l.eq(i[e].style)&&(r=t)}r?(r.to=n,r.step=o):i.push({style:l,from:Math.max(s,t),to:n,step:o})}}}),i.forEach(t=>e.step(new RemoveMarkStep(t.from,t.to,t.style)))}function clearIncompatible(e,t,r,n=r.contentMatch,i=!0){let o=e.doc.nodeAt(t),s=[],a=t+1;for(let l=0;l<o.childCount;l++){let t=o.child(l),c=a+t.nodeSize,u=n.matchType(t.type);if(u){n=u;for(let n=0;n<t.marks.length;n++)r.allowsMarkType(t.marks[n].type)||e.step(new RemoveMarkStep(a,c,t.marks[n]));if(i&&t.isText&&"pre"!=r.whitespace){let e,n,i=/\r?\n|\r/g;for(;e=i.exec(t.text);)n||(n=new Slice(Fragment.from(r.schema.text(" ",r.allowedMarks(t.marks))),0,0)),s.push(new ReplaceStep(a+e.index,a+e.index+e[0].length,n))}}else s.push(new ReplaceStep(a,c,Slice.empty));a=c}if(!n.validEnd){let t=n.fillBefore(Fragment.empty,!0);e.replace(a,a,new Slice(t,0,0))}for(let l=s.length-1;l>=0;l--)e.step(s[l])}function canCut(e,t,r){return(0==t||e.canReplace(t,e.childCount))&&(r==e.childCount||e.canReplace(0,r))}function liftTarget(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let n=e.$from.node(r),i=e.$from.index(r),o=e.$to.indexAfter(r);if(r<e.depth&&n.canReplace(i,o,t))return r;if(0==r||n.type.spec.isolating||!canCut(n,i,o))break}return null}function lift$3(e,t,r){let{$from:n,$to:i,depth:o}=t,s=n.before(o+1),a=i.after(o+1),l=s,c=a,u=Fragment.empty,d=0;for(let f=o,m=!1;f>r;f--)m||n.index(f)>0?(m=!0,u=Fragment.from(n.node(f).copy(u)),d++):l--;let p=Fragment.empty,h=0;for(let f=o,m=!1;f>r;f--)m||i.after(f+1)<i.end(f)?(m=!0,p=Fragment.from(i.node(f).copy(p)),h++):c++;e.step(new ReplaceAroundStep(l,c,s,a,new Slice(u.append(p),d,h),u.size-d,!0))}function findWrapping(e,t,r=null,n=e){let i=findWrappingOutside(e,t),o=i&&findWrappingInside(n,t);return o?i.map(withAttrs).concat({type:t,attrs:r}).concat(o.map(withAttrs)):null}function withAttrs(e){return{type:e,attrs:null}}function findWrappingOutside(e,t){let{parent:r,startIndex:n,endIndex:i}=e,o=r.contentMatchAt(n).findWrapping(t);if(!o)return null;let s=o.length?o[0]:t;return r.canReplaceWith(n,i,s)?o:null}function findWrappingInside(e,t){let{parent:r,startIndex:n,endIndex:i}=e,o=r.child(n),s=t.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:t).contentMatch;for(let l=n;a&&l<i;l++)a=a.matchType(r.child(l).type);return a&&a.validEnd?s:null}function wrap$1(e,t,r){let n=Fragment.empty;for(let s=r.length-1;s>=0;s--){if(n.size){let e=r[s].type.contentMatch.matchFragment(n);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=Fragment.from(r[s].type.create(r[s].attrs,n))}let i=t.start,o=t.end;e.step(new ReplaceAroundStep(i,o,i,o,new Slice(n,0,0),r.length,!0))}function setBlockType$1(e,t,r,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=e.steps.length;e.doc.nodesBetween(t,r,(t,r)=>{let s="function"==typeof i?i(t):i;if(t.isTextblock&&!t.hasMarkup(n,s)&&canChangeType(e.doc,e.mapping.slice(o).map(r),n)){let i=null;if(n.schema.linebreakReplacement){let e="pre"==n.whitespace,t=!!n.contentMatch.matchType(n.schema.linebreakReplacement);e&&!t?i=!1:!e&&t&&(i=!0)}!1===i&&replaceLinebreaks(e,t,r,o),clearIncompatible(e,e.mapping.slice(o).map(r,1),n,void 0,null===i);let a=e.mapping.slice(o),l=a.map(r,1),c=a.map(r+t.nodeSize,1);return e.step(new ReplaceAroundStep(l,c,l+1,c-1,new Slice(Fragment.from(n.create(s,null,t.marks)),0,0),1,!0)),!0===i&&replaceNewlines(e,t,r,o),!1}})}function replaceNewlines(e,t,r,n){t.forEach((i,o)=>{if(i.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(i.text);){let i=e.mapping.slice(n).map(r+1+o+s.index);e.replaceWith(i,i+1,t.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(e,t,r,n){t.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let i=e.mapping.slice(n).map(r+1+o);e.replaceWith(i,i+1,t.type.schema.text("\n"))}})}function canChangeType(e,t,r){let n=e.resolve(t),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}function setNodeMarkup(e,t,r,n,i){let o=e.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");r||(r=o.type);let s=r.create(n,null,i||o.marks);if(o.isLeaf)return e.replaceWith(t,t+o.nodeSize,s);if(!r.validContent(o.content))throw new RangeError("Invalid content for node type "+r.name);e.step(new ReplaceAroundStep(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new Slice(Fragment.from(s),0,0),1,!0))}function canSplit(e,t,r=1,n){let i=e.resolve(t),o=i.depth-r,s=n&&n[n.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=r-2;c>o;c--,u--){let e=i.node(c),t=i.index(c);if(e.type.spec.isolating)return!1;let r=e.content.cutByIndex(t,e.childCount),o=n&&n[u+1];o&&(r=r.replaceChild(0,o.type.create(o.attrs)));let s=n&&n[u]||e;if(!e.canReplace(t+1,e.childCount)||!s.type.validContent(r))return!1}let a=i.indexAfter(o),l=n&&n[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function split$1(e,t,r=1,n){let i=e.doc.resolve(t),o=Fragment.empty,s=Fragment.empty;for(let a=i.depth,l=i.depth-r,c=r-1;a>l;a--,c--){o=Fragment.from(i.node(a).copy(o));let e=n&&n[c];s=Fragment.from(e?e.type.create(e.attrs,s):i.node(a).copy(s))}e.step(new ReplaceStep(t,t,new Slice(o.append(s),r,r),!0))}function canJoin(e,t){let r=e.resolve(t),n=r.index();return joinable(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function canAppendWithSubstitutedLinebreaks(e,t){t.content.size||e.type.compatibleContent(t.type);let r=e.contentMatchAt(e.childCount),{linebreakReplacement:n}=e.type.schema;for(let i=0;i<t.childCount;i++){let o=t.child(i),s=o.type==n?e.type.schema.nodes.text:o.type;if(r=r.matchType(s),!r)return!1;if(!e.type.allowsMarks(o.marks))return!1}return r.validEnd}function joinable(e,t){return!(!e||!t||e.isLeaf||!canAppendWithSubstitutedLinebreaks(e,t))}function join(e,t,r){let n=null,{linebreakReplacement:i}=e.doc.type.schema,o=e.doc.resolve(t-r),s=o.node().type;if(i&&s.inlineContent){let e="pre"==s.whitespace,t=!!s.contentMatch.matchType(i);e&&!t?n=!1:!e&&t&&(n=!0)}let a=e.steps.length;if(!1===n){let n=e.doc.resolve(t+r);replaceLinebreaks(e,n.node(),n.before(),a)}s.inlineContent&&clearIncompatible(e,t+r-1,s,o.node().contentMatchAt(o.index()),null==n);let l=e.mapping.slice(a),c=l.map(t-r);if(e.step(new ReplaceStep(c,l.map(t+r,-1),Slice.empty,!0)),!0===n){let t=e.doc.resolve(c);replaceNewlines(e,t.node(),t.before(),e.steps.length)}return e}function insertPoint(e,t,r){let n=e.resolve(t);if(n.parent.canReplaceWith(n.index(),n.index(),r))return t;if(0==n.parentOffset)for(let i=n.depth-1;i>=0;i--){let e=n.index(i);if(n.node(i).canReplaceWith(e,e,r))return n.before(i+1);if(e>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let e=n.indexAfter(i);if(n.node(i).canReplaceWith(e,e,r))return n.after(i+1);if(e<n.node(i).childCount)return null}return null}function dropPoint(e,t,r){let n=e.resolve(t);if(!r.content.size)return t;let i=r.content;for(let o=0;o<r.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(0==r.openStart&&r.size?2:1);o++)for(let e=n.depth;e>=0;e--){let t=e==n.depth?0:n.pos<=(n.start(e+1)+n.end(e+1))/2?-1:1,r=n.index(e)+(t>0?1:0),s=n.node(e),a=!1;if(1==o)a=s.canReplace(r,r,i);else{let e=s.contentMatchAt(r).findWrapping(i.firstChild.type);a=e&&s.canReplaceWith(r,r,e[0])}if(a)return 0==t?n.pos:t<0?n.before(e+1):n.after(e+1)}return null}function replaceStep(e,t,r=t,n=Slice.empty){if(t==r&&!n.size)return null;let i=e.resolve(t),o=e.resolve(r);return fitsTrivially(i,o,n)?new ReplaceStep(t,r,n):new Fitter(i,o,n).fit()}function fitsTrivially(e,t,r){return!r.openStart&&!r.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),r.content)}Step.jsonID("replaceAround",ReplaceAroundStep);class Fitter{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=Fragment.empty;for(let n=0;n<=e.depth;n++){let t=e.node(n);this.frontier.push({type:t.type,match:t.contentMatchAt(e.indexAfter(n))})}for(let n=e.depth;n>0;n--)this.placed=Fragment.from(e.node(n).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,n=this.close(e<0?this.$to:r.doc.resolve(e));if(!n)return null;let i=this.placed,o=r.depth,s=n.depth;for(;o&&s&&1==i.childCount;)i=i.firstChild.content,o--,s--;let a=new Slice(i,o,s);return e>-1?new ReplaceAroundStep(r.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||r.pos!=this.$to.pos?new ReplaceStep(r.pos,n.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,n=this.unplaced.openEnd;r<e;r++){let i=t.firstChild;if(t.childCount>1&&(n=0),i.type.spec.isolating&&n<=r){e=r;break}t=i.content}for(let t=1;t<=2;t++)for(let r=1==t?e:this.unplaced.openStart;r>=0;r--){let e,n=null;r?(n=contentAt(this.unplaced.content,r-1).firstChild,e=n.content):e=this.unplaced.content;let i=e.firstChild;for(let o=this.depth;o>=0;o--){let e,{type:s,match:a}=this.frontier[o],l=null;if(1==t&&(i?a.matchType(i.type)||(l=a.fillBefore(Fragment.from(i),!1)):n&&s.compatibleContent(n.type)))return{sliceDepth:r,frontierDepth:o,parent:n,inject:l};if(2==t&&i&&(e=a.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:o,parent:n,wrap:e};if(n&&a.matchType(n.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,n=contentAt(e,t);return!(!n.childCount||n.firstChild.isLeaf||(this.unplaced=new Slice(e,t+1,Math.max(r,n.size+t>=e.size-r?t+1:0)),0))}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,n=contentAt(e,t);if(n.childCount<=1&&t>0){let i=e.size-t<=t+n.size;this.unplaced=new Slice(dropFromFragment(e,t-1,1),t-1,i?t-1:r)}else this.unplaced=new Slice(dropFromFragment(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:n,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let f=0;f<i.length;f++)this.openFrontierNode(i[f]);let o=this.unplaced,s=r?r.content:o.content,a=o.openStart-e,l=0,c=[],{match:u,type:d}=this.frontier[t];if(n){for(let e=0;e<n.childCount;e++)c.push(n.child(e));u=u.matchFragment(n)}let p=s.size+e-(o.content.size-o.openEnd);for(;l<s.childCount;){let e=s.child(l),t=u.matchType(e.type);if(!t)break;l++,(l>1||0==a||e.content.size)&&(u=t,c.push(closeNodeStart(e.mark(d.allowedMarks(e.marks)),1==l?a:0,l==s.childCount?p:-1)))}let h=l==s.childCount;h||(p=-1),this.placed=addToFragment(this.placed,t,Fragment.from(c)),this.frontier[t].match=u,h&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let f=0,m=s;f<p;f++){let e=m.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),m=e.content}this.unplaced=h?0==e?Slice.empty:new Slice(dropFromFragment(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new Slice(dropFromFragment(o.content,e,l),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:r}=this.$to,n=this.$to.after(r);for(;r>1&&n==this.$to.end(--r);)++n;return n}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:n}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=contentAfterFits(e,t,n,r,i);if(o){for(let r=t-1;r>=0;r--){let{match:t,type:n}=this.frontier[r],i=contentAfterFits(e,r,n,t,!0);if(!i||i.childCount)continue e}return{depth:t,fit:o,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=addToFragment(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let t=e.node(r),n=t.type.contentMatch.fillBefore(t.content,!0,e.index(r));this.openFrontierNode(t.type,t.attrs,n)}return e}openFrontierNode(e,t=null,r){let n=this.frontier[this.depth];n.match=n.match.matchType(e),this.placed=addToFragment(this.placed,this.depth,Fragment.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(Fragment.empty,!0);e.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,e))}}function dropFromFragment(e,t,r){return 0==t?e.cutByIndex(r,e.childCount):e.replaceChild(0,e.firstChild.copy(dropFromFragment(e.firstChild.content,t-1,r)))}function addToFragment(e,t,r){return 0==t?e.append(r):e.replaceChild(e.childCount-1,e.lastChild.copy(addToFragment(e.lastChild.content,t-1,r)))}function contentAt(e,t){for(let r=0;r<t;r++)e=e.firstChild.content;return e}function closeNodeStart(e,t,r){if(t<=0)return e;let n=e.content;return t>1&&(n=n.replaceChild(0,closeNodeStart(n.firstChild,t-1,1==n.childCount?r-1:0))),t>0&&(n=e.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(e.type.contentMatch.matchFragment(n).fillBefore(Fragment.empty,!0)))),e.copy(n)}function contentAfterFits(e,t,r,n,i){let o=e.node(t),s=i?e.indexAfter(t):e.index(t);if(s==o.childCount&&!r.compatibleContent(o.type))return null;let a=n.fillBefore(o.content,!0,s);return a&&!invalidMarks(r,o.content,s)?a:null}function invalidMarks(e,t,r){for(let n=r;n<t.childCount;n++)if(!e.allowsMarks(t.child(n).marks))return!0;return!1}function definesContent(e){return e.spec.defining||e.spec.definingForContent}function replaceRange$1(e,t,r,n){if(!n.size)return e.deleteRange(t,r);let i=e.doc.resolve(t),o=e.doc.resolve(r);if(fitsTrivially(i,o,n))return e.step(new ReplaceStep(t,r,n));let s=coveredDepths(i,e.doc.resolve(r));0==s[s.length-1]&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let p=i.depth,h=i.pos-1;p>0;p--,h--){let e=i.node(p).type.spec;if(e.defining||e.definingAsContext||e.isolating)break;s.indexOf(p)>-1?a=p:i.before(p)==h&&s.splice(1,0,-p)}let l=s.indexOf(a),c=[],u=n.openStart;for(let p=n.content,h=0;;h++){let e=p.firstChild;if(c.push(e),h==n.openStart)break;p=e.content}for(let p=u-1;p>=0;p--){let e=c[p],t=definesContent(e.type);if(t&&!e.sameMarkup(i.node(Math.abs(a)-1)))u=p;else if(t||!e.type.isTextblock)break}for(let p=n.openStart;p>=0;p--){let t=(p+u+1)%(n.openStart+1),a=c[t];if(a)for(let c=0;c<s.length;c++){let u=s[(c+l)%s.length],d=!0;u<0&&(d=!1,u=-u);let p=i.node(u-1),h=i.index(u-1);if(p.canReplaceWith(h,h,a.type,a.marks))return e.replace(i.before(u),d?o.after(u):r,new Slice(closeFragment(n.content,0,n.openStart,t),t,n.openEnd))}}let d=e.steps.length;for(let p=s.length-1;p>=0&&(e.replace(t,r,n),!(e.steps.length>d));p--){let e=s[p];e<0||(t=i.before(e),r=o.after(e))}}function closeFragment(e,t,r,n,i){if(t<r){let i=e.firstChild;e=e.replaceChild(0,i.copy(closeFragment(i.content,t+1,r,n,i)))}if(t>n){let t=i.contentMatchAt(0),r=t.fillBefore(e).append(e);e=r.append(t.matchFragment(r).fillBefore(Fragment.empty,!0))}return e}function replaceRangeWith(e,t,r,n){if(!n.isInline&&t==r&&e.doc.resolve(t).parent.content.size){let i=insertPoint(e.doc,t,n.type);null!=i&&(t=r=i)}e.replaceRange(t,r,new Slice(Fragment.from(n),0,0))}function deleteRange(e,t,r){let n=e.doc.resolve(t),i=e.doc.resolve(r),o=coveredDepths(n,i);for(let s=0;s<o.length;s++){let t=o[s],r=s==o.length-1;if(r&&0==t||n.node(t).type.contentMatch.validEnd)return e.delete(n.start(t),i.end(t));if(t>0&&(r||n.node(t-1).canReplace(n.index(t-1),i.indexAfter(t-1))))return e.delete(n.before(t),i.after(t))}for(let s=1;s<=n.depth&&s<=i.depth;s++)if(t-n.start(s)==n.depth-s&&r>n.end(s)&&i.end(s)-r!=i.depth-s&&n.start(s-1)==i.start(s-1)&&n.node(s-1).canReplace(n.index(s-1),i.index(s-1)))return e.delete(n.before(s),r);e.delete(t,r)}function coveredDepths(e,t){let r=[];for(let n=Math.min(e.depth,t.depth);n>=0;n--){let i=e.start(n);if(i<e.pos-(e.depth-n)||t.end(n)>t.pos+(t.depth-n)||e.node(n).type.spec.isolating||t.node(n).type.spec.isolating)break;(i==t.start(n)||n==e.depth&&n==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&n&&t.start(n-1)==i-1)&&r.push(n)}return r}class AttrStep extends Step{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return StepResult.fail("No node at attribute step's position");let r=Object.create(null);for(let i in t.attrs)r[i]=t.attrs[i];r[this.attr]=this.value;let n=t.type.create(r,null,t.marks);return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(n),0,t.isLeaf?0:1))}getMap(){return StepMap.empty}invert(e){return new AttrStep(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new AttrStep(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(t.pos,t.attr,t.value)}}Step.jsonID("attr",AttrStep);class DocAttrStep extends Step{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let n in e.attrs)t[n]=e.attrs[n];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return StepResult.ok(r)}getMap(){return StepMap.empty}invert(e){return new DocAttrStep(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(t.attr,t.value)}}Step.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function e(t){let r=Error.call(this,t);return r.__proto__=e.prototype,r},TransformError.prototype=Object.create(Error.prototype),TransformError.prototype.constructor=TransformError,TransformError.prototype.name="TransformError";class Transform{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new TransformError(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=Slice.empty){let n=replaceStep(this.doc,e,t,r);return n&&this.step(n),this}replaceWith(e,t,r){return this.replace(e,t,new Slice(Fragment.from(r),0,0))}delete(e,t){return this.replace(e,t,Slice.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return replaceRange$1(this,e,t,r),this}replaceRangeWith(e,t,r){return replaceRangeWith(this,e,t,r),this}deleteRange(e,t){return deleteRange(this,e,t),this}lift(e,t){return lift$3(this,e,t),this}join(e,t=1){return join(this,e,t),this}wrap(e,t){return wrap$1(this,e,t),this}setBlockType(e,t=e,r,n=null){return setBlockType$1(this,e,t,r,n),this}setNodeMarkup(e,t,r=null,n){return setNodeMarkup(this,e,t,r,n),this}setNodeAttribute(e,t,r){return this.step(new AttrStep(e,t,r)),this}setDocAttribute(e,t){return this.step(new DocAttrStep(e,t)),this}addNodeMark(e,t){return this.step(new AddNodeMarkStep(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof Mark$1)t.isInSet(r.marks)&&this.step(new RemoveNodeMarkStep(e,t));else{let n,i=r.marks,o=[];for(;n=t.isInSet(i);)o.push(new RemoveNodeMarkStep(e,n)),i=n.removeFromSet(i);for(let e=o.length-1;e>=0;e--)this.step(o[e])}return this}split(e,t=1,r){return split$1(this,e,t,r),this}addMark(e,t,r){return addMark(this,e,t,r),this}removeMark(e,t,r){return removeMark(this,e,t,r),this}clearIncompatible(e,t,r){return clearIncompatible(this,e,t,r),this}}const classesById=Object.create(null);let Selection$1=class{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new SelectionRange$1(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Slice.empty){let r=t.content.lastChild,n=null;for(let s=0;s<t.openEnd;s++)n=r,r=r.lastChild;let i=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:a,$to:l}=o[s],c=e.mapping.slice(i);e.replaceRange(c.map(a.pos),c.map(l.pos),s?Slice.empty:t),0==s&&selectionToInsertionEnd(e,i,(r?r.isInline:n&&n.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,n=this.ranges;for(let i=0;i<n.length;i++){let{$from:o,$to:s}=n[i],a=e.mapping.slice(r),l=a.map(o.pos),c=a.map(s.pos);i?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),selectionToInsertionEnd(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let n=e.parent.inlineContent?new TextSelection(e):findSelectionIn(e.node(0),e.parent,e.pos,e.index(),t,r);if(n)return n;for(let i=e.depth-1;i>=0;i--){let n=t<0?findSelectionIn(e.node(0),e.node(i),e.before(i+1),e.index(i),t,r):findSelectionIn(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,r);if(n)return n}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new AllSelection(e.node(0))}static atStart(e){return findSelectionIn(e,e,0,0,1)||new AllSelection(e)}static atEnd(e){return findSelectionIn(e,e,e.content.size,e.childCount,-1)||new AllSelection(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=classesById[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in classesById)throw new RangeError("Duplicate use of selection JSON ID "+e);return classesById[e]=t,t.prototype.jsonID=e,t}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}};Selection$1.prototype.visible=!0;let SelectionRange$1=class{constructor(e,t){this.$from=e,this.$to=t}},warnedAboutTextSelection=!1;function checkTextSelection(e){warnedAboutTextSelection||e.parent.inlineContent||(warnedAboutTextSelection=!0)}class TextSelection extends Selection$1{constructor(e,t=e){checkTextSelection(e),checkTextSelection(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return Selection$1.near(r);let n=e.resolve(t.map(this.anchor));return new TextSelection(n.parent.inlineContent?n:r,r)}replace(e,t=Slice.empty){if(super.replace(e,t),t==Slice.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof TextSelection&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let n=e.resolve(t);return new this(n,r==t?n:e.resolve(r))}static between(e,t,r){let n=e.pos-t.pos;if(r&&!n||(r=n>=0?1:-1),!t.parent.inlineContent){let e=Selection$1.findFrom(t,r,!0)||Selection$1.findFrom(t,-r,!0);if(!e)return Selection$1.near(t,r);t=e.$head}return e.parent.inlineContent||(0==n||(e=(Selection$1.findFrom(e,-r,!0)||Selection$1.findFrom(e,r,!0)).$anchor).pos<t.pos!=n<0)&&(e=t),new TextSelection(e,t)}}Selection$1.jsonID("text",TextSelection);class TextBookmark{constructor(e,t){this.anchor=e,this.head=t}map(e){return new TextBookmark(e.map(this.anchor),e.map(this.head))}resolve(e){return TextSelection.between(e.resolve(this.anchor),e.resolve(this.head))}}class NodeSelection extends Selection$1{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:n}=t.mapResult(this.anchor),i=e.resolve(n);return r?Selection$1.near(i):new NodeSelection(i)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(e){return e instanceof NodeSelection&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(e.resolve(t.anchor))}static create(e,t){return new NodeSelection(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}NodeSelection.prototype.visible=!1,Selection$1.jsonID("node",NodeSelection);class NodeBookmark{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new TextBookmark(r,r):new NodeBookmark(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&NodeSelection.isSelectable(r)?new NodeSelection(t):Selection$1.near(t)}}class AllSelection extends Selection$1{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Slice.empty){if(t==Slice.empty){e.delete(0,e.doc.content.size);let t=Selection$1.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new AllSelection(e)}map(e){return new AllSelection(e)}eq(e){return e instanceof AllSelection}getBookmark(){return AllBookmark}}Selection$1.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve:e=>new AllSelection(e)};function findSelectionIn(e,t,r,n,i,o=!1){if(t.inlineContent)return TextSelection.create(e,r);for(let s=n-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){let n=t.child(s);if(n.isAtom){if(!o&&NodeSelection.isSelectable(n))return NodeSelection.create(e,r-(i<0?n.nodeSize:0))}else{let t=findSelectionIn(e,n,r+i,i<0?n.childCount:0,i,o);if(t)return t}r+=n.nodeSize*i}return null}function selectionToInsertionEnd(e,t,r){let n=e.steps.length-1;if(n<t)return;let i,o=e.steps[n];(o instanceof ReplaceStep||o instanceof ReplaceAroundStep)&&(e.mapping.maps[n].forEach((e,t,r,n)=>{null==i&&(i=n)}),e.setSelection(Selection$1.near(e.doc.resolve(i),r)))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;let Transaction$1=class extends Transform{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&~UPDATED_MARKS,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=UPDATED_MARKS,this}ensureMarks(e){return Mark$1.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~UPDATED_MARKS,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Mark$1.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let n=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(n.text(e),!0):this.deleteSelection();{if(null==r&&(r=t),!e)return this.deleteRange(t,r);let i=this.storedMarks;if(!i){let e=this.doc.resolve(t);i=r==t?e.marks():e.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,n.text(e,i)),this.selection.empty||this.selection.to!=t+e.length||this.setSelection(Selection$1.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}};function bind(e,t){return t&&e?e.bind(t):e}class FieldDesc{constructor(e,t,r){this.name=e,this.init=bind(t.init,r),this.apply=bind(t.apply,r)}}const baseFields=[new FieldDesc("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new FieldDesc("selection",{init:(e,t)=>e.selection||Selection$1.atStart(t.doc),apply:e=>e.selection}),new FieldDesc("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,r,n)=>n.selection.$cursor?e.storedMarks:null}),new FieldDesc("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];let Configuration$1=class{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new FieldDesc(e.key,e.spec.state,e))})}},EditorState$1=class e{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let t=this.config.plugins[r];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),n=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let s=this.config.plugins[o];if(s.spec.appendTransaction){let a=n?n[o].n:0,l=n?n[o].state:this,c=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,l,r);if(c&&r.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!n){n=[];for(let e=0;e<this.config.plugins.length;e++)n.push(e<o?{state:r,n:t.length}:{state:this,n:0})}t.push(c),r=r.applyInner(c),i=!0}n&&(n[o]={state:r,n:t.length})}}if(!i)return{state:r,transactions:t}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new e(this.config),n=this.config.fields;for(let e=0;e<n.length;e++){let i=n[e];r[i.name]=i.apply(t,this[i.name],this,r)}return r}get tr(){return new Transaction$1(this)}static create(t){let r=new Configuration$1(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new e(r);for(let e=0;e<r.fields.length;e++)n[r.fields[e].name]=r.fields[e].init(t,n);return n}reconfigure(t){let r=new Configuration$1(this.schema,t.plugins),n=r.fields,i=new e(r);for(let e=0;e<n.length;e++){let r=n[e].name;i[r]=this.hasOwnProperty(r)?this[r]:n[e].init(t,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let r in e){if("doc"==r||"selection"==r)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let n=e[r],i=n.spec.state;i&&i.toJSON&&(t[r]=i.toJSON.call(n,this[n.key]))}return t}static fromJSON(t,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new Configuration$1(t.schema,t.plugins),o=new e(i);return i.fields.forEach(e=>{if("doc"==e.name)o.doc=Node$2.fromJSON(t.schema,r.doc);else if("selection"==e.name)o.selection=Selection$1.fromJSON(o.doc,r.selection);else if("storedMarks"==e.name)r.storedMarks&&(o.storedMarks=r.storedMarks.map(t.schema.markFromJSON));else{if(n)for(let i in n){let s=n[i],a=s.spec.state;if(s.key==e.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(r,i))return void(o[e.name]=a.fromJSON.call(s,t,r[i],o))}o[e.name]=e.init(t,o)}}),o}};function bindProps(e,t,r){for(let n in e){let i=e[n];i instanceof Function?i=i.bind(t):"handleDOMEvents"==n&&(i=bindProps(i,t,{})),r[n]=i}return r}class Plugin{constructor(e){this.spec=e,this.props={},e.props&&bindProps(e.props,this,this.props),this.key=e.key?e.key.key:createKey("plugin")}getState(e){return e[this.key]}}const keys$2=Object.create(null);function createKey(e){return e in keys$2?e+"$"+ ++keys$2[e]:(keys$2[e]=0,e+"$")}class PluginKey{constructor(e="key"){this.key=createKey(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const domIndex$1=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},parentNode=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t};let reusedRange=null;const textRange$1=function(e,t,r){let n=reusedRange||(reusedRange=document.createRange());return n.setEnd(e,null==r?e.nodeValue.length:r),n.setStart(e,t||0),n},clearReusedRange=function(){reusedRange=null},isEquivalentPosition$1=function(e,t,r,n){return r&&(scanFor$1(e,t,r,n,-1)||scanFor$1(e,t,r,n,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor$1(e,t,r,n,i){for(var o;;){if(e==r&&t==n)return!0;if(t==(i<0?0:nodeSize$1(e))){let r=e.parentNode;if(!r||1!=r.nodeType||hasBlockDesc(e)||atomElements.test(e.nodeName)||"false"==e.contentEditable)return!1;t=domIndex$1(e)+(i<0?0:1),e=r}else{if(1!=e.nodeType)return!1;{let r=e.childNodes[t+(i<0?-1:0)];if(1==r.nodeType&&"false"==r.contentEditable){if(!(null===(o=r.pmViewDesc)||void 0===o?void 0:o.ignoreForSelection))return!1;t+=i}else e=r,t=i<0?nodeSize$1(e):0}}}}function nodeSize$1(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function textNodeBefore$1(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=nodeSize$1(e=e.childNodes[t-1])}else{if(!e.parentNode||hasBlockDesc(e))return null;t=domIndex$1(e),e=e.parentNode}}}function textNodeAfter$1(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||hasBlockDesc(e))return null;t=domIndex$1(e)+1,e=e.parentNode}}}function isOnEdge(e,t,r){for(let n=0==t,i=t==nodeSize$1(e);n||i;){if(e==r)return!0;let t=domIndex$1(e);if(!(e=e.parentNode))return!1;n=n&&0==t,i=i&&t==nodeSize$1(e)}}function hasBlockDesc(e){let t;for(let r=e;r&&!(t=r.pmViewDesc);r=r.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const selectionCollapsed=function(e){return e.focusNode&&isEquivalentPosition$1(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function keyEvent(e,t){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=e,r.key=r.code=t,r}function deepActiveElement(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function caretFromPoint(e,t,r){if(e.caretPositionFromPoint)try{let n=e.caretPositionFromPoint(t,r);if(n)return{node:n.offsetNode,offset:Math.min(nodeSize$1(n.offsetNode),n.offset)}}catch(n){}if(e.caretRangeFromPoint){let n=e.caretRangeFromPoint(t,r);if(n)return{node:n.startContainer,offset:Math.min(nodeSize$1(n.startContainer),n.startOffset)}}}const nav$1="undefined"!=typeof navigator?navigator:null,doc$1="undefined"!=typeof document?document:null,agent=nav$1&&nav$1.userAgent||"",ie_edge$1=/Edge\/(\d+)/.exec(agent),ie_upto10$1=/MSIE \d/.exec(agent),ie_11up$1=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$2=!!(ie_upto10$1||ie_11up$1||ie_edge$1),ie_version=ie_upto10$1?document.documentMode:ie_11up$1?+ie_11up$1[1]:ie_edge$1?+ie_edge$1[1]:0,gecko$1=!ie$2&&/gecko\/(\d+)/i.test(agent);gecko$1&&(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie$2&&/Chrome\/(\d+)/.exec(agent),chrome$1=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari$1=!ie$2&&!!nav$1&&/Apple Computer/.test(nav$1.vendor),ios$1=safari$1&&(/Mobile\/\w+/.test(agent)||!!nav$1&&nav$1.maxTouchPoints>2),mac$3=ios$1||!!nav$1&&/Mac/.test(nav$1.platform),windows$2=!!nav$1&&/Win/.test(nav$1.platform),android$1=/Android \d/.test(agent),webkit$1=!!doc$1&&"webkitFontSmoothing"in doc$1.documentElement.style,webkit_version=webkit$1?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect$1(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function getSide(e,t){return"number"==typeof e?e:e[t]}function clientRect(e){let t=e.getBoundingClientRect(),r=t.width/e.offsetWidth||1,n=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*r,top:t.top,bottom:t.top+e.clientHeight*n}}function scrollRectIntoView$1(e,t,r){let n=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument;for(let s=r||e.dom;s;){if(1!=s.nodeType){s=parentNode(s);continue}let e=s,r=e==o.body,a=r?windowRect$1(o):clientRect(e),l=0,c=0;if(t.top<a.top+getSide(n,"top")?c=-(a.top-t.top+getSide(i,"top")):t.bottom>a.bottom-getSide(n,"bottom")&&(c=t.bottom-t.top>a.bottom-a.top?t.top+getSide(i,"top")-a.top:t.bottom-a.bottom+getSide(i,"bottom")),t.left<a.left+getSide(n,"left")?l=-(a.left-t.left+getSide(i,"left")):t.right>a.right-getSide(n,"right")&&(l=t.right-a.right+getSide(i,"right")),l||c)if(r)o.defaultView.scrollBy(l,c);else{let r=e.scrollLeft,n=e.scrollTop;c&&(e.scrollTop+=c),l&&(e.scrollLeft+=l);let i=e.scrollLeft-r,o=e.scrollTop-n;t={left:t.left-i,top:t.top-o,right:t.right-i,bottom:t.bottom-o}}let u=r?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(u))break;s="absolute"==u?s.offsetParent:parentNode(s)}}function storeScrollPos(e){let t,r,n=e.dom.getBoundingClientRect(),i=Math.max(0,n.top);for(let o=(n.left+n.right)/2,s=i+1;s<Math.min(innerHeight,n.bottom);s+=5){let n=e.root.elementFromPoint(o,s);if(!n||n==e.dom||!e.dom.contains(n))continue;let a=n.getBoundingClientRect();if(a.top>=i-20){t=n,r=a.top;break}}return{refDOM:t,refTop:r,stack:scrollStack(e.dom)}}function scrollStack(e){let t=[],r=e.ownerDocument;for(let n=e;n&&(t.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),e!=r);n=parentNode(n));return t}function resetScrollPos({refDOM:e,refTop:t,stack:r}){let n=e?e.getBoundingClientRect().top:0;restoreScrollStack(r,0==n?0:n-t)}function restoreScrollStack(e,t){for(let r=0;r<e.length;r++){let{dom:n,top:i,left:o}=e[r];n.scrollTop!=i+t&&(n.scrollTop=i+t),n.scrollLeft!=o&&(n.scrollLeft=o)}}let preventScrollSupported$1=null;function focusPreventScroll$1(e){if(e.setActive)return e.setActive();if(preventScrollSupported$1)return e.focus(preventScrollSupported$1);let t=scrollStack(e);e.focus(null==preventScrollSupported$1?{get preventScroll(){return preventScrollSupported$1={preventScroll:!0},!0}}:void 0),preventScrollSupported$1||(preventScrollSupported$1=!1,restoreScrollStack(t,0))}function findOffsetInNode(e,t){let r,n,i,o,s=2e8,a=0,l=t.top,c=t.top;for(let u=e.firstChild,d=0;u;u=u.nextSibling,d++){let e;if(1==u.nodeType)e=u.getClientRects();else{if(3!=u.nodeType)continue;e=textRange$1(u).getClientRects()}for(let p=0;p<e.length;p++){let h=e[p];if(h.top<=l&&h.bottom>=c){l=Math.max(h.bottom,l),c=Math.min(h.top,c);let e=h.left>t.left?h.left-t.left:h.right<t.left?t.left-h.right:0;if(e<s){r=u,s=e,n=e&&3==r.nodeType?{left:h.right<t.left?h.right:h.left,top:t.top}:t,1==u.nodeType&&e&&(a=d+(t.left>=(h.left+h.right)/2?1:0));continue}}else h.top>t.top&&!i&&h.left<=t.left&&h.right>=t.left&&(i=u,o={left:Math.max(h.left,Math.min(h.right,t.left)),top:h.top});!r&&(t.left>=h.right&&t.top>=h.top||t.left>=h.left&&t.top>=h.bottom)&&(a=d+1)}}return!r&&i&&(r=i,n=o,s=0),r&&3==r.nodeType?findOffsetInText(r,n):!r||s&&1==r.nodeType?{node:e,offset:a}:findOffsetInNode(r,n)}function findOffsetInText(e,t){let r=e.nodeValue.length,n=document.createRange();for(let i=0;i<r;i++){n.setEnd(e,i+1),n.setStart(e,i);let r=singleRect(n,1);if(r.top!=r.bottom&&inRect(t,r))return{node:e,offset:i+(t.left>=(r.left+r.right)/2?1:0)}}return{node:e,offset:0}}function inRect(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function targetKludge(e,t){let r=e.parentNode;return r&&/^li$/i.test(r.nodeName)&&t.left<e.getBoundingClientRect().left?r:e}function posFromElement(e,t,r){let{node:n,offset:i}=findOffsetInNode(t,r),o=-1;if(1==n.nodeType&&!n.firstChild){let e=n.getBoundingClientRect();o=e.left!=e.right&&r.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(n,i,o)}function posFromCaret(e,t,r,n){let i=-1;for(let o=t,s=!1;o!=e.dom;){let t,r=e.docView.nearestDesc(o,!0);if(!r)return null;if(1==r.dom.nodeType&&(r.node.isBlock&&r.parent||!r.contentDOM)&&((t=r.dom.getBoundingClientRect()).width||t.height)&&(r.node.isBlock&&r.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(r.dom.nodeName)&&(!s&&t.left>n.left||t.top>n.top?i=r.posBefore:(!s&&t.right<n.left||t.bottom<n.top)&&(i=r.posAfter),s=!0),!r.contentDOM&&i<0&&!r.node.isText))return(r.node.isBlock?n.top<(t.top+t.bottom)/2:n.left<(t.left+t.right)/2)?r.posBefore:r.posAfter;o=r.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,r,-1)}function elementFromPoint(e,t,r){let n=e.childNodes.length;if(n&&r.top<r.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(t.top-r.top)/(r.bottom-r.top))-2)),o=i;;){let r=e.childNodes[o];if(1==r.nodeType){let e=r.getClientRects();for(let n=0;n<e.length;n++){let i=e[n];if(inRect(t,i))return elementFromPoint(r,t,i)}}if((o=(o+1)%n)==i)break}return e}function posAtCoords$1(e,t){let r,n=e.dom.ownerDocument,i=0,o=caretFromPoint(n,t.left,t.top);o&&({node:r,offset:i}=o);let s,a=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top);if(!a||!e.dom.contains(1!=a.nodeType?a.parentNode:a)){let r=e.dom.getBoundingClientRect();if(!inRect(t,r))return null;if(a=elementFromPoint(e.dom,t,r),!a)return null}if(safari$1)for(let c=a;r&&c;c=parentNode(c))c.draggable&&(r=void 0);if(a=targetKludge(a,t),r){if(gecko$1&&1==r.nodeType&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let e,n=r.childNodes[i];"IMG"==n.nodeName&&(e=n.getBoundingClientRect()).right<=t.left&&e.bottom>t.top&&i++}let n;webkit$1&&i&&1==r.nodeType&&1==(n=r.childNodes[i-1]).nodeType&&"false"==n.contentEditable&&n.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&1==r.lastChild.nodeType&&t.top>r.lastChild.getBoundingClientRect().bottom?s=e.state.doc.content.size:0!=i&&1==r.nodeType&&"BR"==r.childNodes[i-1].nodeName||(s=posFromCaret(e,r,i,t))}null==s&&(s=posFromElement(e,a,t));let l=e.docView.nearestDesc(a,!0);return{pos:s,inside:l?l.posAtStart-l.border:-1}}function nonZero(e){return e.top<e.bottom||e.left<e.right}function singleRect(e,t){let r=e.getClientRects();if(r.length){let e=r[t<0?0:r.length-1];if(nonZero(e))return e}return Array.prototype.find.call(r,nonZero)||e.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(e,t,r){let{node:n,offset:i,atom:o}=e.docView.domFromPos(t,r<0?-1:1),s=webkit$1||gecko$1;if(3==n.nodeType){if(!s||!BIDI.test(n.nodeValue)&&(r<0?i:i!=n.nodeValue.length)){let e=i,t=i,o=r<0?1:-1;return r<0&&!i?(t++,o=-1):r>=0&&i==n.nodeValue.length?(e--,o=1):r<0?e--:t++,flattenV(singleRect(textRange$1(n,e,t),o),o<0)}{let e=singleRect(textRange$1(n,i,i),r);if(gecko$1&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let t=singleRect(textRange$1(n,i-1,i-1),-1);if(t.top==e.top){let r=singleRect(textRange$1(n,i,i+1),-1);if(r.top!=e.top)return flattenV(r,r.left<t.left)}}return e}}if(!e.state.doc.resolve(t-(o||0)).parent.inlineContent){if(null==o&&i&&(r<0||i==nodeSize$1(n))){let e=n.childNodes[i-1];if(1==e.nodeType)return flattenH(e.getBoundingClientRect(),!1)}if(null==o&&i<nodeSize$1(n)){let e=n.childNodes[i];if(1==e.nodeType)return flattenH(e.getBoundingClientRect(),!0)}return flattenH(n.getBoundingClientRect(),r>=0)}if(null==o&&i&&(r<0||i==nodeSize$1(n))){let e=n.childNodes[i-1],t=3==e.nodeType?textRange$1(e,nodeSize$1(e)-(s?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return flattenV(singleRect(t,1),!1)}if(null==o&&i<nodeSize$1(n)){let e=n.childNodes[i];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?textRange$1(e,0,s?0:1):1==e.nodeType?e:null:null;if(t)return flattenV(singleRect(t,-1),!0)}return flattenV(singleRect(3==n.nodeType?textRange$1(n):n,-r),r>=0)}function flattenV(e,t){if(0==e.width)return e;let r=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:r,right:r}}function flattenH(e,t){if(0==e.height)return e;let r=t?e.top:e.bottom;return{top:r,bottom:r,left:e.left,right:e.right}}function withFlushedState(e,t,r){let n=e.state,i=e.root.activeElement;n!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return r()}finally{n!=t&&e.updateState(n),i!=e.dom&&i&&i.focus()}}function endOfTextblockVertical(e,t,r){let n=t.selection,i="up"==r?n.$from:n.$to;return withFlushedState(e,t,()=>{let{node:t}=e.docView.domFromPos(i.pos,"up"==r?-1:1);for(;;){let r=e.docView.nearestDesc(t,!0);if(!r)break;if(r.node.isBlock){t=r.contentDOM||r.dom;break}t=r.dom.parentNode}let n=coordsAtPos(e,i.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=textRange$1(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let i=t[e];if(i.bottom>i.top+1&&("up"==r?n.top-i.top>2*(i.bottom-n.top):i.bottom-n.bottom>2*(n.bottom-i.top)))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(e,t,r){let{$head:n}=t.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,o=!i,s=i==n.parent.content.size,a=e.domSelection();return a?maybeRTL.test(n.parent.textContent)&&a.modify?withFlushedState(e,t,()=>{let{focusNode:t,focusOffset:i,anchorNode:o,anchorOffset:s}=e.domSelectionRange(),l=a.caretBidiLevel;a.modify("move",r,"character");let c=n.depth?e.docView.domAfterPos(n.before()):e.dom,{focusNode:u,focusOffset:d}=e.domSelectionRange(),p=u&&!c.contains(1==u.nodeType?u:u.parentNode)||t==u&&i==d;try{a.collapse(o,s),t&&(t!=o||i!=s)&&a.extend&&a.extend(t,i)}catch(h){}return null!=l&&(a.caretBidiLevel=l),p}):"left"==r||"backward"==r?o:s:n.pos==n.start()||n.pos==n.end()}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(e,t,r){return cachedState==t&&cachedDir==r?cachedResult:(cachedState=t,cachedDir=r,cachedResult="up"==r||"down"==r?endOfTextblockVertical(e,t,r):endOfTextblockHorizontal(e,t,r))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(e,t,r,n){this.parent=e,this.children=t,this.dom=r,this.contentDOM=n,this.dirty=NOT_DIRTY,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let n=this.children[t];if(n==e)return r;r+=n.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(r<0){let r,n;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&(!(n=r.pmViewDesc)||n.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(n)+n.size:this.posAtStart}{let r,n;if(e==this.contentDOM)r=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.nextSibling}for(;r&&(!(n=r.pmViewDesc)||n.parent!=this);)r=r.nextSibling;return r?this.posBeforeChild(n):this.posAtEnd}}let n;if(e==this.dom&&this.contentDOM)n=t>domIndex$1(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))n=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){n=!1;break}if(t.previousSibling)break}if(null==n&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){n=!0;break}if(t.nextSibling)break}}return(null==n?r>0:n)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,n=e;n;n=n.parentNode){let i,o=this.getDesc(n);if(o&&(!t||o.node)){if(!r||!(i=o.nodeDOM)||(1==i.nodeType?i.contains(1==e.nodeType?e:e.parentNode):i==e))return o;r=!1}}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let n=e;n;n=n.parentNode){let i=this.getDesc(n);if(i)return i.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let n=this.children[t],i=r+n.size;if(r==e&&i!=r){for(;!n.border&&n.children.length;)for(let e=0;e<n.children.length;e++){let t=n.children[e];if(t.size){n=t;break}}return n}if(e<i)return n.descAt(e-r-n.border);r=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,n=0;for(let i=0;r<this.children.length;r++){let t=this.children[r],o=i+t.size;if(o>e||t instanceof TrailingHackViewDesc){n=e-i;break}i=o}if(n)return this.children[r].domFromPos(n-this.children[r].border,t);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof WidgetViewDesc&&i.side>=0;r--);if(t<=0){let e,n=!0;for(;e=r?this.children[r-1]:null,e&&e.dom.parentNode!=this.contentDOM;r--,n=!1);return e&&t&&n&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?domIndex$1(e.dom)+1:0}}{let e,n=!0;for(;e=r<this.children.length?this.children[r]:null,e&&e.dom.parentNode!=this.contentDOM;r++,n=!1);return e&&n&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?domIndex$1(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let n=-1,i=-1;for(let o=r,s=0;;s++){let r=this.children[s],a=o+r.size;if(-1==n&&e<=a){let i=o+r.border;if(e>=i&&t<=a-r.border&&r.node&&r.contentDOM&&this.contentDOM.contains(r.contentDOM))return r.parseRange(e,t,i);e=o;for(let t=s;t>0;t--){let r=this.children[t-1];if(r.size&&r.dom.parentNode==this.contentDOM&&!r.emptyChildAt(1)){n=domIndex$1(r.dom)+1;break}e-=r.size}-1==n&&(n=0)}if(n>-1&&(a>t||s==this.children.length-1)){t=a;for(let e=s+1;e<this.children.length;e++){let r=this.children[e];if(r.size&&r.dom.parentNode==this.contentDOM&&!r.emptyChildAt(-1)){i=domIndex$1(r.dom);break}t+=r.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=a}return{node:this.contentDOM,from:e,to:t,fromOffset:n,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(1!=t.nodeType||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,n=!1){let i=Math.min(e,t),o=Math.max(e,t);for(let h=0,f=0;h<this.children.length;h++){let s=this.children[h],a=f+s.size;if(i>f&&o<a)return s.setSelection(e-f-s.border,t-f-s.border,r,n);f=a}let s=this.domFromPos(e,e?-1:1),a=t==e?s:this.domFromPos(t,t?-1:1),l=r.root.getSelection(),c=r.domSelectionRange(),u=!1;if((gecko$1||safari$1)&&e==t){let{node:e,offset:t}=s;if(3==e.nodeType){if(u=!(!t||"\n"!=e.nodeValue[t-1]),u&&t==e.nodeValue.length)for(let r,n=e;n;n=n.parentNode){if(r=n.nextSibling){"BR"==r.nodeName&&(s=a={node:r.parentNode,offset:domIndex$1(r)+1});break}let e=n.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let r=e.childNodes[t-1];u=r&&("BR"==r.nodeName||"false"==r.contentEditable)}}if(gecko$1&&c.focusNode&&c.focusNode!=a.node&&1==c.focusNode.nodeType){let e=c.focusNode.childNodes[c.focusOffset];e&&"false"==e.contentEditable&&(n=!0)}if(!(n||u&&safari$1)&&isEquivalentPosition$1(s.node,s.offset,c.anchorNode,c.anchorOffset)&&isEquivalentPosition$1(a.node,a.offset,c.focusNode,c.focusOffset))return;let d=!1;if((l.extend||e==t)&&(!u||!gecko$1)){l.collapse(s.node,s.offset);try{e!=t&&l.extend(a.node,a.offset),d=!0}catch(p){}}if(!d){if(e>t){let e=s;s=a,a=e}let r=document.createRange();r.setEnd(a.node,a.offset),r.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(r)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,n=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==o?e<=o&&t>=r:e<o&&t>r){let n=r+i.border,s=o-i.border;if(e>=n&&t<=s)return this.dirty=e==r||t==o?CONTENT_DIRTY:CHILD_DIRTY,void(e!=n||t!=s||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(e-n,t-n):i.dirty=NODE_DIRTY);i.dirty=i.dom!=i.contentDOM||i.dom.parentNode!=this.contentDOM||i.children.length?NODE_DIRTY:CONTENT_DIRTY}r=o}this.dirty=CONTENT_DIRTY}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=1==e?CONTENT_DIRTY:CHILD_DIRTY;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class WidgetViewDesc extends ViewDesc{constructor(e,t,r,n){let i,o=t.type.toDOM;if("function"==typeof o&&(o=o(r,()=>i?i.parent?i.parent.posBeforeChild(i):void 0:n)),!t.type.spec.raw){if(1!=o.nodeType){let e=document.createElement("span");e.appendChild(o),o=e}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,i=this}matchesWidget(e){return this.dirty==NOT_DIRTY&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(e,t,r,n){super(e,[],t,null),this.textDOM=r,this.text=n}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class MarkViewDesc extends ViewDesc{constructor(e,t,r,n,i){super(e,[],r,n),this.mark=t,this.spec=i}static create(e,t,r,n){let i=n.nodeViews[t.type.name],o=i&&i(t,n,r);return o&&o.dom||(o=DOMSerializer.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new MarkViewDesc(e,t,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=NODE_DIRTY&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=NOT_DIRTY){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(e,t,r){let n=MarkViewDesc.create(this.parent,this.mark,!0,r),i=this.children,o=this.size;t<o&&(i=replaceNodes(i,t,o,r)),e>0&&(i=replaceNodes(i,0,e,r));for(let s=0;s<i.length;s++)i[s].parent=n;return n.children=i,n}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class NodeViewDesc extends ViewDesc{constructor(e,t,r,n,i,o,s,a,l){super(e,[],i,o),this.node=t,this.outerDeco=r,this.innerDeco=n,this.nodeDOM=s}static create(e,t,r,n,i,o){let s,a=i.nodeViews[t.type.name],l=a&&a(t,i,()=>s?s.parent?s.parent.posBeforeChild(s):void 0:o,r,n),c=l&&l.dom,u=l&&l.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else if(!c){let e=DOMSerializer.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs);({dom:c,contentDOM:u}=e)}u||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let d=c;return c=applyOuterDeco(c,r,t),l?s=new CustomNodeViewDesc(e,t,r,n,c,u||null,d,l,i,o+1):t.isText?new TextViewDesc(e,t,r,n,c,d,i):new NodeViewDesc(e,t,r,n,c,u||null,d,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Fragment.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,r){return this.dirty==NOT_DIRTY&&e.eq(this.node)&&sameOuterDeco(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,n=t,i=e.composing?this.localCompositionInfo(e,t):null,o=i&&i.pos>-1?i:null,s=i&&i.pos<0,a=new ViewTreeUpdater(this,o&&o.node,e);iterDeco(this.node,this.innerDeco,(t,i,o)=>{t.spec.marks?a.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!o&&a.syncToMarks(i==this.node.childCount?Mark$1.none:this.node.child(i).marks,r,e),a.placeWidget(t,e,n)},(t,o,l,c)=>{let u;a.syncToMarks(t.marks,r,e),a.findNodeMatch(t,o,l,c)||s&&e.state.selection.from>n&&e.state.selection.to<n+t.nodeSize&&(u=a.findIndexWithChild(i.node))>-1&&a.updateNodeAt(t,o,l,u,e)||a.updateNextNode(t,o,l,e,c,n)||a.addNode(t,o,l,e,n),n+=t.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==CONTENT_DIRTY)&&(o&&this.protectLocalComposition(e,o),renderDescs(this.contentDOM,this.children,e),ios$1&&iosHacks(this.dom))}localCompositionInfo(e,t){let{from:r,to:n}=e.state.selection;if(!(e.state.selection instanceof TextSelection)||r<t||n>t+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let e=i.nodeValue,o=findTextInFragment(this.node.content,e,r-t,n-t);return o<0?null:{node:i,pos:o,text:e}}return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:n}){if(this.getDesc(t))return;let i=t;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new CompositionViewDesc(this,i,t,n);e.input.compositionNodes.push(o),this.children=replaceNodes(this.children,r,r+n.length,e,o)}update(e,t,r,n){return!(this.dirty==NODE_DIRTY||!e.sameMarkup(this.node)||(this.updateInner(e,t,r,n),0))}updateInner(e,t,r,n){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(n,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(e){if(sameOuterDeco(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,r=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,t),computeOuterDeco(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.nodeDOM.draggable=!0))}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(e,t,r,n,i){applyOuterDeco(n,t,e);let o=new NodeViewDesc(void 0,e,t,r,n,n,n,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class TextViewDesc extends NodeViewDesc{constructor(e,t,r,n,i,o,s){super(e,t,r,n,i,null,o,s,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,n){return!(this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!e.sameMarkup(this.node)||(this.updateOuterDeco(t),this.dirty==NOT_DIRTY&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,n.trackWrites==this.nodeDOM&&(n.trackWrites=null)),this.node=e,this.dirty=NOT_DIRTY,0))}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,r){let n=this.node.cut(e,t),i=document.createTextNode(n.text);return new TextViewDesc(this.parent,n,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,t){super.markDirty(e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(e){return this.node.text==e}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==NOT_DIRTY&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class CustomNodeViewDesc extends NodeViewDesc{constructor(e,t,r,n,i,o,s,a,l,c){super(e,t,r,n,i,o,s,l,c),this.spec=a}update(e,t,r,n){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,t,r);return i&&this.updateInner(e,t,r,n),i}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,r,n)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,n){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,n)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function renderDescs(e,t,r){let n=e.firstChild,i=!1;for(let o=0;o<t.length;o++){let s=t[o],a=s.dom;if(a.parentNode==e){for(;a!=n;)n=rm$2(n),i=!0;n=n.nextSibling}else i=!0,e.insertBefore(a,n);if(s instanceof MarkViewDesc){let t=n?n.previousSibling:e.lastChild;renderDescs(s.contentDOM,s.children,r),n=t?t.nextSibling:e.firstChild}}for(;n;)n=rm$2(n),i=!0;i&&r.trackWrites==e&&(r.trackWrites=null)}const OuterDecoLevel=function(e){e&&(this.nodeName=e)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(e,t,r){if(0==e.length)return noDeco;let n=r?noDeco[0]:new OuterDecoLevel,i=[n];for(let o=0;o<e.length;o++){let s=e[o].type.attrs;if(s){s.nodeName&&i.push(n=new OuterDecoLevel(s.nodeName));for(let e in s){let o=s[e];null!=o&&(r&&1==i.length&&i.push(n=new OuterDecoLevel(t.isInline?"span":"div")),"class"==e?n.class=(n.class?n.class+" ":"")+o:"style"==e?n.style=(n.style?n.style+";":"")+o:"nodeName"!=e&&(n[e]=o))}}}return i}function patchOuterDeco(e,t,r,n){if(r==noDeco&&n==noDeco)return t;let i=t;for(let o=0;o<n.length;o++){let t=n[o],s=r[o];if(o){let r;s&&s.nodeName==t.nodeName&&i!=e&&(r=i.parentNode)&&r.nodeName.toLowerCase()==t.nodeName||(r=document.createElement(t.nodeName),r.pmIsDeco=!0,r.appendChild(i),s=noDeco[0]),i=r}patchAttributes(i,s||noDeco[0],t)}return i}function patchAttributes(e,t,r){for(let n in t)"class"==n||"style"==n||"nodeName"==n||n in r||e.removeAttribute(n);for(let n in r)"class"!=n&&"style"!=n&&"nodeName"!=n&&r[n]!=t[n]&&e.setAttribute(n,r[n]);if(t.class!=r.class){let n=t.class?t.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let t=0;t<n.length;t++)-1==i.indexOf(n[t])&&e.classList.remove(n[t]);for(let t=0;t<i.length;t++)-1==n.indexOf(i[t])&&e.classList.add(i[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=r.style){if(t.style){let r,n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;r=n.exec(t.style);)e.style.removeProperty(r[1])}r.style&&(e.style.cssText+=r.style)}}function applyOuterDeco(e,t,r){return patchOuterDeco(e,e,noDeco,computeOuterDeco(t,r,1!=e.nodeType))}function sameOuterDeco(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].type.eq(t[r].type))return!1;return!0}function rm$2(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class ViewTreeUpdater{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=preMatch(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let n=0,i=this.stack.length>>1,o=Math.min(i,e.length);for(;n<o&&(n==i-1?this.top:this.stack[n+1<<1]).matchesMark(e[n])&&!1!==e[n].type.spec.spanning;)n++;for(;n<i;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let n=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let r=this.top.children[t];if(r.matchesMark(e[i])&&!this.isLocked(r.dom)){n=t;break}}if(n>-1)n>this.index&&(this.changed=!0,this.destroyBetween(this.index,n)),this.top=this.top.children[this.index];else{let n=MarkViewDesc.create(this.top,e[i],t,r);this.top.children.splice(this.index,0,n),this.top=n,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,r,n){let i,o=-1;if(n>=this.preMatch.index&&(i=this.preMatch.matches[n-this.preMatch.index]).parent==this.top&&i.matchesNode(e,t,r))o=this.top.children.indexOf(i,this.index);else for(let s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){let n=this.top.children[s];if(n.matchesNode(e,t,r)&&!this.preMatch.matched.has(n)){o=s;break}}return!(o<0||(this.destroyBetween(this.index,o),this.index++,0))}updateNodeAt(e,t,r,n,i){let o=this.top.children[n];return o.dirty==NODE_DIRTY&&o.dom==o.contentDOM&&(o.dirty=CONTENT_DIRTY),!!o.update(e,t,r,i)&&(this.destroyBetween(this.index,n),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e;return-1}e=t}}updateNextNode(e,t,r,n,i,o){for(let s=this.index;s<this.top.children.length;s++){let a=this.top.children[s];if(a instanceof NodeViewDesc){let l=this.preMatch.matched.get(a);if(null!=l&&l!=i)return!1;let c,u=a.dom,d=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=NODE_DIRTY&&sameOuterDeco(t,a.outerDeco));if(!d&&a.update(e,t,r,n))return this.destroyBetween(this.index,s),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(c=this.recreateWrapper(a,e,t,r,n,o)))return this.destroyBetween(this.index,s),this.top.children[this.index]=c,c.contentDOM&&(c.dirty=CONTENT_DIRTY,c.updateChildren(n,o+1),c.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,n,i,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!sameOuterDeco(r,e.outerDeco)||!n.eq(e.innerDeco))return null;let s=NodeViewDesc.create(this.top,t,r,n,i,o);if(s.contentDOM){s.children=e.children,e.children=[];for(let e of s.children)e.parent=s}return e.destroy(),s}addNode(e,t,r,n,i){let o=NodeViewDesc.create(this.top,e,t,r,n,i);o.contentDOM&&o.updateChildren(n,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,r){let n=this.index<this.top.children.length?this.top.children[this.index]:null;if(!n||!n.matchesWidget(e)||e!=n.widget&&n.widget.type.toDOM.parentNode){let n=new WidgetViewDesc(this.top,e,t,r);this.top.children.splice(this.index++,0,n),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof MarkViewDesc;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof TextViewDesc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((safari$1||chrome$1)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);"IMG"==e&&(r.className="ProseMirror-separator",r.alt=""),"BR"==e&&(r.className="ProseMirror-trailingBreak");let n=new TrailingHackViewDesc(this.top,[],r,null);t!=this.top?t.children.push(n):t.children.splice(this.index++,0,n),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function preMatch(e,t){let r=t,n=r.children.length,i=e.childCount,o=new Map,s=[];e:for(;i>0;){let a;for(;;)if(n){let e=r.children[n-1];if(!(e instanceof MarkViewDesc)){a=e,n--;break}r=e,n=e.children.length}else{if(r==t)break e;n=r.parent.children.indexOf(r),r=r.parent}let l=a.node;if(l){if(l!=e.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function compareSide(e,t){return e.type.side-t.type.side}function iterDeco(e,t,r,n){let i=t.locals(e),o=0;if(0==i.length){for(let r=0;r<e.childCount;r++){let s=e.child(r);n(s,i,t.forChild(o,s),r),o+=s.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let u,d,p,h;for(;s<i.length&&i[s].to==o;){let e=i[s++];e.widget&&(u?(d||(d=[u])).push(e):u=e)}if(u)if(d){d.sort(compareSide);for(let e=0;e<d.length;e++)r(d[e],c,!!l)}else r(u,c,!!l);if(l)h=-1,p=l,l=null;else{if(!(c<e.childCount))break;h=c,p=e.child(c++)}for(let e=0;e<a.length;e++)a[e].to<=o&&a.splice(e--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)a.push(i[s++]);let f=o+p.nodeSize;if(p.isText){let e=f;s<i.length&&i[s].from<e&&(e=i[s].from);for(let t=0;t<a.length;t++)a[t].to<e&&(e=a[t].to);e<f&&(l=p.cut(e-o),p=p.cut(0,e-o),f=e,h=-1)}else for(;s<i.length&&i[s].to<f;)s++;n(p,p.isInline&&!p.isLeaf?a.filter(e=>!e.inline):a.slice(),t.forChild(o,p),h),o=f}}function iosHacks(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function findTextInFragment(e,t,r,n){for(let i=0,o=0;i<e.childCount&&o<=n;){let s=e.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<e.childCount;){let t=e.child(i++);if(o+=t.nodeSize,!t.isText)break;l+=t.text}if(o>=r){if(o>=n&&l.slice(n-t.length-a,n-a)==t)return n-t.length;let e=a<n?l.lastIndexOf(t,n-a-1):-1;if(e>=0&&e+t.length+a>=r)return a+e;if(r==n&&l.length>=n+t.length-a&&l.slice(n-a,n-a+t.length)==t)return n}}return-1}function replaceNodes(e,t,r,n,i){let o=[];for(let s=0,a=0;s<e.length;s++){let l=e[s],c=a,u=a+=l.size;c>=r||u<=t?o.push(l):(c<t&&o.push(l.slice(0,t-c,n)),i&&(o.push(i),i=void 0),u>r&&o.push(l.slice(r-c,l.size,n)))}return o}function selectionFromDOM(e,t=null){let r=e.domSelectionRange(),n=e.state.doc;if(!r.focusNode)return null;let i=e.docView.nearestDesc(r.focusNode),o=i&&0==i.size,s=e.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(s<0)return null;let a,l,c=n.resolve(s);if(selectionCollapsed(r)){for(a=s;i&&!i.node;)i=i.parent;let e=i.node;if(i&&e.isAtom&&NodeSelection.isSelectable(e)&&i.parent&&(!e.isInline||!isOnEdge(r.focusNode,r.focusOffset,i.dom))){let e=i.posBefore;l=new NodeSelection(s==e?c:n.resolve(e))}}else{if(r instanceof e.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let t=s,i=s;for(let n=0;n<r.rangeCount;n++){let o=r.getRangeAt(n);t=Math.min(t,e.docView.posFromDOM(o.startContainer,o.startOffset,1)),i=Math.max(i,e.docView.posFromDOM(o.endContainer,o.endOffset,-1))}if(t<0)return null;[a,s]=i==e.state.selection.anchor?[i,t]:[t,i],c=n.resolve(s)}else a=e.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(a<0)return null}let u=n.resolve(a);return l||(l=selectionBetween(e,u,c,"pointer"==t||e.state.selection.head<c.pos&&!o?1:-1)),l}function editorOwnsSelection(e){return e.editable?e.hasFocus():hasSelection$1(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function selectionToDOM(e,t=!1){let r=e.state.selection;if(syncNodeSelection(e,r),editorOwnsSelection(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&chrome$1){let t=e.domSelectionRange(),r=e.domObserver.currentSelection;if(t.anchorNode&&r.anchorNode&&isEquivalentPosition$1(t.anchorNode,t.anchorOffset,r.anchorNode,r.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)selectCursorWrapper(e);else{let n,i,{anchor:o,head:s}=r;!brokenSelectBetweenUneditable||r instanceof TextSelection||(r.$from.parent.inlineContent||(n=temporarilyEditableNear(e,r.from)),r.empty||r.$from.parent.inlineContent||(i=temporarilyEditableNear(e,r.to))),e.docView.setSelection(o,s,e,t),brokenSelectBetweenUneditable&&(n&&resetEditable(n),i&&resetEditable(i)),r.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari$1||chrome$1&&chrome_version<63;function temporarilyEditableNear(e,t){let{node:r,offset:n}=e.docView.domFromPos(t,0),i=n<r.childNodes.length?r.childNodes[n]:null,o=n?r.childNodes[n-1]:null;if(safari$1&&i&&"false"==i.contentEditable)return setEditable(i);if(!(i&&"false"!=i.contentEditable||o&&"false"!=o.contentEditable)){if(i)return setEditable(i);if(o)return setEditable(o)}}function setEditable(e){return e.contentEditable="true",safari$1&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function resetEditable(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function removeClassOnSelectionChange(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let r=e.domSelectionRange(),n=r.anchorNode,i=r.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{r.anchorNode==n&&r.anchorOffset==i||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{editorOwnsSelection(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(e){let t=e.domSelection();if(!t)return;let r=e.cursorWrapper.dom,n="IMG"==r.nodeName;n?t.collapse(r.parentNode,domIndex$1(r)+1):t.collapse(r,0),!n&&!e.state.selection.visible&&ie$2&&ie_version<=11&&(r.disabled=!0,r.disabled=!1)}function syncNodeSelection(e,t){if(t instanceof NodeSelection){let r=e.docView.descAt(t.from);r!=e.lastSelectedViewDesc&&(clearNodeSelection(e),r&&r.selectNode(),e.lastSelectedViewDesc=r)}else clearNodeSelection(e)}function clearNodeSelection(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function selectionBetween(e,t,r,n){return e.someProp("createSelectionBetween",n=>n(e,t,r))||TextSelection.between(t,r,n)}function hasFocusAndSelection(e){return!(e.editable&&!e.hasFocus())&&hasSelection$1(e)}function hasSelection$1(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(r){return!1}}function anchorInRightPlace(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),r=e.domSelectionRange();return isEquivalentPosition$1(t.node,t.offset,r.anchorNode,r.anchorOffset)}function moveSelectionBlock(e,t){let{$anchor:r,$head:n}=e.selection,i=t>0?r.max(n):r.min(n),o=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return o&&Selection$1.findFrom(o,t)}function apply$1(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function selectHorizontally(e,t,r){let n=e.state.selection;if(!(n instanceof TextSelection)){if(n instanceof NodeSelection&&n.node.isInline)return apply$1(e,new TextSelection(t>0?n.$to:n.$from));{let r=moveSelectionBlock(e.state,t);return!!r&&apply$1(e,r)}}if(r.indexOf("s")>-1){let{$head:r}=n,i=r.textOffset?null:t<0?r.nodeBefore:r.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=e.state.doc.resolve(r.pos+i.nodeSize*(t<0?-1:1));return apply$1(e,new TextSelection(n.$anchor,o))}if(!n.empty)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){let r=moveSelectionBlock(e.state,t);return!!(r&&r instanceof NodeSelection)&&apply$1(e,r)}if(!(mac$3&&r.indexOf("m")>-1)){let r,i=n.$head,o=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText)return!1;let s=t<0?i.pos-o.nodeSize:i.pos;return!!(o.isAtom||(r=e.docView.descAt(s))&&!r.contentDOM)&&(NodeSelection.isSelectable(o)?apply$1(e,new NodeSelection(t<0?e.state.doc.resolve(i.pos-o.nodeSize):i)):!!webkit$1&&apply$1(e,new TextSelection(e.state.doc.resolve(t<0?s:s+o.nodeSize))))}}function nodeLen(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function isIgnorable(e,t){let r=e.pmViewDesc;return r&&0==r.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function skipIgnoredNodes(e,t){return t<0?skipIgnoredNodesBefore(e):skipIgnoredNodesAfter(e)}function skipIgnoredNodesBefore(e){let t=e.domSelectionRange(),r=t.focusNode,n=t.focusOffset;if(!r)return;let i,o,s=!1;for(gecko$1&&1==r.nodeType&&n<nodeLen(r)&&isIgnorable(r.childNodes[n],-1)&&(s=!0);;)if(n>0){if(1!=r.nodeType)break;{let e=r.childNodes[n-1];if(isIgnorable(e,-1))i=r,o=--n;else{if(3!=e.nodeType)break;r=e,n=r.nodeValue.length}}}else{if(isBlockNode(r))break;{let t=r.previousSibling;for(;t&&isIgnorable(t,-1);)i=r.parentNode,o=domIndex$1(t),t=t.previousSibling;if(t)r=t,n=nodeLen(r);else{if(r=r.parentNode,r==e.dom)break;n=0}}}s?setSelFocus(e,r,n):i&&setSelFocus(e,i,o)}function skipIgnoredNodesAfter(e){let t=e.domSelectionRange(),r=t.focusNode,n=t.focusOffset;if(!r)return;let i,o,s=nodeLen(r);for(;;)if(n<s){if(1!=r.nodeType)break;if(!isIgnorable(r.childNodes[n],1))break;i=r,o=++n}else{if(isBlockNode(r))break;{let t=r.nextSibling;for(;t&&isIgnorable(t,1);)i=t.parentNode,o=domIndex$1(t)+1,t=t.nextSibling;if(t)r=t,n=0,s=nodeLen(r);else{if(r=r.parentNode,r==e.dom)break;n=s=0}}}i&&setSelFocus(e,i,o)}function isBlockNode(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function textNodeAfter$2(e,t){for(;e&&t==e.childNodes.length&&!hasBlockDesc(e);)t=domIndex$1(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let r=e.childNodes[t];if(3==r.nodeType)return r;if(1==r.nodeType&&"false"==r.contentEditable)break;e=r,t=0}}function textNodeBefore$2(e,t){for(;e&&!t&&!hasBlockDesc(e);)t=domIndex$1(e),e=e.parentNode;for(;e&&t;){let r=e.childNodes[t-1];if(3==r.nodeType)return r;if(1==r.nodeType&&"false"==r.contentEditable)break;t=(e=r).childNodes.length}}function setSelFocus(e,t,r){if(3!=t.nodeType){let e,n;(n=textNodeAfter$2(t,r))?(t=n,r=0):(e=textNodeBefore$2(t,r))&&(t=e,r=e.nodeValue.length)}let n=e.domSelection();if(!n)return;if(selectionCollapsed(n)){let e=document.createRange();e.setEnd(t,r),e.setStart(t,r),n.removeAllRanges(),n.addRange(e)}else n.extend&&n.extend(t,r);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&selectionToDOM(e)},50)}function findDirection(e,t){let r=e.state.doc.resolve(t);if(!chrome$1&&!windows$2&&r.parent.inlineContent){let n=e.coordsAtPos(t);if(t>r.start()){let r=e.coordsAtPos(t-1),i=(r.top+r.bottom)/2;if(i>n.top&&i<n.bottom&&Math.abs(r.left-n.left)>1)return r.left<n.left?"ltr":"rtl"}if(t<r.end()){let r=e.coordsAtPos(t+1),i=(r.top+r.bottom)/2;if(i>n.top&&i<n.bottom&&Math.abs(r.left-n.left)>1)return r.left>n.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function selectVertically(e,t,r){let n=e.state.selection;if(n instanceof TextSelection&&!n.empty||r.indexOf("s")>-1)return!1;if(mac$3&&r.indexOf("m")>-1)return!1;let{$from:i,$to:o}=n;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let r=moveSelectionBlock(e.state,t);if(r&&r instanceof NodeSelection)return apply$1(e,r)}if(!i.parent.inlineContent){let r=t<0?i:o,s=n instanceof AllSelection?Selection$1.near(r,t):Selection$1.findFrom(r,t);return!!s&&apply$1(e,s)}return!1}function stopNativeHorizontalDelete(e,t){if(!(e.state.selection instanceof TextSelection))return!0;let{$head:r,$anchor:n,empty:i}=e.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let o=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(o&&!o.isText){let n=e.state.tr;return t<0?n.delete(r.pos-o.nodeSize,r.pos):n.delete(r.pos,r.pos+o.nodeSize),e.dispatch(n),!0}return!1}function switchEditable(e,t,r){e.domObserver.stop(),t.contentEditable=r,e.domObserver.start()}function safariDownArrowBug(e){if(!safari$1||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:r}=e.domSelectionRange();if(t&&1==t.nodeType&&0==r&&t.firstChild&&"false"==t.firstChild.contentEditable){let r=t.firstChild;switchEditable(e,r,"true"),setTimeout(()=>switchEditable(e,r,"false"),20)}return!1}function getMods(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function captureKeyDown(e,t){let r=t.keyCode,n=getMods(t);if(8==r||mac$3&&72==r&&"c"==n)return stopNativeHorizontalDelete(e,-1)||skipIgnoredNodes(e,-1);if(46==r&&!t.shiftKey||mac$3&&68==r&&"c"==n)return stopNativeHorizontalDelete(e,1)||skipIgnoredNodes(e,1);if(13==r||27==r)return!0;if(37==r||mac$3&&66==r&&"c"==n){let t=37==r?"ltr"==findDirection(e,e.state.selection.from)?-1:1:-1;return selectHorizontally(e,t,n)||skipIgnoredNodes(e,t)}if(39==r||mac$3&&70==r&&"c"==n){let t=39==r?"ltr"==findDirection(e,e.state.selection.from)?1:-1:1;return selectHorizontally(e,t,n)||skipIgnoredNodes(e,t)}return 38==r||mac$3&&80==r&&"c"==n?selectVertically(e,-1,n)||skipIgnoredNodes(e,-1):40==r||mac$3&&78==r&&"c"==n?safariDownArrowBug(e)||selectVertically(e,1,n)||skipIgnoredNodes(e,1):n==(mac$3?"m":"c")&&(66==r||73==r||89==r||90==r)}function serializeForClipboard(e,t){e.someProp("transformCopied",r=>{t=r(t,e)});let r=[],{content:n,openStart:i,openEnd:o}=t;for(;i>1&&o>1&&1==n.childCount&&1==n.firstChild.childCount;){i--,o--;let e=n.firstChild;r.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),n=e.content}let s=e.someProp("clipboardSerializer")||DOMSerializer.fromSchema(e.state.schema),a=detachedDoc(),l=a.createElement("div");l.appendChild(s.serializeFragment(n,{document:a}));let c,u=l.firstChild,d=0;for(;u&&1==u.nodeType&&(c=wrapMap[u.nodeName.toLowerCase()]);){for(let e=c.length-1;e>=0;e--){let t=a.createElement(c[e]);for(;l.firstChild;)t.appendChild(l.firstChild);l.appendChild(t),d++}u=l.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(r)}`),{dom:l,text:e.someProp("clipboardTextSerializer",r=>r(t,e))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function parseFromClipboard(e,t,r,n,i){let o,s,a=i.parent.type.spec.code;if(!r&&!t)return null;let l=!!t&&(n||a||!r);if(l){if(e.someProp("transformPastedText",r=>{t=r(t,a||n,e)}),a)return s=new Slice(Fragment.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0),e.someProp("transformPasted",t=>{s=t(s,e,!0)}),s;let r=e.someProp("clipboardTextParser",r=>r(t,i,n,e));if(r)s=r;else{let r=i.marks(),{schema:n}=e.state,s=DOMSerializer.fromSchema(n);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(e=>{let t=o.appendChild(document.createElement("p"));e&&t.appendChild(s.serializeNode(n.text(e,r)))})}}else e.someProp("transformPastedHTML",t=>{r=t(r,e)}),o=readHTML(r),webkit$1&&restoreReplacedSpaces(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let e=o.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;o=e}if(!s){let t=e.someProp("clipboardParser")||e.someProp("domParser")||DOMParser$1.fromSchema(e.state.schema);s=t.parseSlice(o,{preserveWhitespace:!(!l&&!u),context:i,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||inlineParents.test(e.parentNode.nodeName)?null:{ignore:!0}})}if(u)s=addContext(closeSlice(s,+u[1],+u[2]),u[4]);else if(s=Slice.maxOpen(normalizeSiblings(s.content,i),!0),s.openStart||s.openEnd){let e=0,t=0;for(let r=s.content.firstChild;e<s.openStart&&!r.type.spec.isolating;e++,r=r.firstChild);for(let r=s.content.lastChild;t<s.openEnd&&!r.type.spec.isolating;t++,r=r.lastChild);s=closeSlice(s,e,t)}return e.someProp("transformPasted",t=>{s=t(s,e,l)}),s}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(e,t){if(e.childCount<2)return e;for(let r=t.depth;r>=0;r--){let n,i=t.node(r).contentMatchAt(t.index(r)),o=[];if(e.forEach(e=>{if(!o)return;let t,r=i.findWrapping(e.type);if(!r)return o=null;if(t=o.length&&n.length&&addToSibling(r,n,e,o[o.length-1],0))o[o.length-1]=t;else{o.length&&(o[o.length-1]=closeRight(o[o.length-1],n.length));let t=withWrappers(e,r);o.push(t),i=i.matchType(t.type),n=r}}),o)return Fragment.from(o)}return e}function withWrappers(e,t,r=0){for(let n=t.length-1;n>=r;n--)e=t[n].create(null,Fragment.from(e));return e}function addToSibling(e,t,r,n,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let o=addToSibling(e,t,r,n.lastChild,i+1);if(o)return n.copy(n.content.replaceChild(n.childCount-1,o));if(n.contentMatchAt(n.childCount).matchType(i==e.length-1?r.type:e[i+1]))return n.copy(n.content.append(Fragment.from(withWrappers(r,e,i+1))))}}function closeRight(e,t){if(0==t)return e;let r=e.content.replaceChild(e.childCount-1,closeRight(e.lastChild,t-1)),n=e.contentMatchAt(e.childCount).fillBefore(Fragment.empty,!0);return e.copy(r.append(n))}function closeRange(e,t,r,n,i,o){let s=t<0?e.firstChild:e.lastChild,a=s.content;return e.childCount>1&&(o=0),i<n-1&&(a=closeRange(a,t,r,n,i+1,o)),i>=r&&(a=t<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(Fragment.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function closeSlice(e,t,r){return t<e.openStart&&(e=new Slice(closeRange(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),r<e.openEnd&&(e=new Slice(closeRange(e.content,1,r,e.openEnd,0,0),e.openStart,r)),e}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}let _policy=null;function maybeWrapTrusted(e){let t=window.trustedTypes;return t?(_policy||(_policy=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:e=>e})),_policy.createHTML(e)):e}function readHTML(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let r,n=detachedDoc().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(e);if((r=i&&wrapMap[i[1].toLowerCase()])&&(e=r.map(e=>"<"+e+">").join("")+e+r.map(e=>"</"+e+">").reverse().join("")),n.innerHTML=maybeWrapTrusted(e),r)for(let o=0;o<r.length;o++)n=n.querySelector(r[o])||n;return n}function restoreReplacedSpaces(e){let t=e.querySelectorAll(chrome$1?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<t.length;r++){let n=t[r];1==n.childNodes.length&&""==n.textContent&&n.parentNode&&n.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),n)}}function addContext(e,t){if(!e.size)return e;let r,n=e.content.firstChild.type.schema;try{r=JSON.parse(t)}catch(a){return e}let{content:i,openStart:o,openEnd:s}=e;for(let l=r.length-2;l>=0;l-=2){let e=n.nodes[r[l]];if(!e||e.hasRequiredAttrs())break;i=Fragment.from(e.create(r[l+1],i)),o++,s++}return new Slice(i,o,s)}const handlers$1={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};let InputState$2=class{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}};function initInput(e){for(let t in handlers$1){let r=handlers$1[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!eventBelongsToView(e,t)||runCustomHandler(e,t)||!e.editable&&t.type in editHandlers||r(e,t)},passiveHandlers[t]?{passive:!0}:void 0)}safari$1&&e.dom.addEventListener("input",()=>null),ensureListeners(e)}function setSelectionOrigin(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function destroyInput(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function ensureListeners(e){e.someProp("handleDOMEvents",t=>{for(let r in t)e.input.eventHandlers[r]||e.dom.addEventListener(r,e.input.eventHandlers[r]=t=>runCustomHandler(e,t))})}function runCustomHandler(e,t){return e.someProp("handleDOMEvents",r=>{let n=r[t.type];return!!n&&(n(e,t)||t.defaultPrevented)})}function eventBelongsToView(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let r=t.target;r!=e.dom;r=r.parentNode)if(!r||11==r.nodeType||r.pmViewDesc&&r.pmViewDesc.stopEvent(t))return!1;return!0}function dispatchEvent(e,t){runCustomHandler(e,t)||!handlers$1[t.type]||!e.editable&&t.type in editHandlers||handlers$1[t.type](e,t)}function eventCoords(e){return{left:e.clientX,top:e.clientY}}function isNear(e,t){let r=t.x-e.clientX,n=t.y-e.clientY;return r*r+n*n<100}function runHandlerOnContext(e,t,r,n,i){if(-1==n)return!1;let o=e.state.doc.resolve(n);for(let s=o.depth+1;s>0;s--)if(e.someProp(t,t=>s>o.depth?t(e,r,o.nodeAfter,o.before(s),i,!0):t(e,r,o.node(s),o.before(s),i,!1)))return!0;return!1}function updateSelection(e,t,r){if(e.focused||e.focus(),e.state.selection.eq(t))return;let n=e.state.tr.setSelection(t);n.setMeta("pointer",!0),e.dispatch(n)}function selectClickedLeaf(e,t){if(-1==t)return!1;let r=e.state.doc.resolve(t),n=r.nodeAfter;return!!(n&&n.isAtom&&NodeSelection.isSelectable(n))&&(updateSelection(e,new NodeSelection(r)),!0)}function selectClickedNode(e,t){if(-1==t)return!1;let r,n,i=e.state.selection;i instanceof NodeSelection&&(r=i.node);let o=e.state.doc.resolve(t);for(let s=o.depth+1;s>0;s--){let e=s>o.depth?o.nodeAfter:o.node(s);if(NodeSelection.isSelectable(e)){n=r&&i.$from.depth>0&&s>=i.$from.depth&&o.before(i.$from.depth+1)==i.$from.pos?o.before(i.$from.depth):o.before(s);break}}return null!=n&&(updateSelection(e,NodeSelection.create(e.state.doc,n)),!0)}function handleSingleClick(e,t,r,n,i){return runHandlerOnContext(e,"handleClickOn",t,r,n)||e.someProp("handleClick",r=>r(e,t,n))||(i?selectClickedNode(e,r):selectClickedLeaf(e,r))}function handleDoubleClick(e,t,r,n){return runHandlerOnContext(e,"handleDoubleClickOn",t,r,n)||e.someProp("handleDoubleClick",r=>r(e,t,n))}function handleTripleClick(e,t,r,n){return runHandlerOnContext(e,"handleTripleClickOn",t,r,n)||e.someProp("handleTripleClick",r=>r(e,t,n))||defaultTripleClick(e,r,n)}function defaultTripleClick(e,t,r){if(0!=r.button)return!1;let n=e.state.doc;if(-1==t)return!!n.inlineContent&&(updateSelection(e,TextSelection.create(n,0,n.content.size)),!0);let i=n.resolve(t);for(let o=i.depth+1;o>0;o--){let t=o>i.depth?i.nodeAfter:i.node(o),r=i.before(o);if(t.inlineContent)updateSelection(e,TextSelection.create(n,r+1,r+1+t.content.size));else{if(!NodeSelection.isSelectable(t))continue;updateSelection(e,NodeSelection.create(n,r))}return!0}}function forceDOMFlush(e){return endComposition(e)}editHandlers.keydown=(e,t)=>{let r=t;if(e.input.shiftKey=16==r.keyCode||r.shiftKey,!inOrNearComposition(e,r)&&(e.input.lastKeyCode=r.keyCode,e.input.lastKeyCodeTime=Date.now(),!android$1||!chrome$1||13!=r.keyCode))if(229!=r.keyCode&&e.domObserver.forceFlush(),!ios$1||13!=r.keyCode||r.ctrlKey||r.altKey||r.metaKey)e.someProp("handleKeyDown",t=>t(e,r))||captureKeyDown(e,r)?r.preventDefault():setSelectionOrigin(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",t=>t(e,keyEvent(13,"Enter"))),e.input.lastIOSEnter=0)},200)}},editHandlers.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},editHandlers.keypress=(e,t)=>{let r=t;if(inOrNearComposition(e,r)||!r.charCode||r.ctrlKey&&!r.altKey||mac$3&&r.metaKey)return;if(e.someProp("handleKeyPress",t=>t(e,r)))return void r.preventDefault();let n=e.state.selection;if(!(n instanceof TextSelection&&n.$from.sameParent(n.$to))){let t=String.fromCharCode(r.charCode),i=()=>e.state.tr.insertText(t).scrollIntoView();/[\r\n]/.test(t)||e.someProp("handleTextInput",r=>r(e,n.$from.pos,n.$to.pos,t,i))||e.dispatch(i()),r.preventDefault()}};const selectNodeModifier=mac$3?"metaKey":"ctrlKey";handlers$1.mousedown=(e,t)=>{let r=t;e.input.shiftKey=r.shiftKey;let n=forceDOMFlush(e),i=Date.now(),o="singleClick";i-e.input.lastClick.time<500&&isNear(r,e.input.lastClick)&&!r[selectNodeModifier]&&e.input.lastClick.button==r.button&&("singleClick"==e.input.lastClick.type?o="doubleClick":"doubleClick"==e.input.lastClick.type&&(o="tripleClick")),e.input.lastClick={time:i,x:r.clientX,y:r.clientY,type:o,button:r.button};let s=e.posAtCoords(eventCoords(r));s&&("singleClick"==o?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new MouseDown(e,s,r,!!n)):("doubleClick"==o?handleDoubleClick:handleTripleClick)(e,s.pos,s.inside,r)?r.preventDefault():setSelectionOrigin(e,"pointer"))};class MouseDown{constructor(e,t,r,n){let i,o;if(this.view=e,this.pos=t,this.event=r,this.flushed=n,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[selectNodeModifier],this.allowDefault=r.shiftKey,t.inside>-1)i=e.state.doc.nodeAt(t.inside),o=t.inside;else{let r=e.state.doc.resolve(t.pos);i=r.parent,o=r.depth?r.before():0}const s=n?null:r.target,a=s?e.docView.nearestDesc(s,!0):null;this.target=a&&1==a.nodeDOM.nodeType?a.nodeDOM:null;let{selection:l}=e.state;(0==r.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||l instanceof NodeSelection&&l.from<=o&&l.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!gecko$1||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(eventCoords(e))),this.updateAllowDefault(e),this.allowDefault||!t?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||safari$1&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome$1&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection$1.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(e){this.updateAllowDefault(e),setSelectionOrigin(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function inOrNearComposition(e,t){return!!e.composing||!!(safari$1&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}handlers$1.touchstart=e=>{e.input.lastTouch=Date.now(),forceDOMFlush(e),setSelectionOrigin(e,"pointer")},handlers$1.touchmove=e=>{e.input.lastTouch=Date.now(),setSelectionOrigin(e,"pointer")},handlers$1.contextmenu=e=>forceDOMFlush(e);const timeoutComposition=android$1?5e3:-1;function scheduleComposeEnd(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>endComposition(e),t))}function clearComposition(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=timestampFromCustomEvent());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode$1(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let r=textNodeBefore$1(t.focusNode,t.focusOffset),n=textNodeAfter$1(t.focusNode,t.focusOffset);if(r&&n&&r!=n){let t=n.pmViewDesc,i=e.domObserver.lastChangedTextNode;if(r==i||n==i)return i;if(!t||!t.isText(n.nodeValue))return n;if(e.input.compositionNode==n){let e=r.pmViewDesc;if(e&&e.isText(r.nodeValue))return n}}return r||n}function timestampFromCustomEvent(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function endComposition(e,t=!1){if(!(android$1&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),clearComposition(e),t||e.docView&&e.docView.dirty){let r=selectionFromDOM(e),n=e.state.selection;return r&&!r.eq(n)?e.dispatch(e.state.tr.setSelection(r)):!e.markCursor&&!t||n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?e.updateState(e.state):e.dispatch(e.state.tr.deleteSelection()),!0}return!1}}function captureCopy$1(e,t){if(!e.dom.parentNode)return;let r=e.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(t),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),e.focus()},50)}editHandlers.compositionstart=editHandlers.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,r=t.selection.$to;if(t.selection instanceof TextSelection&&(t.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(e=>!1===e.type.spec.inclusive)))e.markCursor=e.state.storedMarks||r.marks(),endComposition(e,!0),e.markCursor=null;else if(endComposition(e,!t.selection.empty),gecko$1&&t.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let t=e.domSelectionRange();for(let r=t.focusNode,n=t.focusOffset;r&&1==r.nodeType&&0!=n;){let t=n<0?r.lastChild:r.childNodes[n-1];if(!t)break;if(3==t.nodeType){let r=e.domSelection();r&&r.collapse(t,t.nodeValue.length);break}r=t,n=-1}}e.input.composing=!0}scheduleComposeEnd(e,timeoutComposition)},editHandlers.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,scheduleComposeEnd(e,20))};const brokenClipboardAPI$1=ie$2&&ie_version<15||ios$1&&webkit_version<604;function sliceSingleNode$1(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}function capturePaste$1(e,t){if(!e.dom.parentNode)return;let r=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,n=e.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout(()=>{e.focus(),n.parentNode&&n.parentNode.removeChild(n),r?doPaste$1(e,n.value,null,i,t):doPaste$1(e,n.textContent,n.innerHTML,i,t)},50)}function doPaste$1(e,t,r,n,i){let o=parseFromClipboard(e,t,r,n,e.state.selection.$from);if(e.someProp("handlePaste",t=>t(e,i,o||Slice.empty)))return!0;if(!o)return!1;let s=sliceSingleNode$1(o),a=s?e.state.tr.replaceSelectionWith(s,n):e.state.tr.replaceSelection(o);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText$1(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let r=e.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}handlers$1.copy=editHandlers.cut=(e,t)=>{let r=t,n=e.state.selection,i="cut"==r.type;if(n.empty)return;let o=brokenClipboardAPI$1?null:r.clipboardData,s=n.content(),{dom:a,text:l}=serializeForClipboard(e,s);o?(r.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):captureCopy$1(e,a),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},editHandlers.paste=(e,t)=>{let r=t;if(e.composing&&!android$1)return;let n=brokenClipboardAPI$1?null:r.clipboardData,i=e.input.shiftKey&&45!=e.input.lastKeyCode;n&&doPaste$1(e,getText$1(n),n.getData("text/html"),i,r)?r.preventDefault():capturePaste$1(e,r)};class Dragging{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const dragCopyModifier=mac$3?"altKey":"ctrlKey";function dragMoves(e,t){let r=e.someProp("dragCopies",e=>!e(t));return null!=r?r:!t[dragCopyModifier]}handlers$1.dragstart=(e,t)=>{let r=t,n=e.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let i,o=e.state.selection,s=o.empty?null:e.posAtCoords(eventCoords(r));if(s&&s.pos>=o.from&&s.pos<=(o instanceof NodeSelection?o.to-1:o.to));else if(n&&n.mightDrag)i=NodeSelection.create(e.state.doc,n.mightDrag.pos);else if(r.target&&1==r.target.nodeType){let t=e.docView.nearestDesc(r.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&(i=NodeSelection.create(e.state.doc,t.posBefore))}let a=(i||e.state.selection).content(),{dom:l,text:c,slice:u}=serializeForClipboard(e,a);(!r.dataTransfer.files.length||!chrome$1||chrome_version>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(brokenClipboardAPI$1?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI$1||r.dataTransfer.setData("text/plain",c),e.dragging=new Dragging(u,dragMoves(e,r),i)},handlers$1.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)},editHandlers.dragover=editHandlers.dragenter=(e,t)=>t.preventDefault(),editHandlers.drop=(e,t)=>{let r=t,n=e.dragging;if(e.dragging=null,!r.dataTransfer)return;let i=e.posAtCoords(eventCoords(r));if(!i)return;let o=e.state.doc.resolve(i.pos),s=n&&n.slice;s?e.someProp("transformPasted",t=>{s=t(s,e,!1)}):s=parseFromClipboard(e,getText$1(r.dataTransfer),brokenClipboardAPI$1?null:r.dataTransfer.getData("text/html"),!1,o);let a=!(!n||!dragMoves(e,r));if(e.someProp("handleDrop",t=>t(e,r,s||Slice.empty,a)))return void r.preventDefault();if(!s)return;r.preventDefault();let l=s?dropPoint(e.state.doc,o.pos,s):o.pos;null==l&&(l=o.pos);let c=e.state.tr;if(a){let{node:e}=n;e?e.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,p=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(p))return;let h=c.doc.resolve(u);if(d&&NodeSelection.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new NodeSelection(h));else{let t=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((e,r,n,i)=>t=i),c.setSelection(selectionBetween(e,h,c.doc.resolve(t)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))},handlers$1.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&selectionToDOM(e)},20))},handlers$1.blur=(e,t)=>{let r=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),r.relatedTarget&&e.dom.contains(r.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},handlers$1.beforeinput=(e,t)=>{if(chrome$1&&android$1&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",t=>t(e,keyEvent(8,"Backspace"))))return;let{$cursor:r}=e.state.selection;r&&r.pos>0&&e.dispatch(e.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let e in editHandlers)handlers$1[e]=editHandlers[e];function compareObjs(e,t){if(e==t)return!0;for(let r in e)if(e[r]!==t[r])return!1;for(let r in t)if(!(r in e))return!1;return!0}let WidgetType$1=class e{constructor(e,t){this.toDOM=e,this.spec=t||noSpec,this.side=this.spec.side||0}map(e,t,r,n){let{pos:i,deleted:o}=e.mapResult(t.from+n,this.side<0?-1:1);return o?null:new Decoration$1(i-r,i-r,this)}valid(){return!0}eq(t){return this==t||t instanceof e&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&compareObjs(this.spec,t.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}};class InlineType{constructor(e,t){this.attrs=e,this.spec=t||noSpec}map(e,t,r,n){let i=e.map(t.from+n,this.spec.inclusiveStart?-1:1)-r,o=e.map(t.to+n,this.spec.inclusiveEnd?1:-1)-r;return i>=o?null:new Decoration$1(i,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof InlineType&&compareObjs(this.attrs,e.attrs)&&compareObjs(this.spec,e.spec)}static is(e){return e.type instanceof InlineType}destroy(){}}let NodeType$1=class e{constructor(e,t){this.attrs=e,this.spec=t||noSpec}map(e,t,r,n){let i=e.mapResult(t.from+n,1);if(i.deleted)return null;let o=e.mapResult(t.to+n,-1);return o.deleted||o.pos<=i.pos?null:new Decoration$1(i.pos-r,o.pos-r,this)}valid(e,t){let r,{index:n,offset:i}=e.content.findIndex(t.from);return i==t.from&&!(r=e.child(n)).isText&&i+r.nodeSize==t.to}eq(t){return this==t||t instanceof e&&compareObjs(this.attrs,t.attrs)&&compareObjs(this.spec,t.spec)}destroy(){}},Decoration$1=class e{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(t,r){return new e(t,r,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(t,r,n){return new e(t,t,new WidgetType$1(r,n))}static inline(t,r,n,i){return new e(t,r,new InlineType(n,i))}static node(t,r,n,i){return new e(t,r,new NodeType$1(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType$1}};const none$4=[],noSpec={};class DecorationSet{constructor(e,t){this.local=e.length?e:none$4,this.children=t.length?t:none$4}static create(e,t){return t.length?buildTree$1(t,e,0,noSpec):empty$3}find(e,t,r){let n=[];return this.findInner(null==e?0:e,null==t?1e9:t,n,0,r),n}findInner(e,t,r,n,i){for(let o=0;o<this.local.length;o++){let s=this.local[o];s.from<=t&&s.to>=e&&(!i||i(s.spec))&&r.push(s.copy(s.from+n,s.to+n))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let s=this.children[o]+1;this.children[o+2].findInner(e-s,t-s,r,n+s,i)}}map(e,t,r){return this==empty$3||0==e.maps.length?this:this.mapInner(e,t,0,0,r||noSpec)}mapInner(e,t,r,n,i){let o;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(e,r,n);a&&a.type.valid(t,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?mapChildren(this.children,o||[],e,t,r,n,i):o?new DecorationSet(o.sort(byPos),none$4):empty$3}add(e,t){return t.length?this==empty$3?DecorationSet.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let n,i=0;e.forEach((e,o)=>{let s,a=o+r;if(s=takeSpansForNode(t,e,a)){for(n||(n=this.children.slice());i<n.length&&n[i]<o;)i+=3;n[i]==o?n[i+2]=n[i+2].addInner(e,s,a+1):n.splice(i,0,o,o+e.nodeSize,buildTree$1(s,e,a+1,noSpec)),i+=3}});let o=moveSpans(i?withoutNulls(t):t,-r);for(let s=0;s<o.length;s++)o[s].type.valid(e,o[s])||o.splice(s--,1);return new DecorationSet(o.length?this.local.concat(o).sort(byPos):this.local,n||this.children)}remove(e){return 0==e.length||this==empty$3?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,n=this.local;for(let i=0;i<r.length;i+=3){let n,o=r[i]+t,s=r[i+1]+t;for(let t,r=0;r<e.length;r++)(t=e[r])&&t.from>o&&t.to<s&&(e[r]=null,(n||(n=[])).push(t));if(!n)continue;r==this.children&&(r=this.children.slice());let a=r[i+2].removeInner(n,o+1);a!=empty$3?r[i+2]=a:(r.splice(i,3),i-=3)}if(n.length)for(let i,o=0;o<e.length;o++)if(i=e[o])for(let e=0;e<n.length;e++)n[e].eq(i,t)&&(n==this.local&&(n=this.local.slice()),n.splice(e--,1));return r==this.children&&n==this.local?this:n.length||r.length?new DecorationSet(n,r):empty$3}forChild(e,t){if(this==empty$3)return this;if(t.isLeaf)return DecorationSet.empty;let r,n;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=e){this.children[s]==e&&(r=this.children[s+2]);break}let i=e+1,o=i+t.content.size;for(let s=0;s<this.local.length;s++){let e=this.local[s];if(e.from<o&&e.to>i&&e.type instanceof InlineType){let t=Math.max(i,e.from)-i,r=Math.min(o,e.to)-i;t<r&&(n||(n=[])).push(e.copy(t,r))}}if(n){let e=new DecorationSet(n.sort(byPos),none$4);return r?new DecorationGroup([e,r]):e}return r||empty$3}eq(e){if(this==e)return!0;if(!(e instanceof DecorationSet)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return removeOverlap(this.localsInner(e))}localsInner(e){if(this==empty$3)return none$4;if(e.inlineContent||!this.local.some(InlineType.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof InlineType||t.push(this.local[r]);return t}forEachSet(e){e(this)}}DecorationSet.empty=new DecorationSet([],[]),DecorationSet.removeOverlap=removeOverlap;const empty$3=DecorationSet.empty;class DecorationGroup{constructor(e){this.members=e}map(e,t){const r=this.members.map(r=>r.map(e,t,noSpec));return DecorationGroup.from(r)}forChild(e,t){if(t.isLeaf)return DecorationSet.empty;let r=[];for(let n=0;n<this.members.length;n++){let i=this.members[n].forChild(e,t);i!=empty$3&&(i instanceof DecorationGroup?r=r.concat(i.members):r.push(i))}return DecorationGroup.from(r)}eq(e){if(!(e instanceof DecorationGroup)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let n=0;n<this.members.length;n++){let i=this.members[n].localsInner(e);if(i.length)if(t){r&&(t=t.slice(),r=!1);for(let e=0;e<i.length;e++)t.push(i[e])}else t=i}return t?removeOverlap(r?t:t.sort(byPos)):none$4}static from(e){switch(e.length){case 0:return empty$3;case 1:return e[0];default:return new DecorationGroup(e.every(e=>e instanceof DecorationSet)?e:e.reduce((e,t)=>e.concat(t instanceof DecorationSet?t:t.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function mapChildren(e,t,r,n,i,o,s){let a=e.slice();for(let c=0,u=o;c<r.maps.length;c++){let e=0;r.maps[c].forEach((t,r,n,i)=>{let o=i-n-(r-t);for(let s=0;s<a.length;s+=3){let n=a[s+1];if(n<0||t>n+u-e)continue;let i=a[s]+u-e;r>=i?a[s+1]=t<=i?-2:-1:t>=u&&o&&(a[s]+=o,a[s+1]+=o)}e+=o}),u=r.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(-2==a[c+1]){l=!0,a[c+1]=-1;continue}let t=r.map(e[c]+o),u=t-i;if(u<0||u>=n.content.size){l=!0;continue}let d=r.map(e[c+1]+o,-1)-i,{index:p,offset:h}=n.content.findIndex(u),f=n.maybeChild(p);if(f&&h==u&&h+f.nodeSize==d){let n=a[c+2].mapInner(r,f,t+1,e[c]+o+1,s);n!=empty$3?(a[c]=u,a[c+1]=d,a[c+2]=n):(a[c+1]=-2,l=!0)}else l=!0}if(l){let l=buildTree$1(mapAndGatherRemainingDecorations(a,e,t,r,i,o,s),n,0,s);t=l.local;for(let e=0;e<a.length;e+=3)a[e+1]<0&&(a.splice(e,3),e-=3);for(let e=0,t=0;e<l.children.length;e+=3){let r=l.children[e];for(;t<a.length&&a[t]<r;)t+=3;a.splice(t,0,l.children[e],l.children[e+1],l.children[e+2])}}return new DecorationSet(t.sort(byPos),a)}function moveSpans(e,t){if(!t||!e.length)return e;let r=[];for(let n=0;n<e.length;n++){let i=e[n];r.push(new Decoration$1(i.from+t,i.to+t,i.type))}return r}function mapAndGatherRemainingDecorations(e,t,r,n,i,o,s){function a(e,t){for(let o=0;o<e.local.length;o++){let a=e.local[o].map(n,i,t);a?r.push(a):s.onRemove&&s.onRemove(e.local[o].spec)}for(let r=0;r<e.children.length;r+=3)a(e.children[r+2],e.children[r]+t+1)}for(let l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+o+1);return r}function takeSpansForNode(e,t,r){if(t.isLeaf)return null;let n=r+t.nodeSize,i=null;for(let o,s=0;s<e.length;s++)(o=e[s])&&o.from>r&&o.to<n&&((i||(i=[])).push(o),e[s]=null);return i}function withoutNulls(e){let t=[];for(let r=0;r<e.length;r++)null!=e[r]&&t.push(e[r]);return t}function buildTree$1(e,t,r,n){let i=[],o=!1;t.forEach((t,s)=>{let a=takeSpansForNode(e,t,s+r);if(a){o=!0;let e=buildTree$1(a,t,r+s+1,n);e!=empty$3&&i.push(s,s+t.nodeSize,e)}});let s=moveSpans(o?withoutNulls(e):e,-r).sort(byPos);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(n.onRemove&&n.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new DecorationSet(s,i):empty$3}function byPos(e,t){return e.from-t.from||e.to-t.to}function removeOverlap(e){let t=e;for(let r=0;r<t.length-1;r++){let n=t[r];if(n.from!=n.to)for(let i=r+1;i<t.length;i++){let o=t[i];if(o.from!=n.from){o.from<n.to&&(t==e&&(t=e.slice()),t[r]=n.copy(n.from,o.from),insertAhead(t,i,n.copy(o.from,n.to)));break}o.to!=n.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,n.to),insertAhead(t,i+1,o.copy(n.to,o.to)))}}return t}function insertAhead(e,t,r){for(;t<e.length&&byPos(r,e[t])>0;)t++;e.splice(t,0,r)}function viewDecorations(e){let t=[];return e.someProp("decorations",r=>{let n=r(e.state);n&&n!=empty$3&&t.push(n)}),e.cursorWrapper&&t.push(DecorationSet.create(e.state.doc,[e.cursorWrapper.deco])),DecorationGroup.from(t)}const observeOptions$1={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData$1=ie$2&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}let DOMObserver$1=class{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);ie$2&&ie_version<=11&&e.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData$1&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions$1)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$2&&ie_version<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&isEquivalentPosition$1(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t,r=new Set;for(let i=e.focusNode;i;i=parentNode(i))r.add(i);for(let i=e.anchorNode;i;i=parentNode(i))if(r.has(i)){t=i;break}let n=t&&this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&hasFocusAndSelection(e)&&!this.ignoreSelectionChange(r),i=-1,o=-1,s=!1,a=[];if(e.editable)for(let c=0;c<t.length;c++){let e=this.registerMutation(t[c],a);e&&(i=i<0?e.from:Math.min(e.from,i),o=o<0?e.to:Math.max(e.to,o),e.typeOver&&(s=!0))}if(gecko$1&&a.length){let t=a.filter(e=>"BR"==e.nodeName);if(2==t.length){let[e,r]=t;e.parentNode&&e.parentNode.parentNode==r.parentNode?r.remove():e.remove()}else{let{focusNode:r}=this.currentSelection;for(let n of t){let t=n.parentNode;!t||"LI"!=t.nodeName||r&&blockParent(e,r)==t||n.remove()}}}let l=null;i<0&&n&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&selectionCollapsed(r)&&(l=selectionFromDOM(e))&&l.eq(Selection$1.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,selectionToDOM(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||n)&&(i>-1&&(e.docView.markDirty(i,o),checkCSS(e)),this.handleDOMChange(i,o,s,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||selectionToDOM(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(r==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!r||r.ignoreMutation(e))return null;if("childList"==e.type){for(let r=0;r<e.addedNodes.length;r++){let n=e.addedNodes[r];t.push(n),3==n.nodeType&&(this.lastChangedTextNode=n)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let n=e.previousSibling,i=e.nextSibling;if(ie$2&&ie_version<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:r,nextSibling:o}=e.addedNodes[t];(!r||Array.prototype.indexOf.call(e.addedNodes,r)<0)&&(n=r),(!o||Array.prototype.indexOf.call(e.addedNodes,o)<0)&&(i=o)}let o=n&&n.parentNode==e.target?domIndex$1(n)+1:0,s=r.localPosFromDOM(e.target,o,-1),a=i&&i.parentNode==e.target?domIndex$1(i):e.target.childNodes.length;return{from:s,to:r.localPosFromDOM(e.target,a,1)}}return"attributes"==e.type?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}},cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(e){if(!cssChecked.has(e)&&(cssChecked.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace))){if(e.requiresGeckoHackNode=gecko$1,cssCheckWarned)return;cssCheckWarned=!0}}function rangeToSelectionRange(e,t){let r=t.startContainer,n=t.startOffset,i=t.endContainer,o=t.endOffset,s=e.domAtPos(e.state.selection.anchor);return isEquivalentPosition$1(s.node,s.offset,i,o)&&([r,n,i,o]=[i,o,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:o}}function safariShadowSelectionRange(e,t){if(t.getComposedRanges){let r=t.getComposedRanges(e.root)[0];if(r)return rangeToSelectionRange(e,r)}let r;function n(e){e.preventDefault(),e.stopImmediatePropagation(),r=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",n,!0),r?rangeToSelectionRange(e,r):null}function blockParent(e,t){for(let r=t.parentNode;r&&r!=e.dom;r=r.parentNode){let t=e.docView.nearestDesc(r,!0);if(t&&t.node.isBlock)return r}return null}function parseBetween(e,t,r){let n,{node:i,fromOffset:o,toOffset:s,from:a,to:l}=e.docView.parseRange(t,r),c=e.domSelectionRange(),u=c.anchorNode;if(u&&e.dom.contains(1==u.nodeType?u:u.parentNode)&&(n=[{node:u,offset:c.anchorOffset}],selectionCollapsed(c)||n.push({node:c.focusNode,offset:c.focusOffset})),chrome$1&&8===e.input.lastKeyCode)for(let g=s;g>o;g--){let e=i.childNodes[g-1],t=e.pmViewDesc;if("BR"==e.nodeName&&!t){s=g;break}if(!t||t.size)break}let d=e.state.doc,p=e.someProp("domParser")||DOMParser$1.fromSchema(e.state.schema),h=d.resolve(a),f=null,m=p.parse(i,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:o,to:s,preserveWhitespace:"pre"!=h.parent.type.whitespace||"full",findPositions:n,ruleFromNode:ruleFromNode,context:h});if(n&&null!=n[0].pos){let e=n[0].pos,t=n[1]&&n[1].pos;null==t&&(t=e),f={anchor:e+a,head:t+a}}return{doc:m,sel:f,from:a,to:l}}function ruleFromNode(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(safari$1&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||safari$1&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(e,t,r,n,i){let o=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,r=selectionFromDOM(e,t);if(r&&!e.state.selection.eq(r)){if(chrome$1&&android$1&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",t=>t(e,keyEvent(13,"Enter"))))return;let n=e.state.tr.setSelection(r);"pointer"==t?n.setMeta("pointer",!0):"key"==t&&n.scrollIntoView(),o&&n.setMeta("composition",o),e.dispatch(n)}return}let s=e.state.doc.resolve(t),a=s.sharedDepth(r);t=s.before(a+1),r=e.state.doc.resolve(r).after(a+1);let l,c,u=e.state.selection,d=parseBetween(e,t,r),p=e.state.doc,h=p.slice(d.from,d.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(l=e.state.selection.to,c="end"):(l=e.state.selection.from,c="start"),e.input.lastKeyCode=null;let f=findDiff$1(h.content,d.doc.content,d.from,l,c);if(f&&e.input.domChangeCount++,(ios$1&&e.input.lastIOSEnter>Date.now()-225||android$1)&&i.some(e=>1==e.nodeType&&!isInline.test(e.nodeName))&&(!f||f.endA>=f.endB)&&e.someProp("handleKeyDown",t=>t(e,keyEvent(13,"Enter"))))return void(e.input.lastIOSEnter=0);if(!f){if(!(n&&u instanceof TextSelection&&!u.empty&&u.$head.sameParent(u.$anchor))||e.composing||d.sel&&d.sel.anchor!=d.sel.head){if(d.sel){let t=resolveSelection(e,e.state.doc,d.sel);if(t&&!t.eq(e.state.selection)){let r=e.state.tr.setSelection(t);o&&r.setMeta("composition",o),e.dispatch(r)}}return}f={start:u.from,endA:u.to,endB:u.to}}e.state.selection.from<e.state.selection.to&&f.start==f.endB&&e.state.selection instanceof TextSelection&&(f.start>e.state.selection.from&&f.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?f.start=e.state.selection.from:f.endA<e.state.selection.to&&f.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(f.endB+=e.state.selection.to-f.endA,f.endA=e.state.selection.to)),ie$2&&ie_version<=11&&f.endB==f.start+1&&f.endA==f.start&&f.start>d.from&&" "==d.doc.textBetween(f.start-d.from-1,f.start-d.from+1)&&(f.start--,f.endA--,f.endB--);let m=d.doc.resolveNoCache(f.start-d.from),g=d.doc.resolveNoCache(f.endB-d.from),b=p.resolve(f.start),y=m.sameParent(g)&&m.parent.inlineContent&&b.end()>=f.endA;if((ios$1&&e.input.lastIOSEnter>Date.now()-225&&(!y||i.some(e=>"DIV"==e.nodeName||"P"==e.nodeName))||!y&&m.pos<d.doc.content.size&&(!m.sameParent(g)||!m.parent.inlineContent)&&m.pos<g.pos&&!/\S/.test(d.doc.textBetween(m.pos,g.pos,"","")))&&e.someProp("handleKeyDown",t=>t(e,keyEvent(13,"Enter"))))return void(e.input.lastIOSEnter=0);if(e.state.selection.anchor>f.start&&looksLikeBackspace(p,f.start,f.endA,m,g)&&e.someProp("handleKeyDown",t=>t(e,keyEvent(8,"Backspace"))))return void(android$1&&chrome$1&&e.domObserver.suppressSelectionUpdates());chrome$1&&f.endB==f.start&&(e.input.lastChromeDelete=Date.now()),android$1&&!y&&m.start()!=g.start()&&0==g.parentOffset&&m.depth==g.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==f.endA&&(f.endB-=2,g=d.doc.resolveNoCache(f.endB-d.from),setTimeout(()=>{e.someProp("handleKeyDown",function(t){return t(e,keyEvent(13,"Enter"))})},20));let T,E=f.start,O=f.endA,S=t=>{let r=t||e.state.tr.replace(E,O,d.doc.slice(f.start-d.from,f.endB-d.from));if(d.sel){let t=resolveSelection(e,r.doc,d.sel);t&&!(chrome$1&&e.composing&&t.empty&&(f.start!=f.endB||e.input.lastChromeDelete<Date.now()-100)&&(t.head==E||t.head==r.mapping.map(O)-1)||ie$2&&t.empty&&t.head==E)&&r.setSelection(t)}return o&&r.setMeta("composition",o),r.scrollIntoView()};if(y)if(m.pos==g.pos){ie$2&&ie_version<=11&&0==m.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(e),20));let t=S(e.state.tr.delete(E,O)),r=p.resolve(f.start).marksAcross(p.resolve(f.endA));r&&t.ensureMarks(r),e.dispatch(t)}else if(f.endA==f.endB&&(T=isMarkChange(m.parent.content.cut(m.parentOffset,g.parentOffset),b.parent.content.cut(b.parentOffset,f.endA-b.start())))){let t=S(e.state.tr);"add"==T.type?t.addMark(E,O,T.mark):t.removeMark(E,O,T.mark),e.dispatch(t)}else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let t=m.parent.textBetween(m.parentOffset,g.parentOffset),r=()=>S(e.state.tr.insertText(t,E,O));e.someProp("handleTextInput",n=>n(e,E,O,t,r))||e.dispatch(r())}else e.dispatch(S());else e.dispatch(S())}function resolveSelection(e,t,r){return Math.max(r.anchor,r.head)>t.content.size?null:selectionBetween(e,t.resolve(r.anchor),t.resolve(r.head))}function isMarkChange(e,t){let r,n,i,o=e.firstChild.marks,s=t.firstChild.marks,a=o,l=s;for(let u=0;u<s.length;u++)a=s[u].removeFromSet(a);for(let u=0;u<o.length;u++)l=o[u].removeFromSet(l);if(1==a.length&&0==l.length)n=a[0],r="add",i=e=>e.mark(n.addToSet(e.marks));else{if(0!=a.length||1!=l.length)return null;n=l[0],r="remove",i=e=>e.mark(n.removeFromSet(e.marks))}let c=[];for(let u=0;u<t.childCount;u++)c.push(i(t.child(u)));if(Fragment.from(c).eq(e))return{mark:n,type:r}}function looksLikeBackspace(e,t,r,n,i){if(r-t<=i.pos-n.pos||skipClosingAndOpening(n,!0,!1)<i.pos)return!1;let o=e.resolve(t);if(!n.parent.isTextblock){let e=o.nodeAfter;return null!=e&&r==t+e.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=e.resolve(skipClosingAndOpening(o,!0,!0));return!(!s.parent.isTextblock||s.pos>r||skipClosingAndOpening(s,!0,!1)<r)&&n.parent.content.cut(n.parentOffset).eq(s.parent.content)}function skipClosingAndOpening(e,t,r){let n=e.depth,i=t?e.end():e.pos;for(;n>0&&(t||e.indexAfter(n)==e.node(n).childCount);)n--,i++,t=!1;if(r){let t=e.node(n).maybeChild(e.indexAfter(n));for(;t&&!t.isLeaf;)t=t.firstChild,i++}return i}function findDiff$1(e,t,r,n,i){let o=e.findDiffStart(t,r);if(null==o)return null;let{a:s,b:a}=e.findDiffEnd(t,r+e.size,r+t.size);if("end"==i&&(n-=s+Math.max(0,o-Math.min(s,a))-o),s<o&&e.size<t.size){let e=n<=o&&n>=s?o-n:0;o-=e,o&&o<t.size&&isSurrogatePair$1(t.textBetween(o-1,o+1))&&(o+=e?1:-1),a=o+(a-s),s=o}else if(a<o){let t=n<=o&&n>=a?o-n:0;o-=t,o&&o<e.size&&isSurrogatePair$1(e.textBetween(o-1,o+1))&&(o+=t?1:-1),s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}function isSurrogatePair$1(e){if(2!=e.length)return!1;let t=e.charCodeAt(0),r=e.charCodeAt(1);return t>=56320&&t<=57343&&r>=55296&&r<=56319}let EditorView$1=class{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState$2,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver$1(this,(e,t,r,n)=>readDOMChange(this,e,t,r,n)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(checkStateComponent),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let n=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(clearComposition(this),o=!0),this.state=e;let s=n.plugins!=e.plugins||this._props.plugins!=t.plugins;if(s||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=buildNodeViews(this);changedNodeViews(e,this.nodeViews)&&(this.nodeViews=e,i=!0)}(s||t.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let a=viewDecorations(this),l=computeDocDeco(this),c=n.plugins==e.plugins||n.doc.eq(e.doc)?e.scrollToSelection>n.scrollToSelection?"to selection":"preserve":"reset",u=i||!this.docView.matchesNode(e.doc,l,a);!u&&e.selection.eq(n.selection)||(o=!0);let d="preserve"==c&&o&&null==this.dom.style.overflowAnchor&&storeScrollPos(this);if(o){this.domObserver.stop();let t=u&&(ie$2||chrome$1)&&!this.composing&&!n.selection.empty&&!e.selection.empty&&selectionContextChanged(n.selection,e.selection);if(u){let r=chrome$1?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode$1(this)),!i&&this.docView.update(e.doc,l,a,this)||(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=docViewDesc(e.doc,l,a,this.dom,this)),r&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,t):(syncNodeSelection(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(n),(null===(r=this.dragging)||void 0===r?void 0:r.node)&&!n.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,n),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():d&&resetScrollPos(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(e&&this.dom.contains(1==e.nodeType?e:e.parentNode))if(this.someProp("handleScrollToSelection",e=>e(this)));else if(this.state.selection instanceof NodeSelection){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&scrollRectIntoView$1(this,t.getBoundingClientRect(),e)}else scrollRectIntoView$1(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}updateDraggedNode(e,t){let r=e.node,n=-1;if(this.state.doc.nodeAt(r.from)==r.node)n=r.from;else{let e=r.from+(this.state.doc.content.size-t.doc.content.size);(e>0&&this.state.doc.nodeAt(e))==r.node&&(n=e)}this.dragging=new Dragging(e.slice,e.move,n<0?void 0:NodeSelection.create(this.state.doc,n))}someProp(e,t){let r,n=this._props&&this._props[e];if(null!=n&&(r=t?t(n):n))return r;for(let o=0;o<this.directPlugins.length;o++){let n=this.directPlugins[o].props[e];if(null!=n&&(r=t?t(n):n))return r}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let n=i[o].props[e];if(null!=n&&(r=t?t(n):n))return r}}hasFocus(){if(ie$2){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll$1(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t;return e||document}updateRoot(){this._root=null}posAtCoords(e){return posAtCoords$1(this,e)}coordsAtPos(e,t=1){return coordsAtPos(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let n=this.docView.posFromDOM(e,t,r);if(null==n)throw new RangeError("DOM position not inside the editor");return n}endOfTextblock(e,t){return endOfTextblock(this,t||this.state,e)}pasteHTML(e,t){return doPaste$1(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return doPaste$1(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return serializeForClipboard(this,e)}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return null==this.docView}dispatchEvent(e){return dispatchEvent(this,e)}domSelectionRange(){let e=this.domSelection();return e?safari$1&&11===this.root.nodeType&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariShadowSelectionRange(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}};function computeDocDeco(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",r=>{if("function"==typeof r&&(r=r(e.state)),r)for(let e in r)"class"==e?t.class+=" "+r[e]:"style"==e?t.style=(t.style?t.style+";":"")+r[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(r[e]))}),t.translate||(t.translate="no"),[Decoration$1.node(0,e.state.doc.content.size,t)]}function updateCursorWrapper(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Decoration$1.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function getEditable(e){return!e.someProp("editable",t=>!1===t(e.state))}function selectionContextChanged(e,t){let r=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(r)!=t.$anchor.start(r)}function buildNodeViews(e){let t=Object.create(null);function r(e){for(let r in e)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=e[r])}return e.someProp("nodeViews",r),e.someProp("markViews",r),t}function changedNodeViews(e,t){let r=0,n=0;for(let i in e){if(e[i]!=t[i])return!0;r++}for(let i in t)n++;return r!=n}function checkStateComponent(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}EditorView$1.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};let EventEmitter$1=class{_listeners=new Map;on(e,t){this._listeners.has(e)||this._listeners.set(e,[]),this._listeners.get(e).push(t)}off(e,t){this._listeners.has(e)&&this._listeners.set(e,this._listeners.get(e).filter(e=>e!==t))}emit(e,t){this._listeners.get(e)?.forEach(e=>e(t))}countOf(e){return this._listeners.get(e)?.length||0}};class SafeEventEmitter extends EventEmitter$1{onError;constructor(e){super(),this.onError=e?.onError??console.error}emit(e,t){this._listeners.get(e)?.forEach(e=>this.safeExec(()=>e(t)))}safeExec(e){try{e()}catch(t){this.onError(t)}}}class Logger2{#e=new SafeEventEmitter;log(e,...t){const r=Object.assign({},...t),n=Object.assign(r,{msg:e});this.#e.emit("log",n)}warn(e,...t){const r=Object.assign({},...t),n=Object.assign(r,{msg:e});this.#e.emit("warn",n)}error(e,...t){const r="string"==typeof e?Error(e):e,n=Object.assign({},...t),i=Object.assign(n,{error:r});this.#e.emit("error",i)}action(e){this.#e.emit("action",e)}metrics(e){this.#e.emit("metrics",e)}event(e){this.#e.emit("event",e)}nested(e){const t=this,r=Symbol();return{[r]:e,log(e,...n){t.#e.countOf("log")&&t.log(e,this[r],...n)},warn(e,...n){t.#e.countOf("warn")&&t.warn(e,this[r],...n)},error(e,...n){t.#e.countOf("error")&&t.error(e,this[r],...n)},action(e){t.#e.countOf("action")&&t.action({...this[r],...e})},metrics(e){t.#e.countOf("metrics")&&t.metrics({...this[r],...e})},event(e){t.#e.countOf("event")&&t.event({...this[r],...e})},nested(e){return{...this,[r]:{...this[r],...e}}},on:t.on.bind(t),off:t.off.bind(t)}}on(e,t){this.#e.on(e,t)}off(e,t){this.#e.off(e,t)}}const noop$9=()=>{};class Logger{#t=this.createLogger({});get log(){return this.#t.log}get info(){return this.#t.info}get error(){return this.#t.error}get warn(){return this.#t.warn}get metrics(){return this.#t.metrics}get action(){return this.#t.action}setLogger(e={}){this.#t=this.createLogger(e)}createLogger(e){return{log:e.log??noop$9,info:e.info??noop$9,warn:e.warn??noop$9,error:e.error??noop$9,metrics:e.metrics??noop$9,action:e.action??noop$9}}}const logger=new Logger,globalLogger=logger;class WysiwygContentHandler{#r;#n;constructor(e,t){this.#r=e,this.#n=t}clear(){this.#r.dispatch(this.#r.state.tr.setSelection(new AllSelection(this.#r.state.doc)).replaceSelection(Slice.empty))}replace(e){this.#r.dispatch(this.#r.state.tr.setSelection(new AllSelection(this.#r.state.doc)).replaceSelection(new Slice(this.#n.parse(e).content,0,0)))}prepend(e){this.#r.dispatch(this.#r.state.tr.insert(0,this.#n.parse(e).content))}append(e){let t=this.#r.state.tr;if("paragraph"===t.doc.lastChild?.type.name&&0===t.doc.lastChild.childCount){const r=t.doc.nodeSize-3;t=t.replaceWith(r-1,r+1,this.#n.parse(e))}else t=this.appendContentTr(t,e);"paragraph"===t.doc.lastChild?.type.name&&0===t.doc.lastChild.childCount||(t=this.appendContentTr(t,"")),this.#r.dispatch(t)}moveCursor(e){switch(e){case"start":{const{tr:e}=this.#r.state;this.#r.dispatch(e.setSelection(TextSelection.create(e.doc,1)));break}case"end":{const{lastChild:e}=this.#r.state.doc,{tr:t}=this.#r.state,r=t.doc.nodeSize-2;e?.isTextblock||e?.isText||this.appendContentTr(t,""),this.#r.dispatch(t.setSelection(TextSelection.create(t.doc,t.mapping.map(r)-1)).scrollIntoView());break}default:throw new Error('The "position" argument must be "start" or "end"')}}appendContentTr(e,t){return e.insert(e.doc.nodeSize-2,this.#n.parse(t).content)}}const decodeCache={};function getDecodeCache(e){let t=decodeCache[e];if(t)return t;t=decodeCache[e]=[];for(let r=0;r<128;r++){const e=String.fromCharCode(r);t.push(e)}for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);t[n]="%"+("0"+n.toString(16).toUpperCase()).slice(-2)}return t}function decode$4(e,t){"string"!=typeof t&&(t=decode$4.defaultChars);const r=getDecodeCache(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(e){let t="";for(let n=0,i=e.length;n<i;n+=3){const o=parseInt(e.slice(n+1,n+3),16);if(o<128)t+=r[o];else{if(192==(224&o)&&n+3<i){const r=parseInt(e.slice(n+4,n+6),16);if(128==(192&r)){const e=o<<6&1984|63&r;t+=e<128?"":String.fromCharCode(e),n+=3;continue}}if(224==(240&o)&&n+6<i){const r=parseInt(e.slice(n+4,n+6),16),i=parseInt(e.slice(n+7,n+9),16);if(128==(192&r)&&128==(192&i)){const e=o<<12&61440|r<<6&4032|63&i;t+=e<2048||e>=55296&&e<=57343?"":String.fromCharCode(e),n+=6;continue}}if(240==(248&o)&&n+9<i){const r=parseInt(e.slice(n+4,n+6),16),i=parseInt(e.slice(n+7,n+9),16),s=parseInt(e.slice(n+10,n+12),16);if(128==(192&r)&&128==(192&i)&&128==(192&s)){let e=o<<18&1835008|r<<12&258048|i<<6&4032|63&s;e<65536||e>1114111?t+="":(e-=65536,t+=String.fromCharCode(55296+(e>>10),56320+(1023&e))),n+=9;continue}}t+=""}}return t})}decode$4.defaultChars=";/?:@&=+$,#",decode$4.componentChars="";const encodeCache={};function getEncodeCache(e){let t=encodeCache[e];if(t)return t;t=encodeCache[e]=[];for(let r=0;r<128;r++){const e=String.fromCharCode(r);/^[0-9a-z]$/i.test(e)?t.push(e):t.push("%"+("0"+r.toString(16).toUpperCase()).slice(-2))}for(let r=0;r<e.length;r++)t[e.charCodeAt(r)]=e[r];return t}function encode$3(e,t,r){"string"!=typeof t&&(r=t,t=encode$3.defaultChars),void 0===r&&(r=!0);const n=getEncodeCache(t);let i="";for(let o=0,s=e.length;o<s;o++){const t=e.charCodeAt(o);if(r&&37===t&&o+2<s&&/^[0-9a-f]{2}$/i.test(e.slice(o+1,o+3)))i+=e.slice(o,o+3),o+=2;else if(t<128)i+=n[t];else if(t>=55296&&t<=57343){if(t>=55296&&t<=56319&&o+1<s){const t=e.charCodeAt(o+1);if(t>=56320&&t<=57343){i+=encodeURIComponent(e[o]+e[o+1]),o++;continue}}i+="%EF%BF%BD"}else i+=encodeURIComponent(e[o])}return i}function format(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&-1!==e.hostname.indexOf(":")?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}encode$3.defaultChars=";/?:@&=+$,-_.!~*'()#",encode$3.componentChars="-_.!~*'()";const protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function urlParse(e,t){if(e&&e instanceof Url)return e;const r=new Url;return r.parse(e,t),r}Url.prototype.parse=function(e,t){let r,n,i,o=e;if(o=o.trim(),!t&&1===e.split("#").length){const e=simplePathPattern.exec(o);if(e)return this.pathname=e[1],e[2]&&(this.search=e[2]),this}let s=protocolPattern.exec(o);if(s&&(s=s[0],r=s.toLowerCase(),this.protocol=s,o=o.substr(s.length)),(t||s||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i="//"===o.substr(0,2),!i||s&&hostlessProtocol[s]||(o=o.substr(2),this.slashes=!0)),!hostlessProtocol[s]&&(i||s&&!slashedProtocol[s])){let e,t,r=-1;for(let a=0;a<hostEndingChars.length;a++)n=o.indexOf(hostEndingChars[a]),-1!==n&&(-1===r||n<r)&&(r=n);t=-1===r?o.lastIndexOf("@"):o.lastIndexOf("@",r),-1!==t&&(e=o.slice(0,t),o=o.slice(t+1),this.auth=e),r=-1;for(let a=0;a<nonHostChars.length;a++)n=o.indexOf(nonHostChars[a]),-1!==n&&(-1===r||n<r)&&(r=n);-1===r&&(r=o.length),":"===o[r-1]&&r--;const i=o.slice(0,r);o=o.slice(r),this.parseHost(i),this.hostname=this.hostname||"";const s="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!s){const e=this.hostname.split(/\./);for(let t=0,r=e.length;t<r;t++){const r=e[t];if(r&&!r.match(hostnamePartPattern)){let n="";for(let e=0,t=r.length;e<t;e++)r.charCodeAt(e)>127?n+="x":n+=r[e];if(!n.match(hostnamePartPattern)){const n=e.slice(0,t),i=e.slice(t+1),s=r.match(hostnamePartStart);s&&(n.push(s[1]),i.unshift(s[2])),i.length&&(o=i.join(".")+o),this.hostname=n.join(".");break}}}}this.hostname.length>hostnameMaxLen&&(this.hostname=""),s&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=o.indexOf("#");-1!==a&&(this.hash=o.substr(a),o=o.slice(0,a));const l=o.indexOf("?");return-1!==l&&(this.search=o.substr(l),o=o.slice(0,l)),o&&(this.pathname=o),slashedProtocol[r]&&this.hostname&&!this.pathname&&(this.pathname=""),this},Url.prototype.parseHost=function(e){let t=portPattern.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const mdurl=Object.freeze(Object.defineProperty({__proto__:null,decode:decode$4,encode:encode$3,format:format,parse:urlParse},Symbol.toStringTag,{value:"Module"})),Any=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Cc=/[\0-\x1F\x7F-\x9F]/,regex$1=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,P$1=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,regex=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,Z$1=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,ucmicro=Object.freeze(Object.defineProperty({__proto__:null,Any:Any,Cc:Cc,Cf:regex$1,P:P$1,S:regex,Z:Z$1},Symbol.toStringTag,{value:"Module"})),htmlDecodeTree$2=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),xmlDecodeTree$1=new Uint16Array("aglq\t\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var _a$3;const decodeMap$2=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),fromCodePoint$3=null!==(_a$3=String.fromCodePoint)&&void 0!==_a$3?_a$3:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e),t};function replaceCodePoint$2(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=decodeMap$2.get(e))&&void 0!==t?t:e}var CharCodes$3,CharCodes2;CharCodes2=CharCodes$3||(CharCodes$3={}),CharCodes2[CharCodes2.NUM=35]="NUM",CharCodes2[CharCodes2.SEMI=59]="SEMI",CharCodes2[CharCodes2.EQUALS=61]="EQUALS",CharCodes2[CharCodes2.ZERO=48]="ZERO",CharCodes2[CharCodes2.NINE=57]="NINE",CharCodes2[CharCodes2.LOWER_A=97]="LOWER_A",CharCodes2[CharCodes2.LOWER_F=102]="LOWER_F",CharCodes2[CharCodes2.LOWER_X=120]="LOWER_X",CharCodes2[CharCodes2.LOWER_Z=122]="LOWER_Z",CharCodes2[CharCodes2.UPPER_A=65]="UPPER_A",CharCodes2[CharCodes2.UPPER_F=70]="UPPER_F",CharCodes2[CharCodes2.UPPER_Z=90]="UPPER_Z";const TO_LOWER_BIT$2=32;var BinTrieFlags$2,BinTrieFlags2,EntityDecoderState$2,EntityDecoderState2,DecodingMode$2,DecodingMode2;function isNumber$4(e){return e>=CharCodes$3.ZERO&&e<=CharCodes$3.NINE}function isHexadecimalCharacter$2(e){return e>=CharCodes$3.UPPER_A&&e<=CharCodes$3.UPPER_F||e>=CharCodes$3.LOWER_A&&e<=CharCodes$3.LOWER_F}function isAsciiAlphaNumeric$3(e){return e>=CharCodes$3.UPPER_A&&e<=CharCodes$3.UPPER_Z||e>=CharCodes$3.LOWER_A&&e<=CharCodes$3.LOWER_Z||isNumber$4(e)}function isEntityInAttributeInvalidEnd$2(e){return e===CharCodes$3.EQUALS||isAsciiAlphaNumeric$3(e)}BinTrieFlags2=BinTrieFlags$2||(BinTrieFlags$2={}),BinTrieFlags2[BinTrieFlags2.VALUE_LENGTH=49152]="VALUE_LENGTH",BinTrieFlags2[BinTrieFlags2.BRANCH_LENGTH=16256]="BRANCH_LENGTH",BinTrieFlags2[BinTrieFlags2.JUMP_TABLE=127]="JUMP_TABLE",EntityDecoderState2=EntityDecoderState$2||(EntityDecoderState$2={}),EntityDecoderState2[EntityDecoderState2.EntityStart=0]="EntityStart",EntityDecoderState2[EntityDecoderState2.NumericStart=1]="NumericStart",EntityDecoderState2[EntityDecoderState2.NumericDecimal=2]="NumericDecimal",EntityDecoderState2[EntityDecoderState2.NumericHex=3]="NumericHex",EntityDecoderState2[EntityDecoderState2.NamedEntity=4]="NamedEntity",DecodingMode2=DecodingMode$2||(DecodingMode$2={}),DecodingMode2[DecodingMode2.Legacy=0]="Legacy",DecodingMode2[DecodingMode2.Strict=1]="Strict",DecodingMode2[DecodingMode2.Attribute=2]="Attribute";let EntityDecoder$2=class{constructor(e,t,r){this.decodeTree=e,this.emitCodePoint=t,this.errors=r,this.state=EntityDecoderState$2.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=DecodingMode$2.Strict}startEntity(e){this.decodeMode=e,this.state=EntityDecoderState$2.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case EntityDecoderState$2.EntityStart:return e.charCodeAt(t)===CharCodes$3.NUM?(this.state=EntityDecoderState$2.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=EntityDecoderState$2.NamedEntity,this.stateNamedEntity(e,t));case EntityDecoderState$2.NumericStart:return this.stateNumericStart(e,t);case EntityDecoderState$2.NumericDecimal:return this.stateNumericDecimal(e,t);case EntityDecoderState$2.NumericHex:return this.stateNumericHex(e,t);case EntityDecoderState$2.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(e.charCodeAt(t)|TO_LOWER_BIT$2)===CharCodes$3.LOWER_X?(this.state=EntityDecoderState$2.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=EntityDecoderState$2.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,r,n){if(t!==r){const i=r-t;this.result=this.result*Math.pow(n,i)+parseInt(e.substr(t,i),n),this.consumed+=i}}stateNumericHex(e,t){const r=t;for(;t<e.length;){const n=e.charCodeAt(t);if(!isNumber$4(n)&&!isHexadecimalCharacter$2(n))return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(n,3);t+=1}return this.addToNumericResult(e,r,t,16),-1}stateNumericDecimal(e,t){const r=t;for(;t<e.length;){const n=e.charCodeAt(t);if(!isNumber$4(n))return this.addToNumericResult(e,r,t,10),this.emitNumericEntity(n,2);t+=1}return this.addToNumericResult(e,r,t,10),-1}emitNumericEntity(e,t){var r;if(this.consumed<=t)return null===(r=this.errors)||void 0===r||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===CharCodes$3.SEMI)this.consumed+=1;else if(this.decodeMode===DecodingMode$2.Strict)return 0;return this.emitCodePoint(replaceCodePoint$2(this.result),this.consumed),this.errors&&(e!==CharCodes$3.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:r}=this;let n=r[this.treeIndex],i=(n&BinTrieFlags$2.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const o=e.charCodeAt(t);if(this.treeIndex=determineBranch$2(r,n,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return 0===this.result||this.decodeMode===DecodingMode$2.Attribute&&(0===i||isEntityInAttributeInvalidEnd$2(o))?0:this.emitNotTerminatedNamedEntity();if(n=r[this.treeIndex],i=(n&BinTrieFlags$2.VALUE_LENGTH)>>14,0!==i){if(o===CharCodes$3.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==DecodingMode$2.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:r}=this,n=(r[t]&BinTrieFlags$2.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,n,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,r){const{decodeTree:n}=this;return this.emitCodePoint(1===t?n[e]&~BinTrieFlags$2.VALUE_LENGTH:n[e+1],r),3===t&&this.emitCodePoint(n[e+2],r),r}end(){var e;switch(this.state){case EntityDecoderState$2.NamedEntity:return 0===this.result||this.decodeMode===DecodingMode$2.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case EntityDecoderState$2.NumericDecimal:return this.emitNumericEntity(0,2);case EntityDecoderState$2.NumericHex:return this.emitNumericEntity(0,3);case EntityDecoderState$2.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case EntityDecoderState$2.EntityStart:return 0}}};function getDecoder(e){let t="";const r=new EntityDecoder$2(e,e=>t+=fromCodePoint$3(e));return function(e,n){let i=0,o=0;for(;(o=e.indexOf("&",o))>=0;){t+=e.slice(i,o),r.startEntity(n);const s=r.write(e,o+1);if(s<0){i=o+r.end();break}i=o+s,o=0===s?i+1:i}const s=t+e.slice(i);return t="",s}}function determineBranch$2(e,t,r,n){const i=(t&BinTrieFlags$2.BRANCH_LENGTH)>>7,o=t&BinTrieFlags$2.JUMP_TABLE;if(0===i)return 0!==o&&n===o?r:-1;if(o){const t=n-o;return t<0||t>=i?-1:e[r+t]-1}let s=r,a=s+i-1;for(;s<=a;){const t=s+a>>>1,r=e[t];if(r<n)s=t+1;else{if(!(r>n))return e[t+i];a=t-1}}return-1}const htmlDecoder=getDecoder(htmlDecodeTree$2);function decodeHTML(e,t=DecodingMode$2.Legacy){return htmlDecoder(e,t)}function _class$1(e){return Object.prototype.toString.call(e)}function isString$3(e){return"[object String]"===_class$1(e)}getDecoder(xmlDecodeTree$1);const _hasOwnProperty=Object.prototype.hasOwnProperty;function has$2(e,t){return _hasOwnProperty.call(e,t)}function assign$1(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t){if("object"!=typeof t)throw new TypeError(t+"must be object");Object.keys(t).forEach(function(r){e[r]=t[r]})}}),e}function arrayReplaceAt(e,t,r){return[].concat(e.slice(0,t),r,e.slice(t+1))}function isValidEntityCode(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||!(65535&~e&&65534!=(65535&e))||e>=0&&e<=8||11===e||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function fromCodePoint$2(e){if(e>65535){const t=55296+((e-=65536)>>10),r=56320+(1023&e);return String.fromCharCode(t,r)}return String.fromCharCode(e)}const UNESCAPE_MD_RE=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,ENTITY_RE=/&([a-z#][a-z0-9]{1,31});/gi,UNESCAPE_ALL_RE=new RegExp(UNESCAPE_MD_RE.source+"|"+ENTITY_RE.source,"gi"),DIGITAL_ENTITY_TEST_RE=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function replaceEntityPattern(e,t){if(35===t.charCodeAt(0)&&DIGITAL_ENTITY_TEST_RE.test(t)){const r="x"===t[1].toLowerCase()?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return isValidEntityCode(r)?fromCodePoint$2(r):e}const r=decodeHTML(e);return r!==e?r:e}function unescapeMd(e){return e.indexOf("\\")<0?e:e.replace(UNESCAPE_MD_RE,"$1")}function unescapeAll(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(UNESCAPE_ALL_RE,function(e,t,r){return t||replaceEntityPattern(e,r)})}const HTML_ESCAPE_TEST_RE=/[&<>"]/,HTML_ESCAPE_REPLACE_RE=/[&<>"]/g,HTML_REPLACEMENTS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function replaceUnsafeChar(e){return HTML_REPLACEMENTS[e]}function escapeHtml(e){return HTML_ESCAPE_TEST_RE.test(e)?e.replace(HTML_ESCAPE_REPLACE_RE,replaceUnsafeChar):e}const REGEXP_ESCAPE_RE=/[.?*+^$[\]\\(){}|-]/g;function escapeRE$1(e){return e.replace(REGEXP_ESCAPE_RE,"\\$&")}function isSpace(e){switch(e){case 9:case 32:return!0}return!1}function isWhiteSpace(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function isPunctChar(e){return P$1.test(e)||regex.test(e)}function isMdAsciiPunct(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function normalizeReference(e){return e=e.trim().replace(/\s+/g," "),""==="".toLowerCase()&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const lib$9={mdurl:mdurl,ucmicro:ucmicro},utils$4=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:arrayReplaceAt,assign:assign$1,escapeHtml:escapeHtml,escapeRE:escapeRE$1,fromCodePoint:fromCodePoint$2,has:has$2,isMdAsciiPunct:isMdAsciiPunct,isPunctChar:isPunctChar,isSpace:isSpace,isString:isString$3,isValidEntityCode:isValidEntityCode,isWhiteSpace:isWhiteSpace,lib:lib$9,normalizeReference:normalizeReference,unescapeAll:unescapeAll,unescapeMd:unescapeMd},Symbol.toStringTag,{value:"Module"}));function parseLinkLabel$1(e,t,r){let n,i,o,s;const a=e.posMax,l=e.pos;for(e.pos=t+1,n=1;e.pos<a;){if(o=e.src.charCodeAt(e.pos),93===o&&(n--,0===n)){i=!0;break}if(s=e.pos,e.md.inline.skipToken(e),91===o)if(s===e.pos-1)n++;else if(r)return e.pos=l,-1}let c=-1;return i&&(c=e.pos),e.pos=l,c}function parseLinkDestination(e,t,r){let n,i=t;const o={ok:!1,pos:0,str:""};if(60===e.charCodeAt(i)){for(i++;i<r;){if(n=e.charCodeAt(i),10===n)return o;if(60===n)return o;if(62===n)return o.pos=i+1,o.str=unescapeAll(e.slice(t+1,i)),o.ok=!0,o;92===n&&i+1<r?i+=2:i++}return o}let s=0;for(;i<r&&(n=e.charCodeAt(i),32!==n)&&!(n<32||127===n);)if(92===n&&i+1<r){if(32===e.charCodeAt(i+1))break;i+=2}else{if(40===n&&(s++,s>32))return o;if(41===n){if(0===s)break;s--}i++}return t===i||0!==s||(o.str=unescapeAll(e.slice(t,i)),o.pos=i,o.ok=!0),o}function parseLinkTitle$1(e,t,r,n){let i,o=t;const s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(n)s.str=n.str,s.marker=n.marker;else{if(o>=r)return s;let n=e.charCodeAt(o);if(34!==n&&39!==n&&40!==n)return s;t++,o++,40===n&&(n=41),s.marker=n}for(;o<r;){if(i=e.charCodeAt(o),i===s.marker)return s.pos=o+1,s.str+=unescapeAll(e.slice(t,o)),s.ok=!0,s;if(40===i&&41===s.marker)return s;92===i&&o+1<r&&o++,o++}return s.can_continue=!0,s.str+=unescapeAll(e.slice(t,o)),s}const helpers$2=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:parseLinkDestination,parseLinkLabel:parseLinkLabel$1,parseLinkTitle:parseLinkTitle$1},Symbol.toStringTag,{value:"Module"})),default_rules={};function Renderer$1(){this.rules=assign$1({},default_rules)}function Ruler(){this.__rules__=[],this.__cache__=null}function Token(e,t,r){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}default_rules.code_inline=function(e,t,r,n,i){const o=e[t];return"<code"+i.renderAttrs(o)+">"+escapeHtml(o.content)+"</code>"},default_rules.code_block=function(e,t,r,n,i){const o=e[t];return"<pre"+i.renderAttrs(o)+"><code>"+escapeHtml(e[t].content)+"</code></pre>\n"},default_rules.fence=function(e,t,r,n,i){const o=e[t],s=o.info?unescapeAll(o.info).trim():"";let a,l="",c="";if(s){const e=s.split(/(\s+)/g);l=e[0],c=e.slice(2).join("")}if(a=r.highlight&&r.highlight(o.content,l,c)||escapeHtml(o.content),0===a.indexOf("<pre"))return a+"\n";if(s){const e=o.attrIndex("class"),t=o.attrs?o.attrs.slice():[];e<0?t.push(["class",r.langPrefix+l]):(t[e]=t[e].slice(),t[e][1]+=" "+r.langPrefix+l);const n={attrs:t};return`<pre><code${i.renderAttrs(n)}>${a}</code></pre>\n`}return`<pre><code${i.renderAttrs(o)}>${a}</code></pre>\n`},default_rules.image=function(e,t,r,n,i){const o=e[t];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,r,n),i.renderToken(e,t,r)},default_rules.hardbreak=function(e,t,r){return r.xhtmlOut?"<br />\n":"<br>\n"},default_rules.softbreak=function(e,t,r){return r.breaks?r.xhtmlOut?"<br />\n":"<br>\n":"\n"},default_rules.text=function(e,t){return escapeHtml(e[t].content)},default_rules.html_block=function(e,t){return e[t].content},default_rules.html_inline=function(e,t){return e[t].content},Renderer$1.prototype.renderAttrs=function(e){let t,r,n;if(!e.attrs)return"";for(n="",t=0,r=e.attrs.length;t<r;t++)n+=" "+escapeHtml(e.attrs[t][0])+'="'+escapeHtml(e.attrs[t][1])+'"';return n},Renderer$1.prototype.renderToken=function(e,t,r){const n=e[t];let i="";if(n.hidden)return"";n.block&&-1!==n.nesting&&t&&e[t-1].hidden&&(i+="\n"),i+=(-1===n.nesting?"</":"<")+n.tag,i+=this.renderAttrs(n),0===n.nesting&&r.xhtmlOut&&(i+=" /");let o=!1;if(n.block&&(o=!0,1===n.nesting&&t+1<e.length)){const r=e[t+1];("inline"===r.type||r.hidden||-1===r.nesting&&r.tag===n.tag)&&(o=!1)}return i+=o?">\n":">",i},Renderer$1.prototype.renderInline=function(e,t,r){let n="";const i=this.rules;for(let o=0,s=e.length;o<s;o++){const s=e[o].type;void 0!==i[s]?n+=i[s](e,o,t,r,this):n+=this.renderToken(e,o,t)}return n},Renderer$1.prototype.renderInlineAsText=function(e,t,r){let n="";for(let i=0,o=e.length;i<o;i++)switch(e[i].type){case"text":case"html_inline":case"html_block":n+=e[i].content;break;case"image":n+=this.renderInlineAsText(e[i].children,t,r);break;case"softbreak":case"hardbreak":n+="\n"}return n},Renderer$1.prototype.render=function(e,t,r){let n="";const i=this.rules;for(let o=0,s=e.length;o<s;o++){const s=e[o].type;"inline"===s?n+=this.renderInline(e[o].children,t,r):void 0!==i[s]?n+=i[s](e,o,t,r,this):n+=this.renderToken(e,o,t,r)}return n},Ruler.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1},Ruler.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(e){e.enabled&&e.alt.forEach(function(e){t.indexOf(e)<0&&t.push(e)})}),e.__cache__={},t.forEach(function(t){e.__cache__[t]=[],e.__rules__.forEach(function(r){r.enabled&&(t&&r.alt.indexOf(t)<0||e.__cache__[t].push(r.fn))})})},Ruler.prototype.at=function(e,t,r){const n=this.__find__(e),i=r||{};if(-1===n)throw new Error("Parser rule not found: "+e);this.__rules__[n].fn=t,this.__rules__[n].alt=i.alt||[],this.__cache__=null},Ruler.prototype.before=function(e,t,r,n){const i=this.__find__(e),o=n||{};if(-1===i)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null},Ruler.prototype.after=function(e,t,r,n){const i=this.__find__(e),o=n||{};if(-1===i)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null},Ruler.prototype.push=function(e,t,r){const n=r||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:n.alt||[]}),this.__cache__=null},Ruler.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const r=[];return e.forEach(function(e){const n=this.__find__(e);if(n<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[n].enabled=!0,r.push(e)},this),this.__cache__=null,r},Ruler.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(e){e.enabled=!1}),this.enable(e,t)},Ruler.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const r=[];return e.forEach(function(e){const n=this.__find__(e);if(n<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[n].enabled=!1,r.push(e)},this),this.__cache__=null,r},Ruler.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]},Token.prototype.attrIndex=function(e){if(!this.attrs)return-1;const t=this.attrs;for(let r=0,n=t.length;r<n;r++)if(t[r][0]===e)return r;return-1},Token.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]},Token.prototype.attrSet=function(e,t){const r=this.attrIndex(e),n=[e,t];r<0?this.attrPush(n):this.attrs[r]=n},Token.prototype.attrGet=function(e){const t=this.attrIndex(e);let r=null;return t>=0&&(r=this.attrs[t][1]),r},Token.prototype.attrJoin=function(e,t){const r=this.attrIndex(e);r<0?this.attrPush([e,t]):this.attrs[r][1]=this.attrs[r][1]+" "+t};const token=Object.freeze(Object.defineProperty({__proto__:null,default:Token},Symbol.toStringTag,{value:"Module"}));function StateCore(e,t,r){this.src=e,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=t}StateCore.prototype.Token=Token;const NEWLINES_RE=/\r\n?|\n/g,NULL_RE=/\0/g;function normalize$1(e){let t;t=e.src.replace(NEWLINES_RE,"\n"),t=t.replace(NULL_RE,""),e.src=t}function block$3(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function inline(e){const t=e.tokens;for(let r=0,n=t.length;r<n;r++){const n=t[r];"inline"===n.type&&e.md.inline.parse(n.content,e.md,e.env,n.children)}}function isLinkOpen$1(e){return/^<a[>\s]/i.test(e)}function isLinkClose$1(e){return/^<\/a\s*>/i.test(e)}function linkify$1(e){const t=e.tokens;if(e.md.options.linkify)for(let r=0,n=t.length;r<n;r++){if("inline"!==t[r].type||!e.md.linkify.pretest(t[r].content))continue;let n=t[r].children,i=0;for(let o=n.length-1;o>=0;o--){const s=n[o];if("link_close"!==s.type){if("html_inline"===s.type&&(isLinkOpen$1(s.content)&&i>0&&i--,isLinkClose$1(s.content)&&i++),!(i>0)&&"text"===s.type&&e.md.linkify.test(s.content)){const i=s.content;let a=e.md.linkify.match(i);const l=[];let c=s.level,u=0;a.length>0&&0===a[0].index&&o>0&&"text_special"===n[o-1].type&&(a=a.slice(1));for(let t=0;t<a.length;t++){const r=a[t].url,n=e.md.normalizeLink(r);if(!e.md.validateLink(n))continue;let o=a[t].text;o=a[t].schema?"mailto:"!==a[t].schema||/^mailto:/i.test(o)?e.md.normalizeLinkText(o):e.md.normalizeLinkText("mailto:"+o).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+o).replace(/^http:\/\//,"");const s=a[t].index;if(s>u){const t=new e.Token("text","",0);t.content=i.slice(u,s),t.level=c,l.push(t)}const d=new e.Token("link_open","a",1);d.attrs=[["href",n]],d.level=c++,d.markup="linkify",d.info="auto",l.push(d);const p=new e.Token("text","",0);p.content=o,p.level=c,l.push(p);const h=new e.Token("link_close","a",-1);h.level=--c,h.markup="linkify",h.info="auto",l.push(h),u=a[t].lastIndex}if(u<i.length){const t=new e.Token("text","",0);t.content=i.slice(u),t.level=c,l.push(t)}t[r].children=n=arrayReplaceAt(n,o,l)}}else for(o--;n[o].level!==s.level&&"link_open"!==n[o].type;)o--}}}const RARE_RE=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,SCOPED_ABBR_TEST_RE=/\((c|tm|r)\)/i,SCOPED_ABBR_RE=/\((c|tm|r)\)/gi,SCOPED_ABBR={c:"",r:"",tm:""};function replaceFn(e,t){return SCOPED_ABBR[t.toLowerCase()]}function replace_scoped(e){let t=0;for(let r=e.length-1;r>=0;r--){const n=e[r];"text"!==n.type||t||(n.content=n.content.replace(SCOPED_ABBR_RE,replaceFn)),"link_open"===n.type&&"auto"===n.info&&t--,"link_close"===n.type&&"auto"===n.info&&t++}}function replace_rare(e){let t=0;for(let r=e.length-1;r>=0;r--){const n=e[r];"text"!==n.type||t||RARE_RE.test(n.content)&&(n.content=n.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/gm,"$1").replace(/(^|\s)--(?=\s|$)/gm,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/gm,"$1")),"link_open"===n.type&&"auto"===n.info&&t--,"link_close"===n.type&&"auto"===n.info&&t++}}function replace$4(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&(SCOPED_ABBR_TEST_RE.test(e.tokens[t].content)&&replace_scoped(e.tokens[t].children),RARE_RE.test(e.tokens[t].content)&&replace_rare(e.tokens[t].children))}const QUOTE_TEST_RE=/['"]/,QUOTE_RE=/['"]/g,APOSTROPHE="";function replaceAt(e,t,r){return e.slice(0,t)+r+e.slice(t+1)}function process_inlines(e,t){let r;const n=[];for(let i=0;i<e.length;i++){const o=e[i],s=e[i].level;for(r=n.length-1;r>=0&&!(n[r].level<=s);r--);if(n.length=r+1,"text"!==o.type)continue;let a=o.content,l=0,c=a.length;e:for(;l<c;){QUOTE_RE.lastIndex=l;const u=QUOTE_RE.exec(a);if(!u)break;let d=!0,p=!0;l=u.index+1;const h="'"===u[0];let f=32;if(u.index-1>=0)f=a.charCodeAt(u.index-1);else for(r=i-1;r>=0&&"softbreak"!==e[r].type&&"hardbreak"!==e[r].type;r--)if(e[r].content){f=e[r].content.charCodeAt(e[r].content.length-1);break}let m=32;if(l<c)m=a.charCodeAt(l);else for(r=i+1;r<e.length&&"softbreak"!==e[r].type&&"hardbreak"!==e[r].type;r++)if(e[r].content){m=e[r].content.charCodeAt(0);break}const g=isMdAsciiPunct(f)||isPunctChar(String.fromCharCode(f)),b=isMdAsciiPunct(m)||isPunctChar(String.fromCharCode(m)),y=isWhiteSpace(f),T=isWhiteSpace(m);if(T?d=!1:b&&(y||g||(d=!1)),y?p=!1:g&&(T||b||(p=!1)),34===m&&'"'===u[0]&&f>=48&&f<=57&&(p=d=!1),d&&p&&(d=g,p=b),d||p){if(p)for(r=n.length-1;r>=0;r--){let d=n[r];if(n[r].level<s)break;if(d.single===h&&n[r].level===s){let s,p;d=n[r],h?(s=t.md.options.quotes[2],p=t.md.options.quotes[3]):(s=t.md.options.quotes[0],p=t.md.options.quotes[1]),o.content=replaceAt(o.content,u.index,p),e[d.token].content=replaceAt(e[d.token].content,d.pos,s),l+=p.length-1,d.token===i&&(l+=s.length-1),a=o.content,c=a.length,n.length=r;continue e}}d?n.push({token:i,pos:u.index,single:h,level:s}):p&&h&&(o.content=replaceAt(o.content,u.index,APOSTROPHE))}else h&&(o.content=replaceAt(o.content,u.index,APOSTROPHE))}}}function smartquotes(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&QUOTE_TEST_RE.test(e.tokens[t].content)&&process_inlines(e.tokens[t].children,e)}function text_join(e){let t,r;const n=e.tokens,i=n.length;for(let o=0;o<i;o++){if("inline"!==n[o].type)continue;const e=n[o].children,i=e.length;for(t=0;t<i;t++)"text_special"===e[t].type&&(e[t].type="text");for(t=r=0;t<i;t++)"text"===e[t].type&&t+1<i&&"text"===e[t+1].type?e[t+1].content=e[t].content+e[t+1].content:(t!==r&&(e[r]=e[t]),r++);t!==r&&(e.length=r)}}const _rules$2=[["normalize",normalize$1],["block",block$3],["inline",inline],["linkify",linkify$1],["replacements",replace$4],["smartquotes",smartquotes],["text_join",text_join]];function Core(){this.ruler=new Ruler;for(let e=0;e<_rules$2.length;e++)this.ruler.push(_rules$2[e][0],_rules$2[e][1])}function StateBlock(e,t,r,n){this.src=e,this.md=t,this.env=r,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let o=0,s=0,a=0,l=0,c=i.length,u=!1;s<c;s++){const e=i.charCodeAt(s);if(!u){if(isSpace(e)){a++,9===e?l+=4-l%4:l++;continue}u=!0}10!==e&&s!==c-1||(10!==e&&s++,this.bMarks.push(o),this.eMarks.push(s),this.tShift.push(a),this.sCount.push(l),this.bsCount.push(0),u=!1,a=0,l=0,o=s+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Core.prototype.process=function(e){const t=this.ruler.getRules("");for(let r=0,n=t.length;r<n;r++)t[r](e)},Core.prototype.State=StateCore,StateBlock.prototype.push=function(e,t,r){const n=new Token(e,t,r);return n.block=!0,r<0&&this.level--,n.level=this.level,r>0&&this.level++,this.tokens.push(n),n},StateBlock.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},StateBlock.prototype.skipEmptyLines=function(e){for(let t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},StateBlock.prototype.skipSpaces=function(e){for(let t=this.src.length;e<t&&isSpace(this.src.charCodeAt(e));e++);return e},StateBlock.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!isSpace(this.src.charCodeAt(--e)))return e+1;return e},StateBlock.prototype.skipChars=function(e,t){for(let r=this.src.length;e<r&&this.src.charCodeAt(e)===t;e++);return e},StateBlock.prototype.skipCharsBack=function(e,t,r){if(e<=r)return e;for(;e>r;)if(t!==this.src.charCodeAt(--e))return e+1;return e},StateBlock.prototype.getLines=function(e,t,r,n){if(e>=t)return"";const i=new Array(t-e);for(let o=0,s=e;s<t;s++,o++){let e=0;const a=this.bMarks[s];let l,c=a;for(l=s+1<t||n?this.eMarks[s]+1:this.eMarks[s];c<l&&e<r;){const t=this.src.charCodeAt(c);if(isSpace(t))9===t?e+=4-(e+this.bsCount[s])%4:e++;else{if(!(c-a<this.tShift[s]))break;e++}c++}i[o]=e>r?new Array(e-r+1).join(" ")+this.src.slice(c,l):this.src.slice(c,l)}return i.join("")},StateBlock.prototype.Token=Token;const MAX_AUTOCOMPLETED_CELLS=65536;function getLine(e,t){const r=e.bMarks[t]+e.tShift[t],n=e.eMarks[t];return e.src.slice(r,n)}function escapedSplit(e){const t=[],r=e.length;let n=0,i=e.charCodeAt(n),o=!1,s=0,a="";for(;n<r;)124===i&&(o?(a+=e.substring(s,n-1),s=n):(t.push(a+e.substring(s,n)),a="",s=n+1)),o=92===i,n++,i=e.charCodeAt(n);return t.push(a+e.substring(s)),t}function table$3(e,t,r,n){if(t+2>r)return!1;let i=t+1;if(e.sCount[i]<e.blkIndent)return!1;if(e.sCount[i]-e.blkIndent>=4)return!1;let o=e.bMarks[i]+e.tShift[i];if(o>=e.eMarks[i])return!1;const s=e.src.charCodeAt(o++);if(124!==s&&45!==s&&58!==s)return!1;if(o>=e.eMarks[i])return!1;const a=e.src.charCodeAt(o++);if(124!==a&&45!==a&&58!==a&&!isSpace(a))return!1;if(45===s&&isSpace(a))return!1;for(;o<e.eMarks[i];){const t=e.src.charCodeAt(o);if(124!==t&&45!==t&&58!==t&&!isSpace(t))return!1;o++}let l=getLine(e,t+1),c=l.split("|");const u=[];for(let b=0;b<c.length;b++){const e=c[b].trim();if(!e){if(0===b||b===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(e))return!1;58===e.charCodeAt(e.length-1)?u.push(58===e.charCodeAt(0)?"center":"right"):58===e.charCodeAt(0)?u.push("left"):u.push("")}if(l=getLine(e,t).trim(),-1===l.indexOf("|"))return!1;if(e.sCount[t]-e.blkIndent>=4)return!1;c=escapedSplit(l),c.length&&""===c[0]&&c.shift(),c.length&&""===c[c.length-1]&&c.pop();const d=c.length;if(0===d||d!==u.length)return!1;if(n)return!0;const p=e.parentType;e.parentType="table";const h=e.md.block.ruler.getRules("blockquote"),f=[t,0];e.push("table_open","table",1).map=f,e.push("thead_open","thead",1).map=[t,t+1],e.push("tr_open","tr",1).map=[t,t+1];for(let b=0;b<c.length;b++){const t=e.push("th_open","th",1);u[b]&&(t.attrs=[["style","text-align:"+u[b]]]);const r=e.push("inline","",0);r.content=c[b].trim(),r.children=[],e.push("th_close","th",-1)}let m;e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let g=0;for(i=t+2;i<r&&!(e.sCount[i]<e.blkIndent);i++){let n=!1;for(let t=0,o=h.length;t<o;t++)if(h[t](e,i,r,!0)){n=!0;break}if(n)break;if(l=getLine(e,i).trim(),!l)break;if(e.sCount[i]-e.blkIndent>=4)break;if(c=escapedSplit(l),c.length&&""===c[0]&&c.shift(),c.length&&""===c[c.length-1]&&c.pop(),g+=d-c.length,g>MAX_AUTOCOMPLETED_CELLS)break;i===t+2&&(e.push("tbody_open","tbody",1).map=m=[t+2,0]),e.push("tr_open","tr",1).map=[i,i+1];for(let t=0;t<d;t++){const r=e.push("td_open","td",1);u[t]&&(r.attrs=[["style","text-align:"+u[t]]]);const n=e.push("inline","",0);n.content=c[t]?c[t].trim():"",n.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return m&&(e.push("tbody_close","tbody",-1),m[1]=i),e.push("table_close","table",-1),f[1]=i,e.parentType=p,e.line=i,!0}function code$3(e,t,r){if(e.sCount[t]-e.blkIndent<4)return!1;let n=t+1,i=n;for(;n<r;)if(e.isEmpty(n))n++;else{if(!(e.sCount[n]-e.blkIndent>=4))break;n++,i=n}e.line=i;const o=e.push("code_block","code",0);return o.content=e.getLines(t,i,4+e.blkIndent,!1)+"\n",o.map=[t,e.line],!0}function fence(e,t,r,n){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(i+3>o)return!1;const s=e.src.charCodeAt(i);if(126!==s&&96!==s)return!1;let a=i;i=e.skipChars(i,s);let l=i-a;if(l<3)return!1;const c=e.src.slice(a,i),u=e.src.slice(i,o);if(96===s&&u.indexOf(String.fromCharCode(s))>=0)return!1;if(n)return!0;let d=t,p=!1;for(;!(d++,d>=r||(i=a=e.bMarks[d]+e.tShift[d],o=e.eMarks[d],i<o&&e.sCount[d]<e.blkIndent));)if(e.src.charCodeAt(i)===s&&!(e.sCount[d]-e.blkIndent>=4||(i=e.skipChars(i,s),i-a<l||(i=e.skipSpaces(i),i<o)))){p=!0;break}l=e.sCount[t],e.line=d+(p?1:0);const h=e.push("fence","code",0);return h.info=u,h.content=e.getLines(t+1,d,l,!0),h.markup=c,h.map=[t,e.line],!0}function blockquote(e,t,r,n){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];const s=e.lineMax;if(e.sCount[t]-e.blkIndent>=4)return!1;if(62!==e.src.charCodeAt(i))return!1;if(n)return!0;const a=[],l=[],c=[],u=[],d=e.md.block.ruler.getRules("blockquote"),p=e.parentType;e.parentType="blockquote";let h,f=!1;for(h=t;h<r;h++){const t=e.sCount[h]<e.blkIndent;if(i=e.bMarks[h]+e.tShift[h],o=e.eMarks[h],i>=o)break;if(62===e.src.charCodeAt(i++)&&!t){let t,r,n=e.sCount[h]+1;32===e.src.charCodeAt(i)?(i++,n++,r=!1,t=!0):9===e.src.charCodeAt(i)?(t=!0,(e.bsCount[h]+n)%4==3?(i++,n++,r=!1):r=!0):t=!1;let s=n;for(a.push(e.bMarks[h]),e.bMarks[h]=i;i<o;){const t=e.src.charCodeAt(i);if(!isSpace(t))break;9===t?s+=4-(s+e.bsCount[h]+(r?1:0))%4:s++,i++}f=i>=o,l.push(e.bsCount[h]),e.bsCount[h]=e.sCount[h]+1+(t?1:0),c.push(e.sCount[h]),e.sCount[h]=s-n,u.push(e.tShift[h]),e.tShift[h]=i-e.bMarks[h];continue}if(f)break;let n=!1;for(let i=0,o=d.length;i<o;i++)if(d[i](e,h,r,!0)){n=!0;break}if(n){e.lineMax=h,0!==e.blkIndent&&(a.push(e.bMarks[h]),l.push(e.bsCount[h]),u.push(e.tShift[h]),c.push(e.sCount[h]),e.sCount[h]-=e.blkIndent);break}a.push(e.bMarks[h]),l.push(e.bsCount[h]),u.push(e.tShift[h]),c.push(e.sCount[h]),e.sCount[h]=-1}const m=e.blkIndent;e.blkIndent=0;const g=e.push("blockquote_open","blockquote",1);g.markup=">";const b=[t,0];g.map=b,e.md.block.tokenize(e,t,h),e.push("blockquote_close","blockquote",-1).markup=">",e.lineMax=s,e.parentType=p,b[1]=e.line;for(let y=0;y<u.length;y++)e.bMarks[y+t]=a[y],e.tShift[y+t]=u[y],e.sCount[y+t]=c[y],e.bsCount[y+t]=l[y];return e.blkIndent=m,!0}function hr(e,t,r,n){const i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.bMarks[t]+e.tShift[t];const s=e.src.charCodeAt(o++);if(42!==s&&45!==s&&95!==s)return!1;let a=1;for(;o<i;){const t=e.src.charCodeAt(o++);if(t!==s&&!isSpace(t))return!1;t===s&&a++}if(a<3)return!1;if(n)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(a+1).join(String.fromCharCode(s)),!0}function skipBulletListMarker(e,t){const r=e.eMarks[t];let n=e.bMarks[t]+e.tShift[t];const i=e.src.charCodeAt(n++);return 42!==i&&45!==i&&43!==i||n<r&&!isSpace(e.src.charCodeAt(n))?-1:n}function skipOrderedListMarker(e,t){const r=e.bMarks[t]+e.tShift[t],n=e.eMarks[t];let i=r;if(i+1>=n)return-1;let o=e.src.charCodeAt(i++);if(o<48||o>57)return-1;for(;;){if(i>=n)return-1;if(o=e.src.charCodeAt(i++),!(o>=48&&o<=57)){if(41===o||46===o)break;return-1}if(i-r>=10)return-1}return i<n&&(o=e.src.charCodeAt(i),!isSpace(o))?-1:i}function markTightParagraphs(e,t){const r=e.level+2;for(let n=t+2,i=e.tokens.length-2;n<i;n++)e.tokens[n].level===r&&"paragraph_open"===e.tokens[n].type&&(e.tokens[n+2].hidden=!0,e.tokens[n].hidden=!0,n+=2)}function list$2(e,t,r,n){let i,o,s,a,l=t,c=!0;if(e.sCount[l]-e.blkIndent>=4)return!1;if(e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let u,d,p,h=!1;if(n&&"paragraph"===e.parentType&&e.sCount[l]>=e.blkIndent&&(h=!0),(p=skipOrderedListMarker(e,l))>=0){if(u=!0,s=e.bMarks[l]+e.tShift[l],d=Number(e.src.slice(s,p-1)),h&&1!==d)return!1}else{if(!((p=skipBulletListMarker(e,l))>=0))return!1;u=!1}if(h&&e.skipSpaces(p)>=e.eMarks[l])return!1;if(n)return!0;const f=e.src.charCodeAt(p-1),m=e.tokens.length;u?(a=e.push("ordered_list_open","ol",1),1!==d&&(a.attrs=[["start",d]])):a=e.push("bullet_list_open","ul",1);const g=[l,0];a.map=g,a.markup=String.fromCharCode(f);let b=!1;const y=e.md.block.ruler.getRules("list"),T=e.parentType;for(e.parentType="list";l<r;){o=p,i=e.eMarks[l];const t=e.sCount[l]+p-(e.bMarks[l]+e.tShift[l]);let n=t;for(;o<i;){const t=e.src.charCodeAt(o);if(9===t)n+=4-(n+e.bsCount[l])%4;else{if(32!==t)break;n++}o++}const d=o;let h;h=d>=i?1:n-t,h>4&&(h=1);const m=t+h;a=e.push("list_item_open","li",1),a.markup=String.fromCharCode(f);const g=[l,0];a.map=g,u&&(a.info=e.src.slice(s,p-1));const T=e.tight,E=e.tShift[l],O=e.sCount[l],S=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=m,e.tight=!0,e.tShift[l]=d-e.bMarks[l],e.sCount[l]=n,d>=i&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,r):e.md.block.tokenize(e,l,r,!0),e.tight&&!b||(c=!1),b=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=S,e.tShift[l]=E,e.sCount[l]=O,e.tight=T,a=e.push("list_item_close","li",-1),a.markup=String.fromCharCode(f),l=e.line,g[1]=l,l>=r)break;if(e.sCount[l]<e.blkIndent)break;if(e.sCount[l]-e.blkIndent>=4)break;let x=!1;for(let i=0,o=y.length;i<o;i++)if(y[i](e,l,r,!0)){x=!0;break}if(x)break;if(u){if(p=skipOrderedListMarker(e,l),p<0)break;s=e.bMarks[l]+e.tShift[l]}else if(p=skipBulletListMarker(e,l),p<0)break;if(f!==e.src.charCodeAt(p-1))break}return a=u?e.push("ordered_list_close","ol",-1):e.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(f),g[1]=l,e.line=l,e.parentType=T,c&&markTightParagraphs(e,m),!0}function reference(e,t,r,n){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t],s=t+1;if(e.sCount[t]-e.blkIndent>=4)return!1;if(91!==e.src.charCodeAt(i))return!1;function a(t){const r=e.lineMax;if(t>=r||e.isEmpty(t))return null;let n=!1;if(e.sCount[t]-e.blkIndent>3&&(n=!0),e.sCount[t]<0&&(n=!0),!n){const n=e.md.block.ruler.getRules("reference"),i=e.parentType;e.parentType="reference";let o=!1;for(let s=0,a=n.length;s<a;s++)if(n[s](e,t,r,!0)){o=!0;break}if(e.parentType=i,o)return null}const i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];return e.src.slice(i,o+1)}let l=e.src.slice(i,o+1);o=l.length;let c=-1;for(i=1;i<o;i++){const e=l.charCodeAt(i);if(91===e)return!1;if(93===e){c=i;break}if(10===e){const e=a(s);null!==e&&(l+=e,o=l.length,s++)}else if(92===e&&(i++,i<o&&10===l.charCodeAt(i))){const e=a(s);null!==e&&(l+=e,o=l.length,s++)}}if(c<0||58!==l.charCodeAt(c+1))return!1;for(i=c+2;i<o;i++){const e=l.charCodeAt(i);if(10===e){const e=a(s);null!==e&&(l+=e,o=l.length,s++)}else if(!isSpace(e))break}const u=e.md.helpers.parseLinkDestination(l,i,o);if(!u.ok)return!1;const d=e.md.normalizeLink(u.str);if(!e.md.validateLink(d))return!1;i=u.pos;const p=i,h=s,f=i;for(;i<o;i++){const e=l.charCodeAt(i);if(10===e){const e=a(s);null!==e&&(l+=e,o=l.length,s++)}else if(!isSpace(e))break}let m,g=e.md.helpers.parseLinkTitle(l,i,o);for(;g.can_continue;){const t=a(s);if(null===t)break;l+=t,i=o,o=l.length,s++,g=e.md.helpers.parseLinkTitle(l,i,o,g)}for(i<o&&f!==i&&g.ok?(m=g.str,i=g.pos):(m="",i=p,s=h);i<o&&isSpace(l.charCodeAt(i));)i++;if(i<o&&10!==l.charCodeAt(i)&&m)for(m="",i=p,s=h;i<o&&isSpace(l.charCodeAt(i));)i++;if(i<o&&10!==l.charCodeAt(i))return!1;const b=normalizeReference(l.slice(1,c));return!!b&&(n||(void 0===e.env.references&&(e.env.references={}),void 0===e.env.references[b]&&(e.env.references[b]={title:m,href:d}),e.line=s),!0)}const block_names=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],attr_name="[a-zA-Z_:][a-zA-Z0-9:._-]*",unquoted="[^\"'=<>`\\x00-\\x20]+",single_quoted="'[^']*'",double_quoted='"[^"]*"',attr_value="(?:"+unquoted+"|"+single_quoted+"|"+double_quoted+")",attribute="(?:\\s+"+attr_name+"(?:\\s*=\\s*"+attr_value+")?)",open_tag="<[A-Za-z][A-Za-z0-9\\-]*"+attribute+"*\\s*\\/?>",close_tag="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",comment$2="\x3c!---?>|\x3c!--(?:[^-]|-[^-]|--[^>])*--\x3e",processing="<[?][\\s\\S]*?[?]>",declaration$1="<![A-Za-z][^>]*>",cdata="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",HTML_TAG_RE=new RegExp("^(?:"+open_tag+"|"+close_tag+"|"+comment$2+"|"+processing+"|"+declaration$1+"|"+cdata+")"),HTML_OPEN_CLOSE_TAG_RE=new RegExp("^(?:"+open_tag+"|"+close_tag+")"),HTML_SEQUENCES=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+block_names.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(HTML_OPEN_CLOSE_TAG_RE.source+"\\s*$"),/^$/,!1]];function html_block(e,t,r,n){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(i))return!1;let s=e.src.slice(i,o),a=0;for(;a<HTML_SEQUENCES.length&&!HTML_SEQUENCES[a][0].test(s);a++);if(a===HTML_SEQUENCES.length)return!1;if(n)return HTML_SEQUENCES[a][2];let l=t+1;if(!HTML_SEQUENCES[a][1].test(s))for(;l<r&&!(e.sCount[l]<e.blkIndent);l++)if(i=e.bMarks[l]+e.tShift[l],o=e.eMarks[l],s=e.src.slice(i,o),HTML_SEQUENCES[a][1].test(s)){0!==s.length&&l++;break}e.line=l;const c=e.push("html_block","",0);return c.map=[t,l],c.content=e.getLines(t,l,e.blkIndent,!0),!0}function heading$7(e,t,r,n){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let s=e.src.charCodeAt(i);if(35!==s||i>=o)return!1;let a=1;for(s=e.src.charCodeAt(++i);35===s&&i<o&&a<=6;)a++,s=e.src.charCodeAt(++i);if(a>6||i<o&&!isSpace(s))return!1;if(n)return!0;o=e.skipSpacesBack(o,i);const l=e.skipCharsBack(o,35,i);l>i&&isSpace(e.src.charCodeAt(l-1))&&(o=l),e.line=t+1;const c=e.push("heading_open","h"+String(a),1);c.markup="########".slice(0,a),c.map=[t,e.line];const u=e.push("inline","",0);return u.content=e.src.slice(i,o).trim(),u.map=[t,e.line],u.children=[],e.push("heading_close","h"+String(a),-1).markup="########".slice(0,a),!0}function lheading(e,t,r){const n=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const i=e.parentType;e.parentType="paragraph";let o,s=0,a=t+1;for(;a<r&&!e.isEmpty(a);a++){if(e.sCount[a]-e.blkIndent>3)continue;if(e.sCount[a]>=e.blkIndent){let t=e.bMarks[a]+e.tShift[a];const r=e.eMarks[a];if(t<r&&(o=e.src.charCodeAt(t),(45===o||61===o)&&(t=e.skipChars(t,o),t=e.skipSpaces(t),t>=r))){s=61===o?1:2;break}}if(e.sCount[a]<0)continue;let t=!1;for(let i=0,o=n.length;i<o;i++)if(n[i](e,a,r,!0)){t=!0;break}if(t)break}if(!s)return!1;const l=e.getLines(t,a,e.blkIndent,!1).trim();e.line=a+1;const c=e.push("heading_open","h"+String(s),1);c.markup=String.fromCharCode(o),c.map=[t,e.line];const u=e.push("inline","",0);return u.content=l,u.map=[t,e.line-1],u.children=[],e.push("heading_close","h"+String(s),-1).markup=String.fromCharCode(o),e.parentType=i,!0}function paragraph(e,t,r){const n=e.md.block.ruler.getRules("paragraph"),i=e.parentType;let o=t+1;for(e.parentType="paragraph";o<r&&!e.isEmpty(o);o++){if(e.sCount[o]-e.blkIndent>3)continue;if(e.sCount[o]<0)continue;let t=!1;for(let i=0,s=n.length;i<s;i++)if(n[i](e,o,r,!0)){t=!0;break}if(t)break}const s=e.getLines(t,o,e.blkIndent,!1).trim();e.line=o,e.push("paragraph_open","p",1).map=[t,e.line];const a=e.push("inline","",0);return a.content=s,a.map=[t,e.line],a.children=[],e.push("paragraph_close","p",-1),e.parentType=i,!0}const _rules$1=[["table",table$3,["paragraph","reference"]],["code",code$3],["fence",fence,["paragraph","reference","blockquote","list"]],["blockquote",blockquote,["paragraph","reference","blockquote","list"]],["hr",hr,["paragraph","reference","blockquote","list"]],["list",list$2,["paragraph","reference","blockquote"]],["reference",reference],["html_block",html_block,["paragraph","reference","blockquote"]],["heading",heading$7,["paragraph","reference","blockquote"]],["lheading",lheading],["paragraph",paragraph]];function ParserBlock(){this.ruler=new Ruler;for(let e=0;e<_rules$1.length;e++)this.ruler.push(_rules$1[e][0],_rules$1[e][1],{alt:(_rules$1[e][2]||[]).slice()})}function StateInline(e,t,r,n){this.src=e,this.env=r,this.md=t,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}function isTerminatorChar(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function text$7(e,t){let r=e.pos;for(;r<e.posMax&&!isTerminatorChar(e.src.charCodeAt(r));)r++;return r!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,r)),e.pos=r,!0)}ParserBlock.prototype.tokenize=function(e,t,r){const n=this.ruler.getRules(""),i=n.length,o=e.md.options.maxNesting;let s=t,a=!1;for(;s<r&&(e.line=s=e.skipEmptyLines(s),!(s>=r))&&!(e.sCount[s]<e.blkIndent);){if(e.level>=o){e.line=r;break}const t=e.line;let l=!1;for(let o=0;o<i;o++)if(l=n[o](e,s,r,!1),l){if(t>=e.line)throw new Error("block rule didn't increment state.line");break}if(!l)throw new Error("none of the block rules matched");e.tight=!a,e.isEmpty(e.line-1)&&(a=!0),s=e.line,s<r&&e.isEmpty(s)&&(a=!0,s++,e.line=s)}},ParserBlock.prototype.parse=function(e,t,r,n){if(!e)return;const i=new this.State(e,t,r,n);this.tokenize(i,i.line,i.lineMax)},ParserBlock.prototype.State=StateBlock,StateInline.prototype.pushPending=function(){const e=new Token("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e},StateInline.prototype.push=function(e,t,r){this.pending&&this.pushPending();const n=new Token(e,t,r);let i=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(i),n},StateInline.prototype.scanDelims=function(e,t){const r=this.posMax,n=this.src.charCodeAt(e),i=e>0?this.src.charCodeAt(e-1):32;let o=e;for(;o<r&&this.src.charCodeAt(o)===n;)o++;const s=o-e,a=o<r?this.src.charCodeAt(o):32,l=isMdAsciiPunct(i)||isPunctChar(String.fromCharCode(i)),c=isMdAsciiPunct(a)||isPunctChar(String.fromCharCode(a)),u=isWhiteSpace(i),d=isWhiteSpace(a),p=!d&&(!c||u||l),h=!u&&(!l||d||c);return{can_open:p&&(t||!h||l),can_close:h&&(t||!p||c),length:s}},StateInline.prototype.Token=Token;const SCHEME_RE=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function linkify(e,t){if(!e.md.options.linkify)return!1;if(e.linkLevel>0)return!1;const r=e.pos;if(r+3>e.posMax)return!1;if(58!==e.src.charCodeAt(r))return!1;if(47!==e.src.charCodeAt(r+1))return!1;if(47!==e.src.charCodeAt(r+2))return!1;const n=e.pending.match(SCHEME_RE);if(!n)return!1;const i=n[1],o=e.md.linkify.matchAtStart(e.src.slice(r-i.length));if(!o)return!1;let s=o.url;if(s.length<=i.length)return!1;s=s.replace(/\*+$/,"");const a=e.md.normalizeLink(s);if(!e.md.validateLink(a))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const t=e.push("link_open","a",1);t.attrs=[["href",a]],t.markup="linkify",t.info="auto",e.push("text","",0).content=e.md.normalizeLinkText(s);const r=e.push("link_close","a",-1);r.markup="linkify",r.info="auto"}return e.pos+=s.length-i.length,!0}function newline$2(e,t){let r=e.pos;if(10!==e.src.charCodeAt(r))return!1;const n=e.pending.length-1,i=e.posMax;if(!t)if(n>=0&&32===e.pending.charCodeAt(n))if(n>=1&&32===e.pending.charCodeAt(n-1)){let t=n-1;for(;t>=1&&32===e.pending.charCodeAt(t-1);)t--;e.pending=e.pending.slice(0,t),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(r++;r<i&&isSpace(e.src.charCodeAt(r));)r++;return e.pos=r,!0}const ESCAPED=[];for(let e=0;e<256;e++)ESCAPED.push(0);function escape$2(e,t){let r=e.pos;const n=e.posMax;if(92!==e.src.charCodeAt(r))return!1;if(r++,r>=n)return!1;let i=e.src.charCodeAt(r);if(10===i){for(t||e.push("hardbreak","br",0),r++;r<n&&(i=e.src.charCodeAt(r),isSpace(i));)r++;return e.pos=r,!0}let o=e.src[r];if(i>=55296&&i<=56319&&r+1<n){const t=e.src.charCodeAt(r+1);t>=56320&&t<=57343&&(o+=e.src[r+1],r++)}const s="\\"+o;if(!t){const t=e.push("text_special","",0);i<256&&0!==ESCAPED[i]?t.content=o:t.content=s,t.markup=s,t.info="escape"}return e.pos=r+1,!0}function backtick(e,t){let r=e.pos;if(96!==e.src.charCodeAt(r))return!1;const n=r;r++;const i=e.posMax;for(;r<i&&96===e.src.charCodeAt(r);)r++;const o=e.src.slice(n,r),s=o.length;if(e.backticksScanned&&(e.backticks[s]||0)<=n)return t||(e.pending+=o),e.pos+=s,!0;let a,l=r;for(;-1!==(a=e.src.indexOf("`",l));){for(l=a+1;l<i&&96===e.src.charCodeAt(l);)l++;const n=l-a;if(n===s){if(!t){const t=e.push("code_inline","code",0);t.markup=o,t.content=e.src.slice(r,a).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[n]=a}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=s,!0}function strikethrough_tokenize(e,t){const r=e.pos,n=e.src.charCodeAt(r);if(t)return!1;if(126!==n)return!1;const i=e.scanDelims(e.pos,!0);let o=i.length;const s=String.fromCharCode(n);if(o<2)return!1;let a;o%2&&(a=e.push("text","",0),a.content=s,o--);for(let l=0;l<o;l+=2)a=e.push("text","",0),a.content=s+s,e.delimiters.push({marker:n,length:0,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0}function postProcess$1(e,t){let r;const n=[],i=t.length;for(let o=0;o<i;o++){const i=t[o];if(126!==i.marker)continue;if(-1===i.end)continue;const s=t[i.end];r=e.tokens[i.token],r.type="s_open",r.tag="s",r.nesting=1,r.markup="~~",r.content="",r=e.tokens[s.token],r.type="s_close",r.tag="s",r.nesting=-1,r.markup="~~",r.content="","text"===e.tokens[s.token-1].type&&"~"===e.tokens[s.token-1].content&&n.push(s.token-1)}for(;n.length;){const t=n.pop();let i=t+1;for(;i<e.tokens.length&&"s_close"===e.tokens[i].type;)i++;i--,t!==i&&(r=e.tokens[i],e.tokens[i]=e.tokens[t],e.tokens[t]=r)}}function strikethrough_postProcess(e){const t=e.tokens_meta,r=e.tokens_meta.length;postProcess$1(e,e.delimiters);for(let n=0;n<r;n++)t[n]&&t[n].delimiters&&postProcess$1(e,t[n].delimiters)}"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){ESCAPED[e.charCodeAt(0)]=1});const r_strikethrough={tokenize:strikethrough_tokenize,postProcess:strikethrough_postProcess};function emphasis_tokenize(e,t){const r=e.pos,n=e.src.charCodeAt(r);if(t)return!1;if(95!==n&&42!==n)return!1;const i=e.scanDelims(e.pos,42===n);for(let o=0;o<i.length;o++)e.push("text","",0).content=String.fromCharCode(n),e.delimiters.push({marker:n,length:i.length,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0}function postProcess(e,t){for(let r=t.length-1;r>=0;r--){const n=t[r];if(95!==n.marker&&42!==n.marker)continue;if(-1===n.end)continue;const i=t[n.end],o=r>0&&t[r-1].end===n.end+1&&t[r-1].marker===n.marker&&t[r-1].token===n.token-1&&t[n.end+1].token===i.token+1,s=String.fromCharCode(n.marker),a=e.tokens[n.token];a.type=o?"strong_open":"em_open",a.tag=o?"strong":"em",a.nesting=1,a.markup=o?s+s:s,a.content="";const l=e.tokens[i.token];l.type=o?"strong_close":"em_close",l.tag=o?"strong":"em",l.nesting=-1,l.markup=o?s+s:s,l.content="",o&&(e.tokens[t[r-1].token].content="",e.tokens[t[n.end+1].token].content="",r--)}}function emphasis_post_process(e){const t=e.tokens_meta,r=e.tokens_meta.length;postProcess(e,e.delimiters);for(let n=0;n<r;n++)t[n]&&t[n].delimiters&&postProcess(e,t[n].delimiters)}const r_emphasis={tokenize:emphasis_tokenize,postProcess:emphasis_post_process};function link$4(e,t){let r,n,i,o,s="",a="",l=e.pos,c=!0;if(91!==e.src.charCodeAt(e.pos))return!1;const u=e.pos,d=e.posMax,p=e.pos+1,h=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(h<0)return!1;let f=h+1;if(f<d&&40===e.src.charCodeAt(f)){for(c=!1,f++;f<d&&(r=e.src.charCodeAt(f),isSpace(r)||10===r);f++);if(f>=d)return!1;if(l=f,i=e.md.helpers.parseLinkDestination(e.src,f,e.posMax),i.ok){for(s=e.md.normalizeLink(i.str),e.md.validateLink(s)?f=i.pos:s="",l=f;f<d&&(r=e.src.charCodeAt(f),isSpace(r)||10===r);f++);if(i=e.md.helpers.parseLinkTitle(e.src,f,e.posMax),f<d&&l!==f&&i.ok)for(a=i.str,f=i.pos;f<d&&(r=e.src.charCodeAt(f),isSpace(r)||10===r);f++);}(f>=d||41!==e.src.charCodeAt(f))&&(c=!0),f++}if(c){if(void 0===e.env.references)return!1;if(f<d&&91===e.src.charCodeAt(f)?(l=f+1,f=e.md.helpers.parseLinkLabel(e,f),f>=0?n=e.src.slice(l,f++):f=h+1):f=h+1,n||(n=e.src.slice(p,h)),o=e.env.references[normalizeReference(n)],!o)return e.pos=u,!1;s=o.href,a=o.title}if(!t){e.pos=p,e.posMax=h;const t=[["href",s]];e.push("link_open","a",1).attrs=t,a&&t.push(["title",a]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=f,e.posMax=d,!0}function image$4(e,t){let r,n,i,o,s,a,l,c,u="";const d=e.pos,p=e.posMax;if(33!==e.src.charCodeAt(e.pos))return!1;if(91!==e.src.charCodeAt(e.pos+1))return!1;const h=e.pos+2,f=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(f<0)return!1;if(o=f+1,o<p&&40===e.src.charCodeAt(o)){for(o++;o<p&&(r=e.src.charCodeAt(o),isSpace(r)||10===r);o++);if(o>=p)return!1;for(c=o,a=e.md.helpers.parseLinkDestination(e.src,o,e.posMax),a.ok&&(u=e.md.normalizeLink(a.str),e.md.validateLink(u)?o=a.pos:u=""),c=o;o<p&&(r=e.src.charCodeAt(o),isSpace(r)||10===r);o++);if(a=e.md.helpers.parseLinkTitle(e.src,o,e.posMax),o<p&&c!==o&&a.ok)for(l=a.str,o=a.pos;o<p&&(r=e.src.charCodeAt(o),isSpace(r)||10===r);o++);else l="";if(o>=p||41!==e.src.charCodeAt(o))return e.pos=d,!1;o++}else{if(void 0===e.env.references)return!1;if(o<p&&91===e.src.charCodeAt(o)?(c=o+1,o=e.md.helpers.parseLinkLabel(e,o),o>=0?i=e.src.slice(c,o++):o=f+1):o=f+1,i||(i=e.src.slice(h,f)),s=e.env.references[normalizeReference(i)],!s)return e.pos=d,!1;u=s.href,l=s.title}if(!t){n=e.src.slice(h,f);const t=[];e.md.inline.parse(n,e.md,e.env,t);const r=e.push("image","img",0),i=[["src",u],["alt",""]];r.attrs=i,r.children=t,r.content=n,l&&i.push(["title",l])}return e.pos=o,e.posMax=p,!0}const EMAIL_RE=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,AUTOLINK_RE=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function autolink(e,t){let r=e.pos;if(60!==e.src.charCodeAt(r))return!1;const n=e.pos,i=e.posMax;for(;;){if(++r>=i)return!1;const t=e.src.charCodeAt(r);if(60===t)return!1;if(62===t)break}const o=e.src.slice(n+1,r);if(AUTOLINK_RE.test(o)){const r=e.md.normalizeLink(o);if(!e.md.validateLink(r))return!1;if(!t){const t=e.push("link_open","a",1);t.attrs=[["href",r]],t.markup="autolink",t.info="auto",e.push("text","",0).content=e.md.normalizeLinkText(o);const n=e.push("link_close","a",-1);n.markup="autolink",n.info="auto"}return e.pos+=o.length+2,!0}if(EMAIL_RE.test(o)){const r=e.md.normalizeLink("mailto:"+o);if(!e.md.validateLink(r))return!1;if(!t){const t=e.push("link_open","a",1);t.attrs=[["href",r]],t.markup="autolink",t.info="auto",e.push("text","",0).content=e.md.normalizeLinkText(o);const n=e.push("link_close","a",-1);n.markup="autolink",n.info="auto"}return e.pos+=o.length+2,!0}return!1}function isLinkOpen(e){return/^<a[>\s]/i.test(e)}function isLinkClose(e){return/^<\/a\s*>/i.test(e)}function isLetter(e){const t=32|e;return t>=97&&t<=122}function html_inline(e,t){if(!e.md.options.html)return!1;const r=e.posMax,n=e.pos;if(60!==e.src.charCodeAt(n)||n+2>=r)return!1;const i=e.src.charCodeAt(n+1);if(33!==i&&63!==i&&47!==i&&!isLetter(i))return!1;const o=e.src.slice(n).match(HTML_TAG_RE);if(!o)return!1;if(!t){const t=e.push("html_inline","",0);t.content=o[0],isLinkOpen(t.content)&&e.linkLevel++,isLinkClose(t.content)&&e.linkLevel--}return e.pos+=o[0].length,!0}const DIGITAL_RE=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,NAMED_RE=/^&([a-z][a-z0-9]{1,31});/i;function entity(e,t){const r=e.pos,n=e.posMax;if(38!==e.src.charCodeAt(r))return!1;if(r+1>=n)return!1;if(35===e.src.charCodeAt(r+1)){const n=e.src.slice(r).match(DIGITAL_RE);if(n){if(!t){const t="x"===n[1][0].toLowerCase()?parseInt(n[1].slice(1),16):parseInt(n[1],10),r=e.push("text_special","",0);r.content=isValidEntityCode(t)?fromCodePoint$2(t):fromCodePoint$2(65533),r.markup=n[0],r.info="entity"}return e.pos+=n[0].length,!0}}else{const n=e.src.slice(r).match(NAMED_RE);if(n){const r=decodeHTML(n[0]);if(r!==n[0]){if(!t){const t=e.push("text_special","",0);t.content=r,t.markup=n[0],t.info="entity"}return e.pos+=n[0].length,!0}}}return!1}function processDelimiters(e){const t={},r=e.length;if(!r)return;let n=0,i=-2;const o=[];for(let s=0;s<r;s++){const r=e[s];if(o.push(0),e[n].marker===r.marker&&i===r.token-1||(n=s),i=r.token,r.length=r.length||0,!r.close)continue;t.hasOwnProperty(r.marker)||(t[r.marker]=[-1,-1,-1,-1,-1,-1]);const a=t[r.marker][(r.open?3:0)+r.length%3];let l=n-o[n]-1,c=l;for(;l>a;l-=o[l]+1){const t=e[l];if(t.marker===r.marker&&t.open&&t.end<0){let n=!1;if((t.close||r.open)&&(t.length+r.length)%3==0&&(t.length%3==0&&r.length%3==0||(n=!0)),!n){const n=l>0&&!e[l-1].open?o[l-1]+1:0;o[s]=s-l+n,o[l]=n,r.open=!1,t.end=s,t.close=!1,c=-1,i=-2;break}}}-1!==c&&(t[r.marker][(r.open?3:0)+(r.length||0)%3]=c)}}function link_pairs(e){const t=e.tokens_meta,r=e.tokens_meta.length;processDelimiters(e.delimiters);for(let n=0;n<r;n++)t[n]&&t[n].delimiters&&processDelimiters(t[n].delimiters)}function fragments_join(e){let t,r,n=0;const i=e.tokens,o=e.tokens.length;for(t=r=0;t<o;t++)i[t].nesting<0&&n--,i[t].level=n,i[t].nesting>0&&n++,"text"===i[t].type&&t+1<o&&"text"===i[t+1].type?i[t+1].content=i[t].content+i[t+1].content:(t!==r&&(i[r]=i[t]),r++);t!==r&&(i.length=r)}const _rules=[["text",text$7],["linkify",linkify],["newline",newline$2],["escape",escape$2],["backticks",backtick],["strikethrough",r_strikethrough.tokenize],["emphasis",r_emphasis.tokenize],["link",link$4],["image",image$4],["autolink",autolink],["html_inline",html_inline],["entity",entity]],_rules2=[["balance_pairs",link_pairs],["strikethrough",r_strikethrough.postProcess],["emphasis",r_emphasis.postProcess],["fragments_join",fragments_join]];function ParserInline(){this.ruler=new Ruler;for(let e=0;e<_rules.length;e++)this.ruler.push(_rules[e][0],_rules[e][1]);this.ruler2=new Ruler;for(let e=0;e<_rules2.length;e++)this.ruler2.push(_rules2[e][0],_rules2[e][1])}function reFactory(e){const t={};e=e||{},t.src_Any=Any.source,t.src_Cc=Cc.source,t.src_Z=Z$1.source,t.src_P=P$1.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");return t.src_pseudo_letter="(?:(?![><]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><]|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|[><]|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy='(^|[><]|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function assign(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(r){e[r]=t[r]})}),e}function _class(e){return Object.prototype.toString.call(e)}function isString$2(e){return"[object String]"===_class(e)}function isObject$1(e){return"[object Object]"===_class(e)}function isRegExp(e){return"[object RegExp]"===_class(e)}function isFunction$2(e){return"[object Function]"===_class(e)}function escapeRE(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}ParserInline.prototype.skipToken=function(e){const t=e.pos,r=this.ruler.getRules(""),n=r.length,i=e.md.options.maxNesting,o=e.cache;if(void 0!==o[t])return void(e.pos=o[t]);let s=!1;if(e.level<i){for(let a=0;a<n;a++)if(e.level++,s=r[a](e,!0),e.level--,s){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;s||e.pos++,o[t]=e.pos},ParserInline.prototype.tokenize=function(e){const t=this.ruler.getRules(""),r=t.length,n=e.posMax,i=e.md.options.maxNesting;for(;e.pos<n;){const o=e.pos;let s=!1;if(e.level<i)for(let n=0;n<r;n++)if(s=t[n](e,!1),s){if(o>=e.pos)throw new Error("inline rule didn't increment state.pos");break}if(s){if(e.pos>=n)break}else e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},ParserInline.prototype.parse=function(e,t,r,n){const i=new this.State(e,t,r,n);this.tokenize(i);const o=this.ruler2.getRules(""),s=o.length;for(let a=0;a<s;a++)o[a](i)},ParserInline.prototype.State=StateInline;const defaultOptions$1={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function isOptionsObj(e){return Object.keys(e||{}).reduce(function(e,t){return e||defaultOptions$1.hasOwnProperty(t)},!1)}const defaultSchemas={"http:":{validate:function(e,t,r){const n=e.slice(t);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,r){const n=e.slice(t);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,r){const n=e.slice(t);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},tlds_2ch_src_re="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",tlds_default="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function resetScanCache(e){e.__index__=-1,e.__text_cache__=""}function createValidator(e){return function(t,r){const n=t.slice(r);return e.test(n)?n.match(e)[0].length:0}}function createNormalizer(){return function(e,t){t.normalize(e)}}function compile$1(e){const t=e.re=reFactory(e.__opts__),r=e.__tlds__.slice();function n(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||r.push(tlds_2ch_src_re),r.push(t.src_xn),t.src_tlds=r.join("|"),t.email_fuzzy=RegExp(n(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(n(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(n(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(n(t.tpl_host_fuzzy_test),"i");const i=[];function o(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach(function(t){const r=e.__schemas__[t];if(null===r)return;const n={validate:null,link:null};if(e.__compiled__[t]=n,isObject$1(r))return isRegExp(r.validate)?n.validate=createValidator(r.validate):isFunction$2(r.validate)?n.validate=r.validate:o(t,r),void(isFunction$2(r.normalize)?n.normalize=r.normalize:r.normalize?o(t,r):n.normalize=createNormalizer());isString$2(r)?i.push(t):o(t,r)}),i.forEach(function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)}),e.__compiled__[""]={validate:null,normalize:createNormalizer()};const s=Object.keys(e.__compiled__).filter(function(t){return t.length>0&&e.__compiled__[t]}).map(escapeRE).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),resetScanCache(e)}function Match(e,t){const r=e.__index__,n=e.__last_index__,i=e.__text_cache__.slice(r,n);this.schema=e.__schema__.toLowerCase(),this.index=r+t,this.lastIndex=n+t,this.raw=i,this.text=i,this.url=i}function createMatch(e,t){const r=new Match(e,t);return e.__compiled__[r.schema].normalize(r,e),r}function LinkifyIt(e,t){if(!(this instanceof LinkifyIt))return new LinkifyIt(e,t);t||isOptionsObj(e)&&(t=e,e={}),this.__opts__=assign({},defaultOptions$1,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=assign({},defaultSchemas,e),this.__compiled__={},this.__tlds__=tlds_default,this.__tlds_replaced__=!1,this.re={},compile$1(this)}LinkifyIt.prototype.add=function(e,t){return this.__schemas__[e]=t,compile$1(this),this},LinkifyIt.prototype.set=function(e){return this.__opts__=assign(this.__opts__,e),this},LinkifyIt.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let t,r,n,i,o,s,a,l,c;if(this.re.schema_test.test(e))for(a=this.re.schema_search,a.lastIndex=0;null!==(t=a.exec(e));)if(i=this.testSchemaAt(e,t[2],a.lastIndex),i){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+i;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test),l>=0&&(this.__index__<0||l<this.__index__)&&null!==(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=e.indexOf("@"),c>=0&&null!==(n=e.match(this.re.email_fuzzy))&&(o=n.index+n[1].length,s=n.index+n[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=s))),this.__index__>=0},LinkifyIt.prototype.pretest=function(e){return this.re.pretest.test(e)},LinkifyIt.prototype.testSchemaAt=function(e,t,r){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,r,this):0},LinkifyIt.prototype.match=function(e){const t=[];let r=0;this.__index__>=0&&this.__text_cache__===e&&(t.push(createMatch(this,r)),r=this.__last_index__);let n=r?e.slice(r):e;for(;this.test(n);)t.push(createMatch(this,r)),n=n.slice(this.__last_index__),r+=this.__last_index__;return t.length?t:null},LinkifyIt.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const t=this.re.schema_at_start.exec(e);if(!t)return null;const r=this.testSchemaAt(e,t[2],t[0].length);return r?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+r,createMatch(this,0)):null},LinkifyIt.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(e,t,r){return e!==r[t-1]}).reverse(),compile$1(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,compile$1(this),this)},LinkifyIt.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},LinkifyIt.prototype.onCompile=function(){};const maxInt=2147483647,base$2=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\0-\x7F]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base$2-tMin,floor$1=Math.floor,stringFromCharCode=String.fromCharCode;function error$4(e){throw new RangeError(errors[e])}function map$1(e,t){const r=[];let n=e.length;for(;n--;)r[n]=t(e[n]);return r}function mapDomain(e,t){const r=e.split("@");let n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+map$1((e=e.replace(regexSeparators,".")).split("."),t).join(".")}function ucs2decode(e){const t=[];let r=0;const n=e.length;for(;r<n;){const i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){const n=e.charCodeAt(r++);56320==(64512&n)?t.push(((1023&i)<<10)+(1023&n)+65536):(t.push(i),r--)}else t.push(i)}return t}const ucs2encode=e=>String.fromCodePoint(...e),basicToDigit=function(e){return e>=48&&e<58?e-48+26:e>=65&&e<91?e-65:e>=97&&e<123?e-97:base$2},digitToBasic=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},adapt=function(e,t,r){let n=0;for(e=r?floor$1(e/damp):e>>1,e+=floor$1(e/t);e>baseMinusTMin*tMax>>1;n+=base$2)e=floor$1(e/baseMinusTMin);return floor$1(n+(baseMinusTMin+1)*e/(e+skew))},decode$3=function(e){const t=[],r=e.length;let n=0,i=initialN,o=initialBias,s=e.lastIndexOf(delimiter);s<0&&(s=0);for(let a=0;a<s;++a)e.charCodeAt(a)>=128&&error$4("not-basic"),t.push(e.charCodeAt(a));for(let a=s>0?s+1:0;a<r;){const s=n;for(let t=1,i=base$2;;i+=base$2){a>=r&&error$4("invalid-input");const s=basicToDigit(e.charCodeAt(a++));s>=base$2&&error$4("invalid-input"),s>floor$1((maxInt-n)/t)&&error$4("overflow"),n+=s*t;const l=i<=o?tMin:i>=o+tMax?tMax:i-o;if(s<l)break;const c=base$2-l;t>floor$1(maxInt/c)&&error$4("overflow"),t*=c}const l=t.length+1;o=adapt(n-s,l,0==s),floor$1(n/l)>maxInt-i&&error$4("overflow"),i+=floor$1(n/l),n%=l,t.splice(n++,0,i)}return String.fromCodePoint(...t)},encode$2=function(e){const t=[],r=(e=ucs2decode(e)).length;let n=initialN,i=0,o=initialBias;for(const l of e)l<128&&t.push(stringFromCharCode(l));const s=t.length;let a=s;for(s&&t.push(delimiter);a<r;){let r=maxInt;for(const t of e)t>=n&&t<r&&(r=t);const l=a+1;r-n>floor$1((maxInt-i)/l)&&error$4("overflow"),i+=(r-n)*l,n=r;for(const c of e)if(c<n&&++i>maxInt&&error$4("overflow"),c===n){let e=i;for(let r=base$2;;r+=base$2){const n=r<=o?tMin:r>=o+tMax?tMax:r-o;if(e<n)break;const i=e-n,s=base$2-n;t.push(stringFromCharCode(digitToBasic(n+i%s,0))),e=floor$1(i/s)}t.push(stringFromCharCode(digitToBasic(e,0))),o=adapt(i,l,a===s),i=0,++a}++i,++n}return t.join("")},toUnicode=function(e){return mapDomain(e,function(e){return regexPunycode.test(e)?decode$3(e.slice(4).toLowerCase()):e})},toASCII=function(e){return mapDomain(e,function(e){return regexNonASCII.test(e)?"xn--"+encode$2(e):e})},punycode$2={version:"2.3.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode$3,encode:encode$2,toASCII:toASCII,toUnicode:toUnicode},punycode_es6=Object.freeze(Object.defineProperty({__proto__:null,decode:decode$3,default:punycode$2,encode:encode$2,toASCII:toASCII,toUnicode:toUnicode,ucs2decode:ucs2decode,ucs2encode:ucs2encode},Symbol.toStringTag,{value:"Module"})),cfg_default={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},cfg_zero={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},cfg_commonmark={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},config$3={default:cfg_default,zero:cfg_zero,commonmark:cfg_commonmark},BAD_PROTO_RE=/^(vbscript|javascript|file|data):/,GOOD_DATA_RE=/^data:image\/(gif|png|jpeg|webp);/;function validateLink(e){const t=e.trim().toLowerCase();return!BAD_PROTO_RE.test(t)||GOOD_DATA_RE.test(t)}const RECODE_HOSTNAME_FOR=["http:","https:","mailto:"];function normalizeLink(e){const t=urlParse(e,!0);if(t.hostname&&(!t.protocol||RECODE_HOSTNAME_FOR.indexOf(t.protocol)>=0))try{t.hostname=punycode$2.toASCII(t.hostname)}catch(r){}return encode$3(format(t))}function normalizeLinkText(e){const t=urlParse(e,!0);if(t.hostname&&(!t.protocol||RECODE_HOSTNAME_FOR.indexOf(t.protocol)>=0))try{t.hostname=punycode$2.toUnicode(t.hostname)}catch(r){}return decode$4(format(t),decode$4.defaultChars+"%")}function MarkdownIt(e,t){if(!(this instanceof MarkdownIt))return new MarkdownIt(e,t);t||isString$3(e)||(t=e||{},e="default"),this.inline=new ParserInline,this.block=new ParserBlock,this.core=new Core,this.renderer=new Renderer$1,this.linkify=new LinkifyIt,this.validateLink=validateLink,this.normalizeLink=normalizeLink,this.normalizeLinkText=normalizeLinkText,this.utils=utils$4,this.helpers=assign$1({},helpers$2),this.options={},this.configure(e),t&&this.set(t)}MarkdownIt.prototype.set=function(e){return assign$1(this.options,e),this},MarkdownIt.prototype.configure=function(e){const t=this;if(isString$3(e)){const t=e;if(!(e=config$3[t]))throw new Error('Wrong `markdown-it` preset "'+t+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(r){e.components[r].rules&&t[r].ruler.enableOnly(e.components[r].rules),e.components[r].rules2&&t[r].ruler2.enableOnly(e.components[r].rules2)}),this},MarkdownIt.prototype.enable=function(e,t){let r=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(t){r=r.concat(this[t].ruler.enable(e,!0))},this),r=r.concat(this.inline.ruler2.enable(e,!0));const n=e.filter(function(e){return r.indexOf(e)<0});if(n.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this},MarkdownIt.prototype.disable=function(e,t){let r=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(t){r=r.concat(this[t].ruler.disable(e,!0))},this),r=r.concat(this.inline.ruler2.disable(e,!0));const n=e.filter(function(e){return r.indexOf(e)<0});if(n.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this},MarkdownIt.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},MarkdownIt.prototype.parse=function(e,t){if("string"!=typeof e)throw new Error("Input data should be a String");const r=new this.core.State(e,this,t);return this.core.process(r),r.tokens},MarkdownIt.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},MarkdownIt.prototype.parseInline=function(e,t){const r=new this.core.State(e,this,t);return r.inlineMode=!0,this.core.process(r),r.tokens},MarkdownIt.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};class ActionsManager{#i;get actions(){return this.#i}constructor(e){this.#i=e??{}}action(e){return this.#i[e]}setActions(e){return this.#i=e,this}}class InputRule{constructor(e,t,r={}){this.match=e,this.match=e,this.handler="string"==typeof t?stringHandler(t):t,this.undoable=!1!==r.undoable,this.inCode=r.inCode||!1,this.inCodeMark=!1!==r.inCodeMark}}function stringHandler(e){return function(t,r,n,i){let o=e;if(r[1]){let e=r[0].lastIndexOf(r[1]);o+=r[0].slice(e+r[1].length);let t=(n+=e)-i;t>0&&(o=r[0].slice(e-t,e)+o,n=i)}return t.tr.insertText(o,n,i)}}const MAX_MATCH$1=500;function inputRules({rules:e}){let t=new Plugin({state:{init:()=>null,apply(e,t){return e.getMeta(this)||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:(r,n,i,o)=>run$1(r,n,i,o,e,t),handleDOMEvents:{compositionend:r=>{setTimeout(()=>{let{$cursor:n}=r.state.selection;n&&run$1(r,n.pos,n.pos,"",e,t)})}}},isInputRules:!0});return t}function run$1(e,t,r,n,i,o){if(e.composing)return!1;let s=e.state,a=s.doc.resolve(t),l=a.parent.textBetween(Math.max(0,a.parentOffset-MAX_MATCH$1),a.parentOffset,null,"")+n;for(let c=0;c<i.length;c++){let u=i[c];if(!u.inCodeMark&&a.marks().some(e=>e.type.spec.code))continue;if(a.parent.type.spec.code){if(!u.inCode)continue}else if("only"===u.inCode)continue;let d=u.match.exec(l);if(!d||d[0].length<n.length)continue;let p=t-(d[0].length-n.length);if(!u.inCodeMark){let e=!1;if(s.doc.nodesBetween(p,a.pos,t=>{t.isInline&&t.marks.some(e=>e.type.spec.code)&&(e=!0)}),e)continue}let h=u.handler(s,d,p,r);if(h)return u.undoable&&h.setMeta(o,{transform:h,from:t,to:r,text:n}),e.dispatch(h),!0}return!1}const undoInputRule=(e,t)=>{let r=e.plugins;for(let n=0;n<r.length;n++){let i,o=r[n];if(o.spec.isInputRules&&(i=o.getState(e))){if(t){let r=e.tr,n=i.transform;for(let e=n.steps.length-1;e>=0;e--)r.step(n.steps[e].invert(n.docs[e]));if(i.text){let t=r.doc.resolve(i.from).marks();r.replaceWith(i.from,i.to,e.schema.text(i.text,t))}else r.delete(i.from,i.to);t(r)}return!0}}return!1};new InputRule(/--$/,"",{inCodeMark:!1});const ellipsis=new InputRule(/\.\.\.$/,"",{inCodeMark:!1});new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"",{inCodeMark:!1}),new InputRule(/"$/,"",{inCodeMark:!1}),new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"",{inCodeMark:!1}),new InputRule(/'$/,"",{inCodeMark:!1});for(var base$1={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift$1={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$2="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),ie$1="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),i$1=0;i$1<10;i$1++)base$1[48+i$1]=base$1[96+i$1]=String(i$1);for(var i$1=1;i$1<=24;i$1++)base$1[i$1+111]="F"+i$1;for(var i$1=65;i$1<=90;i$1++)base$1[i$1]=String.fromCharCode(i$1+32),shift$1[i$1]=String.fromCharCode(i$1);for(var code$2 in base$1)shift$1.hasOwnProperty(code$2)||(shift$1[code$2]=base$1[code$2]);function keyName(e){var t=!(mac$2&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||ie$1&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?shift$1:base$1)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}const mac$1="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),windows$1="undefined"!=typeof navigator&&/Win/.test(navigator.platform);function normalizeKeyName$1(e){let t,r,n,i,o=e.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(let a=0;a<o.length-1;a++){let e=o[a];if(/^(cmd|meta|m)$/i.test(e))i=!0;else if(/^a(lt)?$/i.test(e))t=!0;else if(/^(c|ctrl|control)$/i.test(e))r=!0;else if(/^s(hift)?$/i.test(e))n=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);mac$1?i=!0:r=!0}}return t&&(s="Alt-"+s),r&&(s="Ctrl-"+s),i&&(s="Meta-"+s),n&&(s="Shift-"+s),s}function normalize(e){let t=Object.create(null);for(let r in e)t[normalizeKeyName$1(r)]=e[r];return t}function modifiers$1(e,t,r=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),r&&t.shiftKey&&(e="Shift-"+e),e}function keymap$1(e){return new Plugin({props:{handleKeyDown:keydownHandler(e)}})}function keydownHandler(e){let t=normalize(e);return function(e,r){let n,i=keyName(r),o=t[modifiers$1(i,r)];if(o&&o(e.state,e.dispatch,e))return!0;if(1==i.length&&" "!=i){if(r.shiftKey){let n=t[modifiers$1(i,r,!1)];if(n&&n(e.state,e.dispatch,e))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(windows$1&&r.ctrlKey&&r.altKey)&&(n=base$1[r.keyCode])&&n!=i){let i=t[modifiers$1(n,r)];if(i&&i(e.state,e.dispatch,e))return!0}}return!1}}var Priority,Priority2;Priority2=Priority||(Priority={}),Priority2[Priority2.Highest=1e6]="Highest",Priority2[Priority2.VeryHigh=1e5]="VeryHigh",Priority2[Priority2.High=1e4]="High",Priority2[Priority2.Medium=1e3]="Medium",Priority2[Priority2.Low=100]="Low",Priority2[Priority2.VeryLow=10]="VeryLow",Priority2[Priority2.Lowest=0]="Lowest";const DEFAULT_PRIORITY=Priority.Medium;class ExtensionBuilder{static createContext(){return new Map}static Priority=Priority;Priority=ExtensionBuilder.Priority;#t;#o=[];#s={};#a={};#l=[];#i=[];context;constructor(e,t){this.#t=e,this.context=t??ExtensionBuilder.createContext()}get logger(){return this.#t}use(e,...t){return e(this,...t),this}configureMd(e,t={}){return this.#o.push({cb:e,params:{text:t.text??!0,markup:t.markup??!0}}),this}addNode(e,t){if(this.#s[e])throw new Error(`ProseMirror node with this name "${e}" already exist`);return this.#s[e]={name:e,cb:t},this}addMark(e,t,r=DEFAULT_PRIORITY){if(this.#a[e])throw new Error(`ProseMirror mark with this name "${e}" already exist`);return this.#a[e]={name:e,cb:t,priority:r},this}addPlugin(e,t=DEFAULT_PRIORITY){return this.#l.push({cb:e,priority:t}),this}addKeymap(e,t=DEFAULT_PRIORITY){return this.#l.push({cb:(...t)=>keymap$1(e(...t)),priority:t}),this}addInputRules(e,t=DEFAULT_PRIORITY){return this.#l.push({cb:(...t)=>inputRules(e(...t)),priority:t}),this}addAction(e,t){if(this.#i.some(([t])=>t===e))throw new Error(`[Markdown Wysiwyg Editor] action with this name "${e}" already exist`);return this.#i.push([e,t]),this}build(){const e=this.#o.slice(),t={...this.#s},r={...this.#a},n=this.#l.slice(),i=this.#i.slice();return{configureMd:(t,r)=>e.reduce((e,{cb:t,params:n})=>"text"===r&&n.text||"markup"===r&&n.markup?t(e):e,t),nodes:()=>{let e=OrderedMap.from({});for(const{name:r,cb:n}of Object.values(t))e=e.addToEnd(r,n());return e},marks:()=>{const e=Object.values(r).sort((e,t)=>t.priority-e.priority);let t=OrderedMap.from({});for(const{name:r,cb:n}of e)t=t.addToEnd(r,n());return t},plugins:e=>n.sort((e,t)=>t.priority-e.priority).reduce((t,{cb:r})=>{const n=r(e);return Array.isArray(n)?t.push(...n):t.push(n),t},[]),actions:e=>i.reduce((t,[r,n])=>(t[r]=n(e),t),{})}}}class ProseMirrorTransformer{_transformers;constructor(e){this._transformers=e}transform(e){const t=e.toJSON();return this.transformJSON(t),Node$2.fromJSON(e.type.schema,t)}transformJSON(e){for(const t of this._transformers)t(e);if(e.content)for(const t of e.content)this.transformJSON(t)}}const openSuffix="_open",closeSuffix="_close";var TokenType$1,TokenType2;function cropNodeName(e,t,r){const n=new RegExp(`(${t})$|(${r})$`);return e.replace(n,"")}TokenType2=TokenType$1||(TokenType$1={}),TokenType2.open="open",TokenType2.close="close",TokenType2.default="default";let MarkdownParser$1=class{schema;stack=[];marks;tokens;tokenizer;pmTransformers;dynamicModifier;logger;constructor(e,t,r,n){this.schema=e,this.marks=Mark$1.none,this.tokens=r,this.tokenizer=t,this.pmTransformers=n.pmTransformers,this.dynamicModifier=n.dynamicModifier??null,this.logger=n.logger.nested({module:"markdown-parser"})}validateLink(e){return this.tokenizer.validateLink(e)}normalizeLink(e){return this.tokenizer.normalizeLink(e)}normalizeLinkText(e){return this.tokenizer.normalizeLinkText(e)}matchLinks(e){return this.tokenizer.linkify.match(e)}parse(e){const t=Date.now();try{let t,n;this.stack=[{type:this.schema.topNodeType,content:[]}];try{t="string"==typeof e?this.tokenizer.parse(e,{}):e,this.dynamicModifier&&(t=this.dynamicModifier.processTokens(t,"string"==typeof e?e:null))}catch(r){const e=r;throw e.message="Unable to parse your markup. Please check for errors. "+e.message,this.logger.error(e),e}this.parseTokens(t);do{n=this.closeNode()}while(this.stack.length);const i=new ProseMirrorTransformer(this.pmTransformers);return n?i.transform(n):this.schema.topNodeType.createAndFill()}finally{logger.metrics({component:"parser",event:"parse",duration:Date.now()-t}),this.logger.metrics({component:"parser",event:"parse",duration:Date.now()-t})}}top(){return this.stack[this.stack.length-1]}push(e){this.stack.length&&this.top().content.push(e)}getTokenAttrs(e,t,r,n){let i={};return i=t.getAttrs?t.getAttrs(e,r,n):t.attrs instanceof Function?t.attrs(e):t.attrs,this.dynamicModifier&&(i=this.dynamicModifier.processAttrs(e,i??{})),i}getTokenSpec(e){let t,r=e.meta?.["pm-node"]||e.type;if(r=cropNodeName(r,openSuffix,closeSuffix),r in this.tokens&&(t=this.tokens[r]),!t)throw new RangeError(`No token spec for token: ${JSON.stringify(e)}`);return t}getTokenType({type:e}){return e.endsWith(openSuffix)?TokenType$1.open:e.endsWith(closeSuffix)?TokenType$1.close:TokenType$1.default}handlePrimitiveToken(e){switch(e.type){case"text":return this.addText(withoutTrailingNewline(e.content)),!0;case"inline":return this.parseTokens(e.children||[]),!0;case"softbreak":return!this.tokens.softbreak&&(this.addText("\n"),!0)}return!1}handleMark(e,t,r){const n=this.schema.marks[t.name];if(t.noCloseToken){this.openMark(n.create(r));let{content:i}=e;return t.code||(i=withoutTrailingNewline(i)),this.addText(i),void this.closeMark(n)}switch(this.getTokenType(e)){case"open":this.openMark(n.create(r));break;case"close":this.closeMark(n)}}getNodeSchema(e){return this.schema.nodes[e.name]}handleNode(e,t,r){const n=this.getNodeSchema(t);this.addNode(n,r)}handleBlock(e,t,r){const n=this.getNodeSchema(t);if(t.noCloseToken){if(this.openNode(n,r),"children"===t.contentField&&e.children?.length)this.parseTokens(e.children);else{let{content:r}=e;t.prepareContent&&(r=t.prepareContent(r)),this.addText(r)}this.closeNode()}else switch(this.getTokenType(e)){case"open":this.openNode(n,r);break;case"close":this.closeNode()}}handleToken(e,t,r){switch(t.type){case"mark":this.handleMark(e,t,r);break;case"node":this.handleNode(e,t,r);break;case"block":this.handleBlock(e,t,r)}}addNode(e,t,r){let n=e.createAndFill(t,r,this.marks);return n?(this.dynamicModifier&&(n=this.dynamicModifier.processNodes(n)),this.push(n),n):null}openNode(e,t){this.stack.push({type:e,attrs:t,content:[]})}closeNode(){this.marks.length&&(this.marks=Mark$1.none);const e=this.stack.pop();return e?this.addNode(e.type,e.attrs,e.content):null}addText(e){if(!e)return;const t=this.top().content,r=t[t.length-1],n=this.schema.text(e,this.marks);let i;r&&(i=maybeMerge(r,n))?t[t.length-1]=i:t.push(n)}openMark(e){this.marks=e.addToSet(this.marks)}closeMark(e){this.marks=e.removeFromSet(this.marks)}parseTokens(e){for(let t=0;t<e.length;t++){const r=e[t];if(this.handlePrimitiveToken(r))continue;const n=this.getTokenSpec(r);if(n.ignore)continue;const i=this.getTokenAttrs(r,n,e,t);this.handleToken(r,n,i)}}};function maybeMerge(e,t){if(e.isText&&t.isText&&Mark$1.sameSet(e.marks,t.marks))return e.withText(e.text+t.text)}function withoutTrailingNewline(e){return"\n"===e[e.length-1]||e.endsWith("\\n")?e.slice(0,e.length-1):e}class MarkdownParserDynamicModifier{elementProcessors;constructor(e){this.elementProcessors=new Map(Object.entries(e))}processTokens(e,t){return e.map((e,r)=>{const n=this.elementProcessors.get(cropNodeName(e.type,openSuffix,"")),i=n?.processToken?.reduce((e,n)=>n(e,r,t),e)||e;return i.children&&(i.children=this.processTokens(i.children,t)),i})}processAttrs(e,t){const r=this.elementProcessors.get(cropNodeName(e.type,openSuffix,""));return r&&r.processNodeAttrs&&0!==r.processNodeAttrs.length?r.processNodeAttrs.reduce((t,r)=>r(e,t),t):t}processNodes(e){const t=this.elementProcessors.get(e.type.name);return t&&t.processNode&&0!==t.processNode.length?t.processNode.reduce((e,t)=>t(e),e):e}}class ParserTokensRegistry{#c={};#t;constructor(e){this.#t=e.logger}addToken(e,t){return this.#c[e]=t,this}createParser(e,t,r,n){return new MarkdownParser$1(e,t,this.#c,{logger:this.#t,pmTransformers:r,dynamicModifier:n})}}class SchemaSpecRegistry{#u;#d;constructor(e,t){this.#u={topNode:e,nodes:{},marks:{}},this.#d=t}addNode(e,t){const r=this.#d?this.#d.processNodeSpec(e,t):t;return this.#u.nodes[e]=r,this}addMark(e,t){return this.#u.marks[e]=t,this}createSchema(){return new Schema$1(this.#u)}}class MarkdownSerializer{nodes;marks;dynamicModifier;constructor(e,t,r){this.nodes=e,this.marks=t,this.dynamicModifier=r}serialize(e,t={}){const r=new MarkdownSerializerState(this.nodes,this.marks,t,this.dynamicModifier);return r.renderContent(e),r.out}containsNode(e){return e in this.nodes}containsMark(e){return e in this.marks}}class MarkdownSerializerState{out;inTightList;noAutoBlank;isAutolink;escapeWhitespace;escapeCharacters;nodes;marks;options;delim;closed;dynamicModifier;constructor(e,t,r={},n){this.nodes=e,this.marks=t,this.delim=this.out="",this.closed=!1,this.inTightList=!1,this.noAutoBlank=!1,this.isAutolink=void 0,this.escapeWhitespace=!1,this.options=r||{},this.dynamicModifier=n,void 0===this.options.tightLists&&(this.options.tightLists=!1)}setNoAutoBlank(){this.noAutoBlank=!0}unsetNoAutoBlank(){this.noAutoBlank=!1}flushClose(e){if(this.closed){if(this.atBlank()||this.noAutoBlank||(this.out+="\n"),null==e&&(e=2),e>1){let t=this.delim;const r=/\s+$/.exec(t);if(r&&(t=t.slice(0,t.length-r[0].length)),!this.noAutoBlank)for(let n=1;n<e;n++)this.out+=t+"\n"}this.closed=!1}}wrapBlock(e,t,r,n){const i=this.delim;this.write(t||e),this.delim+=e,n(),this.delim=i,this.closeBlock(r)}atBlank(){return/(^|\n)$/.test(this.out)}ensureNewLine(){this.atBlank()||(this.out+="\n")}write(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)}closeBlock(e){this.closed=e??!1}text(e,t){const r=e.split("\n");for(let n=0;n<r.length;n++){const e=this.atBlank()||this.closed;this.write();let i=r[n];!1!==t&&!1!==this.options.escape&&(i=this.esc(i,e)),this.escapeWhitespace&&(i=this.escWhitespace(i)),this.out+=i,n!=r.length-1&&(this.out+="\n")}}render(e,t,r){if("number"==typeof t)throw new Error("!");if(!this.nodes[e.type.name])throw new Error("Token type `"+e.type.name+"` not supported by Markdown renderer");const n=this.nodes[e.type.name];this.dynamicModifier?this.dynamicModifier.processNode(this,e,t,r,n):n(this,e,t,r)}renderContent(e){e.forEach((t,r,n)=>this.render(t,e,n))}renderInline(e){const t=[];let r="";const n=(n,i,o)=>{let s=n?n.marks:[];n&&n.type.spec.isBreak&&(s=s.filter(t=>{if(0===o)return!1;if(o+1==e.childCount)return!1;const r=e.child(o-1),n=e.child(o+1);return t.isInSet(r.marks)&&(!r.isText||/\S/.test(r.text??""))&&t.isInSet(n.marks)&&(!n.isText||/\S/.test(n.text??""))}));let a=r;if(r="",n&&n.isText&&s.some(e=>{const t=this.marks[e.type.name];return t&&t.expelEnclosingWhitespace})){const[e,i,o,l]=/^(\s*)(.*?)(\s*)$/m.exec(n.text??"");a+=i,r=l,(i||l)&&((n=o?n.withText(o):null)||(s=t))}const l=s.length&&s[s.length-1],c=l&&!1===this.marks[l.type.name].escape,u=s.length-(c?1:0);e:for(let e=0;e<u;e++){const r=s[e];if(!this.marks[r.type.name].mixable)break;for(let n=0;n<t.length;n++){const i=t[n];if(!this.marks[i.type.name].mixable)break;if(r.eq(i)){e>n?s=s.slice(0,n).concat(r).concat(s.slice(n,e)).concat(s.slice(e+1,u)):n>e&&(s=s.slice(0,e).concat(s.slice(e+1,n)).concat(r).concat(s.slice(n,u)));continue e}}}let d=0;for(;d<Math.min(t.length,u)&&s[d].eq(t[d]);)++d;for(;d<t.length;)this.text(this.markString(t.pop(),!1,e,o),!1);if(a&&this.text(a),n){for(;t.length<u;){const r=s[t.length];t.push(r),this.text(this.markString(r,!0,e,o),!1)}c&&n.isText?this.text(this.markString(l,!0,e,o)+n.text+this.markString(l,!1,e,o+1),!1):this.render(n,e,o)}};e.forEach(n),n(null,0,e.childCount)}renderList(e,t,r){this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);const n=void 0!==e.attrs.tight?e.attrs.tight:this.options.tightLists,i=this.inTightList;this.inTightList=n,e.forEach((i,o,s)=>{s&&n&&this.flushClose(1),this.wrapBlock(t,r(s,i),e,()=>this.render(i,e,s))}),this.inTightList=i}esc(e,t=!1){const r=this.escapeCharacters?.length?this.escapeCharacters.map(e=>"\\"+e).join(""):"",n=this.options?.commonEscape||new RegExp(/[`\^+*\\\|~\[\]\{\}<>\$_]/g.source+(r?`|[${r}]`:""),"g"),i=this.options?.startOfLineEscape||/^[:#\-*+>]/;return e=e.replace(n,"\\$&"),t&&(e=e.replace(i,"\\$&").replace(/^(\s*\d+)\./,"$1\\.")),e}escWhitespace(e){return e.replace(/ /g,"\\ ")}quote(e){const t=-1==e.indexOf('"')?'""':-1==e.indexOf("'")?"''":"()";return t[0]+e+t[1]}repeat(e,t){let r="";for(let n=0;n<t;n++)r+=e;return r}markString(e,t,r,n){const i=this.marks[e.type.name],o=t?i.open:i.close;return"string"==typeof o?o:o(this,e,r,n)}getEnclosingWhitespace(e){return{leading:(e.match(/^(\s+)/)||[])[0],trailing:(e.match(/(\s+)$/)||[])[0]}}}class SerializerTokensRegistry{#p={};#h={};addNode(e,t){return this.#p[e]=t,this}addMark(e,t){return this.#h[e]=t,this}createSerializer(e){return new MarkdownSerializer(this.#p,this.#h,e)}}class ExtensionsManager{static process(e,t,r){return new this({extensions:e,options:t,logger:r}).build()}#f;#m;#g;#b=new Map;#y=new Map;#T=[];#E;#O;#S;#x;#u;#v;#l=[];#i={};#_={};#A={};#C;#w;constructor({extensions:e,options:t={},logger:r=new Logger2}){this.#f=new SchemaSpecRegistry(void 0,t.dynamicModifiers?.schema),this.#m=new ParserTokensRegistry({logger:r}),this.#g=new SerializerTokensRegistry,t.dynamicModifiers&&(this.#w=t.dynamicModifiers?.parser,this.#C=t.dynamicModifiers?.serializer),this.#S=e;const n=t.mdOpts?.preset??"default";this.#E=new MarkdownIt(n,t.mdOpts??{}),this.#O=new MarkdownIt(n,t.mdOpts??{}),t.linkifyTlds&&(this.#E.linkify.tlds(t.linkifyTlds,!0),this.#O.linkify.tlds(t.linkifyTlds,!0)),t.pmTransformers&&(this.#T=t.pmTransformers),this.#x=new ExtensionBuilder(r)}build(){return this.processExtensions(),this.createDeps(),this.createDerived(),{...this.#v,actions:this.#v.actions,rawActions:this.#i,plugins:this.#l,nodeViews:this.#_,markViews:this.#A}}buildDeps(){return this.processExtensions(),this.createDeps(),this.#v}processExtensions(){this.#u=this.#x.use(this.#S).build(),this.#E=this.#u.configureMd(this.#E,"markup"),this.#O=this.#u.configureMd(this.#O,"text"),this.#u.nodes().forEach(this.processNode),this.#u.marks().forEach(this.processMark)}processNode=(e,{spec:t,fromMd:r,toMd:n,view:i})=>{this.#f.addNode(e,t),this.#m.addToken(r.tokenName||e,r.tokenSpec),this.#g.addNode(e,n),i&&this.#b.set(e,i)};processMark=(e,{spec:t,fromMd:r,toMd:n,view:i})=>{this.#f.addMark(e,t),this.#m.addToken(r.tokenName||e,r.tokenSpec),this.#g.addMark(e,n),i&&this.#y.set(e,i)};createParser(e,t){return this.#m.createParser(e,t,this.#T,this.#w)}createDeps(){const e=new ActionsManager,t=this.#f.createSchema(),r=this.createParser(t,this.#E),n=this.createParser(t,this.#O),i=this.#g.createSerializer(this.#C);this.#v={schema:t,actions:e,markupParser:r,textParser:n,serializer:i}}createDerived(){this.#l=this.#u.plugins(this.#v),Object.assign(this.#i,this.#u.actions(this.#v));for(const[e,t]of this.#b)this.#_[e]=t(this.#v);for(const[e,t]of this.#y)this.#A[e]=t(this.#v)}}class SchemaDynamicModifier{nodeSpecsProcessors;constructor(e){this.nodeSpecsProcessors=new Map(Object.entries(e))}processNodeSpec(e,t){let r=t;return this.nodeSpecsProcessors.forEach((n,i)=>{e===i&&n.allowedAttrs&&n.allowedAttrs.length>0&&t&&(r={...t,attrs:{...t.attrs,...n.allowedAttrs.reduce((e,t)=>(e[t]={default:null},e),{})}})}),r}}class MarkdownSerializerDynamicModifier{nodeProcessors;constructor(e){this.nodeProcessors=new Map(Object.entries(e))}processNode(e,t,r,n,i){const o=this.nodeProcessors.get(t.type.name);o&&o.processNode&&0!==o.processNode.length?o.processNode.forEach(o=>{o(e,t,r,n,i)}):i(e,t,r,n)}}function bindActions(e){return function(t){return Object.entries(e).reduce((e,[r,n])=>(e[r]={isActive:()=>n.isActive?.(t.state)??!1,isEnable:e=>n.isEnable(t.state,void 0,t,e),run:e=>n.run(t.state,t.dispatch,t,e),meta:()=>n.meta?.(t.state)},e),{})}}function convertDynamicModifiersConfigs(e){const t={},r={},n={};return e.forEach(e=>{switch(e.type){case"parserToken":{const{tokenName:r,process:n}=e;t[r]=t[r]||{},t[r].processToken=t[r].processToken||[],t[r].processToken?.push(n);break}case"parserNodeAttrs":{const{tokenName:r,process:n}=e;t[r]=t[r]||{},t[r].processNodeAttrs=t[r].processNodeAttrs||[],t[r].processNodeAttrs?.push(n);break}case"parserNode":{const{nodeName:r,process:n}=e;t[r]=t[r]||{},t[r].processNode=t[r].processNode||[],t[r].processNode?.push(n);break}case"serializerNode":{const{nodeName:t,process:r}=e;n[t]=n[t]||{},n[t].processNode=n[t].processNode||[],n[t].processNode?.push(r);break}case"schemaNodeSpec":{const{nodeName:t,allowedAttrs:n}=e;r[t]={allowedAttrs:n};break}}}),{parser:t,schema:r,serializer:n}}var _freeGlobal,hasRequired_freeGlobal,_root,hasRequired_root,_Symbol,hasRequired_Symbol,_arrayMap,hasRequired_arrayMap,isArray_1,hasRequiredIsArray,_getRawTag,hasRequired_getRawTag,_objectToString,hasRequired_objectToString,_baseGetTag,hasRequired_baseGetTag,isObjectLike_1,hasRequiredIsObjectLike,isSymbol_1,hasRequiredIsSymbol,_baseToString,hasRequired_baseToString,toString_1,hasRequiredToString,_baseSlice,hasRequired_baseSlice,_castSlice,hasRequired_castSlice,_hasUnicode,hasRequired_hasUnicode,_asciiToArray,hasRequired_asciiToArray,_unicodeToArray,hasRequired_unicodeToArray,_stringToArray,hasRequired_stringToArray,_createCaseFirst,hasRequired_createCaseFirst,upperFirst_1,hasRequiredUpperFirst,capitalize_1,hasRequiredCapitalize;function require_freeGlobal(){if(hasRequired_freeGlobal)return _freeGlobal;hasRequired_freeGlobal=1;var e="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal;return _freeGlobal=e}function require_root(){if(hasRequired_root)return _root;hasRequired_root=1;var e=require_freeGlobal(),t="object"==typeof self&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return _root=r}function require_Symbol(){if(hasRequired_Symbol)return _Symbol;hasRequired_Symbol=1;var e=require_root().Symbol;return _Symbol=e}function require_arrayMap(){return hasRequired_arrayMap?_arrayMap:(hasRequired_arrayMap=1,_arrayMap=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i})}function requireIsArray(){if(hasRequiredIsArray)return isArray_1;hasRequiredIsArray=1;var e=Array.isArray;return isArray_1=e}function require_getRawTag(){if(hasRequired_getRawTag)return _getRawTag;hasRequired_getRawTag=1;var e=require_Symbol(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;return _getRawTag=function(e){var t=r.call(e,i),o=e[i];try{e[i]=void 0;var s=!0}catch(l){}var a=n.call(e);return s&&(t?e[i]=o:delete e[i]),a}}function require_objectToString(){if(hasRequired_objectToString)return _objectToString;hasRequired_objectToString=1;var e=Object.prototype.toString;return _objectToString=function(t){return e.call(t)}}function require_baseGetTag(){if(hasRequired_baseGetTag)return _baseGetTag;hasRequired_baseGetTag=1;var e=require_Symbol(),t=require_getRawTag(),r=require_objectToString(),n=e?e.toStringTag:void 0;return _baseGetTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":n&&n in Object(e)?t(e):r(e)}}function requireIsObjectLike(){return hasRequiredIsObjectLike?isObjectLike_1:(hasRequiredIsObjectLike=1,isObjectLike_1=function(e){return null!=e&&"object"==typeof e})}function requireIsSymbol(){if(hasRequiredIsSymbol)return isSymbol_1;hasRequiredIsSymbol=1;var e=require_baseGetTag(),t=requireIsObjectLike();return isSymbol_1=function(r){return"symbol"==typeof r||t(r)&&"[object Symbol]"==e(r)}}function require_baseToString(){if(hasRequired_baseToString)return _baseToString;hasRequired_baseToString=1;var e=require_Symbol(),t=require_arrayMap(),r=requireIsArray(),n=requireIsSymbol(),i=e?e.prototype:void 0,o=i?i.toString:void 0;return _baseToString=function e(i){if("string"==typeof i)return i;if(r(i))return t(i,e)+"";if(n(i))return o?o.call(i):"";var s=i+"";return"0"==s&&1/i==-1/0?"-0":s}}function requireToString(){if(hasRequiredToString)return toString_1;hasRequiredToString=1;var e=require_baseToString();return toString_1=function(t){return null==t?"":e(t)}}function require_baseSlice(){return hasRequired_baseSlice?_baseSlice:(hasRequired_baseSlice=1,_baseSlice=function(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o})}function require_castSlice(){if(hasRequired_castSlice)return _castSlice;hasRequired_castSlice=1;var e=require_baseSlice();return _castSlice=function(t,r,n){var i=t.length;return n=void 0===n?i:n,!r&&n>=i?t:e(t,r,n)}}function require_hasUnicode(){if(hasRequired_hasUnicode)return _hasUnicode;hasRequired_hasUnicode=1;var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");return _hasUnicode=function(t){return e.test(t)}}function require_asciiToArray(){return hasRequired_asciiToArray?_asciiToArray:(hasRequired_asciiToArray=1,_asciiToArray=function(e){return e.split("")})}function require_unicodeToArray(){if(hasRequired_unicodeToArray)return _unicodeToArray;hasRequired_unicodeToArray=1;var e="\\ud800-\\udfff",t="["+e+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",n="\\ud83c[\\udffb-\\udfff]",i="[^"+e+"]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",a="(?:"+r+"|"+n+")?",l="[\\ufe0e\\ufe0f]?",c=l+a+"(?:\\u200d(?:"+[i,o,s].join("|")+")"+l+a+")*",u="(?:"+[i+r+"?",r,o,s,t].join("|")+")",d=RegExp(n+"(?="+n+")|"+u+c,"g");return _unicodeToArray=function(e){return e.match(d)||[]}}function require_stringToArray(){if(hasRequired_stringToArray)return _stringToArray;hasRequired_stringToArray=1;var e=require_asciiToArray(),t=require_hasUnicode(),r=require_unicodeToArray();return _stringToArray=function(n){return t(n)?r(n):e(n)}}function require_createCaseFirst(){if(hasRequired_createCaseFirst)return _createCaseFirst;hasRequired_createCaseFirst=1;var e=require_castSlice(),t=require_hasUnicode(),r=require_stringToArray(),n=requireToString();return _createCaseFirst=function(i){return function(o){o=n(o);var s=t(o)?r(o):void 0,a=s?s[0]:o.charAt(0),l=s?e(s,1).join(""):o.slice(1);return a[i]()+l}}}function requireUpperFirst(){if(hasRequiredUpperFirst)return upperFirst_1;hasRequiredUpperFirst=1;var e=require_createCaseFirst()("toUpperCase");return upperFirst_1=e}function requireCapitalize(){if(hasRequiredCapitalize)return capitalize_1;hasRequiredCapitalize=1;var e=requireToString(),t=requireUpperFirst();return capitalize_1=function(r){return t(e(r).toLowerCase())}}var capitalizeExports=requireCapitalize();const capitalize=getDefaultExportFromCjs(capitalizeExports);var _baseClamp,hasRequired_baseClamp,_trimmedEndIndex,hasRequired_trimmedEndIndex,_baseTrim,hasRequired_baseTrim,isObject_1,hasRequiredIsObject,toNumber_1,hasRequiredToNumber,clamp_1,hasRequiredClamp;function require_baseClamp(){return hasRequired_baseClamp?_baseClamp:(hasRequired_baseClamp=1,_baseClamp=function(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e})}function require_trimmedEndIndex(){if(hasRequired_trimmedEndIndex)return _trimmedEndIndex;hasRequired_trimmedEndIndex=1;var e=/\s/;return _trimmedEndIndex=function(t){for(var r=t.length;r--&&e.test(t.charAt(r)););return r}}function require_baseTrim(){if(hasRequired_baseTrim)return _baseTrim;hasRequired_baseTrim=1;var e=require_trimmedEndIndex(),t=/^\s+/;return _baseTrim=function(r){return r?r.slice(0,e(r)+1).replace(t,""):r}}function requireIsObject(){return hasRequiredIsObject?isObject_1:(hasRequiredIsObject=1,isObject_1=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)})}function requireToNumber(){if(hasRequiredToNumber)return toNumber_1;hasRequiredToNumber=1;var e=require_baseTrim(),t=requireIsObject(),r=requireIsSymbol(),n=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;return toNumber_1=function(a){if("number"==typeof a)return a;if(r(a))return NaN;if(t(a)){var l="function"==typeof a.valueOf?a.valueOf():a;a=t(l)?l+"":l}if("string"!=typeof a)return 0===a?a:+a;a=e(a);var c=i.test(a);return c||o.test(a)?s(a.slice(2),c?2:8):n.test(a)?NaN:+a}}function requireClamp(){if(hasRequiredClamp)return clamp_1;hasRequiredClamp=1;var e=require_baseClamp(),t=requireToNumber();return clamp_1=function(r,n,i){return void 0===i&&(i=n,n=void 0),void 0!==i&&(i=(i=t(i))==i?i:0),void 0!==n&&(n=(n=t(n))==n?n:0),e(t(r),n,i)}}var clampExports=requireClamp();const clamp=getDefaultExportFromCjs(clampExports);var _listCacheClear,hasRequired_listCacheClear,eq_1,hasRequiredEq,_assocIndexOf,hasRequired_assocIndexOf,_listCacheDelete,hasRequired_listCacheDelete,_listCacheGet,hasRequired_listCacheGet,_listCacheHas,hasRequired_listCacheHas,_listCacheSet,hasRequired_listCacheSet,_ListCache,hasRequired_ListCache,_stackClear,hasRequired_stackClear,_stackDelete,hasRequired_stackDelete,_stackGet,hasRequired_stackGet,_stackHas,hasRequired_stackHas,isFunction_1,hasRequiredIsFunction,_coreJsData,hasRequired_coreJsData,_isMasked,hasRequired_isMasked,_toSource,hasRequired_toSource,_baseIsNative,hasRequired_baseIsNative,_getValue,hasRequired_getValue,_getNative,hasRequired_getNative,_Map,hasRequired_Map,_nativeCreate,hasRequired_nativeCreate,_hashClear,hasRequired_hashClear,_hashDelete,hasRequired_hashDelete,_hashGet,hasRequired_hashGet,_hashHas,hasRequired_hashHas,_hashSet,hasRequired_hashSet,_Hash,hasRequired_Hash,_mapCacheClear,hasRequired_mapCacheClear,_isKeyable,hasRequired_isKeyable,_getMapData,hasRequired_getMapData,_mapCacheDelete,hasRequired_mapCacheDelete,_mapCacheGet,hasRequired_mapCacheGet,_mapCacheHas,hasRequired_mapCacheHas,_mapCacheSet,hasRequired_mapCacheSet,_MapCache,hasRequired_MapCache,_stackSet,hasRequired_stackSet,_Stack,hasRequired_Stack,_arrayEach,hasRequired_arrayEach,_defineProperty,hasRequired_defineProperty,_baseAssignValue,hasRequired_baseAssignValue,_assignValue,hasRequired_assignValue,_copyObject,hasRequired_copyObject,_baseTimes,hasRequired_baseTimes,_baseIsArguments,hasRequired_baseIsArguments,isArguments_1,hasRequiredIsArguments;function require_listCacheClear(){return hasRequired_listCacheClear?_listCacheClear:(hasRequired_listCacheClear=1,_listCacheClear=function(){this.__data__=[],this.size=0})}function requireEq(){return hasRequiredEq?eq_1:(hasRequiredEq=1,eq_1=function(e,t){return e===t||e!=e&&t!=t})}function require_assocIndexOf(){if(hasRequired_assocIndexOf)return _assocIndexOf;hasRequired_assocIndexOf=1;var e=requireEq();return _assocIndexOf=function(t,r){for(var n=t.length;n--;)if(e(t[n][0],r))return n;return-1}}function require_listCacheDelete(){if(hasRequired_listCacheDelete)return _listCacheDelete;hasRequired_listCacheDelete=1;var e=require_assocIndexOf(),t=Array.prototype.splice;return _listCacheDelete=function(r){var n=this.__data__,i=e(n,r);return!(i<0||(i==n.length-1?n.pop():t.call(n,i,1),--this.size,0))}}function require_listCacheGet(){if(hasRequired_listCacheGet)return _listCacheGet;hasRequired_listCacheGet=1;var e=require_assocIndexOf();return _listCacheGet=function(t){var r=this.__data__,n=e(r,t);return n<0?void 0:r[n][1]}}function require_listCacheHas(){if(hasRequired_listCacheHas)return _listCacheHas;hasRequired_listCacheHas=1;var e=require_assocIndexOf();return _listCacheHas=function(t){return e(this.__data__,t)>-1}}function require_listCacheSet(){if(hasRequired_listCacheSet)return _listCacheSet;hasRequired_listCacheSet=1;var e=require_assocIndexOf();return _listCacheSet=function(t,r){var n=this.__data__,i=e(n,t);return i<0?(++this.size,n.push([t,r])):n[i][1]=r,this}}function require_ListCache(){if(hasRequired_ListCache)return _ListCache;hasRequired_ListCache=1;var e=require_listCacheClear(),t=require_listCacheDelete(),r=require_listCacheGet(),n=require_listCacheHas(),i=require_listCacheSet();function o(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,_ListCache=o}function require_stackClear(){if(hasRequired_stackClear)return _stackClear;hasRequired_stackClear=1;var e=require_ListCache();return _stackClear=function(){this.__data__=new e,this.size=0}}function require_stackDelete(){return hasRequired_stackDelete?_stackDelete:(hasRequired_stackDelete=1,_stackDelete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r})}function require_stackGet(){return hasRequired_stackGet?_stackGet:(hasRequired_stackGet=1,_stackGet=function(e){return this.__data__.get(e)})}function require_stackHas(){return hasRequired_stackHas?_stackHas:(hasRequired_stackHas=1,_stackHas=function(e){return this.__data__.has(e)})}function requireIsFunction(){if(hasRequiredIsFunction)return isFunction_1;hasRequiredIsFunction=1;var e=require_baseGetTag(),t=requireIsObject();return isFunction_1=function(r){if(!t(r))return!1;var n=e(r);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}}function require_coreJsData(){if(hasRequired_coreJsData)return _coreJsData;hasRequired_coreJsData=1;var e=require_root()["__core-js_shared__"];return _coreJsData=e}function require_isMasked(){if(hasRequired_isMasked)return _isMasked;hasRequired_isMasked=1;var e,t=require_coreJsData(),r=(e=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"";return _isMasked=function(e){return!!r&&r in e}}function require_toSource(){if(hasRequired_toSource)return _toSource;hasRequired_toSource=1;var e=Function.prototype.toString;return _toSource=function(t){if(null!=t){try{return e.call(t)}catch(r){}try{return t+""}catch(r){}}return""}}function require_baseIsNative(){if(hasRequired_baseIsNative)return _baseIsNative;hasRequired_baseIsNative=1;var e=requireIsFunction(),t=require_isMasked(),r=requireIsObject(),n=require_toSource(),i=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,a=o.toString,l=s.hasOwnProperty,c=RegExp("^"+a.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return _baseIsNative=function(o){return!(!r(o)||t(o))&&(e(o)?c:i).test(n(o))}}function require_getValue(){return hasRequired_getValue?_getValue:(hasRequired_getValue=1,_getValue=function(e,t){return null==e?void 0:e[t]})}function require_getNative(){if(hasRequired_getNative)return _getNative;hasRequired_getNative=1;var e=require_baseIsNative(),t=require_getValue();return _getNative=function(r,n){var i=t(r,n);return e(i)?i:void 0}}function require_Map(){if(hasRequired_Map)return _Map;hasRequired_Map=1;var e=require_getNative()(require_root(),"Map");return _Map=e}function require_nativeCreate(){if(hasRequired_nativeCreate)return _nativeCreate;hasRequired_nativeCreate=1;var e=require_getNative()(Object,"create");return _nativeCreate=e}function require_hashClear(){if(hasRequired_hashClear)return _hashClear;hasRequired_hashClear=1;var e=require_nativeCreate();return _hashClear=function(){this.__data__=e?e(null):{},this.size=0}}function require_hashDelete(){return hasRequired_hashDelete?_hashDelete:(hasRequired_hashDelete=1,_hashDelete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t})}function require_hashGet(){if(hasRequired_hashGet)return _hashGet;hasRequired_hashGet=1;var e=require_nativeCreate(),t=Object.prototype.hasOwnProperty;return _hashGet=function(r){var n=this.__data__;if(e){var i=n[r];return"__lodash_hash_undefined__"===i?void 0:i}return t.call(n,r)?n[r]:void 0}}function require_hashHas(){if(hasRequired_hashHas)return _hashHas;hasRequired_hashHas=1;var e=require_nativeCreate(),t=Object.prototype.hasOwnProperty;return _hashHas=function(r){var n=this.__data__;return e?void 0!==n[r]:t.call(n,r)}}function require_hashSet(){if(hasRequired_hashSet)return _hashSet;hasRequired_hashSet=1;var e=require_nativeCreate();return _hashSet=function(t,r){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=e&&void 0===r?"__lodash_hash_undefined__":r,this}}function require_Hash(){if(hasRequired_Hash)return _Hash;hasRequired_Hash=1;var e=require_hashClear(),t=require_hashDelete(),r=require_hashGet(),n=require_hashHas(),i=require_hashSet();function o(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,_Hash=o}function require_mapCacheClear(){if(hasRequired_mapCacheClear)return _mapCacheClear;hasRequired_mapCacheClear=1;var e=require_Hash(),t=require_ListCache(),r=require_Map();return _mapCacheClear=function(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}}function require_isKeyable(){return hasRequired_isKeyable?_isKeyable:(hasRequired_isKeyable=1,_isKeyable=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e})}function require_getMapData(){if(hasRequired_getMapData)return _getMapData;hasRequired_getMapData=1;var e=require_isKeyable();return _getMapData=function(t,r){var n=t.__data__;return e(r)?n["string"==typeof r?"string":"hash"]:n.map}}function require_mapCacheDelete(){if(hasRequired_mapCacheDelete)return _mapCacheDelete;hasRequired_mapCacheDelete=1;var e=require_getMapData();return _mapCacheDelete=function(t){var r=e(this,t).delete(t);return this.size-=r?1:0,r}}function require_mapCacheGet(){if(hasRequired_mapCacheGet)return _mapCacheGet;hasRequired_mapCacheGet=1;var e=require_getMapData();return _mapCacheGet=function(t){return e(this,t).get(t)}}function require_mapCacheHas(){if(hasRequired_mapCacheHas)return _mapCacheHas;hasRequired_mapCacheHas=1;var e=require_getMapData();return _mapCacheHas=function(t){return e(this,t).has(t)}}function require_mapCacheSet(){if(hasRequired_mapCacheSet)return _mapCacheSet;hasRequired_mapCacheSet=1;var e=require_getMapData();return _mapCacheSet=function(t,r){var n=e(this,t),i=n.size;return n.set(t,r),this.size+=n.size==i?0:1,this}}function require_MapCache(){if(hasRequired_MapCache)return _MapCache;hasRequired_MapCache=1;var e=require_mapCacheClear(),t=require_mapCacheDelete(),r=require_mapCacheGet(),n=require_mapCacheHas(),i=require_mapCacheSet();function o(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,_MapCache=o}function require_stackSet(){if(hasRequired_stackSet)return _stackSet;hasRequired_stackSet=1;var e=require_ListCache(),t=require_Map(),r=require_MapCache();return _stackSet=function(n,i){var o=this.__data__;if(o instanceof e){var s=o.__data__;if(!t||s.length<199)return s.push([n,i]),this.size=++o.size,this;o=this.__data__=new r(s)}return o.set(n,i),this.size=o.size,this}}function require_Stack(){if(hasRequired_Stack)return _Stack;hasRequired_Stack=1;var e=require_ListCache(),t=require_stackClear(),r=require_stackDelete(),n=require_stackGet(),i=require_stackHas(),o=require_stackSet();function s(t){var r=this.__data__=new e(t);this.size=r.size}return s.prototype.clear=t,s.prototype.delete=r,s.prototype.get=n,s.prototype.has=i,s.prototype.set=o,_Stack=s}function require_arrayEach(){return hasRequired_arrayEach?_arrayEach:(hasRequired_arrayEach=1,_arrayEach=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e})}function require_defineProperty(){if(hasRequired_defineProperty)return _defineProperty;hasRequired_defineProperty=1;var e=require_getNative(),t=function(){try{var t=e(Object,"defineProperty");return t({},"",{}),t}catch(r){}}();return _defineProperty=t}function require_baseAssignValue(){if(hasRequired_baseAssignValue)return _baseAssignValue;hasRequired_baseAssignValue=1;var e=require_defineProperty();return _baseAssignValue=function(t,r,n){"__proto__"==r&&e?e(t,r,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[r]=n}}function require_assignValue(){if(hasRequired_assignValue)return _assignValue;hasRequired_assignValue=1;var e=require_baseAssignValue(),t=requireEq(),r=Object.prototype.hasOwnProperty;return _assignValue=function(n,i,o){var s=n[i];r.call(n,i)&&t(s,o)&&(void 0!==o||i in n)||e(n,i,o)}}function require_copyObject(){if(hasRequired_copyObject)return _copyObject;hasRequired_copyObject=1;var e=require_assignValue(),t=require_baseAssignValue();return _copyObject=function(r,n,i,o){var s=!i;i||(i={});for(var a=-1,l=n.length;++a<l;){var c=n[a],u=o?o(i[c],r[c],c,i,r):void 0;void 0===u&&(u=r[c]),s?t(i,c,u):e(i,c,u)}return i}}function require_baseTimes(){return hasRequired_baseTimes?_baseTimes:(hasRequired_baseTimes=1,_baseTimes=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n})}function require_baseIsArguments(){if(hasRequired_baseIsArguments)return _baseIsArguments;hasRequired_baseIsArguments=1;var e=require_baseGetTag(),t=requireIsObjectLike();return _baseIsArguments=function(r){return t(r)&&"[object Arguments]"==e(r)}}function requireIsArguments(){if(hasRequiredIsArguments)return isArguments_1;hasRequiredIsArguments=1;var e=require_baseIsArguments(),t=requireIsObjectLike(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,o=e(function(){return arguments}())?e:function(e){return t(e)&&n.call(e,"callee")&&!i.call(e,"callee")};return isArguments_1=o}var isBuffer={exports:{}},stubFalse_1,hasRequiredStubFalse,hasRequiredIsBuffer,_isIndex,hasRequired_isIndex,isLength_1,hasRequiredIsLength,_baseIsTypedArray,hasRequired_baseIsTypedArray,_baseUnary,hasRequired_baseUnary;function requireStubFalse(){return hasRequiredStubFalse?stubFalse_1:(hasRequiredStubFalse=1,stubFalse_1=function(){return!1})}function requireIsBuffer(){return hasRequiredIsBuffer||(hasRequiredIsBuffer=1,e=isBuffer,t=isBuffer.exports,r=require_root(),n=requireStubFalse(),a=((s=(o=(i=t&&!t.nodeType&&t)&&e&&!e.nodeType&&e)&&o.exports===i?r.Buffer:void 0)?s.isBuffer:void 0)||n,e.exports=a),isBuffer.exports;var e,t,r,n,i,o,s,a}function require_isIndex(){if(hasRequired_isIndex)return _isIndex;hasRequired_isIndex=1;var e=/^(?:0|[1-9]\d*)$/;return _isIndex=function(t,r){var n=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&e.test(t))&&t>-1&&t%1==0&&t<r}}function requireIsLength(){return hasRequiredIsLength?isLength_1:(hasRequiredIsLength=1,isLength_1=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991})}function require_baseIsTypedArray(){if(hasRequired_baseIsTypedArray)return _baseIsTypedArray;hasRequired_baseIsTypedArray=1;var e=require_baseGetTag(),t=requireIsLength(),r=requireIsObjectLike(),n={};return n["[object Float32Array]"]=n["[object Float64Array]"]=n["[object Int8Array]"]=n["[object Int16Array]"]=n["[object Int32Array]"]=n["[object Uint8Array]"]=n["[object Uint8ClampedArray]"]=n["[object Uint16Array]"]=n["[object Uint32Array]"]=!0,n["[object Arguments]"]=n["[object Array]"]=n["[object ArrayBuffer]"]=n["[object Boolean]"]=n["[object DataView]"]=n["[object Date]"]=n["[object Error]"]=n["[object Function]"]=n["[object Map]"]=n["[object Number]"]=n["[object Object]"]=n["[object RegExp]"]=n["[object Set]"]=n["[object String]"]=n["[object WeakMap]"]=!1,_baseIsTypedArray=function(i){return r(i)&&t(i.length)&&!!n[e(i)]}}function require_baseUnary(){return hasRequired_baseUnary?_baseUnary:(hasRequired_baseUnary=1,_baseUnary=function(e){return function(t){return e(t)}})}isBuffer.exports;var _nodeUtil={exports:{}},hasRequired_nodeUtil,isTypedArray_1,hasRequiredIsTypedArray,_arrayLikeKeys,hasRequired_arrayLikeKeys,_isPrototype,hasRequired_isPrototype,_overArg,hasRequired_overArg,_nativeKeys,hasRequired_nativeKeys,_baseKeys,hasRequired_baseKeys,isArrayLike_1,hasRequiredIsArrayLike,keys_1,hasRequiredKeys,_baseAssign,hasRequired_baseAssign,_nativeKeysIn,hasRequired_nativeKeysIn,_baseKeysIn,hasRequired_baseKeysIn,keysIn_1,hasRequiredKeysIn,_baseAssignIn,hasRequired_baseAssignIn;function require_nodeUtil(){return hasRequired_nodeUtil||(hasRequired_nodeUtil=1,e=_nodeUtil,t=_nodeUtil.exports,r=require_freeGlobal(),n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,o=i&&i.exports===n&&r.process,s=function(){try{return i&&i.require&&i.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}(),e.exports=s),_nodeUtil.exports;var e,t,r,n,i,o,s}function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray_1;hasRequiredIsTypedArray=1;var e=require_baseIsTypedArray(),t=require_baseUnary(),r=require_nodeUtil(),n=r&&r.isTypedArray,i=n?t(n):e;return isTypedArray_1=i}function require_arrayLikeKeys(){if(hasRequired_arrayLikeKeys)return _arrayLikeKeys;hasRequired_arrayLikeKeys=1;var e=require_baseTimes(),t=requireIsArguments(),r=requireIsArray(),n=requireIsBuffer(),i=require_isIndex(),o=requireIsTypedArray(),s=Object.prototype.hasOwnProperty;return _arrayLikeKeys=function(a,l){var c=r(a),u=!c&&t(a),d=!c&&!u&&n(a),p=!c&&!u&&!d&&o(a),h=c||u||d||p,f=h?e(a.length,String):[],m=f.length;for(var g in a)!l&&!s.call(a,g)||h&&("length"==g||d&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||i(g,m))||f.push(g);return f}}function require_isPrototype(){if(hasRequired_isPrototype)return _isPrototype;hasRequired_isPrototype=1;var e=Object.prototype;return _isPrototype=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||e)}}function require_overArg(){return hasRequired_overArg?_overArg:(hasRequired_overArg=1,_overArg=function(e,t){return function(r){return e(t(r))}})}function require_nativeKeys(){if(hasRequired_nativeKeys)return _nativeKeys;hasRequired_nativeKeys=1;var e=require_overArg()(Object.keys,Object);return _nativeKeys=e}function require_baseKeys(){if(hasRequired_baseKeys)return _baseKeys;hasRequired_baseKeys=1;var e=require_isPrototype(),t=require_nativeKeys(),r=Object.prototype.hasOwnProperty;return _baseKeys=function(n){if(!e(n))return t(n);var i=[];for(var o in Object(n))r.call(n,o)&&"constructor"!=o&&i.push(o);return i}}function requireIsArrayLike(){if(hasRequiredIsArrayLike)return isArrayLike_1;hasRequiredIsArrayLike=1;var e=requireIsFunction(),t=requireIsLength();return isArrayLike_1=function(r){return null!=r&&t(r.length)&&!e(r)}}function requireKeys(){if(hasRequiredKeys)return keys_1;hasRequiredKeys=1;var e=require_arrayLikeKeys(),t=require_baseKeys(),r=requireIsArrayLike();return keys_1=function(n){return r(n)?e(n):t(n)}}function require_baseAssign(){if(hasRequired_baseAssign)return _baseAssign;hasRequired_baseAssign=1;var e=require_copyObject(),t=requireKeys();return _baseAssign=function(r,n){return r&&e(n,t(n),r)}}function require_nativeKeysIn(){return hasRequired_nativeKeysIn?_nativeKeysIn:(hasRequired_nativeKeysIn=1,_nativeKeysIn=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t})}function require_baseKeysIn(){if(hasRequired_baseKeysIn)return _baseKeysIn;hasRequired_baseKeysIn=1;var e=requireIsObject(),t=require_isPrototype(),r=require_nativeKeysIn(),n=Object.prototype.hasOwnProperty;return _baseKeysIn=function(i){if(!e(i))return r(i);var o=t(i),s=[];for(var a in i)("constructor"!=a||!o&&n.call(i,a))&&s.push(a);return s}}function requireKeysIn(){if(hasRequiredKeysIn)return keysIn_1;hasRequiredKeysIn=1;var e=require_arrayLikeKeys(),t=require_baseKeysIn(),r=requireIsArrayLike();return keysIn_1=function(n){return r(n)?e(n,!0):t(n)}}function require_baseAssignIn(){if(hasRequired_baseAssignIn)return _baseAssignIn;hasRequired_baseAssignIn=1;var e=require_copyObject(),t=requireKeysIn();return _baseAssignIn=function(r,n){return r&&e(n,t(n),r)}}_nodeUtil.exports;var _cloneBuffer={exports:{}},hasRequired_cloneBuffer,_copyArray,hasRequired_copyArray,_arrayFilter,hasRequired_arrayFilter,stubArray_1,hasRequiredStubArray,_getSymbols,hasRequired_getSymbols,_copySymbols,hasRequired_copySymbols,_arrayPush,hasRequired_arrayPush,_getPrototype,hasRequired_getPrototype,_getSymbolsIn,hasRequired_getSymbolsIn,_copySymbolsIn,hasRequired_copySymbolsIn,_baseGetAllKeys,hasRequired_baseGetAllKeys,_getAllKeys,hasRequired_getAllKeys,_getAllKeysIn,hasRequired_getAllKeysIn,_DataView,hasRequired_DataView,_Promise,hasRequired_Promise,_Set,hasRequired_Set,_WeakMap,hasRequired_WeakMap,_getTag,hasRequired_getTag,_initCloneArray,hasRequired_initCloneArray,_Uint8Array,hasRequired_Uint8Array,_cloneArrayBuffer,hasRequired_cloneArrayBuffer,_cloneDataView,hasRequired_cloneDataView,_cloneRegExp,hasRequired_cloneRegExp,_cloneSymbol,hasRequired_cloneSymbol,_cloneTypedArray,hasRequired_cloneTypedArray,_initCloneByTag,hasRequired_initCloneByTag,_baseCreate,hasRequired_baseCreate,_initCloneObject,hasRequired_initCloneObject,_baseIsMap,hasRequired_baseIsMap,isMap_1,hasRequiredIsMap,_baseIsSet,hasRequired_baseIsSet,isSet_1,hasRequiredIsSet,_baseClone,hasRequired_baseClone,cloneDeep_1,hasRequiredCloneDeep,now_1,hasRequiredNow,debounce_1,hasRequiredDebounce;function require_cloneBuffer(){return hasRequired_cloneBuffer||(hasRequired_cloneBuffer=1,e=_cloneBuffer,t=_cloneBuffer.exports,r=require_root(),o=(i=(n=t&&!t.nodeType&&t)&&e&&!e.nodeType&&e)&&i.exports===n?r.Buffer:void 0,s=o?o.allocUnsafe:void 0,e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=s?s(r):new e.constructor(r);return e.copy(n),n}),_cloneBuffer.exports;var e,t,r,n,i,o,s}function require_copyArray(){return hasRequired_copyArray?_copyArray:(hasRequired_copyArray=1,_copyArray=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t})}function require_arrayFilter(){return hasRequired_arrayFilter?_arrayFilter:(hasRequired_arrayFilter=1,_arrayFilter=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[i++]=s)}return o})}function requireStubArray(){return hasRequiredStubArray?stubArray_1:(hasRequiredStubArray=1,stubArray_1=function(){return[]})}function require_getSymbols(){if(hasRequired_getSymbols)return _getSymbols;hasRequired_getSymbols=1;var e=require_arrayFilter(),t=requireStubArray(),r=Object.prototype.propertyIsEnumerable,n=Object.getOwnPropertySymbols;return _getSymbols=n?function(t){return null==t?[]:(t=Object(t),e(n(t),function(e){return r.call(t,e)}))}:t}function require_copySymbols(){if(hasRequired_copySymbols)return _copySymbols;hasRequired_copySymbols=1;var e=require_copyObject(),t=require_getSymbols();return _copySymbols=function(r,n){return e(r,t(r),n)}}function require_arrayPush(){return hasRequired_arrayPush?_arrayPush:(hasRequired_arrayPush=1,_arrayPush=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e})}function require_getPrototype(){if(hasRequired_getPrototype)return _getPrototype;hasRequired_getPrototype=1;var e=require_overArg()(Object.getPrototypeOf,Object);return _getPrototype=e}function require_getSymbolsIn(){if(hasRequired_getSymbolsIn)return _getSymbolsIn;hasRequired_getSymbolsIn=1;var e=require_arrayPush(),t=require_getPrototype(),r=require_getSymbols(),n=requireStubArray(),i=Object.getOwnPropertySymbols;return _getSymbolsIn=i?function(n){for(var i=[];n;)e(i,r(n)),n=t(n);return i}:n}function require_copySymbolsIn(){if(hasRequired_copySymbolsIn)return _copySymbolsIn;hasRequired_copySymbolsIn=1;var e=require_copyObject(),t=require_getSymbolsIn();return _copySymbolsIn=function(r,n){return e(r,t(r),n)}}function require_baseGetAllKeys(){if(hasRequired_baseGetAllKeys)return _baseGetAllKeys;hasRequired_baseGetAllKeys=1;var e=require_arrayPush(),t=requireIsArray();return _baseGetAllKeys=function(r,n,i){var o=n(r);return t(r)?o:e(o,i(r))}}function require_getAllKeys(){if(hasRequired_getAllKeys)return _getAllKeys;hasRequired_getAllKeys=1;var e=require_baseGetAllKeys(),t=require_getSymbols(),r=requireKeys();return _getAllKeys=function(n){return e(n,r,t)}}function require_getAllKeysIn(){if(hasRequired_getAllKeysIn)return _getAllKeysIn;hasRequired_getAllKeysIn=1;var e=require_baseGetAllKeys(),t=require_getSymbolsIn(),r=requireKeysIn();return _getAllKeysIn=function(n){return e(n,r,t)}}function require_DataView(){if(hasRequired_DataView)return _DataView;hasRequired_DataView=1;var e=require_getNative()(require_root(),"DataView");return _DataView=e}function require_Promise(){if(hasRequired_Promise)return _Promise;hasRequired_Promise=1;var e=require_getNative()(require_root(),"Promise");return _Promise=e}function require_Set(){if(hasRequired_Set)return _Set;hasRequired_Set=1;var e=require_getNative()(require_root(),"Set");return _Set=e}function require_WeakMap(){if(hasRequired_WeakMap)return _WeakMap;hasRequired_WeakMap=1;var e=require_getNative()(require_root(),"WeakMap");return _WeakMap=e}function require_getTag(){if(hasRequired_getTag)return _getTag;hasRequired_getTag=1;var e=require_DataView(),t=require_Map(),r=require_Promise(),n=require_Set(),i=require_WeakMap(),o=require_baseGetTag(),s=require_toSource(),a="[object Map]",l="[object Promise]",c="[object Set]",u="[object WeakMap]",d="[object DataView]",p=s(e),h=s(t),f=s(r),m=s(n),g=s(i),b=o;return(e&&b(new e(new ArrayBuffer(1)))!=d||t&&b(new t)!=a||r&&b(r.resolve())!=l||n&&b(new n)!=c||i&&b(new i)!=u)&&(b=function(e){var t=o(e),r="[object Object]"==t?e.constructor:void 0,n=r?s(r):"";if(n)switch(n){case p:return d;case h:return a;case f:return l;case m:return c;case g:return u}return t}),_getTag=b}function require_initCloneArray(){if(hasRequired_initCloneArray)return _initCloneArray;hasRequired_initCloneArray=1;var e=Object.prototype.hasOwnProperty;return _initCloneArray=function(t){var r=t.length,n=new t.constructor(r);return r&&"string"==typeof t[0]&&e.call(t,"index")&&(n.index=t.index,n.input=t.input),n}}function require_Uint8Array(){if(hasRequired_Uint8Array)return _Uint8Array;hasRequired_Uint8Array=1;var e=require_root().Uint8Array;return _Uint8Array=e}function require_cloneArrayBuffer(){if(hasRequired_cloneArrayBuffer)return _cloneArrayBuffer;hasRequired_cloneArrayBuffer=1;var e=require_Uint8Array();return _cloneArrayBuffer=function(t){var r=new t.constructor(t.byteLength);return new e(r).set(new e(t)),r}}function require_cloneDataView(){if(hasRequired_cloneDataView)return _cloneDataView;hasRequired_cloneDataView=1;var e=require_cloneArrayBuffer();return _cloneDataView=function(t,r){var n=r?e(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}}function require_cloneRegExp(){if(hasRequired_cloneRegExp)return _cloneRegExp;hasRequired_cloneRegExp=1;var e=/\w*$/;return _cloneRegExp=function(t){var r=new t.constructor(t.source,e.exec(t));return r.lastIndex=t.lastIndex,r}}function require_cloneSymbol(){if(hasRequired_cloneSymbol)return _cloneSymbol;hasRequired_cloneSymbol=1;var e=require_Symbol(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;return _cloneSymbol=function(e){return r?Object(r.call(e)):{}}}function require_cloneTypedArray(){if(hasRequired_cloneTypedArray)return _cloneTypedArray;hasRequired_cloneTypedArray=1;var e=require_cloneArrayBuffer();return _cloneTypedArray=function(t,r){var n=r?e(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}}function require_initCloneByTag(){if(hasRequired_initCloneByTag)return _initCloneByTag;hasRequired_initCloneByTag=1;var e=require_cloneArrayBuffer(),t=require_cloneDataView(),r=require_cloneRegExp(),n=require_cloneSymbol(),i=require_cloneTypedArray();return _initCloneByTag=function(o,s,a){var l=o.constructor;switch(s){case"[object ArrayBuffer]":return e(o);case"[object Boolean]":case"[object Date]":return new l(+o);case"[object DataView]":return t(o,a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return i(o,a);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(o);case"[object RegExp]":return r(o);case"[object Symbol]":return n(o)}}}function require_baseCreate(){if(hasRequired_baseCreate)return _baseCreate;hasRequired_baseCreate=1;var e=requireIsObject(),t=Object.create;return _baseCreate=function(){function r(){}return function(n){if(!e(n))return{};if(t)return t(n);r.prototype=n;var i=new r;return r.prototype=void 0,i}}()}function require_initCloneObject(){if(hasRequired_initCloneObject)return _initCloneObject;hasRequired_initCloneObject=1;var e=require_baseCreate(),t=require_getPrototype(),r=require_isPrototype();return _initCloneObject=function(n){return"function"!=typeof n.constructor||r(n)?{}:e(t(n))}}function require_baseIsMap(){if(hasRequired_baseIsMap)return _baseIsMap;hasRequired_baseIsMap=1;var e=require_getTag(),t=requireIsObjectLike();return _baseIsMap=function(r){return t(r)&&"[object Map]"==e(r)}}function requireIsMap(){if(hasRequiredIsMap)return isMap_1;hasRequiredIsMap=1;var e=require_baseIsMap(),t=require_baseUnary(),r=require_nodeUtil(),n=r&&r.isMap,i=n?t(n):e;return isMap_1=i}function require_baseIsSet(){if(hasRequired_baseIsSet)return _baseIsSet;hasRequired_baseIsSet=1;var e=require_getTag(),t=requireIsObjectLike();return _baseIsSet=function(r){return t(r)&&"[object Set]"==e(r)}}function requireIsSet(){if(hasRequiredIsSet)return isSet_1;hasRequiredIsSet=1;var e=require_baseIsSet(),t=require_baseUnary(),r=require_nodeUtil(),n=r&&r.isSet,i=n?t(n):e;return isSet_1=i}function require_baseClone(){if(hasRequired_baseClone)return _baseClone;hasRequired_baseClone=1;var e=require_Stack(),t=require_arrayEach(),r=require_assignValue(),n=require_baseAssign(),i=require_baseAssignIn(),o=require_cloneBuffer(),s=require_copyArray(),a=require_copySymbols(),l=require_copySymbolsIn(),c=require_getAllKeys(),u=require_getAllKeysIn(),d=require_getTag(),p=require_initCloneArray(),h=require_initCloneByTag(),f=require_initCloneObject(),m=requireIsArray(),g=requireIsBuffer(),b=requireIsMap(),y=requireIsObject(),T=requireIsSet(),E=requireKeys(),O=requireKeysIn(),S="[object Arguments]",x="[object Function]",v="[object Object]",_={};return _[S]=_["[object Array]"]=_["[object ArrayBuffer]"]=_["[object DataView]"]=_["[object Boolean]"]=_["[object Date]"]=_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Map]"]=_["[object Number]"]=_[v]=_["[object RegExp]"]=_["[object Set]"]=_["[object String]"]=_["[object Symbol]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_["[object Error]"]=_[x]=_["[object WeakMap]"]=!1,_baseClone=function A(C,w,k,D,I,R){var N,P=1&w,M=2&w,$=4&w;if(k&&(N=I?k(C,D,I,R):k(C)),void 0!==N)return N;if(!y(C))return C;var L=m(C);if(L){if(N=p(C),!P)return s(C,N)}else{var B=d(C),F=B==x||"[object GeneratorFunction]"==B;if(g(C))return o(C,P);if(B==v||B==S||F&&!I){if(N=M||F?{}:f(C),!P)return M?l(C,i(N,C)):a(C,n(N,C))}else{if(!_[B])return I?C:{};N=h(C,B,P)}}R||(R=new e);var q=R.get(C);if(q)return q;R.set(C,N),T(C)?C.forEach(function(e){N.add(A(e,w,k,e,C,R))}):b(C)&&C.forEach(function(e,t){N.set(t,A(e,w,k,t,C,R))});var j=L?void 0:($?M?u:c:M?O:E)(C);return t(j||C,function(e,t){j&&(e=C[t=e]),r(N,t,A(e,w,k,t,C,R))}),N}}function requireCloneDeep(){if(hasRequiredCloneDeep)return cloneDeep_1;hasRequiredCloneDeep=1;var e=require_baseClone();return cloneDeep_1=function(t){return e(t,5)}}function requireNow(){if(hasRequiredNow)return now_1;hasRequiredNow=1;var e=require_root();return now_1=function(){return e.Date.now()}}function requireDebounce(){if(hasRequiredDebounce)return debounce_1;hasRequiredDebounce=1;var e=requireIsObject(),t=requireNow(),r=requireToNumber(),n=Math.max,i=Math.min;return debounce_1=function(o,s,a){var l,c,u,d,p,h,f=0,m=!1,g=!1,b=!0;if("function"!=typeof o)throw new TypeError("Expected a function");function y(e){var t=l,r=c;return l=c=void 0,f=e,d=o.apply(r,t)}function T(e){var t=e-h;return void 0===h||t>=s||t<0||g&&e-f>=u}function E(){var e=t();if(T(e))return O(e);p=setTimeout(E,function(e){var t=s-(e-h);return g?i(t,u-(e-f)):t}(e))}function O(e){return p=void 0,b&&l?y(e):(l=c=void 0,d)}function S(){var e=t(),r=T(e);if(l=arguments,c=this,h=e,r){if(void 0===p)return function(e){return f=e,p=setTimeout(E,s),m?y(e):d}(h);if(g)return clearTimeout(p),p=setTimeout(E,s),y(h)}return void 0===p&&(p=setTimeout(E,s)),d}return s=r(s)||0,e(a)&&(m=!!a.leading,u=(g="maxWait"in a)?n(r(a.maxWait)||0,s):u,b="trailing"in a?!!a.trailing:b),S.cancel=function(){void 0!==p&&clearTimeout(p),f=0,l=h=c=p=void 0},S.flush=function(){return void 0===p?d:O(t())},S},debounce_1}_cloneBuffer.exports,requireCloneDeep();var debounceExports=requireDebounce();const debounce=getDefaultExportFromCjs(debounceExports);var _arrayAggregator,hasRequired_arrayAggregator,_createBaseFor,hasRequired_createBaseFor,_baseFor,hasRequired_baseFor,_baseForOwn,hasRequired_baseForOwn,_createBaseEach,hasRequired_createBaseEach,_baseEach,hasRequired_baseEach,_baseAggregator,hasRequired_baseAggregator,_setCacheAdd,hasRequired_setCacheAdd,_setCacheHas,hasRequired_setCacheHas,_SetCache,hasRequired_SetCache,_arraySome,hasRequired_arraySome,_cacheHas,hasRequired_cacheHas,_equalArrays,hasRequired_equalArrays,_mapToArray,hasRequired_mapToArray,_setToArray,hasRequired_setToArray,_equalByTag,hasRequired_equalByTag,_equalObjects,hasRequired_equalObjects,_baseIsEqualDeep,hasRequired_baseIsEqualDeep,_baseIsEqual,hasRequired_baseIsEqual,_baseIsMatch,hasRequired_baseIsMatch,_isStrictComparable,hasRequired_isStrictComparable,_getMatchData,hasRequired_getMatchData,_matchesStrictComparable,hasRequired_matchesStrictComparable,_baseMatches,hasRequired_baseMatches,_isKey,hasRequired_isKey,memoize_1,hasRequiredMemoize,_memoizeCapped,hasRequired_memoizeCapped,_stringToPath,hasRequired_stringToPath,_castPath,hasRequired_castPath,_toKey,hasRequired_toKey,_baseGet,hasRequired_baseGet,get_1,hasRequiredGet$1,_baseHasIn,hasRequired_baseHasIn,_hasPath,hasRequired_hasPath,hasIn_1,hasRequiredHasIn,_baseMatchesProperty,hasRequired_baseMatchesProperty,identity_1,hasRequiredIdentity$1,_baseProperty,hasRequired_baseProperty,_basePropertyDeep,hasRequired_basePropertyDeep,property_1,hasRequiredProperty,_baseIteratee,hasRequired_baseIteratee,_createAggregator,hasRequired_createAggregator,groupBy_1,hasRequiredGroupBy;function require_arrayAggregator(){return hasRequired_arrayAggregator?_arrayAggregator:(hasRequired_arrayAggregator=1,_arrayAggregator=function(e,t,r,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(n,s,r(s),e)}return n})}function require_createBaseFor(){return hasRequired_createBaseFor?_createBaseFor:(hasRequired_createBaseFor=1,_createBaseFor=function(e){return function(t,r,n){for(var i=-1,o=Object(t),s=n(t),a=s.length;a--;){var l=s[e?a:++i];if(!1===r(o[l],l,o))break}return t}})}function require_baseFor(){if(hasRequired_baseFor)return _baseFor;hasRequired_baseFor=1;var e=require_createBaseFor()();return _baseFor=e}function require_baseForOwn(){if(hasRequired_baseForOwn)return _baseForOwn;hasRequired_baseForOwn=1;var e=require_baseFor(),t=requireKeys();return _baseForOwn=function(r,n){return r&&e(r,n,t)}}function require_createBaseEach(){if(hasRequired_createBaseEach)return _createBaseEach;hasRequired_createBaseEach=1;var e=requireIsArrayLike();return _createBaseEach=function(t,r){return function(n,i){if(null==n)return n;if(!e(n))return t(n,i);for(var o=n.length,s=r?o:-1,a=Object(n);(r?s--:++s<o)&&!1!==i(a[s],s,a););return n}}}function require_baseEach(){if(hasRequired_baseEach)return _baseEach;hasRequired_baseEach=1;var e=require_baseForOwn(),t=require_createBaseEach()(e);return _baseEach=t}function require_baseAggregator(){if(hasRequired_baseAggregator)return _baseAggregator;hasRequired_baseAggregator=1;var e=require_baseEach();return _baseAggregator=function(t,r,n,i){return e(t,function(e,t,o){r(i,e,n(e),o)}),i}}function require_setCacheAdd(){return hasRequired_setCacheAdd?_setCacheAdd:(hasRequired_setCacheAdd=1,_setCacheAdd=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this})}function require_setCacheHas(){return hasRequired_setCacheHas?_setCacheHas:(hasRequired_setCacheHas=1,_setCacheHas=function(e){return this.__data__.has(e)})}function require_SetCache(){if(hasRequired_SetCache)return _SetCache;hasRequired_SetCache=1;var e=require_MapCache(),t=require_setCacheAdd(),r=require_setCacheHas();function n(t){var r=-1,n=null==t?0:t.length;for(this.__data__=new e;++r<n;)this.add(t[r])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,_SetCache=n}function require_arraySome(){return hasRequired_arraySome?_arraySome:(hasRequired_arraySome=1,_arraySome=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1})}function require_cacheHas(){return hasRequired_cacheHas?_cacheHas:(hasRequired_cacheHas=1,_cacheHas=function(e,t){return e.has(t)})}function require_equalArrays(){if(hasRequired_equalArrays)return _equalArrays;hasRequired_equalArrays=1;var e=require_SetCache(),t=require_arraySome(),r=require_cacheHas();return _equalArrays=function(n,i,o,s,a,l){var c=1&o,u=n.length,d=i.length;if(u!=d&&!(c&&d>u))return!1;var p=l.get(n),h=l.get(i);if(p&&h)return p==i&&h==n;var f=-1,m=!0,g=2&o?new e:void 0;for(l.set(n,i),l.set(i,n);++f<u;){var b=n[f],y=i[f];if(s)var T=c?s(y,b,f,i,n,l):s(b,y,f,n,i,l);if(void 0!==T){if(T)continue;m=!1;break}if(g){if(!t(i,function(e,t){if(!r(g,t)&&(b===e||a(b,e,o,s,l)))return g.push(t)})){m=!1;break}}else if(b!==y&&!a(b,y,o,s,l)){m=!1;break}}return l.delete(n),l.delete(i),m}}function require_mapToArray(){return hasRequired_mapToArray?_mapToArray:(hasRequired_mapToArray=1,_mapToArray=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r})}function require_setToArray(){return hasRequired_setToArray?_setToArray:(hasRequired_setToArray=1,_setToArray=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r})}function require_equalByTag(){if(hasRequired_equalByTag)return _equalByTag;hasRequired_equalByTag=1;var e=require_Symbol(),t=require_Uint8Array(),r=requireEq(),n=require_equalArrays(),i=require_mapToArray(),o=require_setToArray(),s=e?e.prototype:void 0,a=s?s.valueOf:void 0;return _equalByTag=function(e,s,l,c,u,d,p){switch(l){case"[object DataView]":if(e.byteLength!=s.byteLength||e.byteOffset!=s.byteOffset)return!1;e=e.buffer,s=s.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=s.byteLength||!d(new t(e),new t(s)));case"[object Boolean]":case"[object Date]":case"[object Number]":return r(+e,+s);case"[object Error]":return e.name==s.name&&e.message==s.message;case"[object RegExp]":case"[object String]":return e==s+"";case"[object Map]":var h=i;case"[object Set]":var f=1&c;if(h||(h=o),e.size!=s.size&&!f)return!1;var m=p.get(e);if(m)return m==s;c|=2,p.set(e,s);var g=n(h(e),h(s),c,u,d,p);return p.delete(e),g;case"[object Symbol]":if(a)return a.call(e)==a.call(s)}return!1}}function require_equalObjects(){if(hasRequired_equalObjects)return _equalObjects;hasRequired_equalObjects=1;var e=require_getAllKeys(),t=Object.prototype.hasOwnProperty;return _equalObjects=function(r,n,i,o,s,a){var l=1&i,c=e(r),u=c.length;if(u!=e(n).length&&!l)return!1;for(var d=u;d--;){var p=c[d];if(!(l?p in n:t.call(n,p)))return!1}var h=a.get(r),f=a.get(n);if(h&&f)return h==n&&f==r;var m=!0;a.set(r,n),a.set(n,r);for(var g=l;++d<u;){var b=r[p=c[d]],y=n[p];if(o)var T=l?o(y,b,p,n,r,a):o(b,y,p,r,n,a);if(!(void 0===T?b===y||s(b,y,i,o,a):T)){m=!1;break}g||(g="constructor"==p)}if(m&&!g){var E=r.constructor,O=n.constructor;E==O||!("constructor"in r)||!("constructor"in n)||"function"==typeof E&&E instanceof E&&"function"==typeof O&&O instanceof O||(m=!1)}return a.delete(r),a.delete(n),m}}function require_baseIsEqualDeep(){if(hasRequired_baseIsEqualDeep)return _baseIsEqualDeep;hasRequired_baseIsEqualDeep=1;var e=require_Stack(),t=require_equalArrays(),r=require_equalByTag(),n=require_equalObjects(),i=require_getTag(),o=requireIsArray(),s=requireIsBuffer(),a=requireIsTypedArray(),l="[object Arguments]",c="[object Array]",u="[object Object]",d=Object.prototype.hasOwnProperty;return _baseIsEqualDeep=function(p,h,f,m,g,b){var y=o(p),T=o(h),E=y?c:i(p),O=T?c:i(h),S=(E=E==l?u:E)==u,x=(O=O==l?u:O)==u,v=E==O;if(v&&s(p)){if(!s(h))return!1;y=!0,S=!1}if(v&&!S)return b||(b=new e),y||a(p)?t(p,h,f,m,g,b):r(p,h,E,f,m,g,b);if(!(1&f)){var _=S&&d.call(p,"__wrapped__"),A=x&&d.call(h,"__wrapped__");if(_||A){var C=_?p.value():p,w=A?h.value():h;return b||(b=new e),g(C,w,f,m,b)}}return!!v&&(b||(b=new e),n(p,h,f,m,g,b))}}function require_baseIsEqual(){if(hasRequired_baseIsEqual)return _baseIsEqual;hasRequired_baseIsEqual=1;var e=require_baseIsEqualDeep(),t=requireIsObjectLike();return _baseIsEqual=function r(n,i,o,s,a){return n===i||(null==n||null==i||!t(n)&&!t(i)?n!=n&&i!=i:e(n,i,o,s,r,a))}}function require_baseIsMatch(){if(hasRequired_baseIsMatch)return _baseIsMatch;hasRequired_baseIsMatch=1;var e=require_Stack(),t=require_baseIsEqual();return _baseIsMatch=function(r,n,i,o){var s=i.length,a=s,l=!o;if(null==r)return!a;for(r=Object(r);s--;){var c=i[s];if(l&&c[2]?c[1]!==r[c[0]]:!(c[0]in r))return!1}for(;++s<a;){var u=(c=i[s])[0],d=r[u],p=c[1];if(l&&c[2]){if(void 0===d&&!(u in r))return!1}else{var h=new e;if(o)var f=o(d,p,u,r,n,h);if(!(void 0===f?t(p,d,3,o,h):f))return!1}}return!0}}function require_isStrictComparable(){if(hasRequired_isStrictComparable)return _isStrictComparable;hasRequired_isStrictComparable=1;var e=requireIsObject();return _isStrictComparable=function(t){return t==t&&!e(t)}}function require_getMatchData(){if(hasRequired_getMatchData)return _getMatchData;hasRequired_getMatchData=1;var e=require_isStrictComparable(),t=requireKeys();return _getMatchData=function(r){for(var n=t(r),i=n.length;i--;){var o=n[i],s=r[o];n[i]=[o,s,e(s)]}return n}}function require_matchesStrictComparable(){return hasRequired_matchesStrictComparable?_matchesStrictComparable:(hasRequired_matchesStrictComparable=1,_matchesStrictComparable=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}})}function require_baseMatches(){if(hasRequired_baseMatches)return _baseMatches;hasRequired_baseMatches=1;var e=require_baseIsMatch(),t=require_getMatchData(),r=require_matchesStrictComparable();return _baseMatches=function(n){var i=t(n);return 1==i.length&&i[0][2]?r(i[0][0],i[0][1]):function(t){return t===n||e(t,n,i)}}}function require_isKey(){if(hasRequired_isKey)return _isKey;hasRequired_isKey=1;var e=requireIsArray(),t=requireIsSymbol(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;return _isKey=function(i,o){if(e(i))return!1;var s=typeof i;return!("number"!=s&&"symbol"!=s&&"boolean"!=s&&null!=i&&!t(i))||n.test(i)||!r.test(i)||null!=o&&i in Object(o)}}function requireMemoize(){if(hasRequiredMemoize)return memoize_1;hasRequiredMemoize=1;var e=require_MapCache();function t(r,n){if("function"!=typeof r||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var i=function(){var e=arguments,t=n?n.apply(this,e):e[0],o=i.cache;if(o.has(t))return o.get(t);var s=r.apply(this,e);return i.cache=o.set(t,s)||o,s};return i.cache=new(t.Cache||e),i}return t.Cache=e,memoize_1=t}function require_memoizeCapped(){if(hasRequired_memoizeCapped)return _memoizeCapped;hasRequired_memoizeCapped=1;var e=requireMemoize();return _memoizeCapped=function(t){var r=e(t,function(e){return 500===n.size&&n.clear(),e}),n=r.cache;return r}}function require_stringToPath(){if(hasRequired_stringToPath)return _stringToPath;hasRequired_stringToPath=1;var e=require_memoizeCapped(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(t,function(e,t,i,o){n.push(i?o.replace(r,"$1"):t||e)}),n});return _stringToPath=n}function require_castPath(){if(hasRequired_castPath)return _castPath;hasRequired_castPath=1;var e=requireIsArray(),t=require_isKey(),r=require_stringToPath(),n=requireToString();return _castPath=function(i,o){return e(i)?i:t(i,o)?[i]:r(n(i))}}function require_toKey(){if(hasRequired_toKey)return _toKey;hasRequired_toKey=1;var e=requireIsSymbol();return _toKey=function(t){if("string"==typeof t||e(t))return t;var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}}function require_baseGet(){if(hasRequired_baseGet)return _baseGet;hasRequired_baseGet=1;var e=require_castPath(),t=require_toKey();return _baseGet=function(r,n){for(var i=0,o=(n=e(n,r)).length;null!=r&&i<o;)r=r[t(n[i++])];return i&&i==o?r:void 0}}function requireGet$1(){if(hasRequiredGet$1)return get_1;hasRequiredGet$1=1;var e=require_baseGet();return get_1=function(t,r,n){var i=null==t?void 0:e(t,r);return void 0===i?n:i}}function require_baseHasIn(){return hasRequired_baseHasIn?_baseHasIn:(hasRequired_baseHasIn=1,_baseHasIn=function(e,t){return null!=e&&t in Object(e)})}function require_hasPath(){if(hasRequired_hasPath)return _hasPath;hasRequired_hasPath=1;var e=require_castPath(),t=requireIsArguments(),r=requireIsArray(),n=require_isIndex(),i=requireIsLength(),o=require_toKey();return _hasPath=function(s,a,l){for(var c=-1,u=(a=e(a,s)).length,d=!1;++c<u;){var p=o(a[c]);if(!(d=null!=s&&l(s,p)))break;s=s[p]}return d||++c!=u?d:!!(u=null==s?0:s.length)&&i(u)&&n(p,u)&&(r(s)||t(s))}}function requireHasIn(){if(hasRequiredHasIn)return hasIn_1;hasRequiredHasIn=1;var e=require_baseHasIn(),t=require_hasPath();return hasIn_1=function(r,n){return null!=r&&t(r,n,e)}}function require_baseMatchesProperty(){if(hasRequired_baseMatchesProperty)return _baseMatchesProperty;hasRequired_baseMatchesProperty=1;var e=require_baseIsEqual(),t=requireGet$1(),r=requireHasIn(),n=require_isKey(),i=require_isStrictComparable(),o=require_matchesStrictComparable(),s=require_toKey();return _baseMatchesProperty=function(a,l){return n(a)&&i(l)?o(s(a),l):function(n){var i=t(n,a);return void 0===i&&i===l?r(n,a):e(l,i,3)}}}function requireIdentity$1(){return hasRequiredIdentity$1?identity_1:(hasRequiredIdentity$1=1,identity_1=function(e){return e})}function require_baseProperty(){return hasRequired_baseProperty?_baseProperty:(hasRequired_baseProperty=1,_baseProperty=function(e){return function(t){return null==t?void 0:t[e]}})}function require_basePropertyDeep(){if(hasRequired_basePropertyDeep)return _basePropertyDeep;hasRequired_basePropertyDeep=1;var e=require_baseGet();return _basePropertyDeep=function(t){return function(r){return e(r,t)}}}function requireProperty(){if(hasRequiredProperty)return property_1;hasRequiredProperty=1;var e=require_baseProperty(),t=require_basePropertyDeep(),r=require_isKey(),n=require_toKey();return property_1=function(i){return r(i)?e(n(i)):t(i)}}function require_baseIteratee(){if(hasRequired_baseIteratee)return _baseIteratee;hasRequired_baseIteratee=1;var e=require_baseMatches(),t=require_baseMatchesProperty(),r=requireIdentity$1(),n=requireIsArray(),i=requireProperty();return _baseIteratee=function(o){return"function"==typeof o?o:null==o?r:"object"==typeof o?n(o)?t(o[0],o[1]):e(o):i(o)}}function require_createAggregator(){if(hasRequired_createAggregator)return _createAggregator;hasRequired_createAggregator=1;var e=require_arrayAggregator(),t=require_baseAggregator(),r=require_baseIteratee(),n=requireIsArray();return _createAggregator=function(i,o){return function(s,a){var l=n(s)?e:t,c=o?o():{};return l(s,i,r(a,2),c)}}}function requireGroupBy(){if(hasRequiredGroupBy)return groupBy_1;hasRequiredGroupBy=1;var e=require_baseAssignValue(),t=require_createAggregator(),r=Object.prototype.hasOwnProperty,n=t(function(t,n,i){r.call(t,i)?t[i].push(n):e(t,i,[n])});return groupBy_1=n}var groupByExports=requireGroupBy();const groupBy=getDefaultExportFromCjs(groupByExports);var isEqual_1,hasRequiredIsEqual;function requireIsEqual(){if(hasRequiredIsEqual)return isEqual_1;hasRequiredIsEqual=1;var e=require_baseIsEqual();return isEqual_1=function(t,r){return e(t,r)}}var isEqualExports=requireIsEqual();const isEqual$4=getDefaultExportFromCjs(isEqualExports);var isFunctionExports=requireIsFunction();const isFunction$1=getDefaultExportFromCjs(isFunctionExports);var isString_1,hasRequiredIsString;function requireIsString(){if(hasRequiredIsString)return isString_1;hasRequiredIsString=1;var e=require_baseGetTag(),t=requireIsArray(),r=requireIsObjectLike();return isString_1=function(n){return"string"==typeof n||!t(n)&&r(n)&&"[object String]"==e(n)}}var isStringExports=requireIsString();const isString$1=getDefaultExportFromCjs(isStringExports);var noop_1,hasRequiredNoop;function requireNoop(){return hasRequiredNoop?noop_1:(hasRequiredNoop=1,noop_1=function(){})}var noopExports=requireNoop();const noop$8=getDefaultExportFromCjs(noopExports);var last_1,hasRequiredLast,_parent,hasRequired_parent,_baseUnset,hasRequired_baseUnset,isPlainObject_1,hasRequiredIsPlainObject$1,_customOmitClone,hasRequired_customOmitClone,_isFlattenable,hasRequired_isFlattenable,_baseFlatten,hasRequired_baseFlatten,flatten_1,hasRequiredFlatten,_apply,hasRequired_apply,_overRest,hasRequired_overRest,constant_1,hasRequiredConstant,_baseSetToString,hasRequired_baseSetToString,_shortOut,hasRequired_shortOut,_setToString,hasRequired_setToString,_flatRest,hasRequired_flatRest,omit_1,hasRequiredOmit,_baseRest,hasRequired_baseRest,_metaMap,hasRequired_metaMap,_baseSetData,hasRequired_baseSetData,_createCtor,hasRequired_createCtor,_createBind,hasRequired_createBind,_composeArgs,hasRequired_composeArgs,_composeArgsRight,hasRequired_composeArgsRight,_countHolders,hasRequired_countHolders,_baseLodash,hasRequired_baseLodash,_LazyWrapper,hasRequired_LazyWrapper,_getData,hasRequired_getData,_realNames,hasRequired_realNames,_getFuncName,hasRequired_getFuncName,_LodashWrapper,hasRequired_LodashWrapper,_wrapperClone,hasRequired_wrapperClone,wrapperLodash,hasRequiredWrapperLodash,_isLaziable,hasRequired_isLaziable,_setData,hasRequired_setData,_getWrapDetails,hasRequired_getWrapDetails,_insertWrapDetails,hasRequired_insertWrapDetails,_baseFindIndex,hasRequired_baseFindIndex,_baseIsNaN,hasRequired_baseIsNaN,_strictIndexOf,hasRequired_strictIndexOf,_baseIndexOf,hasRequired_baseIndexOf,_arrayIncludes,hasRequired_arrayIncludes,_updateWrapDetails,hasRequired_updateWrapDetails,_setWrapToString,hasRequired_setWrapToString,_createRecurry,hasRequired_createRecurry,_getHolder,hasRequired_getHolder,_reorder,hasRequired_reorder,_replaceHolders,hasRequired_replaceHolders,_createHybrid,hasRequired_createHybrid,_createCurry,hasRequired_createCurry,_createPartial,hasRequired_createPartial,_mergeData,hasRequired_mergeData,toFinite_1,hasRequiredToFinite,toInteger_1,hasRequiredToInteger,_createWrap,hasRequired_createWrap,partial_1,hasRequiredPartial,_baseRange,hasRequired_baseRange,_isIterateeCall,hasRequired_isIterateeCall,_createRange,hasRequired_createRange,range_1,hasRequiredRange$1;function requireLast(){return hasRequiredLast?last_1:(hasRequiredLast=1,last_1=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0})}function require_parent(){if(hasRequired_parent)return _parent;hasRequired_parent=1;var e=require_baseGet(),t=require_baseSlice();return _parent=function(r,n){return n.length<2?r:e(r,t(n,0,-1))}}function require_baseUnset(){if(hasRequired_baseUnset)return _baseUnset;hasRequired_baseUnset=1;var e=require_castPath(),t=requireLast(),r=require_parent(),n=require_toKey();return _baseUnset=function(i,o){return o=e(o,i),null==(i=r(i,o))||delete i[n(t(o))]}}function requireIsPlainObject$1(){if(hasRequiredIsPlainObject$1)return isPlainObject_1;hasRequiredIsPlainObject$1=1;var e=require_baseGetTag(),t=require_getPrototype(),r=requireIsObjectLike(),n=Function.prototype,i=Object.prototype,o=n.toString,s=i.hasOwnProperty,a=o.call(Object);return isPlainObject_1=function(n){if(!r(n)||"[object Object]"!=e(n))return!1;var i=t(n);if(null===i)return!0;var l=s.call(i,"constructor")&&i.constructor;return"function"==typeof l&&l instanceof l&&o.call(l)==a}}function require_customOmitClone(){if(hasRequired_customOmitClone)return _customOmitClone;hasRequired_customOmitClone=1;var e=requireIsPlainObject$1();return _customOmitClone=function(t){return e(t)?void 0:t}}function require_isFlattenable(){if(hasRequired_isFlattenable)return _isFlattenable;hasRequired_isFlattenable=1;var e=require_Symbol(),t=requireIsArguments(),r=requireIsArray(),n=e?e.isConcatSpreadable:void 0;return _isFlattenable=function(e){return r(e)||t(e)||!!(n&&e&&e[n])}}function require_baseFlatten(){if(hasRequired_baseFlatten)return _baseFlatten;hasRequired_baseFlatten=1;var e=require_arrayPush(),t=require_isFlattenable();return _baseFlatten=function r(n,i,o,s,a){var l=-1,c=n.length;for(o||(o=t),a||(a=[]);++l<c;){var u=n[l];i>0&&o(u)?i>1?r(u,i-1,o,s,a):e(a,u):s||(a[a.length]=u)}return a}}function requireFlatten(){if(hasRequiredFlatten)return flatten_1;hasRequiredFlatten=1;var e=require_baseFlatten();return flatten_1=function(t){return null!=t&&t.length?e(t,1):[]}}function require_apply(){return hasRequired_apply?_apply:(hasRequired_apply=1,_apply=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)})}function require_overRest(){if(hasRequired_overRest)return _overRest;hasRequired_overRest=1;var e=require_apply(),t=Math.max;return _overRest=function(r,n,i){return n=t(void 0===n?r.length-1:n,0),function(){for(var o=arguments,s=-1,a=t(o.length-n,0),l=Array(a);++s<a;)l[s]=o[n+s];s=-1;for(var c=Array(n+1);++s<n;)c[s]=o[s];return c[n]=i(l),e(r,this,c)}},_overRest}function requireConstant(){return hasRequiredConstant?constant_1:(hasRequiredConstant=1,constant_1=function(e){return function(){return e}})}function require_baseSetToString(){if(hasRequired_baseSetToString)return _baseSetToString;hasRequired_baseSetToString=1;var e=requireConstant(),t=require_defineProperty(),r=requireIdentity$1();return _baseSetToString=t?function(r,n){return t(r,"toString",{configurable:!0,enumerable:!1,value:e(n),writable:!0})}:r}function require_shortOut(){if(hasRequired_shortOut)return _shortOut;hasRequired_shortOut=1;var e=Date.now;return _shortOut=function(t){var r=0,n=0;return function(){var i=e(),o=16-(i-n);if(n=i,o>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}},_shortOut}function require_setToString(){if(hasRequired_setToString)return _setToString;hasRequired_setToString=1;var e=require_baseSetToString(),t=require_shortOut()(e);return _setToString=t}function require_flatRest(){if(hasRequired_flatRest)return _flatRest;hasRequired_flatRest=1;var e=requireFlatten(),t=require_overRest(),r=require_setToString();return _flatRest=function(n){return r(t(n,void 0,e),n+"")}}function requireOmit(){if(hasRequiredOmit)return omit_1;hasRequiredOmit=1;var e=require_arrayMap(),t=require_baseClone(),r=require_baseUnset(),n=require_castPath(),i=require_copyObject(),o=require_customOmitClone(),s=require_flatRest(),a=require_getAllKeysIn(),l=s(function(s,l){var c={};if(null==s)return c;var u=!1;l=e(l,function(e){return e=n(e,s),u||(u=e.length>1),e}),i(s,a(s),c),u&&(c=t(c,7,o));for(var d=l.length;d--;)r(c,l[d]);return c});return omit_1=l}function require_baseRest(){if(hasRequired_baseRest)return _baseRest;hasRequired_baseRest=1;var e=requireIdentity$1(),t=require_overRest(),r=require_setToString();return _baseRest=function(n,i){return r(t(n,i,e),n+"")}}function require_metaMap(){if(hasRequired_metaMap)return _metaMap;hasRequired_metaMap=1;var e=require_WeakMap(),t=e&&new e;return _metaMap=t}function require_baseSetData(){if(hasRequired_baseSetData)return _baseSetData;hasRequired_baseSetData=1;var e=requireIdentity$1(),t=require_metaMap();return _baseSetData=t?function(e,r){return t.set(e,r),e}:e}function require_createCtor(){if(hasRequired_createCtor)return _createCtor;hasRequired_createCtor=1;var e=require_baseCreate(),t=requireIsObject();return _createCtor=function(r){return function(){var n=arguments;switch(n.length){case 0:return new r;case 1:return new r(n[0]);case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[1],n[2]);case 4:return new r(n[0],n[1],n[2],n[3]);case 5:return new r(n[0],n[1],n[2],n[3],n[4]);case 6:return new r(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new r(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var i=e(r.prototype),o=r.apply(i,n);return t(o)?o:i}},_createCtor}function require_createBind(){if(hasRequired_createBind)return _createBind;hasRequired_createBind=1;var e=require_createCtor(),t=require_root();return _createBind=function(r,n,i){var o=1&n,s=e(r);return function e(){return(this&&this!==t&&this instanceof e?s:r).apply(o?i:this,arguments)}},_createBind}function require_composeArgs(){if(hasRequired_composeArgs)return _composeArgs;hasRequired_composeArgs=1;var e=Math.max;return _composeArgs=function(t,r,n,i){for(var o=-1,s=t.length,a=n.length,l=-1,c=r.length,u=e(s-a,0),d=Array(c+u),p=!i;++l<c;)d[l]=r[l];for(;++o<a;)(p||o<s)&&(d[n[o]]=t[o]);for(;u--;)d[l++]=t[o++];return d}}function require_composeArgsRight(){if(hasRequired_composeArgsRight)return _composeArgsRight;hasRequired_composeArgsRight=1;var e=Math.max;return _composeArgsRight=function(t,r,n,i){for(var o=-1,s=t.length,a=-1,l=n.length,c=-1,u=r.length,d=e(s-l,0),p=Array(d+u),h=!i;++o<d;)p[o]=t[o];for(var f=o;++c<u;)p[f+c]=r[c];for(;++a<l;)(h||o<s)&&(p[f+n[a]]=t[o++]);return p}}function require_countHolders(){return hasRequired_countHolders?_countHolders:(hasRequired_countHolders=1,_countHolders=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n})}function require_baseLodash(){return hasRequired_baseLodash?_baseLodash:(hasRequired_baseLodash=1,_baseLodash=function(){})}function require_LazyWrapper(){if(hasRequired_LazyWrapper)return _LazyWrapper;hasRequired_LazyWrapper=1;var e=require_baseCreate(),t=require_baseLodash();function r(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}return r.prototype=e(t.prototype),r.prototype.constructor=r,_LazyWrapper=r}function require_getData(){if(hasRequired_getData)return _getData;hasRequired_getData=1;var e=require_metaMap(),t=requireNoop();return _getData=e?function(t){return e.get(t)}:t}function require_realNames(){return hasRequired_realNames?_realNames:(hasRequired_realNames=1,_realNames={})}function require_getFuncName(){if(hasRequired_getFuncName)return _getFuncName;hasRequired_getFuncName=1;var e=require_realNames(),t=Object.prototype.hasOwnProperty;return _getFuncName=function(r){for(var n=r.name+"",i=e[n],o=t.call(e,n)?i.length:0;o--;){var s=i[o],a=s.func;if(null==a||a==r)return s.name}return n}}function require_LodashWrapper(){if(hasRequired_LodashWrapper)return _LodashWrapper;hasRequired_LodashWrapper=1;var e=require_baseCreate(),t=require_baseLodash();function r(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}return r.prototype=e(t.prototype),r.prototype.constructor=r,_LodashWrapper=r}function require_wrapperClone(){if(hasRequired_wrapperClone)return _wrapperClone;hasRequired_wrapperClone=1;var e=require_LazyWrapper(),t=require_LodashWrapper(),r=require_copyArray();return _wrapperClone=function(n){if(n instanceof e)return n.clone();var i=new t(n.__wrapped__,n.__chain__);return i.__actions__=r(n.__actions__),i.__index__=n.__index__,i.__values__=n.__values__,i}}function requireWrapperLodash(){if(hasRequiredWrapperLodash)return wrapperLodash;hasRequiredWrapperLodash=1;var e=require_LazyWrapper(),t=require_LodashWrapper(),r=require_baseLodash(),n=requireIsArray(),i=requireIsObjectLike(),o=require_wrapperClone(),s=Object.prototype.hasOwnProperty;function a(r){if(i(r)&&!n(r)&&!(r instanceof e)){if(r instanceof t)return r;if(s.call(r,"__wrapped__"))return o(r)}return new t(r)}return a.prototype=r.prototype,a.prototype.constructor=a,wrapperLodash=a}function require_isLaziable(){if(hasRequired_isLaziable)return _isLaziable;hasRequired_isLaziable=1;var e=require_LazyWrapper(),t=require_getData(),r=require_getFuncName(),n=requireWrapperLodash();return _isLaziable=function(i){var o=r(i),s=n[o];if("function"!=typeof s||!(o in e.prototype))return!1;if(i===s)return!0;var a=t(s);return!!a&&i===a[0]}}function require_setData(){if(hasRequired_setData)return _setData;hasRequired_setData=1;var e=require_baseSetData(),t=require_shortOut()(e);return _setData=t}function require_getWrapDetails(){if(hasRequired_getWrapDetails)return _getWrapDetails;hasRequired_getWrapDetails=1;var e=/\{\n\/\* \[wrapped with (.+)\] \*/,t=/,? & /;return _getWrapDetails=function(r){var n=r.match(e);return n?n[1].split(t):[]}}function require_insertWrapDetails(){if(hasRequired_insertWrapDetails)return _insertWrapDetails;hasRequired_insertWrapDetails=1;var e=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;return _insertWrapDetails=function(t,r){var n=r.length;if(!n)return t;var i=n-1;return r[i]=(n>1?"& ":"")+r[i],r=r.join(n>2?", ":" "),t.replace(e,"{\n/* [wrapped with "+r+"] */\n")}}function require_baseFindIndex(){return hasRequired_baseFindIndex?_baseFindIndex:(hasRequired_baseFindIndex=1,_baseFindIndex=function(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1})}function require_baseIsNaN(){return hasRequired_baseIsNaN?_baseIsNaN:(hasRequired_baseIsNaN=1,_baseIsNaN=function(e){return e!=e})}function require_strictIndexOf(){return hasRequired_strictIndexOf?_strictIndexOf:(hasRequired_strictIndexOf=1,_strictIndexOf=function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1})}function require_baseIndexOf(){if(hasRequired_baseIndexOf)return _baseIndexOf;hasRequired_baseIndexOf=1;var e=require_baseFindIndex(),t=require_baseIsNaN(),r=require_strictIndexOf();return _baseIndexOf=function(n,i,o){return i==i?r(n,i,o):e(n,t,o)}}function require_arrayIncludes(){if(hasRequired_arrayIncludes)return _arrayIncludes;hasRequired_arrayIncludes=1;var e=require_baseIndexOf();return _arrayIncludes=function(t,r){return!(null==t||!t.length)&&e(t,r,0)>-1}}function require_updateWrapDetails(){if(hasRequired_updateWrapDetails)return _updateWrapDetails;hasRequired_updateWrapDetails=1;var e=require_arrayEach(),t=require_arrayIncludes(),r=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];return _updateWrapDetails=function(n,i){return e(r,function(e){var r="_."+e[0];i&e[1]&&!t(n,r)&&n.push(r)}),n.sort()}}function require_setWrapToString(){if(hasRequired_setWrapToString)return _setWrapToString;hasRequired_setWrapToString=1;var e=require_getWrapDetails(),t=require_insertWrapDetails(),r=require_setToString(),n=require_updateWrapDetails();return _setWrapToString=function(i,o,s){var a=o+"";return r(i,t(a,n(e(a),s)))}}function require_createRecurry(){if(hasRequired_createRecurry)return _createRecurry;hasRequired_createRecurry=1;var e=require_isLaziable(),t=require_setData(),r=require_setWrapToString();return _createRecurry=function(n,i,o,s,a,l,c,u,d,p){var h=8&i;i|=h?32:64,4&(i&=~(h?64:32))||(i&=-4);var f=[n,i,a,h?l:void 0,h?c:void 0,h?void 0:l,h?void 0:c,u,d,p],m=o.apply(void 0,f);return e(n)&&t(m,f),m.placeholder=s,r(m,n,i)}}function require_getHolder(){return hasRequired_getHolder?_getHolder:(hasRequired_getHolder=1,_getHolder=function(e){return e.placeholder})}function require_reorder(){if(hasRequired_reorder)return _reorder;hasRequired_reorder=1;var e=require_copyArray(),t=require_isIndex(),r=Math.min;return _reorder=function(n,i){for(var o=n.length,s=r(i.length,o),a=e(n);s--;){var l=i[s];n[s]=t(l,o)?a[l]:void 0}return n}}function require_replaceHolders(){if(hasRequired_replaceHolders)return _replaceHolders;hasRequired_replaceHolders=1;var e="__lodash_placeholder__";return _replaceHolders=function(t,r){for(var n=-1,i=t.length,o=0,s=[];++n<i;){var a=t[n];a!==r&&a!==e||(t[n]=e,s[o++]=n)}return s}}function require_createHybrid(){if(hasRequired_createHybrid)return _createHybrid;hasRequired_createHybrid=1;var e=require_composeArgs(),t=require_composeArgsRight(),r=require_countHolders(),n=require_createCtor(),i=require_createRecurry(),o=require_getHolder(),s=require_reorder(),a=require_replaceHolders(),l=require_root();return _createHybrid=function c(u,d,p,h,f,m,g,b,y,T){var E=128&d,O=1&d,S=2&d,x=24&d,v=512&d,_=S?void 0:n(u);return function A(){for(var C=arguments.length,w=Array(C),k=C;k--;)w[k]=arguments[k];if(x)var D=o(A),I=r(w,D);if(h&&(w=e(w,h,f,x)),m&&(w=t(w,m,g,x)),C-=I,x&&C<T){var R=a(w,D);return i(u,d,c,A.placeholder,p,w,R,b,y,T-C)}var N=O?p:this,P=S?N[u]:u;return C=w.length,b?w=s(w,b):v&&C>1&&w.reverse(),E&&y<C&&(w.length=y),this&&this!==l&&this instanceof A&&(P=_||n(P)),P.apply(N,w)}},_createHybrid}function require_createCurry(){if(hasRequired_createCurry)return _createCurry;hasRequired_createCurry=1;var e=require_apply(),t=require_createCtor(),r=require_createHybrid(),n=require_createRecurry(),i=require_getHolder(),o=require_replaceHolders(),s=require_root();return _createCurry=function(a,l,c){var u=t(a);return function t(){for(var d=arguments.length,p=Array(d),h=d,f=i(t);h--;)p[h]=arguments[h];var m=d<3&&p[0]!==f&&p[d-1]!==f?[]:o(p,f);return(d-=m.length)<c?n(a,l,r,t.placeholder,void 0,p,m,void 0,void 0,c-d):e(this&&this!==s&&this instanceof t?u:a,this,p)}},_createCurry}function require_createPartial(){if(hasRequired_createPartial)return _createPartial;hasRequired_createPartial=1;var e=require_apply(),t=require_createCtor(),r=require_root();return _createPartial=function(n,i,o,s){var a=1&i,l=t(n);return function t(){for(var i=-1,c=arguments.length,u=-1,d=s.length,p=Array(d+c),h=this&&this!==r&&this instanceof t?l:n;++u<d;)p[u]=s[u];for(;c--;)p[u++]=arguments[++i];return e(h,a?o:this,p)}},_createPartial}function require_mergeData(){if(hasRequired_mergeData)return _mergeData;hasRequired_mergeData=1;var e=require_composeArgs(),t=require_composeArgsRight(),r=require_replaceHolders(),n="__lodash_placeholder__",i=Math.min;return _mergeData=function(o,s){var a=o[1],l=s[1],c=a|l,u=c<131,d=128==l&&8==a||128==l&&256==a&&o[7].length<=s[8]||384==l&&s[7].length<=s[8]&&8==a;if(!u&&!d)return o;1&l&&(o[2]=s[2],c|=1&a?0:4);var p=s[3];if(p){var h=o[3];o[3]=h?e(h,p,s[4]):p,o[4]=h?r(o[3],n):s[4]}return(p=s[5])&&(h=o[5],o[5]=h?t(h,p,s[6]):p,o[6]=h?r(o[5],n):s[6]),(p=s[7])&&(o[7]=p),128&l&&(o[8]=null==o[8]?s[8]:i(o[8],s[8])),null==o[9]&&(o[9]=s[9]),o[0]=s[0],o[1]=c,o}}function requireToFinite(){if(hasRequiredToFinite)return toFinite_1;hasRequiredToFinite=1;var e=requireToNumber(),t=1/0;return toFinite_1=function(r){return r?(r=e(r))===t||r===-1/0?17976931348623157e292*(r<0?-1:1):r==r?r:0:0===r?r:0}}function requireToInteger(){if(hasRequiredToInteger)return toInteger_1;hasRequiredToInteger=1;var e=requireToFinite();return toInteger_1=function(t){var r=e(t),n=r%1;return r==r?n?r-n:r:0}}function require_createWrap(){if(hasRequired_createWrap)return _createWrap;hasRequired_createWrap=1;var e=require_baseSetData(),t=require_createBind(),r=require_createCurry(),n=require_createHybrid(),i=require_createPartial(),o=require_getData(),s=require_mergeData(),a=require_setData(),l=require_setWrapToString(),c=requireToInteger(),u=Math.max;return _createWrap=function(d,p,h,f,m,g,b,y){var T=2&p;if(!T&&"function"!=typeof d)throw new TypeError("Expected a function");var E=f?f.length:0;if(E||(p&=-97,f=m=void 0),b=void 0===b?b:u(c(b),0),y=void 0===y?y:c(y),E-=m?m.length:0,64&p){var O=f,S=m;f=m=void 0}var x=T?void 0:o(d),v=[d,p,h,f,m,O,S,g,b,y];if(x&&s(v,x),d=v[0],p=v[1],h=v[2],f=v[3],m=v[4],!(y=v[9]=void 0===v[9]?T?0:d.length:u(v[9]-E,0))&&24&p&&(p&=-25),p&&1!=p)_=8==p||16==p?r(d,p,y):32!=p&&33!=p||m.length?n.apply(void 0,v):i(d,p,h,f);else var _=t(d,p,h);return l((x?e:a)(_,v),d,p)}}function requirePartial(){if(hasRequiredPartial)return partial_1;hasRequiredPartial=1;var e=require_baseRest(),t=require_createWrap(),r=require_getHolder(),n=require_replaceHolders(),i=e(function(e,o){var s=n(o,r(i));return t(e,32,void 0,o,s)});return i.placeholder={},partial_1=i}function require_baseRange(){if(hasRequired_baseRange)return _baseRange;hasRequired_baseRange=1;var e=Math.ceil,t=Math.max;return _baseRange=function(r,n,i,o){for(var s=-1,a=t(e((n-r)/(i||1)),0),l=Array(a);a--;)l[o?a:++s]=r,r+=i;return l}}function require_isIterateeCall(){if(hasRequired_isIterateeCall)return _isIterateeCall;hasRequired_isIterateeCall=1;var e=requireEq(),t=requireIsArrayLike(),r=require_isIndex(),n=requireIsObject();return _isIterateeCall=function(i,o,s){if(!n(s))return!1;var a=typeof o;return!!("number"==a?t(s)&&r(o,s.length):"string"==a&&o in s)&&e(s[o],i)}}function require_createRange(){if(hasRequired_createRange)return _createRange;hasRequired_createRange=1;var e=require_baseRange(),t=require_isIterateeCall(),r=requireToFinite();return _createRange=function(n){return function(i,o,s){return s&&"number"!=typeof s&&t(i,o,s)&&(o=s=void 0),i=r(i),void 0===o?(o=i,i=0):o=r(o),s=void 0===s?i<o?1:-1:r(s),e(i,o,s,n)}}}function requireRange$1(){if(hasRequiredRange$1)return range_1;hasRequiredRange$1=1;var e=require_createRange()();return range_1=e}requireOmit(),requirePartial();var rangeExports=requireRange$1();const range$1=getDefaultExportFromCjs(rangeExports);var throttle_1,hasRequiredThrottle;function requireThrottle(){if(hasRequiredThrottle)return throttle_1;hasRequiredThrottle=1;var e=requireDebounce(),t=requireIsObject();return throttle_1=function(r,n,i){var o=!0,s=!0;if("function"!=typeof r)throw new TypeError("Expected a function");return t(i)&&(o="leading"in i?!!i.leading:o,s="trailing"in i?!!i.trailing:s),e(r,n,{leading:o,maxWait:n,trailing:s})}}var throttleExports=requireThrottle();const throttle=getDefaultExportFromCjs(throttleExports);var _arrayIncludesWith,hasRequired_arrayIncludesWith,_createSet,hasRequired_createSet,_baseUniq,hasRequired_baseUniq,uniqWith_1,hasRequiredUniqWith;function require_arrayIncludesWith(){return hasRequired_arrayIncludesWith?_arrayIncludesWith:(hasRequired_arrayIncludesWith=1,_arrayIncludesWith=function(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1})}function require_createSet(){if(hasRequired_createSet)return _createSet;hasRequired_createSet=1;var e=require_Set(),t=requireNoop(),r=require_setToArray(),n=e&&1/r(new e([,-0]))[1]==1/0?function(t){return new e(t)}:t;return _createSet=n}function require_baseUniq(){if(hasRequired_baseUniq)return _baseUniq;hasRequired_baseUniq=1;var e=require_SetCache(),t=require_arrayIncludes(),r=require_arrayIncludesWith(),n=require_cacheHas(),i=require_createSet(),o=require_setToArray();return _baseUniq=function(s,a,l){var c=-1,u=t,d=s.length,p=!0,h=[],f=h;if(l)p=!1,u=r;else if(d>=200){var m=a?null:i(s);if(m)return o(m);p=!1,u=n,f=new e}else f=a?[]:h;e:for(;++c<d;){var g=s[c],b=a?a(g):g;if(g=l||0!==g?g:0,p&&b==b){for(var y=f.length;y--;)if(f[y]===b)continue e;a&&f.push(b),h.push(g)}else u(f,b,l)||(f!==h&&f.push(b),h.push(g))}return h}}function requireUniqWith(){if(hasRequiredUniqWith)return uniqWith_1;hasRequiredUniqWith=1;var e=require_baseUniq();return uniqWith_1=function(t,r){return r="function"==typeof r?r:void 0,t&&t.length?e(t,void 0,r):[]}}var uniqWithExports=requireUniqWith();const uniqWith=getDefaultExportFromCjs(uniqWithExports);var uniqueId_1,hasRequiredUniqueId;function requireUniqueId(){if(hasRequiredUniqueId)return uniqueId_1;hasRequiredUniqueId=1;var e=requireToString(),t=0;return uniqueId_1=function(r){var n=++t;return e(r)+n}}var uniqueIdExports=requireUniqueId();const uniqueId=getDefaultExportFromCjs(uniqueIdExports);let Facet$1=class{static define(e){return new this(e)}_combine;_key;constructor(e){this._combine=e.combine,this._key=new PluginKey(`Facet${e.static?"_static":""}:${e.name||""}:${uniqueId()}`)}of(e){const t=this._combine([e]);return new Plugin({key:this._key,state:{init:()=>t,apply:()=>t}})}getState(e){return this._key.getState(e)}};const LoggerFacet$1=Facet$1.define({combine:e=>e[0],static:!0}),getLoggerFromState=e=>LoggerFacet$1.getState(e),METRICS_KEY="metrics",trackTransactionMetrics=(e,t,r)=>(e.setMeta(METRICS_KEY,{type:t,meta:r}),e),logTransactionMetrics=(e,t)=>{const r=e.getMeta(METRICS_KEY);r&&(globalLogger.metrics({component:"transaction",event:r.type,duration:Date.now()-e.time,meta:r.meta}),t.metrics({component:"transaction",event:r.type,duration:Date.now()-e.time,meta:r.meta}))};class WysiwygEditor{#r;#k;#n;#i;#D;#I;get dom(){return this.#r.dom}get serializer(){return this.#k}get parser(){return this.#n}get actions(){return this.#i.actions}get view(){return this.#r}constructor({domElem:e,initialContent:t="",extensions:r=()=>{},allowHTML:n,mdPreset:i,linkify:o,pmTransformers:s,linkifyTlds:a,escapeConfig:l,onChange:c,onDocChange:u,modifiers:d,logger:p=new Logger2}){const h=d?convertDynamicModifiersConfigs(d):void 0,f=h?{schema:new SchemaDynamicModifier(h.schema),parser:new MarkdownParserDynamicModifier(h.parser),serializer:new MarkdownSerializerDynamicModifier(h.serializer)}:void 0,{schema:m,markupParser:g,serializer:b,nodeViews:y,markViews:T,plugins:E,rawActions:O,actions:S}=ExtensionsManager.process(r,{mdOpts:{html:n,linkify:o,breaks:!0,preset:i},linkifyTlds:a,pmTransformers:s,dynamicModifiers:f},p);E.unshift(LoggerFacet$1.of(p));const x=EditorState$1.create({schema:m,doc:g.parse(t),plugins:E}),v=()=>this.tryOnChange(c),_=()=>this.tryOnChange(u);this.#r=new EditorView$1(e??null,{state:x,nodeViews:y,markViews:T,dispatchTransaction(e){const t=this.state.apply(e);this.updateState(t),v(),e.docChanged&&_(),logTransactionMetrics(e,p)}}),this.#i=S.setActions(bindActions(O)(this.#r)),this.#k=b,this.#n=g,this.#D=new WysiwygContentHandler(this.#r,g),this.#I=l}action(e){return this.#i.action(e)}focus(){return this.#r.focus()}hasFocus(){return this.#r.hasFocus()}getValue(){return this.#k.serialize(this.#r.state.doc,this.#I)}isEmpty(){const{doc:e}=this.#r.state;return 1===e.childCount&&"paragraph"===e.firstChild?.type.name&&0===e.firstChild.childCount}clear(){return this.#D.clear()}replace(e){return this.#D.replace(e)}prepend(e){return this.#D.prepend(e)}append(e){return this.#D.append(e)}moveCursor(e){return this.#D.moveCursor(e)}destroy(){this.#r.destroy()}tryOnChange(e){if(e)try{e(this)}catch(t){}}}var ToolbarTooltipDelay,ToolbarTooltipDelay2,ToolbarDataType,ToolbarDataType2;function withNaming(e){var t=e.n||"",r=e.v||e.m;function n(n,i,o,s){var a=i?t+n+e.e+i:t+n,l=a;if(o){var c=" "+l+e.m;for(var u in o)if(o.hasOwnProperty(u)){var d=o[u];!0===d?l+=c+u:d&&(l+=c+u+r+d)}}if(void 0!==s)for(var p=0,h=(s=Array.isArray(s)?s:[s]).length;p<h;p++){var f=s[p];if(f&&"string"==typeof f.valueOf())for(var m=f.valueOf().split(" "),g=0;g<m.length;g++){var b=m[g];b!==a&&(l+=" "+b)}}return l}return function(e,t){return function(r,i,o){return"string"==typeof r?"string"==typeof i||Array.isArray(i)?n(e,r,void 0,i):n(e,r,i,o):n(e,t,r,i)}}}ToolbarTooltipDelay2=ToolbarTooltipDelay||(ToolbarTooltipDelay={}),ToolbarTooltipDelay2[ToolbarTooltipDelay2.Open=250]="Open",ToolbarTooltipDelay2[ToolbarTooltipDelay2.Close=150]="Close",ToolbarDataType2=ToolbarDataType||(ToolbarDataType={}),ToolbarDataType2.SingleButton="s-button",ToolbarDataType2.ListButton="list-b",ToolbarDataType2.ButtonPopup="b-popup",ToolbarDataType2.ReactNode="r-node",ToolbarDataType2.ReactNodeFn="r-node-fn",ToolbarDataType2.ReactComponent="r-component";var cn$1=withNaming({e:"-",m:"_"});const cn=withNaming({n:"g-md-",e:"__",m:"_",v:"_"});var Lang$1,Lang2;Lang2=Lang$1||(Lang$1={}),Lang2.Ru="ru",Lang2.En="en";let subs=[];const config$2={lang:Lang$1.En,fallbackLang:Lang$1.En},subscribeConfigure=e=>(subs.push(e),()=>{subs=subs.filter(t=>t!==e)}),getConfig$2=()=>config$2,NAMESPACE="g-";withNaming({e:"__",m:"_"});const block$2=withNaming({n:NAMESPACE,e:"__",m:"_"});function modsClassName(e){return e.split(/\s(.*)/)[1]}var Platform,Platform2;Platform2=Platform||(Platform={}),Platform2.IOS="ios",Platform2.ANDROID="android",Platform2.BROWSER="browser";const b$1r=block$2("root");b$1r({mobile:!0}).split(/\s+/)[1];const initialValue={mobile:!1,platform:Platform.BROWSER,useHistory:()=>({action:"",replace(){},push(){},goBack(){}}),useLocation:()=>({pathname:"",search:"",hash:""})},MobileContext=reactExports.createContext(initialValue);function useMobile(){return reactExports.useContext(MobileContext).mobile}function getComponentName(e){return e.displayName||e.name||"Component"}function withMobile(e){const t=getComponentName(e);return class extends reactExports.Component{static displayName=`withMobile(${t})`;static contextType=MobileContext;render(){return jsxRuntimeExports.jsx(e,{...this.props,mobile:this.context.mobile,platform:this.context.platform,useHistory:this.context.useHistory,useLocation:this.context.useLocation})}}}const ThemeContext=reactExports.createContext(void 0);ThemeContext.displayName="ThemeContext";const CSS_SIZE_EXCEPTION={.5:"half"},DEFAULT_LAYOUT_THEME={breakpoints:{xs:0,s:576,m:768,l:1080,xl:1200,xxl:1400,xxxl:1920},spaceBaseSize:4,components:{container:{gutters:3,media:{l:{gutters:5}}}}},LayoutContext=reactExports.createContext({theme:DEFAULT_LAYOUT_THEME,activeMediaQuery:"s",fixBreakpoints:!1}),mockMediaQueryList={media:"",matches:!1,onchange:()=>{},addListener:()=>{},removeListener:()=>{},addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:e=>!0},makeCurrentActiveMediaExpressions=e=>({xs:`(max-width: ${e.s-1}px)`,s:`(min-width: ${e.s}px) and (max-width: ${e.m-1}px)`,m:`(min-width: ${e.m}px) and (max-width: ${e.l-1}px)`,l:`(min-width: ${e.l}px) and (max-width: ${e.xl-1}px)`,xl:`(min-width: ${e.xl}px) and (max-width: ${e.xxl-1}px)`,xxl:`(min-width: ${e.xxl}px) and (max-width: ${e.xxxl-1}px)`,xxxl:`(min-width: ${e.xxxl}px)`}),safeMatchMedia=e=>"undefined"==typeof window||"function"!=typeof window.matchMedia?mockMediaQueryList:window.matchMedia(e);class Queries{fix;queryListsDecl=[];constructor(e,t){const r=makeCurrentActiveMediaExpressions(e);this.fix=t,this.queryListsDecl=[["xs",safeMatchMedia(r.xs)],["s",safeMatchMedia(r.s)],["m",safeMatchMedia(r.m)],["l",safeMatchMedia(r.l)],["xl",safeMatchMedia(r.xl)],["xxl",safeMatchMedia(r.xxl)],["xxxl",safeMatchMedia(r.xxxl)]]}getCurrentActiveMedia(){const e=this.queryListsDecl.find(([e,t])=>t.matches)?.[0];return e?"xs"!==e||this.fix?e:"s":this.fix?"xs":"s"}addListeners(e){this.queryListsDecl.forEach(([t,r])=>r.addEventListener("change",e))}removeListeners(e){this.queryListsDecl.forEach(([t,r])=>r.removeEventListener("change",e))}}const useCurrentActiveMediaQuery=(e,t,r)=>{const[n,i]=reactExports.useState(r??(t?"xs":"s"));return reactExports.useLayoutEffect(()=>{const r=new Queries(e,t),n=()=>{i(r.getCurrentActiveMedia())};return r.addListeners(n),n(),()=>{r.removeListeners(n)}},[e,t]),n};var _assignMergeValue,hasRequired_assignMergeValue,isArrayLikeObject_1,hasRequiredIsArrayLikeObject,_safeGet,hasRequired_safeGet,toPlainObject_1,hasRequiredToPlainObject,_baseMergeDeep,hasRequired_baseMergeDeep,_baseMerge,hasRequired_baseMerge,_createAssigner,hasRequired_createAssigner,merge_1,hasRequiredMerge;function require_assignMergeValue(){if(hasRequired_assignMergeValue)return _assignMergeValue;hasRequired_assignMergeValue=1;var e=require_baseAssignValue(),t=requireEq();return _assignMergeValue=function(r,n,i){(void 0!==i&&!t(r[n],i)||void 0===i&&!(n in r))&&e(r,n,i)}}function requireIsArrayLikeObject(){if(hasRequiredIsArrayLikeObject)return isArrayLikeObject_1;hasRequiredIsArrayLikeObject=1;var e=requireIsArrayLike(),t=requireIsObjectLike();return isArrayLikeObject_1=function(r){return t(r)&&e(r)}}function require_safeGet(){return hasRequired_safeGet?_safeGet:(hasRequired_safeGet=1,_safeGet=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]})}function requireToPlainObject(){if(hasRequiredToPlainObject)return toPlainObject_1;hasRequiredToPlainObject=1;var e=require_copyObject(),t=requireKeysIn();return toPlainObject_1=function(r){return e(r,t(r))}}function require_baseMergeDeep(){if(hasRequired_baseMergeDeep)return _baseMergeDeep;hasRequired_baseMergeDeep=1;var e=require_assignMergeValue(),t=require_cloneBuffer(),r=require_cloneTypedArray(),n=require_copyArray(),i=require_initCloneObject(),o=requireIsArguments(),s=requireIsArray(),a=requireIsArrayLikeObject(),l=requireIsBuffer(),c=requireIsFunction(),u=requireIsObject(),d=requireIsPlainObject$1(),p=requireIsTypedArray(),h=require_safeGet(),f=requireToPlainObject();return _baseMergeDeep=function(m,g,b,y,T,E,O){var S=h(m,b),x=h(g,b),v=O.get(x);if(v)e(m,b,v);else{var _=E?E(S,x,b+"",m,g,O):void 0,A=void 0===_;if(A){var C=s(x),w=!C&&l(x),k=!C&&!w&&p(x);_=x,C||w||k?s(S)?_=S:a(S)?_=n(S):w?(A=!1,_=t(x,!0)):k?(A=!1,_=r(x,!0)):_=[]:d(x)||o(x)?(_=S,o(S)?_=f(S):u(S)&&!c(S)||(_=i(x))):A=!1}A&&(O.set(x,_),T(_,x,y,E,O),O.delete(x)),e(m,b,_)}}}function require_baseMerge(){if(hasRequired_baseMerge)return _baseMerge;hasRequired_baseMerge=1;var e=require_Stack(),t=require_assignMergeValue(),r=require_baseFor(),n=require_baseMergeDeep(),i=requireIsObject(),o=requireKeysIn(),s=require_safeGet();return _baseMerge=function a(l,c,u,d,p){l!==c&&r(c,function(r,o){if(p||(p=new e),i(r))n(l,c,o,u,a,d,p);else{var h=d?d(s(l,o),r,o+"",l,c,p):void 0;void 0===h&&(h=r),t(l,o,h)}},o)}}function require_createAssigner(){if(hasRequired_createAssigner)return _createAssigner;hasRequired_createAssigner=1;var e=require_baseRest(),t=require_isIterateeCall();return _createAssigner=function(r){return e(function(e,n){var i=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s=r.length>3&&"function"==typeof s?(o--,s):void 0,a&&t(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),e=Object(e);++i<o;){var l=n[i];l&&r(e,l,i,s)}return e})}}function requireMerge(){if(hasRequiredMerge)return merge_1;hasRequiredMerge=1;var e=require_baseMerge(),t=require_createAssigner()(function(t,r,n){e(t,r,n)});return merge_1=t}var mergeExports=requireMerge();const merge$1=getDefaultExportFromCjs(mergeExports);function overrideLayoutTheme({theme:e,override:t}){return merge$1(e,t)}function PrivateLayoutProvider({children:e,config:t,initialMediaQuery:r,fixBreakpoints:n=!1}){const i=reactExports.useContext(LayoutContext),o=reactExports.useMemo(()=>overrideLayoutTheme({theme:i.theme,override:t}),[t,i.theme]),s=useCurrentActiveMediaQuery(o.breakpoints,n,r),a=reactExports.useMemo(()=>({activeMediaQuery:s,theme:o,fixBreakpoints:n}),[s,o,n]);return jsxRuntimeExports.jsx(LayoutContext.Provider,{value:a,children:e})}const ThemeSettingsContext=reactExports.createContext(void 0);ThemeSettingsContext.displayName="ThemeSettingsContext";const DEFAULT_THEME="system",DEFAULT_LIGHT_THEME="light",DEFAULT_DARK_THEME="dark",ROOT_CLASSNAME="root",DEFAULT_DIRECTION="ltr",b$1q=block$2(ROOT_CLASSNAME),rootClassName=b$1q();function updateBodyClassName({theme:e,className:t,prevClassName:r}){const n=document.body;n&&(n.classList.contains(rootClassName)||n.classList.add(rootClassName),r&&r.split(" ").forEach(e=>{e&&n.classList.remove(e)}),t&&t.split(" ").forEach(e=>{e&&!n.classList.contains(e)&&n.classList.add(e)}),[...n.classList].forEach(e=>{e.startsWith(modsClassName(b$1q({theme:!0})))&&n.classList.remove(e)}),n.classList.add(modsClassName(b$1q({theme:e}))))}function updateBodyDirection(e){const t=document.body;t&&(e===DEFAULT_DIRECTION?t.removeAttribute("dir"):t.setAttribute("dir",e))}const supportsMatchMedia="undefined"!=typeof window&&"function"==typeof window.matchMedia,getDarkMediaMatch=()=>window.matchMedia("(prefers-color-scheme: dark)");function getSystemTheme(){return supportsMatchMedia&&getDarkMediaMatch().matches?"dark":"light"}var shimExports=requireShim();const defaultLangOptions={lang:"en",fallbackLang:"en"},LangContext=reactExports.createContext(void 0);function useLang(){const e=shimExports.useSyncExternalStore(subscribeConfigure,getConfig$2,getConfig$2);return reactExports.useContext(LangContext)||e}function addListener(e,t){const r="function"!=typeof e.addEventListener;return r?e.addListener(t):e.addEventListener("change",t),()=>{r?e.removeListener(t):e.removeEventListener("change",t)}}function useSystemTheme(){const[e,t]=reactExports.useState(getSystemTheme());return reactExports.useEffect(()=>{if(!supportsMatchMedia)return;const e=addListener(getDarkMediaMatch(),function(e){t(e.matches?"dark":"light")});return()=>e()},[]),e}const b$1p=block$2(ROOT_CLASSNAME);function ThemeProvider({theme:e,systemLightTheme:t,systemDarkTheme:r,direction:n,scoped:i=!1,rootClassName:o="",children:s,layout:a,lang:l,fallbackLang:c}){const u=reactExports.useContext(ThemeContext),d=reactExports.useContext(ThemeSettingsContext),p=reactExports.useContext(LangContext),h=void 0!==u||i,f=e??u?.theme??DEFAULT_THEME,m=t??d?.systemLightTheme??DEFAULT_LIGHT_THEME,g=r??d?.systemDarkTheme??DEFAULT_DARK_THEME,b=n??u?.direction??DEFAULT_DIRECTION,y="light"===useSystemTheme()?m:g,T="system"===f?y:f,E=reactExports.useRef("");reactExports.useLayoutEffect(()=>{h||(updateBodyClassName({theme:T,className:o,prevClassName:E.current}),updateBodyDirection(b),E.current=o)},[h,T,b,o]);const O=reactExports.useMemo(()=>({theme:f,themeValue:T,direction:b,scoped:h}),[f,T,b,h]),S=reactExports.useMemo(()=>({systemLightTheme:m,systemDarkTheme:g}),[m,g]),x=l||c?{...defaultLangOptions,...p,...l?{lang:l}:void 0,...c?{fallbackLang:c}:void 0}:p;return jsxRuntimeExports.jsx(PrivateLayoutProvider,{...a,children:jsxRuntimeExports.jsx(ThemeContext.Provider,{value:O,children:jsxRuntimeExports.jsx(ThemeSettingsContext.Provider,{value:S,children:jsxRuntimeExports.jsx(LangContext.Provider,{value:x,children:h?jsxRuntimeExports.jsx("div",{className:b$1p({theme:T},o),dir:b,children:s}):s})})})})}function useThemeContext(){const e=reactExports.useContext(ThemeContext);if(void 0===e)throw new Error("useTheme* hooks must be used within ThemeProvider");return e}function useDirection(){return useThemeContext().direction}ThemeProvider.displayName="ThemeProvider";const KeyCode={BACKSPACE:"Backspace",ENTER:"Enter",TAB:"Tab",SPACEBAR:" ",SPACEBAR_OLD:"Spacebar",ESCAPE:"Escape",ARROW_UP:"ArrowUp",ARROW_DOWN:"ArrowDown",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",HOME:"Home",END:"End"};function createOnKeyDownHandler(e){return t=>{e&&[KeyCode.ENTER,KeyCode.SPACEBAR,KeyCode.SPACEBAR_OLD].includes(t.key)&&(t.preventDefault(),e(t))}}function useActionHandlers(e){return{onKeyDown:reactExports.useMemo(()=>createOnKeyDownHandler(e),[e])}}function useControlledState(e,t,r){const[n,i]=reactExports.useState(e??t),o=reactExports.useRef(void 0!==e),s=void 0!==e;reactExports.useEffect(()=>{o.current,o.current=s},[s]);let a=s?e:n;const l=reactExports.useCallback((e,...t)=>{Object.is(a,e)||r?.(e,...t),s||(a=e,i(e))},[s,r,a]);return[a,l]}function useFileInput({onUpdate:e,onChange:t}){const r=reactExports.useRef(null),n=reactExports.useCallback(r=>{t?.(r),e?.(Array.from(r.target.files||[])),r.target.value=""},[t,e]),i=reactExports.useCallback(()=>{r.current?.click()},[]);return reactExports.useMemo(()=>({controlProps:{ref:r,type:"file",tabIndex:-1,style:{opacity:0,position:"absolute",width:1,height:1},onChange:n,"aria-hidden":!0},triggerProps:{onClick:i}}),[n,i])}class SyntheticFocusEvent{nativeEvent;target;currentTarget;relatedTarget;bubbles;cancelable;defaultPrevented;eventPhase;isTrusted;timeStamp;type;constructor(e,t,r={}){this.nativeEvent=t,this.target=r.target??t.target,this.currentTarget=r.currentTarget??t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=e}isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}}function useSyntheticBlurEvent(e){const t=reactExports.useRef({isFocused:!1,observer:null});return reactExports.useEffect(()=>{const e=t.current;return()=>{e.observer&&(e.observer.disconnect(),e.observer=null)}},[]),reactExports.useCallback(r=>{const n=r.target;if(n instanceof HTMLButtonElement||n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement){t.current.isFocused=!0;const r=r=>{t.current.isFocused=!1,n.disabled&&e?.(new SyntheticFocusEvent("blur",r)),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};n.addEventListener("focusout",r,{once:!0});const i=new MutationObserver(()=>{if(t.current.isFocused&&n.disabled){i.disconnect(),t.current.observer=null;const e=n===document.activeElement?null:document.activeElement;n.dispatchEvent(new FocusEvent("blur",{relatedTarget:e})),n.dispatchEvent(new FocusEvent("focusout",{relatedTarget:e,bubbles:!0}))}});i.observe(n,{attributes:!0,attributeFilter:["disabled"]}),t.current.observer=i}},[e])}function useFocusWithin(e){const{onFocusWithin:t,onBlurWithin:r,onFocusWithinChange:n,isDisabled:i}=e,o=reactExports.useRef(!1),s=reactExports.useCallback(e=>{o.current||document.activeElement!==e.target||(o.current=!0,t&&t(e),n&&n(!0))},[t,n]),a=reactExports.useCallback(e=>{o.current&&(o.current=!1,r&&r(e),n&&n(!1))},[r,n]),{onBlur:l,onFocus:c}=useFocusEvents({onFocus:s,onBlur:a,isDisabled:i});return i?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:c,onBlur:l}}}function useFocusEvents({onFocus:e,onBlur:t,isDisabled:r}){const n=reactExports.useRef(!1),i=reactExports.useRef(null);reactExports.useEffect(()=>{if(r)return;const e=function(){n.current=!1},o=function(e){if(!n.current&&i.current){const r=new FocusEvent("blur",{...e,relatedTarget:e.target,bubbles:!1,cancelable:!1});t(new SyntheticFocusEvent("blur",r,{target:i.current,currentTarget:i.current})),i.current=null}};return window.addEventListener("focus",e,{capture:!0}),window.addEventListener("focusin",o),()=>{window.removeEventListener("focus",e,{capture:!0}),window.removeEventListener("focusin",o)}},[r,t]);const o=reactExports.useCallback(e=>{document.activeElement===e.target||null!==e.relatedTarget&&e.relatedTarget!==document.body&&e.relatedTarget!==document||(t(e),i.current=null)},[t]),s=useSyntheticBlurEvent(t);return{onBlur:o,onFocus:reactExports.useCallback(t=>{n.current=!0,i.current=t.target,s(t),e(t)},[s,e])}}function setRef(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function mergeRefs(...e){return function(t){for(const r of e)setRef(r,t)}}function useForkRef(...e){return reactExports.useMemo(()=>e.every(e=>null==e)?null:mergeRefs(...e),e)}const useIntersection=({element:e,options:t,onIntersect:r})=>{reactExports.useEffect(()=>{const n=new IntersectionObserver(([e])=>{e.isIntersecting&&r?.()},t);return e&&n.observe(e),()=>null===e?void 0:n.unobserve(e)},[e,t,r])};function moveBack(e,t,r=1,n){const i=(e.length+t-r%e.length)%e.length;return n&&n(e[i])?moveBack(e,i,1,n):i}function moveForward(e,t,r=1,n){const i=(t+r)%e.length;return n&&n(e[i])?moveForward(e,i,1,n):i}function useListNavigation({items:e,skip:t,pageSize:r,processHomeKey:n=!0,processEndKey:i=!0,anchorRef:o,disabled:s=!1,initialValue:a=-1,onAnchorKeyDown:l}){const[c,u]=reactExports.useState(a),d=reactExports.useCallback(()=>{u(a)},[a]);return reactExports.useEffect(()=>{e&&d()},[e,d]),reactExports.useLayoutEffect(()=>{if(s)return;if(!e.some(e=>!t?.(e)))return;const a=o?.current;if(!a)return;const d=o=>{const s=l?.(c,o);if(!1!==s)switch(o.key){case KeyCode.ARROW_DOWN:o.preventDefault(),u(r=>moveForward(e,r,1,t));break;case KeyCode.ARROW_UP:o.preventDefault(),u(r=>moveBack(e,r,1,t));break;case KeyCode.PAGE_DOWN:if(!r)return;o.preventDefault(),u(n=>moveForward(e,n,r,t));break;case KeyCode.PAGE_UP:if(!r)return;o.preventDefault(),u(n=>moveBack(e,n,r,t));break;case KeyCode.HOME:if(!n)return;o.preventDefault(),u(r=>moveBack(e,r,r,t));break;case KeyCode.END:if(!i)return;o.preventDefault(),u(r=>moveBack(e,r,r+1,t))}};return a.addEventListener("keydown",d),()=>{a.removeEventListener("keydown",d)}},[c,o,s,e,l,r,i,n,t]),{activeItemIndex:c,setActiveItemIndex:u,reset:d}}const PortalContext$1=reactExports.createContext({current:null});function usePortalContainer(){const e=reactExports.useContext(PortalContext$1);let t=null;return"object"==typeof window&&(t=window.document.body),e.current??t}function useResizeObserver({ref:e,onResize:t,box:r}){reactExports.useEffect(()=>{const n=e?.current;if(!n)return;if(void 0===window.ResizeObserver){const e=()=>{t({})};return window.addEventListener("resize",e,!1),()=>{window.removeEventListener("resize",e,!1)}}const i=new ResizeObserver(e=>{e.length&&t({observer:i})});return i.observe(n,{box:r}),()=>{i.disconnect()}},[e,t,r])}PortalContext$1.displayName="PortalContext";const useOpenState=e=>{const{onOpenChange:t,onClose:r}=e,n=reactExports.useCallback(e=>{t?.(e),!1===e&&r&&r()},[t,r]),[i,o]=useControlledState(e.open,e.defaultOpen??!1,n),s=reactExports.useCallback(e=>{o("boolean"==typeof e?e:!i)},[i,o]);return{open:i,toggleOpen:s}},useSelect=({defaultOpen:e,onClose:t,onOpenChange:r,open:n,value:i,defaultValue:o=[],multiple:s,onUpdate:a,disabled:l})=>{const[c,u]=useControlledState(i,o,a),[d,p]=reactExports.useState(),{toggleOpen:h,...f}=useOpenState({defaultOpen:e,onClose:t,onOpenChange:r,open:n}),m=reactExports.useCallback(e=>{l||u(e)},[u,l]),g=reactExports.useCallback(e=>{if(!c.includes(e.value)){const t=[e.value];m(t)}h(!1)},[c,m,h]),b=reactExports.useCallback(e=>{const t=c.includes(e.value)?c.filter(t=>t!==e.value):[...c,e.value];m(t)},[c,m]),y=reactExports.useCallback(e=>{s?b(e):g(e)},[s,g,b]),T=reactExports.useCallback(()=>{m([])},[m]);return{value:c,activeIndex:d,setValue:m,handleSelection:y,handleClearValue:T,toggleOpen:h,setActiveIndex:p,...f}};function useTimeout(e,t){reactExports.useEffect(()=>{if("number"!=typeof t)return;const r=setTimeout(()=>{e()},t);return()=>{clearTimeout(r)}},[e,t])}const a11yHiddenSvgProps={"aria-hidden":!0};function isSpriteData(e){return"object"==typeof e}function isSvgrData(e){return!("function"!=typeof e||e.prototype&&e.prototype.render)}function isComponentSvgData(e){return("object"==typeof e||"function"==typeof e)&&"defaultProps"in e}function isStringSvgData(e){return"string"==typeof e}function prepareStringData(e){return e.replace(/<svg[^>]*>/,e=>e.replace(/(width|height)=(["']?)\d+\2/g,"").replace(/(\s){2,}\b/g,"$1").replace(/(\s)+>/g,">"))}function getStringViewBox(e){const t=e.match(/viewBox=(["']?)([\d\s,-]+)\1/);return t?t[2]:void 0}const b$1o=block$2("icon"),Icon=reactExports.forwardRef(({data:e,width:t,height:r,size:n,className:i,style:o,fill:s="currentColor",stroke:a="none",qa:l},c)=>{let u,d,p;if(n&&(u=n,d=n),t&&(u=t),r&&(d=r),isSpriteData(e))({viewBox:p}=e);else if(isStringSvgData(e))p=getStringViewBox(e);else if(isComponentSvgData(e))({viewBox:p}=e.defaultProps);else if(isSvgrData(e)){const t=e({});t&&({viewBox:p}=t.props)}if(p&&(!u||!d)){const e=p.split(/\s+|\s*,\s*/);u||(u=e[2]),d||(d=e[3])}const h={xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:u,height:d,className:b$1o(null,i),style:o,fill:s,stroke:a,"data-qa":l,...a11yHiddenSvgProps};if(isStringSvgData(e)){const t=prepareStringData(e);return jsxRuntimeExports.jsx("svg",{...h,ref:c,dangerouslySetInnerHTML:{__html:t}})}if(isSpriteData(e)){const t=Icon.prefix+(e.url||`#${e.id}`);return jsxRuntimeExports.jsx("svg",{...h,viewBox:p,ref:c,children:jsxRuntimeExports.jsx("use",{href:t,xlinkHref:t})})}const f=e;return f.defaultProps&&(f.defaultProps.width=f.defaultProps.height=void 0),jsxRuntimeExports.jsx("svg",{...h,ref:c,children:jsxRuntimeExports.jsx(f,{width:void 0,height:void 0})})});function isOfType(e){return function(t){if(!reactExports.isValidElement(t))return!1;const{type:r}=t;if(r===e)return!0;if("string"==typeof e||"string"==typeof r)return!1;const n=r.displayName;return Boolean(n&&n===e.displayName)}}Icon.displayName="Icon",Icon.prefix="";let nextUniqueId=1;function getUniqId(){return`${NAMESPACE}uniq-${nextUniqueId++}`}const isSvg=isOfType("svg"),isIcon=isOfType(Icon);function useUniqIdFallback(){const e=React.useRef();return void 0===e.current&&(e.current=getUniqId()),e.current}function useIdNative(){return`${NAMESPACE}${React.useId()}`}const useUniqId="function"==typeof React.useId?useIdNative:useUniqIdFallback;function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends.apply(null,arguments)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}var propTypes={exports:{}},reactIs={exports:{}},reactIs_development={},hasRequiredReactIs_development,hasRequiredReactIs,objectAssign,hasRequiredObjectAssign,ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret,has$1,hasRequiredHas,checkPropTypes_1,hasRequiredCheckPropTypes,factoryWithTypeCheckers,hasRequiredFactoryWithTypeCheckers,hasRequiredPropTypes;function requireReactIs_development(){return hasRequiredReactIs_development||(hasRequiredReactIs_development=1,function(){var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,s=e?Symbol.for("react.provider"):60109,a=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,d=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,h=e?Symbol.for("react.memo"):60115,f=e?Symbol.for("react.lazy"):60116,m=e?Symbol.for("react.block"):60121,g=e?Symbol.for("react.fundamental"):60117,b=e?Symbol.for("react.responder"):60118,y=e?Symbol.for("react.scope"):60119;function T(e){if("object"==typeof e&&null!==e){var p=e.$$typeof;switch(p){case t:var m=e.type;switch(m){case l:case c:case n:case o:case i:case d:return m;default:var g=m&&m.$$typeof;switch(g){case a:case u:case f:case h:case s:return g;default:return p}}case r:return p}}}var E=l,O=c,S=a,x=s,v=t,_=u,A=n,C=f,w=h,k=r,D=o,I=i,R=d,N=!1;function P(e){return T(e)===c}reactIs_development.AsyncMode=E,reactIs_development.ConcurrentMode=O,reactIs_development.ContextConsumer=S,reactIs_development.ContextProvider=x,reactIs_development.Element=v,reactIs_development.ForwardRef=_,reactIs_development.Fragment=A,reactIs_development.Lazy=C,reactIs_development.Memo=w,reactIs_development.Portal=k,reactIs_development.Profiler=D,reactIs_development.StrictMode=I,reactIs_development.Suspense=R,reactIs_development.isAsyncMode=function(e){return N||(N=!0),P(e)||T(e)===l},reactIs_development.isConcurrentMode=P,reactIs_development.isContextConsumer=function(e){return T(e)===a},reactIs_development.isContextProvider=function(e){return T(e)===s},reactIs_development.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},reactIs_development.isForwardRef=function(e){return T(e)===u},reactIs_development.isFragment=function(e){return T(e)===n},reactIs_development.isLazy=function(e){return T(e)===f},reactIs_development.isMemo=function(e){return T(e)===h},reactIs_development.isPortal=function(e){return T(e)===r},reactIs_development.isProfiler=function(e){return T(e)===o},reactIs_development.isStrictMode=function(e){return T(e)===i},reactIs_development.isSuspense=function(e){return T(e)===d},reactIs_development.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===n||e===c||e===o||e===i||e===d||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===h||e.$$typeof===s||e.$$typeof===a||e.$$typeof===u||e.$$typeof===g||e.$$typeof===b||e.$$typeof===y||e.$$typeof===m)},reactIs_development.typeOf=T}()),reactIs_development}function requireReactIs(){return hasRequiredReactIs||(hasRequiredReactIs=1,reactIs.exports=requireReactIs_development()),reactIs.exports}
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/function requireObjectAssign(){if(hasRequiredObjectAssign)return objectAssign;hasRequiredObjectAssign=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;return objectAssign=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(i){return!1}}()?Object.assign:function(n,i){for(var o,s,a=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(n),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))t.call(o,c)&&(a[c]=o[c]);if(e){s=e(o);for(var u=0;u<s.length;u++)r.call(o,s[u])&&(a[s[u]]=o[s[u]])}}return a},objectAssign}function requireReactPropTypesSecret(){return hasRequiredReactPropTypesSecret?ReactPropTypesSecret_1:(hasRequiredReactPropTypesSecret=1,ReactPropTypesSecret_1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}function requireHas(){return hasRequiredHas?has$1:(hasRequiredHas=1,has$1=Function.call.bind(Object.prototype.hasOwnProperty))}function requireCheckPropTypes(){if(hasRequiredCheckPropTypes)return checkPropTypes_1;hasRequiredCheckPropTypes=1;var e,t=requireReactPropTypesSecret(),r={},n=requireHas();function i(i,o,s,a,l){for(var c in i)if(n(i,c)){var u;try{if("function"!=typeof i[c]){var d=Error((a||"React class")+": "+s+" type `"+c+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof i[c]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw d.name="Invariant Violation",d}u=i[c](o,c,a,s,null,t)}catch(h){u=h}if(!u||u instanceof Error||e((a||"React class")+": type specification of "+s+" `"+c+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof u+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),u instanceof Error&&!(u.message in r)){r[u.message]=!0;var p=l?l():"";e("Failed "+s+" type: "+u.message+(null!=p?p:""))}}}return e=function(e){var t="Warning: "+e;try{throw new Error(t)}catch(x){}},i.resetWarningCache=function(){r={}},checkPropTypes_1=i}function requireFactoryWithTypeCheckers(){if(hasRequiredFactoryWithTypeCheckers)return factoryWithTypeCheckers;hasRequiredFactoryWithTypeCheckers=1;var e,t=requireReactIs(),r=requireObjectAssign(),n=requireReactPropTypesSecret(),i=requireHas(),o=requireCheckPropTypes();function s(){return null}return e=function(e){var t="Warning: "+e;try{throw new Error(t)}catch(x){}},factoryWithTypeCheckers=function(a,l){var c="function"==typeof Symbol&&Symbol.iterator,u="<<anonymous>>",d={array:m("array"),bigint:m("bigint"),bool:m("boolean"),func:m("function"),number:m("number"),object:m("object"),string:m("string"),symbol:m("symbol"),any:f(s),arrayOf:function(e){return f(function(t,r,i,o,s){if("function"!=typeof e)return new h("Property `"+s+"` of component `"+i+"` has invalid PropType notation inside arrayOf.");var a=t[r];if(!Array.isArray(a))return new h("Invalid "+o+" `"+s+"` of type `"+y(a)+"` supplied to `"+i+"`, expected an array.");for(var l=0;l<a.length;l++){var c=e(a,l,i,o,s+"["+l+"]",n);if(c instanceof Error)return c}return null})},element:f(function(e,t,r,n,i){var o=e[t];return a(o)?null:new h("Invalid "+n+" `"+i+"` of type `"+y(o)+"` supplied to `"+r+"`, expected a single ReactElement.")}),elementType:f(function(e,r,n,i,o){var s=e[r];return t.isValidElementType(s)?null:new h("Invalid "+i+" `"+o+"` of type `"+y(s)+"` supplied to `"+n+"`, expected a single ReactElement type.")}),instanceOf:function(e){return f(function(t,r,n,i,o){if(!(t[r]instanceof e)){var s=e.name||u;return new h("Invalid "+i+" `"+o+"` of type `"+((a=t[r]).constructor&&a.constructor.name?a.constructor.name:u)+"` supplied to `"+n+"`, expected instance of `"+s+"`.")}var a;return null})},node:f(function(e,t,r,n,i){return b(e[t])?null:new h("Invalid "+n+" `"+i+"` supplied to `"+r+"`, expected a ReactNode.")}),objectOf:function(e){return f(function(t,r,o,s,a){if("function"!=typeof e)return new h("Property `"+a+"` of component `"+o+"` has invalid PropType notation inside objectOf.");var l=t[r],c=y(l);if("object"!==c)return new h("Invalid "+s+" `"+a+"` of type `"+c+"` supplied to `"+o+"`, expected an object.");for(var u in l)if(i(l,u)){var d=e(l,u,o,s,a+"."+u,n);if(d instanceof Error)return d}return null})},oneOf:function(t){return Array.isArray(t)?f(function(e,r,n,i,o){for(var s=e[r],a=0;a<t.length;a++)if(p(s,t[a]))return null;var l=JSON.stringify(t,function(e,t){return"symbol"===T(t)?String(t):t});return new h("Invalid "+i+" `"+o+"` of value `"+String(s)+"` supplied to `"+n+"`, expected one of "+l+".")}):(e(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),s)},oneOfType:function(t){if(!Array.isArray(t))return e("Invalid argument supplied to oneOfType, expected an instance of array."),s;for(var r=0;r<t.length;r++){var o=t[r];if("function"!=typeof o)return e("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+E(o)+" at index "+r+"."),s}return f(function(e,r,o,s,a){for(var l=[],c=0;c<t.length;c++){var u=(0,t[c])(e,r,o,s,a,n);if(null==u)return null;u.data&&i(u.data,"expectedType")&&l.push(u.data.expectedType)}return new h("Invalid "+s+" `"+a+"` supplied to `"+o+"`"+(l.length>0?", expected one of type ["+l.join(", ")+"]":"")+".")})},shape:function(e){return f(function(t,r,i,o,s){var a=t[r],l=y(a);if("object"!==l)return new h("Invalid "+o+" `"+s+"` of type `"+l+"` supplied to `"+i+"`, expected `object`.");for(var c in e){var u=e[c];if("function"!=typeof u)return g(i,o,s,c,T(u));var d=u(a,c,i,o,s+"."+c,n);if(d)return d}return null})},exact:function(e){return f(function(t,o,s,a,l){var c=t[o],u=y(c);if("object"!==u)return new h("Invalid "+a+" `"+l+"` of type `"+u+"` supplied to `"+s+"`, expected `object`.");var d=r({},t[o],e);for(var p in d){var f=e[p];if(i(e,p)&&"function"!=typeof f)return g(s,a,l,p,T(f));if(!f)return new h("Invalid "+a+" `"+l+"` key `"+p+"` supplied to `"+s+"`.\nBad object: "+JSON.stringify(t[o],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var m=f(c,p,s,a,l+"."+p,n);if(m)return m}return null})}};function p(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function h(e,t){this.message=e,this.data=t&&"object"==typeof t?t:{},this.stack=""}function f(t){var r={},i=0;function o(o,s,a,c,d,p,f){if(c=c||u,p=p||a,f!==n){if(l){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}if("undefined"!=typeof console){var g=c+":"+a;!r[g]&&i<3&&(e("You are manually calling a React.PropTypes validation function for the `"+p+"` prop on `"+c+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),r[g]=!0,i++)}}return null==s[a]?o?null===s[a]?new h("The "+d+" `"+p+"` is marked as required in `"+c+"`, but its value is `null`."):new h("The "+d+" `"+p+"` is marked as required in `"+c+"`, but its value is `undefined`."):null:t(s,a,c,d,p)}var s=o.bind(null,!1);return s.isRequired=o.bind(null,!0),s}function m(e){return f(function(t,r,n,i,o,s){var a=t[r];return y(a)!==e?new h("Invalid "+i+" `"+o+"` of type `"+T(a)+"` supplied to `"+n+"`, expected `"+e+"`.",{expectedType:e}):null})}function g(e,t,r,n,i){return new h((e||"React class")+": "+t+" type `"+r+"."+n+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+i+"`.")}function b(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(b);if(null===e||a(e))return!0;var t=function(e){var t=e&&(c&&e[c]||e["@@iterator"]);if("function"==typeof t)return t}(e);if(!t)return!1;var r,n=t.call(e);if(t!==e.entries){for(;!(r=n.next()).done;)if(!b(r.value))return!1}else for(;!(r=n.next()).done;){var i=r.value;if(i&&!b(i[1]))return!1}return!0;default:return!1}}function y(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function T(e){if(null==e)return""+e;var t=y(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function E(e){var t=T(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return h.prototype=Error.prototype,d.checkPropTypes=o,d.resetWarningCache=o.resetWarningCache,d.PropTypes=d,d},factoryWithTypeCheckers}function requirePropTypes(){if(hasRequiredPropTypes)return propTypes.exports;hasRequiredPropTypes=1;var e=requireReactIs();return propTypes.exports=requireFactoryWithTypeCheckers()(e.isElement,!0),propTypes.exports}var propTypesExports=requirePropTypes();const PropTypes=getDefaultExportFromCjs(propTypesExports);function hasClass$1(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}function addClass$1(e,t){e.classList?e.classList.add(t):hasClass$1(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function replaceClassName(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function removeClass$2(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=replaceClassName(e.className,t):e.setAttribute("class",replaceClassName(e.className&&e.className.baseVal||"",t))}const config$1={disabled:!1};var timeoutsShape=PropTypes.oneOfType([PropTypes.number,PropTypes.shape({enter:PropTypes.number,exit:PropTypes.number,appear:PropTypes.number}).isRequired]),classNamesShape=PropTypes.oneOfType([PropTypes.string,PropTypes.shape({enter:PropTypes.string,exit:PropTypes.string,active:PropTypes.string}),PropTypes.shape({enter:PropTypes.string,enterDone:PropTypes.string,enterActive:PropTypes.string,exit:PropTypes.string,exitDone:PropTypes.string,exitActive:PropTypes.string})]);const TransitionGroupContext=React.createContext(null);var forceReflow=function(e){return e.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(e){function t(t,r){var n;n=e.call(this,t,r)||this;var i,o=r&&!r.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?o?(i=EXITED,n.appearStatus=ENTERING):i=ENTERED:i=t.unmountOnExit||t.mountOnEnter?UNMOUNTED:EXITED,n.state={status:i},n.nextCallback=null,n}_inheritsLoose(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===UNMOUNTED?{status:EXITED}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var r=this.state.status;this.props.in?r!==ENTERING&&r!==ENTERED&&(t=ENTERING):r!==ENTERING&&r!==ENTERED||(t=EXITING)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,r,n=this.props.timeout;return e=t=r=n,null!=n&&"number"!=typeof n&&(e=n.exit,t=n.enter,r=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:r}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);r&&forceReflow(r)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},r.performEnter=function(e){var t=this,r=this.props.enter,n=this.context?this.context.isMounting:e,i=this.props.nodeRef?[n]:[ReactDOM.findDOMNode(this),n],o=i[0],s=i[1],a=this.getTimeouts(),l=n?a.appear:a.enter;!e&&!r||config$1.disabled?this.safeSetState({status:ENTERED},function(){t.props.onEntered(o)}):(this.props.onEnter(o,s),this.safeSetState({status:ENTERING},function(){t.props.onEntering(o,s),t.onTransitionEnd(l,function(){t.safeSetState({status:ENTERED},function(){t.props.onEntered(o,s)})})}))},r.performExit=function(){var e=this,t=this.props.exit,r=this.getTimeouts(),n=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);t&&!config$1.disabled?(this.props.onExit(n),this.safeSetState({status:EXITING},function(){e.props.onExiting(n),e.onTransitionEnd(r.exit,function(){e.safeSetState({status:EXITED},function(){e.props.onExited(n)})})})):this.safeSetState({status:EXITED},function(){e.props.onExited(n)})},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,r=!0;return this.nextCallback=function(n){r&&(r=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var r=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(r&&!n){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],o=i[0],s=i[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===UNMOUNTED)return null;var t=this.props,r=t.children;t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef;var n=_objectWithoutPropertiesLoose(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React.createElement(TransitionGroupContext.Provider,{value:null},"function"==typeof r?r(e,n):React.cloneElement(React.Children.only(r),n))},t}(React.Component);function noop$7(){}Transition.contextType=TransitionGroupContext,Transition.propTypes={nodeRef:PropTypes.shape({current:"undefined"==typeof Element?PropTypes.any:function(e,t,r,n,i,o){var s=e[t];return PropTypes.instanceOf(s&&"ownerDocument"in s?s.ownerDocument.defaultView.Element:Element)(e,t,r,n,i,o)}}),children:PropTypes.oneOfType([PropTypes.func.isRequired,PropTypes.element.isRequired]).isRequired,in:PropTypes.bool,mountOnEnter:PropTypes.bool,unmountOnExit:PropTypes.bool,appear:PropTypes.bool,enter:PropTypes.bool,exit:PropTypes.bool,timeout:function(e){var t=timeoutsShape;e.addEndListener||(t=t.isRequired);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return t.apply(void 0,[e].concat(n))},addEndListener:PropTypes.func,onEnter:PropTypes.func,onEntering:PropTypes.func,onEntered:PropTypes.func,onExit:PropTypes.func,onExiting:PropTypes.func,onExited:PropTypes.func},Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$7,onEntering:noop$7,onEntered:noop$7,onExit:noop$7,onExiting:noop$7,onExited:noop$7},Transition.UNMOUNTED=UNMOUNTED,Transition.EXITED=EXITED,Transition.ENTERING=ENTERING,Transition.ENTERED=ENTERED,Transition.EXITING=EXITING;var _addClass=function(e,t){return e&&t&&t.split(" ").forEach(function(t){return addClass$1(e,t)})},removeClass$1=function(e,t){return e&&t&&t.split(" ").forEach(function(t){return removeClass$2(e,t)})},CSSTransition=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,r){var n=t.resolveArguments(e,r),i=n[0],o=n[1];t.removeClasses(i,"exit"),t.addClass(i,o?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,r)},t.onEntering=function(e,r){var n=t.resolveArguments(e,r),i=n[0],o=n[1]?"appear":"enter";t.addClass(i,o,"active"),t.props.onEntering&&t.props.onEntering(e,r)},t.onEntered=function(e,r){var n=t.resolveArguments(e,r),i=n[0],o=n[1]?"appear":"enter";t.removeClasses(i,o),t.addClass(i,o,"done"),t.props.onEntered&&t.props.onEntered(e,r)},t.onExit=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"appear"),t.removeClasses(r,"enter"),t.addClass(r,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var r=t.resolveArguments(e)[0];t.addClass(r,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"exit"),t.addClass(r,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,r){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,r]},t.getClassNames=function(e){var r=t.props.classNames,n="string"==typeof r,i=n?(n&&r?r+"-":"")+e:r[e];return{baseClassName:i,activeClassName:n?i+"-active":r[e+"Active"],doneClassName:n?i+"-done":r[e+"Done"]}},t}_inheritsLoose(t,e);var r=t.prototype;return r.addClass=function(e,t,r){var n=this.getClassNames(t)[r+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===r&&i&&(n+=" "+i),"active"===r&&e&&forceReflow(e),n&&(this.appliedClasses[t][r]=n,_addClass(e,n))},r.removeClasses=function(e,t){var r=this.appliedClasses[t],n=r.base,i=r.active,o=r.done;this.appliedClasses[t]={},n&&removeClass$1(e,n),i&&removeClass$1(e,i),o&&removeClass$1(e,o)},r.render=function(){var e=this.props;e.classNames;var t=_objectWithoutPropertiesLoose(e,["classNames"]);return React.createElement(Transition,_extends({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(React.Component);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function getChildMapping(e,t){var r=Object.create(null);return e&&reactExports.Children.map(e,function(e){return e}).forEach(function(e){r[e.key]=function(e){return t&&reactExports.isValidElement(e)?t(e):e}(e)}),r}function mergeChildMappings(e,t){function r(r){return r in t?t[r]:e[r]}e=e||{},t=t||{};var n,i=Object.create(null),o=[];for(var s in e)s in t?o.length&&(i[s]=o,o=[]):o.push(s);var a={};for(var l in t){if(i[l])for(n=0;n<i[l].length;n++){var c=i[l][n];a[i[l][n]]=r(c)}a[l]=r(l)}for(n=0;n<o.length;n++)a[o[n]]=r(o[n]);return a}function getProp$1(e,t,r){return null!=r[t]?r[t]:e.props[t]}function getInitialChildMapping(e,t){return getChildMapping(e.children,function(r){return reactExports.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:getProp$1(r,"appear",e),enter:getProp$1(r,"enter",e),exit:getProp$1(r,"exit",e)})})}function getNextChildMapping(e,t,r){var n=getChildMapping(e.children),i=mergeChildMappings(t,n);return Object.keys(i).forEach(function(o){var s=i[o];if(reactExports.isValidElement(s)){var a=o in t,l=o in n,c=t[o],u=reactExports.isValidElement(c)&&!c.props.in;!l||a&&!u?l||!a||u?l&&a&&reactExports.isValidElement(c)&&(i[o]=reactExports.cloneElement(s,{onExited:r.bind(null,s),in:c.props.in,exit:getProp$1(s,"exit",e),enter:getProp$1(s,"enter",e)})):i[o]=reactExports.cloneElement(s,{in:!1}):i[o]=reactExports.cloneElement(s,{onExited:r.bind(null,s),in:!0,exit:getProp$1(s,"exit",e),enter:getProp$1(s,"enter",e)})}}),i}CSSTransition.defaultProps={classNames:""},CSSTransition.propTypes=_extends({},Transition.propTypes,{classNames:classNamesShape,onEnter:PropTypes.func,onEntering:PropTypes.func,onEntered:PropTypes.func,onExit:PropTypes.func,onExiting:PropTypes.func,onExited:PropTypes.func});var values$1=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},defaultProps$1={component:"div",childFactory:function(e){return e}},TransitionGroup=function(e){function t(t,r){var n,i=(n=e.call(this,t,r)||this).handleExited.bind(_assertThisInitialized(n));return n.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},n}_inheritsLoose(t,e);var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var r=t.children,n=t.handleExited;return{children:t.firstRender?getInitialChildMapping(e,n):getNextChildMapping(e,r,n),firstRender:!1}},r.handleExited=function(e,t){var r=getChildMapping(this.props.children);e.key in r||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState(function(t){var r=_extends({},t.children);return delete r[e.key],{children:r}}))},r.render=function(){var e=this.props,t=e.component,r=e.childFactory,n=_objectWithoutPropertiesLoose(e,["component","childFactory"]),i=this.state.contextValue,o=values$1(this.state.children).map(r);return delete n.appear,delete n.enter,delete n.exit,null===t?React.createElement(TransitionGroupContext.Provider,{value:i},o):React.createElement(TransitionGroupContext.Provider,{value:i},React.createElement(t,n,o))},t}(React.Component);function getCSSTransitionClassNames(e){return{appear:modsClassName(e({appear:!0})),appearActive:modsClassName(e({appear:"active"})),appearDone:modsClassName(e({appear:"done"})),enter:modsClassName(e({enter:!0})),enterActive:modsClassName(e({enter:"active"})),enterDone:modsClassName(e({enter:"done"})),exit:modsClassName(e({exit:!0})),exitActive:modsClassName(e({exit:"active"})),exitDone:modsClassName(e({exit:"done"}))}}TransitionGroup.propTypes={component:PropTypes.any,children:PropTypes.node,appear:PropTypes.bool,enter:PropTypes.bool,exit:PropTypes.bool,childFactory:PropTypes.func},TransitionGroup.defaultProps=defaultProps$1;const ArrowChevronRight=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 7.25a.75.75 0 0 0 0 1.5h5.69l-2.72 2.72a.75.75 0 1 0 1.06 1.06l4-4a.75.75 0 0 0 0-1.06l-4-4a.75.75 0 0 0-1.06 1.06l2.72 2.72zm7.47 4.22a.75.75 0 1 0 1.06 1.06l4-4a.75.75 0 0 0 0-1.06l-4-4a.75.75 0 1 0-1.06 1.06L12.94 8z",clipRule:"evenodd"})),ArrowDown=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 1.25a.75.75 0 0 1 .75.75v10.19l2.72-2.72a.75.75 0 1 1 1.06 1.06l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2A.75.75 0 0 1 8 1.25",clipRule:"evenodd"})),ArrowLeft=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.75 8a.75.75 0 0 1-.75.75H3.81l2.72 2.72a.75.75 0 1 1-1.06 1.06l-4-4a.75.75 0 0 1 0-1.06l4-4a.75.75 0 0 1 1.06 1.06L3.81 7.25H14a.75.75 0 0 1 .75.75",clipRule:"evenodd"})),ArrowRight=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M1.25 8A.75.75 0 0 1 2 7.25h10.19L9.47 4.53a.75.75 0 0 1 1.06-1.06l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 1 1-1.06-1.06l2.72-2.72H2A.75.75 0 0 1 1.25 8",clipRule:"evenodd"})),ArrowUp=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 14.75a.75.75 0 0 1-.75-.75V3.81L4.53 6.53a.75.75 0 0 1-1.06-1.06l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1-1.06 1.06L8.75 3.81V14a.75.75 0 0 1-.75.75",clipRule:"evenodd"})),ArrowUpRightFromSquare=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10 1.5A.75.75 0 0 0 10 3h1.94L6.97 7.97a.75.75 0 0 0 1.06 1.06L13 4.06V6a.75.75 0 0 0 1.5 0V2.25a.75.75 0 0 0-.75-.75zM7.5 3.25a.75.75 0 0 0-.75-.75H4.5a3 3 0 0 0-3 3v6a3 3 0 0 0 3 3h6a3 3 0 0 0 3-3V9.25a.75.75 0 0 0-1.5 0v2.25a1.5 1.5 0 0 1-1.5 1.5h-6A1.5 1.5 0 0 1 3 11.5v-6A1.5 1.5 0 0 1 4.5 4h2.25a.75.75 0 0 0 .75-.75",clipRule:"evenodd"})),ArrowUturnCcwLeft=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.47 4.72a.75.75 0 0 0 0 1.06l3 3a.75.75 0 0 0 1.06-1.06L4.81 6H9a3.25 3.25 0 0 1 0 6.5H8A.75.75 0 0 0 8 14h1a4.75 4.75 0 1 0 0-9.5H4.81l1.72-1.72a.75.75 0 0 0-1.06-1.06z",clipRule:"evenodd"})),ArrowUturnCwRight=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.53 4.72a.75.75 0 0 1 0 1.06l-3 3a.75.75 0 1 1-1.06-1.06L11.19 6H7a3.25 3.25 0 0 0 0 6.5h1A.75.75 0 0 1 8 14H7a4.75 4.75 0 1 1 0-9.5h4.19L9.47 2.78a.75.75 0 0 1 1.06-1.06z",clipRule:"evenodd"})),ArrowsRotateRight=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 1.5a6.5 6.5 0 0 0-6.445 5.649.75.75 0 1 0 1.488.194A5.001 5.001 0 0 1 11.57 4.5h-1.32a.75.75 0 0 0 0 1.5h3a.75.75 0 0 0 .75-.75v-3a.75.75 0 0 0-1.5 0v1.06A6.48 6.48 0 0 0 8 1.5m-5.25 13a.75.75 0 0 1-.75-.75v-3a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 0 1.5H4.43a5.001 5.001 0 0 0 8.528-2.843.75.75 0 1 1 1.487.194A6.501 6.501 0 0 1 3.5 12.691v1.059a.75.75 0 0 1-.75.75",clipRule:"evenodd"})),Bold$1=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.25 2.25A.75.75 0 0 0 3.5 3v10c0 .414.336.75.75.75H9.5a3.25 3.25 0 0 0 1.477-6.146A3.25 3.25 0 0 0 8.5 2.25zm3.5 5a1.75 1.75 0 1 0 0-3.5h-2v3.5zm-2 1.5v3.5h3a1.75 1.75 0 1 0 0-3.5z",clipRule:"evenodd"})),BroomMotion=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("g",{clipPath:"url(#a)"},reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M11.995.667a.75.75 0 1 0-1.49.166L11.19 7h-.867c-1.64 0-2.896 1.449-3.197 3.06a12.6 12.6 0 0 1-1.2 3.44C5.434 14.448 5 15 5 15h8.5s2.08-1.734 2.488-5.49C16.14 8.094 14.91 7 13.488 7H12.7zM3.75 2.5a.75.75 0 1 0 0 1.5h4.5a.75.75 0 0 0 0-1.5zM.75 6a.75.75 0 1 0 0 1.5h5.5a.75.75 0 0 0 0-1.5zM1 10.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75m6.593 3.25c.393-.866.78-1.94 1.008-3.165C8.819 9.167 9.646 8.5 10.322 8.5h3.167c.332 0 .618.13.797.303a.63.63 0 0 1 .21.545c-.175 1.622-.708 2.779-1.173 3.514a6 6 0 0 1-.461.638h-.999c.539-.706.887-1.728.887-2.75H12c-.351 1.229-1.072 2.088-2.162 2.75z",clipRule:"evenodd"})),reactExports.createElement("defs",null,reactExports.createElement("clipPath",{id:"a"},reactExports.createElement("path",{fill:"currentColor",d:"M0 0h16v16H0z"})))),Check=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.488 3.43a.75.75 0 0 1 .081 1.058l-6 7a.75.75 0 0 1-1.1.042l-3.5-3.5A.75.75 0 0 1 4.03 6.97l2.928 2.927 5.473-6.385a.75.75 0 0 1 1.057-.081",clipRule:"evenodd"})),ChevronDown=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.97 5.47a.75.75 0 0 1 1.06 0L8 9.44l3.97-3.97a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 0 1 0-1.06",clipRule:"evenodd"})),ChevronLeft=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10.53 2.97a.75.75 0 0 1 0 1.06L6.56 8l3.97 3.97a.75.75 0 1 1-1.06 1.06l-4.5-4.5a.75.75 0 0 1 0-1.06l4.5-4.5a.75.75 0 0 1 1.06 0",clipRule:"evenodd"})),ChevronRight=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.47 13.03a.75.75 0 0 1 0-1.06L9.44 8 5.47 4.03a.75.75 0 0 1 1.06-1.06l4.5 4.5a.75.75 0 0 1 0 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0",clipRule:"evenodd"})),ChevronUp=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.03 10.53a.75.75 0 0 1-1.06 0L8 6.56l-3.97 3.97a.75.75 0 1 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1 0 1.06",clipRule:"evenodd"})),CircleCheck=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.5 8a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0m-3.9-1.55a.75.75 0 1 0-1.2-.9L7.419 8.858 6.03 7.47a.75.75 0 0 0-1.06 1.06l2 2a.75.75 0 0 0 1.13-.08z",clipRule:"evenodd"})),CircleInfo=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 13.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14m1-9.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0m-.25 3a.75.75 0 0 0-1.5 0V11a.75.75 0 0 0 1.5 0z",clipRule:"evenodd"})),CircleQuestion=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 13.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14M6.44 4.54c.43-.354.994-.565 1.56-.565 1.217 0 2.34.82 2.34 2.14 0 .377-.078.745-.298 1.1-.208.339-.513.614-.875.867-.217.153-.325.257-.379.328-.038.052-.038.07-.038.089a.75.75 0 0 1-1.5 0c0-.794.544-1.286 1.057-1.645.28-.196.4-.332.458-.426a.54.54 0 0 0 .075-.312c0-.3-.244-.641-.84-.641a1 1 0 0 0-.608.223c-.167.138-.231.287-.231.418a.75.75 0 0 1-1.5 0c0-.674.345-1.22.78-1.577M8 12a1 1 0 1 0 0-2 1 1 0 0 0 0 2",clipRule:"evenodd"})),Code$1=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10.218 3.216a.75.75 0 0 0-1.436-.431l-3 10a.75.75 0 0 0 1.436.43zM4.53 4.97a.75.75 0 0 1 0 1.06L2.56 8l1.97 1.97a.75.75 0 0 1-1.06 1.06l-2.5-2.5a.75.75 0 0 1 0-1.06l2.5-2.5a.75.75 0 0 1 1.06 0m6.94 6.06a.75.75 0 0 1 0-1.06L13.44 8l-1.97-1.97a.75.75 0 0 1 1.06-1.06l2.5 2.5a.75.75 0 0 1 0 1.06l-2.5 2.5a.75.75 0 0 1-1.06 0",clipRule:"evenodd"})),Copy=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 2.5H8A1.5 1.5 0 0 0 6.5 4v1H8a3 3 0 0 1 3 3v1.5h1A1.5 1.5 0 0 0 13.5 8V4A1.5 1.5 0 0 0 12 2.5M11 11h1a3 3 0 0 0 3-3V4a3 3 0 0 0-3-3H8a3 3 0 0 0-3 3v1H4a3 3 0 0 0-3 3v4a3 3 0 0 0 3 3h4a3 3 0 0 0 3-3zM4 6.5h4A1.5 1.5 0 0 1 9.5 8v4A1.5 1.5 0 0 1 8 13.5H4A1.5 1.5 0 0 1 2.5 12V8A1.5 1.5 0 0 1 4 6.5",clipRule:"evenodd"})),CopyCheck=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("g",{fill:"currentColor"},reactExports.createElement("path",{d:"m8 9.076.085-.107a.751.751 0 1 0-1.171-.937L5.438 9.877 5.03 9.47a.747.747 0 0 0-1.06 0 .75.75 0 0 0 0 1.06l.407.408.593.592a.75.75 0 0 0 1.116-.061l.522-.654h.001z"}),reactExports.createElement("path",{fillRule:"evenodd",d:"M12 11a3 3 0 0 0 3-3V4a3 3 0 0 0-3-3H8a3 3 0 0 0-3 3v1H4a3 3 0 0 0-3 3v4a3 3 0 0 0 3 3h4a3 3 0 0 0 3-3v-1zM4 6.5A1.5 1.5 0 0 0 2.5 8v4A1.5 1.5 0 0 0 4 13.5h4A1.5 1.5 0 0 0 9.5 12V8A1.5 1.5 0 0 0 8 6.5zM13.5 4A1.5 1.5 0 0 0 12 2.5H8A1.5 1.5 0 0 0 6.5 4v1H8a3 3 0 0 1 3 3v1.5h1A1.5 1.5 0 0 0 13.5 8z",clipRule:"evenodd"}))),CopyXmark=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.5 12c0 .414-.168.79-.44 1.06A1.5 1.5 0 0 1 8 13.5H4a1.5 1.5 0 0 1-1.06-.44A1.5 1.5 0 0 1 2.5 12V8c0-.414.168-.79.44-1.06A1.5 1.5 0 0 1 4 6.5h4c.414 0 .79.168 1.06.44.272.27.44.646.44 1.06zm-1.47-1.03L7.06 10l.97-.97a.75.75 0 0 0-1.06-1.06L6 8.94l-.97-.97a.75.75 0 0 0-1.06 1.06l.97.97-.97.97a.75.75 0 0 0 1.06 1.06l.97-.97.97.97a.75.75 0 0 0 1.06-1.06M6.5 5H8a3 3 0 0 1 3 3v1.5h1A1.5 1.5 0 0 0 13.5 8V4A1.5 1.5 0 0 0 12 2.5H8A1.5 1.5 0 0 0 6.5 4zM5 4a3 3 0 0 1 3-3h4a3 3 0 0 1 3 3v4a3 3 0 0 1-3 3h-1v1a3 3 0 0 1-3 3H4a3 3 0 0 1-3-3V8a3 3 0 0 1 3-3h1z",clipRule:"evenodd"})),Ellipsis=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M9.5 8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m5 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0",clipRule:"evenodd"})),Eye=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M1.87 8.515 1.641 8l.229-.515a6.708 6.708 0 0 1 12.26 0l.228.515-.229.515a6.708 6.708 0 0 1-12.259 0M.5 6.876l-.26.585a1.33 1.33 0 0 0 0 1.079l.26.584a8.208 8.208 0 0 0 15 0l.26-.584a1.33 1.33 0 0 0 0-1.08l-.26-.584a8.208 8.208 0 0 0-15 0M9.5 8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0M11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0",clipRule:"evenodd"})),FaceSmile=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.5 8a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0M6.67 9.665a.75.75 0 0 0-1.34.67c.403.809 1.452 1.415 2.67 1.415s2.267-.606 2.67-1.415a.75.75 0 1 0-1.34-.67c-.097.191-.548.585-1.33.585s-1.233-.394-1.33-.585M10 8a.75.75 0 0 1-.75-.75v-1a.75.75 0 0 1 1.5 0v1A.75.75 0 0 1 10 8m-4.75-.75a.75.75 0 0 0 1.5 0v-1a.75.75 0 0 0-1.5 0z",clipRule:"evenodd"})),FileCode=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5 13.5h6a1.5 1.5 0 0 0 1.5-1.5V7.243a1.5 1.5 0 0 0-.44-1.061L8.819 2.939a1.5 1.5 0 0 0-1.06-.439H5A1.5 1.5 0 0 0 3.5 4v8A1.5 1.5 0 0 0 5 13.5m9-6.257a3 3 0 0 0-.879-2.122L9.88 1.88A3 3 0 0 0 7.757 1H5a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h6a3 3 0 0 0 3-3zM8.72 10.53a.75.75 0 0 1 0-1.06l.97-.97-.97-.97a.75.75 0 0 1 1.06-1.06l1.5 1.5a.75.75 0 0 1 0 1.06l-1.5 1.5a.75.75 0 0 1-1.06 0m-1.44-3a.75.75 0 0 0-1.06-1.06l-1.5 1.5a.75.75 0 0 0 0 1.06l1.5 1.5a.75.75 0 1 0 1.06-1.06l-.97-.97z",clipRule:"evenodd"})),Font=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 2.25c-.618 0-1.169.39-1.373.974l-3.335 9.528a.75.75 0 0 0 1.416.496L5.845 10h4.31l1.137 3.248a.75.75 0 0 0 1.416-.496L9.373 3.224A1.455 1.455 0 0 0 8 2.25M9.63 8.5 8 3.842 6.37 8.5z",clipRule:"evenodd"})),FontCursor=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10 2.25a.75.75 0 0 1 .75-.75c.576 0 1.102.217 1.5.573a2.24 2.24 0 0 1 1.5-.573.75.75 0 0 1 0 1.5.75.75 0 0 0-.75.75v8.75c0 .414.336.75.75.75a.75.75 0 0 1 0 1.5 2.24 2.24 0 0 1-1.5-.573 2.24 2.24 0 0 1-1.5.573.75.75 0 0 1 0-1.5.75.75 0 0 0 .75-.75V3.75a.75.75 0 0 0-.75-.75.75.75 0 0 1-.75-.75M5.75 3c-.618 0-1.168.39-1.374.972L1.543 12a.75.75 0 1 0 1.414.5L3.84 10h3.822l.882 2.5a.75.75 0 1 0 1.414-.5L7.124 3.972A1.46 1.46 0 0 0 5.75 3m1.381 5.5L5.75 4.587 4.369 8.5z",clipRule:"evenodd"})),Gear=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.199 2H8.8a.2.2 0 0 1 .2.2c0 1.808 1.958 2.939 3.524 2.034a.2.2 0 0 1 .271.073l.802 1.388a.2.2 0 0 1-.073.272c-1.566.904-1.566 3.164 0 4.069a.2.2 0 0 1 .073.271l-.802 1.388a.2.2 0 0 1-.271.073C10.958 10.863 9 11.993 9 13.8a.2.2 0 0 1-.199.2H7.2a.2.2 0 0 1-.2-.2c0-1.808-1.958-2.938-3.524-2.034a.2.2 0 0 1-.272-.073l-.8-1.388a.2.2 0 0 1 .072-.271c1.566-.905 1.566-3.165 0-4.07a.2.2 0 0 1-.073-.27l.801-1.389a.2.2 0 0 1 .272-.072C5.042 5.138 7 4.007 7 2.199c0-.11.089-.199.199-.199M5.5 2.2c0-.94.76-1.7 1.699-1.7H8.8c.94 0 1.7.76 1.7 1.7a.85.85 0 0 0 1.274.735 1.7 1.7 0 0 1 2.32.622l.802 1.388c.469.813.19 1.851-.622 2.32a.85.85 0 0 0 0 1.472 1.7 1.7 0 0 1 .622 2.32l-.802 1.388a1.7 1.7 0 0 1-2.32.622.85.85 0 0 0-1.274.735c0 .939-.76 1.7-1.699 1.7H7.2a1.7 1.7 0 0 1-1.699-1.7.85.85 0 0 0-1.274-.735 1.7 1.7 0 0 1-2.32-.622l-.802-1.388a1.7 1.7 0 0 1 .622-2.32.85.85 0 0 0 0-1.471 1.7 1.7 0 0 1-.622-2.32l.801-1.389a1.7 1.7 0 0 1 2.32-.622A.85.85 0 0 0 5.5 2.2m4 5.8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0M11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0",clipRule:"evenodd"})),Grip=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7 3a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0M5.5 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m5 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m0-5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M7 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m3.5 1.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3",clipRule:"evenodd"})),GripHorizontal=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 9a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3m6.5 1.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0m0-5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0m-5 0a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0M13 9a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3m1.5-3.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0",clipRule:"evenodd"})),Heading$1=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.25 2.25A.75.75 0 0 1 5 3v4.25h6V3a.75.75 0 0 1 1.5 0v10a.75.75 0 0 1-1.5 0V8.75H5V13a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75",clipRule:"evenodd"})),Heading1=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14 4.25a.75.75 0 0 0-1.248-.56l-2.25 2a.75.75 0 0 0 .996 1.12l1.002-.89v5.83a.75.75 0 0 0 1.5 0zm-11.5 0a.75.75 0 0 0-1.5 0v7.496a.75.75 0 0 0 1.5 0V8.75h4v2.996a.75.75 0 0 0 1.5 0V4.25a.75.75 0 0 0-1.5 0v3h-4z",clipRule:"evenodd"})),Heading2=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.5 4.25a.75.75 0 0 0-1.5 0v7.496a.75.75 0 0 0 1.5 0V8.75h4v2.996a.75.75 0 0 0 1.5 0V4.25a.75.75 0 0 0-1.5 0v3h-4zm8.403 1.783A1.364 1.364 0 0 1 12.226 5h.226a1.071 1.071 0 0 1 .672 1.906l-3.61 2.906a1.51 1.51 0 0 0 .947 2.688h3.789a.75.75 0 0 0 0-1.5h-3.793l-.003-.003-.003-.004v-.004a.01.01 0 0 1 .004-.008l3.61-2.907A2.571 2.571 0 0 0 12.452 3.5h-.226c-1.314 0-2.46.894-2.778 2.17l-.038.148a.75.75 0 1 0 1.456.364z",clipRule:"evenodd"})),Heading3=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.5 4.25a.75.75 0 0 0-1.5 0v7.496a.75.75 0 0 0 1.5 0V8.75h4v2.996a.75.75 0 0 0 1.5 0V4.25a.75.75 0 0 0-1.5 0v3h-4zm8.114 1.496c.202-.504.69-.834 1.232-.834h.28a.94.94 0 0 1 .929.796l.027.18a1.15 1.15 0 0 1-.911 1.303l-.8.16a.662.662 0 0 0 .129 1.31h1.21a.89.89 0 0 1 .882 1.017 1.67 1.67 0 0 1-1.414 1.414l-.103.015a1.81 1.81 0 0 1-1.828-.9l-.018-.033a.662.662 0 0 0-1.152.652l.018.032a3.13 3.13 0 0 0 3.167 1.559l.103-.015a2.99 2.99 0 0 0 2.537-2.537 2.21 2.21 0 0 0-1.058-2.216 2.47 2.47 0 0 0 .547-1.963l-.028-.179a2.26 2.26 0 0 0-2.237-1.919h-.28a2.65 2.65 0 0 0-2.46 1.666.662.662 0 1 0 1.228.492",clipRule:"evenodd"})),Heading4=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.25 4.25a.75.75 0 0 0-1.347-.454l-4 5.25A.75.75 0 0 0 9.5 10.25h3.25v1.496a.75.75 0 0 0 1.5 0V10.25h.25a.75.75 0 1 0 0-1.5h-.25zm-1.5 2.222V8.75h-1.736zM2.5 4.25a.75.75 0 1 0-1.5 0v7.496a.75.75 0 0 0 1.5 0V8.75h4v2.996a.75.75 0 0 0 1.5 0V4.25a.75.75 0 1 0-1.5 0v3h-4z",clipRule:"evenodd"})),Heading5=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.5 4.25a.75.75 0 0 0-1.5 0v7.496a.75.75 0 0 0 1.5 0V8.75h4v2.996a.75.75 0 0 0 1.5 0V4.25a.75.75 0 0 0-1.5 0v3h-4zm8-.75a1.25 1.25 0 0 0-1.25 1.25V7.5a.75.75 0 0 0 1.221.584l.033-.022c.04-.024.118-.067.236-.112.235-.091.643-.2 1.26-.2.892 0 1.534.751 1.534 1.75 0 .366-.139.735-.413 1.01-.265.268-.7.49-1.371.49-.568 0-.905-.184-1.094-.336a1.2 1.2 0 0 1-.24-.26l-.002-.003a.75.75 0 0 0-1.335.684l.671-.335-.67.336v.003l.003.003.004.01.012.02.034.06q.042.071.119.174c.102.136.254.31.467.48.436.348 1.099.664 2.031.664 1.027 0 1.86-.352 2.437-.933a2.94 2.94 0 0 0 .847-2.067c0-1.591-1.096-3.25-3.034-3.25a5.6 5.6 0 0 0-1.25.133V5H14a.75.75 0 0 0 0-1.5z",clipRule:"evenodd"})),Heading6=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.5 4.25a.75.75 0 0 0-1.5 0v7.496a.75.75 0 0 0 1.5 0V8.75h4v2.996a.75.75 0 0 0 1.5 0V4.25a.75.75 0 0 0-1.5 0v3h-4zm9.9 2.532a4.9 4.9 0 0 0-1.843.293L12.273 5c.888 0 1.293.251 1.801.566l.006.003a.75.75 0 0 0 .79-1.275c-.59-.365-1.286-.794-2.597-.794-.992 0-1.855.424-2.442 1.255C9.267 5.553 9 6.665 9 8c0 1.326.246 2.438.802 3.24.583.842 1.453 1.26 2.47 1.26 1.918 0 3.228-1.236 3.228-2.795 0-.984-.388-1.74-1.024-2.237-.607-.474-1.372-.661-2.076-.686M11.056 5.62c-.225.32-.41.794-.498 1.455L12.272 5c-.522 0-.92.201-1.217.62m-.021 4.765c-.233-.336-.418-.849-.495-1.58.048-.056.165-.165.436-.282.372-.16.873-.26 1.371-.242.503.018.926.15 1.206.369.25.195.447.504.447 1.055 0 .58-.48 1.295-1.727 1.295-.564 0-.956-.207-1.238-.615",clipRule:"evenodd"})),Italic$1=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.25 2a.75.75 0 0 0 0 1.5h1.317l-2.7 9H4.25a.75.75 0 1 0 0 1.5h4.5a.75.75 0 0 0 0-1.5H7.433l2.7-9h1.617a.75.75 0 0 0 0-1.5z",clipRule:"evenodd"})),LayoutList=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4 3.5h1.25v2H2.5V5A1.5 1.5 0 0 1 4 3.5m2.75 2v-2H12A1.5 1.5 0 0 1 13.5 5v.5zM2.5 7h2.75v2H2.5zm0 3.5v.5A1.5 1.5 0 0 0 4 12.5h1.25v-2zm4.25 0v2H12a1.5 1.5 0 0 0 1.5-1.5v-.5zM13.5 9V7H6.75v2zM1 5a3 3 0 0 1 3-3h8a3 3 0 0 1 3 3v6a3 3 0 0 1-3 3H4a3 3 0 0 1-3-3z",clipRule:"evenodd"})),LayoutTabs=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.999 3.5h.242c.559 0 1.049.37 1.202.907l.171.598A2.75 2.75 0 0 0 8.26 7h5.24v4a1.5 1.5 0 0 1-1.5 1.5H4A1.5 1.5 0 0 1 2.5 11V5a1.5 1.5 0 0 1 1.499-1.5m9.501 2h-1.242a1.25 1.25 0 0 1-1.201-.907l-.171-.598a3 3 0 0 0-.195-.495H12A1.5 1.5 0 0 1 13.5 5zM8.241 2H4a3 3 0 0 0-.457.035A3 3 0 0 0 2 2.764 3 3 0 0 0 1 5v6a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V5a3 3 0 0 0-3-3zM7 3.5h1.242c.559 0 1.049.37 1.202.907l.171.598q.075.261.195.495H8.26a1.25 1.25 0 0 1-1.202-.907l-.171-.598A3 3 0 0 0 6.69 3.5z",clipRule:"evenodd"})),LetterM=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.062 2c.454 0 .876.234 1.115.62L8 7.162l2.823-4.542a1.312 1.312 0 0 1 2.427.692v9.938a.75.75 0 0 1-1.5 0V3.97L8.637 8.98a.75.75 0 0 1-1.274 0L4.25 3.97v9.28a.75.75 0 0 1-1.5 0V3.312C2.75 2.588 3.338 2 4.062 2",clipRule:"evenodd"})),Link$2=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.47 6.53a.75.75 0 0 1 1.06 1.061l-.727.727a2.743 2.743 0 0 0 3.879 3.879l.727-.727a.75.75 0 0 1 1.06 1.06l-.726.727a4.243 4.243 0 0 1-6-6zm8 1.879a.75.75 0 0 0 1.06 1.06l.727-.726a4.243 4.243 0 0 0-6-6l-.727.727a.75.75 0 0 0 1.061 1.06l.727-.727a2.743 2.743 0 0 1 3.879 3.879zm-.94-1.879a.75.75 0 1 0-1.06-1.06l-4 4a.75.75 0 1 0 1.06 1.06z",clipRule:"evenodd"})),ListOl=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.21 2.5a.5.5 0 0 0-.796-.403l-.71.524a.5.5 0 0 0 .507.856V5a.5.5 0 0 0 1 0zm2.54.5a.75.75 0 1 0 0 1.5h8.5a.75.75 0 0 0 0-1.5zm0 8.5a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5zM5 8a.75.75 0 0 1 .75-.75h8.5a.75.75 0 0 1 0 1.5h-8.5A.75.75 0 0 1 5 8m-2.596-.67c-.07.051-.087.097-.09.116a.5.5 0 0 1-.988-.149c.051-.345.26-.61.495-.779.236-.169.531-.268.83-.268.345 0 .666.109.902.343s.337.543.337.85c0 .51-.321.855-.76 1.278l-.02.018-.013.011h.493a.5.5 0 0 1 0 1H1.75a.5.5 0 0 1-.326-.879l1.022-.88c.223-.216.338-.344.398-.434.046-.069.046-.092.046-.111v-.002c0-.09-.027-.127-.041-.141-.013-.013-.062-.053-.199-.053a.44.44 0 0 0-.246.08M1.9 10.5a.5.5 0 0 0 0 1h.38l-.15.18a.5.5 0 0 0 .383.82c.259 0 .365.077.407.122.051.054.08.133.08.218a.02.02 0 0 1-.004.014.2.2 0 0 1-.057.052.7.7 0 0 1-.371.094.55.55 0 0 1-.258-.057c-.059-.032-.075-.061-.076-.064a.5.5 0 0 0-.91.416c.213.464.728.705 1.244.705.319 0 .651-.082.92-.258.275-.181.512-.487.512-.902 0-.293-.096-.634-.355-.906a1.3 1.3 0 0 0-.252-.206l.34-.407a.5.5 0 0 0-.383-.821z",clipRule:"evenodd"})),ListUl=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.5 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5m3.25-2a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5zm0 8.5a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5zM5 8a.75.75 0 0 1 .75-.75h8.5a.75.75 0 0 1 0 1.5h-8.5A.75.75 0 0 1 5 8M3.75 8a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M2.5 13.5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})),LogoMarkdown=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.443 4.699A1.294 1.294 0 0 0 1 5.294v5.956a.75.75 0 0 0 1.5 0V6.139l1.834 3.54a.75.75 0 0 0 1.332 0L7.5 6.138v5.111a.75.75 0 0 0 1.5 0V5.294A1.294 1.294 0 0 0 6.557 4.7L5 7.703zm9.807.051a.75.75 0 0 0-1.5 0v4.69l-.47-.47a.75.75 0 1 0-1.06 1.06l1.75 1.75a.75.75 0 0 0 1.06 0l1.75-1.75a.75.75 0 1 0-1.06-1.06l-.47.47z",clipRule:"evenodd"})),Minus=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M1.75 8a.75.75 0 0 1 .75-.75h11a.75.75 0 0 1 0 1.5h-11A.75.75 0 0 1 1.75 8",clipRule:"evenodd"})),Paperclip=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m9.77 10.73.01-.01 3.08-3.08a3.889 3.889 0 1 0-5.5-5.5L4.73 4.77l-.01.01-1.667 1.666a5.303 5.303 0 0 0 7.5 7.5l3.167-3.166a.75.75 0 1 0-1.061-1.06l-3.166 3.166a3.803 3.803 0 1 1-5.379-5.379L5.33 6.291l.011-.01L8.421 3.2a2.39 2.39 0 0 1 3.38 3.378l-1.13 1.13-.012.012-2.995 2.994a.975.975 0 1 1-1.378-1.378L9.28 6.34a.75.75 0 0 0-1.06-1.06L5.225 8.274a2.475 2.475 0 0 0 3.5 3.5z",clipRule:"evenodd"})),Picture=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M11.5 3h-7A1.5 1.5 0 0 0 3 4.5v5.027l.962-.7a1.75 1.75 0 0 1 2.079.016l.928.696 2.368-2.03a1.75 1.75 0 0 1 2.325.043L13 8.787V4.5A1.5 1.5 0 0 0 11.5 3m3 7.498V4.5a3 3 0 0 0-3-3h-7a3 3 0 0 0-3 3v7a3 3 0 0 0 3 3h7a3 3 0 0 0 3-3zm-1.5.33-2.355-2.174a.25.25 0 0 0-.332-.006L7.488 11.07l-.457.392-.481-.361-1.41-1.057a.25.25 0 0 0-.296-.002L3 11.381v.119A1.5 1.5 0 0 0 4.5 13h7a1.5 1.5 0 0 0 1.5-1.5zM7.5 6a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0",clipRule:"evenodd"})),Plus=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 1.75a.75.75 0 0 1 .75.75v4.75h4.75a.75.75 0 0 1 0 1.5H8.75v4.75a.75.75 0 0 1-1.5 0V8.75H2.5a.75.75 0 0 1 0-1.5h4.75V2.5A.75.75 0 0 1 8 1.75",clipRule:"evenodd"})),QuoteClose=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("g",{clipPath:"url(#a)"},reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.589 9.67A2.75 2.75 0 0 1 1.5 7v-.25A2.75 2.75 0 0 1 4.25 4h.25a2.747 2.747 0 0 1 2.748 2.657v.003h.002V7q0 .197-.027.386-.03.392-.09.77a8 8 0 0 1-.559 1.918 7.2 7.2 0 0 1-2.162 2.801l-.098.076A.24.24 0 0 1 4.17 13a.25.25 0 0 1-.22-.367 17 17 0 0 0 .65-1.384c.197-.474.396-1.013.557-1.578a2.7 2.7 0 0 1-.657.079h-.25q-.343-.001-.661-.08m-.549 1.405A4.25 4.25 0 0 1 0 7v-.25A4.25 4.25 0 0 1 4.25 2.5h.25c1.452 0 2.733.728 3.5 1.838A4.25 4.25 0 0 1 11.5 2.5h.25A4.25 4.25 0 0 1 16 6.664V7q0 .275-.035.543c-.207 2.62-1.358 4.966-3.488 6.599a1.74 1.74 0 0 1-1.057.358c-1.341 0-2.146-1.425-1.548-2.564.111-.211.26-.508.418-.86a4.25 4.25 0 0 1-2.005-1.297 8.76 8.76 0 0 1-3.058 4.363 1.74 1.74 0 0 1-1.057.358c-1.341 0-2.146-1.425-1.548-2.564.111-.211.26-.508.418-.86m7.8-1.406q.318.079.661.08h.25a2.8 2.8 0 0 0 .657-.079 14 14 0 0 1-.68 1.865 18 18 0 0 1-.527 1.097.25.25 0 0 0 .22.367.24.24 0 0 0 .144-.049l.098-.076q.452-.358.832-.768a7.2 7.2 0 0 0 1.39-2.172 8 8 0 0 0 .498-1.779 9 9 0 0 0 .091-.77q.027-.19.027-.386v-.339H14.5v-.004A2.747 2.747 0 0 0 11.75 4h-.251a2.75 2.75 0 0 0-2.75 2.75V7c0 1.29.89 2.374 2.089 2.67",clipRule:"evenodd"})),reactExports.createElement("defs",null,reactExports.createElement("clipPath",{id:"a"},reactExports.createElement("path",{fill:"currentColor",d:"M0 0h16v16H0z"})))),Scissors=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.5 6a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m-3-1.5a3 3 0 0 0 4.524 2.585L6.939 8l-.915.915a3 3 0 1 0 1.06 1.06L8.122 8.94l5.501 3.209a.75.75 0 1 0 .756-1.296L9.488 8l4.89-2.852a.75.75 0 0 0-.756-1.296l-5.5 3.209-1.037-1.037A3 3 0 1 0 1.5 4.5m3 5.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3",clipRule:"evenodd"})),SquareCheck=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.5 3h7A1.5 1.5 0 0 1 13 4.5v7a1.5 1.5 0 0 1-1.5 1.5h-7A1.5 1.5 0 0 1 3 11.5v-7A1.5 1.5 0 0 1 4.5 3m-3 1.5a3 3 0 0 1 3-3h7a3 3 0 0 1 3 3v7a3 3 0 0 1-3 3h-7a3 3 0 0 1-3-3zm10.092 1.46a.75.75 0 0 0-1.184-.92L7.43 8.869l-1.4-1.4A.75.75 0 0 0 4.97 8.53l2 2a.75.75 0 0 0 1.122-.07z",clipRule:"evenodd"})),Sticker=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M11.5 3h-7A1.5 1.5 0 0 0 3 4.5v7A1.5 1.5 0 0 0 4.5 13h3v-2.5a3 3 0 0 1 3-3H13v-3A1.5 1.5 0 0 0 11.5 3m1.303 6a1.5 1.5 0 0 1-.242.318l-3.243 3.243a1.5 1.5 0 0 1-.318.242V10.5A1.5 1.5 0 0 1 10.5 9zm.818 1.379a3 3 0 0 0 .879-2.122V4.5a3 3 0 0 0-3-3h-7a3 3 0 0 0-3 3v7a3 3 0 0 0 3 3h3.757a3 3 0 0 0 2.122-.879z",clipRule:"evenodd"})),Strikethrough$1=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.502 2.757C6.214 2.236 7.122 2 7.984 2c1.685 0 3.015.572 3.687 1.915a.75.75 0 1 1-1.342.67C10.001 3.93 9.331 3.5 7.984 3.5c-.611 0-1.19.17-1.597.468-.384.28-.627.678-.627 1.242 0 .403.165.758.463 1.04H4.447a2.9 2.9 0 0 1-.187-1.04c0-1.084.507-1.916 1.242-2.453m6.047 5.993h1.201a.75.75 0 0 0 0-1.5h-9.5a.75.75 0 0 0 0 1.5h5.475l.043.012h.002c1.196.323 1.98 1.005 1.98 1.988 0 .669-.289 1.063-.742 1.33-.5.296-1.222.437-2 .437-1.398 0-2.453-.472-2.796-1.504a.75.75 0 1 0-1.424.474c.657 1.969 2.602 2.53 4.22 2.53.915 0 1.94-.16 2.762-.644.869-.512 1.48-1.376 1.48-2.623 0-.822-.276-1.481-.7-2",clipRule:"evenodd"})),Text$4=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.279 2.544A.75.75 0 0 1 4 2h8a.75.75 0 0 1 .721.544l.5 1.75a.75.75 0 1 1-1.442.412L11.434 3.5H8.75l-.004 9H9.5a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1 0-1.5h.746l.004-9H4.566L4.22 4.706a.75.75 0 1 1-1.442-.412z",clipRule:"evenodd"})),TextIndent=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.25 2H2.75a.75.75 0 0 0 0 1.5h10.5a.75.75 0 0 0 0-1.5m0 3.5h-5.5a.75.75 0 0 0 0 1.5h5.5a.75.75 0 0 0 0-1.5m0 3.5h-5.5a.75.75 0 0 0 0 1.5h5.5a.75.75 0 0 0 0-1.5m-10.5 3.5h10.5a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1 0-1.5m.49-7a.74.74 0 0 1 .463.162l1.906 1.526a1.04 1.04 0 0 1 0 1.624l-1.906 1.526A.74.74 0 0 1 2.5 9.76V6.24a.74.74 0 0 1 .74-.74",clipRule:"evenodd"})),TextOutdent=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.25 2H2.75a.75.75 0 0 0 0 1.5h10.5a.75.75 0 0 0 0-1.5m0 3.5h-5.5a.75.75 0 0 0 0 1.5h5.5a.75.75 0 0 0 0-1.5m0 3.5h-5.5a.75.75 0 0 0 0 1.5h5.5a.75.75 0 0 0 0-1.5m-10.5 3.5h10.5a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1 0-1.5m2.01-7a.74.74 0 0 0-.463.162L2.39 7.188a1.04 1.04 0 0 0 0 1.624l1.907 1.526A.74.74 0 0 0 5.5 9.76V6.24a.74.74 0 0 0-.74-.74",clipRule:"evenodd"})),Thunderbolt=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m7.836 6 .76-2.027L9.336 2H5.5a.72.72 0 0 0-.664.45L2.513 8.257a.177.177 0 0 0 .164.243h4.965l-.732 2.013-1.082 2.975a.382.382 0 0 0 .637.392l6.956-7.391A.29.29 0 0 0 13.21 6H7.835m2.727-3 .235-.627A1.386 1.386 0 0 0 9.5.5h-4c-.906 0-1.72.552-2.057 1.393L1.12 7.7A1.677 1.677 0 0 0 2.677 10H5.5l-.545 1.5-.537 1.475a1.882 1.882 0 0 0 3.14 1.933l6.956-7.391A1.79 1.79 0 0 0 13.21 4.5H10z",clipRule:"evenodd"})),TrashBin=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9 2H7a.5.5 0 0 0-.5.5V3h3v-.5A.5.5 0 0 0 9 2m2 1v-.5a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2V3H2.251a.75.75 0 0 0 0 1.5h.312l.317 7.625A3 3 0 0 0 5.878 15h4.245a3 3 0 0 0 2.997-2.875l.318-7.625h.312a.75.75 0 0 0 0-1.5zm.936 1.5H4.064l.315 7.562A1.5 1.5 0 0 0 5.878 13.5h4.245a1.5 1.5 0 0 0 1.498-1.438zm-6.186 2v5a.75.75 0 0 0 1.5 0v-5a.75.75 0 0 0-1.5 0m3.75-.75a.75.75 0 0 1 .75.75v5a.75.75 0 0 1-1.5 0v-5a.75.75 0 0 1 .75-.75",clipRule:"evenodd"})),TriangleExclamation=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.134 2.994 2.217 11.5a1 1 0 0 0 .866 1.5h9.834a1 1 0 0 0 .866-1.5L8.866 2.993a1 1 0 0 0-1.732 0m3.03-.75c-.962-1.665-3.366-1.665-4.329 0L.918 10.749c-.963 1.666.24 3.751 2.165 3.751h9.834c1.925 0 3.128-2.085 2.164-3.751zM8 5a.75.75 0 0 1 .75.75v2a.75.75 0 0 1-1.5 0v-2A.75.75 0 0 1 8 5m1 5.75a1 1 0 1 1-2 0 1 1 0 0 1 2 0",clipRule:"evenodd"})),Underline$1=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5 2.75a.75.75 0 0 0-1.5 0V7a4.5 4.5 0 0 0 9 0V2.75a.75.75 0 0 0-1.5 0V7a3 3 0 0 1-6 0zm-.75 9.75a.75.75 0 0 0 0 1.5h7.5a.75.75 0 0 0 0-1.5z",clipRule:"evenodd"})),Xmark=e=>reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.47 3.47a.75.75 0 0 1 1.06 0L8 6.94l3.47-3.47a.75.75 0 1 1 1.06 1.06L9.06 8l3.47 3.47a.75.75 0 1 1-1.06 1.06L8 9.06l-3.47 3.47a.75.75 0 0 1-1.06-1.06L6.94 8 3.47 4.53a.75.75 0 0 1 0-1.06",clipRule:"evenodd"})),didWarn=new Map;function warnOnce$1(e){e&&!didWarn.has(e)&&didWarn.set(e,!0)}const PARAM_REGEXP=/{{(.*?)}}/g;function replaceParams(e,t){let r,n="",i=PARAM_REGEXP.lastIndex=0;for(;r=PARAM_REGEXP.exec(e);){i!==r.index&&(n+=e.slice(i,r.index)),i=PARAM_REGEXP.lastIndex;const[o,s]=r;s&&Object.prototype.hasOwnProperty.call(t,s)?n+=t[s]:n+=o}return i<e.length&&(n+=e.slice(i)),n}const KEYSET_SEPARATOR="::",MAX_NESTING_DEPTH=1,getNestingTranslationsRegExp=()=>new RegExp(/\$t{([^}]+)}/g);var ErrorCode,ErrorCode2;function mapErrorCodeToMessage(e){const{code:t,fallbackLang:r,lang:n}=e;let i=`Using language ${n}. `;switch(t){case ErrorCode.EmptyKeyset:i+="Keyset is empty.";break;case ErrorCode.EmptyLanguageData:i+="Language data is empty.";break;case ErrorCode.KeysetNotFound:i+="Keyset not found.";break;case ErrorCode.MissingKey:i+="Missing key.";break;case ErrorCode.MissingKeyFor0:return i+="Missing key for 0",i;case ErrorCode.MissingKeyParamsCount:i+="Missing params.count for key.";break;case ErrorCode.MissingKeyPlurals:i+="Missing required plurals.";break;case ErrorCode.NoLanguageData:i=`Language "${n}" is not defined, make sure you call setLang for the same language you called registerKeysets for!`}return r&&(i+=` Trying to use fallback language "${r}"...`),i}ErrorCode2=ErrorCode||(ErrorCode={}),ErrorCode2.EmptyKeyset="EMPTY_KEYSET",ErrorCode2.EmptyLanguageData="EMPTY_LANGUAGE_DATA",ErrorCode2.KeysetNotFound="KEYSET_NOT_FOUND",ErrorCode2.MissingKey="MISSING_KEY",ErrorCode2.MissingKeyFor0="MISSING_KEY_FOR_0",ErrorCode2.MissingKeyParamsCount="MISSING_KEY_PARAMS_COUNT",ErrorCode2.MissingKeyPlurals="MISSING_KEY_PLURALS",ErrorCode2.MissingInheritedKey="MISSING_INHERITED_KEY",ErrorCode2.NestedPlural="NESTED_PLURAL",ErrorCode2.ExceedTranslationNestingDepth="EXCEED_TRANSLATION_NESTING_DEPTH",ErrorCode2.NoLanguageData="NO_LANGUAGE_DATA",Object.values(ErrorCode);const hasNestingTranslations=e=>{var t;const r=getNestingTranslationsRegExp().exec(e);return(null!==(t=null==r?void 0:r.length)&&void 0!==t?t:0)>0},getPluralValues=e=>e instanceof Array?e:e instanceof Object?Object.values(e):[];var PluralForm,PluralForm2;function isPluralValue(e){return"string"!=typeof e}function pluralizerEn(e,t){return 0===e?t.None:1===e||-1===e?t.One:t.Many}function pluralizerRu(e,t){const r=Math.abs(e%10),n=Math.abs(e%100);return 0===e?t.None:1===r&&11!==n?t.One:r>1&&r<5&&(n<10||n>20)?t.Few:t.Many}function getPluralViaIntl(e,t,r){if(e.zero&&0===t)return e.zero;if(!Intl.PluralRules)throw new Error("Intl.PluralRules is not available. Use polyfill.");const n=new Intl.PluralRules(r).select(t);return"other"===n&&void 0===e.other?e.many||e.few:e[n]||e.other}function getPluralValue({value:e,count:t,lang:r,pluralizers:n,log:i,key:o}){if(!Array.isArray(e))return getPluralViaIntl(e,t,r)||o;if(!n)return i("Can not use deprecated plural format without pluralizers"),o;if(n[r]||i(`Pluralization is not configured for language '${r}', falling back to the english ruleset`),e.length<3)return i("Missing required plurals"),o;const s=n[r]||n.en;return s?e[s(t,PluralForm)]||e[PluralForm.Many]||o:(i("Fallback pluralization is not configured!"),o)}PluralForm2=PluralForm||(PluralForm={}),PluralForm2[PluralForm2.One=0]="One",PluralForm2[PluralForm2.Few=1]="Few",PluralForm2[PluralForm2.Many=2]="Many",PluralForm2[PluralForm2.None=3]="None";class I18N{constructor(e={}){this.data={},this.pluralizers={en:pluralizerEn,ru:pluralizerRu},this.logger=null;const{data:t,fallbackLang:r,lang:n,logger:i=null}=e;this.fallbackLang=r,this.lang=n,this.logger=i,t&&Object.entries(t).forEach(([e,t])=>{this.registerKeysets(e,t)})}setLang(e){this.lang=e}setFallbackLang(e){this.fallbackLang=e}configurePluralization(e){this.pluralizers=Object.assign({},this.pluralizers,e)}registerKeyset(e,t,r={}){this.data[e]&&Object.prototype.hasOwnProperty.call(this.data[e],t)&&this.warn(`Keyset '${t}' is already registered.`),this.data[e]=Object.assign({},this.data[e],{[t]:r})}registerKeysets(e,t){Object.keys(t).forEach(r=>{this.registerKeyset(e,r,t[r])})}has(e,t,r){var n;const i=this.getLanguageData(r);return Boolean(i&&i[e]&&(null===(n=i[e])||void 0===n?void 0:n[t]))}i18n(e,t,r){if(!this.lang&&!this.fallbackLang)throw new Error('Language is not specified. You should set at least one of these: "lang", "fallbackLang"');let n;return this.lang?n=this._i18n(e,t,this.lang,r):this.warn("Target language is not specified."),void 0===n&&this.fallbackLang&&this.fallbackLang!==this.lang&&(n=this._i18n(e,t,this.fallbackLang,r)),null!=n?n:t}keyset(e){return(t,r)=>this.i18n(e,t,r)}warn(e,t,r){var n;let i="";t?(i+=t,r&&(i+=`.${r}`)):i="languageData",null===(n=this.logger)||void 0===n||n.log(`I18n: ${e}`,{level:"info",logger:i,extra:{type:"i18n"}})}getLanguageData(e){const t=e||this.lang;return t?this.data[t]:void 0}_i18n(e,t,r,n){const{text:i,details:o}=new I18NTranslation(this,r,t,e,n).getTranslationData();if(o){const e=mapErrorCodeToMessage({code:o.code,lang:r,fallbackLang:this.fallbackLang===r?void 0:this.fallbackLang});this.warn(e,o.keysetName,o.key)}return i}}class I18NTranslation{constructor(e,t,r,n,i,o){this.i18n=e,this.lang=t,this.key=r,this.keysetName=n,this.params=i,this.nestingDepth=null!=o?o:0}getTranslationData(){var e;const{data:t,details:r}=this.getKeyset();if(r)return{details:r};const n=t&&t[this.key],i={};if(void 0===n)return this.getTranslationDataError(ErrorCode.MissingKey);if(isPluralValue(n)){const t=this.nestingDepth>0,r=getPluralValues(n).some(e=>hasNestingTranslations(e));if(t||r)return this.getTranslationDataError(ErrorCode.NestedPlural);const o=Number(null===(e=this.params)||void 0===e?void 0:e.count);if(Number.isNaN(o))return this.getTranslationDataError(ErrorCode.MissingKeyParamsCount);i.text=getPluralValue({key:this.key,value:n,count:o,lang:this.lang||"en",pluralizers:this.i18n.pluralizers,log:e=>this.i18n.warn(e,this.keysetName,this.key)})}else i.text=String(n);this.params&&(i.text=replaceParams(String(i.text),this.params));const o=this.replaceTranslationsInheritance({keyValue:String(i.text)});return o.text?(i.text=o.text,i):o}getTranslationDataError(e){return{details:{code:e,keysetName:this.keysetName,key:this.key}}}getKeyset(){const e=this.i18n.getLanguageData(this.lang);if(void 0===e)return this.getTranslationDataError(ErrorCode.NoLanguageData);if(0===Object.keys(e).length)return this.getTranslationDataError(ErrorCode.EmptyLanguageData);const t=e[this.keysetName];return t?0===Object.keys(t).length?this.getTranslationDataError(ErrorCode.EmptyKeyset):{data:t}:this.getTranslationDataError(ErrorCode.KeysetNotFound)}replaceTranslationsInheritance(e){const{keyValue:t}=e,r=getNestingTranslationsRegExp();let n,i="",o=r.lastIndex=0;for(;n=r.exec(t);){o!==n.index&&(i+=t.slice(o,n.index)),o=r.lastIndex;const[e,s]=n;if(s){if(this.nestingDepth+1>MAX_NESTING_DEPTH)return this.getTranslationDataError(ErrorCode.ExceedTranslationNestingDepth);let[e,t]=[s,void 0];const r=s.split(KEYSET_SEPARATOR);if(r.length>1&&([t,e]=[r[0],r[1]]),!e)return this.getTranslationDataError(ErrorCode.MissingInheritedKey);const n=new I18NTranslation(this.i18n,this.lang,e,null!=t?t:this.keysetName,void 0,this.nestingDepth+1).getTranslationData();if(n.details)return this.getTranslationDataError(ErrorCode.MissingInheritedKey);i+=n.text}else i+=e}return o<t.length&&(i+=t.slice(o)),{text:i}}}const{lang:lang,fallbackLang:fallbackLang}=getConfig$2(),i18n$j=new I18N({lang:lang,fallbackLang:fallbackLang});function addComponentKeysets(e,t){Object.entries(e).forEach(([e,r])=>i18n$j.registerKeyset(e,t,r));const r=i18n$j.keyset(t),n=()=>{const e=useLang(),{lang:t="en",fallbackLang:n="en"}=i18n$j;return{t:reactExports.useCallback((...i)=>{i18n$j.setLang(e.lang),i18n$j.setFallbackLang(e.fallbackLang);const o=r(...i);return i18n$j.setLang(t),i18n$j.setFallbackLang(n),o},[n,t,e.fallbackLang,e.lang])}};return Object.assign(r,{useTranslation:n,Translation:({children:e})=>e(n())}),r}subscribeConfigure(e=>{i18n$j.setLang(e.lang),i18n$j.setFallbackLang(e.fallbackLang)});const DOMPropNames=new Set(["id"]),labelablePropNames=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),propRe=/^(data-.*)$/;function filterDOMProps(e,t={}){const{labelable:r,propNames:n}=t,i={};for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(DOMPropNames.has(o)||r&&labelablePropNames.has(o)||n?.has(o)||propRe.test(o))&&(i[o]=e[o]);return i}const PcNormalizeMap={arrowup:"up",arrowdown:"down",arrowleft:"left",arrowright:"right",esc:"escape",return:"enter",mod:"ctrl",control:"ctrl",opt:"alt",option:"alt",cmd:"ctrl",command:"ctrl"},MacNormalizeMap={arrowup:"up",arrowdown:"down",arrowleft:"left",arrowright:"right",esc:"escape",enter:"return",mod:"command",ctrl:"control",alt:"option",opt:"option",cmd:"command"},PcDisplayName={up:"",down:"",left:"",right:"",escape:"Esc",plus:"",minus:"",enter:"Enter",ctrl:"Ctrl",alt:"Alt",shift:"Shift",tab:"Tab",backspace:"Backspace"},MacDisplayName={up:"",down:"",left:"",right:"",escape:"esc",plus:"",minus:"",return:"",command:"",option:"",control:"",shift:"",backspace:"",tab:""},PcKeyPriority={shift:200,alt:300,ctrl:400},MacKeyPriority={command:100,shift:200,option:300,control:400},defsByPlatform={pc:{NormalizeMap:PcNormalizeMap,Priority:PcKeyPriority,DisplayName:PcDisplayName},mac:{NormalizeMap:MacNormalizeMap,Priority:MacKeyPriority,DisplayName:MacDisplayName}};var uniqBy_1,hasRequiredUniqBy;function requireUniqBy(){if(hasRequiredUniqBy)return uniqBy_1;hasRequiredUniqBy=1;var e=require_baseIteratee(),t=require_baseUniq();return uniqBy_1=function(r,n){return r&&r.length?t(r,e(n,2)):[]}}var uniqByExports=requireUniqBy();const uniqBy=getDefaultExportFromCjs(uniqByExports),isMac$2=()=>"undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function split(e,t){return e.trim().split(t).filter(Boolean)}const GROUPS_SEPARATOR=/\s/,KEYS_SEPARATOR="+";function parseKeyGroups(e,t){return split(t,GROUPS_SEPARATOR).map(t=>uniqBy(split(t,KEYS_SEPARATOR).map(keyParser(e)).sort((e,t)=>t.priority-e.priority),e=>e.id).map(renderKey))}function keyParser(e){return function(t){const r=getKeyId(e,t);return{raw:t,id:r,priority:e.Priority[r]??0,displayName:e.DisplayName[r]}}}function getKeyId(e,t){return t=t.toLowerCase(),e.NormalizeMap[t]??t}function renderKey(e){return e.displayName??capitalize(e.id)}const b$1n=block$2("hotkey"),Spaces={BetweenGroups:String.fromCharCode(160),BetweenKeys:String.fromCharCode(8239)},Hotkey=reactExports.forwardRef(function(e,t){const{value:r,platform:n,view:i="light",qa:o,style:s,className:a,...l}=e,c=parseHotkeys(r,{platform:n}),u=[];let d=!1;return c.forEach((e,t)=>{0!==e.length&&(d?u.push(Spaces.BetweenGroups):d=!0,e.forEach((e,r)=>{0===r||u.push(Spaces.BetweenKeys,jsxRuntimeExports.jsx("span",{className:b$1n("plus"),children:"+"},`${e}_${t}_${r}_plus`),Spaces.BetweenKeys),u.push(jsxRuntimeExports.jsx("kbd",{children:e},`${e}_${t}_${r}`))}))}),0===u.length?null:jsxRuntimeExports.jsx("kbd",{...filterDOMProps(l,{labelable:!0}),ref:t,style:s,"data-qa":o,className:b$1n({view:i},a),children:u})});function parseHotkeys(e,t){const r=t.platform??(isMac$2()?"mac":"pc");return parseKeyGroups(defsByPlatform[r],e)}
/*!
* tabbable 6.3.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var candidateSelectors=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],candidateSelector=candidateSelectors.join(","),NoElement="undefined"==typeof Element,matches=NoElement?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,getRootNode=!NoElement&&Element.prototype.getRootNode?function(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},_isInert=function(e,t){var r;void 0===t&&(t=!0);var n=null==e||null===(r=e.getAttribute)||void 0===r?void 0:r.call(e,"inert");return""===n||"true"===n||t&&e&&_isInert(e.parentNode)},isContentEditable=function(e){var t,r=null==e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===r||"true"===r},getCandidates=function(e,t,r){if(_isInert(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(candidateSelector));return t&&matches.call(e,candidateSelector)&&n.unshift(e),n.filter(r)},_getCandidatesIteratively=function(e,t,r){for(var n=[],i=Array.from(e);i.length;){var o=i.shift();if(!_isInert(o,!1))if("SLOT"===o.tagName){var s=o.assignedElements(),a=s.length?s:o.children,l=_getCandidatesIteratively(a,!0,r);r.flatten?n.push.apply(n,l):n.push({scopeParent:o,candidates:l})}else{matches.call(o,candidateSelector)&&r.filter(o)&&(t||!e.includes(o))&&n.push(o);var c=o.shadowRoot||"function"==typeof r.getShadowRoot&&r.getShadowRoot(o),u=!_isInert(c,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(c&&u){var d=_getCandidatesIteratively(!0===c?o.children:c.children,!0,r);r.flatten?n.push.apply(n,d):n.push({scopeParent:o,candidates:d})}else i.unshift.apply(i,o.children)}}return n},hasTabIndex=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},getTabIndex=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||isContentEditable(e))&&!hasTabIndex(e)?0:e.tabIndex},getSortOrderTabIndex=function(e,t){var r=getTabIndex(e);return r<0&&t&&!hasTabIndex(e)?0:r},sortOrderedTabbables=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},isInput=function(e){return"INPUT"===e.tagName},isHiddenInput$1=function(e){return isInput(e)&&"hidden"===e.type},isDetailsWithSummary=function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some(function(e){return"SUMMARY"===e.tagName})},getCheckedRadio=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},isTabbableRadio=function(e){if(!e.name)return!0;var t,r=e.form||getRootNode(e),n=function(e){return r.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=n(window.CSS.escape(e.name));else try{t=n(e.name)}catch(o){return!1}var i=getCheckedRadio(t,e.form);return!i||i===e},isRadio=function(e){return isInput(e)&&"radio"===e.type},isNonTabbableRadio=function(e){return isRadio(e)&&!isTabbableRadio(e)},isNodeAttached=function(e){var t,r,n,i,o=e&&getRootNode(e),s=null===(t=o)||void 0===t?void 0:t.host,a=!1;if(o&&o!==e)for(a=!!(null!==(r=s)&&void 0!==r&&null!==(n=r.ownerDocument)&&void 0!==n&&n.contains(s)||null!=e&&null!==(i=e.ownerDocument)&&void 0!==i&&i.contains(e));!a&&s;){var l,c,u;a=!(null===(c=s=null===(l=o=getRootNode(s))||void 0===l?void 0:l.host)||void 0===c||null===(u=c.ownerDocument)||void 0===u||!u.contains(s))}return a},isZeroArea=function(e){var t=e.getBoundingClientRect(),r=t.width,n=t.height;return 0===r&&0===n},isHidden=function(e,t){var r=t.displayCheck,n=t.getShadowRoot;if("full-native"===r&&"checkVisibility"in e)return!e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});if("hidden"===getComputedStyle(e).visibility)return!0;var i=matches.call(e,"details>summary:first-of-type")?e.parentElement:e;if(matches.call(i,"details:not([open]) *"))return!0;if(r&&"full"!==r&&"full-native"!==r&&"legacy-full"!==r){if("non-zero-area"===r)return isZeroArea(e)}else{if("function"==typeof n){for(var o=e;e;){var s=e.parentElement,a=getRootNode(e);if(s&&!s.shadowRoot&&!0===n(s))return isZeroArea(e);e=e.assignedSlot?e.assignedSlot:s||a===e.ownerDocument?s:a.host}e=o}if(isNodeAttached(e))return!e.getClientRects().length;if("legacy-full"!==r)return!0}return!1},isDisabledFromFieldset=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var r=0;r<t.children.length;r++){var n=t.children.item(r);if("LEGEND"===n.tagName)return!!matches.call(t,"fieldset[disabled] *")||!n.contains(e)}return!0}t=t.parentElement}return!1},isNodeMatchingSelectorFocusable=function(e,t){return!(t.disabled||_isInert(t)||isHiddenInput$1(t)||isHidden(t,e)||isDetailsWithSummary(t)||isDisabledFromFieldset(t))},isNodeMatchingSelectorTabbable=function(e,t){return!(isNonTabbableRadio(t)||getTabIndex(t)<0||!isNodeMatchingSelectorFocusable(e,t))},isShadowRootTabbable=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},_sortByOrder=function(e){var t=[],r=[];return e.forEach(function(e,n){var i=!!e.scopeParent,o=i?e.scopeParent:e,s=getSortOrderTabIndex(o,i),a=i?_sortByOrder(e.candidates):o;0===s?i?t.push.apply(t,a):t.push(o):r.push({documentOrder:n,tabIndex:s,item:e,isScope:i,content:a})}),r.sort(sortOrderedTabbables).reduce(function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e},[]).concat(t)},tabbable=function(e,t){var r;return r=(t=t||{}).getShadowRoot?_getCandidatesIteratively([e],t.includeContainer,{filter:isNodeMatchingSelectorTabbable.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:isShadowRootTabbable}):getCandidates(e,t.includeContainer,isNodeMatchingSelectorTabbable.bind(null,t)),_sortByOrder(r)},focusable=function(e,t){return(t=t||{}).getShadowRoot?_getCandidatesIteratively([e],t.includeContainer,{filter:isNodeMatchingSelectorFocusable.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):getCandidates(e,t.includeContainer,isNodeMatchingSelectorFocusable.bind(null,t))},isTabbable=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==matches.call(e,candidateSelector)&&isNodeMatchingSelectorTabbable(t,e)};function getPlatform(){const e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function getUserAgent(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(e=>{let{brand:t,version:r}=e;return t+"/"+r}).join(" "):navigator.userAgent}function isSafari(){return/apple/i.test(navigator.vendor)}function isAndroid(){const e=/android/i;return e.test(getPlatform())||e.test(getUserAgent())}function isMac$1(){return getPlatform().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function isJSDOM(){return getUserAgent().includes("jsdom/")}const FOCUSABLE_ATTRIBUTE$1="data-floating-ui-focusable",TYPEABLE_SELECTOR="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function activeElement(e){let t=e.activeElement;for(;null!=(null==(r=t)||null==(r=r.shadowRoot)?void 0:r.activeElement);){var r;t=t.shadowRoot.activeElement}return t}function contains$3(e,t){if(!e||!t)return!1;const r=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(r&&isShadowRoot(r)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function getTarget$2(e){return"composedPath"in e?e.composedPath()[0]:e.target}function isEventTargetWithin(e,t){if(null==t)return!1;if("composedPath"in e)return e.composedPath().includes(t);const r=e;return null!=r.target&&t.contains(r.target)}function isRootElement(e){return e.matches("html,body")}function getDocument$1(e){return(null==e?void 0:e.ownerDocument)||document}function isTypeableElement(e){return isHTMLElement(e)&&e.matches(TYPEABLE_SELECTOR)}function isTypeableCombobox(e){return!!e&&"combobox"===e.getAttribute("role")&&isTypeableElement(e)}function matchesFocusVisible(e){if(!e||isJSDOM())return!0;try{return e.matches(":focus-visible")}catch(t){return!0}}function getFloatingFocusElement(e){return e?e.hasAttribute(FOCUSABLE_ATTRIBUTE$1)?e:e.querySelector("["+FOCUSABLE_ATTRIBUTE$1+"]")||e:null}function getNodeChildren$1(e,t,r){return void 0===r&&(r=!0),e.filter(e=>{var n;return e.parentId===t&&(!r||(null==(n=e.context)?void 0:n.open))}).flatMap(t=>[t,...getNodeChildren$1(e,t.id,r)])}function getNodeAncestors(e,t){var r;let n=[],i=null==(r=e.find(e=>e.id===t))?void 0:r.parentId;for(;i;){const t=e.find(e=>e.id===i);i=null==t?void 0:t.parentId,t&&(n=n.concat(t))}return n}function stopEvent(e){e.preventDefault(),e.stopPropagation()}function isReactEvent(e){return"nativeEvent"in e}function isVirtualClick(e){return!(0!==e.mozInputSource||!e.isTrusted)||(isAndroid()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType)}function isVirtualPointerEvent(e){return!isJSDOM()&&(!isAndroid()&&0===e.width&&0===e.height||isAndroid()&&1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"===e.pointerType||e.width<1&&e.height<1&&0===e.pressure&&0===e.detail&&"touch"===e.pointerType)}function isMouseLikePointerType(e,t){const r=["mouse","pen"];return t||r.push("",void 0),r.includes(e)}var isClient="undefined"!=typeof document,noop$6=function(){},index$1=isClient?reactExports.useLayoutEffect:noop$6;const SafeReact$1={...React$1};function useLatestRef(e){const t=reactExports.useRef(e);return index$1(()=>{t.current=e}),t}const useInsertionEffect=SafeReact$1.useInsertionEffect,useSafeInsertionEffect=useInsertionEffect||(e=>e());function useEffectEvent(e){const t=reactExports.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return useSafeInsertionEffect(()=>{t.current=e}),reactExports.useCallback(function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return null==t.current?void 0:t.current(...r)},[])}const getTabbableOptions=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function getTabbableIn(e,t){const r=tabbable(e,getTabbableOptions()),n=r.length;if(0===n)return;const i=activeElement(getDocument$1(e)),o=r.indexOf(i);return r[-1===o?1===t?0:n-1:o+t]}function getNextTabbable(e){return getTabbableIn(getDocument$1(e).body,1)||e}function getPreviousTabbable(e){return getTabbableIn(getDocument$1(e).body,-1)||e}function isOutsideEvent(e,t){const r=t||e.currentTarget,n=e.relatedTarget;return!n||!contains$3(r,n)}function disableFocusInside(e){tabbable(e,getTabbableOptions()).forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")})}function enableFocusInside(e){e.querySelectorAll("[data-tabindex]").forEach(e=>{const t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")})}const FOCUSABLE_ATTRIBUTE="data-floating-ui-focusable",ACTIVE_KEY="active",SELECTED_KEY="selected",SafeReact={...React$1};let serverHandoffComplete=!1,count$1=0;const genId=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+count$1++;function useFloatingId(){const[e,t]=reactExports.useState(()=>serverHandoffComplete?genId():void 0);return index$1(()=>{null==e&&t(genId())},[]),reactExports.useEffect(()=>{serverHandoffComplete=!0},[]),e}const useReactId=SafeReact.useId,useId=useReactId||useFloatingId;let devMessageSet;function error$3(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];const i="Floating UI: "+r.join(" ");var o;null!=(e=devMessageSet)&&e.has(i)||null==(o=devMessageSet)||o.add(i)}function createEventEmitter(){const e=new Map;return{emit(t,r){var n;null==(n=e.get(t))||n.forEach(e=>e(r))},on(t,r){e.has(t)||e.set(t,new Set),e.get(t).add(r)},off(t,r){var n;null==(n=e.get(t))||n.delete(r)}}}devMessageSet=new Set;const FloatingNodeContext=reactExports.createContext(null),FloatingTreeContext=reactExports.createContext(null),useFloatingParentNodeId=()=>{var e;return(null==(e=reactExports.useContext(FloatingNodeContext))?void 0:e.id)||null},useFloatingTree=()=>reactExports.useContext(FloatingTreeContext);function useFloatingNodeId(e){const t=useId(),r=useFloatingTree(),n=useFloatingParentNodeId();return index$1(()=>{if(!t)return;const e={id:t,parentId:n};return null==r||r.addNode(e),()=>{null==r||r.removeNode(e)}},[r,t,n]),t}function FloatingNode(e){const{children:t,id:r}=e,n=useFloatingParentNodeId();return jsxRuntimeExports.jsx(FloatingNodeContext.Provider,{value:reactExports.useMemo(()=>({id:r,parentId:n}),[r,n]),children:t})}function FloatingTree(e){const{children:t}=e,r=reactExports.useRef([]),n=reactExports.useCallback(e=>{r.current=[...r.current,e]},[]),i=reactExports.useCallback(e=>{r.current=r.current.filter(t=>t!==e)},[]),[o]=reactExports.useState(()=>createEventEmitter());return jsxRuntimeExports.jsx(FloatingTreeContext.Provider,{value:reactExports.useMemo(()=>({nodesRef:r,addNode:n,removeNode:i,events:o}),[n,i,o]),children:t})}function createAttribute(e){return"data-floating-ui-"+e}function clearTimeoutIfSet(e){-1!==e.current&&(clearTimeout(e.current),e.current=-1)}const safePolygonIdentifier=createAttribute("safe-polygon");function getDelay(e,t,r){if(r&&!isMouseLikePointerType(r))return 0;if("number"==typeof e)return e;if("function"==typeof e){const r=e();return"number"==typeof r?r:null==r?void 0:r[t]}return null==e?void 0:e[t]}function getRestMs(e){return"function"==typeof e?e():e}function useHover$1(e,t){void 0===t&&(t={});const{open:r,onOpenChange:n,dataRef:i,events:o,elements:s}=e,{enabled:a=!0,delay:l=0,handleClose:c=null,mouseOnly:u=!1,restMs:d=0,move:p=!0}=t,h=useFloatingTree(),f=useFloatingParentNodeId(),m=useLatestRef(c),g=useLatestRef(l),b=useLatestRef(r),y=useLatestRef(d),T=reactExports.useRef(),E=reactExports.useRef(-1),O=reactExports.useRef(),S=reactExports.useRef(-1),x=reactExports.useRef(!0),v=reactExports.useRef(!1),_=reactExports.useRef(()=>{}),A=reactExports.useRef(!1),C=useEffectEvent(()=>{var e;const t=null==(e=i.current.openEvent)?void 0:e.type;return(null==t?void 0:t.includes("mouse"))&&"mousedown"!==t});reactExports.useEffect(()=>{if(a)return o.on("openchange",e),()=>{o.off("openchange",e)};function e(e){let{open:t}=e;t||(clearTimeoutIfSet(E),clearTimeoutIfSet(S),x.current=!0,A.current=!1)}},[a,o]),reactExports.useEffect(()=>{if(!a)return;if(!m.current)return;if(!r)return;function e(e){C()&&n(!1,e,"hover")}const t=getDocument$1(s.floating).documentElement;return t.addEventListener("mouseleave",e),()=>{t.removeEventListener("mouseleave",e)}},[s.floating,r,n,a,m,C]);const w=reactExports.useCallback(function(e,t,r){void 0===t&&(t=!0),void 0===r&&(r="hover");const i=getDelay(g.current,"close",T.current);i&&!O.current?(clearTimeoutIfSet(E),E.current=window.setTimeout(()=>n(!1,e,r),i)):t&&(clearTimeoutIfSet(E),n(!1,e,r))},[g,n]),k=useEffectEvent(()=>{_.current(),O.current=void 0}),D=useEffectEvent(()=>{if(v.current){const e=getDocument$1(s.floating).body;e.style.pointerEvents="",e.removeAttribute(safePolygonIdentifier),v.current=!1}}),I=useEffectEvent(()=>!!i.current.openEvent&&["click","mousedown"].includes(i.current.openEvent.type));reactExports.useEffect(()=>{if(a&&isElement$1(s.domReference)){const n=s.domReference,i=s.floating;return r&&n.addEventListener("mouseleave",o),p&&n.addEventListener("mousemove",e,{once:!0}),n.addEventListener("mouseenter",e),n.addEventListener("mouseleave",t),i&&(i.addEventListener("mouseleave",o),i.addEventListener("mouseenter",l),i.addEventListener("mouseleave",c)),()=>{r&&n.removeEventListener("mouseleave",o),p&&n.removeEventListener("mousemove",e),n.removeEventListener("mouseenter",e),n.removeEventListener("mouseleave",t),i&&(i.removeEventListener("mouseleave",o),i.removeEventListener("mouseenter",l),i.removeEventListener("mouseleave",c))}}function e(e){if(clearTimeoutIfSet(E),x.current=!1,u&&!isMouseLikePointerType(T.current)||getRestMs(y.current)>0&&!getDelay(g.current,"open"))return;const t=getDelay(g.current,"open",T.current);t?E.current=window.setTimeout(()=>{b.current||n(!0,e,"hover")},t):r||n(!0,e,"hover")}function t(e){if(I())return void D();_.current();const t=getDocument$1(s.floating);if(clearTimeoutIfSet(S),A.current=!1,m.current&&i.current.floatingContext){r||clearTimeoutIfSet(E),O.current=m.current({...i.current.floatingContext,tree:h,x:e.clientX,y:e.clientY,onClose(){D(),k(),I()||w(e,!0,"safe-polygon")}});const n=O.current;return t.addEventListener("mousemove",n),void(_.current=()=>{t.removeEventListener("mousemove",n)})}("touch"!==T.current||!contains$3(s.floating,e.relatedTarget))&&w(e)}function o(e){I()||i.current.floatingContext&&(null==m.current||m.current({...i.current.floatingContext,tree:h,x:e.clientX,y:e.clientY,onClose(){D(),k(),I()||w(e)}})(e))}function l(){clearTimeoutIfSet(E)}function c(e){I()||w(e,!1)}},[s,a,e,u,p,w,k,D,n,r,b,h,g,m,i,I,y]),index$1(()=>{var e;if(a&&r&&null!=(e=m.current)&&null!=(e=e.__options)&&e.blockPointerEvents&&C()){v.current=!0;const e=s.floating;if(isElement$1(s.domReference)&&e){var t;const r=getDocument$1(s.floating).body;r.setAttribute(safePolygonIdentifier,"");const n=s.domReference,i=null==h||null==(t=h.nodesRef.current.find(e=>e.id===f))||null==(t=t.context)?void 0:t.elements.floating;return i&&(i.style.pointerEvents=""),r.style.pointerEvents="none",n.style.pointerEvents="auto",e.style.pointerEvents="auto",()=>{r.style.pointerEvents="",n.style.pointerEvents="",e.style.pointerEvents=""}}}},[a,r,f,s,h,m,C]),index$1(()=>{r||(T.current=void 0,A.current=!1,k(),D())},[r,k,D]),reactExports.useEffect(()=>()=>{k(),clearTimeoutIfSet(E),clearTimeoutIfSet(S),D()},[a,s.domReference,k,D]);const R=reactExports.useMemo(()=>{function e(e){T.current=e.pointerType}return{onPointerDown:e,onPointerEnter:e,onMouseMove(e){const{nativeEvent:t}=e;function i(){x.current||b.current||n(!0,t,"hover")}u&&!isMouseLikePointerType(T.current)||r||0===getRestMs(y.current)||A.current&&e.movementX**2+e.movementY**2<2||(clearTimeoutIfSet(S),"touch"===T.current?i():(A.current=!0,S.current=window.setTimeout(i,getRestMs(y.current))))}}},[u,n,r,b,y]);return reactExports.useMemo(()=>a?{reference:R}:{},[a,R])}let rafId=0;function enqueueFocus(e,t){void 0===t&&(t={});const{preventScroll:r=!1,cancelPrevious:n=!0,sync:i=!1}=t;n&&cancelAnimationFrame(rafId);const o=()=>null==e?void 0:e.focus({preventScroll:r});i?o():rafId=requestAnimationFrame(o)}function contains$2(e,t){if(!e||!t)return!1;const r=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(r&&isShadowRoot(r)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function getTarget$1(e){return"composedPath"in e?e.composedPath()[0]:e.target}function getDocument(e){return(null==e?void 0:e.ownerDocument)||document}const counters={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function getCounterMap(e){return"inert"===e?counters.inert:"aria-hidden"===e?counters["aria-hidden"]:counters.none}let uncontrolledElementsSet=new WeakSet,markerMap={},lockCount$1=0;const supportsInert=()=>"undefined"!=typeof HTMLElement&&"inert"in HTMLElement.prototype,unwrapHost=e=>e&&(e.host||unwrapHost(e.parentNode)),correctElements=(e,t)=>t.map(t=>{if(e.contains(t))return t;const r=unwrapHost(t);return e.contains(r)?r:null}).filter(e=>null!=e);function applyAttributeToOthers(e,t,r,n){const i="data-floating-ui-inert",o=n?"inert":r?"aria-hidden":null,s=correctElements(t,e),a=new Set,l=new Set(s),c=[];markerMap[i]||(markerMap[i]=new WeakMap);const u=markerMap[i];return s.forEach(function e(t){t&&!a.has(t)&&(a.add(t),t.parentNode&&e(t.parentNode))}),function e(t){t&&!l.has(t)&&[].forEach.call(t.children,t=>{if("script"!==getNodeName(t))if(a.has(t))e(t);else{const e=o?t.getAttribute(o):null,r=null!==e&&"false"!==e,n=getCounterMap(o),s=(n.get(t)||0)+1,a=(u.get(t)||0)+1;n.set(t,s),u.set(t,a),c.push(t),1===s&&r&&uncontrolledElementsSet.add(t),1===a&&t.setAttribute(i,""),!r&&o&&t.setAttribute(o,"inert"===o?"":"true")}})}(t),a.clear(),lockCount$1++,()=>{c.forEach(e=>{const t=getCounterMap(o),r=(t.get(e)||0)-1,n=(u.get(e)||0)-1;t.set(e,r),u.set(e,n),r||(!uncontrolledElementsSet.has(e)&&o&&e.removeAttribute(o),uncontrolledElementsSet.delete(e)),n||e.removeAttribute(i)}),lockCount$1--,lockCount$1||(counters.inert=new WeakMap,counters["aria-hidden"]=new WeakMap,counters.none=new WeakMap,uncontrolledElementsSet=new WeakSet,markerMap={})}}function markOthers(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);const n=getDocument(e[0]).body;return applyAttributeToOthers(e.concat(Array.from(n.querySelectorAll('[aria-live],[role="status"],output'))),n,t,r)}const HIDDEN_STYLES={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},FocusGuard=reactExports.forwardRef(function(e,t){const[r,n]=reactExports.useState();index$1(()=>{isSafari()&&n("button")},[]);const i={ref:t,tabIndex:0,role:r,"aria-hidden":!r||void 0,[createAttribute("focus-guard")]:"",style:HIDDEN_STYLES};return jsxRuntimeExports.jsx("span",{...e,...i})}),PortalContext=reactExports.createContext(null),attr$1=createAttribute("portal");function useFloatingPortalNode(e){void 0===e&&(e={});const{id:t,root:r}=e,n=useId(),i=usePortalContext$2(),[o,s]=reactExports.useState(null),a=reactExports.useRef(null);return index$1(()=>()=>{null==o||o.remove(),queueMicrotask(()=>{a.current=null})},[o]),index$1(()=>{if(!n)return;if(a.current)return;const e=t?document.getElementById(t):null;if(!e)return;const r=document.createElement("div");r.id=n,r.setAttribute(attr$1,""),e.appendChild(r),a.current=r,s(r)},[t,n]),index$1(()=>{if(null===r)return;if(!n)return;if(a.current)return;let e=r||(null==i?void 0:i.portalNode);e&&!isNode$1(e)&&(e=e.current),e=e||document.body;let o=null;t&&(o=document.createElement("div"),o.id=t,e.appendChild(o));const l=document.createElement("div");l.id=n,l.setAttribute(attr$1,""),e=o||e,e.appendChild(l),a.current=l,s(l)},[t,r,n,i]),o}function FloatingPortal(e){const{children:t,id:r,root:n,preserveTabOrder:i=!0}=e,o=useFloatingPortalNode({id:r,root:n}),[s,a]=reactExports.useState(null),l=reactExports.useRef(null),c=reactExports.useRef(null),u=reactExports.useRef(null),d=reactExports.useRef(null),p=null==s?void 0:s.modal,h=null==s?void 0:s.open,f=!!s&&!s.modal&&s.open&&i&&!(!n&&!o);return reactExports.useEffect(()=>{if(o&&i&&!p)return o.addEventListener("focusin",e,!0),o.addEventListener("focusout",e,!0),()=>{o.removeEventListener("focusin",e,!0),o.removeEventListener("focusout",e,!0)};function e(e){o&&isOutsideEvent(e)&&("focusin"===e.type?enableFocusInside:disableFocusInside)(o)}},[o,i,p]),reactExports.useEffect(()=>{o&&(h||enableFocusInside(o))},[h,o]),jsxRuntimeExports.jsxs(PortalContext.Provider,{value:reactExports.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:l,afterOutsideRef:c,beforeInsideRef:u,afterInsideRef:d,portalNode:o,setFocusManagerState:a}),[i,o]),children:[f&&o&&jsxRuntimeExports.jsx(FocusGuard,{"data-type":"outside",ref:l,onFocus:e=>{if(isOutsideEvent(e,o)){var t;null==(t=u.current)||t.focus()}else{const e=getPreviousTabbable(s?s.domReference:null);null==e||e.focus()}}}),f&&o&&jsxRuntimeExports.jsx("span",{"aria-owns":o.id,style:HIDDEN_STYLES}),o&&reactDomExports.createPortal(t,o),f&&o&&jsxRuntimeExports.jsx(FocusGuard,{"data-type":"outside",ref:c,onFocus:e=>{if(isOutsideEvent(e,o)){var t;null==(t=d.current)||t.focus()}else{const t=getNextTabbable(s?s.domReference:null);null==t||t.focus(),(null==s?void 0:s.closeOnFocusOut)&&(null==s||s.onOpenChange(!1,e.nativeEvent,"focus-out"))}}})]})}const usePortalContext$2=()=>reactExports.useContext(PortalContext);function useLiteMergeRefs(e){return reactExports.useMemo(()=>t=>{e.forEach(e=>{e&&(e.current=t)})},e)}const LIST_LIMIT=20;let previouslyFocusedElements=[];function clearDisconnectedPreviouslyFocusedElements(){previouslyFocusedElements=previouslyFocusedElements.filter(e=>e.isConnected)}function addPreviouslyFocusedElement(e){clearDisconnectedPreviouslyFocusedElements(),e&&"body"!==getNodeName(e)&&(previouslyFocusedElements.push(e),previouslyFocusedElements.length>LIST_LIMIT&&(previouslyFocusedElements=previouslyFocusedElements.slice(-20)))}function getPreviouslyFocusedElement(){return clearDisconnectedPreviouslyFocusedElements(),previouslyFocusedElements[previouslyFocusedElements.length-1]}function getFirstTabbableElement(e){const t=getTabbableOptions();return isTabbable(e,t)?e:tabbable(e,t)[0]||e}function handleTabIndex(e,t){var r;if(!(t.current.includes("floating")||null!=(r=e.getAttribute("role"))&&r.includes("dialog")))return;const n=getTabbableOptions(),i=focusable(e,n).filter(e=>{const t=e.getAttribute("data-tabindex")||"";return isTabbable(e,n)||e.hasAttribute("data-tabindex")&&!t.startsWith("-")}),o=e.getAttribute("tabindex");t.current.includes("floating")||0===i.length?"0"!==o&&e.setAttribute("tabindex","0"):("-1"!==o||e.hasAttribute("data-tabindex")&&"-1"!==e.getAttribute("data-tabindex"))&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}const VisuallyHiddenDismiss=reactExports.forwardRef(function(e,t){return jsxRuntimeExports.jsx("button",{...e,type:"button",ref:t,tabIndex:-1,style:HIDDEN_STYLES})});function FloatingFocusManager(e){const{context:t,children:r,disabled:n=!1,order:i=["content"],guards:o=!0,initialFocus:s=0,returnFocus:a=!0,restoreFocus:l=!1,modal:c=!0,visuallyHiddenDismiss:u=!1,closeOnFocusOut:d=!0,outsideElementsInert:p=!1,getInsideElements:h=()=>[]}=e,{open:f,onOpenChange:m,events:g,dataRef:b,elements:{domReference:y,floating:T}}=t,E=useEffectEvent(()=>{var e;return null==(e=b.current.floatingContext)?void 0:e.nodeId}),O=useEffectEvent(h),S="number"==typeof s&&s<0,x=isTypeableCombobox(y)&&S,v=supportsInert(),_=!v||o,A=!_||v&&p,C=useLatestRef(i),w=useLatestRef(s),k=useLatestRef(a),D=useFloatingTree(),I=usePortalContext$2(),R=reactExports.useRef(null),N=reactExports.useRef(null),P=reactExports.useRef(!1),M=reactExports.useRef(!1),$=reactExports.useRef(-1),L=reactExports.useRef(-1),B=null!=I,F=getFloatingFocusElement(T),q=useEffectEvent(function(e){return void 0===e&&(e=F),e?tabbable(e,getTabbableOptions()):[]}),j=useEffectEvent(e=>{const t=q(e);return C.current.map(e=>y&&"reference"===e?y:F&&"floating"===e?F:t).filter(Boolean).flat()});reactExports.useEffect(()=>{if(n)return;if(!c)return;function e(e){if("Tab"===e.key){contains$3(F,activeElement(getDocument$1(F)))&&0===q().length&&!x&&stopEvent(e);const t=j(),r=getTarget$2(e);"reference"===C.current[0]&&r===y&&(stopEvent(e),e.shiftKey?enqueueFocus(t[t.length-1]):enqueueFocus(t[1])),"floating"===C.current[1]&&r===F&&e.shiftKey&&(stopEvent(e),enqueueFocus(t[0]))}}const t=getDocument$1(F);return t.addEventListener("keydown",e),()=>{t.removeEventListener("keydown",e)}},[n,y,F,c,C,x,q,j]),reactExports.useEffect(()=>{if(!n&&T)return T.addEventListener("focusin",e),()=>{T.removeEventListener("focusin",e)};function e(e){const t=getTarget$2(e),r=q().indexOf(t);-1!==r&&($.current=r)}},[n,T,q]),reactExports.useEffect(()=>{if(n)return;if(!d)return;function e(){M.current=!0,setTimeout(()=>{M.current=!1})}function t(e){const t=e.relatedTarget,r=e.currentTarget,n=getTarget$2(e);queueMicrotask(()=>{const i=E(),o=!(contains$3(y,t)||contains$3(T,t)||contains$3(t,T)||contains$3(null==I?void 0:I.portalNode,t)||null!=t&&t.hasAttribute(createAttribute("focus-guard"))||D&&(getNodeChildren$1(D.nodesRef.current,i).find(e=>{var r,n;return contains$3(null==(r=e.context)?void 0:r.elements.floating,t)||contains$3(null==(n=e.context)?void 0:n.elements.domReference,t)})||getNodeAncestors(D.nodesRef.current,i).find(e=>{var r,n,i;return[null==(r=e.context)?void 0:r.elements.floating,getFloatingFocusElement(null==(n=e.context)?void 0:n.elements.floating)].includes(t)||(null==(i=e.context)?void 0:i.elements.domReference)===t})));if(r===y&&F&&handleTabIndex(F,C),l&&r!==y&&(null==n||!n.isConnected)&&activeElement(getDocument$1(F))===getDocument$1(F).body){isHTMLElement(F)&&F.focus();const e=$.current,t=q(),r=t[e]||t[t.length-1]||F;isHTMLElement(r)&&r.focus()}b.current.insideReactTree?b.current.insideReactTree=!1:!x&&c||!t||!o||M.current||t===getPreviouslyFocusedElement()||(P.current=!0,m(!1,e,"focus-out"))})}const r=Boolean(!D&&I);function i(){clearTimeoutIfSet(L),b.current.insideReactTree=!0,L.current=window.setTimeout(()=>{b.current.insideReactTree=!1})}return T&&isHTMLElement(y)?(y.addEventListener("focusout",t),y.addEventListener("pointerdown",e),T.addEventListener("focusout",t),r&&T.addEventListener("focusout",i,!0),()=>{y.removeEventListener("focusout",t),y.removeEventListener("pointerdown",e),T.removeEventListener("focusout",t),r&&T.removeEventListener("focusout",i,!0)}):void 0},[n,y,T,F,c,D,I,m,d,l,q,x,E,C,b]);const G=reactExports.useRef(null),H=reactExports.useRef(null),Q=useLiteMergeRefs([G,null==I?void 0:I.beforeInsideRef]),z=useLiteMergeRefs([H,null==I?void 0:I.afterInsideRef]);function V(e){return!n&&u&&c?jsxRuntimeExports.jsx(VisuallyHiddenDismiss,{ref:"start"===e?R:N,onClick:e=>m(!1,e.nativeEvent),children:"string"==typeof u?u:"Dismiss"}):null}reactExports.useEffect(()=>{var e,t;if(n)return;if(!T)return;const r=Array.from((null==I||null==(e=I.portalNode)?void 0:e.querySelectorAll("["+createAttribute("portal")+"]"))||[]),i=null==(t=(D?getNodeAncestors(D.nodesRef.current,E()):[]).find(e=>{var t;return isTypeableCombobox((null==(t=e.context)?void 0:t.elements.domReference)||null)}))||null==(t=t.context)?void 0:t.elements.domReference,o=[T,i,...r,...O(),R.current,N.current,G.current,H.current,null==I?void 0:I.beforeOutsideRef.current,null==I?void 0:I.afterOutsideRef.current,C.current.includes("reference")||x?y:null].filter(e=>null!=e),s=c||x?markOthers(o,!A,A):markOthers(o);return()=>{s()}},[n,y,T,c,C,I,x,_,A,D,E,O]),index$1(()=>{if(n||!isHTMLElement(F))return;const e=activeElement(getDocument$1(F));queueMicrotask(()=>{const t=j(F),r=w.current,n=("number"==typeof r?t[r]:r.current)||F,i=contains$3(F,e);S||i||!f||enqueueFocus(n,{preventScroll:n===F})})},[n,f,F,S,j,w]),index$1(()=>{if(n||!F)return;const e=getDocument$1(F);function t(e){let{reason:t,event:r,nested:n}=e;if(["hover","safe-polygon"].includes(t)&&"mouseleave"===r.type&&(P.current=!0),"outside-press"===t)if(n)P.current=!1;else if(isVirtualClick(r)||isVirtualPointerEvent(r))P.current=!1;else{let e=!1;document.createElement("div").focus({get preventScroll(){return e=!0,!1}}),P.current=!e}}addPreviouslyFocusedElement(activeElement(e)),g.on("openchange",t);const r=e.createElement("span");return r.setAttribute("tabindex","-1"),r.setAttribute("aria-hidden","true"),Object.assign(r.style,HIDDEN_STYLES),B&&y&&y.insertAdjacentElement("afterend",r),()=>{g.off("openchange",t);const n=activeElement(e),i=contains$3(T,n)||D&&getNodeChildren$1(D.nodesRef.current,E(),!1).some(e=>{var t;return contains$3(null==(t=e.context)?void 0:t.elements.floating,n)}),o=function(){if("boolean"==typeof k.current){const e=y||getPreviouslyFocusedElement();return e&&e.isConnected?e:r}return k.current.current||r}();queueMicrotask(()=>{const t=getFirstTabbableElement(o);k.current&&!P.current&&isHTMLElement(t)&&(t===n||n===e.body||i)&&t.focus({preventScroll:!0}),r.remove()})}},[n,T,F,k,b,g,D,B,y,E]),reactExports.useEffect(()=>(queueMicrotask(()=>{P.current=!1}),()=>{queueMicrotask(clearDisconnectedPreviouslyFocusedElements)}),[n]),index$1(()=>{if(!n&&I)return I.setFocusManagerState({modal:c,closeOnFocusOut:d,open:f,onOpenChange:m,domReference:y}),()=>{I.setFocusManagerState(null)}},[n,I,c,f,m,d,y]),index$1(()=>{n||F&&handleTabIndex(F,C)},[n,F,C]);const U=!n&&_&&(!c||!x)&&(B||c);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[U&&jsxRuntimeExports.jsx(FocusGuard,{"data-type":"inside",ref:Q,onFocus:e=>{if(c){const e=j();enqueueFocus("reference"===i[0]?e[0]:e[e.length-1])}else if(null!=I&&I.preserveTabOrder&&I.portalNode)if(P.current=!1,isOutsideEvent(e,I.portalNode)){const e=getNextTabbable(y);null==e||e.focus()}else{var t;null==(t=I.beforeOutsideRef.current)||t.focus()}}}),!x&&V("start"),r,V("end"),U&&jsxRuntimeExports.jsx(FocusGuard,{"data-type":"inside",ref:z,onFocus:e=>{if(c)enqueueFocus(j()[0]);else if(null!=I&&I.preserveTabOrder&&I.portalNode)if(d&&(P.current=!0),isOutsideEvent(e,I.portalNode)){const e=getPreviousTabbable(y);null==e||e.focus()}else{var t;null==(t=I.afterOutsideRef.current)||t.focus()}}})]})}let lockCount=0;const scrollbarProperty="--floating-ui-scrollbar-width";function enableScrollLock(){const e=getPlatform(),t=/iP(hone|ad|od)|iOS/.test(e)||"MacIntel"===e&&navigator.maxTouchPoints>1,r=document.body.style,n=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,o=r.left?parseFloat(r.left):window.scrollX,s=r.top?parseFloat(r.top):window.scrollY;if(r.overflow="hidden",r.setProperty(scrollbarProperty,i+"px"),i&&(r[n]=i+"px"),t){var a,l;const e=(null==(a=window.visualViewport)?void 0:a.offsetLeft)||0,t=(null==(l=window.visualViewport)?void 0:l.offsetTop)||0;Object.assign(r,{position:"fixed",top:-(s-Math.floor(t))+"px",left:-(o-Math.floor(e))+"px",right:"0"})}return()=>{Object.assign(r,{overflow:"",[n]:""}),r.removeProperty(scrollbarProperty),t&&(Object.assign(r,{position:"",top:"",left:"",right:""}),window.scrollTo(o,s))}}let cleanup=()=>{};const FloatingOverlay=reactExports.forwardRef(function(e,t){const{lockScroll:r=!1,...n}=e;return index$1(()=>{if(r)return lockCount++,1===lockCount&&(cleanup=enableScrollLock()),()=>{lockCount--,0===lockCount&&cleanup()}},[r]),jsxRuntimeExports.jsx("div",{ref:t,...n,style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...n.style}})});function isButtonTarget(e){return isHTMLElement(e.target)&&"BUTTON"===e.target.tagName}function isAnchorTarget(e){return isHTMLElement(e.target)&&"A"===e.target.tagName}function isSpaceIgnored(e){return isTypeableElement(e)}function useClick(e,t){void 0===t&&(t={});const{open:r,onOpenChange:n,dataRef:i,elements:{domReference:o}}=e,{enabled:s=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:u=!0,stickIfOpen:d=!0}=t,p=reactExports.useRef(),h=reactExports.useRef(!1),f=reactExports.useMemo(()=>({onPointerDown(e){p.current=e.pointerType},onMouseDown(e){const t=p.current;0===e.button&&"click"!==a&&(isMouseLikePointerType(t,!0)&&c||(!r||!l||i.current.openEvent&&d&&"mousedown"!==i.current.openEvent.type?(e.preventDefault(),n(!0,e.nativeEvent,"click")):n(!1,e.nativeEvent,"click")))},onClick(e){const t=p.current;"mousedown"===a&&p.current?p.current=void 0:isMouseLikePointerType(t,!0)&&c||(!r||!l||i.current.openEvent&&d&&"click"!==i.current.openEvent.type?n(!0,e.nativeEvent,"click"):n(!1,e.nativeEvent,"click"))},onKeyDown(e){p.current=void 0,e.defaultPrevented||!u||isButtonTarget(e)||(" "!==e.key||isSpaceIgnored(o)||(e.preventDefault(),h.current=!0),isAnchorTarget(e)||"Enter"===e.key&&n(!r||!l,e.nativeEvent,"click"))},onKeyUp(e){e.defaultPrevented||!u||isButtonTarget(e)||isSpaceIgnored(o)||" "===e.key&&h.current&&(h.current=!1,n(!r||!l,e.nativeEvent,"click"))}}),[i,o,a,c,u,n,r,d,l]);return reactExports.useMemo(()=>s?{reference:f}:{},[s,f])}const bubbleHandlerKeys={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},captureHandlerKeys={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},normalizeProp=e=>{var t,r;return{escapeKey:"boolean"==typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"==typeof e?e:null==(r=null==e?void 0:e.outsidePress)||r}};function useDismiss(e,t){void 0===t&&(t={});const{open:r,onOpenChange:n,elements:i,dataRef:o}=e,{enabled:s=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:u=!1,referencePressEvent:d="pointerdown",ancestorScroll:p=!1,bubbles:h,capture:f}=t,m=useFloatingTree(),g=useEffectEvent("function"==typeof l?l:()=>!1),b="function"==typeof l?g:l,y=reactExports.useRef(!1),{escapeKey:T,outsidePress:E}=normalizeProp(h),{escapeKey:O,outsidePress:S}=normalizeProp(f),x=reactExports.useRef(!1),v=useEffectEvent(e=>{var t;if(!r||!s||!a||"Escape"!==e.key)return;if(x.current)return;const i=null==(t=o.current.floatingContext)?void 0:t.nodeId,l=m?getNodeChildren$1(m.nodesRef.current,i):[];if(!T&&(e.stopPropagation(),l.length>0)){let e=!0;if(l.forEach(t=>{var r;null==(r=t.context)||!r.open||t.context.dataRef.current.__escapeKeyBubbles||(e=!1)}),!e)return}n(!1,isReactEvent(e)?e.nativeEvent:e,"escape-key")}),_=useEffectEvent(e=>{var t;const r=()=>{var t;v(e),null==(t=getTarget$2(e))||t.removeEventListener("keydown",r)};null==(t=getTarget$2(e))||t.addEventListener("keydown",r)}),A=useEffectEvent(e=>{var t;const r=o.current.insideReactTree;o.current.insideReactTree=!1;const s=y.current;if(y.current=!1,"click"===c&&s)return;if(r)return;if("function"==typeof b&&!b(e))return;const a=getTarget$2(e),l="["+createAttribute("inert")+"]",u=getDocument$1(i.floating).querySelectorAll(l);let d=isElement$1(a)?a:null;for(;d&&!isLastTraversableNode(d);){const e=getParentNode(d);if(isLastTraversableNode(e)||!isElement$1(e))break;d=e}if(u.length&&isElement$1(a)&&!isRootElement(a)&&!contains$3(a,i.floating)&&Array.from(u).every(e=>!contains$3(d,e)))return;if(isHTMLElement(a)&&k){const t=isLastTraversableNode(a),r=getComputedStyle$1(a),n=/auto|scroll/,i=t||n.test(r.overflowX),o=t||n.test(r.overflowY),s=i&&a.clientWidth>0&&a.scrollWidth>a.clientWidth,l=o&&a.clientHeight>0&&a.scrollHeight>a.clientHeight,c="rtl"===r.direction,u=l&&(c?e.offsetX<=a.offsetWidth-a.clientWidth:e.offsetX>a.clientWidth),d=s&&e.offsetY>a.clientHeight;if(u||d)return}const p=null==(t=o.current.floatingContext)?void 0:t.nodeId,h=m&&getNodeChildren$1(m.nodesRef.current,p).some(t=>{var r;return isEventTargetWithin(e,null==(r=t.context)?void 0:r.elements.floating)});if(isEventTargetWithin(e,i.floating)||isEventTargetWithin(e,i.domReference)||h)return;const f=m?getNodeChildren$1(m.nodesRef.current,p):[];if(f.length>0){let e=!0;if(f.forEach(t=>{var r;null==(r=t.context)||!r.open||t.context.dataRef.current.__outsidePressBubbles||(e=!1)}),!e)return}n(!1,e,"outside-press")}),C=useEffectEvent(e=>{var t;const r=()=>{var t;A(e),null==(t=getTarget$2(e))||t.removeEventListener(c,r)};null==(t=getTarget$2(e))||t.addEventListener(c,r)});reactExports.useEffect(()=>{if(!r||!s)return;o.current.__escapeKeyBubbles=T,o.current.__outsidePressBubbles=E;let e=-1;function t(e){n(!1,e,"ancestor-scroll")}function l(){window.clearTimeout(e),x.current=!0}function u(){e=window.setTimeout(()=>{x.current=!1},isWebKit()?5:0)}const d=getDocument$1(i.floating);a&&(d.addEventListener("keydown",O?_:v,O),d.addEventListener("compositionstart",l),d.addEventListener("compositionend",u)),b&&d.addEventListener(c,S?C:A,S);let h=[];return p&&(isElement$1(i.domReference)&&(h=getOverflowAncestors(i.domReference)),isElement$1(i.floating)&&(h=h.concat(getOverflowAncestors(i.floating))),!isElement$1(i.reference)&&i.reference&&i.reference.contextElement&&(h=h.concat(getOverflowAncestors(i.reference.contextElement)))),h=h.filter(e=>{var t;return e!==(null==(t=d.defaultView)?void 0:t.visualViewport)}),h.forEach(e=>{e.addEventListener("scroll",t,{passive:!0})}),()=>{a&&(d.removeEventListener("keydown",O?_:v,O),d.removeEventListener("compositionstart",l),d.removeEventListener("compositionend",u)),b&&d.removeEventListener(c,S?C:A,S),h.forEach(e=>{e.removeEventListener("scroll",t)}),window.clearTimeout(e)}},[o,i,a,b,c,r,n,p,s,T,E,v,O,_,A,S,C]),reactExports.useEffect(()=>{o.current.insideReactTree=!1},[o,b,c]);const w=reactExports.useMemo(()=>({onKeyDown:v,...u&&{[bubbleHandlerKeys[d]]:e=>{n(!1,e.nativeEvent,"reference-press")},..."click"!==d&&{onClick(e){n(!1,e.nativeEvent,"reference-press")}}}}),[v,n,u,d]),k=reactExports.useMemo(()=>({onKeyDown:v,onMouseDown(){y.current=!0},onMouseUp(){y.current=!0},[captureHandlerKeys[c]]:()=>{o.current.insideReactTree=!0}}),[v,c,o]);return reactExports.useMemo(()=>s?{reference:w,floating:k}:{},[s,w,k])}function useFloatingRootContext(e){const{open:t=!1,onOpenChange:r,elements:n}=e,i=useId(),o=reactExports.useRef({}),[s]=reactExports.useState(()=>createEventEmitter()),a=null!=useFloatingParentNodeId();{const e=n.reference;e&&!isElement$1(e)&&error$3("Cannot pass a virtual element to the `elements.reference` option,","as it must be a real DOM element. Use `refs.setPositionReference()`","instead.")}const[l,c]=reactExports.useState(n.reference),u=useEffectEvent((e,t,n)=>{o.current.openEvent=e?t:void 0,s.emit("openchange",{open:e,event:t,reason:n,nested:a}),null==r||r(e,t,n)}),d=reactExports.useMemo(()=>({setPositionReference:c}),[]),p=reactExports.useMemo(()=>({reference:l||n.reference||null,floating:n.floating||null,domReference:n.reference}),[l,n.reference,n.floating]);return reactExports.useMemo(()=>({dataRef:o,open:t,onOpenChange:u,elements:p,events:s,floatingId:i,refs:d}),[t,u,p,s,i,d])}function useFloating(e){void 0===e&&(e={});const{nodeId:t}=e,r=useFloatingRootContext({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||r,i=n.elements,[o,s]=reactExports.useState(null),[a,l]=reactExports.useState(null),c=(null==i?void 0:i.domReference)||o,u=reactExports.useRef(null),d=useFloatingTree();index$1(()=>{c&&(u.current=c)},[c]);const p=useFloating$1({...e,elements:{...i,...a&&{reference:a}}}),h=reactExports.useCallback(e=>{const t=isElement$1(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),getClientRects:()=>e.getClientRects(),contextElement:e}:e;l(t),p.refs.setReference(t)},[p.refs]),f=reactExports.useCallback(e=>{(isElement$1(e)||null===e)&&(u.current=e,s(e)),(isElement$1(p.refs.reference.current)||null===p.refs.reference.current||null!==e&&!isElement$1(e))&&p.refs.setReference(e)},[p.refs]),m=reactExports.useMemo(()=>({...p.refs,setReference:f,setPositionReference:h,domReference:u}),[p.refs,f,h]),g=reactExports.useMemo(()=>({...p.elements,domReference:c}),[p.elements,c]),b=reactExports.useMemo(()=>({...p,...n,refs:m,elements:g,nodeId:t}),[p,m,g,t,n]);return index$1(()=>{n.dataRef.current.floatingContext=b;const e=null==d?void 0:d.nodesRef.current.find(e=>e.id===t);e&&(e.context=b)}),reactExports.useMemo(()=>({...p,context:b,refs:m,elements:g}),[p,m,g,b])}function isMacSafari(){return isMac$1()&&isSafari()}function useFocus(e,t){void 0===t&&(t={});const{open:r,onOpenChange:n,events:i,dataRef:o,elements:s}=e,{enabled:a=!0,visibleOnly:l=!0}=t,c=reactExports.useRef(!1),u=reactExports.useRef(-1),d=reactExports.useRef(!0);reactExports.useEffect(()=>{if(!a)return;const e=getWindow(s.domReference);function t(){!r&&isHTMLElement(s.domReference)&&s.domReference===activeElement(getDocument$1(s.domReference))&&(c.current=!0)}function n(){d.current=!0}function i(){d.current=!1}return e.addEventListener("blur",t),isMacSafari()&&(e.addEventListener("keydown",n,!0),e.addEventListener("pointerdown",i,!0)),()=>{e.removeEventListener("blur",t),isMacSafari()&&(e.removeEventListener("keydown",n,!0),e.removeEventListener("pointerdown",i,!0))}},[s.domReference,r,a]),reactExports.useEffect(()=>{if(a)return i.on("openchange",e),()=>{i.off("openchange",e)};function e(e){let{reason:t}=e;"reference-press"!==t&&"escape-key"!==t||(c.current=!0)}},[i,a]),reactExports.useEffect(()=>()=>{clearTimeoutIfSet(u)},[]);const p=reactExports.useMemo(()=>({onMouseLeave(){c.current=!1},onFocus(e){if(c.current)return;const t=getTarget$2(e.nativeEvent);if(l&&isElement$1(t))if(isMacSafari()&&!e.relatedTarget){if(!d.current&&!isTypeableElement(t))return}else if(!matchesFocusVisible(t))return;n(!0,e.nativeEvent,"focus")},onBlur(e){c.current=!1;const t=e.relatedTarget,r=e.nativeEvent,i=isElement$1(t)&&t.hasAttribute(createAttribute("focus-guard"))&&"outside"===t.getAttribute("data-type");u.current=window.setTimeout(()=>{var e;const a=activeElement(s.domReference?s.domReference.ownerDocument:document);(t||a!==s.domReference)&&(contains$3(null==(e=o.current.floatingContext)?void 0:e.refs.floating.current,a)||contains$3(s.domReference,a)||i||n(!1,r,"focus"))})}}),[o,s.domReference,n,l]);return reactExports.useMemo(()=>a?{reference:p}:{},[a,p])}function mergeProps(e,t,r){const n=new Map,i="item"===r;let o=e;if(i&&e){const{[ACTIVE_KEY]:t,[SELECTED_KEY]:r,...n}=e;o=n}return{..."floating"===r&&{tabIndex:-1,[FOCUSABLE_ATTRIBUTE]:""},...o,...t.map(t=>{const n=t?t[r]:null;return"function"==typeof n?e?n(e):null:n}).concat(e).reduce((e,t)=>t?(Object.entries(t).forEach(t=>{let[r,o]=t;var s;i&&[ACTIVE_KEY,SELECTED_KEY].includes(r)||(0===r.indexOf("on")?(n.has(r)||n.set(r,[]),"function"==typeof o&&(null==(s=n.get(r))||s.push(o),e[r]=function(){for(var e,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return null==(e=n.get(r))?void 0:e.map(e=>e(...i)).find(e=>void 0!==e)})):e[r]=o)}),e):e,{})}}function useInteractions(e){void 0===e&&(e=[]);const t=e.map(e=>null==e?void 0:e.reference),r=e.map(e=>null==e?void 0:e.floating),n=e.map(e=>null==e?void 0:e.item),i=reactExports.useCallback(t=>mergeProps(t,e,"reference"),t),o=reactExports.useCallback(t=>mergeProps(t,e,"floating"),r),s=reactExports.useCallback(t=>mergeProps(t,e,"item"),n);return reactExports.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:s}),[i,o,s])}const componentRoleToAriaRoleMap=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function useRole(e,t){var r,n;void 0===t&&(t={});const{open:i,elements:o,floatingId:s}=e,{enabled:a=!0,role:l="dialog"}=t,c=useId(),u=(null==(r=o.domReference)?void 0:r.id)||c,d=reactExports.useMemo(()=>{var e;return(null==(e=getFloatingFocusElement(o.floating))?void 0:e.id)||s},[o.floating,s]),p=null!=(n=componentRoleToAriaRoleMap.get(l))?n:l,h=null!=useFloatingParentNodeId(),f=reactExports.useMemo(()=>"tooltip"===p||"label"===l?{["aria-"+("label"===l?"labelledby":"describedby")]:i?d:void 0}:{"aria-expanded":i?"true":"false","aria-haspopup":"alertdialog"===p?"dialog":p,"aria-controls":i?d:void 0,..."listbox"===p&&{role:"combobox"},..."menu"===p&&{id:u},..."menu"===p&&h&&{role:"menuitem"},..."select"===l&&{"aria-autocomplete":"none"},..."combobox"===l&&{"aria-autocomplete":"list"}},[p,d,h,i,u,l]),m=reactExports.useMemo(()=>{const e={id:d,...p&&{role:p}};return"tooltip"===p||"label"===l?e:{...e,..."menu"===p&&{"aria-labelledby":u}}},[p,d,u,l]),g=reactExports.useCallback(e=>{let{active:t,selected:r}=e;const n={role:"option",...t&&{id:d+"-fui-option"}};switch(l){case"select":case"combobox":return{...n,"aria-selected":r}}return{}},[d,l]);return reactExports.useMemo(()=>a?{reference:f,floating:m,item:g}:{},[a,f,m,g])}function useDelayUnmount(e,t){const[r,n]=reactExports.useState(e);return e&&!r&&n(!0),reactExports.useEffect(()=>{if(!e&&r){const e=setTimeout(()=>n(!1),t);return()=>clearTimeout(e)}},[e,r,t]),r}function useTransitionStatus(e,t){void 0===t&&(t={});const{open:r,elements:{floating:n}}=e,{duration:i=250}=t,o=("number"==typeof i?i:i.close)||0,[s,a]=reactExports.useState("unmounted"),l=useDelayUnmount(r,o);return l||"close"!==s||a("unmounted"),index$1(()=>{if(n){if(r){a("initial");const e=requestAnimationFrame(()=>{reactDomExports.flushSync(()=>{a("open")})});return()=>{cancelAnimationFrame(e)}}a("close")}},[r,n]),{isMounted:l,status:s}}function getNodeChildren(e,t,r){return void 0===r&&(r=!0),e.filter(e=>{var n;return e.parentId===t&&(!r||(null==(n=e.context)?void 0:n.open))}).flatMap(t=>[t,...getNodeChildren(e,t.id,r)])}function isPointInPolygon(e,t){const[r,n]=e;let i=!1;const o=t.length;for(let s=0,a=o-1;s<o;a=s++){const[e,o]=t[s]||[0,0],[l,c]=t[a]||[0,0];o>=n!=c>=n&&r<=(l-e)*(n-o)/(c-o)+e&&(i=!i)}return i}function isInside(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function safePolygon(e){void 0===e&&(e={});const{buffer:t=.5,blockPointerEvents:r=!1,requireIntent:n=!0}=e,i={current:-1};let o=!1,s=null,a=null,l="undefined"!=typeof performance?performance.now():0;const c=e=>{let{x:r,y:c,placement:u,elements:d,onClose:p,nodeId:h,tree:f}=e;return function(e){function m(){clearTimeoutIfSet(i),p()}if(clearTimeoutIfSet(i),!d.domReference||!d.floating||null==u||null==r||null==c)return;const{clientX:g,clientY:b}=e,y=[g,b],T=getTarget$1(e),E="mouseleave"===e.type,O=contains$2(d.floating,T),S=contains$2(d.domReference,T),x=d.domReference.getBoundingClientRect(),v=d.floating.getBoundingClientRect(),_=u.split("-")[0],A=r>v.right-v.width/2,C=c>v.bottom-v.height/2,w=isInside(y,x),k=v.width>x.width,D=v.height>x.height,I=(k?x:v).left,R=(k?x:v).right,N=(D?x:v).top,P=(D?x:v).bottom;if(O&&(o=!0,!E))return;if(S&&(o=!1),S&&!E)return void(o=!0);if(E&&isElement$1(e.relatedTarget)&&contains$2(d.floating,e.relatedTarget))return;if(f&&getNodeChildren(f.nodesRef.current,h).length)return;if("top"===_&&c>=x.bottom-1||"bottom"===_&&c<=x.top+1||"left"===_&&r>=x.right-1||"right"===_&&r<=x.left+1)return m();let M=[];switch(_){case"top":M=[[I,x.top+1],[I,v.bottom-1],[R,v.bottom-1],[R,x.top+1]];break;case"bottom":M=[[I,v.top+1],[I,x.bottom-1],[R,x.bottom-1],[R,v.top+1]];break;case"left":M=[[v.right-1,P],[v.right-1,N],[x.left+1,N],[x.left+1,P]];break;case"right":M=[[x.right-1,P],[x.right-1,N],[v.left+1,N],[v.left+1,P]]}if(!isPointInPolygon([g,b],M)){if(o&&!w)return m();if(!E&&n){const t=function(e,t){const r=performance.now(),n=r-l;if(null===s||null===a||0===n)return s=e,a=t,l=r,null;const i=e-s,o=t-a,c=Math.sqrt(i*i+o*o);return s=e,a=t,l=r,c/n}(e.clientX,e.clientY);if(null!==t&&t<.1)return m()}isPointInPolygon([g,b],function(e){let[r,n]=e;switch(_){case"top":return[[k?r+t/2:A?r+4*t:r-4*t,n+t+1],[k?r-t/2:A?r+4*t:r-4*t,n+t+1],[v.left,A||k?v.bottom-t:v.top],[v.right,A?k?v.bottom-t:v.top:v.bottom-t]];case"bottom":return[[k?r+t/2:A?r+4*t:r-4*t,n-t],[k?r-t/2:A?r+4*t:r-4*t,n-t],[v.left,A||k?v.top+t:v.bottom],[v.right,A?k?v.top+t:v.bottom:v.top+t]];case"left":{const e=[r+t+1,D?n+t/2:C?n+4*t:n-4*t],i=[r+t+1,D?n-t/2:C?n+4*t:n-4*t];return[[C||D?v.right-t:v.left,v.top],[C?D?v.right-t:v.left:v.right-t,v.bottom],e,i]}case"right":return[[r-t,D?n+t/2:C?n+4*t:n-4*t],[r-t,D?n-t/2:C?n+4*t:n-4*t],[C||D?v.left+t:v.right,v.top],[C?D?v.left+t:v.right:v.left+t,v.bottom]]}}([r,c]))?!o&&n&&(i.current=window.setTimeout(m,40)):m()}}};return c.__options={blockPointerEvents:r},c}const AUTO_PLACEMENTS=["auto","auto-start","auto-end"],ARROW_SIZE=8,OVERFLOW_PADDING=4,TRANSITION_DURATION$1=100;function getOffsetOptions(e,t){let r=e;return t&&("number"==typeof r?r+=ARROW_SIZE:r={...r,mainAxis:(r.mainAxis??0)+ARROW_SIZE}),{offset:r}}function isAutoPlacement(e){return Boolean(e&&AUTO_PLACEMENTS.includes(e))}function getPlacementOptions(e,t){let r,n;if(Array.isArray(e))r=e[0],n=flip({padding:OVERFLOW_PADDING,altBoundary:t,fallbackPlacements:e.slice(1)});else if(isAutoPlacement(e)){let i;"auto-start"===e?i="start":"auto-end"===e&&(i="end"),r=void 0,n=autoPlacement({padding:OVERFLOW_PADDING,altBoundary:t,alignment:i})}else{let i;i=e?.startsWith("top")||e?.startsWith("left")?"start":"end",r=e,n=flip({padding:OVERFLOW_PADDING,altBoundary:t,fallbackAxisSideDirection:i})}return{placement:r,middleware:n}}const arrowStylesMiddleware=()=>({name:"arrowStyles",fn:({middlewareData:e})=>e.arrow?{data:{left:e.arrow.x,top:e.arrow.y}}:{}}),b$1m=block$2("portal");function Portal$2({container:e,children:t,disablePortal:r}){const n=usePortalContainer(),{scoped:i}=useThemeContext(),o=e??n;return r?jsxRuntimeExports.jsx(reactExports.Fragment,{children:t}):o?jsxRuntimeExports.jsx(FloatingPortal,{root:o,children:i?jsxRuntimeExports.jsx(ThemeProvider,{rootClassName:b$1m("theme-wrapper"),scoped:!0,children:t}):t}):null}function getElementRef(e){{const t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get;if(t&&"isReactWarning"in t&&t.isReactWarning)return e.ref}return e.props.ref??e.ref}const b$1l=block$2("tooltip"),DEFAULT_OPEN_DELAY$2=1e3,DEFAULT_CLOSE_DELAY$2=0,DEFAULT_PLACEMENT$1="bottom",DEFAULT_OFFSET$1=4;function Tooltip({children:e,open:t,onOpenChange:r,strategy:n,placement:i=DEFAULT_PLACEMENT$1,offset:o=DEFAULT_OFFSET$1,disabled:s,content:a,trigger:l,role:c="tooltip",openDelay:u=DEFAULT_OPEN_DELAY$2,closeDelay:d=DEFAULT_CLOSE_DELAY$2,container:p,disablePortal:h,className:f,style:m,qa:g,...b}){const[y,T]=reactExports.useState(null),{placement:E,middleware:O}=getPlacementOptions(i,!1),[S,x]=useControlledState(t,!1,r),{refs:v,floatingStyles:_,context:A}=useFloating({open:S,onOpenChange:x,strategy:n,placement:E,middleware:[offset$1(o),shift$2({padding:OVERFLOW_PADDING,limiter:limitShift()}),O],whileElementsMounted:autoUpdate,elements:{reference:y}}),C=useHover$1(A,{enabled:"focus"!==l,delay:{open:u,close:d},move:!1}),w=useFocus(A),k=useRole(A,{role:c}),D=useDismiss(A,{outsidePress:!1,ancestorScroll:!0}),{getReferenceProps:I,getFloatingProps:R}=useInteractions([C,w,k,D]),N=useForkRef(T,reactExports.isValidElement(e)?getElementRef(e):void 0),P=reactExports.isValidElement(e)?I(e.props):I(),M=reactExports.isValidElement(e)?reactExports.cloneElement(e,{...P,ref:N}):e(P,N);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[M,S&&!s?jsxRuntimeExports.jsx(Portal$2,{container:p,disablePortal:h,children:jsxRuntimeExports.jsx("div",{ref:v.setFloating,style:{position:"absolute",top:0,left:0,zIndex:1e4,width:"max-content",..._},...R(),children:jsxRuntimeExports.jsx("div",{className:b$1l(null,f),style:m,"data-qa":g,...filterDOMProps(b,{labelable:!0}),children:a})})}):null]})}const b$1k=block$2("action-tooltip"),DEFAULT_OPEN_DELAY$1=500,DEFAULT_CLOSE_DELAY$1=0;function ActionTooltip({title:e,description:t,hotkey:r,openDelay:n=DEFAULT_OPEN_DELAY$1,closeDelay:i=DEFAULT_CLOSE_DELAY$1,className:o,...s}){const a=reactExports.useMemo(()=>jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:b$1k("heading"),children:[jsxRuntimeExports.jsx("div",{className:b$1k("title"),children:e}),r&&jsxRuntimeExports.jsx(Hotkey,{view:"dark",value:r,className:b$1k("hotkey")})]}),t&&jsxRuntimeExports.jsx("div",{className:b$1k("description"),children:t})]}),[e,t,r]);return jsxRuntimeExports.jsx(Tooltip,{...s,role:"label",content:a,openDelay:n,closeDelay:i,className:b$1k(null,o)})}class EventBroker{subscriptions=[];componentPrefix;constructor(e){this.componentPrefix=e}subscribe(e){this.subscriptions.push(e)}unsubscribe(e){const t=this.subscriptions.indexOf(e);t>-1&&this.subscriptions.splice(t,1)}publish({componentId:e,...t}){this.subscriptions.forEach(r=>r({...t,componentId:this.componentPrefix?`${this.componentPrefix}${e}`:e}))}withEventPublisher(e,t){return r=>{this.publish({...r,componentId:e,qa:t})}}}const eventBroker=new EventBroker(NAMESPACE),b$1j=block$2("button");function warnAboutPhysicalValues(){warnOnce$1('[Button.Icon] Physical values (left, right) of "side" property are deprecated. Use logical values (start, end) instead.')}const ButtonIcon=({side:e,className:t,children:r})=>jsxRuntimeExports.jsx("span",{className:b$1j("icon",{side:getIconSide(e)},t),children:jsxRuntimeExports.jsx("span",{className:b$1j("icon-inner"),children:r})});function getIconSide(e){let t=e;return"left"===t&&(warnAboutPhysicalValues(),t="start"),"right"===t&&(warnAboutPhysicalValues(),t="end"),t}function isButtonComponentProps(e){return void 0!==e.component}ButtonIcon.displayName="Button.Icon";const b$1i=block$2("button"),_Button=reactExports.forwardRef(function(e,t){const{view:r="normal",size:n="m",pin:i="round-round",selected:o,disabled:s=!1,loading:a=!1,width:l,children:c,extraProps:u,qa:d,onClickCapture:p,...h}=e,f={onClickCapture:reactExports.useCallback(e=>{eventBroker.publish({componentId:"Button",eventId:"click",domEvent:e,meta:{content:e.currentTarget.textContent,view:r}}),p&&p(e)},[r,p]),className:b$1i({view:r,size:n,pin:i,selected:o,disabled:s||a,loading:a,width:l},h.className),"data-qa":d,tabIndex:h.tabIndex??u?.tabIndex??(s?void 0:0)};return isButtonComponentProps(e)?reactExports.createElement(e.component,{role:"button",...h,...u,...f,ref:t,"aria-disabled":s??void 0},prepareChildren(c)):void 0!==e.href?jsxRuntimeExports.jsx("a",{...h,...u,...f,ref:t,rel:"_blank"!==e.target||h.rel?h.rel:"noopener noreferrer","aria-disabled":s??void 0,children:prepareChildren(c)}):jsxRuntimeExports.jsx("button",{...h,...u,...f,ref:t,type:e.type||"button",disabled:s||a,"aria-pressed":o,children:prepareChildren(c)})}),Button=Object.assign(_Button,{Icon:ButtonIcon}),isButtonIconComponent=isOfType(ButtonIcon),isSpan=isOfType("span"),buttonIconClassRe=RegExp(`^${b$1i("icon")}($|\\s+\\w)`);function prepareChildren(e){const t=reactExports.Children.toArray(e);if(1===t.length){const e=t[0];return isButtonIconComponent(e)||isSpan(e)&&buttonIconClassRe.test(e.props.className||"")?e:isIcon(e)||isSvg(e)?jsxRuntimeExports.jsx(Button.Icon,{children:e},"icon"):jsxRuntimeExports.jsx("span",{className:b$1i("text"),children:e},"text")}{let e,r,n;const i=[];for(const o of t){const t=isIcon(o)||isSvg(o),n=isButtonIconComponent(o),s=isSpan(o)&&buttonIconClassRe.test(o.props.className||"");if(t||n||s)if(e||0!==i.length){if(!r&&0!==i.length){const e="icon-end",i="end";r=t?jsxRuntimeExports.jsx(Button.Icon,{side:i,children:o},e):n?reactExports.cloneElement(o,{side:i}):reactExports.cloneElement(o,{className:b$1i("icon",{side:getIconSide(i)},o.props.className)})}}else{const r="icon-start",i="start";e=t?jsxRuntimeExports.jsx(Button.Icon,{side:i,children:o},r):n?reactExports.cloneElement(o,{side:i}):reactExports.cloneElement(o,{className:b$1i("icon",{side:getIconSide(i)},o.props.className)})}else i.push(o)}return i.length>0&&(n=jsxRuntimeExports.jsx("span",{className:b$1i("text"),children:i},"text")),[e,r,n]}}const b$1h=block$2("color-text"),colorText=({color:e},t)=>b$1h({color:e},t),b$1g=block$2("text"),text$6=({variant:e="body-1",ellipsis:t,ellipsisLines:r,whiteSpace:n,wordBreak:i},o)=>b$1g({variant:e,ellipsis:t,ws:n,wb:i,"ellipsis-lines":r},o),Text$3=reactExports.forwardRef(function({as:e,children:t,variant:r,className:n,ellipsis:i,color:o,whiteSpace:s,wordBreak:a,ellipsisLines:l,style:c,qa:u,...d},p){const h=e||"span",f={...c};return"number"==typeof l&&(f.WebkitLineClamp=l),jsxRuntimeExports.jsx(h,{ref:p,className:text$6({variant:r,ellipsis:i,whiteSpace:s,wordBreak:a,ellipsisLines:"number"==typeof l},o?colorText({color:o},n):n),style:f,"data-qa":u,...d,children:t})});Text$3.displayName="Text";const cnDropdownMenu=block$2("dropdown-menu"),DropdownMenuContext=reactExports.createContext({toggle(){},data:void 0});DropdownMenuContext.displayName="DropdownMenu.Context";const b$1f=block$2("menu"),MenuGroup=reactExports.forwardRef(function({label:e,children:t,style:r,className:n,qa:i},o){const s=useUniqId();return jsxRuntimeExports.jsx("li",{ref:o,className:b$1f("list-group-item"),children:jsxRuntimeExports.jsxs("div",{style:r,className:b$1f("group",n),"data-qa":i,children:[e&&jsxRuntimeExports.jsx("div",{id:s,className:b$1f("group-label"),children:e}),jsxRuntimeExports.jsx("ul",{role:"group","aria-labelledby":s,className:b$1f("group-list"),children:t})]})})}),b$1e=block$2("menu"),MenuItem=reactExports.forwardRef(function({iconStart:e,iconEnd:t,title:r,disabled:n,active:i,selected:o,href:s,target:a,rel:l,onClick:c,style:u,className:d,contentClassName:p,theme:h,extraProps:f,children:m,qa:g},b){const{onKeyDown:y}=useActionHandlers(c),T=reactExports.useCallback(e=>{eventBroker.publish({componentId:"MenuItem",eventId:"click",domEvent:e})},[]),E={role:"menuitem",onKeyDown:c&&!n?y:void 0},O={title:r,onClick:n?void 0:c,onClickCapture:n?void 0:T,style:u,tabIndex:n?-1:0,className:b$1e("item",{disabled:n,active:i,selected:o,theme:h,interactive:Boolean(c)||Boolean(s)},d),"data-qa":g},S=[e&&jsxRuntimeExports.jsx("div",{className:b$1e("item-icon"),children:e},"icon-start"),jsxRuntimeExports.jsx("div",{className:b$1e("item-content",p),children:m},"content"),t&&jsxRuntimeExports.jsx("div",{className:b$1e("item-icon-end"),children:t},"icon-end")];let x;return x=s?jsxRuntimeExports.jsx("a",{...E,...f,...O,href:s,target:a,rel:l,children:S}):jsxRuntimeExports.jsx("div",{...E,...f,...O,children:S}),jsxRuntimeExports.jsx("li",{ref:b,className:b$1e("list-item"),children:x})}),b$1d=block$2("menu"),Menu=reactExports.forwardRef(function({size:e="m",children:t,style:r,className:n,qa:i,...o},s){return jsxRuntimeExports.jsx("ul",{...filterDOMProps(o,{labelable:!0}),ref:s,role:"menu",style:r,className:b$1d({size:e},n),"data-qa":i,children:t})});function usePrevious$1(e){const t=reactExports.useRef();return reactExports.useEffect(()=>{t.current=e}),t.current}function useFloatingTransition({context:e,duration:t,onTransitionIn:r,onTransitionInComplete:n,onTransitionOut:i,onTransitionOutComplete:o}){const{isMounted:s,status:a}=useTransitionStatus(e,{duration:t}),l=usePrevious$1(a),c=("number"==typeof t?t:t.open)??0,u=reactExports.useRef(null);return reactExports.useEffect(()=>{"open"===a&&"initial"===l&&(r?.(),u.current=setTimeout(()=>{n?.(),u.current=null},c)),"close"===a&&"open"===l&&(u.current&&(clearTimeout(u.current),u.current=null),i?.()),"unmounted"===a&&"close"===l&&o?.()},[a,l,c,r,n,i,o]),reactExports.useEffect(()=>()=>{u.current&&(clearTimeout(u.current),u.current=null)},[]),{isMounted:s,status:a}}Menu.Item=MenuItem,Menu.Group=MenuGroup;class LayerManager{stack=[];mouseDownLayerTarget;add(e){this.stack.push(e),1===this.stack.length&&this.addListeners(),this.notifyLayersChange()}remove(e){const t=this.stack.indexOf(e);this.stack.splice(t,1),0===this.stack.length&&this.removeListeners(),this.notifyLayersChange()}getLayersCount(){return this.stack.length}getLayers(){return this.stack.map(({type:e})=>({type:e}))}addListeners(){document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("click",this.handleDocumentClick,!0),document.addEventListener("mousedown",this.handleDocumentMouseDown,!0)}removeListeners(){document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("click",this.handleDocumentClick,!0),document.removeEventListener("mousedown",this.handleDocumentMouseDown,!0)}notifyLayersChange(){eventBroker.publish({componentId:"LayerManager",eventId:"layerschange",meta:{layersCount:this.getLayersCount(),layers:this.getLayers()}})}handleDocumentKeyDown=e=>{if(e.code===KeyCode.ESCAPE){const t=this.getTopLayer();t.disableEscapeKeyDown||(t.onEscapeKeyDown?.(e),t.onClose?.(e,"escapeKeyDown"))}if(e.code===KeyCode.ENTER){const t=this.getTopLayer();t.onEnterKeyDown?.(e)}};handleDocumentClick=e=>{if(this.isToastClick(e))return;let t,r=null;if(this.mouseDownLayerTarget){if(t=this.mouseDownLayerTarget.layer,r=this.mouseDownLayerTarget.target,this.mouseDownLayerTarget=void 0,!this.stack.includes(t))return}else t=this.getTopLayer();!t.disableOutsideClick&&this.isOutsideClick(t,e,r)&&(t.onOutsideClick?.(e),t.onClose?.(e,"outsideClick"))};handleDocumentMouseDown=e=>{const t=this.getTopLayer();t&&(this.mouseDownLayerTarget={layer:t,target:e.target})};getTopLayer(){return this.stack[this.stack.length-1]}isOutsideClick(e,t,r=null){const n=e.contentRefs||[],{target:i}=t,o="function"==typeof t.composedPath?t.composedPath():[];return n.length>0&&!n.some(e=>e?.current?.contains?.(i)||e?.current?.contains?.(r)||o.includes(e?.current))}isToastClick(e){return("function"==typeof e.composedPath?e.composedPath():[]).some(e=>Boolean(e?.dataset?.toast))}}const layerManager=new LayerManager;function useLayer({open:e,disableEscapeKeyDown:t,disableOutsideClick:r,onEscapeKeyDown:n,onEnterKeyDown:i,onOutsideClick:o,onClose:s,contentRefs:a,enabled:l=!0,type:c}){const u=reactExports.useRef({disableEscapeKeyDown:t,disableOutsideClick:r,onEscapeKeyDown:n,onEnterKeyDown:i,onOutsideClick:o,onClose:s,contentRefs:a,type:c});reactExports.useEffect(()=>{Object.assign(u.current,{disableEscapeKeyDown:t,disableOutsideClick:r,onEscapeKeyDown:n,onEnterKeyDown:i,onOutsideClick:o,onClose:s,contentRefs:a,enabled:l})},[t,r,n,i,o,s,a,l]),reactExports.useEffect(()=>{if(e&&l){const e=u.current;return layerManager.add(e),()=>{layerManager.remove(e)}}},[e,l])}const b$1c=block$2("popup"),PopupArrow=reactExports.forwardRef(function({styles:e},t){return jsxRuntimeExports.jsx("div",{ref:t,className:b$1c("arrow"),style:e,children:jsxRuntimeExports.jsxs("div",{className:b$1c("arrow-content"),children:[jsxRuntimeExports.jsx("div",{className:b$1c("arrow-circle-wrapper"),children:jsxRuntimeExports.jsx("div",{className:b$1c("arrow-circle",{left:!0})})}),jsxRuntimeExports.jsx("div",{className:b$1c("arrow-circle-wrapper"),children:jsxRuntimeExports.jsx("div",{className:b$1c("arrow-circle",{right:!0})})})]})})}),close$3="Close",en$m={close:close$3},close$2="",ru$m={close:close$2},COMPONENT$2="Popup",i18n$i=addComponentKeysets({en:en$m,ru:ru$m},COMPONENT$2),b$1b=block$2("popup");function PopupComponent({keepMounted:e=!1,hasArrow:t=!1,open:r=!1,onOpenChange:n,strategy:i,placement:o,offset:s=4,anchorElement:a,anchorRef:l,floatingMiddlewares:c,floatingContext:u,floatingInteractions:d,floatingRef:p,floatingStyles:h,floatingClassName:f,modal:m=!1,initialFocus:g,returnFocus:b=!0,focusOrder:y,disableVisuallyHiddenDismiss:T=!m,onClose:E,onEscapeKeyDown:O,onOutsideClick:S,disableEscapeKeyDown:x=!1,disableOutsideClick:v=!1,disableFocusOut:_=!1,style:A,className:C,children:w,container:k,disablePortal:D=!1,disableLayer:I=!1,disableTransition:R=!1,qa:N,role:P,zIndex:M=1e3,onTransitionIn:$,onTransitionOut:L,onTransitionInComplete:B,onTransitionOutComplete:F,...q}){useLayer({open:r,type:"popup",enabled:!I});const j=reactExports.useRef(null),[G,H]=reactExports.useState(null),{offset:Q}=getOffsetOptions(s,t),{placement:z,middleware:V}=getPlacementOptions(o,D),{t:U}=i18n$i.useTranslation(),W=reactExports.useCallback((e,t,r)=>{if(n?.(e,t,r),e||!t)return;let i;i="escape-key"===r?"escapeKeyDown":"outside-press"===r?"outsideClick":r,"escapeKeyDown"===i&&O&&O(t),"outsideClick"===i&&S&&S(t),E?.(t,i)},[n,E,O,S]),Y=useFloatingNodeId(),{refs:X,elements:Z,floatingStyles:K,placement:J,middlewareData:ee,context:te,update:re,isPositioned:ne}=useFloating({rootContext:u,nodeId:Y,strategy:i,placement:z,open:r,onOpenChange:W,middleware:c??[offset$1(Q),shift$2({padding:OVERFLOW_PADDING,limiter:limitShift({offset:4+(t?18:0)}),altBoundary:D}),V,t&&arrow$1({element:G,padding:4}),t&&arrowStylesMiddleware()]});reactExports.useEffect(()=>{const e=void 0===a?l?.current:a;void 0!==e&&e!==X.reference.current&&X.setReference(e)},[a,l,X]);const ie=useRole(te,{enabled:Boolean(P||m),role:P??(m?"dialog":void 0)}),oe=useDismiss(te,{enabled:!v||!x,outsidePress:!v,escapeKey:!x}),{getFloatingProps:se}=useInteractions(d??[ie,oe]),{isMounted:ae,status:le}=useFloatingTransition({context:te,duration:R?0:TRANSITION_DURATION$1,onTransitionIn:$,onTransitionInComplete:B,onTransitionOut:L,onTransitionOutComplete:F});reactExports.useEffect(()=>{if(ae&&Z.reference&&Z.floating)return autoUpdate(Z.reference,Z.floating,re)},[ae,Z,re]);const ce=useForkRef(X.setFloating,p);let ue=g;return void 0===ue&&(ue=m?X.floating:-1),jsxRuntimeExports.jsx(FloatingNode,{id:Y,children:ae||e?jsxRuntimeExports.jsx(Portal$2,{container:k,disablePortal:D,children:jsxRuntimeExports.jsx(FloatingFocusManager,{context:te,disabled:!ne,modal:m,initialFocus:ue,returnFocus:b,closeOnFocusOut:!_,visuallyHiddenDismiss:!T&&U("close"),guards:m||!D,order:y,children:jsxRuntimeExports.jsx("div",{ref:ce,className:f,style:{position:"absolute",top:0,left:0,zIndex:M,width:"max-content",pointerEvents:ae?"auto":"none",outline:"none",...K,...h},"data-floating-ui-placement":J,"data-floating-ui-status":le,"aria-modal":!(!m||!ae)||void 0,...se(),children:jsxRuntimeExports.jsxs("div",{ref:j,className:b$1b({open:ae,"disable-transition":R},C),style:A,"data-qa":N,...filterDOMProps(q),children:[t&&jsxRuntimeExports.jsx(PopupArrow,{ref:H,styles:ee.arrowStyles}),w]})})})}):null})}function Popup(e){return null===useFloatingParentNodeId()?jsxRuntimeExports.jsx(FloatingTree,{children:jsxRuntimeExports.jsx(PopupComponent,{...e})}):jsxRuntimeExports.jsx(PopupComponent,{...e})}const rootMenuPath=[],DropdownMenuNavigationContext=reactExports.createContext({activeMenuPath:rootMenuPath,setActiveMenuPath:()=>{},anchorRef:{current:null}}),DropdownMenuNavigationContextProvider=({anchorRef:e,children:t,disabled:r})=>{const[n,i]=reactExports.useState(rootMenuPath);reactExports.useEffect(()=>{r&&i(rootMenuPath)},[r]);const o=reactExports.useMemo(()=>({activeMenuPath:n,setActiveMenuPath:i,anchorRef:e}),[n,e]);return jsxRuntimeExports.jsx(DropdownMenuNavigationContext.Provider,{value:o,children:t})},dropdownMenuSeparator={text:"",action:()=>{},path:[]};function isSeparator(e){return e===dropdownMenuSeparator}function shouldSkipItemNavigation(e){return e.disabled||isSeparator(e)}function stringifyNavigationPath(e){return e?.join(" ")??""}const DropdownMenuPopup=({items:e,open:t,anchorRef:r,onClose:n,size:i,menuProps:o,children:s,popupProps:a,path:l=[]})=>{const{toggle:c,data:u}=reactExports.useContext(DropdownMenuContext),{activeMenuPath:d,setActiveMenuPath:p,anchorRef:h}=reactExports.useContext(DropdownMenuNavigationContext),f=l.length>0,m=reactExports.useCallback(()=>{p(l.slice(0,l.length-1))},[p,l]),g=reactExports.useCallback(()=>{p(l)},[l,p]),b=reactExports.useCallback(()=>{m()},[m]),y=reactExports.useCallback((e,t)=>{e.items&&e.path?p(e.path):(e.action?.(t,u),c(!1))},[u,p,c]),T=reactExports.useCallback((t,r)=>{switch(r.key){case KeyCode.ESCAPE:return f&&(r.stopPropagation(),m?.()),!1;case KeyCode.ENTER:case KeyCode.SPACEBAR:{const n=e[t],i=n?.items;return(f||i)&&(r.stopPropagation(),r.preventDefault()),n&&y(n,r),!1}}return!0},[m,y,f,e]),E=t&&stringifyNavigationPath(l)===stringifyNavigationPath(d),{activeItemIndex:O,setActiveItemIndex:S,reset:x}=useListNavigation({items:e,skip:shouldSkipItemNavigation,anchorRef:h,onAnchorKeyDown:T,disabled:!E,initialValue:f?0:-1});return reactExports.useEffect(()=>{t||x()},[t,x]),jsxRuntimeExports.jsx(Popup,{open:t,anchorRef:r,onClose:n,placement:"bottom-start",...a,children:jsxRuntimeExports.jsx("div",{onMouseEnter:g,onMouseLeave:b,className:cnDropdownMenu("popup-content"),children:s||jsxRuntimeExports.jsx(Menu,{className:cnDropdownMenu("menu"),size:i,...o,children:e.map((e,r)=>{const o=E&&O===r,s=t&&!o&&0!==d.length&&stringifyNavigationPath(e.path)===stringifyNavigationPath(d.slice(0,e.path.length)),l={...e.extraProps,onMouseEnter:()=>S(r)};return jsxRuntimeExports.jsx(DropdownMenuItem,{size:i,className:cnDropdownMenu("menu-item",{separator:isSeparator(e),"active-parent":s,"with-submenu":Boolean(e.items?.length)},e.className),selected:o,popupProps:a,closeMenu:n,...e,extraProps:l},r)})})})})};function isSubmenuOpen(e,t){return e?.every((e,r)=>e===t?.[r])??!1}function useSubmenu({items:e,path:t}){const{activeMenuPath:r,setActiveMenuPath:n}=reactExports.useContext(DropdownMenuNavigationContext),i=Boolean(t)&&Boolean(e?.length),o=reactExports.useCallback(()=>{t&&n(t.slice(0,t.length-1))},[t,n]),s=reactExports.useCallback(()=>{t&&n(t)},[t,n]);return{hasSubmenu:i,isSubmenuOpen:isSubmenuOpen(t,r),openSubmenu:s,closeSubmenu:o}}const DropdownMenuItem=({text:e,action:t,items:r,popupProps:n,closeMenu:i,children:o,path:s,size:a,...l})=>{const{toggle:c,data:u}=reactExports.useContext(DropdownMenuContext),d=reactExports.useRef(null),p=useDirection(),{hasSubmenu:h,isSubmenuOpen:f,closeSubmenu:m,openSubmenu:g}=useSubmenu({items:r,path:s}),b=reactExports.useCallback(()=>{const e=()=>{i?i():c(!1)};h?(m(),requestAnimationFrame(e)):e()},[i,m,h,c]),y=reactExports.useCallback(e=>{h||(t?.(e,u),b())},[t,u,b,h]),T=reactExports.useMemo(()=>({...l.extraProps,onMouseEnter:e=>{l.extraProps?.onMouseEnter?.(e),h&&g()},onMouseLeave:e=>{l.extraProps?.onMouseLeave?.(e),h&&m()}}),[l.extraProps,m,h,g]),E=reactExports.useMemo(()=>"rtl"===p?["left-start","right-start"]:["right-start","left-start"],[p]),O=reactExports.useMemo(()=>h?jsxRuntimeExports.jsx(Icon,{data:"rtl"===p?ChevronLeft:ChevronRight,size:10,className:cnDropdownMenu("sub-menu-arrow")}):l.iconEnd,[h,p,l.iconEnd]);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Menu.Item,{ref:d,...l,extraProps:T,onClick:y,iconEnd:O,children:e||o}),h&&r&&jsxRuntimeExports.jsx(DropdownMenuPopup,{popupProps:{...n,className:cnDropdownMenu("sub-menu",n?.className),placement:E},size:a,items:r,path:s,open:f,anchorRef:d,onClose:b})]})};function useFormResetHandler({initialValue:e,onReset:t}){const[r,n]=reactExports.useState(null),i=reactExports.useRef(e);return reactExports.useEffect(()=>{if(!r)return;const e=()=>{t(i.current)};return r.addEventListener("reset",e),()=>{r.removeEventListener("reset",e)}},[r,t]),reactExports.useCallback(e=>{n(e?.form??null)},[])}function useCheckbox({name:e,value:t,id:r,defaultChecked:n,checked:i,indeterminate:o,onUpdate:s,onChange:a,controlRef:l,controlProps:c,onFocus:u,onBlur:d,disabled:p}){const h=reactExports.useRef(null),[f,m]=useControlledState(i,n??!1,s),g=!o&&i,b=o?"mixed":f,y=useFormResetHandler({initialValue:f,onReset:m}),T=useForkRef(l,h,y);return reactExports.useLayoutEffect(()=>{h.current&&(h.current.indeterminate=Boolean(o))},[o]),{checked:f,inputProps:{...c,name:e,value:t,id:r,onFocus:u,onBlur:d,disabled:p,type:"checkbox",onChange:e=>{m(e.target.checked),a&&a(e)},onClickCapture:reactExports.useCallback(e=>{eventBroker.publish({componentId:"Checkbox",eventId:"click",domEvent:e,meta:{checked:e.target.checked}})},[]),defaultChecked:n,checked:g,"aria-checked":b,ref:T}}}function useHover(){const[e,t]=reactExports.useState(!1);return[reactExports.useCallback(()=>{t(!0)},[]),reactExports.useCallback(()=>{t(!1)},[]),e]}function useCloseOnTimeout({onClose:e,timeout:t}){const[r,n,i]=useHover();return useTimeout(e,i?null:t),{onMouseOver:r,onMouseLeave:n}}const isFunction=e=>"function"==typeof e;function useStateWithCallback(e,t){const[r,n]=reactExports.useState(e);return[r,reactExports.useCallback(e=>{isFunction(e)?n(r=>{const n=e(r);return t?.(n),n}):(t?.(e),n(e))},[t])]}function useConditionallyControlledState(e,t,r,n=void 0!==e&&void 0!==t){const i=useStateWithCallback(e||r,t);return n?[e,t]:i}var _createRound,hasRequired_createRound,round_1,hasRequiredRound$1;function require_createRound(){if(hasRequired_createRound)return _createRound;hasRequired_createRound=1;var e=require_root(),t=requireToInteger(),r=requireToNumber(),n=requireToString(),i=e.isFinite,o=Math.min;return _createRound=function(e){var s=Math[e];return function(e,a){if(e=r(e),(a=null==a?0:o(t(a),292))&&i(e)){var l=(n(e)+"e").split("e"),c=s(l[0]+"e"+(+l[1]+a));return+((l=(n(c)+"e").split("e"))[0]+"e"+(+l[1]-a))}return s(e)}}}function requireRound$1(){if(hasRequiredRound$1)return round_1;hasRequiredRound$1=1;var e=require_createRound()("round");return round_1=e}var roundExports=requireRound$1();const round$1=getDefaultExportFromCjs(roundExports),RESIZE_THROTTLE=16,ROUND_PRECISION=2;function useElementSize(e,t){const[r,n]=reactExports.useState({width:0,height:0});return reactExports.useLayoutEffect(()=>{const t=e?.current;if(!t)return;n({width:round$1(t.offsetWidth,ROUND_PRECISION),height:round$1(t.offsetHeight,ROUND_PRECISION)});const r=new ResizeObserver(throttle(e=>{if(!Array.isArray(e))return;const t=e[0];if(t.borderBoxSize){const e=t.borderBoxSize[0]?t.borderBoxSize[0]:t.borderBoxSize;n({width:round$1(e.inlineSize,ROUND_PRECISION),height:round$1(e.blockSize,ROUND_PRECISION)})}else{const e=t.target;n({width:round$1(e.offsetWidth,ROUND_PRECISION),height:round$1(e.offsetHeight,ROUND_PRECISION)})}},RESIZE_THROTTLE));return r.observe(t),()=>{r.disconnect()}},[e,t]),r}const useUpdateEffect=(e,t)=>{const r=reactExports.useRef(!0);reactExports.useEffect(()=>{r.current?r.current=!1:e()},t)};function usePopupVisibility(e,t,r){const[n,i]=useConditionallyControlledState(e,t,!1),o=reactExports.useCallback(e=>{i(t=>"boolean"==typeof e?e:!t)},[i]),s=reactExports.useCallback(()=>{i(!1)},[i]);return reactExports.useEffect(()=>{r&&n&&s()},[s,r,n]),{isPopupShown:n,togglePopup:o,closePopup:s}}function useScrollHandler(e,t,r){reactExports.useEffect(()=>{if(r)return;const n=r=>{r.target.contains(t.current)&&e(r)};return document.addEventListener("scroll",n,!0),()=>{document.removeEventListener("scroll",n,!0)}},[t,e,r])}function toItemList(e,t,r=[],n=0){const i=[];let o=!1,s=n;for(const a of e)if(Array.isArray(a)){const e=toItemList(a,t,r,s);0!==i.length&&i.push(t),i.push(...e),s+=e.length,o=!0}else{if(a.hidden)continue;o&&i.push(t);const e={...a,path:[...r,s++]};a.items&&(e.items=toItemList(a.items,t,e.path)),i.push(e),o=!1}return i}const DropdownMenu=({items:e=[],size:t="m",icon:r=jsxRuntimeExports.jsx(Icon,{data:Ellipsis}),open:n,onOpenToggle:i,hideOnScroll:o=!0,data:s,disabled:a,switcher:l,renderSwitcher:c,switcherWrapperClassName:u,defaultSwitcherProps:d,defaultSwitcherClassName:p,onSwitcherClick:h,menuProps:f,popupProps:m,children:g})=>{const b=reactExports.useRef(null),{isPopupShown:y,togglePopup:T,closePopup:E}=usePopupVisibility(n,i,a);useScrollHandler(E,b,!y||!o);const O=reactExports.useMemo(()=>({toggle:T,data:s}),[s,T]),S=reactExports.useMemo(()=>toItemList(e,dropdownMenuSeparator),[e]),x=reactExports.useCallback(e=>{a||(h?.(e),T())},[a,h,T]),{onKeyDown:v}=useActionHandlers(x),_=reactExports.useMemo(()=>({onClick:x,onKeyDown:v}),[x,v]);return jsxRuntimeExports.jsxs(DropdownMenuContext.Provider,{value:O,children:[jsxRuntimeExports.jsx("div",{ref:b,className:cnDropdownMenu("switcher-wrapper",u),...c?{}:_,children:c?.(_)||l||jsxRuntimeExports.jsx(Button,{view:"flat",size:t,...d,className:cnDropdownMenu("switcher-button",p),disabled:a,children:r})}),jsxRuntimeExports.jsx(DropdownMenuNavigationContextProvider,{anchorRef:b,disabled:!y,children:jsxRuntimeExports.jsx(DropdownMenuPopup,{items:S,open:y,size:t,menuProps:f,anchorRef:b,onClose:E,popupProps:m,children:g})})]})},DropdownMenuExport=Object.assign(DropdownMenu,{Item:DropdownMenuItem}),mediaByOrder={xs:0,s:1,m:2,l:3,xl:4,xxl:5,xxxl:6},isMediaActiveFactory=e=>t=>e in mediaByOrder&&mediaByOrder[e]-mediaByOrder[t]>=0,mediaOrder=["xs","s","m","l","xl","xxl","xxxl"],getClosestMediaPropsFactory=e=>(t={})=>{if(!e)return;let r=e;for(;r;){if(void 0!==t[r])return t[r];r=mediaOrder[mediaByOrder[r]-1]}},makeCssMod=e=>e in CSS_SIZE_EXCEPTION?CSS_SIZE_EXCEPTION[e]:String(e),useLayoutContext=()=>{const{activeMediaQuery:e,theme:t}=reactExports.useContext(LayoutContext),{isMediaActive:r,getClosestMediaProps:n}=reactExports.useMemo(()=>({isMediaActive:isMediaActiveFactory(e),getClosestMediaProps:getClosestMediaPropsFactory(e)}),[e]);return{theme:t,activeMediaQuery:e,isMediaActive:r,getClosestMediaProps:n}},b$1a=block$2("s"),spacing=(e,t)=>{const r=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const t=e[n];void 0!==t&&r.push(b$1a(`${n}_${makeCssMod(t)}`))}return t&&r.push(t),r.join(" ")},sp=spacing,b$19=block$2("box"),Box=reactExports.forwardRef(function({as:e,children:t,qa:r,className:n,width:i,height:o,minWidth:s,minHeight:a,maxHeight:l,maxWidth:c,position:u,style:d,spacing:p,overflow:h,...f},m){const g=e||"div",b={width:i,height:o,minWidth:s,minHeight:a,maxHeight:l,maxWidth:c,position:u,...d};return jsxRuntimeExports.jsx(g,{...f,"data-qa":r,style:b,ref:m,className:b$19({overflow:h},p?sp(p,n):n),children:t})}),b$18=block$2("flex"),Flex=reactExports.forwardRef(function(e,t){const{as:r,direction:n,grow:i,basis:o,children:s,style:a,alignContent:l,alignItems:c,alignSelf:u,justifyContent:d,justifyItems:p,justifySelf:h,shrink:f,wrap:m,inline:g,gap:b,gapRow:y,className:T,space:E,centerContent:O,...S}=e,x=r||"div",{getClosestMediaProps:v,theme:{spaceBaseSize:_}}=useLayoutContext(),A=e=>"object"==typeof e&&null!==e?v(e):e,C=A(b),w=void 0===C?void 0:_*Number(C),k=A(y)||C,D=void 0===k?void 0:_*Number(k),I=A(E),R=void 0===b&&void 0===y&&void 0!==I?makeCssMod(I):void 0;return jsxRuntimeExports.jsx(Box,{as:x,className:b$18({"center-content":O,inline:g,s:R},T),ref:t,style:{flexDirection:A(n),flexGrow:!0===i?1:i,flexWrap:!0===m?"wrap":m,flexBasis:o,flexShrink:f,columnGap:w,rowGap:D,alignContent:A(l),alignItems:A(c),alignSelf:A(u),justifyContent:A(d),justifyItems:A(p),justifySelf:A(h),...a},...S,children:E?reactExports.Children.map(s,e=>e?jsxRuntimeExports.jsx("div",{className:b$18("wr"),children:e}):e):s})}),b$17=block$2("card"),Card=reactExports.forwardRef(function(e,t){const{type:r="container",theme:n,view:i,size:o="m",children:s,className:a,onClick:l,disabled:c,selected:u,...d}=e,p="selection"===r,h="container"===r,f=("action"===r||p)&&Boolean(l)&&!c,m=h?"normal":void 0,g=h||p?"outlined":void 0,b=f?l:void 0,{onKeyDown:y}=useActionHandlers(l);return jsxRuntimeExports.jsx(Box,{ref:t,role:f?"button":void 0,className:b$17({theme:n||m,view:i||g,type:r,selected:u,size:o,disabled:c,clickable:f},a),onClick:b,onKeyDown:f?y:void 0,tabIndex:f?0:void 0,...d,children:s})}),b$16=block$2("control-label"),ControlLabel=reactExports.forwardRef(({children:e,className:t,labelClassName:r,title:n,style:i,disabled:o=!1,control:s,size:a="m",qa:l},c)=>{const u=reactExports.cloneElement(s,{className:b$16("indicator",s.props.className)});return jsxRuntimeExports.jsxs("label",{ref:c,title:n,style:i,className:b$16({size:a,disabled:o},t),"data-qa":l,children:[u,e?jsxRuntimeExports.jsx("span",{className:b$16("text",r),children:e}):null]})});function CheckboxDashIcon(e){return jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 17",width:"16",height:"16",fill:"currentColor",...e,children:jsxRuntimeExports.jsx("path",{d:"M4 7h9v3H4z"})})}function CheckboxTickIcon(e){return jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 10",width:"16",height:"16",fill:"currentColor",...e,children:jsxRuntimeExports.jsx("path",{d:"M.49 5.385l1.644-1.644 4.385 4.385L4.874 9.77.49 5.385zm4.384 1.096L10.356 1 12 2.644 6.519 8.126 4.874 6.48v.001z"})})}ControlLabel.displayName="ControlLabel";const b$15=block$2("checkbox"),Checkbox$1=reactExports.forwardRef(function(e,t){const{size:r="m",indeterminate:n,disabled:i=!1,content:o,children:s,title:a,style:l,className:c,qa:u}=e,{checked:d,inputProps:p}=useCheckbox(e),h=o||s,f=jsxRuntimeExports.jsxs("span",{className:b$15("indicator"),children:[jsxRuntimeExports.jsx("span",{className:b$15("icon"),"aria-hidden":!0,children:n?jsxRuntimeExports.jsx(CheckboxDashIcon,{className:b$15("icon-svg",{type:"dash"})}):jsxRuntimeExports.jsx(CheckboxTickIcon,{className:b$15("icon-svg",{type:"tick"})})}),jsxRuntimeExports.jsx("input",{...p,className:b$15("control")}),jsxRuntimeExports.jsx("span",{className:b$15("outline")})]});return jsxRuntimeExports.jsx(ControlLabel,{ref:t,title:a,style:l,size:r,disabled:i,className:b$15({size:r,disabled:i,indeterminate:n,checked:d},c),qa:u,control:f,children:h})});function ClipboardIcon({status:e,...t}){return"error"===e?jsxRuntimeExports.jsx(Icon,{data:CopyXmark,...t}):"success"===e?jsxRuntimeExports.jsx(Icon,{data:CopyCheck,...t}):jsxRuntimeExports.jsx(Icon,{data:Copy,...t})}function copyText(e){if("undefined"!=typeof navigator&&navigator.clipboard?.writeText)try{return navigator.clipboard.writeText(e)}catch(t){return"undefined"==typeof document?Promise.reject(t):copyTextFallback(e)}return"undefined"!=typeof document?copyTextFallback(e):Promise.reject(new Error("Neither navigator.clipboard nor document is available"))}async function copyTextFallback(e){const t=document.activeElement;try{const t=document.createElement("textarea");if(t.setAttribute("aria-hidden","true"),t.style.all="unset",t.style.position="absolute",t.style.left="1000%",t.style.whiteSpace="pre",t.style.userSelect="text",t.value=e,document.body.append(t),t.select(),!document.execCommand("copy"))throw new Error('Failed to copy text with document.execCommand("copy")');document.body.removeChild(t)}finally{t&&"focus"in t&&"function"==typeof t.focus&&t.focus()}}const INITIAL_STATUS="pending";function CopyToClipboard(e){const{children:t,text:r,timeout:n,onCopy:i}=e,o=reactExports.useRef(""),[s,a]=reactExports.useState(INITIAL_STATUS),l=reactExports.useRef(),c="function"==typeof t?t(s):t,u=reactExports.useCallback((e,t)=>{a(t?"success":"error"),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a(INITIAL_STATUS),n),i?.(e,t)},[i,n]),d=reactExports.useCallback(e=>{const t="function"==typeof r?r():r;function n(r){t===o.current&&(u(t,r),c.props?.onClick?.(e))}o.current=t,copyText(t).then(()=>{n(!0)},()=>{n(!1)})},[c.props,u,r]);if(reactExports.useEffect(()=>()=>window.clearTimeout(l.current),[]),!reactExports.isValidElement(c))throw new Error("Content must be a valid react element");return reactExports.cloneElement(c,{onClick:d})}const b$14=block$2("popover"),DEFAULT_OPEN_DELAY=500,DEFAULT_CLOSE_DELAY=250;function Popover$3({children:e,open:t,onOpenChange:r,disabled:n,content:i,trigger:o,openDelay:s=DEFAULT_OPEN_DELAY,closeDelay:a=DEFAULT_CLOSE_DELAY,enableSafePolygon:l,className:c,...u}){const[d,p]=reactExports.useState(null),[h,f]=reactExports.useState(null),[m,g]=useControlledState(t,!1,r),b=useFloatingRootContext({open:m&&!n,onOpenChange:g,elements:{reference:d,floating:h}}),y=[useHover$1(b,{enabled:"click"!==o,delay:{open:s,close:a},move:!1,handleClose:l?safePolygon():void 0}),useClick(b),useRole(b,{role:"dialog"}),useDismiss(b)],{getReferenceProps:T}=useInteractions(y),E=useForkRef(p,reactExports.isValidElement(e)?getElementRef(e):void 0),O=reactExports.isValidElement(e)?T(e.props):T(),S=reactExports.isValidElement(e)?reactExports.cloneElement(e,{...O,ref:E}):e(O,E);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[S,jsxRuntimeExports.jsx(Popup,{...u,open:b.open,floatingContext:b,floatingRef:f,floatingInteractions:y,className:b$14(null,c),children:i})]})}const ICON_SIZE_MAP={s:14,m:16,l:18,xl:20},b$13=block$2("help-mark"),HelpMark=reactExports.forwardRef(function({children:e,qa:t,className:r,iconSize:n="m",popoverProps:i,...o},s){return jsxRuntimeExports.jsx(Popover$3,{content:jsxRuntimeExports.jsx("div",{className:b$13("popover"),children:e}),hasArrow:!0,...i,children:jsxRuntimeExports.jsx("button",{...o,ref:s,type:"button",className:b$13({size:n},r),"data-qa":t,children:jsxRuntimeExports.jsx(Icon,{data:CircleQuestion,size:ICON_SIZE_MAP[n],className:b$13("icon")})})})});var $$observable=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),symbol_observable_default=$$observable,randomString=()=>Math.random().toString(36).substring(7).split("").join("."),ActionTypes={INIT:`@@redux/INIT${randomString()}`,REPLACE:`@@redux/REPLACE${randomString()}`},actionTypes_default=ActionTypes;function isPlainObject$2(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function miniKindOf(e){if(void 0===e)return"undefined";if(null===e)return"null";const t=typeof e;switch(t){case"boolean":case"string":case"number":case"symbol":case"function":return t}if(Array.isArray(e))return"array";if(isDate(e))return"date";if(isError(e))return"error";const r=ctorName(e);switch(r){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return r}return Object.prototype.toString.call(e).slice(8,-1).toLowerCase().replace(/\s/g,"")}function ctorName(e){return"function"==typeof e.constructor?e.constructor.name:null}function isError(e){return e instanceof Error||"string"==typeof e.message&&e.constructor&&"number"==typeof e.constructor.stackTraceLimit}function isDate(e){return e instanceof Date||"function"==typeof e.toDateString&&"function"==typeof e.getDate&&"function"==typeof e.setDate}function kindOf(e){let t=typeof e;return t=miniKindOf(e),t}function createStore$1(e,t,r){if("function"!=typeof e)throw new Error(`Expected the root reducer to be a function. Instead, received: '${kindOf(e)}'`);if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.");if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(`Expected the enhancer to be a function. Instead, received: '${kindOf(r)}'`);return r(createStore$1)(e,t)}let n=e,i=t,o=new Map,s=o,a=0,l=!1;function c(){s===o&&(s=new Map,o.forEach((e,t)=>{s.set(t,e)}))}function u(){if(l)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return i}function d(e){if("function"!=typeof e)throw new Error(`Expected the listener to be a function. Instead, received: '${kindOf(e)}'`);if(l)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api/store#subscribelistener for more details.");let t=!0;c();const r=a++;return s.set(r,e),function(){if(t){if(l)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api/store#subscribelistener for more details.");t=!1,c(),s.delete(r),o=null}}}function p(e){if(!isPlainObject$2(e))throw new Error(`Actions must be plain objects. Instead, the actual type was: '${kindOf(e)}'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.`);if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. You may have misspelled an action type string constant.');if("string"!=typeof e.type)throw new Error(`Action "type" property must be a string. Instead, the actual type was: '${kindOf(e.type)}'. Value was: '${e.type}' (stringified)`);if(l)throw new Error("Reducers may not dispatch actions.");try{l=!0,i=n(i,e)}finally{l=!1}return(o=s).forEach(e=>{e()}),e}return p({type:actionTypes_default.INIT}),{dispatch:p,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(`Expected the nextReducer to be a function. Instead, received: '${kindOf(e)}`);n=e,p({type:actionTypes_default.REPLACE})},[symbol_observable_default]:function(){const e=d;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(`Expected the observer to be an object. Instead, received: '${kindOf(t)}'`);function r(){const e=t;e.next&&e.next(u())}return r(),{unsubscribe:e(r)}},[symbol_observable_default](){return this}}}}}function bindActionCreator(e,t){return function(...r){return t(e.apply(this,r))}}function bindActionCreators$1(e,t){if("function"==typeof e)return bindActionCreator(e,t);if("object"!=typeof e||null===e)throw new Error(`bindActionCreators expected an object or a function, but instead received: '${kindOf(e)}'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?`);const r={};for(const n in e){const i=e[n];"function"==typeof i&&(r[n]=bindActionCreator(i,t))}return r}function compose(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...r)=>e(t(...r)))}function applyMiddleware(...e){return t=>(r,n)=>{const i=t(r,n);let o=()=>{throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")};const s={getState:i.getState,dispatch:(e,...t)=>o(e,...t)},a=e.map(e=>e(s));return o=compose(...a)(i.dispatch),{...i,dispatch:o}}}var withSelector={exports:{}},useSyncExternalStoreWithSelector_development={},hasRequiredUseSyncExternalStoreWithSelector_development,hasRequiredWithSelector;function requireUseSyncExternalStoreWithSelector_development(){return hasRequiredUseSyncExternalStoreWithSelector_development||(hasRequiredUseSyncExternalStoreWithSelector_development=1,
/**
   * @license React
   * use-sync-external-store-with-selector.development.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   */
function(){"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var e=requireReact(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=e.useSyncExternalStore,n=e.useRef,i=e.useEffect,o=e.useMemo,s=e.useDebugValue;useSyncExternalStoreWithSelector_development.useSyncExternalStoreWithSelector=function(e,a,l,c,u){var d=n(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=o(function(){function e(e){if(!i){if(i=!0,r=e,e=c(e),void 0!==u&&p.hasValue){var o=p.value;if(u(o,e))return n=o}return n=e}if(o=n,t(r,e))return o;var s=c(e);return void 0!==u&&u(o,s)?(r=e,o):(r=e,n=s)}var r,n,i=!1,o=void 0===l?null:l;return[function(){return e(a())},null===o?void 0:function(){return e(o())}]},[a,l,c,u]);var h=r(e,d[0],d[1]);return i(function(){p.hasValue=!0,p.value=h},[h]),s(h),h},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())}()),useSyncExternalStoreWithSelector_development}function requireWithSelector(){return hasRequiredWithSelector||(hasRequiredWithSelector=1,withSelector.exports=requireUseSyncExternalStoreWithSelector_development()),withSelector.exports}requireWithSelector();var IS_REACT_19=reactExports.version.startsWith("19"),REACT_ELEMENT_TYPE=Symbol.for(IS_REACT_19?"react.transitional.element":"react.element"),REACT_PORTAL_TYPE=Symbol.for("react.portal"),REACT_FRAGMENT_TYPE=Symbol.for("react.fragment"),REACT_STRICT_MODE_TYPE=Symbol.for("react.strict_mode"),REACT_PROFILER_TYPE=Symbol.for("react.profiler"),REACT_CONSUMER_TYPE=Symbol.for("react.consumer"),REACT_CONTEXT_TYPE=Symbol.for("react.context"),REACT_FORWARD_REF_TYPE=Symbol.for("react.forward_ref"),REACT_SUSPENSE_TYPE=Symbol.for("react.suspense"),REACT_SUSPENSE_LIST_TYPE=Symbol.for("react.suspense_list"),REACT_MEMO_TYPE=Symbol.for("react.memo"),REACT_LAZY_TYPE=Symbol.for("react.lazy"),REACT_OFFSCREEN_TYPE=Symbol.for("react.offscreen"),REACT_CLIENT_REFERENCE=Symbol.for("react.client.reference"),ForwardRef=REACT_FORWARD_REF_TYPE,Memo=REACT_MEMO_TYPE;function isValidElementType(e){return"string"==typeof e||"function"==typeof e||e===REACT_FRAGMENT_TYPE||e===REACT_PROFILER_TYPE||e===REACT_STRICT_MODE_TYPE||e===REACT_SUSPENSE_TYPE||e===REACT_SUSPENSE_LIST_TYPE||e===REACT_OFFSCREEN_TYPE||"object"==typeof e&&null!==e&&(e.$$typeof===REACT_LAZY_TYPE||e.$$typeof===REACT_MEMO_TYPE||e.$$typeof===REACT_CONTEXT_TYPE||e.$$typeof===REACT_CONSUMER_TYPE||e.$$typeof===REACT_FORWARD_REF_TYPE||e.$$typeof===REACT_CLIENT_REFERENCE||void 0!==e.getModuleId)}function typeOf(e){if("object"==typeof e&&null!==e){const{$$typeof:t}=e;switch(t){case REACT_ELEMENT_TYPE:switch(e=e.type){case REACT_FRAGMENT_TYPE:case REACT_PROFILER_TYPE:case REACT_STRICT_MODE_TYPE:case REACT_SUSPENSE_TYPE:case REACT_SUSPENSE_LIST_TYPE:return e;default:switch(e=e&&e.$$typeof){case REACT_CONTEXT_TYPE:case REACT_FORWARD_REF_TYPE:case REACT_LAZY_TYPE:case REACT_MEMO_TYPE:case REACT_CONSUMER_TYPE:return e;default:return t}}case REACT_PORTAL_TYPE:return t}}}function isContextConsumer(e){return IS_REACT_19?typeOf(e)===REACT_CONSUMER_TYPE:typeOf(e)===REACT_CONTEXT_TYPE}function isMemo(e){return typeOf(e)===REACT_MEMO_TYPE}function warning$4(e){"undefined"!=typeof console&&console.error;try{throw new Error(e)}catch(t){}}function verify(e,t){if(!e)throw new Error(`Unexpected value for ${t} in connect.`);"mapStateToProps"!==t&&"mapDispatchToProps"!==t||Object.prototype.hasOwnProperty.call(e,"dependsOnOwnProps")||warning$4(`The selector for ${t} of connect did not specify a value for dependsOnOwnProps.`)}function verifySubselectors(e,t,r){verify(e,"mapStateToProps"),verify(t,"mapDispatchToProps"),verify(r,"mergeProps")}function pureFinalPropsSelectorFactory(e,t,r,n,{areStatesEqual:i,areOwnPropsEqual:o,areStatePropsEqual:s}){let a,l,c,u,d,p=!1;return function(h,f){return p?function(p,h){const f=!o(h,l),m=!i(p,a,h,l);return a=p,l=h,f&&m?(c=e(a,l),t.dependsOnOwnProps&&(u=t(n,l)),d=r(c,u,l),d):f?(e.dependsOnOwnProps&&(c=e(a,l)),t.dependsOnOwnProps&&(u=t(n,l)),d=r(c,u,l),d):m?function(){const t=e(a,l),n=!s(t,c);return c=t,n&&(d=r(c,u,l)),d}():d}(h,f):(a=h,l=f,c=e(a,l),u=t(n,l),d=r(c,u,l),p=!0,d)}}function finalPropsSelectorFactory(e,{initMapStateToProps:t,initMapDispatchToProps:r,initMergeProps:n,...i}){const o=t(e,i),s=r(e,i),a=n(e,i);return verifySubselectors(o,s,a),pureFinalPropsSelectorFactory(o,s,a,e,i)}function bindActionCreators(e,t){const r={};for(const n in e){const i=e[n];"function"==typeof i&&(r[n]=(...e)=>t(i(...e)))}return r}function isPlainObject$1(e){if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);if(null===t)return!0;let r=t;for(;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return t===r}function verifyPlainObject(e,t,r){isPlainObject$1(e)||warning$4(`${r}() in ${t} must return a plain object. Instead received ${e}.`)}function wrapMapToPropsConstant(e){return function(t){const r=e(t);function n(){return r}return n.dependsOnOwnProps=!1,n}}function getDependsOnOwnProps(e){return e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function wrapMapToPropsFunc(e,t){return function(r,{displayName:n}){const i=function(e,t){return i.dependsOnOwnProps?i.mapToProps(e,t):i.mapToProps(e,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(r,o){i.mapToProps=e,i.dependsOnOwnProps=getDependsOnOwnProps(e);let s=i(r,o);return"function"==typeof s&&(i.mapToProps=s,i.dependsOnOwnProps=getDependsOnOwnProps(s),s=i(r,o)),verifyPlainObject(s,n,t),s},i}}function createInvalidArgFactory(e,t){return(r,n)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${n.wrappedComponentName}.`)}}function mapDispatchToPropsFactory(e){return e&&"object"==typeof e?wrapMapToPropsConstant(t=>bindActionCreators(e,t)):e?"function"==typeof e?wrapMapToPropsFunc(e,"mapDispatchToProps"):createInvalidArgFactory(e,"mapDispatchToProps"):wrapMapToPropsConstant(e=>({dispatch:e}))}function mapStateToPropsFactory(e){return e?"function"==typeof e?wrapMapToPropsFunc(e,"mapStateToProps"):createInvalidArgFactory(e,"mapStateToProps"):wrapMapToPropsConstant(()=>({}))}function defaultMergeProps(e,t,r){return{...r,...e,...t}}function wrapMergePropsFunc(e){return function(t,{displayName:r,areMergedPropsEqual:n}){let i,o=!1;return function(t,s,a){const l=e(t,s,a);return o?n(l,i)||(i=l):(o=!0,i=l,verifyPlainObject(i,r,"mergeProps")),i}}}function mergePropsFactory(e){return e?"function"==typeof e?wrapMergePropsFunc(e):createInvalidArgFactory(e,"mergeProps"):()=>defaultMergeProps}function defaultNoopBatch(e){e()}function createListenerCollection(){let e=null,t=null;return{clear(){e=null,t=null},notify(){defaultNoopBatch(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let r=e;for(;r;)t.push(r),r=r.next;return t},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){n&&null!==e&&(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var nullListeners={notify(){},get:()=>[]};function createSubscription(e,t){let r,n=nullListeners,i=0,o=!1;function s(){c.onStateChange&&c.onStateChange()}function a(){i++,r||(r=t?t.addNestedSub(s):e.subscribe(s),n=createListenerCollection())}function l(){i--,r&&0===i&&(r(),r=void 0,n.clear(),n=nullListeners)}const c={addNestedSub:function(e){a();const t=n.subscribe(e);let r=!1;return()=>{r||(r=!0,t(),l())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:s,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,a())},tryUnsubscribe:function(){o&&(o=!1,l())},getListeners:()=>n};return c}var canUseDOM=()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),isDOM=canUseDOM(),isRunningInReactNative=()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product,isReactNative=isRunningInReactNative(),getUseIsomorphicLayoutEffect=()=>isDOM||isReactNative?reactExports.useLayoutEffect:reactExports.useEffect,useIsomorphicLayoutEffect$2=getUseIsomorphicLayoutEffect();function is$3(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function shallowEqual(e,t){if(is$3(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!is$3(e[r[i]],t[r[i]]))return!1;return!0}var REACT_STATICS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={[ForwardRef]:FORWARD_REF_STATICS,[Memo]:MEMO_STATICS};function getStatics(e){return isMemo(e)?MEMO_STATICS:TYPE_STATICS[e.$$typeof]||REACT_STATICS}var defineProperty=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf=Object.getPrototypeOf,objectPrototype=Object.prototype;function hoistNonReactStatics(e,t){if("string"!=typeof t){if(objectPrototype){const r=getPrototypeOf(t);r&&r!==objectPrototype&&hoistNonReactStatics(e,r)}let n=getOwnPropertyNames(t);getOwnPropertySymbols&&(n=n.concat(getOwnPropertySymbols(t)));const i=getStatics(e),o=getStatics(t);for(let s=0;s<n.length;++s){const a=n[s];if(!(KNOWN_STATICS[a]||o&&o[a]||i&&i[a])){const n=getOwnPropertyDescriptor(t,a);try{defineProperty(e,a,n)}catch(r){}}}}return e}var ContextKey=Symbol.for("react-redux-context"),gT="undefined"!=typeof globalThis?globalThis:{};function getContext$1(){if(!reactExports.createContext)return{};const e=gT[ContextKey]??=new Map;let t=e.get(reactExports.createContext);return t||(t=reactExports.createContext(null),t.displayName="ReactRedux",e.set(reactExports.createContext,t)),t}var ReactReduxContext=getContext$1(),NO_SUBSCRIPTION_ARRAY=[null,null],stringifyComponent=e=>{try{return JSON.stringify(e)}catch(t){return String(e)}};function useIsomorphicLayoutEffectWithArgs(e,t,r){useIsomorphicLayoutEffect$2(()=>e(...t),r)}function captureWrapperProps(e,t,r,n,i,o){e.current=n,r.current=!1,i.current&&(i.current=null,o())}function subscribeUpdates(e,t,r,n,i,o,s,a,l,c,u){if(!e)return()=>{};let d=!1,p=null;const h=()=>{if(d||!a.current)return;const e=t.getState();let r,h;try{r=n(e,i.current)}catch(f){h=f,p=f}h||(p=null),r===o.current?s.current||c():(o.current=r,l.current=r,s.current=!0,u())};return r.onStateChange=h,r.trySubscribe(),h(),()=>{if(d=!0,r.tryUnsubscribe(),r.onStateChange=null,p)throw p}}function strictEqual(e,t){return e===t}var hasWarnedAboutDeprecatedPureOption=!1;function connect(e,t,r,{pure:n,areStatesEqual:i=strictEqual,areOwnPropsEqual:o=shallowEqual,areStatePropsEqual:s=shallowEqual,areMergedPropsEqual:a=shallowEqual,forwardRef:l=!1,context:c=ReactReduxContext}={}){void 0===n||hasWarnedAboutDeprecatedPureOption||(hasWarnedAboutDeprecatedPureOption=!0,warning$4('The `pure` option has been removed. `connect` is now always a "pure/memoized" component'));const u=c,d=mapStateToPropsFactory(e),p=mapDispatchToPropsFactory(t),h=mergePropsFactory(r),f=Boolean(e);return e=>{if(!isValidElementType(e))throw new Error(`You must pass a component to the function returned by connect. Instead received ${stringifyComponent(e)}`);const t=e.displayName||e.name||"Component",r=`Connect(${t})`,n={shouldHandleStateChanges:f,displayName:r,wrappedComponentName:t,WrappedComponent:e,initMapStateToProps:d,initMapDispatchToProps:p,initMergeProps:h,areStatesEqual:i,areStatePropsEqual:s,areOwnPropsEqual:o,areMergedPropsEqual:a};function c(t){const[i,o,s]=reactExports.useMemo(()=>{const{reactReduxForwardedRef:e,...r}=t;return[t.context,e,r]},[t]),a=reactExports.useMemo(()=>{let e=u;if(i?.Consumer){if(!isContextConsumer(reactExports.createElement(i.Consumer,null)))throw new Error("You must pass a valid React context consumer as `props.context`");e=i}return e},[i,u]),l=reactExports.useContext(a),c=Boolean(t.store)&&Boolean(t.store.getState)&&Boolean(t.store.dispatch),d=Boolean(l)&&Boolean(l.store);if(!c&&!d)throw new Error(`Could not find "store" in the context of "${r}". Either wrap the root component in a <Provider>, or pass a custom React context provider to <Provider> and the corresponding React context consumer to ${r} in connect options.`);const p=c?t.store:l.store,h=d?l.getServerState:p.getState,m=reactExports.useMemo(()=>finalPropsSelectorFactory(p.dispatch,n),[p]),[g,b]=reactExports.useMemo(()=>{if(!f)return NO_SUBSCRIPTION_ARRAY;const e=createSubscription(p,c?void 0:l.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[p,c,l]),y=reactExports.useMemo(()=>c?l:{...l,subscription:g},[c,l,g]),T=reactExports.useRef(void 0),E=reactExports.useRef(s),O=reactExports.useRef(void 0),S=reactExports.useRef(!1),x=reactExports.useRef(!1),v=reactExports.useRef(void 0);useIsomorphicLayoutEffect$2(()=>(x.current=!0,()=>{x.current=!1}),[]);const _=reactExports.useMemo(()=>()=>O.current&&s===E.current?O.current:m(p.getState(),s),[p,s]),A=reactExports.useMemo(()=>e=>g?subscribeUpdates(f,p,g,m,E,T,S,x,O,b,e):()=>{},[g]);let C;useIsomorphicLayoutEffectWithArgs(captureWrapperProps,[E,T,S,s,O,b]);try{C=reactExports.useSyncExternalStore(A,_,h?()=>m(h(),s):_)}catch(k){throw v.current&&(k.message+=`\nThe error may be correlated with this previous error:\n${v.current.stack}\n\n`),k}useIsomorphicLayoutEffect$2(()=>{v.current=void 0,O.current=void 0,T.current=C});const w=reactExports.useMemo(()=>reactExports.createElement(e,{...C,ref:o}),[o,e,C]);return reactExports.useMemo(()=>f?reactExports.createElement(a.Provider,{value:y},w):w,[a,w,y])}const m=reactExports.memo(c);if(m.WrappedComponent=e,m.displayName=c.displayName=r,l){const t=reactExports.forwardRef(function(e,t){return reactExports.createElement(m,{...e,reactReduxForwardedRef:t})});return t.displayName=r,t.WrappedComponent=e,hoistNonReactStatics(t,e)}return hoistNonReactStatics(m,e)}}var connect_default=connect;function Provider(e){const{children:t,context:r,serverState:n,store:i}=e,o=reactExports.useMemo(()=>{const t=createSubscription(i),r={store:i,subscription:t,getServerState:n?()=>n:void 0};{const{identityFunctionCheck:t="once",stabilityCheck:n="once"}=e;return Object.assign(r,{stabilityCheck:n,identityFunctionCheck:t})}},[i,n]),s=reactExports.useMemo(()=>i.getState(),[i]);useIsomorphicLayoutEffect$2(()=>{const{subscription:e}=o;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),s!==i.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[o,s]);const a=r||ReactReduxContext;return reactExports.createElement(a.Provider,{value:o},t)}var Provider_default=Provider,getRect=function(e){var t=e.top,r=e.right,n=e.bottom,i=e.left;return{top:t,right:r,bottom:n,left:i,width:r-i,height:n-t,x:i,y:t,center:{x:(r+i)/2,y:(n+t)/2}}},expand=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},shrink=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},shift=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},noSpacing$1={top:0,right:0,bottom:0,left:0},createBox=function(e){var t=e.borderBox,r=e.margin,n=void 0===r?noSpacing$1:r,i=e.border,o=void 0===i?noSpacing$1:i,s=e.padding,a=void 0===s?noSpacing$1:s,l=getRect(expand(t,n)),c=getRect(shrink(t,o)),u=getRect(shrink(c,a));return{marginBox:l,borderBox:getRect(t),paddingBox:c,contentBox:u,margin:n,border:o,padding:a}},parse$8=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var r=Number(t);return isNaN(r)&&invariant$1(!1,"Could not parse value [raw: "+e+", without suffix: "+t+"]"),r},getWindowScroll$1=function(){return{x:window.pageXOffset,y:window.pageYOffset}},offset=function(e,t){var r=e.borderBox,n=e.border,i=e.margin,o=e.padding,s=shift(r,t);return createBox({borderBox:s,border:n,margin:i,padding:o})},withScroll=function(e,t){return void 0===t&&(t=getWindowScroll$1()),offset(e,t)},calculateBox=function(e,t){var r={top:parse$8(t.marginTop),right:parse$8(t.marginRight),bottom:parse$8(t.marginBottom),left:parse$8(t.marginLeft)},n={top:parse$8(t.paddingTop),right:parse$8(t.paddingRight),bottom:parse$8(t.paddingBottom),left:parse$8(t.paddingLeft)},i={top:parse$8(t.borderTopWidth),right:parse$8(t.borderRightWidth),bottom:parse$8(t.borderBottomWidth),left:parse$8(t.borderLeftWidth)};return createBox({borderBox:e,margin:r,padding:n,border:i})},getBox=function(e){var t=e.getBoundingClientRect(),r=window.getComputedStyle(e);return calculateBox(t,r)},rafSchd=function(e){var t=[],r=null,n=function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];t=i,r||(r=requestAnimationFrame(function(){r=null,e.apply(void 0,t)}))};return n.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},n};const spacesAndTabs=/[ \t]{2,}/g,lineStartWithSpaces=/^[ \t]*/gm,clean$2=e=>e.replace(spacesAndTabs," ").replace(lineStartWithSpaces,"").trim(),getDevMessage=e=>clean$2(`\n  %c@hello-pangea/dnd\n\n  %c${clean$2(e)}\n\n  %c This is a development only message. It will be removed in production builds.\n`),getFormattedMessage=e=>[getDevMessage(e),"color: #00C584; font-size: 1.2em; font-weight: bold;","line-height: 1.5","color: #723874;"],isDisabledFlag="__@hello-pangea/dnd-disable-dev-warnings";function log$1(e,t){"undefined"==typeof window||window[isDisabledFlag]}const warning$3=log$1.bind(null,"warn"),error$2=log$1.bind(null,"error");function noop$2$1(){}function getOptions(e,t){return{...e,...t}}function bindEvents(e,t,r){const n=t.map(t=>{const n=getOptions(r,t.options);return e.addEventListener(t.eventName,t.fn,n),function(){e.removeEventListener(t.eventName,t.fn,n)}});return function(){n.forEach(e=>{e()})}}const prefix$1="Invariant failed";class RbdInvariant extends Error{}function invariant(e,t){throw new RbdInvariant(`${prefix$1}: ${t||""}`)}RbdInvariant.prototype.toString=function(){return this.message};let ErrorBoundary$1=class extends React.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=noop$2$1,this.onWindowError=e=>{const t=this.getCallbacks();t.isDragging()&&(t.tryAbort(),warning$3("\n        An error was caught by our window 'error' event listener while a drag was occurring.\n        The active drag has been aborted.\n      "));const r=e.error;r instanceof RbdInvariant&&(e.preventDefault(),error$2(r.message))},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=e=>{this.callbacks=e}}componentDidMount(){this.unbind=bindEvents(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(e instanceof RbdInvariant)return error$2(e.message),void this.setState({});throw e}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}};const dragHandleUsageInstructions="\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",position=e=>e+1,onDragStart=e=>`\n  You have lifted an item in position ${position(e.source.index)}\n`,withLocation=(e,t)=>{const r=e.droppableId===t.droppableId,n=position(e.index),i=position(t.index);return r?`\n      You have moved the item from position ${n}\n      to position ${i}\n    `:`\n    You have moved the item from position ${n}\n    in list ${e.droppableId}\n    to list ${t.droppableId}\n    in position ${i}\n  `},withCombine=(e,t,r)=>t.droppableId===r.droppableId?`\n      The item ${e}\n      has been combined with ${r.draggableId}`:`\n      The item ${e}\n      in list ${t.droppableId}\n      has been combined with ${r.draggableId}\n      in list ${r.droppableId}\n    `,onDragUpdate=e=>{const t=e.destination;if(t)return withLocation(e.source,t);const r=e.combine;return r?withCombine(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},returnedToStart=e=>`\n  The item has returned to its starting position\n  of ${position(e.index)}\n`,onDragEnd=e=>{if("CANCEL"===e.reason)return`\n      Movement cancelled.\n      ${returnedToStart(e.source)}\n    `;const t=e.destination,r=e.combine;return t?`\n      You have dropped the item.\n      ${withLocation(e.source,t)}\n    `:r?`\n      You have dropped the item.\n      ${withCombine(e.draggableId,e.source,r)}\n    `:`\n    The item has been dropped while not over a drop area.\n    ${returnedToStart(e.source)}\n  `},preset={dragHandleUsageInstructions:dragHandleUsageInstructions,onDragStart:onDragStart,onDragUpdate:onDragUpdate,onDragEnd:onDragEnd};function isEqual$2(e,t){return e===t||!(!Number.isNaN(e)||!Number.isNaN(t))}function areInputsEqual$1(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!isEqual$2(e[r],t[r]))return!1;return!0}function useMemo(e,t){const r=reactExports.useState(()=>({inputs:t,result:e()}))[0],n=reactExports.useRef(!0),i=reactExports.useRef(r),o=n.current||Boolean(t&&i.current.inputs&&areInputsEqual$1(t,i.current.inputs))?i.current:{inputs:t,result:e()};return reactExports.useEffect(()=>{n.current=!1,i.current=o},[o]),o.result}function useCallback(e,t){return useMemo(()=>e,t)}const origin={x:0,y:0},add$2=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),subtract=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),isEqual$1=(e,t)=>e.x===t.x&&e.y===t.y,negate=e=>({x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}),patch=(e,t,r=0)=>"x"===e?{x:t,y:r}:{x:r,y:t},distance=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),closest$1=(e,t)=>Math.min(...t.map(t=>distance(e,t))),apply=e=>t=>({x:e(t.x),y:e(t.y)});var executeClip=(e,t)=>{const r=getRect({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r};const offsetByPosition=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),getCorners=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],noSpacing={top:0,right:0,bottom:0,left:0},scroll$1=(e,t)=>t?offsetByPosition(e,t.scroll.diff.displacement):e,increase=(e,t,r)=>r&&r.increasedBy?{...e,[t.end]:e[t.end]+r.increasedBy[t.line]}:e,clip$1=(e,t)=>t&&t.shouldClipSubject?executeClip(t.pageMarginBox,e):getRect(e);var getSubject=({page:e,withPlaceholder:t,axis:r,frame:n})=>{const i=scroll$1(e.marginBox,n),o=increase(i,r,t);return{page:e,withPlaceholder:t,active:clip$1(o,n)}},scrollDroppable=(e,t)=>{e.frame||invariant();const r=e.frame,n=subtract(t,r.scroll.initial),i=negate(n),o={...r,scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:i},max:r.scroll.max}},s=getSubject({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o});return{...e,frame:o,subject:s}};function memoizeOne$1(e,t=areInputsEqual$1){let r=null;function n(...n){if(r&&r.lastThis===this&&t(n,r.lastArgs))return r.lastResult;const i=e.apply(this,n);return r={lastResult:i,lastArgs:n,lastThis:this},i}return n.clear=function(){r=null},n}const toDroppableMap=memoizeOne$1(e=>e.reduce((e,t)=>(e[t.descriptor.id]=t,e),{})),toDraggableMap=memoizeOne$1(e=>e.reduce((e,t)=>(e[t.descriptor.id]=t,e),{})),toDroppableList=memoizeOne$1(e=>Object.values(e)),toDraggableList=memoizeOne$1(e=>Object.values(e));var getDraggablesInsideDroppable=memoizeOne$1((e,t)=>toDraggableList(t).filter(t=>e===t.descriptor.droppableId).sort((e,t)=>e.descriptor.index-t.descriptor.index));function tryGetDestination(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function tryGetCombine(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var removeDraggableFromList=memoizeOne$1((e,t)=>t.filter(t=>t.descriptor.id!==e.descriptor.id)),moveToNextCombine=({isMovingForward:e,draggable:t,destination:r,insideDestination:n,previousImpact:i})=>{if(!r.isCombineEnabled)return null;if(!tryGetDestination(i))return null;function o(e){const t={type:"COMBINE",combine:{draggableId:e,droppableId:r.descriptor.id}};return{...i,at:t}}const s=i.displaced.all,a=s.length?s[0]:null;if(e)return a?o(a):null;const l=removeDraggableFromList(t,n);if(!a)return l.length?o(l[l.length-1].descriptor.id):null;const c=l.findIndex(e=>e.descriptor.id===a);-1===c&&invariant(!1,"Could not find displaced item in set");const u=c-1;return u<0?null:o(l[u].descriptor.id)},isHomeOf=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const noDisplacedBy={point:origin,value:0},emptyGroups={invisible:{},visible:{},all:[]},noImpact={displaced:emptyGroups,displacedBy:noDisplacedBy,at:null};var isWithin=(e,t)=>r=>e<=r&&r<=t,isPartiallyVisibleThroughFrame=e=>{const t=isWithin(e.top,e.bottom),r=isWithin(e.left,e.right);return n=>{if(t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right))return!0;const i=t(n.top)||t(n.bottom),o=r(n.left)||r(n.right);if(i&&o)return!0;const s=n.top<e.top&&n.bottom>e.bottom,a=n.left<e.left&&n.right>e.right;return!(!s||!a)||(s&&o||a&&i)}},isTotallyVisibleThroughFrame=e=>{const t=isWithin(e.top,e.bottom),r=isWithin(e.left,e.right);return e=>t(e.top)&&t(e.bottom)&&r(e.left)&&r(e.right)};const vertical={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},horizontal={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var isTotallyVisibleThroughFrameOnAxis=e=>t=>{const r=isWithin(t.top,t.bottom),n=isWithin(t.left,t.right);return t=>e===vertical?r(t.top)&&r(t.bottom):n(t.left)&&n(t.right)};const getDroppableDisplaced=(e,t)=>{const r=t.frame?t.frame.scroll.diff.displacement:origin;return offsetByPosition(e,r)},isVisibleInDroppable=(e,t,r)=>!!t.subject.active&&r(t.subject.active)(e),isVisibleInViewport=(e,t,r)=>r(t)(e),isVisible$1=({target:e,destination:t,viewport:r,withDroppableDisplacement:n,isVisibleThroughFrameFn:i})=>{const o=n?getDroppableDisplaced(e,t):e;return isVisibleInDroppable(o,t,i)&&isVisibleInViewport(o,r,i)},isPartiallyVisible=e=>isVisible$1({...e,isVisibleThroughFrameFn:isPartiallyVisibleThroughFrame}),isTotallyVisible=e=>isVisible$1({...e,isVisibleThroughFrameFn:isTotallyVisibleThroughFrame}),isTotallyVisibleOnAxis=e=>isVisible$1({...e,isVisibleThroughFrameFn:isTotallyVisibleThroughFrameOnAxis(e.destination.axis)}),getShouldAnimate=(e,t,r)=>{if("boolean"==typeof r)return r;if(!t)return!0;const{invisible:n,visible:i}=t;if(n[e])return!1;const o=i[e];return!o||o.shouldAnimate};function getTarget(e,t){const r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return getRect(expand(r,n))}function getDisplacementGroups({afterDragging:e,destination:t,displacedBy:r,viewport:n,forceShouldAnimate:i,last:o}){return e.reduce(function(e,s){const a=getTarget(s,r),l=s.descriptor.id;if(e.all.push(l),!isPartiallyVisible({target:a,destination:t,viewport:n,withDroppableDisplacement:!0}))return e.invisible[s.descriptor.id]=!0,e;const c={draggableId:l,shouldAnimate:getShouldAnimate(l,o,i)};return e.visible[l]=c,e},{all:[],visible:{},invisible:{}})}function getIndexOfLastItem(e,t){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function goAtEnd({insideDestination:e,inHomeList:t,displacedBy:r,destination:n}){const i=getIndexOfLastItem(e,{inHomeList:t});return{displaced:emptyGroups,displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:i}}}}function calculateReorderImpact({draggable:e,insideDestination:t,destination:r,viewport:n,displacedBy:i,last:o,index:s,forceShouldAnimate:a}){const l=isHomeOf(e,r);if(null==s)return goAtEnd({insideDestination:t,inHomeList:l,displacedBy:i,destination:r});const c=t.find(e=>e.descriptor.index===s);if(!c)return goAtEnd({insideDestination:t,inHomeList:l,displacedBy:i,destination:r});const u=removeDraggableFromList(e,t),d=t.indexOf(c);return{displaced:getDisplacementGroups({afterDragging:u.slice(d),destination:r,displacedBy:i,last:o,viewport:n.frame,forceShouldAnimate:a}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function didStartAfterCritical(e,t){return Boolean(t.effected[e])}var fromCombine=({isMovingForward:e,destination:t,draggables:r,combine:n,afterCritical:i})=>{if(!t.isCombineEnabled)return null;const o=n.draggableId,s=r[o].descriptor.index;return didStartAfterCritical(o,i)?e?s:s-1:e?s+1:s},fromReorder=({isMovingForward:e,isInHomeList:t,insideDestination:r,location:n})=>{if(!r.length)return null;const i=n.index,o=e?i+1:i-1,s=r[0].descriptor.index,a=r[r.length-1].descriptor.index;return o<s||o>(t?a:a+1)?null:o},moveToNextIndex=({isMovingForward:e,isInHomeList:t,draggable:r,draggables:n,destination:i,insideDestination:o,previousImpact:s,viewport:a,afterCritical:l})=>{const c=s.at;if(c||invariant(!1,"Cannot move in direction without previous impact location"),"REORDER"===c.type){const n=fromReorder({isMovingForward:e,isInHomeList:t,location:c.destination,insideDestination:o});return null==n?null:calculateReorderImpact({draggable:r,insideDestination:o,destination:i,viewport:a,last:s.displaced,displacedBy:s.displacedBy,index:n})}const u=fromCombine({isMovingForward:e,destination:i,displaced:s.displaced,draggables:n,combine:c.combine,afterCritical:l});return null==u?null:calculateReorderImpact({draggable:r,insideDestination:o,destination:i,viewport:a,last:s.displaced,displacedBy:s.displacedBy,index:u})},getCombinedItemDisplacement=({displaced:e,afterCritical:t,combineWith:r,displacedBy:n})=>{const i=Boolean(e.visible[r]||e.invisible[r]);return didStartAfterCritical(r,t)?i?origin:negate(n.point):i?n.point:origin},whenCombining=({afterCritical:e,impact:t,draggables:r})=>{const n=tryGetCombine(t);n||invariant();const i=n.draggableId,o=r[i].page.borderBox.center,s=getCombinedItemDisplacement({displaced:t.displaced,afterCritical:e,combineWith:i,displacedBy:t.displacedBy});return add$2(o,s)};const distanceFromStartToBorderBoxCenter=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,distanceFromEndToBorderBoxCenter=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,getCrossAxisBorderBoxCenter=(e,t,r)=>t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,goAfter=({axis:e,moveRelativeTo:t,isMoving:r})=>patch(e.line,t.marginBox[e.end]+distanceFromStartToBorderBoxCenter(e,r),getCrossAxisBorderBoxCenter(e,t.marginBox,r)),goBefore=({axis:e,moveRelativeTo:t,isMoving:r})=>patch(e.line,t.marginBox[e.start]-distanceFromEndToBorderBoxCenter(e,r),getCrossAxisBorderBoxCenter(e,t.marginBox,r)),goIntoStart=({axis:e,moveInto:t,isMoving:r})=>patch(e.line,t.contentBox[e.start]+distanceFromStartToBorderBoxCenter(e,r),getCrossAxisBorderBoxCenter(e,t.contentBox,r));var whenReordering=({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:i})=>{const o=getDraggablesInsideDroppable(n.descriptor.id,r),s=t.page,a=n.axis;if(!o.length)return goIntoStart({axis:a,moveInto:n.page,isMoving:s});const{displaced:l,displacedBy:c}=e,u=l.all[0];if(u){const e=r[u];if(didStartAfterCritical(u,i))return goBefore({axis:a,moveRelativeTo:e.page,isMoving:s});const t=offset(e.page,c.point);return goBefore({axis:a,moveRelativeTo:t,isMoving:s})}const d=o[o.length-1];if(d.descriptor.id===t.descriptor.id)return s.borderBox.center;if(didStartAfterCritical(d.descriptor.id,i)){const e=offset(d.page,negate(i.displacedBy.point));return goAfter({axis:a,moveRelativeTo:e,isMoving:s})}return goAfter({axis:a,moveRelativeTo:d.page,isMoving:s})},withDroppableDisplacement=(e,t)=>{const r=e.frame;return r?add$2(t,r.scroll.diff.displacement):t};const getResultWithoutDroppableDisplacement=({impact:e,draggable:t,droppable:r,draggables:n,afterCritical:i})=>{const o=t.page.borderBox.center,s=e.at;return r&&s?"REORDER"===s.type?whenReordering({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:i}):whenCombining({impact:e,draggables:n,afterCritical:i}):o};var getPageBorderBoxCenterFromImpact=e=>{const t=getResultWithoutDroppableDisplacement(e),r=e.droppable;return r?withDroppableDisplacement(r,t):t},scrollViewport=(e,t)=>{const r=subtract(t,e.scroll.initial),n=negate(r);return{frame:getRect({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}}};function getDraggables$1(e,t){return e.map(e=>t[e])}function tryGetVisible(e,t){for(let r=0;r<t.length;r++){const n=t[r].visible[e];if(n)return n}return null}var speculativelyIncrease=({impact:e,viewport:t,destination:r,draggables:n,maxScrollChange:i})=>{const o=scrollViewport(t,add$2(t.scroll.current,i)),s=r.frame?scrollDroppable(r,add$2(r.frame.scroll.current,i)):r,a=e.displaced,l=getDisplacementGroups({afterDragging:getDraggables$1(a.all,n),destination:r,displacedBy:e.displacedBy,viewport:o.frame,last:a,forceShouldAnimate:!1}),c=getDisplacementGroups({afterDragging:getDraggables$1(a.all,n),destination:s,displacedBy:e.displacedBy,viewport:t.frame,last:a,forceShouldAnimate:!1}),u={},d={},p=[a,l,c];return a.all.forEach(e=>{const t=tryGetVisible(e,p);t?d[e]=t:u[e]=!0}),{...e,displaced:{all:a.all,invisible:u,visible:d}}},withViewportDisplacement=(e,t)=>add$2(e.scroll.diff.displacement,t),getClientFromPageBorderBoxCenter=({pageBorderBoxCenter:e,draggable:t,viewport:r})=>{const n=withViewportDisplacement(r,e),i=subtract(n,t.page.borderBox.center);return add$2(t.client.borderBox.center,i)},isTotallyVisibleInNewLocation=({draggable:e,destination:t,newPageBorderBoxCenter:r,viewport:n,withDroppableDisplacement:i,onlyOnMainAxis:o=!1})=>{const s=subtract(r,e.page.borderBox.center),a={target:offsetByPosition(e.page.borderBox,s),destination:t,withDroppableDisplacement:i,viewport:n};return o?isTotallyVisibleOnAxis(a):isTotallyVisible(a)},moveToNextPlace=({isMovingForward:e,draggable:t,destination:r,draggables:n,previousImpact:i,viewport:o,previousPageBorderBoxCenter:s,previousClientSelection:a,afterCritical:l})=>{if(!r.isEnabled)return null;const c=getDraggablesInsideDroppable(r.descriptor.id,n),u=isHomeOf(t,r),d=moveToNextCombine({isMovingForward:e,draggable:t,destination:r,insideDestination:c,previousImpact:i})||moveToNextIndex({isMovingForward:e,isInHomeList:u,draggable:t,draggables:n,destination:r,insideDestination:c,previousImpact:i,viewport:o,afterCritical:l});if(!d)return null;const p=getPageBorderBoxCenterFromImpact({impact:d,draggable:t,droppable:r,draggables:n,afterCritical:l});if(isTotallyVisibleInNewLocation({draggable:t,destination:r,newPageBorderBoxCenter:p,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:getClientFromPageBorderBoxCenter({pageBorderBoxCenter:p,draggable:t,viewport:o}),impact:d,scrollJumpRequest:null};const h=subtract(p,s);return{clientSelection:a,impact:speculativelyIncrease({impact:d,viewport:o,destination:r,draggables:n,maxScrollChange:h}),scrollJumpRequest:h}};const getKnownActive=e=>{const t=e.subject.active;return t||invariant(!1,"Cannot get clipped area from droppable"),t};var getBestCrossAxisDroppable=({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:n,viewport:i})=>{const o=r.subject.active;if(!o)return null;const s=r.axis,a=isWithin(o[s.start],o[s.end]),l=toDroppableList(n).filter(e=>e!==r).filter(e=>e.isEnabled).filter(e=>Boolean(e.subject.active)).filter(e=>isPartiallyVisibleThroughFrame(i.frame)(getKnownActive(e))).filter(t=>{const r=getKnownActive(t);return e?o[s.crossAxisEnd]<r[s.crossAxisEnd]:r[s.crossAxisStart]<o[s.crossAxisStart]}).filter(e=>{const t=getKnownActive(e),r=isWithin(t[s.start],t[s.end]);return a(t[s.start])||a(t[s.end])||r(o[s.start])||r(o[s.end])}).sort((t,r)=>{const n=getKnownActive(t)[s.crossAxisStart],i=getKnownActive(r)[s.crossAxisStart];return e?n-i:i-n}).filter((e,t,r)=>getKnownActive(e)[s.crossAxisStart]===getKnownActive(r[0])[s.crossAxisStart]);if(!l.length)return null;if(1===l.length)return l[0];const c=l.filter(e=>isWithin(getKnownActive(e)[s.start],getKnownActive(e)[s.end])(t[s.line]));return 1===c.length?c[0]:c.length>1?c.sort((e,t)=>getKnownActive(e)[s.start]-getKnownActive(t)[s.start])[0]:l.sort((e,r)=>{const n=closest$1(t,getCorners(getKnownActive(e))),i=closest$1(t,getCorners(getKnownActive(r)));return n!==i?n-i:getKnownActive(e)[s.start]-getKnownActive(r)[s.start]})[0]};const getCurrentPageBorderBoxCenter=(e,t)=>{const r=e.page.borderBox.center;return didStartAfterCritical(e.descriptor.id,t)?subtract(r,t.displacedBy.point):r},getCurrentPageBorderBox=(e,t)=>{const r=e.page.borderBox;return didStartAfterCritical(e.descriptor.id,t)?offsetByPosition(r,negate(t.displacedBy.point)):r};var getClosestDraggable=({pageBorderBoxCenter:e,viewport:t,destination:r,insideDestination:n,afterCritical:i})=>n.filter(e=>isTotallyVisible({target:getCurrentPageBorderBox(e,i),destination:r,viewport:t.frame,withDroppableDisplacement:!0})).sort((t,n)=>{const o=distance(e,withDroppableDisplacement(r,getCurrentPageBorderBoxCenter(t,i))),s=distance(e,withDroppableDisplacement(r,getCurrentPageBorderBoxCenter(n,i)));return o<s?-1:s<o?1:t.descriptor.index-n.descriptor.index})[0]||null,getDisplacedBy=memoizeOne$1(function(e,t){const r=t[e.line];return{value:r,point:patch(e.line,r)}});const getRequiredGrowthForPlaceholder=(e,t,r)=>{const n=e.axis;if("virtual"===e.descriptor.mode)return patch(n.line,t[n.line]);const i=e.subject.page.contentBox[n.size],o=getDraggablesInsideDroppable(e.descriptor.id,r).reduce((e,t)=>e+t.client.marginBox[n.size],0)+t[n.line]-i;return o<=0?null:patch(n.line,o)},withMaxScroll=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),addPlaceholder$1=(e,t,r)=>{const n=e.frame;isHomeOf(t,e)&&invariant(!1,"Should not add placeholder space to home list"),e.subject.withPlaceholder&&invariant(!1,"Cannot add placeholder size to a subject when it already has one");const i=getDisplacedBy(e.axis,t.displaceBy).point,o=getRequiredGrowthForPlaceholder(e,i,r),s={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n){const t=getSubject({page:e.subject.page,withPlaceholder:s,axis:e.axis,frame:e.frame});return{...e,subject:t}}const a=o?add$2(n.scroll.max,o):n.scroll.max,l=withMaxScroll(n,a),c=getSubject({page:e.subject.page,withPlaceholder:s,axis:e.axis,frame:l});return{...e,subject:c,frame:l}},removePlaceholder=e=>{const t=e.subject.withPlaceholder;t||invariant(!1,"Cannot remove placeholder form subject when there was none");const r=e.frame;if(!r){const t=getSubject({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:t}}const n=t.oldFrameMaxScroll;n||invariant(!1,"Expected droppable with frame to have old max frame scroll when removing placeholder");const i=withMaxScroll(r,n),o=getSubject({page:e.subject.page,axis:e.axis,frame:i,withPlaceholder:null});return{...e,subject:o,frame:i}};var moveToNewDroppable=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:r,draggable:n,draggables:i,destination:o,viewport:s,afterCritical:a})=>{if(!t){if(r.length)return null;const e={displaced:emptyGroups,displacedBy:noDisplacedBy,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},t=getPageBorderBoxCenterFromImpact({impact:e,draggable:n,droppable:o,draggables:i,afterCritical:a}),l=isHomeOf(n,o)?o:addPlaceholder$1(o,n,i);return isTotallyVisibleInNewLocation({draggable:n,destination:l,newPageBorderBoxCenter:t,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?e:null}const l=Boolean(e[o.axis.line]<=t.page.borderBox.center[o.axis.line]),c=(()=>{const e=t.descriptor.index;return t.descriptor.id===n.descriptor.id||l?e:e+1})(),u=getDisplacedBy(o.axis,n.displaceBy);return calculateReorderImpact({draggable:n,insideDestination:r,destination:o,viewport:s,displacedBy:u,last:emptyGroups,index:c})},moveCrossAxis=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:r,isOver:n,draggables:i,droppables:o,viewport:s,afterCritical:a})=>{const l=getBestCrossAxisDroppable({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:o,viewport:s});if(!l)return null;const c=getDraggablesInsideDroppable(l.descriptor.id,i),u=getClosestDraggable({pageBorderBoxCenter:t,viewport:s,destination:l,insideDestination:c,afterCritical:a}),d=moveToNewDroppable({previousPageBorderBoxCenter:t,destination:l,draggable:r,draggables:i,moveRelativeTo:u,insideDestination:c,viewport:s,afterCritical:a});if(!d)return null;const p=getPageBorderBoxCenterFromImpact({impact:d,draggable:r,droppable:l,draggables:i,afterCritical:a});return{clientSelection:getClientFromPageBorderBoxCenter({pageBorderBoxCenter:p,draggable:r,viewport:s}),impact:d,scrollJumpRequest:null}},whatIsDraggedOver=e=>{const t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null};const getDroppableOver$1=(e,t)=>{const r=whatIsDraggedOver(e);return r?t[r]:null};var moveInDirection=({state:e,type:t})=>{const r=getDroppableOver$1(e.impact,e.dimensions.droppables),n=Boolean(r),i=e.dimensions.droppables[e.critical.droppable.id],o=r||i,s=o.axis.direction,a="vertical"===s&&("MOVE_UP"===t||"MOVE_DOWN"===t)||"horizontal"===s&&("MOVE_LEFT"===t||"MOVE_RIGHT"===t);if(a&&!n)return null;const l="MOVE_DOWN"===t||"MOVE_RIGHT"===t,c=e.dimensions.draggables[e.critical.draggable.id],u=e.current.page.borderBoxCenter,{draggables:d,droppables:p}=e.dimensions;return a?moveToNextPlace({isMovingForward:l,previousPageBorderBoxCenter:u,draggable:c,destination:o,draggables:d,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):moveCrossAxis({isMovingForward:l,previousPageBorderBoxCenter:u,draggable:c,isOver:o,draggables:d,droppables:p,viewport:e.viewport,afterCritical:e.afterCritical})};function isMovementAllowed(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function isPositionInFrame(e){const t=isWithin(e.top,e.bottom),r=isWithin(e.left,e.right);return function(e){return t(e.y)&&r(e.x)}}function getHasOverlap(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function getFurthestAway({pageBorderBox:e,draggable:t,candidates:r}){const n=t.page.borderBox.center,i=r.map(t=>{const r=t.axis,i=patch(t.axis.line,e.center[r.line],t.page.borderBox.center[r.crossAxisLine]);return{id:t.descriptor.id,distance:distance(n,i)}}).sort((e,t)=>t.distance-e.distance);return i[0]?i[0].id:null}function getDroppableOver({pageBorderBox:e,draggable:t,droppables:r}){const n=toDroppableList(r).filter(t=>{if(!t.isEnabled)return!1;const r=t.subject.active;if(!r)return!1;if(!getHasOverlap(e,r))return!1;if(isPositionInFrame(r)(e.center))return!0;const n=t.axis,i=r.center[n.crossAxisLine],o=e[n.crossAxisStart],s=e[n.crossAxisEnd],a=isWithin(r[n.crossAxisStart],r[n.crossAxisEnd]),l=a(o),c=a(s);return!l&&!c||(l?o<i:s>i)});return n.length?1===n.length?n[0].descriptor.id:getFurthestAway({pageBorderBox:e,draggable:t,candidates:n}):null}const offsetRectByPosition=(e,t)=>getRect(offsetByPosition(e,t));var withDroppableScroll=(e,t)=>{const r=e.frame;return r?offsetRectByPosition(t,r.scroll.diff.value):t};function getIsDisplaced({displaced:e,id:t}){return Boolean(e.visible[t]||e.invisible[t])}function atIndex({draggable:e,closest:t,inHomeList:r}){return t?r&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var getReorderImpact=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:r,insideDestination:n,last:i,viewport:o,afterCritical:s})=>{const a=r.axis,l=getDisplacedBy(r.axis,t.displaceBy),c=l.value,u=e[a.start],d=e[a.end],p=atIndex({draggable:t,closest:removeDraggableFromList(t,n).find(e=>{const t=e.descriptor.id,r=e.page.borderBox.center[a.line],n=didStartAfterCritical(t,s),o=getIsDisplaced({displaced:i,id:t});return n?o?d<=r:u<r-c:o?d<=r+c:u<r})||null,inHomeList:isHomeOf(t,r)});return calculateReorderImpact({draggable:t,insideDestination:n,destination:r,viewport:o,last:i,displacedBy:l,index:p})};const combineThresholdDivisor=4;var getCombineImpact=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:r,destination:n,insideDestination:i,afterCritical:o})=>{if(!n.isCombineEnabled)return null;const s=n.axis,a=getDisplacedBy(n.axis,e.displaceBy),l=a.value,c=t[s.start],u=t[s.end],d=removeDraggableFromList(e,i).find(e=>{const t=e.descriptor.id,n=e.page.borderBox,i=n[s.size]/combineThresholdDivisor,a=didStartAfterCritical(t,o),d=getIsDisplaced({displaced:r.displaced,id:t});return a?d?u>n[s.start]+i&&u<n[s.end]-i:c>n[s.start]-l+i&&c<n[s.end]-l-i:d?u>n[s.start]+l+i&&u<n[s.end]+l-i:c>n[s.start]+i&&c<n[s.end]-i});return d?{displacedBy:a,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:d.descriptor.id,droppableId:n.descriptor.id}}}:null},getDragImpact=({pageOffset:e,draggable:t,draggables:r,droppables:n,previousImpact:i,viewport:o,afterCritical:s})=>{const a=offsetRectByPosition(t.page.borderBox,e),l=getDroppableOver({pageBorderBox:a,draggable:t,droppables:n});if(!l)return noImpact;const c=n[l],u=getDraggablesInsideDroppable(c.descriptor.id,r),d=withDroppableScroll(c,a);return getCombineImpact({pageBorderBoxWithDroppableScroll:d,draggable:t,previousImpact:i,destination:c,insideDestination:u,afterCritical:s})||getReorderImpact({pageBorderBoxWithDroppableScroll:d,draggable:t,destination:c,insideDestination:u,last:i.displaced,viewport:o,afterCritical:s})},patchDroppableMap=(e,t)=>({...e,[t.descriptor.id]:t});const clearUnusedPlaceholder=({previousImpact:e,impact:t,droppables:r})=>{const n=whatIsDraggedOver(e),i=whatIsDraggedOver(t);if(!n)return r;if(n===i)return r;const o=r[n];if(!o.subject.withPlaceholder)return r;const s=removePlaceholder(o);return patchDroppableMap(r,s)};var recomputePlaceholders=({draggable:e,draggables:t,droppables:r,previousImpact:n,impact:i})=>{const o=clearUnusedPlaceholder({previousImpact:n,impact:i,droppables:r}),s=whatIsDraggedOver(i);if(!s)return o;const a=r[s];if(isHomeOf(e,a))return o;if(a.subject.withPlaceholder)return o;const l=addPlaceholder$1(a,e,t);return patchDroppableMap(o,l)},update$2=({state:e,clientSelection:t,dimensions:r,viewport:n,impact:i,scrollJumpRequest:o})=>{const s=n||e.viewport,a=r||e.dimensions,l=t||e.current.client.selection,c=subtract(l,e.initial.client.selection),u={offset:c,selection:l,borderBoxCenter:add$2(e.initial.client.borderBoxCenter,c)},d={selection:add$2(u.selection,s.scroll.current),borderBoxCenter:add$2(u.borderBoxCenter,s.scroll.current),offset:add$2(u.offset,s.scroll.diff.value)},p={client:u,page:d};if("COLLECTING"===e.phase)return{...e,dimensions:a,viewport:s,current:p};const h=a.draggables[e.critical.draggable.id],f=i||getDragImpact({pageOffset:d.offset,draggable:h,draggables:a.draggables,droppables:a.droppables,previousImpact:e.impact,viewport:s,afterCritical:e.afterCritical}),m=recomputePlaceholders({draggable:h,impact:f,previousImpact:e.impact,draggables:a.draggables,droppables:a.droppables});return{...e,current:p,dimensions:{draggables:a.draggables,droppables:m},impact:f,viewport:s,scrollJumpRequest:o||null,forceShouldAnimate:!o&&null}};function getDraggables(e,t){return e.map(e=>t[e])}var recompute=({impact:e,viewport:t,draggables:r,destination:n,forceShouldAnimate:i})=>{const o=e.displaced,s=getDisplacementGroups({afterDragging:getDraggables(o.all,r),destination:n,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:i,last:o});return{...e,displaced:s}},getClientBorderBoxCenter=({impact:e,draggable:t,droppable:r,draggables:n,viewport:i,afterCritical:o})=>{const s=getPageBorderBoxCenterFromImpact({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:o});return getClientFromPageBorderBoxCenter({pageBorderBoxCenter:s,draggable:t,viewport:i})},refreshSnap=({state:e,dimensions:t,viewport:r})=>{"SNAP"!==e.movementMode&&invariant();const n=e.impact,i=r||e.viewport,o=t||e.dimensions,{draggables:s,droppables:a}=o,l=s[e.critical.draggable.id],c=whatIsDraggedOver(n);c||invariant(!1,"Must be over a destination in SNAP movement mode");const u=a[c],d=recompute({impact:n,viewport:i,destination:u,draggables:s}),p=getClientBorderBoxCenter({impact:d,draggable:l,droppable:u,draggables:s,viewport:i,afterCritical:e.afterCritical});return update$2({impact:d,clientSelection:p,state:e,dimensions:o,viewport:i})},getHomeLocation=e=>({index:e.index,droppableId:e.droppableId}),getLiftEffect=({draggable:e,home:t,draggables:r,viewport:n})=>{const i=getDisplacedBy(t.axis,e.displaceBy),o=getDraggablesInsideDroppable(t.descriptor.id,r),s=o.indexOf(e);-1===s&&invariant(!1,"Expected draggable to be inside home list");const a=o.slice(s+1),l=a.reduce((e,t)=>(e[t.descriptor.id]=!0,e),{}),c={inVirtualList:"virtual"===t.descriptor.mode,displacedBy:i,effected:l};return{impact:{displaced:getDisplacementGroups({afterDragging:a,destination:t,displacedBy:i,last:null,viewport:n.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:getHomeLocation(e.descriptor)}},afterCritical:c}},patchDimensionMap=(e,t)=>({draggables:e.draggables,droppables:patchDroppableMap(e.droppables,t)}),offsetDraggable=({draggable:e,offset:t,initialWindowScroll:r})=>{const n=offset(e.client,t),i=withScroll(n,r);return{...e,placeholder:{...e.placeholder,client:n},client:n,page:i}},getFrame=e=>{const t=e.frame;return t||invariant(!1,"Expected Droppable to have a frame"),t},adjustAdditionsForScrollChanges=({additions:e,updatedDroppables:t,viewport:r})=>{const n=r.scroll.diff.value;return e.map(e=>{const i=e.descriptor.droppableId,o=t[i],s=getFrame(o).scroll.diff.value,a=add$2(n,s);return offsetDraggable({draggable:e,offset:a,initialWindowScroll:r.scroll.initial})})},publishWhileDraggingInVirtual=({state:e,published:t})=>{const r=t.modified.map(t=>{const r=e.dimensions.droppables[t.droppableId];return scrollDroppable(r,t.scroll)}),n={...e.dimensions.droppables,...toDroppableMap(r)},i=toDraggableMap(adjustAdditionsForScrollChanges({additions:t.additions,updatedDroppables:n,viewport:e.viewport})),o={...e.dimensions.draggables,...i};t.removals.forEach(e=>{delete o[e]});const s={droppables:n,draggables:o},a=whatIsDraggedOver(e.impact),l=a?s.droppables[a]:null,c=s.draggables[e.critical.draggable.id],u=s.droppables[e.critical.droppable.id],{impact:d,afterCritical:p}=getLiftEffect({draggable:c,home:u,draggables:o,viewport:e.viewport}),h=l&&l.isCombineEnabled?e.impact:d,f=getDragImpact({pageOffset:e.current.page.offset,draggable:s.draggables[e.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:h,viewport:e.viewport,afterCritical:p}),m={...e,phase:"DRAGGING",impact:f,onLiftImpact:d,dimensions:s,afterCritical:p,forceShouldAnimate:!1};return"COLLECTING"===e.phase?m:{...m,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const isSnapping=e=>"SNAP"===e.movementMode,postDroppableChange=(e,t,r)=>{const n=patchDimensionMap(e.dimensions,t);return!isSnapping(e)||r?update$2({state:e,dimensions:n}):refreshSnap({state:e,dimensions:n})};function removeScrollJumpRequest(e){return e.isDragging&&"SNAP"===e.movementMode?{...e,scrollJumpRequest:null}:e}const idle$2={phase:"IDLE",completed:null,shouldFlush:!1};var reducer=(e=idle$2,t)=>{if("FLUSH"===t.type)return{...idle$2,shouldFlush:!0};if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&invariant(!1,"INITIAL_PUBLISH must come after a IDLE phase");const{critical:r,clientSelection:n,viewport:i,dimensions:o,movementMode:s}=t.payload,a=o.draggables[r.draggable.id],l=o.droppables[r.droppable.id],c={selection:n,borderBoxCenter:a.client.borderBox.center,offset:origin},u={client:c,page:{selection:add$2(c.selection,i.scroll.initial),borderBoxCenter:add$2(c.selection,i.scroll.initial),offset:add$2(c.selection,i.scroll.diff.value)}},d=toDroppableList(o.droppables).every(e=>!e.isFixedOnPage),{impact:p,afterCritical:h}=getLiftEffect({draggable:a,home:l,draggables:o.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:s,dimensions:o,initial:u,current:u,isWindowScrollAllowed:d,impact:p,afterCritical:h,onLiftImpact:p,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&invariant(!1,`Collection cannot start from phase ${e.phase}`),{...e,phase:"COLLECTING"});if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&invariant(!1,`Unexpected ${t.type} received in phase ${e.phase}`),publishWhileDraggingInVirtual({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;isMovementAllowed(e)||invariant(!1,`${t.type} not permitted in phase ${e.phase}`);const{client:r}=t.payload;return isEqual$1(r,e.current.client.selection)?e:update$2({state:e,clientSelection:r,impact:isSnapping(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return removeScrollJumpRequest(e);if("COLLECTING"===e.phase)return removeScrollJumpRequest(e);isMovementAllowed(e)||invariant(!1,`${t.type} not permitted in phase ${e.phase}`);const{id:r,newScroll:n}=t.payload,i=e.dimensions.droppables[r];if(!i)return e;const o=scrollDroppable(i,n);return postDroppableChange(e,o,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;isMovementAllowed(e)||invariant(!1,`Attempting to move in an unsupported phase ${e.phase}`);const{id:r,isEnabled:n}=t.payload,i=e.dimensions.droppables[r];i||invariant(!1,`Cannot find Droppable[id: ${r}] to toggle its enabled state`),i.isEnabled===n&&invariant(!1,`Trying to set droppable isEnabled to ${String(n)}\n      but it is already ${String(i.isEnabled)}`);const o={...i,isEnabled:n};return postDroppableChange(e,o,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;isMovementAllowed(e)||invariant(!1,`Attempting to move in an unsupported phase ${e.phase}`);const{id:r,isCombineEnabled:n}=t.payload,i=e.dimensions.droppables[r];i||invariant(!1,`Cannot find Droppable[id: ${r}] to toggle its isCombineEnabled state`),i.isCombineEnabled===n&&invariant(!1,`Trying to set droppable isCombineEnabled to ${String(n)}\n      but it is already ${String(i.isCombineEnabled)}`);const o={...i,isCombineEnabled:n};return postDroppableChange(e,o,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;isMovementAllowed(e)||invariant(!1,`Cannot move by window in phase ${e.phase}`),e.isWindowScrollAllowed||invariant(!1,"Window scrolling is currently not supported for fixed lists");const r=t.payload.newScroll;if(isEqual$1(e.viewport.scroll.current,r))return removeScrollJumpRequest(e);const n=scrollViewport(e.viewport,r);return isSnapping(e)?refreshSnap({state:e,viewport:n}):update$2({state:e,viewport:n})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!isMovementAllowed(e))return e;const r=t.payload.maxScroll;if(isEqual$1(r,e.viewport.scroll.max))return e;const n={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:n}}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&invariant(!1,`${t.type} received while not in DRAGGING phase`);const r=moveInDirection({state:e,type:t.type});return r?update$2({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){const r=t.payload.reason;return"COLLECTING"!==e.phase&&invariant(!1,"Can only move into the DROP_PENDING phase from the COLLECTING phase"),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if("DROP_ANIMATE"===t.type){const{completed:r,dropDuration:n,newHomeClientOffset:i}=t.payload;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&invariant(!1,`Cannot animate drop from phase ${e.phase}`),{phase:"DROP_ANIMATING",completed:r,dropDuration:n,newHomeClientOffset:i,dimensions:e.dimensions}}if("DROP_COMPLETE"===t.type){const{completed:e}=t.payload;return{phase:"IDLE",completed:e,shouldFlush:!1}}return e};function guard(e,t){return e instanceof Object&&"type"in e&&e.type===t}const beforeInitialCapture=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),lift$1=e=>({type:"LIFT",payload:e}),initialPublish=e=>({type:"INITIAL_PUBLISH",payload:e}),publishWhileDragging=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),collectionStarting=()=>({type:"COLLECTION_STARTING",payload:null}),updateDroppableScroll=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),updateDroppableIsEnabled=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),updateDroppableIsCombineEnabled=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),move=e=>({type:"MOVE",payload:e}),moveByWindowScroll=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),updateViewportMaxScroll=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),moveUp=()=>({type:"MOVE_UP",payload:null}),moveDown=()=>({type:"MOVE_DOWN",payload:null}),moveRight=()=>({type:"MOVE_RIGHT",payload:null}),moveLeft=()=>({type:"MOVE_LEFT",payload:null}),flush=()=>({type:"FLUSH",payload:null}),animateDrop=e=>({type:"DROP_ANIMATE",payload:e}),completeDrop=e=>({type:"DROP_COMPLETE",payload:e}),drop=e=>({type:"DROP",payload:e}),dropPending=e=>({type:"DROP_PENDING",payload:e}),dropAnimationFinished=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});function checkIndexes(e){if(e.length<=1)return;const t=e.map(e=>e.descriptor.index),r={};for(let i=1;i<t.length;i++){const e=t[i];e!==t[i-1]+1&&(r[e]=!0)}if(!Object.keys(r).length)return;const n=t.map(e=>Boolean(r[e])?`[${e}]`:`${e}`).join(", ");warning$3(`\n    Detected non-consecutive <Draggable /> indexes.\n\n    (This can cause unexpected bugs)\n\n    ${n}\n  `)}function validateDimensions(e,t){checkIndexes(getDraggablesInsideDroppable(e.droppable.id,t.draggables))}var lift$2=e=>({getState:t,dispatch:r})=>n=>i=>{if(!guard(i,"LIFT"))return void n(i);const{id:o,clientSelection:s,movementMode:a}=i.payload,l=t();"DROP_ANIMATING"===l.phase&&r(completeDrop({completed:l.completed})),"IDLE"!==t().phase&&invariant(!1,"Unexpected phase to start a drag"),r(flush()),r(beforeInitialCapture({draggableId:o,movementMode:a}));const c={draggableId:o,scrollOptions:{shouldPublishImmediately:"SNAP"===a}},{critical:u,dimensions:d,viewport:p}=e.startPublishing(c);validateDimensions(u,d),r(initialPublish({critical:u,dimensions:d,clientSelection:s,movementMode:a,viewport:p}))},style$1=e=>()=>t=>r=>{guard(r,"INITIAL_PUBLISH")&&e.dragging(),guard(r,"DROP_ANIMATE")&&e.dropping(r.payload.completed.result.reason),(guard(r,"FLUSH")||guard(r,"DROP_COMPLETE"))&&e.resting(),t(r)};const curves={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},combine={opacity:{drop:0,combining:.7},scale:{drop:.75}},timings={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},outOfTheWayTiming=`${timings.outOfTheWay}s ${curves.outOfTheWay}`,transitions={fluid:`opacity ${outOfTheWayTiming}`,snap:`transform ${outOfTheWayTiming}, opacity ${outOfTheWayTiming}`,drop:e=>{const t=`${e}s ${curves.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${outOfTheWayTiming}`,placeholder:`height ${outOfTheWayTiming}, width ${outOfTheWayTiming}, margin ${outOfTheWayTiming}`},moveTo=e=>isEqual$1(e,origin)?void 0:`translate(${e.x}px, ${e.y}px)`,transforms={moveTo:moveTo,drop:(e,t)=>{const r=moveTo(e);if(r)return t?`${r} scale(${combine.scale.drop})`:r}},{minDropTime:minDropTime,maxDropTime:maxDropTime}=timings,dropTimeRange=maxDropTime-minDropTime,maxDropTimeAtDistance=1500,cancelDropModifier=.6;var getDropDuration=({current:e,destination:t,reason:r})=>{const n=distance(e,t);if(n<=0)return minDropTime;if(n>=maxDropTimeAtDistance)return maxDropTime;const i=minDropTime+dropTimeRange*(n/maxDropTimeAtDistance);return Number(("CANCEL"===r?i*cancelDropModifier:i).toFixed(2))},getNewHomeClientOffset=({impact:e,draggable:t,dimensions:r,viewport:n,afterCritical:i})=>{const{draggables:o,droppables:s}=r,a=whatIsDraggedOver(e),l=a?s[a]:null,c=s[t.descriptor.droppableId],u=getClientBorderBoxCenter({impact:e,draggable:t,draggables:o,afterCritical:i,droppable:l||c,viewport:n});return subtract(u,t.client.borderBox.center)},getDropImpact=({draggables:e,reason:t,lastImpact:r,home:n,viewport:i,onLiftImpact:o})=>r.at&&"DROP"===t?"REORDER"===r.at.type?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:emptyGroups},didDropInsideDroppable:!0}:{impact:recompute({draggables:e,impact:o,destination:n,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1};const dropMiddleware=({getState:e,dispatch:t})=>r=>n=>{if(!guard(n,"DROP"))return void r(n);const i=e(),o=n.payload.reason;if("COLLECTING"===i.phase)return void t(dropPending({reason:o}));if("IDLE"===i.phase)return;"DROP_PENDING"===i.phase&&i.isWaiting&&invariant(!1,"A DROP action occurred while DROP_PENDING and still waiting"),"DRAGGING"!==i.phase&&"DROP_PENDING"!==i.phase&&invariant(!1,`Cannot drop in phase: ${i.phase}`);const s=i.critical,a=i.dimensions,l=a.draggables[i.critical.draggable.id],{impact:c,didDropInsideDroppable:u}=getDropImpact({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),d=u?tryGetDestination(c):null,p=u?tryGetCombine(c):null,h={index:s.draggable.index,droppableId:s.droppable.id},f={draggableId:l.descriptor.id,type:l.descriptor.type,source:h,reason:o,mode:i.movementMode,destination:d,combine:p},m=getNewHomeClientOffset({impact:c,draggable:l,dimensions:a,viewport:i.viewport,afterCritical:i.afterCritical}),g={critical:i.critical,afterCritical:i.afterCritical,result:f,impact:c};if(isEqual$1(i.current.client.offset,m)&&!Boolean(f.combine))return void t(completeDrop({completed:g}));const b=getDropDuration({current:i.current.client.offset,destination:m,reason:o});t(animateDrop({newHomeClientOffset:m,dropDuration:b,completed:g}))};var getWindowScroll=()=>({x:window.pageXOffset,y:window.pageYOffset});function getWindowScrollBinding(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function getScrollListener({onWindowScroll:e}){const t=rafSchd(function(){e(getWindowScroll())}),r=getWindowScrollBinding(t);let n=noop$2$1;function i(){return n!==noop$2$1}return{start:function(){i()&&invariant(!1,"Cannot start scroll listener when already active"),n=bindEvents(window,[r])},stop:function(){i()||invariant(!1,"Cannot stop scroll listener when not active"),t.cancel(),n(),n=noop$2$1},isActive:i}}const shouldStop$1=e=>guard(e,"DROP_COMPLETE")||guard(e,"DROP_ANIMATE")||guard(e,"FLUSH"),scrollListener=e=>{const t=getScrollListener({onWindowScroll:t=>{e.dispatch(moveByWindowScroll({newScroll:t}))}});return e=>r=>{!t.isActive()&&guard(r,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&shouldStop$1(r)&&t.stop(),e(r)}};var getExpiringAnnounce=e=>{let t=!1,r=!1;const n=setTimeout(()=>{r=!0}),i=i=>{t?warning$3("Announcement already made. Not making a second announcement"):r?warning$3("\n        Announcements cannot be made asynchronously.\n        Default message has already been announced.\n      "):(t=!0,e(i),clearTimeout(n))};return i.wasCalled=()=>t,i},getAsyncMarshal=()=>{const e=[];return{add:t=>{const r=setTimeout(()=>(t=>{const r=e.findIndex(e=>e.timerId===t);-1===r&&invariant(!1,"Could not find timer");const[n]=e.splice(r,1);n.callback()})(r)),n={timerId:r,callback:t};e.push(n)},flush:()=>{if(!e.length)return;const t=[...e];e.length=0,t.forEach(e=>{clearTimeout(e.timerId),e.callback()})}}};const areLocationsEqual=(e,t)=>null==e&&null==t||null!=e&&null!=t&&e.droppableId===t.droppableId&&e.index===t.index,isCombineEqual=(e,t)=>null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId,isCriticalEqual=(e,t)=>{if(e===t)return!0;const r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&n},withTimings=(e,t)=>{t()},getDragStart=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function execute(e,t,r,n){if(!e)return void r(n(t));const i=getExpiringAnnounce(r);e(t,{announce:i}),i.wasCalled()||r(n(t))}var getPublisher=(e,t)=>{const r=getAsyncMarshal();let n=null;const i=r=>{n||invariant(!1,"Cannot fire onDragEnd when there is no matching onDragStart"),n=null,withTimings("onDragEnd",()=>execute(e().onDragEnd,r,t,preset.onDragEnd))};return{beforeCapture:(t,r)=>{n&&invariant(!1,"Cannot fire onBeforeCapture as a drag start has already been published"),withTimings("onBeforeCapture",()=>{const n=e().onBeforeCapture;n&&n({draggableId:t,mode:r})})},beforeStart:(t,r)=>{n&&invariant(!1,"Cannot fire onBeforeDragStart as a drag start has already been published"),withTimings("onBeforeDragStart",()=>{const n=e().onBeforeDragStart;n&&n(getDragStart(t,r))})},start:(i,o)=>{n&&invariant(!1,"Cannot fire onBeforeDragStart as a drag start has already been published");const s=getDragStart(i,o);n={mode:o,lastCritical:i,lastLocation:s.source,lastCombine:null},r.add(()=>{withTimings("onDragStart",()=>execute(e().onDragStart,s,t,preset.onDragStart))})},update:(i,o)=>{const s=tryGetDestination(o),a=tryGetCombine(o);n||invariant(!1,"Cannot fire onDragMove when onDragStart has not been called");const l=!isCriticalEqual(i,n.lastCritical);l&&(n.lastCritical=i);const c=!areLocationsEqual(n.lastLocation,s);c&&(n.lastLocation=s);const u=!isCombineEqual(n.lastCombine,a);if(u&&(n.lastCombine=a),!l&&!c&&!u)return;const d={...getDragStart(i,n.mode),combine:a,destination:s};r.add(()=>{withTimings("onDragUpdate",()=>execute(e().onDragUpdate,d,t,preset.onDragUpdate))})},flush:()=>{n||invariant(!1,"Can only flush responders while dragging"),r.flush()},drop:i,abort:()=>{if(!n)return;const e={...getDragStart(n.lastCritical,n.mode),combine:null,destination:null,reason:"CANCEL"};i(e)}}},responders=(e,t)=>{const r=getPublisher(e,t);return e=>t=>n=>{if(guard(n,"BEFORE_INITIAL_CAPTURE"))return void r.beforeCapture(n.payload.draggableId,n.payload.movementMode);if(guard(n,"INITIAL_PUBLISH")){const e=n.payload.critical;return r.beforeStart(e,n.payload.movementMode),t(n),void r.start(e,n.payload.movementMode)}if(guard(n,"DROP_COMPLETE")){const e=n.payload.completed.result;return r.flush(),t(n),void r.drop(e)}if(t(n),guard(n,"FLUSH"))return void r.abort();const i=e.getState();"DRAGGING"===i.phase&&r.update(i.critical,i.impact)}};const dropAnimationFinishMiddleware=e=>t=>r=>{if(!guard(r,"DROP_ANIMATION_FINISHED"))return void t(r);const n=e.getState();"DROP_ANIMATING"!==n.phase&&invariant(!1,"Cannot finish a drop animating when no drop is occurring"),e.dispatch(completeDrop({completed:n.completed}))},dropAnimationFlushOnScrollMiddleware=e=>{let t=null,r=null;return n=>i=>{if((guard(i,"FLUSH")||guard(i,"DROP_COMPLETE")||guard(i,"DROP_ANIMATION_FINISHED"))&&(r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)),n(i),!guard(i,"DROP_ANIMATE"))return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch(dropAnimationFinished())}};r=requestAnimationFrame(()=>{r=null,t=bindEvents(window,[o])})}};var dimensionMarshalStopper=e=>()=>t=>r=>{(guard(r,"DROP_COMPLETE")||guard(r,"FLUSH")||guard(r,"DROP_ANIMATE"))&&e.stopPublishing(),t(r)},focus=e=>{let t=!1;return()=>r=>n=>{if(guard(n,"INITIAL_PUBLISH"))return t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),void e.tryRestoreFocusRecorded();if(r(n),t){if(guard(n,"FLUSH"))return t=!1,void e.tryRestoreFocusRecorded();if(guard(n,"DROP_COMPLETE")){t=!1;const r=n.payload.completed.result;r.combine&&e.tryShiftRecord(r.draggableId,r.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const shouldStop=e=>guard(e,"DROP_COMPLETE")||guard(e,"DROP_ANIMATE")||guard(e,"FLUSH");var autoScroll=e=>t=>r=>n=>{if(shouldStop(n))return e.stop(),void r(n);if(guard(n,"INITIAL_PUBLISH")){r(n);const i=t.getState();return"DRAGGING"!==i.phase&&invariant(!1,"Expected phase to be DRAGGING after INITIAL_PUBLISH"),void e.start(i)}r(n),e.scroll(t.getState())};const pendingDrop=e=>t=>r=>{if(t(r),!guard(r,"PUBLISH_WHILE_DRAGGING"))return;const n=e.getState();"DROP_PENDING"===n.phase&&(n.isWaiting||e.dispatch(drop({reason:n.reason})))},composeEnhancers="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({name:"@hello-pangea/dnd"}):compose;var createStore=({dimensionMarshal:e,focusMarshal:t,styleMarshal:r,getResponders:n,announce:i,autoScroller:o})=>createStore$1(reducer,composeEnhancers(applyMiddleware(style$1(r),dimensionMarshalStopper(e),lift$2(e),dropMiddleware,dropAnimationFinishMiddleware,dropAnimationFlushOnScrollMiddleware,pendingDrop,autoScroll(o),scrollListener,focus(t),responders(n,i))));const clean$1=()=>({additions:{},removals:{},modified:{}});function createPublisher({registry:e,callbacks:t}){let r=clean$1(),n=null;const i=()=>{n||(t.collectionStarting(),n=requestAnimationFrame(()=>{n=null;const{additions:i,removals:o,modified:s}=r,a=Object.keys(i).map(t=>e.draggable.getById(t).getDimension(origin)).sort((e,t)=>e.descriptor.index-t.descriptor.index),l=Object.keys(s).map(t=>({droppableId:t,scroll:e.droppable.getById(t).callbacks.getScrollWhileDragging()})),c={additions:a,removals:Object.keys(o),modified:l};r=clean$1(),t.publish(c)}))};return{add:e=>{const t=e.descriptor.id;r.additions[t]=e,r.modified[e.descriptor.droppableId]=!0,r.removals[t]&&delete r.removals[t],i()},remove:e=>{const t=e.descriptor;r.removals[t.id]=!0,r.modified[t.droppableId]=!0,r.additions[t.id]&&delete r.additions[t.id],i()},stop:()=>{n&&(cancelAnimationFrame(n),n=null,r=clean$1())}}}var getMaxScroll=({scrollHeight:e,scrollWidth:t,height:r,width:n})=>{const i=subtract({x:t,y:e},{x:n,y:r});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},getDocumentElement=()=>{const e=document.documentElement;return e||invariant(!1,"Cannot find document.documentElement"),e},getMaxWindowScroll=()=>{const e=getDocumentElement();return getMaxScroll({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},getViewport=()=>{const e=getWindowScroll(),t=getMaxWindowScroll(),r=e.y,n=e.x,i=getDocumentElement(),o=i.clientWidth,s=i.clientHeight;return{frame:getRect({top:r,left:n,right:n+o,bottom:r+s}),scroll:{initial:e,current:e,max:t,diff:{value:origin,displacement:origin}}}},getInitialPublish=({critical:e,scrollOptions:t,registry:r})=>{const n=getViewport(),i=n.scroll.current,o=e.droppable,s=r.droppable.getAllByType(o.type).map(e=>e.callbacks.getDimensionAndWatchScroll(i,t)),a=r.draggable.getAllByType(e.draggable.type).map(e=>e.getDimension(i));return{dimensions:{draggables:toDraggableMap(a),droppables:toDroppableMap(s)},critical:e,viewport:n}};function shouldPublishUpdate(e,t,r){return r.descriptor.id!==t.id&&(r.descriptor.type===t.type&&("virtual"===e.droppable.getById(r.descriptor.droppableId).descriptor.mode||(warning$3(`\n      You are attempting to add or remove a Draggable [id: ${r.descriptor.id}]\n      while a drag is occurring. This is only supported for virtual lists.\n\n      See https://github.com/hello-pangea/dnd/blob/main/docs/patterns/virtual-lists.md\n    `),!1)))}var createDimensionMarshal=(e,t)=>{let r=null;const n=createPublisher({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=t=>{r||invariant(!1,"Should only be subscribed when a collection is occurring");const i=r.critical.draggable;"ADDITION"===t.type&&shouldPublishUpdate(e,i,t.value)&&n.add(t.value),"REMOVAL"===t.type&&shouldPublishUpdate(e,i,t.value)&&n.remove(t.value)};return{updateDroppableIsEnabled:(n,i)=>{e.droppable.exists(n)||invariant(!1,`Cannot update is enabled flag of Droppable ${n} as it is not registered`),r&&t.updateDroppableIsEnabled({id:n,isEnabled:i})},updateDroppableIsCombineEnabled:(n,i)=>{r&&(e.droppable.exists(n)||invariant(!1,`Cannot update isCombineEnabled flag of Droppable ${n} as it is not registered`),t.updateDroppableIsCombineEnabled({id:n,isCombineEnabled:i}))},scrollDroppable:(t,n)=>{r&&e.droppable.getById(t).callbacks.scroll(n)},updateDroppableScroll:(n,i)=>{r&&(e.droppable.exists(n)||invariant(!1,`Cannot update the scroll on Droppable ${n} as it is not registered`),t.updateDroppableScroll({id:n,newScroll:i}))},startPublishing:t=>{r&&invariant(!1,"Cannot start capturing critical dimensions as there is already a collection");const n=e.draggable.getById(t.draggableId),o=e.droppable.getById(n.descriptor.droppableId),s={draggable:n.descriptor,droppable:o.descriptor},a=e.subscribe(i);return r={critical:s,unsubscribe:a},getInitialPublish({critical:s,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:()=>{if(!r)return;n.stop();const t=r.critical.droppable;e.droppable.getAllByType(t.type).forEach(e=>e.callbacks.dragStopped()),r.unsubscribe(),r=null}}},canStartDrag=(e,t)=>"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason,scrollWindow=e=>{window.scrollBy(e.x,e.y)};const getScrollableDroppables=memoizeOne$1(e=>toDroppableList(e).filter(e=>!!e.isEnabled&&!!e.frame)),getScrollableDroppableOver=(e,t)=>getScrollableDroppables(t).find(t=>(t.frame||invariant(!1,"Invalid result"),isPositionInFrame(t.frame.pageMarginBox)(e)))||null;var getBestScrollableDroppable=({center:e,destination:t,droppables:r})=>{if(t){const e=r[t];return e.frame?e:null}return getScrollableDroppableOver(e,r)};const defaultAutoScrollerOptions={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var getDistanceThresholds=(e,t,r=()=>defaultAutoScrollerOptions)=>{const n=r();return{startScrollingFrom:e[t.size]*n.startFromPercentage,maxScrollValueAt:e[t.size]*n.maxScrollAtPercentage}},getPercentage=({startOfRange:e,endOfRange:t,current:r})=>{const n=t-e;return 0===n?(warning$3("\n      Detected distance range of 0 in the fluid auto scroller\n      This is unexpected and would cause a divide by 0 issue.\n      Not allowing an auto scroll\n    "),0):(r-e)/n},minScroll=1,getValueFromDistance=(e,t,r=()=>defaultAutoScrollerOptions)=>{const n=r();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return n.maxPixelScroll;if(e===t.startScrollingFrom)return minScroll;const i=1-getPercentage({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),o=n.maxPixelScroll*n.ease(i);return Math.ceil(o)},dampenValueByTime=(e,t,r)=>{const n=r(),i=n.durationDampening.accelerateAt,o=n.durationDampening.stopDampeningAt,s=t,a=o,l=Date.now()-s;if(l>=o)return e;if(l<i)return minScroll;const c=getPercentage({startOfRange:i,endOfRange:a,current:l}),u=e*n.ease(c);return Math.ceil(u)},getValue=({distanceToEdge:e,thresholds:t,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:i})=>{const o=getValueFromDistance(e,t,i);return 0===o?0:n?Math.max(dampenValueByTime(o,r,i),minScroll):o},getScrollOnAxis=({container:e,distanceToEdges:t,dragStartTime:r,axis:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const s=getDistanceThresholds(e,n,o);return t[n.end]<t[n.start]?getValue({distanceToEdge:t[n.end],thresholds:s,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o}):-1*getValue({distanceToEdge:t[n.start],thresholds:s,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o})},adjustForSizeLimits=({container:e,subject:t,proposedScroll:r})=>{const n=t.height>e.height,i=t.width>e.width;return i||n?i&&n?null:{x:i?0:r.x,y:n?0:r.y}:r};const clean=apply(e=>0===e?0:e);var getScroll$1=({dragStartTime:e,container:t,subject:r,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const s={top:n.y-t.top,right:t.right-n.x,bottom:t.bottom-n.y,left:n.x-t.left},a=getScrollOnAxis({container:t,distanceToEdges:s,dragStartTime:e,axis:vertical,shouldUseTimeDampening:i,getAutoScrollerOptions:o}),l=getScrollOnAxis({container:t,distanceToEdges:s,dragStartTime:e,axis:horizontal,shouldUseTimeDampening:i,getAutoScrollerOptions:o}),c=clean({x:l,y:a});if(isEqual$1(c,origin))return null;const u=adjustForSizeLimits({container:t,subject:r,proposedScroll:c});return u?isEqual$1(u,origin)?null:u:null};const smallestSigned=apply(e=>0===e?0:e>0?1:-1),getOverlap=(()=>{const e=(e,t)=>e<0?e:e>t?e-t:0;return({current:t,max:r,change:n})=>{const i=add$2(t,n),o={x:e(i.x,r.x),y:e(i.y,r.y)};return isEqual$1(o,origin)?null:o}})(),canPartiallyScroll=({max:e,current:t,change:r})=>{const n={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},i=smallestSigned(r),o=getOverlap({max:n,current:t,change:i});return!o||0!==i.x&&0===o.x||0!==i.y&&0===o.y},canScrollWindow=(e,t)=>canPartiallyScroll({current:e.scroll.current,max:e.scroll.max,change:t}),getWindowOverlap=(e,t)=>{if(!canScrollWindow(e,t))return null;const r=e.scroll.max,n=e.scroll.current;return getOverlap({current:n,max:r,change:t})},canScrollDroppable=(e,t)=>{const r=e.frame;return!!r&&canPartiallyScroll({current:r.scroll.current,max:r.scroll.max,change:t})},getDroppableOverlap=(e,t)=>{const r=e.frame;return r&&canScrollDroppable(e,t)?getOverlap({current:r.scroll.current,max:r.scroll.max,change:t}):null};var getWindowScrollChange=({viewport:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const s=getScroll$1({dragStartTime:n,container:e.frame,subject:t,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o});return s&&canScrollWindow(e,s)?s:null},getDroppableScrollChange=({droppable:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const s=e.frame;if(!s)return null;const a=getScroll$1({dragStartTime:n,container:s.pageMarginBox,subject:t,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o});return a&&canScrollDroppable(e,a)?a:null},scroll=({state:e,dragStartTime:t,shouldUseTimeDampening:r,scrollWindow:n,scrollDroppable:i,getAutoScrollerOptions:o})=>{const s=e.current.page.borderBoxCenter,a=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const i=e.viewport,l=getWindowScrollChange({dragStartTime:t,viewport:i,subject:a,center:s,shouldUseTimeDampening:r,getAutoScrollerOptions:o});if(l)return void n(l)}const l=getBestScrollableDroppable({center:s,destination:whatIsDraggedOver(e.impact),droppables:e.dimensions.droppables});if(!l)return;const c=getDroppableScrollChange({dragStartTime:t,droppable:l,subject:a,center:s,shouldUseTimeDampening:r,getAutoScrollerOptions:o});c&&i(l.descriptor.id,c)},createFluidScroller=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r=()=>defaultAutoScrollerOptions})=>{const n=rafSchd(e),i=rafSchd(t);let o=null;const s=e=>{o||invariant(!1,"Cannot fluid scroll if not dragging");const{shouldUseTimeDampening:t,dragStartTime:s}=o;scroll({state:e,scrollWindow:n,scrollDroppable:i,dragStartTime:s,shouldUseTimeDampening:t,getAutoScrollerOptions:r})};return{start:e=>{o&&invariant(!1,"Cannot start auto scrolling when already started");const t=Date.now();let n=!1;const i=()=>{n=!0};scroll({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:i,scrollDroppable:i,getAutoScrollerOptions:r}),o={dragStartTime:t,shouldUseTimeDampening:n},n&&s(e)},stop:()=>{o&&(n.cancel(),i.cancel(),o=null)},scroll:s}},createJumpScroller=({move:e,scrollDroppable:t,scrollWindow:r})=>n=>{const i=n.scrollJumpRequest;if(!i)return;const o=whatIsDraggedOver(n.impact);o||invariant(!1,"Cannot perform a jump scroll when there is no destination");const s=((e,r)=>{if(!canScrollDroppable(e,r))return r;const n=getDroppableOverlap(e,r);if(!n)return t(e.descriptor.id,r),null;const i=subtract(r,n);return t(e.descriptor.id,i),subtract(r,i)})(n.dimensions.droppables[o],i);if(!s)return;const a=n.viewport,l=((e,t,n)=>{if(!e)return n;if(!canScrollWindow(t,n))return n;const i=getWindowOverlap(t,n);if(!i)return r(n),null;const o=subtract(n,i);return r(o),subtract(n,o)})(n.isWindowScrollAllowed,a,s);l&&((t,r)=>{const n=add$2(t.current.client.selection,r);e({client:n})})(n,l)},createAutoScroller=({scrollDroppable:e,scrollWindow:t,move:r,getAutoScrollerOptions:n})=>{const i=createFluidScroller({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:n}),o=createJumpScroller({move:r,scrollWindow:t,scrollDroppable:e});return{scroll:e=>{n().disabled||"DRAGGING"!==e.phase||("FLUID"!==e.movementMode?e.scrollJumpRequest&&o(e):i.scroll(e))},start:i.start,stop:i.stop}};const prefix$2="data-rfd",dragHandle=(()=>{const e=`${prefix$2}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),draggable=(()=>{const e=`${prefix$2}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),droppable=(()=>{const e=`${prefix$2}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),scrollContainer={contextId:`${prefix$2}-scroll-container-context-id`},makeGetSelector=e=>t=>`[${t}="${e}"]`,getStyles=(e,t)=>e.map(e=>{const r=e.styles[t];return r?`${e.selector} { ${r} }`:""}).join(" "),noPointerEvents="pointer-events: none;";var getStyles$1=e=>{const t=makeGetSelector(e),r=(()=>{const e="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ";return{selector:t(dragHandle.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:e,dragging:noPointerEvents,dropAnimating:e}}})(),n=[(()=>{const e=`\n      transition: ${transitions.outOfTheWay};\n    `;return{selector:t(draggable.contextId),styles:{dragging:e,dropAnimating:e,userCancel:e}}})(),r,{selector:t(droppable.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:getStyles(n,"always"),resting:getStyles(n,"resting"),dragging:getStyles(n,"dragging"),dropAnimating:getStyles(n,"dropAnimating"),userCancel:getStyles(n,"userCancel")}};const useIsomorphicLayoutEffect$1="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?reactExports.useLayoutEffect:reactExports.useEffect,getHead=()=>{const e=document.querySelector("head");return e||invariant(!1,"Cannot find the head to append a style to"),e},createStyleEl=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function useStyleMarshal(e,t){const r=useMemo(()=>getStyles$1(e),[e]),n=reactExports.useRef(null),i=reactExports.useRef(null),o=useCallback(memoizeOne$1(e=>{const t=i.current;t||invariant(!1,"Cannot set dynamic style element if it is not set"),t.textContent=e}),[]),s=useCallback(e=>{const t=n.current;t||invariant(!1,"Cannot set dynamic style element if it is not set"),t.textContent=e},[]);useIsomorphicLayoutEffect$1(()=>{(n.current||i.current)&&invariant(!1,"style elements already mounted");const a=createStyleEl(t),l=createStyleEl(t);return n.current=a,i.current=l,a.setAttribute(`${prefix$2}-always`,e),l.setAttribute(`${prefix$2}-dynamic`,e),getHead().appendChild(a),getHead().appendChild(l),s(r.always),o(r.resting),()=>{const e=e=>{const t=e.current;t||invariant(!1,"Cannot unmount ref as it is not set"),getHead().removeChild(t),e.current=null};e(n),e(i)}},[t,s,o,r.always,r.resting,e]);const a=useCallback(()=>o(r.dragging),[o,r.dragging]),l=useCallback(e=>{o("DROP"!==e?r.userCancel:r.dropAnimating)},[o,r.dropAnimating,r.userCancel]),c=useCallback(()=>{i.current&&o(r.resting)},[o,r.resting]);return useMemo(()=>({dragging:a,dropping:l,resting:c}),[a,l,c])}function querySelectorAll(e,t){return Array.from(e.querySelectorAll(t))}var getWindowFromEl=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function isHtmlElement(e){return e instanceof getWindowFromEl(e).HTMLElement}function findDragHandle(e,t){const r=`[${dragHandle.contextId}="${e}"]`,n=querySelectorAll(document,r);if(!n.length)return warning$3(`Unable to find any drag handles in the context "${e}"`),null;const i=n.find(e=>e.getAttribute(dragHandle.draggableId)===t);return i?isHtmlElement(i)?i:(warning$3("drag handle needs to be a HTMLElement"),null):(warning$3(`Unable to find drag handle with id "${t}" as no handle with a matching id was found`),null)}function useFocusMarshal(e){const t=reactExports.useRef({}),r=reactExports.useRef(null),n=reactExports.useRef(null),i=reactExports.useRef(!1),o=useCallback(function(e,r){const n={id:e,focus:r};return t.current[e]=n,function(){const r=t.current;r[e]!==n&&delete r[e]}},[]),s=useCallback(function(t){const r=findDragHandle(e,t);r&&r!==document.activeElement&&r.focus()},[e]),a=useCallback(function(e,t){r.current===e&&(r.current=t)},[]),l=useCallback(function(){n.current||i.current&&(n.current=requestAnimationFrame(()=>{n.current=null;const e=r.current;e&&s(e)}))},[s]),c=useCallback(function(e){r.current=null;const t=document.activeElement;t&&t.getAttribute(dragHandle.draggableId)===e&&(r.current=e)},[]);return useIsomorphicLayoutEffect$1(()=>(i.current=!0,function(){i.current=!1;const e=n.current;e&&cancelAnimationFrame(e)}),[]),useMemo(()=>({register:o,tryRecordFocus:c,tryRestoreFocusRecorded:l,tryShiftRecord:a}),[o,c,l,a])}function createRegistry(){const e={draggables:{},droppables:{}},t=[];function r(e){t.length&&t.forEach(t=>t(e))}function n(t){return e.draggables[t]||null}function i(t){return e.droppables[t]||null}return{draggable:{register:t=>{e.draggables[t.descriptor.id]=t,r({type:"ADDITION",value:t})},update:(t,r)=>{const n=e.draggables[r.descriptor.id];n&&n.uniqueId===t.uniqueId&&(delete e.draggables[r.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:t=>{const i=t.descriptor.id,o=n(i);o&&t.uniqueId===o.uniqueId&&(delete e.draggables[i],e.droppables[t.descriptor.droppableId]&&r({type:"REMOVAL",value:t}))},getById:function(e){const t=n(e);return t||invariant(!1,`Cannot find draggable entry with id [${e}]`),t},findById:n,exists:e=>Boolean(n(e)),getAllByType:t=>Object.values(e.draggables).filter(e=>e.descriptor.type===t)},droppable:{register:t=>{e.droppables[t.descriptor.id]=t},unregister:t=>{const r=i(t.descriptor.id);r&&t.uniqueId===r.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){const t=i(e);return t||invariant(!1,`Cannot find droppable entry with id [${e}]`),t},findById:i,exists:e=>Boolean(i(e)),getAllByType:t=>Object.values(e.droppables).filter(e=>e.descriptor.type===t)},subscribe:function(e){return t.push(e),function(){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}function useRegistry(){const e=useMemo(createRegistry,[]);return reactExports.useEffect(()=>function(){e.clean()},[e]),e}var StoreContext=React.createContext(null),getBodyElement=()=>{const e=document.body;return e||invariant(!1,"Cannot find document.body"),e};const visuallyHidden={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},getId=e=>`rfd-announcement-${e}`;function useAnnouncer(e){const t=useMemo(()=>getId(e),[e]),r=reactExports.useRef(null);return reactExports.useEffect(function(){const e=document.createElement("div");return r.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),_extends(e.style,visuallyHidden),getBodyElement().appendChild(e),function(){setTimeout(function(){const t=getBodyElement();t.contains(e)&&t.removeChild(e),e===r.current&&(r.current=null)})}},[t]),useCallback(e=>{const t=r.current;t?t.textContent=e:warning$3(`\n      A screen reader message was trying to be announced but it was unable to do so.\n      This can occur if you unmount your <DragDropContext /> in your onDragEnd.\n      Consider calling provided.announce() before the unmount so that the instruction will\n      not be lost for users relying on a screen reader.\n\n      Message not passed to screen reader:\n\n      "${e}"\n    `)},[])}const defaults={separator:"::"};function useUniqueId(e,t=defaults){const r=React.useId();return useMemo(()=>`${e}${t.separator}${r}`,[t.separator,e,r])}function getElementId({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function useHiddenTextElement({contextId:e,text:t}){const r=useUniqueId("hidden-text",{separator:"-"}),n=useMemo(()=>getElementId({contextId:e,uniqueId:r}),[r,e]);return reactExports.useEffect(function(){const e=document.createElement("div");return e.id=n,e.textContent=t,e.style.display="none",getBodyElement().appendChild(e),function(){const t=getBodyElement();t.contains(e)&&t.removeChild(e)}},[n,t]),n}var AppContext=React.createContext(null),peerDependencies={react:"^18.0.0 || ^19.0.0"};const semver=/(\d+)\.(\d+)\.(\d+)/,getVersion=e=>{const t=semver.exec(e);return null==t&&invariant(!1,`Unable to parse React version ${e}`),{major:Number(t[1]),minor:Number(t[2]),patch:Number(t[3]),raw:e}},isSatisfied=(e,t)=>t.major>e.major||!(t.major<e.major)&&(t.minor>e.minor||!(t.minor<e.minor)&&t.patch>=e.patch);var checkReactVersion=(e,t)=>{const r=getVersion(e),n=getVersion(t);isSatisfied(r,n)||warning$3(`\n    React version: [${n.raw}]\n    does not satisfy expected peer dependency version: [${r.raw}]\n\n    This can result in run time bugs, and even fatal crashes\n  `)};const suffix="\n  We expect a html5 doctype: <!doctype html>\n  This is to ensure consistent browser layout and measurement\n\n  More information: https://github.com/hello-pangea/dnd/blob/main/docs/guides/doctype.md\n";var checkDoctype=e=>{const t=e.doctype;t?("html"!==t.name.toLowerCase()&&warning$3(`\n      Unexpected <!doctype> found: (${t.name})\n\n      ${suffix}\n    `),""!==t.publicId&&warning$3(`\n      Unexpected <!doctype> publicId found: (${t.publicId})\n      A html5 doctype does not have a publicId\n\n      ${suffix}\n    `)):warning$3(`\n      No <!doctype html> found.\n\n      ${suffix}\n    `)};function useDev(e){e()}function useDevSetupWarning(e,t){useDev(()=>{reactExports.useEffect(()=>{try{e()}catch(t){error$2(`\n          A setup problem was encountered.\n\n          > ${t.message}\n        `)}},t)})}function useStartupValidation(){useDevSetupWarning(()=>{checkReactVersion(peerDependencies.react,React.version),checkDoctype(document)},[])}function usePrevious(e){const t=reactExports.useRef(e);return reactExports.useEffect(()=>{t.current=e}),t}function create(){let e=null;function t(){e||invariant(!1,"Cannot release lock when there is no lock"),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&invariant(!1,"Cannot claim lock as it is already claimed");const r={abandon:t};return e=r,r},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}function isDragging(e){return"IDLE"!==e.phase&&"DROP_ANIMATING"!==e.phase&&e.isDragging}const tab=9,enter=13,escape$1=27,space$3=32,pageUp=33,pageDown=34,end$1=35,home=36,arrowLeft$1=37,arrowUp$1=38,arrowRight$1=39,arrowDown$1=40,preventedKeys={[enter]:!0,[tab]:!0};var preventStandardKeyEvents=e=>{preventedKeys[e.keyCode]&&e.preventDefault()};const supportedEventName=(()=>{const e="visibilitychange";return"undefined"==typeof document?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(e=>`on${e}`in document)||e})(),primaryButton=0,sloppyClickThreshold=5;function isSloppyClickThresholdExceeded(e,t){return Math.abs(t.x-e.x)>=sloppyClickThreshold||Math.abs(t.y-e.y)>=sloppyClickThreshold}const idle$1={type:"IDLE"};function getCaptureBindings({cancel:e,completed:t,getPhase:r,setPhase:n}){return[{eventName:"mousemove",fn:e=>{const{button:t,clientX:i,clientY:o}=e;if(t!==primaryButton)return;const s={x:i,y:o},a=r();if("DRAGGING"===a.type)return e.preventDefault(),void a.actions.move(s);if("PENDING"!==a.type&&invariant(!1,"Cannot be IDLE"),!isSloppyClickThresholdExceeded(a.point,s))return;e.preventDefault();const l=a.actions.fluidLift(s);n({type:"DRAGGING",actions:l})}},{eventName:"mouseup",fn:n=>{const i=r();"DRAGGING"===i.type?(n.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()):e()}},{eventName:"mousedown",fn:t=>{"DRAGGING"===r().type&&t.preventDefault(),e()}},{eventName:"keydown",fn:t=>{if("PENDING"!==r().type)return t.keyCode===escape$1?(t.preventDefault(),void e()):void preventStandardKeyEvents(t);e()}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{"PENDING"===r().type&&e()}},{eventName:"webkitmouseforcedown",fn:t=>{const n=r();"IDLE"===n.type&&invariant(!1,"Unexpected phase"),n.actions.shouldRespectForcePress()?e():t.preventDefault()}},{eventName:supportedEventName,fn:e}]}function useMouseSensor(e){const t=reactExports.useRef(idle$1),r=reactExports.useRef(noop$2$1),n=useMemo(()=>({eventName:"mousedown",fn:function(t){if(t.defaultPrevented)return;if(t.button!==primaryButton)return;if(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)return;const n=e.findClosestDraggableId(t);if(!n)return;const i=e.tryGetLock(n,s,{sourceEvent:t});if(!i)return;t.preventDefault();const o={x:t.clientX,y:t.clientY};r.current(),c(i,o)}}),[e]),i=useMemo(()=>({eventName:"webkitmouseforcewillbegin",fn:t=>{if(t.defaultPrevented)return;const r=e.findClosestDraggableId(t);if(!r)return;const n=e.findOptionsForDraggable(r);n&&(n.shouldRespectForcePress||e.canGetLock(r)&&t.preventDefault())}}),[e]),o=useCallback(function(){r.current=bindEvents(window,[i,n],{passive:!1,capture:!0})},[i,n]),s=useCallback(()=>{"IDLE"!==t.current.type&&(t.current=idle$1,r.current(),o())},[o]),a=useCallback(()=>{const e=t.current;s(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[s]),l=useCallback(function(){const e=getCaptureBindings({cancel:a,completed:s,getPhase:()=>t.current,setPhase:e=>{t.current=e}});r.current=bindEvents(window,e,{capture:!0,passive:!1})},[a,s]),c=useCallback(function(e,r){"IDLE"!==t.current.type&&invariant(!1,"Expected to move from IDLE to PENDING drag"),t.current={type:"PENDING",point:r,actions:e},l()},[l]);useIsomorphicLayoutEffect$1(function(){return o(),function(){r.current()}},[o])}function noop$1$1(){}const scrollJumpKeys={[pageDown]:!0,[pageUp]:!0,[home]:!0,[end$1]:!0};function getDraggingBindings(e,t){function r(){t(),e.cancel()}return[{eventName:"keydown",fn:n=>n.keyCode===escape$1?(n.preventDefault(),void r()):n.keyCode===space$3?(n.preventDefault(),t(),void e.drop()):n.keyCode===arrowDown$1?(n.preventDefault(),void e.moveDown()):n.keyCode===arrowUp$1?(n.preventDefault(),void e.moveUp()):n.keyCode===arrowRight$1?(n.preventDefault(),void e.moveRight()):n.keyCode===arrowLeft$1?(n.preventDefault(),void e.moveLeft()):void(scrollJumpKeys[n.keyCode]?n.preventDefault():preventStandardKeyEvents(n))},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:supportedEventName,fn:r}]}function useKeyboardSensor(e){const t=reactExports.useRef(noop$1$1),r=useMemo(()=>({eventName:"keydown",fn:function(r){if(r.defaultPrevented)return;if(r.keyCode!==space$3)return;const i=e.findClosestDraggableId(r);if(!i)return;const o=e.tryGetLock(i,l,{sourceEvent:r});if(!o)return;r.preventDefault();let s=!0;const a=o.snapLift();function l(){s||invariant(!1,"Cannot stop capturing a keyboard drag when not capturing"),s=!1,t.current(),n()}t.current(),t.current=bindEvents(window,getDraggingBindings(a,l),{capture:!0,passive:!1})}}),[e]),n=useCallback(function(){t.current=bindEvents(window,[r],{passive:!1,capture:!0})},[r]);useIsomorphicLayoutEffect$1(function(){return n(),function(){t.current()}},[n])}const idle={type:"IDLE"},timeForLongPress=120,forcePressThreshold=.15;function getWindowBindings({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:e=>{e.preventDefault()}},{eventName:"keydown",fn:r=>{"DRAGGING"===t().type?(r.keyCode===escape$1&&r.preventDefault(),e()):e()}},{eventName:supportedEventName,fn:e}]}function getHandleBindings({cancel:e,completed:t,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:t=>{const n=r();if("DRAGGING"!==n.type)return void e();n.hasMoved=!0;const{clientX:i,clientY:o}=t.touches[0],s={x:i,y:o};t.preventDefault(),n.actions.move(s)}},{eventName:"touchend",fn:n=>{const i=r();"DRAGGING"===i.type?(n.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()):e()}},{eventName:"touchcancel",fn:t=>{"DRAGGING"===r().type?(t.preventDefault(),e()):e()}},{eventName:"touchforcechange",fn:t=>{const n=r();"IDLE"===n.type&&invariant();const i=t.touches[0];if(!i)return;if(!(i.force>=forcePressThreshold))return;const o=n.actions.shouldRespectForcePress();if("PENDING"!==n.type)return o?n.hasMoved?void t.preventDefault():void e():void t.preventDefault();o&&e()}},{eventName:supportedEventName,fn:e}]}function useTouchSensor(e){const t=reactExports.useRef(idle),r=reactExports.useRef(noop$2$1),n=useCallback(function(){return t.current},[]),i=useCallback(function(e){t.current=e},[]),o=useMemo(()=>({eventName:"touchstart",fn:function(t){if(t.defaultPrevented)return;const n=e.findClosestDraggableId(t);if(!n)return;const i=e.tryGetLock(n,a,{sourceEvent:t});if(!i)return;const o=t.touches[0],{clientX:s,clientY:l}=o,c={x:s,y:l};r.current(),d(i,c)}}),[e]),s=useCallback(function(){r.current=bindEvents(window,[o],{capture:!0,passive:!1})},[o]),a=useCallback(()=>{const e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),i(idle),r.current(),s())},[s,i]),l=useCallback(()=>{const e=t.current;a(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[a]),c=useCallback(function(){const e={capture:!0,passive:!1},t={cancel:l,completed:a,getPhase:n},i=bindEvents(window,getHandleBindings(t),e),o=bindEvents(window,getWindowBindings(t),e);r.current=function(){i(),o()}},[l,n,a]),u=useCallback(function(){const e=n();"PENDING"!==e.type&&invariant(!1,`Cannot start dragging from phase ${e.type}`);const t=e.actions.fluidLift(e.point);i({type:"DRAGGING",actions:t,hasMoved:!1})},[n,i]),d=useCallback(function(e,t){"IDLE"!==n().type&&invariant(!1,"Expected to move from IDLE to PENDING drag");const r=setTimeout(u,timeForLongPress);i({type:"PENDING",point:t,actions:e,longPressTimerId:r}),c()},[c,n,i,u]);useIsomorphicLayoutEffect$1(function(){return s(),function(){r.current();const e=n();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),i(idle))}},[n,s,i]),useIsomorphicLayoutEffect$1(function(){return bindEvents(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}function useValidateSensorHooks(e){useDev(()=>{const t=usePrevious(e);useDevSetupWarning(()=>{t.current.length!==e.length&&invariant(!1,"Cannot change the amount of sensor hooks after mounting")})})}const interactiveTagNames=["input","button","textarea","select","option","optgroup","video","audio"];function isAnInteractiveElement(e,t){if(null==t)return!1;if(interactiveTagNames.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return"true"===r||""===r||t!==e&&isAnInteractiveElement(e,t.parentElement)}function isEventInInteractiveElement(e,t){const r=t.target;return!!isHtmlElement(r)&&isAnInteractiveElement(e,r)}var getBorderBoxCenterPosition=e=>getRect(e.getBoundingClientRect()).center;function isElement(e){return e instanceof getWindowFromEl(e).Element}const supportedMatchesName=(()=>{const e="matches";return"undefined"==typeof document?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(e=>e in Element.prototype)||e})();function closestPonyfill(e,t){return null==e?null:e[supportedMatchesName](t)?e:closestPonyfill(e.parentElement,t)}function closest$2(e,t){return e.closest?e.closest(t):closestPonyfill(e,t)}function getSelector(e){return`[${dragHandle.contextId}="${e}"]`}function findClosestDragHandleFromEvent(e,t){const r=t.target;if(!isElement(r))return warning$3("event.target must be a Element"),null;const n=closest$2(r,getSelector(e));return n?isHtmlElement(n)?n:(warning$3("drag handle must be a HTMLElement"),null):null}function tryGetClosestDraggableIdFromEvent(e,t){const r=findClosestDragHandleFromEvent(e,t);return r?r.getAttribute(dragHandle.draggableId):null}function findDraggable(e,t){const r=`[${draggable.contextId}="${e}"]`,n=querySelectorAll(document,r).find(e=>e.getAttribute(draggable.id)===t);return n?isHtmlElement(n)?n:(warning$3("Draggable element is not a HTMLElement"),null):null}function preventDefault(e){e.preventDefault()}function isActive$1({expected:e,phase:t,isLockActive:r,shouldWarn:n}){return r()?e===t||(n&&warning$3(`\n        Cannot perform action.\n        The actions you used belong to an outdated phase\n\n        Current phase: ${e}\n        You called an action from outdated phase: ${t}\n\n        Tips:\n\n        - Do not use preDragActions actions after calling preDragActions.lift()\n      `),!1):(n&&warning$3("\n        Cannot perform action.\n        The sensor no longer has an action lock.\n\n        Tips:\n\n        - Throw away your action handlers when forceStop() is called\n        - Check actions.isActive() if you really need to\n      "),!1)}function canStart({lockAPI:e,store:t,registry:r,draggableId:n}){if(e.isClaimed())return!1;const i=r.draggable.findById(n);return i?!!i.options.isEnabled&&!!canStartDrag(t.getState(),n):(warning$3(`Unable to find draggable with id: ${n}`),!1)}function tryStart({lockAPI:e,contextId:t,store:r,registry:n,draggableId:i,forceSensorStop:o,sourceEvent:s}){if(!canStart({lockAPI:e,store:r,registry:n,draggableId:i}))return null;const a=n.draggable.getById(i),l=findDraggable(t,a.descriptor.id);if(!l)return warning$3(`Unable to find draggable element with id: ${i}`),null;if(s&&!a.options.canDragInteractiveElements&&isEventInInteractiveElement(l,s))return null;const c=e.claim(o||noop$2$1);let u="PRE_DRAG";function d(){return a.options.shouldRespectForcePress}function p(){return e.isActive(c)}const h=function(e,t){isActive$1({expected:e,phase:u,isLockActive:p,shouldWarn:!0})&&r.dispatch(t())}.bind(null,"DRAGGING");function f(t){function n(){e.release(),u="COMPLETED"}function i(e,i={shouldBlockNextClick:!1}){if(t.cleanup(),i.shouldBlockNextClick){const e=bindEvents(window,[{eventName:"click",fn:preventDefault,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(e)}n(),r.dispatch(drop({reason:e}))}return"PRE_DRAG"!==u&&(n(),invariant(!1,`Cannot lift in phase ${u}`)),r.dispatch(lift$1(t.liftActionArgs)),u="DRAGGING",{isActive:()=>isActive$1({expected:"DRAGGING",phase:u,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:d,drop:e=>i("DROP",e),cancel:e=>i("CANCEL",e),...t.actions}}return{isActive:()=>isActive$1({expected:"PRE_DRAG",phase:u,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:d,fluidLift:function(e){const t=rafSchd(e=>{h(()=>move({client:e}))});return{...f({liftActionArgs:{id:i,clientSelection:e,movementMode:"FLUID"},cleanup:()=>t.cancel(),actions:{move:t}}),move:t}},snapLift:function(){const e={moveUp:()=>h(moveUp),moveRight:()=>h(moveRight),moveDown:()=>h(moveDown),moveLeft:()=>h(moveLeft)};return f({liftActionArgs:{id:i,clientSelection:getBorderBoxCenterPosition(l),movementMode:"SNAP"},cleanup:noop$2$1,actions:e})},abort:function(){isActive$1({expected:"PRE_DRAG",phase:u,isLockActive:p,shouldWarn:!0})&&e.release()}}}const defaultSensors=[useMouseSensor,useKeyboardSensor,useTouchSensor];function useSensorMarshal({contextId:e,store:t,registry:r,customSensors:n,enableDefaultSensors:i}){const o=[...i?defaultSensors:[],...n||[]],s=reactExports.useState(()=>create())[0],a=useCallback(function(e,t){isDragging(e)&&!isDragging(t)&&s.tryAbandon()},[s]);useIsomorphicLayoutEffect$1(function(){let e=t.getState();return t.subscribe(()=>{const r=t.getState();a(e,r),e=r})},[s,t,a]),useIsomorphicLayoutEffect$1(()=>s.tryAbandon,[s.tryAbandon]);const l=useCallback(e=>canStart({lockAPI:s,registry:r,store:t,draggableId:e}),[s,r,t]),c=useCallback((n,i,o)=>tryStart({lockAPI:s,registry:r,contextId:e,store:t,draggableId:n,forceSensorStop:i||null,sourceEvent:o&&o.sourceEvent?o.sourceEvent:null}),[e,s,r,t]),u=useCallback(t=>tryGetClosestDraggableIdFromEvent(e,t),[e]),d=useCallback(e=>{const t=r.draggable.findById(e);return t?t.options:null},[r.draggable]),p=useCallback(function(){s.isClaimed()&&(s.tryAbandon(),"IDLE"!==t.getState().phase&&t.dispatch(flush()))},[s,t]),h=useCallback(()=>s.isClaimed(),[s]),f=useMemo(()=>({canGetLock:l,tryGetLock:c,findClosestDraggableId:u,findOptionsForDraggable:d,tryReleaseLock:p,isLockClaimed:h}),[l,c,u,d,p,h]);useValidateSensorHooks(o);for(let m=0;m<o.length;m++)o[m](f)}const createResponders=e=>({onBeforeCapture:t=>{reactDomExports.flushSync(()=>{e.onBeforeCapture&&e.onBeforeCapture(t)})},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),createAutoScrollerOptions=e=>({...defaultAutoScrollerOptions,...e.autoScrollerOptions,durationDampening:{...defaultAutoScrollerOptions.durationDampening,...e.autoScrollerOptions}});function getStore(e){return e.current||invariant(!1,"Could not find store from lazy ref"),e.current}function App(e){const{contextId:t,setCallbacks:r,sensors:n,nonce:i,dragHandleUsageInstructions:o}=e,s=reactExports.useRef(null);useStartupValidation();const a=usePrevious(e),l=useCallback(()=>createResponders(a.current),[a]),c=useCallback(()=>createAutoScrollerOptions(a.current),[a]),u=useAnnouncer(t),d=useHiddenTextElement({contextId:t,text:o}),p=useStyleMarshal(t,i),h=useCallback(e=>{getStore(s).dispatch(e)},[]),f=useMemo(()=>bindActionCreators$1({publishWhileDragging:publishWhileDragging,updateDroppableScroll:updateDroppableScroll,updateDroppableIsEnabled:updateDroppableIsEnabled,updateDroppableIsCombineEnabled:updateDroppableIsCombineEnabled,collectionStarting:collectionStarting},h),[h]),m=useRegistry(),g=useMemo(()=>createDimensionMarshal(m,f),[m,f]),b=useMemo(()=>createAutoScroller({scrollWindow:scrollWindow,scrollDroppable:g.scrollDroppable,getAutoScrollerOptions:c,...bindActionCreators$1({move:move},h)}),[g.scrollDroppable,h,c]),y=useFocusMarshal(t),T=useMemo(()=>createStore({announce:u,autoScroller:b,dimensionMarshal:g,focusMarshal:y,getResponders:l,styleMarshal:p}),[u,b,g,y,l,p]);s.current&&s.current!==T&&warning$3("unexpected store change"),s.current=T;const E=useCallback(()=>{const e=getStore(s);"IDLE"!==e.getState().phase&&e.dispatch(flush())},[]),O=useCallback(()=>{const e=getStore(s).getState();return"DROP_ANIMATING"===e.phase||"IDLE"!==e.phase&&e.isDragging},[]);r(useMemo(()=>({isDragging:O,tryAbort:E}),[O,E]));const S=useCallback(e=>canStartDrag(getStore(s).getState(),e),[]),x=useCallback(()=>isMovementAllowed(getStore(s).getState()),[]),v=useMemo(()=>({marshal:g,focus:y,contextId:t,canLift:S,isMovementAllowed:x,dragHandleUsageInstructionsId:d,registry:m}),[t,g,d,y,S,x,m]);return useSensorMarshal({contextId:t,store:T,registry:m,customSensors:n||null,enableDefaultSensors:!1!==e.enableDefaultSensors}),reactExports.useEffect(()=>E,[E]),React.createElement(AppContext.Provider,{value:v},React.createElement(Provider_default,{context:StoreContext,store:T},e.children))}function useUniqueContextId(){return React.useId()}function DragDropContext(e){const t=useUniqueContextId(),r=e.dragHandleUsageInstructions||preset.dragHandleUsageInstructions;return React.createElement(ErrorBoundary$1,null,n=>React.createElement(App,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const zIndexOptions={dragging:5e3,dropAnimating:4500},getDraggingTransition=(e,t)=>t?transitions.drop(t.duration):e?transitions.snap:transitions.fluid,getDraggingOpacity=(e,t)=>{if(e)return t?combine.opacity.drop:combine.opacity.combining},getShouldDraggingAnimate=e=>null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode;function getDraggingStyle(e){const t=e.dimension.client,{offset:r,combineWith:n,dropping:i}=e,o=Boolean(n),s=getShouldDraggingAnimate(e),a=Boolean(i),l=a?transforms.drop(r,o):transforms.moveTo(r);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:getDraggingTransition(s,i),transform:l,opacity:getDraggingOpacity(o,a),zIndex:a?zIndexOptions.dropAnimating:zIndexOptions.dragging,pointerEvents:"none"}}function getSecondaryStyle(e){return{transform:transforms.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function getStyle$1(e){return"DRAGGING"===e.type?getDraggingStyle(e):getSecondaryStyle(e)}function getDimension$1(e,t,r=origin){const n=window.getComputedStyle(t),i=t.getBoundingClientRect(),o=calculateBox(i,n),s=withScroll(o,r);return{descriptor:e,placeholder:{client:o,tagName:t.tagName.toLowerCase(),display:n.display},displaceBy:{x:o.marginBox.width,y:o.marginBox.height},client:o,page:s}}function useDraggablePublisher(e){const t=useUniqueId("draggable"),{descriptor:r,registry:n,getDraggableRef:i,canDragInteractiveElements:o,shouldRespectForcePress:s,isEnabled:a}=e,l=useMemo(()=>({canDragInteractiveElements:o,shouldRespectForcePress:s,isEnabled:a}),[o,a,s]),c=useCallback(e=>{const t=i();return t||invariant(!1,"Cannot get dimension when no ref is set"),getDimension$1(r,t,e)},[r,i]),u=useMemo(()=>({uniqueId:t,descriptor:r,options:l,getDimension:c}),[r,c,l,t]),d=reactExports.useRef(u),p=reactExports.useRef(!0);useIsomorphicLayoutEffect$1(()=>(n.draggable.register(d.current),()=>n.draggable.unregister(d.current)),[n.draggable]),useIsomorphicLayoutEffect$1(()=>{if(p.current)return void(p.current=!1);const e=d.current;d.current=u,n.draggable.update(u,e)},[u,n.draggable])}var DroppableContext=React.createContext(null);function checkIsValidInnerRef(e){e&&isHtmlElement(e)||invariant(!1,"\n    provided.innerRef has not been provided with a HTMLElement.\n\n    You can find a guide on using the innerRef callback functions at:\n    https://github.com/hello-pangea/dnd/blob/main/docs/guides/using-inner-ref.md\n  ")}function useValidation$1(e,t,r){useDevSetupWarning(()=>{function n(e){return`Draggable[id: ${e}]: `}const i=e.draggableId;i||invariant(!1,"Draggable requires a draggableId"),"string"!=typeof i&&invariant(!1,`Draggable requires a [string] draggableId.\n      Provided: [type: ${typeof i}] (value: ${i})`),Number.isInteger(e.index)||invariant(!1,`${n(i)} requires an integer index prop`),"DRAGGING"!==e.mapped.type&&(checkIsValidInnerRef(r()),e.isEnabled&&(findDragHandle(t,i)||invariant(!1,`${n(i)} Unable to find drag handle`)))})}function useClonePropValidation(e){useDev(()=>{const t=reactExports.useRef(e);useDevSetupWarning(()=>{e!==t.current&&invariant(!1,"Draggable isClone prop value changed during component life")},[e])})}function useRequiredContext(e){const t=reactExports.useContext(e);return t||invariant(!1,"Could not find required context"),t}function preventHtml5Dnd(e){e.preventDefault()}const Draggable=e=>{const t=reactExports.useRef(null),r=useCallback((e=null)=>{t.current=e},[]),n=useCallback(()=>t.current,[]),{contextId:i,dragHandleUsageInstructionsId:o,registry:s}=useRequiredContext(AppContext),{type:a,droppableId:l}=useRequiredContext(DroppableContext),c=useMemo(()=>({id:e.draggableId,index:e.index,type:a,droppableId:l}),[e.draggableId,e.index,a,l]),{children:u,draggableId:d,isEnabled:p,shouldRespectForcePress:h,canDragInteractiveElements:f,isClone:m,mapped:g,dropAnimationFinished:b}=e;useValidation$1(e,i,n),useClonePropValidation(m),m||useDraggablePublisher(useMemo(()=>({descriptor:c,registry:s,getDraggableRef:n,canDragInteractiveElements:f,shouldRespectForcePress:h,isEnabled:p}),[c,s,n,f,h,p]));const y=useMemo(()=>p?{tabIndex:0,role:"button","aria-describedby":o,"data-rfd-drag-handle-draggable-id":d,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:preventHtml5Dnd}:null,[i,o,d,p]),T=useCallback(e=>{"DRAGGING"===g.type&&g.dropping&&"transform"===e.propertyName&&reactDomExports.flushSync(b)},[b,g]),E=useMemo(()=>{const e=getStyle$1(g),t="DRAGGING"===g.type&&g.dropping?T:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":d,style:e,onTransitionEnd:t},dragHandleProps:y}},[i,y,d,g,T,r]),O=useMemo(()=>({draggableId:c.id,type:c.type,source:{index:c.index,droppableId:c.droppableId}}),[c.droppableId,c.id,c.index,c.type]);return React.createElement(React.Fragment,null,u(E,g.snapshot,O))};var isStrictEqual=(e,t)=>e===t,whatIsDraggedOverFromResult=e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null};const getCombineWithFromResult=e=>e.combine?e.combine.draggableId:null,getCombineWithFromImpact=e=>e.at&&"COMBINE"===e.at.type?e.at.combine.draggableId:null;function getDraggableSelector(){const e=memoizeOne$1((e,t)=>({x:e,y:t})),t=memoizeOne$1((e,t,r=null,n=null,i=null)=>({isDragging:!0,isClone:t,isDropAnimating:Boolean(i),dropAnimation:i,mode:e,draggingOver:r,combineWith:n,combineTargetFor:null})),r=memoizeOne$1((e,r,n,i,o=null,s=null,a=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:o,combineWith:s,mode:r,offset:e,dimension:n,forceShouldAnimate:a,snapshot:t(r,i,o,s,null)}}));return(n,i)=>{if(isDragging(n)){if(n.critical.draggable.id!==i.draggableId)return null;const t=n.current.client.offset,o=n.dimensions.draggables[i.draggableId],s=whatIsDraggedOver(n.impact),a=getCombineWithFromImpact(n.impact),l=n.forceShouldAnimate;return r(e(t.x,t.y),n.movementMode,o,i.isClone,s,a,l)}if("DROP_ANIMATING"===n.phase){const e=n.completed;if(e.result.draggableId!==i.draggableId)return null;const r=i.isClone,o=n.dimensions.draggables[i.draggableId],s=e.result,a=s.mode,l=whatIsDraggedOverFromResult(s),c=getCombineWithFromResult(s),u={duration:n.dropDuration,curve:curves.drop,moveTo:n.newHomeClientOffset,opacity:c?combine.opacity.drop:null,scale:c?combine.scale.drop:null};return{mapped:{type:"DRAGGING",offset:n.newHomeClientOffset,dimension:o,dropping:u,draggingOver:l,combineWith:c,mode:a,forceShouldAnimate:null,snapshot:t(a,r,l,c,u)}}}return null}}function getSecondarySnapshot(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const atRest={mapped:{type:"SECONDARY",offset:origin,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:getSecondarySnapshot(null)}};function getSecondarySelector(){const e=memoizeOne$1((e,t)=>({x:e,y:t})),t=memoizeOne$1(getSecondarySnapshot),r=memoizeOne$1((e,r=null,n)=>({mapped:{type:"SECONDARY",offset:e,combineTargetFor:r,shouldAnimateDisplacement:n,snapshot:t(r)}})),n=e=>e?r(origin,e,!0):null,i=(t,i,o,s)=>{const a=o.displaced.visible[t],l=Boolean(s.inVirtualList&&s.effected[t]),c=tryGetCombine(o),u=c&&c.draggableId===t?i:null;if(!a){if(!l)return n(u);if(o.displaced.invisible[t])return null;const i=negate(s.displacedBy.point),a=e(i.x,i.y);return r(a,u,!0)}if(l)return n(u);const d=o.displacedBy.point,p=e(d.x,d.y);return r(p,u,a.shouldAnimate)};return(e,t)=>{if(isDragging(e))return e.critical.draggable.id===t.draggableId?null:i(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){const r=e.completed;return r.result.draggableId===t.draggableId?null:i(t.draggableId,r.result.draggableId,r.impact,r.afterCritical)}return null}}const makeMapStateToProps$1=()=>{const e=getDraggableSelector(),t=getSecondarySelector();return(r,n)=>e(r,n)||t(r,n)||atRest},mapDispatchToProps$1={dropAnimationFinished:dropAnimationFinished},ConnectedDraggable=connect_default(makeMapStateToProps$1,mapDispatchToProps$1,null,{context:StoreContext,areStatePropsEqual:isStrictEqual})(Draggable);function PrivateDraggable(e){return useRequiredContext(DroppableContext).isUsingCloneFor!==e.draggableId||e.isClone?React.createElement(ConnectedDraggable,e):null}function PublicDraggable(e){const t="boolean"!=typeof e.isDragDisabled||!e.isDragDisabled,r=Boolean(e.disableInteractiveElementBlocking),n=Boolean(e.shouldRespectForcePress);return React.createElement(PrivateDraggable,_extends({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}const isEqual$3=e=>t=>e===t,isScroll=isEqual$3("scroll"),isAuto=isEqual$3("auto"),isVisible=isEqual$3("visible"),isEither=(e,t)=>t(e.overflowX)||t(e.overflowY),isBoth=(e,t)=>t(e.overflowX)&&t(e.overflowY),isElementScrollable=e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return isEither(r,isScroll)||isEither(r,isAuto)},isBodyScrollable=()=>{const e=getBodyElement(),t=document.documentElement;if(t||invariant(),!isElementScrollable(e))return!1;const r=window.getComputedStyle(t),n={overflowX:r.overflowX,overflowY:r.overflowY};return isBoth(n,isVisible)||warning$3("\n    We have detected that your <body> element might be a scroll container.\n    We have found no reliable way of detecting whether the <body> element is a scroll container.\n    Under most circumstances a <body> scroll bar will be on the <html> element (document.documentElement)\n\n    Because we cannot determine if the <body> is a scroll container, and generally it is not one,\n    we will be treating the <body> as *not* a scroll container\n\n    More information: https://github.com/hello-pangea/dnd/blob/main/docs/guides/how-we-detect-scroll-containers.md\n  "),!1},getClosestScrollable=e=>null==e?null:e===document.body?isBodyScrollable()?e:null:e===document.documentElement?null:isElementScrollable(e)?e:getClosestScrollable(e.parentElement);var checkForNestedScrollContainers=e=>{e&&getClosestScrollable(e.parentElement)&&warning$3("\n    Droppable: unsupported nested scroll container detected.\n    A Droppable can only have one scroll parent (which can be itself)\n    Nested scroll containers are currently not supported.\n\n    We hope to support nested scroll containers soon: https://github.com/atlassian/react-beautiful-dnd/issues/131\n  ")},getScroll=e=>({x:e.scrollLeft,y:e.scrollTop});const getIsFixed=e=>!!e&&("fixed"===window.getComputedStyle(e).position||getIsFixed(e.parentElement));var getEnv=e=>({closestScrollable:getClosestScrollable(e),isFixedOnPage:getIsFixed(e)}),getDroppableDimension=({descriptor:e,isEnabled:t,isCombineEnabled:r,isFixedOnPage:n,direction:i,client:o,page:s,closest:a})=>{const l=(()=>{if(!a)return null;const{scrollSize:e,client:t}=a,r=getMaxScroll({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:a.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:a.shouldClipSubject,scroll:{initial:a.scroll,current:a.scroll,max:r,diff:{value:origin,displacement:origin}}}})(),c="vertical"===i?vertical:horizontal;return{descriptor:e,isCombineEnabled:r,isFixedOnPage:n,axis:c,isEnabled:t,client:o,page:s,frame:l,subject:getSubject({page:s,withPlaceholder:null,axis:c,frame:l})}};const getClient=(e,t)=>{const r=getBox(e);if(!t)return r;if(e!==t)return r;const n=r.paddingBox.top-t.scrollTop,i=r.paddingBox.left-t.scrollLeft,o=n+t.scrollHeight,s=i+t.scrollWidth,a=expand({top:n,right:s,bottom:o,left:i},r.border);return createBox({borderBox:a,margin:r.margin,border:r.border,padding:r.padding})};var getDimension=({ref:e,descriptor:t,env:r,windowScroll:n,direction:i,isDropDisabled:o,isCombineEnabled:s,shouldClipSubject:a})=>{const l=r.closestScrollable,c=getClient(e,l),u=withScroll(c,n),d=(()=>{if(!l)return null;const e=getBox(l),t={scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};return{client:e,page:withScroll(e,n),scroll:getScroll(l),scrollSize:t,shouldClipSubject:a}})();return getDroppableDimension({descriptor:t,isEnabled:!o,isCombineEnabled:s,isFixedOnPage:r.isFixedOnPage,direction:i,client:c,page:u,closest:d})};const immediate={passive:!1},delayed={passive:!0};var getListenerOptions=e=>e.shouldPublishImmediately?immediate:delayed;const getClosestScrollableFromDrag=e=>e&&e.env.closestScrollable||null;function useDroppablePublisher(e){const t=reactExports.useRef(null),r=useRequiredContext(AppContext),n=useUniqueId("droppable"),{registry:i,marshal:o}=r,s=usePrevious(e),a=useMemo(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),l=reactExports.useRef(a),c=useMemo(()=>memoizeOne$1((e,r)=>{t.current||invariant(!1,"Can only update scroll when dragging");const n={x:e,y:r};o.updateDroppableScroll(a.id,n)}),[a.id,o]),u=useCallback(()=>{const e=t.current;return e&&e.env.closestScrollable?getScroll(e.env.closestScrollable):origin},[]),d=useCallback(()=>{const e=u();c(e.x,e.y)},[u,c]),p=useMemo(()=>rafSchd(d),[d]),h=useCallback(()=>{const e=t.current,r=getClosestScrollableFromDrag(e);e&&r||invariant(!1,"Could not find scroll options while scrolling"),e.scrollOptions.shouldPublishImmediately?d():p()},[p,d]),f=useCallback((e,n)=>{t.current&&invariant(!1,"Cannot collect a droppable while a drag is occurring");const i=s.current,o=i.getDroppableRef();o||invariant(!1,"Cannot collect without a droppable ref");const l=getEnv(o),c={ref:o,descriptor:a,env:l,scrollOptions:n};t.current=c;const u=getDimension({ref:o,descriptor:a,env:l,windowScroll:e,direction:i.direction,isDropDisabled:i.isDropDisabled,isCombineEnabled:i.isCombineEnabled,shouldClipSubject:!i.ignoreContainerClipping}),d=l.closestScrollable;return d&&(d.setAttribute(scrollContainer.contextId,r.contextId),d.addEventListener("scroll",h,getListenerOptions(c.scrollOptions)),checkForNestedScrollContainers(d)),u},[r.contextId,a,h,s]),m=useCallback(()=>{const e=t.current,r=getClosestScrollableFromDrag(e);return e&&r||invariant(!1,"Can only recollect Droppable client for Droppables that have a scroll container"),getScroll(r)},[]),g=useCallback(()=>{const e=t.current;e||invariant(!1,"Cannot stop drag when no active drag");const r=getClosestScrollableFromDrag(e);t.current=null,r&&(p.cancel(),r.removeAttribute(scrollContainer.contextId),r.removeEventListener("scroll",h,getListenerOptions(e.scrollOptions)))},[h,p]),b=useCallback(e=>{const r=t.current;r||invariant(!1,"Cannot scroll when there is no drag");const n=getClosestScrollableFromDrag(r);n||invariant(!1,"Cannot scroll a droppable with no closest scrollable"),n.scrollTop+=e.y,n.scrollLeft+=e.x},[]),y=useMemo(()=>({getDimensionAndWatchScroll:f,getScrollWhileDragging:m,dragStopped:g,scroll:b}),[g,f,m,b]),T=useMemo(()=>({uniqueId:n,descriptor:a,callbacks:y}),[y,a,n]);useIsomorphicLayoutEffect$1(()=>(l.current=T.descriptor,i.droppable.register(T),()=>{t.current&&(warning$3("Unsupported: changing the droppableId or type of a Droppable during a drag"),g()),i.droppable.unregister(T)}),[y,a,g,T,o,i.droppable]),useIsomorphicLayoutEffect$1(()=>{t.current&&o.updateDroppableIsEnabled(l.current.id,!e.isDropDisabled)},[e.isDropDisabled,o]),useIsomorphicLayoutEffect$1(()=>{t.current&&o.updateDroppableIsCombineEnabled(l.current.id,e.isCombineEnabled)},[e.isCombineEnabled,o])}function noop$5(){}const empty$2={width:0,height:0,margin:noSpacing},getSize$2=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>e||"close"===r?empty$2:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},getStyle$2=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>{const n=getSize$2({isAnimatingOpenOnMount:e,placeholder:t,animate:r});return{display:t.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==r?transitions.placeholder:null}},Placeholder$2=e=>{const t=reactExports.useRef(null),r=useCallback(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:n,onTransitionEnd:i,onClose:o,contextId:s}=e,[a,l]=reactExports.useState("open"===e.animate);reactExports.useEffect(()=>a?"open"!==n?(r(),l(!1),noop$5):t.current?noop$5:(t.current=setTimeout(()=>{t.current=null,l(!1)}),r):noop$5,[n,a,r]);const c=useCallback(e=>{"height"===e.propertyName&&(i(),"close"===n&&o())},[n,o,i]),u=getStyle$2({isAnimatingOpenOnMount:a,animate:e.animate,placeholder:e.placeholder});return React.createElement(e.placeholder.tagName,{style:u,"data-rfd-placeholder-context-id":s,onTransitionEnd:c,ref:e.innerRef})};var Placeholder$1$1=React.memo(Placeholder$2);function isBoolean(e){return"boolean"==typeof e}function runChecks(e,t){t.forEach(t=>t(e))}const shared=[function({props:e}){e.droppableId||invariant(!1,"A Droppable requires a droppableId prop"),"string"!=typeof e.droppableId&&invariant(!1,`A Droppable requires a [string] droppableId. Provided: [${typeof e.droppableId}]`)},function({props:e}){isBoolean(e.isDropDisabled)||invariant(!1,"isDropDisabled must be a boolean"),isBoolean(e.isCombineEnabled)||invariant(!1,"isCombineEnabled must be a boolean"),isBoolean(e.ignoreContainerClipping)||invariant(!1,"ignoreContainerClipping must be a boolean")},function({getDroppableRef:e}){checkIsValidInnerRef(e())}],standard=[function({props:e,getPlaceholderRef:t}){e.placeholder&&(t()||warning$3(`\n      Droppable setup issue [droppableId: "${e.droppableId}"]:\n      DroppableProvided > placeholder could not be found.\n\n      Please be sure to add the {provided.placeholder} React Node as a child of your Droppable.\n      More information: https://github.com/hello-pangea/dnd/blob/main/docs/api/droppable.md\n    `))}],virtual=[function({props:e}){e.renderClone||invariant(!1,"Must provide a clone render function (renderClone) for virtual lists")},function({getPlaceholderRef:e}){e()&&invariant(!1,"Expected virtual list to not have a placeholder")}];function useValidation(e){useDevSetupWarning(()=>{runChecks(e,shared),"standard"===e.props.mode&&runChecks(e,standard),"virtual"===e.props.mode&&runChecks(e,virtual)})}class AnimateInOut extends React.PureComponent{constructor(...e){super(...e),this.state={isVisible:Boolean(this.props.on),data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{"close"===this.state.animate&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const Droppable=e=>{const t=reactExports.useContext(AppContext);t||invariant(!1,"Could not find app context");const{contextId:r,isMovementAllowed:n}=t,i=reactExports.useRef(null),o=reactExports.useRef(null),{children:s,droppableId:a,type:l,mode:c,direction:u,ignoreContainerClipping:d,isDropDisabled:p,isCombineEnabled:h,snapshot:f,useClone:m,updateViewportMaxScroll:g,getContainerForClone:b}=e,y=useCallback(()=>i.current,[]),T=useCallback((e=null)=>{i.current=e},[]),E=useCallback(()=>o.current,[]),O=useCallback((e=null)=>{o.current=e},[]);useValidation({props:e,getDroppableRef:y,getPlaceholderRef:E});const S=useCallback(()=>{n()&&g({maxScroll:getMaxWindowScroll()})},[n,g]);useDroppablePublisher({droppableId:a,type:l,mode:c,direction:u,isDropDisabled:p,isCombineEnabled:h,ignoreContainerClipping:d,getDroppableRef:y});const x=useMemo(()=>React.createElement(AnimateInOut,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:e,data:t,animate:n})=>React.createElement(Placeholder$1$1,{placeholder:t,onClose:e,innerRef:O,animate:n,contextId:r,onTransitionEnd:S})),[r,S,e.placeholder,e.shouldAnimatePlaceholder,O]),v=useMemo(()=>({innerRef:T,placeholder:x,droppableProps:{"data-rfd-droppable-id":a,"data-rfd-droppable-context-id":r}}),[r,a,x,T]),_=m?m.dragging.draggableId:null,A=useMemo(()=>({droppableId:a,type:l,isUsingCloneFor:_}),[a,_,l]);return React.createElement(DroppableContext.Provider,{value:A},s(v,f),function(){if(!m)return null;const{dragging:e,render:t}=m,r=React.createElement(PrivateDraggable,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(r,n)=>t(r,n,e));return ReactDOM.createPortal(r,b())}())};function getBody(){return document.body||invariant(!1,"document.body is not ready"),document.body}const defaultProps={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:getBody},attachDefaultPropsToOwnProps=e=>{let t,r={...e};for(t in defaultProps)void 0===e[t]&&(r={...r,[t]:defaultProps[t]});return r},isMatchingType=(e,t)=>e===t.droppable.type,getDraggable=(e,t)=>t.draggables[e.draggable.id],makeMapStateToProps=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},r=memoizeOne$1(e=>({draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}})),n=memoizeOne$1((n,i,o,s,a,l)=>{const c=a.descriptor.id;if(a.descriptor.droppableId===n){const e=l?{render:l,dragging:r(a.descriptor)}:null,t={isDraggingOver:o,draggingOverWith:o?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:a.placeholder,shouldAnimatePlaceholder:!1,snapshot:t,useClone:e}}if(!i)return t;if(!s)return e;const u={isDraggingOver:o,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:a.placeholder,shouldAnimatePlaceholder:!0,snapshot:u,useClone:null}});return(r,i)=>{const o=attachDefaultPropsToOwnProps(i),s=o.droppableId,a=o.type,l=!o.isDropDisabled,c=o.renderClone;if(isDragging(r)){const e=r.critical;if(!isMatchingType(a,e))return t;const i=getDraggable(e,r.dimensions),o=whatIsDraggedOver(r.impact)===s;return n(s,l,o,o,i,c)}if("DROP_ANIMATING"===r.phase){const e=r.completed;if(!isMatchingType(a,e.critical))return t;const i=getDraggable(e.critical,r.dimensions);return n(s,l,whatIsDraggedOverFromResult(e.result)===s,whatIsDraggedOver(e.impact)===s,i,c)}if("IDLE"===r.phase&&r.completed&&!r.shouldFlush){const n=r.completed;if(!isMatchingType(a,n.critical))return t;const i=whatIsDraggedOver(n.impact)===s,o=Boolean(n.impact.at&&"COMBINE"===n.impact.at.type),l=n.critical.droppable.id===s;return i?o?e:t:l?e:t}return t}},mapDispatchToProps={updateViewportMaxScroll:updateViewportMaxScroll},ConnectedDroppable=connect_default(makeMapStateToProps,mapDispatchToProps,(e,t,r)=>({...attachDefaultPropsToOwnProps(r),...e,...t}),{context:StoreContext,areStatePropsEqual:isStrictEqual})(Droppable);var isObjectExports=requireIsObject();const isObject=getDefaultExportFromCjs(isObjectExports);let windowObject;windowObject="undefined"!=typeof window?window:"undefined"!=typeof self?self:global;let cancelFrame=null,requestFrame=null;const TIMEOUT_DURATION=20,clearTimeoutFn=windowObject.clearTimeout,setTimeoutFn=windowObject.setTimeout,cancelAnimationFrameFn=windowObject.cancelAnimationFrame||windowObject.mozCancelAnimationFrame||windowObject.webkitCancelAnimationFrame,requestAnimationFrameFn=windowObject.requestAnimationFrame||windowObject.mozRequestAnimationFrame||windowObject.webkitRequestAnimationFrame;function createDetectElementResize(e){let t,r,n,i,o,s,a;const l="undefined"!=typeof document&&document.attachEvent;if(!l){s=function(e){const t=e.__resizeTriggers__,r=t.firstElementChild,n=t.lastElementChild,i=r.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,i.style.width=r.offsetWidth+1+"px",i.style.height=r.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight},o=function(e){return e.offsetWidth!==e.__resizeLast__.width||e.offsetHeight!==e.__resizeLast__.height},a=function(e){if(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)return;const t=this;s(this),this.__resizeRAF__&&cancelFrame(this.__resizeRAF__),this.__resizeRAF__=requestFrame(function(){o(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach(function(r){r.call(t,e)}))})};let e=!1,l="";n="animationstart";const c="Webkit Moz O ms".split(" ");let u="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),d="";{const t=document.createElement("fakeelement");if(void 0!==t.style.animationName&&(e=!0),!1===e)for(let r=0;r<c.length;r++)if(void 0!==t.style[c[r]+"AnimationName"]){d=c[r],l="-"+d.toLowerCase()+"-",n=u[r],e=!0;break}}r="resizeanim",t="@"+l+"keyframes "+r+" { from { opacity: 0; } to { opacity: 0; } } ",i=l+"animation: 1ms "+r+"; "}return{addResizeListener:function(o,c){if(l)o.attachEvent("onresize",c);else{if(!o.__resizeTriggers__){const l=o.ownerDocument,c=windowObject.getComputedStyle(o);c&&"static"===c.position&&(o.style.position="relative"),function(r){if(!r.getElementById("detectElementResize")){const n=(t||"")+".resize-triggers { "+(i||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',o=r.head||r.getElementsByTagName("head")[0],s=r.createElement("style");s.id="detectElementResize",s.type="text/css",null!=e&&s.setAttribute("nonce",e),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(r.createTextNode(n)),o.appendChild(s)}}(l),o.__resizeLast__={},o.__resizeListeners__=[],(o.__resizeTriggers__=l.createElement("div")).className="resize-triggers";const u=l.createElement("div");u.className="expand-trigger",u.appendChild(l.createElement("div"));const d=l.createElement("div");d.className="contract-trigger",o.__resizeTriggers__.appendChild(u),o.__resizeTriggers__.appendChild(d),o.appendChild(o.__resizeTriggers__),s(o),o.addEventListener("scroll",a,!0),n&&(o.__resizeTriggers__.__animationListener__=function(e){e.animationName===r&&s(o)},o.__resizeTriggers__.addEventListener(n,o.__resizeTriggers__.__animationListener__))}o.__resizeListeners__.push(c)}},removeResizeListener:function(e,t){if(l)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",a,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(n,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(r){}}}}}null==cancelAnimationFrameFn||null==requestAnimationFrameFn?(cancelFrame=clearTimeoutFn,requestFrame=function(e){return setTimeoutFn(e,TIMEOUT_DURATION)}):(cancelFrame=function([e,t]){cancelAnimationFrameFn(e),clearTimeoutFn(t)},requestFrame=function(e){const t=requestAnimationFrameFn(function(){clearTimeoutFn(r),e()}),r=setTimeoutFn(function(){cancelAnimationFrameFn(t),e()},TIMEOUT_DURATION);return[t,r]});class AutoSizer extends reactExports.Component{constructor(...e){super(...e),this.state={height:this.props.defaultHeight||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._didLogDeprecationWarning=!1,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:e,disableWidth:t,onResize:r}=this.props;if(this._parentNode){const n=window.getComputedStyle(this._parentNode)||{},i=parseFloat(n.paddingLeft||"0"),o=parseFloat(n.paddingRight||"0"),s=parseFloat(n.paddingTop||"0"),a=parseFloat(n.paddingBottom||"0"),l=this._parentNode.getBoundingClientRect(),c=l.height-s-a,u=l.width-i-o;if(!e&&this.state.height!==c||!t&&this.state.width!==u){this.setState({height:c,width:u});const e=()=>{this._didLogDeprecationWarning||(this._didLogDeprecationWarning=!0)};"function"==typeof r&&r({height:c,width:u,get scaledHeight(){return e(),c},get scaledWidth(){return e(),u}})}}},this._setRef=e=>{this._autoSizer=e}}componentDidMount(){const{nonce:e}=this.props,t=this._autoSizer?this._autoSizer.parentNode:null;if(null!=t&&t.ownerDocument&&t.ownerDocument.defaultView&&t instanceof t.ownerDocument.defaultView.HTMLElement){this._parentNode=t;const r=t.ownerDocument.defaultView.ResizeObserver;null!=r?(this._resizeObserver=new r(()=>{this._timeoutId=setTimeout(this._onResize,0)}),this._resizeObserver.observe(t)):(this._detectElementResize=createDetectElementResize(e),this._detectElementResize.addResizeListener(t,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),null!==this._timeoutId&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){const{children:e,defaultHeight:t,defaultWidth:r,disableHeight:n=!1,disableWidth:i=!1,doNotBailOutOnEmptyChildren:o=!1,nonce:s,onResize:a,style:l={},tagName:c="div",...u}=this.props,{height:d,width:p}=this.state,h={overflow:"visible"},f={};let m=!1;return n||(0===d&&(m=!0),h.height=0,f.height=d,f.scaledHeight=d),i||(0===p&&(m=!0),h.width=0,f.width=p,f.scaledWidth=p),o&&(m=!1),reactExports.createElement(c,{ref:this._setRef,style:{...h,...l},...u},!m&&e(f))}}var safeIsNaN=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function isEqual(e,t){return e===t||!(!safeIsNaN(e)||!safeIsNaN(t))}function areInputsEqual(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!isEqual(e[r],t[r]))return!1;return!0}function memoizeOne(e,t){var r;void 0===t&&(t=areInputsEqual);var n,i=[],o=!1;return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return o&&r===this&&t(s,i)||(n=e.apply(this,s),o=!0,r=this,i=s),n}}var hasNativePerformanceNow="object"==typeof performance&&"function"==typeof performance.now,now=hasNativePerformanceNow?function(){return performance.now()}:function(){return Date.now()};function cancelTimeout(e){cancelAnimationFrame(e.id)}function requestTimeout(e,t){var r=now(),n={id:requestAnimationFrame(function i(){now()-r>=t?e.call(null):n.id=requestAnimationFrame(i)})};return n}var size=-1;function getScrollbarSize(e){if(void 0===e&&(e=!1),-1===size||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(t),size=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return size}var cachedRTLResult=null;function getRTLOffsetType(e){if(void 0===e&&(e=!1),null===cachedRTLResult||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var n=document.createElement("div"),i=n.style;return i.width="100px",i.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?cachedRTLResult="positive-descending":(t.scrollLeft=1,cachedRTLResult=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),cachedRTLResult}return cachedRTLResult}var IS_SCROLLING_DEBOUNCE_INTERVAL$1=150,defaultItemKey$1=function(e,t){return e},devWarningsDirection=null,devWarningsTagName$1=null;function createListComponent(e){var t,r=e.getItemOffset,n=e.getEstimatedTotalSize,i=e.getItemSize,o=e.getOffsetForIndexAndAlignment,s=e.getStartIndexForOffset,a=e.getStopIndexForStartIndex,l=e.initInstanceProps,c=e.shouldResetStyleCacheOnItemSizeChange,u=e.validateProps;return(t=function(e){function t(t){var n;return(n=e.call(this,t)||this)._instanceProps=l(n.props,_assertThisInitialized(n)),n._outerRef=void 0,n._resetIsScrollingTimeoutId=null,n.state={instance:_assertThisInitialized(n),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof n.props.initialScrollOffset?n.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},n._callOnItemsRendered=void 0,n._callOnItemsRendered=memoizeOne(function(e,t,r,i){return n.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:r,visibleStopIndex:i})}),n._callOnScroll=void 0,n._callOnScroll=memoizeOne(function(e,t,r){return n.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:r})}),n._getItemStyle=void 0,n._getItemStyle=function(e){var t,o=n.props,s=o.direction,a=o.itemSize,l=o.layout,u=n._getItemStyleCache(c&&a,c&&l,c&&s);if(u.hasOwnProperty(e))t=u[e];else{var d=r(n.props,e,n._instanceProps),p=i(n.props,e,n._instanceProps),h="horizontal"===s||"horizontal"===l,f="rtl"===s,m=h?d:0;u[e]=t={position:"absolute",left:f?void 0:m,right:f?m:void 0,top:h?0:d,height:h?"100%":p,width:h?p:"100%"}}return t},n._getItemStyleCache=void 0,n._getItemStyleCache=memoizeOne(function(e,t,r){return{}}),n._onScrollHorizontal=function(e){var t=e.currentTarget,r=t.clientWidth,i=t.scrollLeft,o=t.scrollWidth;n.setState(function(e){if(e.scrollOffset===i)return null;var t=n.props.direction,s=i;if("rtl"===t)switch(getRTLOffsetType()){case"negative":s=-i;break;case"positive-descending":s=o-r-i}return s=Math.max(0,Math.min(s,o-r)),{isScrolling:!0,scrollDirection:e.scrollOffset<s?"forward":"backward",scrollOffset:s,scrollUpdateWasRequested:!1}},n._resetIsScrollingDebounced)},n._onScrollVertical=function(e){var t=e.currentTarget,r=t.clientHeight,i=t.scrollHeight,o=t.scrollTop;n.setState(function(e){if(e.scrollOffset===o)return null;var t=Math.max(0,Math.min(o,i-r));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}},n._resetIsScrollingDebounced)},n._outerRefSetter=function(e){var t=n.props.outerRef;n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._resetIsScrollingDebounced=function(){null!==n._resetIsScrollingTimeoutId&&cancelTimeout(n._resetIsScrollingTimeoutId),n._resetIsScrollingTimeoutId=requestTimeout(n._resetIsScrolling,IS_SCROLLING_DEBOUNCE_INTERVAL$1)},n._resetIsScrolling=function(){n._resetIsScrollingTimeoutId=null,n.setState({isScrolling:!1},function(){n._getItemStyleCache(-1,null)})},n}_inheritsLoose(t,e),t.getDerivedStateFromProps=function(e,t){return validateSharedProps$1(e,t),u(e),null};var d=t.prototype;return d.scrollTo=function(e){e=Math.max(0,e),this.setState(function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},d.scrollToItem=function(e,t){void 0===t&&(t="auto");var r=this.props,n=r.itemCount,i=r.layout,s=this.state.scrollOffset;e=Math.max(0,Math.min(e,n-1));var a=0;if(this._outerRef){var l=this._outerRef;a="vertical"===i?l.scrollWidth>l.clientWidth?getScrollbarSize():0:l.scrollHeight>l.clientHeight?getScrollbarSize():0}this.scrollTo(o(this.props,e,t,s,this._instanceProps,a))},d.componentDidMount=function(){var e=this.props,t=e.direction,r=e.initialScrollOffset,n=e.layout;if("number"==typeof r&&null!=this._outerRef){var i=this._outerRef;"horizontal"===t||"horizontal"===n?i.scrollLeft=r:i.scrollTop=r}this._callPropsCallbacks()},d.componentDidUpdate=function(){var e=this.props,t=e.direction,r=e.layout,n=this.state,i=n.scrollOffset;if(n.scrollUpdateWasRequested&&null!=this._outerRef){var o=this._outerRef;if("horizontal"===t||"horizontal"===r)if("rtl"===t)switch(getRTLOffsetType()){case"negative":o.scrollLeft=-i;break;case"positive-ascending":o.scrollLeft=i;break;default:var s=o.clientWidth,a=o.scrollWidth;o.scrollLeft=a-s-i}else o.scrollLeft=i;else o.scrollTop=i}this._callPropsCallbacks()},d.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&cancelTimeout(this._resetIsScrollingTimeoutId)},d.render=function(){var e=this.props,t=e.children,r=e.className,i=e.direction,o=e.height,s=e.innerRef,a=e.innerElementType,l=e.innerTagName,c=e.itemCount,u=e.itemData,d=e.itemKey,p=void 0===d?defaultItemKey$1:d,h=e.layout,f=e.outerElementType,m=e.outerTagName,g=e.style,b=e.useIsScrolling,y=e.width,T=this.state.isScrolling,E="horizontal"===i||"horizontal"===h,O=E?this._onScrollHorizontal:this._onScrollVertical,S=this._getRangeToRender(),x=S[0],v=S[1],_=[];if(c>0)for(var A=x;A<=v;A++)_.push(reactExports.createElement(t,{data:u,key:p(A,u),index:A,isScrolling:b?T:void 0,style:this._getItemStyle(A)}));var C=n(this.props,this._instanceProps);return reactExports.createElement(f||m||"div",{className:r,onScroll:O,ref:this._outerRefSetter,style:_extends({position:"relative",height:o,width:y,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:i},g)},reactExports.createElement(a||l||"div",{children:_,ref:s,style:{height:E?"100%":C,pointerEvents:T?"none":void 0,width:E?C:"100%"}}))},d._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],r=e[1],n=e[2],i=e[3];this._callOnItemsRendered(t,r,n,i)}if("function"==typeof this.props.onScroll){var o=this.state,s=o.scrollDirection,a=o.scrollOffset,l=o.scrollUpdateWasRequested;this._callOnScroll(s,a,l)}},d._getRangeToRender=function(){var e=this.props,t=e.itemCount,r=e.overscanCount,n=this.state,i=n.isScrolling,o=n.scrollDirection,l=n.scrollOffset;if(0===t)return[0,0,0,0];var c=s(this.props,l,this._instanceProps),u=a(this.props,c,l,this._instanceProps),d=i&&"backward"!==o?1:Math.max(1,r),p=i&&"forward"!==o?1:Math.max(1,r);return[Math.max(0,c-d),Math.max(0,Math.min(t-1,u+p)),c,u]},t}(reactExports.PureComponent)).defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}"undefined"!=typeof window&&void 0!==window.WeakSet&&(devWarningsDirection=new WeakSet,devWarningsTagName$1=new WeakSet);var validateSharedProps$1=function(e,t){var r=e.children,n=e.direction,i=e.height,o=e.layout,s=e.innerTagName,a=e.outerTagName,l=e.width,c=t.instance;null==s&&null==a||devWarningsTagName$1&&!devWarningsTagName$1.has(c)&&devWarningsTagName$1.add(c);var u="horizontal"===n||"horizontal"===o;switch(n){case"horizontal":case"vertical":devWarningsDirection&&!devWarningsDirection.has(c)&&devWarningsDirection.add(c);break;case"ltr":case"rtl":break;default:throw Error('An invalid "direction" prop has been specified. Value should be either "ltr" or "rtl". "'+n+'" was specified.')}switch(o){case"horizontal":case"vertical":break;default:throw Error('An invalid "layout" prop has been specified. Value should be either "horizontal" or "vertical". "'+o+'" was specified.')}if(null==r)throw Error('An invalid "children" prop has been specified. Value should be a React component. "'+(null===r?"null":typeof r)+'" was specified.');if(u&&"number"!=typeof l)throw Error('An invalid "width" prop has been specified. Horizontal lists must specify a number for width. "'+(null===l?"null":typeof l)+'" was specified.');if(!u&&"number"!=typeof i)throw Error('An invalid "height" prop has been specified. Vertical lists must specify a number for height. "'+(null===i?"null":typeof i)+'" was specified.')},DEFAULT_ESTIMATED_ITEM_SIZE$1=50,getItemMetadata$1=function(e,t,r){var n=e.itemSize,i=r.itemMetadataMap,o=r.lastMeasuredIndex;if(t>o){var s=0;if(o>=0){var a=i[o];s=a.offset+a.size}for(var l=o+1;l<=t;l++){var c=n(l);i[l]={offset:s,size:c},s+=c}r.lastMeasuredIndex=t}return i[t]},findNearestItem$1=function(e,t,r){var n=t.itemMetadataMap,i=t.lastMeasuredIndex;return(i>0?n[i].offset:0)>=r?findNearestItemBinarySearch$1(e,t,i,0,r):findNearestItemExponentialSearch$1(e,t,Math.max(0,i),r)},findNearestItemBinarySearch$1=function(e,t,r,n,i){for(;n<=r;){var o=n+Math.floor((r-n)/2),s=getItemMetadata$1(e,o,t).offset;if(s===i)return o;s<i?n=o+1:s>i&&(r=o-1)}return n>0?n-1:0},findNearestItemExponentialSearch$1=function(e,t,r,n){for(var i=e.itemCount,o=1;r<i&&getItemMetadata$1(e,r,t).offset<n;)r+=o,o*=2;return findNearestItemBinarySearch$1(e,t,Math.min(r,i-1),Math.floor(r/2),n)},getEstimatedTotalSize=function(e,t){var r=e.itemCount,n=t.itemMetadataMap,i=t.estimatedItemSize,o=t.lastMeasuredIndex,s=0;if(o>=r&&(o=r-1),o>=0){var a=n[o];s=a.offset+a.size}return s+(r-o-1)*i},VariableSizeList=createListComponent({getItemOffset:function(e,t,r){return getItemMetadata$1(e,t,r).offset},getItemSize:function(e,t,r){return r.itemMetadataMap[t].size},getEstimatedTotalSize:getEstimatedTotalSize,getOffsetForIndexAndAlignment:function(e,t,r,n,i,o){var s=e.direction,a=e.height,l=e.layout,c=e.width,u="horizontal"===s||"horizontal"===l?c:a,d=getItemMetadata$1(e,t,i),p=getEstimatedTotalSize(e,i),h=Math.max(0,Math.min(p-u,d.offset)),f=Math.max(0,d.offset-u+d.size+o);switch("smart"===r&&(r=n>=f-u&&n<=h+u?"auto":"center"),r){case"start":return h;case"end":return f;case"center":return Math.round(f+(h-f)/2);default:return n>=f&&n<=h?n:n<f?f:h}},getStartIndexForOffset:function(e,t,r){return findNearestItem$1(e,r,t)},getStopIndexForStartIndex:function(e,t,r,n){for(var i=e.direction,o=e.height,s=e.itemCount,a=e.layout,l=e.width,c="horizontal"===i||"horizontal"===a?l:o,u=getItemMetadata$1(e,t,n),d=r+c,p=u.offset+u.size,h=t;h<s-1&&p<d;)h++,p+=getItemMetadata$1(e,h,n).size;return h},initInstanceProps:function(e,t){var r={itemMetadataMap:{},estimatedItemSize:e.estimatedItemSize||DEFAULT_ESTIMATED_ITEM_SIZE$1,lastMeasuredIndex:-1};return t.resetAfterIndex=function(e,n){void 0===n&&(n=!0),r.lastMeasuredIndex=Math.min(r.lastMeasuredIndex,e-1),t._getItemStyleCache(-1),n&&t.forceUpdate()},r},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){var t=e.itemSize;if("function"!=typeof t)throw Error('An invalid "itemSize" prop has been specified. Value should be a function. "'+(null===t?"null":typeof t)+'" was specified.')}});const en$l={"label_clear-button":"Clear"},ru$l={"label_clear-button":""},i18n$h=addComponentKeysets({en:en$l,ru:ru$l},`${NAMESPACE}clear-button`),b$12=block$2("clear-button"),ICON_SIZE=16,mapTextInputSizeToButtonSize=e=>{switch(e){case"s":return"xs";case"m":return"s";case"l":return"m";case"xl":return"l";default:throw new Error(`Unknown text input size "${e}"`)}},ClearButton=e=>{const{size:t,className:r,onClick:n}=e,{t:i}=i18n$h.useTranslation();return jsxRuntimeExports.jsx(Button,{size:t,className:b$12(null,r),onClick:n,onMouseDown:e=>{e.preventDefault()},"aria-label":i("label_clear-button"),children:jsxRuntimeExports.jsx(Icon,{data:Xmark,size:ICON_SIZE})})},CONTROL_ERROR_MESSAGE_QA="control-error-message-qa",CONTROL_ERROR_ICON_QA="control-error-icon-qa",prepareAutoComplete=e=>"boolean"==typeof e?e?"on":"off":e,getInputControlState=e=>"invalid"===e?"error":void 0,errorPropsMapper=e=>{const{error:t,errorMessage:r,errorPlacement:n,validationState:i}=e;let o,s;return"string"==typeof t&&(o=t),r&&(o=r),("invalid"===i||Boolean(t))&&(s="invalid"),{errorMessage:o,errorPlacement:n,validationState:s}},b$11=block$2("outer-additional-content"),OuterAdditionalContent=({errorMessage:e,note:t,noteId:r,errorMessageId:n})=>e||t?jsxRuntimeExports.jsxs("div",{className:b$11(),children:[e&&jsxRuntimeExports.jsx("div",{className:b$11("error"),id:n,"data-qa":CONTROL_ERROR_MESSAGE_QA,children:e}),t&&jsxRuntimeExports.jsx("div",{className:b$11("note"),id:r,children:t})]}):null,b$10=block$2("text-area"),calculateLinesByScrollHeight=e=>{const{height:t,lineHeight:r}=e;return(t-(Number.isNaN(e.paddingTop)?0:e.paddingTop)-(Number.isNaN(e.paddingBottom)?0:e.paddingBottom))/r};function TextAreaControl(e){const{name:t,id:r,tabIndex:n,autoComplete:i,placeholder:o,value:s,defaultValue:a,controlRef:l,controlProps:c,size:u,rows:d,minRows:p=1,maxRows:h,autoFocus:f,disabled:m,readOnly:g,onChange:b,onFocus:y,onBlur:T,onKeyDown:E,onKeyUp:O,onKeyPress:S}=e,x=reactExports.useRef(null),v=useForkRef(l,x),_=Math.max(d||p,1),A=s||x?.current?.value,C=reactExports.useCallback(()=>{const e=x?.current,t=e?.parentElement;if(e&&t&&!d){const r=getComputedStyle(e),n=parseInt(r.getPropertyValue("line-height"),10),i=parseInt(r.getPropertyValue("padding-top"),10),o=parseInt(r.getPropertyValue("padding-bottom"),10),s=(A?.match(/\n/g)||[]).length+1,a=t.style.height;t.style.height=`${t.offsetHeight}px`,e.style.height=`${n+i+o}px`;const l=e.style.overflow;e.style.overflow="hidden";const c=calculateLinesByScrollHeight({height:e.scrollHeight,paddingTop:i,paddingBottom:o,lineHeight:n}),u=Math.max(c,s);e.style.height=h&&h<u?`${h*n+i+o}px`:p&&p>u?`${Math.min(p,h||1/0)*n+i+o}px`:`${e.scrollHeight}px`,e.style.overflow=l,t.style.height=a}},[d,h,p,A]);return useResizeObserver({ref:d?void 0:x,onResize:C}),reactExports.useEffect(()=>{C()},[C,u,s]),jsxRuntimeExports.jsx("textarea",{...c,ref:v,style:{...c.style,height:d?"auto":void 0},className:b$10("control",c.className),name:t,id:r,tabIndex:n,placeholder:o,value:s,defaultValue:a,rows:_,autoFocus:f,autoComplete:i,onChange:b,onFocus:y,onBlur:T,onKeyDown:E,onKeyUp:O,onKeyPress:S,disabled:m??c.disabled,readOnly:g??c.readOnly})}const b$$=block$2("text-area"),TextArea=reactExports.forwardRef(function(e,t){const{view:r="normal",size:n="m",pin:i="round-round",name:o,value:s,defaultValue:a,disabled:l,readOnly:c,hasClear:u=!1,error:d,errorMessage:p,validationState:h,autoComplete:f,id:m,tabIndex:g,style:b,className:y,qa:T,controlProps:E,note:O,onUpdate:S,onChange:x}=e,{errorMessage:v,validationState:_}=errorPropsMapper({error:d,errorMessage:p,validationState:h}),[A,C]=useControlledState(s,a??"",S),w=reactExports.useRef(null),k=useFormResetHandler({initialValue:A,onReset:C}),D=useForkRef(e.controlRef,w,k),[I,R]=reactExports.useState(!1),N=getInputControlState(_),P=useUniqId(),M="invalid"===_&&Boolean(v),$=Boolean(u&&!l&&!c&&A),L=m||P,B=useUniqId(),F=useUniqId(),q=[E?.["aria-describedby"],O?F:void 0,M?B:void 0].filter(Boolean).join(" "),j={id:L,tabIndex:g,name:o,onChange(e){C(e.target.value),x&&x(e)},autoComplete:prepareAutoComplete(f),controlProps:{...E,"aria-describedby":q||void 0,"aria-invalid":"invalid"===_||void 0}};return reactExports.useEffect(()=>{const e=w.current;if(e){const t=e.scrollHeight>e.clientHeight;I!==t&&R(t)}},[A,I]),jsxRuntimeExports.jsxs("span",{ref:t,style:b,className:b$$({view:r,size:n,disabled:l,state:N,pin:"clear"===r?void 0:i,"has-clear":$,"has-scrollbar":I},y),"data-qa":T,children:[jsxRuntimeExports.jsxs("span",{className:b$$("content"),children:[jsxRuntimeExports.jsx(TextAreaControl,{...e,...j,controlRef:D}),$&&jsxRuntimeExports.jsx(ClearButton,{className:b$$("clear",{size:n}),size:mapTextInputSizeToButtonSize(n),onClick:e=>{const t=w.current;if(t){t.focus();const r=Object.create(e);r.target=t,r.currentTarget=t,t.value="",x&&x(r)}C("")}})]}),jsxRuntimeExports.jsx(OuterAdditionalContent,{errorMessage:M?v:null,errorMessageId:B,note:O,noteId:F})]})}),cnPopover=block$2("popover-legacy"),getButtonView=(e,t=!1)=>{switch(e){case"special":return t?"normal-contrast":"flat-contrast";case"announcement":return t?"normal-contrast":"outlined";default:return t?"normal":"flat"}},Buttons=({theme:e,tooltipActionButton:t,tooltipCancelButton:r})=>t||r?jsxRuntimeExports.jsxs("div",{className:cnPopover("tooltip-buttons"),children:[t&&jsxRuntimeExports.jsx(Button,{view:getButtonView(e,!0),width:"max",onClick:t.onClick,className:cnPopover("tooltip-button"),children:t.text}),r&&jsxRuntimeExports.jsx(Button,{view:getButtonView(e,!1),width:"max",onClick:r.onClick,className:cnPopover("tooltip-button"),children:r.text})]}):null,Content$1=({secondary:e,htmlContent:t,content:r,className:n})=>t||r?t?jsxRuntimeExports.jsx("div",{className:cnPopover("tooltip-content",{secondary:e},n),dangerouslySetInnerHTML:{__html:t}}):r?jsxRuntimeExports.jsx("div",{className:cnPopover("tooltip-content",{secondary:e},n),children:r}):null:null,b$_=block$2("link"),Link$1=reactExports.forwardRef(function({view:e="normal",visitable:t=!1,underline:r=!1,href:n,children:i,extraProps:o,qa:s,onClickCapture:a,...l},c){const u=reactExports.useCallback(e=>{eventBroker.publish({componentId:"Link",eventId:"click",domEvent:e}),a&&a(e)},[a]);return jsxRuntimeExports.jsx("a",{...l,...o,ref:c,href:n,rel:"_blank"!==l.target||l.rel?l.rel:"noopener noreferrer",onClickCapture:u,className:b$_({view:e,visitable:t,underline:r},l.className),"data-qa":s,children:i})}),Links=({links:e})=>0===e.length?null:jsxRuntimeExports.jsx("div",{className:cnPopover("tooltip-links"),children:e.map((e,t)=>{const{text:r,href:n,target:i="_blank",onClick:o}=e;return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Link$1,{href:n,target:i,onClick:o,className:cnPopover("tooltip-link"),children:r}),jsxRuntimeExports.jsx("br",{})]},`link-${t}`)})}),Trigger$1=({open:e,openOnHover:t,disabled:r,className:n,openTooltip:i,closeTooltip:o,closedManually:s,onClick:a,children:l})=>{const c=async n=>{r||e&&t||a&&!(await a(n))||(e?(o(),s.current=!0):(i(),s.current=!1))},{onKeyDown:u}=useActionHandlers(c);return"function"==typeof l?jsxRuntimeExports.jsx(reactExports.Fragment,{children:l({onClick:c,onKeyDown:u,open:e})}):jsxRuntimeExports.jsx("div",{className:n,onClick:c,onKeyDown:a?u:void 0,children:l})};var PopoverBehavior,PopoverBehavior2;PopoverBehavior2=PopoverBehavior||(PopoverBehavior={}),PopoverBehavior2.Immediate="immediate",PopoverBehavior2.Delayed="delayed",PopoverBehavior2.DelayedClosing="delayedClosing";const delayByBehavior={[PopoverBehavior.Immediate]:[0,0],[PopoverBehavior.Delayed]:[300,300],[PopoverBehavior.DelayedClosing]:[0,300]},useOpen=({initialOpen:e,disabled:t,autoclosable:r,onOpenChange:n,delayOpening:i,delayClosing:o,behavior:s,shouldBeOpen:a})=>{const l=reactExports.useRef(null),c=reactExports.useRef(null),[u,d]=reactExports.useState(e),p=reactExports.useCallback(()=>{l.current&&(clearTimeout(l.current),l.current=null)},[]),h=reactExports.useCallback(()=>{c.current&&(clearTimeout(c.current),c.current=null)},[]);reactExports.useEffect(()=>()=>{p(),h()},[h,p]);const f=reactExports.useCallback(e=>{d(e),a.current=e,n?.(e)},[n,a]),m=reactExports.useCallback(()=>{p(),f(!0)},[f,p]),g=reactExports.useCallback(()=>{h(),f(!1)},[f,h]);reactExports.useEffect(()=>{t&&g()},[t,g]),useUpdateEffect(()=>{r&&!a.current&&g()},[r,g,a]);const[b,y]=delayByBehavior[s],T=reactExports.useCallback(()=>{l.current=setTimeout(()=>{l.current=null,m()},i??b)},[b,i,m]),E=reactExports.useCallback(()=>{c.current=setTimeout(()=>{c.current=null,g()},o??y)},[g,y,o]);return{isOpen:u,closingTimeout:c,openTooltip:m,openTooltipDelayed:T,unsetOpeningTimeout:p,closeTooltip:g,closeTooltipDelayed:E,unsetClosingTimeout:h}},Popover$2=reactExports.forwardRef(function({initialOpen:e=!1,disabled:t=!1,autoclosable:r=!0,openOnHover:n=!0,delayOpening:i,delayClosing:o,behavior:s=PopoverBehavior.Delayed,placement:a,offset:l={},tooltipOffset:c,tooltipClassName:u,theme:d="info",size:p="s",hasArrow:h=!0,hasClose:f=!1,className:m,children:g,title:b,content:y,htmlContent:T,contentClassName:E,links:O,forceLinksAppearance:S=!1,tooltipActionButton:x,tooltipCancelButton:v,onOpenChange:_,onCloseClick:A,onClick:C,anchorRef:w,anchorElement:k,strategy:D,qa:I,disablePortal:R=!1,tooltipId:N,focusTrap:P,autoFocus:M,restoreFocusRef:$},L){const B=useDirection(),F=reactExports.useRef(null),q=reactExports.useRef(!1),j=reactExports.useRef(e),{isOpen:G,closingTimeout:H,openTooltip:Q,openTooltipDelayed:z,unsetOpeningTimeout:V,closeTooltip:U,closeTooltipDelayed:W,unsetClosingTimeout:Y}=useOpen({initialOpen:e,disabled:t,autoclosable:r,onOpenChange:_,delayOpening:i,delayClosing:o,behavior:s,shouldBeOpen:j}),X=reactExports.useMemo(()=>a||("rtl"===B?["left","bottom"]:["right","bottom"]),[B,a]);reactExports.useImperativeHandle(L,()=>({openTooltip:Q,closeTooltip:U}),[Q,U]);const Z=Boolean(b),K=Boolean(w||k),J=`popover-${N??""}-title-${useUniqId()}`,ee=jsxRuntimeExports.jsx(Popup,{id:N,role:n?"tooltip":"dialog",strategy:D,anchorElement:k,anchorRef:w||F,className:cnPopover("tooltip",{theme:d,size:p,"with-close":f,"force-links-appearance":S},u),open:G,placement:X,hasArrow:h,offset:c,onClose:K?void 0:U,qa:I?`${I}-tooltip`:"",disablePortal:R,initialFocus:M?0:void 0,modal:P,returnFocus:$,"aria-labelledby":b?J:void 0,children:jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[b&&jsxRuntimeExports.jsx("h3",{id:J,className:cnPopover("tooltip-title"),children:b}),jsxRuntimeExports.jsx(Content$1,{secondary:!!Z&&"announcement"!==d,content:y,htmlContent:T,className:E}),O&&jsxRuntimeExports.jsx(Links,{links:O}),jsxRuntimeExports.jsx(Buttons,{theme:d,tooltipActionButton:x,tooltipCancelButton:v}),f&&jsxRuntimeExports.jsx("div",{className:cnPopover("tooltip-close"),children:jsxRuntimeExports.jsx(Button,{size:"s",view:"flat-secondary",onClick:async e=>{U(),A?.(e)},"aria-label":"Close",children:jsxRuntimeExports.jsx(Icon,{data:Xmark,size:16})})})]})});if(K)return ee;const te=()=>{Y(),G||t||q.current?j.current=!0:z()},re=()=>{!r||q.current||H.current?j.current=!1:(V(),W()),q.current=!1};return!l||"number"!=typeof l.top&&"number"!=typeof l.left||warnOnce$1('[Popover] Physical names (top, left) of "offset" property are deprecated. Use logical names (block, inline) instead.'),jsxRuntimeExports.jsxs("div",{ref:F,className:cnPopover({disabled:t},m),onMouseEnter:n?te:void 0,onMouseLeave:n?re:void 0,onFocus:n?te:void 0,onBlur:n?re:void 0,style:{top:l.top,left:l.left,insetBlockStart:l.block,insetInlineStart:l.inline},"data-qa":I,children:[jsxRuntimeExports.jsx(Trigger$1,{closeTooltip:U,openTooltip:Q,open:G,openOnHover:n,className:cnPopover("handler"),disabled:t,onClick:C,closedManually:q,children:g}),ee]})});Popover$2.displayName="Popover";const TabsContext=reactExports.createContext({activeTabId:void 0});TabsContext.displayName="TabsContext";const LabelQa={copyButton:"copy-button",closeButton:"close-button",mainButton:"main-button"},b$Z=block$2("label"),iconSizeMap={xs:12,s:14,m:16},Label$2=reactExports.forwardRef(function(e,t){const{type:r="default",theme:n="normal",size:i="xs",width:o,title:s,icon:a,children:l,onCloseClick:c,className:u,disabled:d,copyText:p,closeButtonLabel:h,copyButtonLabel:f,interactive:m=!1,value:g,onCopy:b,onClick:y,qa:T,loading:E=!1}=e,O=Boolean(""!==l&&reactExports.Children.count(l)>0),S="close"===r&&O,x="copy"===r&&O,v="info"===r,_="function"==typeof y,A=Boolean(x&&p),C=(_||A||v||m)&&!d,w=iconSizeMap[i],k=a&&jsxRuntimeExports.jsx("div",{className:b$Z("addon",{side:O?"start":void 0,type:"icon"}),children:a}),D=O&&jsxRuntimeExports.jsxs("div",{className:b$Z("text"),children:[jsxRuntimeExports.jsx("div",{className:b$Z("content"),children:l}),Boolean(g)&&jsxRuntimeExports.jsxs("div",{className:b$Z("value"),children:[jsxRuntimeExports.jsx("div",{className:b$Z("separator"),children:":"}),jsxRuntimeExports.jsx("div",{className:b$Z("key"),children:g})]})]}),I=e=>{let r;return x?r=jsxRuntimeExports.jsx("button",{type:"button","aria-label":f||void 0,onClick:_?y:void 0,disabled:d,className:b$Z("addon",{side:"end",type:"button",action:_?"click":"copy"}),"data-qa":LabelQa.copyButton,children:jsxRuntimeExports.jsx(ClipboardIcon,{status:e||"pending",size:w})}):v?r=jsxRuntimeExports.jsx("div",{className:b$Z("addon",{side:"end",type:"icon"}),children:jsxRuntimeExports.jsx(Icon,{size:w,data:CircleInfo})}):S&&(r=jsxRuntimeExports.jsx("button",{type:"button",onClick:c,"aria-label":h||void 0,disabled:d,className:b$Z("addon",{side:"end",type:"button",action:"close"}),"data-qa":LabelQa.closeButton,children:jsxRuntimeExports.jsx(Icon,{size:w,data:Xmark})})),jsxRuntimeExports.jsxs("div",{ref:t,className:b$Z({theme:n,size:i,width:o,interactive:C,disabled:d},u),title:s,"data-qa":T,children:[!d&&E&&jsxRuntimeExports.jsx("div",{className:b$Z("animation-container")}),k,_?jsxRuntimeExports.jsx("button",{disabled:d,type:"button",onClick:y,className:b$Z("main-button"),"data-qa":LabelQa.mainButton,children:D}):D,r]})};return A&&p&&!_?jsxRuntimeExports.jsx(CopyToClipboard,{text:p,onCopy:b,timeout:1e3,children:e=>I(e)}):I()}),b$Y=block$2("tabs-legacy");function TabsItem({id:e,className:t,title:r,meta:n,hint:i,icon:o,counter:s,label:a,active:l,disabled:c,hasOverflow:u,extraProps:d,onClick:p,qa:h}){const{activeTabId:f}=reactExports.useContext(TabsContext),m="boolean"==typeof l?l:f===e,g=reactExports.useMemo(()=>void 0!==i?i:"string"==typeof r?r:void 0,[i,r]);return jsxRuntimeExports.jsxs("div",{...d,role:"tab","aria-selected":m,"aria-disabled":!0===c,tabIndex:c?-1:0,className:b$Y("item",{active:m,disabled:c,overflow:Boolean(u)},t),title:g,onClick:()=>{p(e)},onKeyDown:t=>{" "===t.key&&p(e)},"data-qa":h,children:[jsxRuntimeExports.jsxs("div",{className:b$Y("item-content"),children:[o&&jsxRuntimeExports.jsx("div",{className:b$Y("item-icon"),children:o}),jsxRuntimeExports.jsx("div",{className:b$Y("item-title"),children:r||e}),void 0!==s&&jsxRuntimeExports.jsx("div",{className:b$Y("item-counter"),children:s}),a&&jsxRuntimeExports.jsx(Label$2,{className:b$Y("item-label"),theme:a.theme,children:a.content})]}),n&&jsxRuntimeExports.jsx("div",{className:b$Y("item-meta"),children:n})]})}TabsItem.displayName="Tabs.Item";const b$X=block$2("tabs-legacy");var TabsDirection,TabsDirection2;TabsDirection2=TabsDirection||(TabsDirection={}),TabsDirection2.Horizontal="horizontal",TabsDirection2.Vertical="vertical";const getActiveTabId=(e,t,r)=>e||(t||0===r?.length?void 0:r?.[0]?.id),emptyTabsList=[],TabsComponent=reactExports.forwardRef(({direction:e=TabsDirection.Horizontal,size:t="m",activeTab:r,allowNotSelected:n=!1,items:i=emptyTabsList,children:o,className:s,onSelectTab:a,wrapTo:l,qa:c,...u},d)=>{const p=getActiveTabId(r,n,i),h=reactExports.useMemo(()=>({activeTabId:p}),[p]),f=reactExports.useMemo(()=>{const e=e=>{a&&a(e)};return i.map((t,r)=>{const n=jsxRuntimeExports.jsx(TabsItem,{...t,onClick:e},t.id);return l?l(t,n,r):n})},[i,a,l]);return jsxRuntimeExports.jsx("div",{...filterDOMProps(u,{labelable:!0}),role:"tablist",className:b$X({direction:e,size:t},s),"data-qa":c,ref:d,children:jsxRuntimeExports.jsx(TabsContext.Provider,{value:h,children:o||f})})});TabsComponent.displayName="Tabs";const Tabs=Object.assign(TabsComponent,{Item:TabsItem}),b$W=block$2("text-input"),AdditionalContent=reactExports.forwardRef(function({placement:e,children:t,onClick:r},n){return t?jsxRuntimeExports.jsx("div",{ref:n,className:b$W("additional-content",{placement:e}),onClick:r,children:t}):null}),b$V=block$2("text-input");function TextInputControl(e){const{controlProps:t,controlRef:r,type:n,name:i,id:o,tabIndex:s,autoComplete:a,placeholder:l,value:c,defaultValue:u,autoFocus:d,disabled:p,readOnly:h,onChange:f,onFocus:m,onBlur:g,onKeyDown:b,onKeyUp:y,onKeyPress:T}=e;return jsxRuntimeExports.jsx("input",{...t,ref:r,className:b$V("control",{type:"input"},t.className),type:n,name:i,id:o,tabIndex:s,placeholder:l,value:c,defaultValue:u,autoFocus:d,autoComplete:a,onChange:f,onFocus:m,onBlur:g,onKeyDown:b,onKeyUp:y,onKeyPress:T,disabled:p??t.disabled,readOnly:h??t.readOnly})}const b$U=block$2("text-input"),TextInput=reactExports.forwardRef(function(e,t){const{view:r="normal",size:n="m",pin:i="round-round",name:o,value:s,defaultValue:a,label:l,disabled:c,readOnly:u,hasClear:d=!1,error:p,errorMessage:h,errorPlacement:f="outside",validationState:m,autoComplete:g,id:b,tabIndex:y,style:T,className:E,qa:O,controlProps:S,startContent:x,endContent:v,note:_,onUpdate:A,onChange:C}=e,{errorMessage:w,errorPlacement:k,validationState:D}=errorPropsMapper({error:p,errorMessage:h,errorPlacement:f,validationState:m}),[I,R]=useControlledState(s,a??"",A),N=reactExports.useRef(null),P=useFormResetHandler({initialValue:I,onReset:R}),M=useForkRef(e.controlRef,N,P),$=reactExports.useRef(null),L=reactExports.useRef(null),B=getInputControlState(D),F=Boolean(l),q="invalid"===D&&Boolean(w)&&"outside"===k,j="invalid"===D&&Boolean(w)&&"inside"===k,G=Boolean(d&&!c&&!u&&I),H=Boolean(x),Q=Boolean(v),z=F&&!b&&!o&&void 0===g,V=useUniqId(),U=F?b||V:b,W=useElementSize(F?$:null,n),Y=useElementSize(H?L:null,n),X=useUniqId(),Z=useUniqId(),K=[S?.["aria-describedby"],_?Z:void 0,q?X:void 0].filter(Boolean).join(" "),J={...S,style:{...S?.style,...F&&W.width?{paddingInlineStart:`${W.width}px`}:{}},"aria-invalid":"invalid"===D||void 0,"aria-describedby":K||void 0},ee={id:U,tabIndex:y,name:o,onChange(e){R(e.target.value),C&&C(e)},autoComplete:z?"off":prepareAutoComplete(g),controlProps:J},te=e=>{const t=!e.currentTarget.contains(document.activeElement)&&e.currentTarget.contains(e.target),r=Boolean(document.getSelection()?.toString());t&&!r&&N.current?.focus()};return jsxRuntimeExports.jsxs("span",{ref:t,style:T,className:b$U({view:r,size:n,disabled:c,state:B,pin:"clear"===r?void 0:i,"has-clear":G,"has-start-content":H,"has-end-content":Q},E),"data-qa":O,children:[jsxRuntimeExports.jsxs("span",{className:b$U("content"),children:[H&&jsxRuntimeExports.jsx(AdditionalContent,{ref:L,placement:"start",onClick:te,children:x}),F&&jsxRuntimeExports.jsx("label",{ref:$,style:{insetInlineStart:H?Y.width:void 0,maxWidth:`calc(50% - ${Y.width}px)`},className:b$U("label"),title:l,htmlFor:U,children:`${l}`}),jsxRuntimeExports.jsx(TextInputControl,{...e,...ee,controlRef:M}),G&&jsxRuntimeExports.jsx(ClearButton,{size:mapTextInputSizeToButtonSize(n),onClick:e=>{R("");const t=N.current;if(t){const r=Object.create(e);r.target=t,r.currentTarget=t,t.value="",C&&C(r)}},className:b$U("clear",{size:n})}),j&&jsxRuntimeExports.jsx(Popover$2,{content:w,children:jsxRuntimeExports.jsx("span",{"data-qa":CONTROL_ERROR_ICON_QA,children:jsxRuntimeExports.jsx(Icon,{data:TriangleExclamation,className:b$U("error-icon"),size:"s"===n?12:16})})}),Q&&jsxRuntimeExports.jsx(AdditionalContent,{placement:"end",onClick:te,children:v})]}),jsxRuntimeExports.jsx(OuterAdditionalContent,{note:_,errorMessage:q?w:null,noteId:Z,errorMessageId:X})]})}),b$T=block$2("loader");function Loader({size:e="s",className:t,qa:r}){return jsxRuntimeExports.jsxs("div",{className:b$T({size:e},t),"data-qa":r,children:[jsxRuntimeExports.jsx("div",{className:b$T("left")}),jsxRuntimeExports.jsx("div",{className:b$T("center")}),jsxRuntimeExports.jsx("div",{className:b$T("right")})]})}const b$S=block$2("list"),ListLoadingIndicator=e=>{const t=reactExports.useRef(null);return useIntersection({element:t.current,onIntersect:e?.onIntersect}),jsxRuntimeExports.jsx("div",{ref:t,className:b$S("loading-indicator"),children:jsxRuntimeExports.jsx(Loader,{qa:"list-loader"})})},ListQa={ACTIVE_ITEM:"list-active-item"},listNavigationIgnoredKeys=[KeyCode.TAB],b$R=block$2("list"),defaultRenderItem=e=>String(e);function getStyle(e,t){return t?{...e?.draggableProps.style,...t}:e?.draggableProps.style}class ListItem extends reactExports.Component{static publishEvent=eventBroker.withEventPublisher("List");node=null;render(){const{item:e,height:t,style:r,sortable:n,sortHandleAlign:i,itemClassName:o,selected:s,active:a,role:l="listitem",isDragging:c=!1}=this.props,u={height:t,...r,right:void 0};return jsxRuntimeExports.jsxs("div",{role:l,"aria-selected":s,"aria-disabled":e.disabled,"data-qa":a?ListQa.ACTIVE_ITEM:void 0,className:b$R("item",{sortable:n,active:a,selected:s,inactive:e.disabled,"sort-handle-align":i,dragging:c},o),...this.props.provided?.draggableProps,...this.props.provided?.dragHandleProps,style:getStyle(this.props.provided,u),onClick:e.disabled?void 0:this.onClick,onClickCapture:e.disabled?void 0:this.onClickCapture,onMouseEnter:this.onMouseEnter,ref:this.setRef,id:`${this.props.listId}-item-${this.props.itemIndex}`,children:[this.renderSortIcon(),this.renderContent()]})}getNode=()=>this.node;setRef=e=>{this.node=e,this.props.provided?.innerRef(e)};renderSortIcon(){const{sortable:e}=this.props;return e?jsxRuntimeExports.jsx("div",{className:b$R("item-sort-icon"),children:jsxRuntimeExports.jsx(Icon,{data:Grip,size:12})}):null}renderContent(){const{renderItem:e=defaultRenderItem,item:t,active:r,itemIndex:n}=this.props;return jsxRuntimeExports.jsx("div",{className:b$R("item-content"),children:e(t,r,n)})}onClick=e=>{this.props.onClick&&this.props.onClick(this.props.item,this.props.itemIndex,!1,e)};onClickCapture=e=>{ListItem.publishEvent({domEvent:e,eventId:"click"})};onMouseEnter=()=>!this.props.item.disabled&&this.props.onActivate(this.props.itemIndex)}function getRefs(e){return Array.from({length:e}).reduce((e,t,r)=>(e[r]=reactExports.createRef(),e),{})}class SimpleContainer extends reactExports.Component{static getDerivedStateFromProps({itemCount:e},t){return e===Object.keys(t.refsList).length?t:{refsList:getRefs(e)}}node=null;constructor(e){super(e),this.state={refsList:getRefs(e.itemCount)}}render(){const e=reactExports.Children.map(this.props.children,(e,t)=>reactExports.cloneElement(e,{ref:this.state.refsList[t]}));return jsxRuntimeExports.jsx("div",{ref:this.setRef,children:e})}scrollToItem(e){const t=this.state.refsList[e]?.current;if(t&&"function"==typeof t.getNode){const e=t.getNode();e&&(this.props.onScrollToItem?.(e)||e.scrollIntoView?.({block:"nearest"}))}}setRef=e=>{this.node=e,this.props.provided?.innerRef(e)}}const b$Q=block$2("list"),DEFAULT_ITEM_HEIGHT=28,DEFAULT_PAGE_SIZE=10,listDefaultProps={items:[],itemClassName:"",filterable:!0,sortable:!1,virtualized:!0,deactivateOnLeave:!0},reorder=(e,t,r)=>{const n=Array.from(e),[i]=n.splice(t,1);return n.splice(r,0,i),n},ListContainer=reactExports.forwardRef((e,t)=>jsxRuntimeExports.jsx(VariableSizeList,{ref:t,...e,direction:useDirection()}));ListContainer.displayName="ListContainer";class List extends reactExports.Component{static defaultProps=listDefaultProps;static moveListElement(e,t,r){if(t!==r){const[n]=e.splice(t,1);e.splice(r,0,n)}return e}static findNextIndex(e,t,r){const n=e.length;let i=(t+n)%n;for(let o=0;o<n;o+=1){if(e[i]&&!e[i].disabled)return i;i=(i+n+r)%n}}state={items:this.props.items,activeItem:this.props.activeItemIndex,filter:""};refFilter=reactExports.createRef();refContainer=reactExports.createRef();blurTimer=null;loadingItem={value:"__LIST_ITEM_LOADING__",disabled:!1};uniqId=getUniqId();componentDidMount(){this.activateItem(this.props.activeItemIndex,!0)}componentDidUpdate(e,t){if(!isEqual$4(this.props.items,e.items)){const e=this.getFilter();e&&!this.props.onFilterUpdate?this.onUpdateFilterInternal(e):this.setState({items:this.props.items})}this.props.activeItemIndex!==e.activeItemIndex&&this.activateItem(this.props.activeItemIndex),this.props.onChangeActive&&this.state.activeItem!==t.activeItem&&this.props.onChangeActive(this.state.activeItem)}componentWillUnmount(){this.blurTimer=null}render(){const{id:e,emptyPlaceholder:t,virtualized:r,className:n,itemsClassName:i,qa:o,role:s="list"}=this.props,{items:a}=this.state;return jsxRuntimeExports.jsx(MobileContext.Consumer,{children:({mobile:l})=>jsxRuntimeExports.jsxs("div",{className:b$Q({mobile:l},n),"data-qa":o,tabIndex:-1,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:this.onKeyDown,children:[this.renderFilter(),jsxRuntimeExports.jsxs("div",{id:e,className:b$Q("items",{virtualized:r},i),style:this.getItemsStyle(),onMouseLeave:this.onMouseLeave,role:s,children:[this.renderItems(),0===a.length&&Boolean(t)&&jsxRuntimeExports.jsx("div",{className:b$Q("empty-placeholder"),children:t})]})]})})}getItems(){return this.state.items}getItemsWithLoading(){return this.props.sortable?this.getItems():this.props.loading?[...this.state.items,this.loadingItem]:this.getItems()}getActiveItem(){return"number"==typeof this.state.activeItem?this.state.activeItem:null}activateItem(e,t=!0){this.setState({activeItem:e},()=>{"number"==typeof e&&t&&this.scrollToIndex(e)})}onKeyDown=e=>{const{activeItem:t,pageSize:r}=this.state;if(listNavigationIgnoredKeys.includes(e.key))return;const n=e.target instanceof HTMLInputElement;switch(e.key){case KeyCode.ARROW_DOWN:this.handleKeyMove(e,1,-1);break;case KeyCode.ARROW_UP:this.handleKeyMove(e,-1);break;case KeyCode.PAGE_DOWN:this.handleKeyMove(e,r??DEFAULT_PAGE_SIZE);break;case KeyCode.PAGE_UP:this.handleKeyMove(e,-(r??DEFAULT_PAGE_SIZE));break;case KeyCode.HOME:if(n)return;this.handleKeyMove(e,this.state.items.length-(t||0));break;case KeyCode.END:if(n)return;this.handleKeyMove(e,-(t||0)-1);break;case KeyCode.ENTER:"number"==typeof t&&this.props.onItemClick&&this.props.onItemClick(this.state.items[t],t,!0,e);break;default:this.refFilter.current&&this.refFilter.current.focus()}};renderItemContent=(e,t,r)=>{const{onLoadMore:n}=this.props;return isObject(e)&&"value"in e&&e.value===this.loadingItem.value?jsxRuntimeExports.jsx(ListLoadingIndicator,{onIntersect:0===r?void 0:n}):this.props.renderItem?this.props.renderItem(e,t,r):defaultRenderItem(e)};renderItem=({index:e,style:t,height:r,provided:n,isDragging:i})=>{const{sortHandleAlign:o,role:s}=this.props,{items:a,activeItem:l}=this.state,c=this.getItemsWithLoading()[e],u=this.props.sortable&&a.length>1&&!this.getFilter(),d=e===l||e===this.props.activeItemIndex,p=Array.isArray(this.props.selectedItemIndex)?this.props.selectedItemIndex.includes(e):e===this.props.selectedItemIndex;return jsxRuntimeExports.jsx(ListItem,{style:t,height:r,itemIndex:e,item:c,sortable:u,sortHandleAlign:o,renderItem:this.renderItemContent,itemClassName:this.props.itemClassName,active:d,selected:p,onActivate:this.onItemActivate,onClick:this.props.onItemClick,role:"listbox"===s?"option":"listitem",listId:this.props.id??this.uniqId,provided:n,isDragging:i},e)};renderVirtualizedItem=({index:e,style:t})=>jsxRuntimeExports.jsx(PublicDraggable,{draggableId:String(e),index:e,children:r=>this.renderItem({index:e,style:t,provided:r})},`item-key-${e}`);renderFilter(){const{size:e,filterable:t,filter:r=this.state.filter,filterPlaceholder:n,filterClassName:i="",autoFocus:o}=this.props;return t?jsxRuntimeExports.jsx("div",{className:b$Q("filter",i),children:jsxRuntimeExports.jsx(TextInput,{controlRef:this.refFilter,size:e,placeholder:n,value:r,hasClear:!0,onUpdate:this.onFilterUpdate,autoFocus:o})}):null}renderSimpleContainer(){const{sortable:e}=this.props,t=this.getItemsWithLoading();return e?jsxRuntimeExports.jsx(DragDropContext,{onDragStart:this.onSortStart,onDragEnd:this.onSortEnd,children:jsxRuntimeExports.jsx(ConnectedDroppable,{droppableId:"droppable",renderClone:(e,t,r)=>this.renderItem({index:r.source.index,provided:e,isDragging:t.isDragging}),children:e=>jsxRuntimeExports.jsx(SimpleContainer,{ref:this.refContainer,itemCount:t.length,provided:e,onScrollToItem:this.props.onScrollToItem,children:t.map((e,t)=>jsxRuntimeExports.jsx(PublicDraggable,{draggableId:String(t),index:t,children:(e,r)=>this.renderItem({index:t,isDragging:r.isDragging,provided:e,height:this.getItemHeight(t)})},`item-key-${t}`))})})}):jsxRuntimeExports.jsx(SimpleContainer,{itemCount:t.length,ref:this.refContainer,onScrollToItem:this.props.onScrollToItem,children:t.map((e,t)=>this.renderItem({index:t,height:this.getItemHeight(t)}))})}renderVirtualizedContainer(){const e=[...this.getItemsWithLoading()];return this.props.sortable?jsxRuntimeExports.jsx(DragDropContext,{onDragStart:this.onSortStart,onDragEnd:this.onSortEnd,children:jsxRuntimeExports.jsx(ConnectedDroppable,{droppableId:"droppable",mode:"virtual",renderClone:(e,t,r)=>this.renderItem({index:r.source.index,provided:e,isDragging:t.isDragging}),children:t=>jsxRuntimeExports.jsx(AutoSizer,{children:({width:r,height:n})=>jsxRuntimeExports.jsx(ListContainer,{ref:this.refContainer,outerRef:t.innerRef,width:r,height:n,itemSize:this.getVirtualizedItemHeight,itemData:e,itemCount:e.length,overscanCount:10,onItemsRendered:this.onItemsRendered,activeItem:this.state.activeItem,children:this.renderVirtualizedItem})})})}):jsxRuntimeExports.jsx(AutoSizer,{children:({width:t,height:r})=>jsxRuntimeExports.jsx(ListContainer,{ref:this.refContainer,width:t,height:r,itemSize:this.getVirtualizedItemHeight,itemData:e,itemCount:e.length,overscanCount:10,onItemsRendered:this.onItemsRendered,activeItem:this.state.activeItem,children:this.renderItem})})}renderItems(){return this.props.virtualized?this.renderVirtualizedContainer():this.renderSimpleContainer()}filterItem=e=>t=>String(t).includes(e);getFilter(){const{filter:e=this.state.filter}=this.props;return e}getItemsStyle(){let{itemsHeight:e}=this.props;return"function"==typeof e&&(e=e(this.state.items)),e?{height:e}:void 0}scrollToIndex=e=>{const t=this.refContainer.current;t&&t.scrollToItem(e)};deactivate=()=>{this.blurTimer&&(this.blurTimer=null,this.props.deactivateOnLeave&&this.setState({activeItem:void 0}))};handleKeyMove(e,t,r=0){const{activeItem:n=r}=this.state;e.preventDefault();const i=this.getItemsWithLoading();this.activateItem(List.findNextIndex(i,n+t,Math.sign(t)))}handleFocus=()=>{this.blurTimer&&(clearTimeout(this.blurTimer),this.blurTimer=null)};handleBlur=()=>{this.blurTimer||(this.blurTimer=setTimeout(this.deactivate,50))};onUpdateFilterInternal=e=>{const{items:t,filterItem:r=this.filterItem,onFilterEnd:n}=this.props;this.setState({filter:e,items:e?t.filter(r(e)):t},()=>{n&&n({items:this.state.items})})};onFilterUpdate=e=>{this.props.onFilterUpdate?this.props.onFilterUpdate(e):this.onUpdateFilterInternal(e)};onItemsRendered=({visibleStartIndex:e,visibleStopIndex:t})=>{this.setState({pageSize:t-e})};onItemActivate=e=>{this.state.sorting||this.activateItem(e,!1)};onMouseLeave=()=>{this.handleBlur()};onSortStart=()=>{this.setState({sorting:!0})};onSortEnd=e=>{if(!e.destination)return void this.setState({sorting:!1});if(e.source.index===e.destination.index)return void this.setState({sorting:!1});const t=e.source.index,r=e.destination.index;this.props.onSortEnd&&this.props.onSortEnd({oldIndex:t,newIndex:r});const n=reorder(this.getItems(),t,r);this.setState({activeItem:r,items:n,sorting:!1})};getItemHeight=e=>{const{itemHeight:t}=this.props;if("function"==typeof t){const{items:r}=this.state;return t(r[e],e)}return t};getVirtualizedItemHeight=e=>this.getItemHeight(e)||DEFAULT_ITEM_HEIGHT}const sheetBlock=block$2("sheet"),SheetQa={VEIL:"sheet-veil"};class Point{x;y;timeStamp;constructor(e,t){this.x=e,this.y=t,this.timeStamp=Date.now()}}class VelocityTracker{pointsLen;points=[];constructor(e=5){this.pointsLen=e,this.clear()}clear(){this.points=new Array(this.pointsLen)}addMovement({x:e,y:t}){this.points.pop(),this.points.unshift(new Point(e,t))}getYAcceleration(e=1){const t=this.points[0],r=this.points[e];return t&&r?(t.y-r.y)/Math.pow(t.timeStamp-r.timeStamp,2):0}}const TRANSITION_DURATION="0.3s",HIDE_THRESHOLD=50,ACCELERATION_Y_MAX=.08,ACCELERATION_Y_MIN=-.02,DEFAULT_MAX_CONTENT_HEIGHT_FROM_VIEWPORT_COEFFICIENT=.9,WINDOW_RESIZE_TIMEOUT=50;let hashHistory=[];function warnAboutOutOfRange(){warnOnce$1('[Sheet] The value of the "maxContentHeightCoefficient" property must be between 0 and 1')}class SheetContent extends reactExports.Component{static defaultProps={id:"sheet",allowHideOnContentScroll:!0};veilRef=reactExports.createRef();sheetRef=reactExports.createRef();sheetTopRef=reactExports.createRef();sheetMarginBoxRef=reactExports.createRef();sheetScrollContainerRef=reactExports.createRef();velocityTracker=new VelocityTracker;observer=null;resizeWindowTimer=null;state={startScrollTop:0,startY:0,deltaY:0,prevSheetHeight:0,swipeAreaTouched:!1,contentTouched:!1,veilTouched:!1,isAnimating:!1,inWindowResizeScope:!1,delayedResize:!1};componentDidMount(){this.addListeners(),this.show();const e=this.getAvailableContentHeight(this.sheetContentHeight);this.setInitialStyles(e),this.setState({prevSheetHeight:e})}componentDidUpdate(e){const{visible:t,location:r}=this.props;!e.visible&&t&&this.show(),(e.visible&&!t||this.shouldClose(e))&&this.hide(),e.location.pathname!==r.pathname&&(hashHistory=[])}componentWillUnmount(){this.removeListeners()}render(){const{content:e,contentClassName:t,swipeAreaClassName:r,hideTopBar:n,title:i}=this.props,{deltaY:o,swipeAreaTouched:s,contentTouched:a,veilTouched:l}=this.state,c={"with-transition":!o||l},u={"with-transition":c["with-transition"]},d={"without-scroll":o>0&&a||s},p={"always-full-height":this.props.alwaysFullHeight};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{ref:this.veilRef,className:sheetBlock("veil",c),onClick:this.onVeilClick,onTransitionEnd:this.onVeilTransitionEnd,role:"presentation","data-qa":SheetQa.VEIL}),jsxRuntimeExports.jsxs("div",{ref:this.sheetRef,className:sheetBlock("sheet",u),role:"dialog","aria-modal":"true","aria-label":i,children:[!n&&jsxRuntimeExports.jsx("div",{ref:this.sheetTopRef,className:sheetBlock("sheet-top"),children:jsxRuntimeExports.jsx("div",{className:sheetBlock("sheet-top-resizer")})}),jsxRuntimeExports.jsx("div",{className:sheetBlock("sheet-swipe-area",r),onTouchStart:this.onSwipeAreaTouchStart,onTouchMove:this.onSwipeAriaTouchMove,onTouchEnd:this.onSwipeAriaTouchEnd}),jsxRuntimeExports.jsx("div",{ref:this.sheetScrollContainerRef,className:sheetBlock("sheet-scroll-container",d),onTouchStart:this.onContentTouchStart,onTouchMove:this.onContentTouchMove,onTouchEnd:this.onContentTouchEnd,onTransitionEnd:this.onContentTransitionEnd,children:jsxRuntimeExports.jsx("div",{ref:this.sheetMarginBoxRef,className:sheetBlock("sheet-margin-box",p),children:jsxRuntimeExports.jsx("div",{className:sheetBlock("sheet-margin-box-border-compensation"),children:jsxRuntimeExports.jsxs("div",{className:sheetBlock("sheet-content",t),children:[i&&jsxRuntimeExports.jsx("div",{className:sheetBlock("sheet-content-title"),children:i}),e]})})})})]})]})}get veilOpacity(){return this.veilRef.current?.style.opacity||0}get sheetTopHeight(){return this.sheetTopRef.current?.getBoundingClientRect().height||0}get sheetHeight(){return this.sheetRef.current?.getBoundingClientRect().height||0}get sheetScrollTop(){return this.sheetScrollContainerRef.current?.scrollTop||0}get sheetContentHeight(){return this.sheetMarginBoxRef.current?.getBoundingClientRect().height||0}setInitialStyles(e){this.sheetScrollContainerRef.current&&this.sheetMarginBoxRef.current&&(this.sheetScrollContainerRef.current.style.height=`${e}px`)}setStyles=({status:e,deltaHeight:t=0})=>{if(!this.sheetRef.current||!this.veilRef.current)return;const r=this.sheetHeight-t,n="showing"===e?`translate3d(0, -${r}px, 0)`:"translate3d(0, 0, 0)";let i=0;"showing"===e&&(i=0===t?1:r/this.sheetHeight),this.veilRef.current.style.opacity=String(i),this.sheetRef.current.style.transform=n,this.isPrefersReducedMotion&&(this.sheetRef.current.style.opacity=String(i),this.sheetRef.current.style.transform=`translate3d(0, -${r}px, 0)`)};getAvailableContentHeight=e=>{let t=DEFAULT_MAX_CONTENT_HEIGHT_FROM_VIEWPORT_COEFFICIENT;"number"==typeof this.props.maxContentHeightCoefficient&&this.props.maxContentHeightCoefficient>=0&&this.props.maxContentHeightCoefficient<=1?t=this.props.maxContentHeightCoefficient:"number"==typeof this.props.maxContentHeightCoefficient&&warnAboutOutOfRange();const r=window.innerHeight*t-this.sheetTopHeight;return this.props.alwaysFullHeight||e>=r?r:e};show=()=>{this.setState({isAnimating:!0},()=>{this.setStyles({status:"showing"}),this.setHash()})};hide=()=>{this.setState({isAnimating:!0},()=>{this.setStyles({status:"hiding"}),this.removeHash()})};onSwipeAreaTouchStart=e=>{this.velocityTracker.clear(),this.setState({startY:e.nativeEvent.touches[0].clientY,swipeAreaTouched:!0})};onContentTouchStart=e=>{this.props.allowHideOnContentScroll&&!this.state.swipeAreaTouched&&(this.velocityTracker.clear(),this.setState({startY:e.nativeEvent.touches[0].clientY,startScrollTop:this.sheetScrollTop,contentTouched:!0}))};onSwipeAriaTouchMove=e=>{const t=e.nativeEvent.touches[0].clientY-this.state.startY;this.velocityTracker.addMovement({x:e.nativeEvent.touches[0].clientX,y:e.nativeEvent.touches[0].clientY}),this.setState({deltaY:t}),t<=0||this.setStyles({status:"showing",deltaHeight:t})};onContentTouchMove=e=>{if(!this.props.allowHideOnContentScroll)return;if(!this.state.startY)return void this.onContentTouchStart(e);const{startScrollTop:t,swipeAreaTouched:r}=this.state;if(r||this.sheetScrollTop>0||t>0&&t!==this.sheetScrollTop)return;const n=e.nativeEvent.touches[0].clientY-this.state.startY;this.velocityTracker.addMovement({x:e.nativeEvent.touches[0].clientX,y:e.nativeEvent.touches[0].clientY}),n<=0?this.setState({deltaY:0}):(this.setState({deltaY:n}),this.setStyles({status:"showing",deltaHeight:n}))};onTouchEndAction=e=>{const t=this.velocityTracker.getYAcceleration();this.sheetHeight<=e?this.props.hideSheet():e>HIDE_THRESHOLD&&t<=ACCELERATION_Y_MAX&&t>=ACCELERATION_Y_MIN||t>ACCELERATION_Y_MAX?this.hide():0!==e&&this.show()};onSwipeAriaTouchEnd=()=>{const{deltaY:e}=this.state;this.onTouchEndAction(e),this.setState({startY:0,deltaY:0,swipeAreaTouched:!1})};onContentTouchEnd=()=>{const{deltaY:e,swipeAreaTouched:t}=this.state;this.props.allowHideOnContentScroll&&!t&&(this.onTouchEndAction(e),this.setState({startY:0,deltaY:0,contentTouched:!1}))};onVeilClick=()=>{this.state.isAnimating||(this.setState({veilTouched:!0}),this.hide())};onVeilTransitionEnd=()=>{this.setState({isAnimating:!1}),"0"!==this.veilOpacity?this.state.delayedResize&&(this.onResizeWindow(),this.setState({delayedResize:!1})):this.props.hideSheet()};onContentTransitionEnd=e=>{"height"===e.propertyName&&this.sheetScrollContainerRef.current&&(this.sheetScrollContainerRef.current.style.transition="none")};onResizeWindow=()=>{this.state.isAnimating?this.setState({delayedResize:!0}):(this.setState({inWindowResizeScope:!0}),this.resizeWindowTimer&&window.clearTimeout(this.resizeWindowTimer),this.resizeWindowTimer=window.setTimeout(()=>{this.onResize()},WINDOW_RESIZE_TIMEOUT))};onResize=()=>{if(!this.sheetRef.current||!this.sheetScrollContainerRef.current)return;const e=this.sheetContentHeight;if(e===this.state.prevSheetHeight&&!this.state.inWindowResizeScope)return;const t=this.getAvailableContentHeight(e);this.sheetScrollContainerRef.current.style.transition=this.state.prevSheetHeight>e?`height 0s ease ${TRANSITION_DURATION}`:"none",this.sheetScrollContainerRef.current.style.height=`${t}px`,this.sheetRef.current.style.transform=`translate3d(0, -${t+this.sheetTopHeight}px, 0)`,this.setState({prevSheetHeight:e,inWindowResizeScope:!1})};addListeners(){window.addEventListener("resize",this.onResizeWindow),this.sheetMarginBoxRef.current&&(this.observer=new ResizeObserver(()=>{this.state.inWindowResizeScope||this.onResize()}),this.observer.observe(this.sheetMarginBoxRef.current))}removeListeners(){window.removeEventListener("resize",this.onResizeWindow),this.observer&&this.observer.disconnect()}setHash(){const{id:e,platform:t,location:r,history:n}=this.props;if(t===Platform.BROWSER)return;const i={...r,hash:e};switch(t){case Platform.IOS:r.hash&&hashHistory.push(r.hash),n.replace(i);break;case Platform.ANDROID:n.push(i)}}removeHash(){const{id:e,platform:t,location:r,history:n}=this.props;if(t!==Platform.BROWSER&&r.hash===`#${e}`)switch(t){case Platform.IOS:n.replace({...r,hash:hashHistory.pop()??""});break;case Platform.ANDROID:n.goBack()}}shouldClose(e){const{id:t,platform:r,location:n,history:i}=this.props;return r!==Platform.BROWSER&&"POP"===i.action&&e.location.hash!==n.hash&&n.hash!==`#${t}`}get isPrefersReducedMotion(){return Boolean(window?.matchMedia("(prefers-reduced-motion: reduce)").matches)}}function withRouterWrapper(e){const t=t=>{const{useHistory:r,useLocation:n,...i}=t;return jsxRuntimeExports.jsx(e,{...i,history:r(),location:n()})},r=e.displayName||e.name||"Component";return t.displayName=`withRouterWrapper(${r})`,t}const SheetContentContainer=withMobile(withRouterWrapper(SheetContent)),Sheet=({children:e,onClose:t,visible:r,id:n,title:i,className:o,contentClassName:s,swipeAreaClassName:a,allowHideOnContentScroll:l,hideTopBar:c,maxContentHeightCoefficient:u,alwaysFullHeight:d,container:p,disablePortal:h,qa:f})=>{const[m,g]=reactExports.useState(r),[b,y]=reactExports.useState(r);return!b&&r&&g(!0),r!==b&&y(r),m?jsxRuntimeExports.jsx(Portal$2,{container:p,disablePortal:h,children:jsxRuntimeExports.jsx(FloatingOverlay,{"data-qa":f,className:sheetBlock(null,o),lockScroll:m,style:{overflow:void 0},children:jsxRuntimeExports.jsx(SheetContentContainer,{id:n,content:e,contentClassName:s,swipeAreaClassName:a,title:i,visible:r,allowHideOnContentScroll:l,hideTopBar:c,hideSheet:()=>{t&&t(),g(!1)},maxContentHeightCoefficient:u,alwaysFullHeight:d})})}):null},b$P=block$2("select-empty-placeholder"),EmptyOptions=({renderEmptyOptions:e,filter:t})=>jsxRuntimeExports.jsx("div",{className:b$P({empty:!e}),children:e?.({filter:t})}),selectBlock=block$2("select"),selectControlBlock=block$2("select-control"),selectControlButtonBlock=block$2("select-control__button"),selectListBlock=block$2("select-list"),selectClearBlock=block$2("select-clear"),SIZE_TO_ITEM_HEIGHT={s:28,m:28,l:32,xl:36},MOBILE_ITEM_HEIGHT=32,GROUP_ITEM_MARGIN_TOP=5,BORDER_WIDTH=1,POPUP_MIN_WIDTH_IN_VIRTUALIZE_CASE=100,QUICK_SEARCH_TIMEOUT=2e3,DEFAULT_VIRTUALIZATION_THRESHOLD=50,SelectQa={LIST:"select-list",POPUP:"select-popup",SHEET:"select-sheet",CLEAR:"select-clear",FILTER_INPUT:"select-filter-input"},FLATTEN_KEY=Symbol("flatten"),label_clear$1="Clear",label_filter$1="Filter",en$k={label_clear:label_clear$1,"label_show-error-info":"Show popup with error info",label_filter:label_filter$1},label_clear="",label_filter="",ru$k={label_clear:label_clear,"label_show-error-info":"     ",label_filter:label_filter},COMPONENT$1="Select",i18n$g=addComponentKeysets({en:en$k,ru:ru$k},COMPONENT$1),SelectClear=e=>{const{size:t,onClick:r,onMouseEnter:n,onMouseLeave:i,renderIcon:o}=e,{t:s}=i18n$g.useTranslation(),a=o?o():jsxRuntimeExports.jsx(Icon,{className:selectClearBlock("clear"),data:Xmark});return jsxRuntimeExports.jsx("button",{className:selectClearBlock({size:t}),"aria-label":s("label_clear"),onClick:r,onMouseEnter:n,onMouseLeave:i,"data-qa":SelectQa.CLEAR,type:"button",children:a})};SelectClear.displayName="SelectClear";const b$O=block$2("select-counter");function SelectCounter({count:e,size:t,disabled:r}){return jsxRuntimeExports.jsx("div",{className:b$O({size:t}),children:jsxRuntimeExports.jsx(Text$3,{variant:"xl"===t?"body-2":"body-1",color:r?"hint":"primary",className:b$O("text"),children:e})})}const SelectControl=reactExports.forwardRef((e,t)=>{const{toggleOpen:r,clearValue:n,onKeyDown:i,renderControl:o,view:s,size:a,pin:l,selectedOptionsContent:c,className:u,qa:d,label:p,placeholder:h,isErrorVisible:f,errorMessage:m,open:g,disabled:b,value:y,hasClear:T,popupId:E,selectId:O,activeIndex:S,renderCounter:x,hasCounter:v,title:_}=e,A=Boolean(c),C=Boolean(h&&!A),w=Array.isArray(y)&&y.filter(Boolean).length>0,k=useUniqId(),[D,I]=reactExports.useState(!1),R={open:g,size:a,pin:l,disabled:b,error:f,"has-clear":T,"no-active":D,"has-value":w},N={open:g,size:a,view:s,pin:l,disabled:b,error:f},P=reactExports.useCallback(e=>{e&&e.currentTarget!==document.activeElement&&"focus"in e.currentTarget&&e.currentTarget.focus(),r()},[r]),M=reactExports.useCallback(()=>{I(!0)},[]),$=reactExports.useCallback(()=>{I(!1)},[]),L=reactExports.useCallback(()=>{I(!1),n()},[n]),B=()=>{if(!v)return null;const e=y.length,t=jsxRuntimeExports.jsx(SelectCounter,{count:e,size:a,disabled:b});return x?x(t,{count:e,size:a,disabled:b}):t},F=e=>{const t=0===y.length;return!T||t||b?null:jsxRuntimeExports.jsx(SelectClear,{size:a,onClick:L,onMouseEnter:M,onMouseLeave:$,renderIcon:e.renderIcon})},q={...filterDOMProps(e,{labelable:!0}),id:O,role:"combobox","aria-controls":g?E:void 0,"aria-haspopup":"listbox","aria-expanded":g,"aria-activedescendant":void 0===S?void 0:`${E}-item-${S}`,onClick:P,onKeyDown:i,disabled:b},{t:j}=i18n$g.useTranslation();return o?o({onClear:n,renderClear:F,renderCounter:B,ref:t,open:g,disabled:b,triggerProps:q},{value:y}):jsxRuntimeExports.jsx(reactExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:selectControlBlock(R),role:"group",children:[jsxRuntimeExports.jsxs("button",{ref:t,className:selectControlButtonBlock(N,u),type:"button","data-qa":d,title:_,tabIndex:0,...q,children:[p&&jsxRuntimeExports.jsx("span",{className:selectControlBlock("label"),children:p}),C&&jsxRuntimeExports.jsx("span",{className:selectControlBlock("placeholder"),children:h}),A&&jsxRuntimeExports.jsx("span",{className:selectControlBlock("option-text"),children:c})]}),B(),F({}),m&&jsxRuntimeExports.jsx(Popover$2,{content:m,tooltipId:k,children:jsxRuntimeExports.jsx("button",{"aria-label":j("label_show-error-info"),"aria-describedby":k,type:"button",className:selectControlBlock("error-icon"),children:jsxRuntimeExports.jsx(Icon,{data:TriangleExclamation,size:"s"===a?12:16})})}),jsxRuntimeExports.jsx(Icon,{className:selectControlBlock("chevron-icon",{disabled:b}),data:ChevronDown,"aria-hidden":"true"})]})})});SelectControl.displayName="SelectControl";const b$N=block$2("select-filter"),style={padding:"4px 4px 0"},SelectFilter=reactExports.forwardRef((e,t)=>{const{onChange:r,onKeyDown:n,renderFilter:i,size:o,value:s,placeholder:a,popupId:l,activeIndex:c}=e,u=reactExports.useRef(null);reactExports.useImperativeHandle(t,()=>({focus:()=>u.current?.focus({preventScroll:!0})}),[]);const{t:d}=i18n$g.useTranslation(),p={value:s,placeholder:a,size:1,onKeyDown:n,onChange:e=>{r(e.target.value)},"aria-label":d("label_filter"),"aria-controls":l,"aria-activedescendant":void 0===c?void 0:`${l}-item-${c}`};return i?i({onChange:r,onKeyDown:n,value:s,ref:u,style:style,inputProps:p}):jsxRuntimeExports.jsx("div",{className:b$N(),style:style,children:jsxRuntimeExports.jsx(TextInput,{controlRef:u,controlProps:{className:b$N("input"),size:1,"aria-label":p["aria-label"],"aria-controls":p["aria-controls"],"aria-activedescendant":p["aria-activedescendant"]},size:o,value:s,placeholder:a,onUpdate:r,onKeyDown:n,qa:SelectQa.FILTER_INPUT})})});SelectFilter.displayName="SelectFilter";const isSelectGroupTitle=e=>Boolean(e&&"label"in e),getFlattenOptions=e=>{const t=e.reduce((e,t)=>("label"in t?(e.push({label:t.label,disabled:!0,data:t.data}),e.push(...t.options||[])):e.push(t),e),[]);return Object.defineProperty(t,FLATTEN_KEY,{enumerable:!1,value:{}}),t},getPopupItemHeight=e=>{const{getOptionHeight:t,getOptionGroupHeight:r,size:n,option:i,index:o,mobile:s}=e;let a=s?MOBILE_ITEM_HEIGHT:SIZE_TO_ITEM_HEIGHT[n];if(isSelectGroupTitle(i)){const e=0===o?0:GROUP_ITEM_MARGIN_TOP;return a=""===i.label?0:a,r?r(i,o):a+e}return t?t(i,o):a},getOptionsHeight=e=>{const{getOptionHeight:t,getOptionGroupHeight:r,size:n,options:i,mobile:o}=e;return i.reduce((e,i,s)=>e+getPopupItemHeight({getOptionHeight:t,getOptionGroupHeight:r,size:n,option:i,index:s,mobile:o}),0)},getOptionText=e=>"string"==typeof e.content?e.content:"string"==typeof e.children?e.children:e.text?e.text:e.value,getSelectedOptionsContent=(e,t,r)=>{if(0===t.length)return null;const n=e.filter(e=>!isSelectGroupTitle(e)),i=new Map(n.map(e=>[e.value,e])),o=t.map(e=>i.get(e)||{value:e});return r?o.map((e,t)=>jsxRuntimeExports.jsx(reactExports.Fragment,{children:r(e,t)},e.value)):o.map(e=>getOptionText(e)).join(", ")},getTypedChildrenArray=e=>reactExports.Children.toArray(e),getOptionsFromOptgroupChildren=e=>reactExports.Children.toArray(e).reduce((e,{props:t})=>("value"in t&&e.push(t),e),[]),getOptionsFromChildren=e=>getTypedChildrenArray(e).reduce((e,{props:t})=>{if("label"in t){const r=t.options||getOptionsFromOptgroupChildren(t.children);e.push({options:r,label:t.label})}return"value"in t&&e.push({...t}),e},[]),getNextQuickSearch=(e,t)=>{const r=1===e.length;let n="";return e===KeyCode.BACKSPACE&&t.length?n=t.slice(0,t.length-1):r&&(n=(t+e).trim()),n},getEscapedRegExp=e=>new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"i"),findItemIndexByQuickSearch=(e,t)=>t?t.findIndex(t=>{if(isSelectGroupTitle(t))return!1;if(t.disabled)return!1;const r=getOptionText(t);return getEscapedRegExp(e).test(r)}):-1,getListItems=e=>e?.current?.getItems()||[],getActiveItem=e=>{const t=getListItems(e),r=e?.current?.getActiveItem();return"number"==typeof r?t[r]:void 0},isOptionMatchedByFilter=(e,t)=>{const r=getOptionText(e).toLocaleLowerCase(),n=t.toLocaleLowerCase();return-1!==r.indexOf(n)},getFilteredFlattenOptions=e=>{const{options:t,filter:r,filterOption:n}=e,i=t.filter(e=>!!isSelectGroupTitle(e)||(n?n(e,r):isOptionMatchedByFilter(e,r)));return i.reduce((e,t,r)=>{const n=isSelectGroupTitle(t),o=isSelectGroupTitle(e[e.length-1]),s=r===i.length-1;return n&&o&&e.pop(),(!n||n&&!s)&&e.push(t),e},[])};function scrollToItem(e){const t=e.offsetParent;if(t instanceof HTMLElement){const r=t.offsetHeight,n=t.scrollTop,i=e.offsetTop;i+e.offsetHeight>=n+r?t.scrollTo({top:i-r+e.offsetHeight}):i<=n&&t.scrollTo({top:i})}return!0}const b$M=block$2("select-list"),GroupLabel=({option:e,renderOptionGroup:t})=>t?jsxRuntimeExports.jsx("div",{className:b$M("group-label-custom"),children:t(e)}):jsxRuntimeExports.jsx("div",{className:b$M("group-label",{empty:""===e.label}),children:jsxRuntimeExports.jsx("div",{className:b$M("group-label-content"),children:e.label})}),b$L=block$2("select-list"),DefaultOption=({option:e})=>{const{content:t,children:r,disabled:n,title:i}=e;return jsxRuntimeExports.jsx("span",{title:i,className:b$L("option-default-label",{disabled:n}),children:t||r})},OptionWrap=e=>{const{renderOption:t,value:r,option:n,multiple:i}=e,o=-1!==r.indexOf(n.value),s=t?t(n):jsxRuntimeExports.jsx(DefaultOption,{option:n});return jsxRuntimeExports.jsxs("div",{"data-qa":n.qa,className:b$L("option",{colored:o&&!i,disabled:n.disabled}),children:[i&&jsxRuntimeExports.jsx(Icon,{className:b$L("tick-icon",{shown:o&&i}),data:Check}),s]})},SelectLoadingIndicator=e=>{const t=reactExports.useRef(null);return useIntersection({element:t.current,onIntersect:e?.onIntersect}),jsxRuntimeExports.jsx("div",{ref:t,className:selectListBlock("loading-indicator"),children:jsxRuntimeExports.jsx(Loader,{})})},loadingOption={value:"__SELECT_LIST_ITEM_LOADING__",disabled:!0},SelectList=reactExports.forwardRef((e,t)=>{const{onOptionClick:r,renderOption:n,renderOptionGroup:i,getOptionHeight:o,getOptionGroupHeight:s,size:a,flattenOptions:l,value:c,multiple:u,virtualized:d,mobile:p,loading:h,onLoadMore:f,id:m,activeIndex:g,onChangeActive:b}=e,y=reactExports.useMemo(()=>h?[...l,loadingOption]:l,[l,h]),T=reactExports.useMemo(()=>{if(0===c.length)return[];const e=new Set(c);return l.reduce((t,r,n)=>("value"in r&&e.has(r.value)&&t.push(n),t),[])},[l,c]),E=getOptionsHeight({options:y,getOptionHeight:o,getOptionGroupHeight:s,size:a,mobile:p}),O=reactExports.useCallback((e,t)=>getPopupItemHeight({getOptionHeight:o,getOptionGroupHeight:s,size:a,option:e,index:t,mobile:p}),[o,s,p,a]),S=reactExports.useCallback((e,t,r)=>{if("label"in e){const t=i?e=>i(e,{itemHeight:O(e,r)}):void 0;return jsxRuntimeExports.jsx(GroupLabel,{option:e,renderOptionGroup:t})}if(e.value===loadingOption.value)return jsxRuntimeExports.jsx(SelectLoadingIndicator,{onIntersect:0===r?void 0:f});const o=n?e=>n(e,{itemHeight:O(e,r)}):void 0;return jsxRuntimeExports.jsx(OptionWrap,{option:e,value:c,multiple:u,renderOption:o})},[n,i,c,u,O,f]);return jsxRuntimeExports.jsx(List,{ref:t,className:selectListBlock({size:a,virtualized:d,mobile:p}),qa:SelectQa.LIST,itemClassName:selectListBlock("item"),itemHeight:O,itemsHeight:d?E:void 0,items:y,filterable:!1,virtualized:d,renderItem:S,onItemClick:r,selectedItemIndex:T,id:m,role:"listbox",activeItemIndex:g,onChangeActive:b,deactivateOnLeave:!1,onScrollToItem:scrollToItem})});SelectList.displayName="SelectList";const adjustBorderWidth=e=>e-2*BORDER_WIDTH,getMinWidth=(e,t)=>t?e>POPUP_MIN_WIDTH_IN_VIRTUALIZE_CASE?e:POPUP_MIN_WIDTH_IN_VIRTUALIZE_CASE:adjustBorderWidth(e),getPopupWidth=(e,t,r)=>{let n=t;return n="number"==typeof e?e:"fit"===e?adjustBorderWidth(t):getMinWidth(t,r),`${n}px`};function sameWidthMiddleware(e){const{width:t,virtualized:r}=e;return size$1({apply(e){if("number"!=typeof t&&Boolean(e.elements.floating.style.maxWidth))return;const n=getPopupWidth(t,e.rects.reference.width,r),i={};"number"!=typeof t&&"fit"!==t?(i.minWidth=n,i.width=void 0):(i.minWidth=n,i.width=n),i.maxWidth=`max(90vw, ${adjustBorderWidth(e.rects.reference.width)}px)`,Object.assign(e.elements.floating.style,i)}})}function getMiddlewares(e){return[offset$1({mainAxis:BORDER_WIDTH,crossAxis:BORDER_WIDTH}),flip({altBoundary:e.disablePortal}),shift$2({limiter:limitShift(),crossAxis:!0,padding:10,altBoundary:e.disablePortal}),sameWidthMiddleware(e)]}const b$K=block$2("select-popup"),DEFAULT_PLACEMENT=["bottom-start","bottom-end","top-start","top-end"],SelectPopup=reactExports.forwardRef(({handleClose:e,onAfterOpen:t,onAfterClose:r,width:n,open:i,placement:o=DEFAULT_PLACEMENT,controlRef:s,children:a,className:l,disablePortal:c,virtualized:u,mobile:d,id:p},h)=>d?jsxRuntimeExports.jsx(Sheet,{qa:SelectQa.SHEET,className:l,visible:Boolean(i),onClose:e,children:a}):jsxRuntimeExports.jsx(Popup,{className:b$K(null,l),qa:SelectQa.POPUP,anchorRef:h,placement:o,open:i,onClose:e,disablePortal:c,returnFocus:s,floatingMiddlewares:getMiddlewares({width:n,disablePortal:c,virtualized:u}),id:p,onTransitionIn:t,onTransitionOutComplete:r,children:a}));function HiddenSelect(e){const{name:t,value:r,disabled:n,form:i,onReset:o}=e,s=useFormResetHandler({onReset:o,initialValue:r});return!t||n?null:0===r.length?jsxRuntimeExports.jsx("input",{ref:s,type:"hidden",name:t,value:r,form:i,disabled:n}):jsxRuntimeExports.jsx(reactExports.Fragment,{children:r.map((e,r)=>jsxRuntimeExports.jsx("input",{ref:0===r?s:void 0,value:e,type:"hidden",name:t,form:i,disabled:n},e))})}SelectPopup.displayName="SelectPopup";const useQuickSearch=e=>{const{onChange:t,open:r,disabled:n}=e,[i,o]=reactExports.useState(""),[s,a]=reactExports.useState(),l=reactExports.useCallback(e=>{if(clearTimeout(s),e){const e=window.setTimeout(()=>o(""),QUICK_SEARCH_TIMEOUT);a(e)}},[s]),c=reactExports.useCallback(e=>{e.stopPropagation();const t=getNextQuickSearch(e.key,i);i!==t&&(l(t),o(t))},[l,i]);reactExports.useEffect(()=>(r&&!n?document.addEventListener("keydown",c):r||n||o(""),()=>{r&&!n&&document.removeEventListener("keydown",c)}),[c,r,n]),reactExports.useEffect(()=>(r||clearTimeout(s),()=>clearTimeout(s)),[r,s]),reactExports.useEffect(()=>{t(i)},[t,i])};function useActiveItemIndex({options:e,value:t,open:r}){const[n,i]=reactExports.useState(()=>{if(r)return getInitialActiveItemIndex(e,t)}),[o,s]=reactExports.useState(r);return o!==r&&(s(r),r&&i(getInitialActiveItemIndex(e,t))),[r&&void 0!==n&&n<e.length&&!e[n].disabled?n:void 0,i]}function getInitialActiveItemIndex(e,t){let r=-1;return t.length>0&&(r=e.findIndex(e=>"value"in e&&t.includes(e.value)&&!e.disabled)),-1===r&&(r=e.findIndex(e=>"value"in e&&!e.disabled)),-1===r?void 0:r}function isFlattenOptions(e){return Boolean(e[FLATTEN_KEY])}function getSelectFilteredOptions(e){if(!isFlattenOptions(e))throw Error("You should use options generated by useSelectOptions hook");return e[FLATTEN_KEY].filteredOptions}function useSelectOptions(e){const{filter:t="",filterable:r,filterOption:n}=e,i=reactExports.useMemo(()=>isFlattenOptions(e.options)?e.options:getFlattenOptions(e.options),[e.options]),o=reactExports.useMemo(()=>r?getFilteredFlattenOptions({options:i,filter:t,filterOption:n}):i,[t,r,n,i]);return i[FLATTEN_KEY].filteredOptions=o,i}const Option$1=e=>null,OptionGroup=e=>null,DEFAULT_RENDER_POPUP=({renderFilter:e,renderList:t})=>jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[e(),t()]}),Select=reactExports.forwardRef(function(e,t){const{onUpdate:r,onOpenChange:n,onFilterChange:i,renderControl:o,renderFilter:s,renderOption:a,renderOptionGroup:l,renderSelectedOption:c,renderEmptyOptions:u,renderPopup:d=DEFAULT_RENDER_POPUP,getOptionHeight:p,getOptionGroupHeight:h,filterOption:f,name:m,form:g,className:b,controlClassName:y,popupClassName:T,qa:E,value:O,defaultValue:S,defaultOpen:x,open:v,label:_,placeholder:A,filterPlaceholder:C,width:w,popupWidth:k,popupPlacement:D,error:I,virtualizationThreshold:R=DEFAULT_VIRTUALIZATION_THRESHOLD,view:N="normal",size:P="m",pin:M="round-round",multiple:$=!1,disabled:L=!1,filterable:B=!1,filter:F,disablePortal:q,hasClear:j=!1,onClose:G,id:H,hasCounter:Q,renderCounter:z,title:V}=e,U=useMobile(),[W,Y]=useControlledState(F,"",i),X=reactExports.useRef(null),Z=reactExports.useRef(null),K=reactExports.useRef(null),J=reactExports.useRef(null),ee=useForkRef(t,Z),{value:te,open:re,toggleOpen:ne,setValue:ie,handleSelection:oe,handleClearValue:se}=useSelect({onUpdate:r,value:O,defaultValue:S,defaultOpen:x,multiple:$,open:v,onClose:G,onOpenChange:n,disabled:L});reactExports.useEffect(()=>{!re&&B&&U&&setTimeout(()=>{Y("")},300)},[re,B,Y,U]);const ae=useSelectOptions({options:e.options||getOptionsFromChildren(e.children),filter:W,filterable:B,filterOption:f}),le=getSelectFilteredOptions(ae),ce=reactExports.useMemo(()=>getSelectedOptionsContent(ae,te,c),[ae,te,c]),ue=le.length>=R,{errorMessage:de,errorPlacement:pe,validationState:he}=errorPropsMapper({error:I,errorMessage:e.errorMessage,errorPlacement:e.errorPlacement||"outside",validationState:e.validationState}),fe=useUniqId(),me="invalid"===he,ge=me&&Boolean(de)&&"outside"===pe,be=me&&Boolean(de)&&"inside"===pe,ye=reactExports.useCallback(e=>{if(e&&!e?.disabled&&!("label"in e)){if($){const e=J?.current?.getActiveItem();U||K.current?.focus(),"number"==typeof e&&setTimeout(()=>{J?.current?.activateItem(e,!0)},50)}oe(e)}},[oe,U,$]),Te=reactExports.useCallback(e=>{[KeyCode.ENTER,KeyCode.SPACEBAR].includes(e.key)&&re&&(e.preventDefault(),e.key===KeyCode.SPACEBAR&&ye(getActiveItem(J))),[KeyCode.ARROW_DOWN,KeyCode.ARROW_UP].includes(e.key)&&!re&&(e.preventDefault(),ne()),e.key===KeyCode.ESCAPE&&re&&ne(!1),J?.current?.onKeyDown(e)},[ye,re,ne]),Ee=reactExports.useCallback(e=>{J?.current?.onKeyDown(e)},[]),Oe=reactExports.useCallback(e=>{if(e){const t=findItemIndexByQuickSearch(e,getListItems(J));"number"==typeof t&&-1!==t&&J?.current?.activateItem(t,!0)}},[]);useQuickSearch({onChange:Oe,open:re,disabled:B});const Se={..."max"===w&&{width:w}},xe={};"number"==typeof w&&(xe.width=w);const ve=reactExports.useCallback(()=>ne(!1),[ne]),{onFocus:_e,onBlur:Ae}=e,{focusWithinProps:Ce}=useFocusWithin({onFocusWithin:_e,onBlurWithin:reactExports.useCallback(e=>{Ae?.(e),U||ve()},[ve,U,Ae])}),we=useUniqId(),ke=H??we,De=`select-popup-${ke}`,[Ie,Re]=useActiveItemIndex({options:le,open:re,value:te});return jsxRuntimeExports.jsxs("div",{ref:X,className:selectBlock(Se,b),...Ce,style:xe,tabIndex:-1,children:[jsxRuntimeExports.jsx(SelectControl,{...filterDOMProps(e,{labelable:!0}),toggleOpen:ne,hasClear:j,clearValue:se,ref:ee,className:y,qa:E,view:N,size:P,pin:M,label:_,placeholder:A,selectedOptionsContent:ce,isErrorVisible:me,errorMessage:be?de:void 0,open:re,disabled:L,onKeyDown:Te,renderControl:o,value:te,popupId:De,selectId:ke,activeIndex:Ie,hasCounter:$&&Q,renderCounter:z,title:V}),jsxRuntimeExports.jsx(SelectPopup,{ref:X,className:T,controlRef:Z,width:k,open:re,handleClose:ve,disablePortal:q,virtualized:ue,mobile:U,placement:D,onAfterOpen:B?()=>{K.current?.focus()}:void 0,onAfterClose:B?()=>{Y("")}:void 0,children:d({renderFilter:()=>B?jsxRuntimeExports.jsx(SelectFilter,{ref:K,size:P,value:W,placeholder:C,onChange:Y,onKeyDown:Ee,renderFilter:s,popupId:De,activeIndex:Ie}):null,renderList:()=>le.length||e.loading?jsxRuntimeExports.jsx(SelectList,{ref:J,size:P,value:te,mobile:U,flattenOptions:le,multiple:$,virtualized:ue,onOptionClick:ye,renderOption:a,renderOptionGroup:l,getOptionHeight:p,getOptionGroupHeight:h,loading:e.loading,onLoadMore:e.onLoadMore,id:De,activeIndex:Ie,onChangeActive:Re}):jsxRuntimeExports.jsx(EmptyOptions,{filter:W,renderEmptyOptions:u})})}),jsxRuntimeExports.jsx(OuterAdditionalContent,{errorMessage:ge?de:null,errorMessageId:fe}),jsxRuntimeExports.jsx(HiddenSelect,{name:m,value:te,disabled:L,form:g,onReset:ie})]})});Select.Option=Option$1,Select.OptionGroup=OptionGroup;const b$J=block$2("skeleton");function Skeleton({className:e,style:t,qa:r,animation:n="gradient"}){return jsxRuntimeExports.jsx("div",{className:b$J({animation:n},e),style:t,"data-qa":r})}const b$I=block$2("spin"),Spin=reactExports.forwardRef(function(e,t){const{size:r="m",style:n,className:i,qa:o}=e;return jsxRuntimeExports.jsx("div",{ref:t,style:n,className:b$I({size:r},i),"data-qa":o,children:jsxRuntimeExports.jsx("div",{className:b$I("inner")})})});class EventEmitter{listeners;constructor(){this.listeners={}}destroy(){this.listeners={}}subscribe(e,t){return"function"==typeof t&&(this.listeners[e]=(this.listeners[e]||[]).concat(t)),()=>{this.listeners[e]=this.listeners[e]?.filter(e=>t!==e)}}notify(e,t){if(!this.listeners[e]?.length)return!1;for(const r of this.listeners[e])r(...t);return!0}}function getToastIndex(e,t){return e.findIndex(e=>e.name===t)}function hasToast(e,t){return-1!==getToastIndex(e,t)}function removeToast(e,t){return hasToast(e,t)?e.filter(e=>e.name!==t):e}class Toaster{hasUndelivered=!1;toasts=[];eventEmitter=new EventEmitter;destroy(){this.removeAll(),this.eventEmitter.destroy()}add(e){let t=this.toasts;hasToast(t,e.name)&&(t=removeToast(t,e.name)),this.toasts=[...t,{...e,addedAt:Date.now(),ref:{current:null}}],this.notify()}remove(e){this.toasts=removeToast(this.toasts,e),this.notify()}removeAll(){this.toasts=[],this.notify()}update(e,t){if(!hasToast(this.toasts,e))return;const r=getToastIndex(this.toasts,e);this.toasts=[...this.toasts.slice(0,r),{...this.toasts[r],...t},...this.toasts.slice(r+1)],this.notify()}has(e){return hasToast(this.toasts,e)}subscribe(e){const t=this.eventEmitter.subscribe("toasts-change",e);return this.hasUndelivered&&this.notify(),t}notify(){const e=this.eventEmitter.notify("toasts-change",[this.toasts]);this.hasUndelivered=!e}}const en$j={"label_close-button":"Close"},ru$j={"label_close-button":""},COMPONENT="Toaster",i18n$f=addComponentKeysets({en:en$j,ru:ru$j},COMPONENT),b$H=block$2("toast"),DEFAULT_TIMEOUT=5e3,TITLE_ICONS={normal:null,info:CircleInfo,success:CircleCheck,warning:TriangleExclamation,danger:TriangleExclamation,utility:Thunderbolt};function renderActions({actions:e,onClose:t}){let r;if(Array.isArray(e)){if(r=e.map(({label:e,onClick:r,view:n="outlined",removeAfterClick:i=!0},o)=>jsxRuntimeExports.jsx(Button,{onClick:()=>{r(),i&&t()},type:"button",size:"l",view:n,width:"auto",children:e},`${e}__${o}`)),!e.length)return null}else if(r=e?.(),!r)return null;return jsxRuntimeExports.jsx("div",{className:b$H("actions"),children:r})}function renderIconByType({theme:e}){return e&&TITLE_ICONS[e]?jsxRuntimeExports.jsx(Icon,{data:TITLE_ICONS[e],size:20,className:b$H("icon",{[e]:!0})}):null}const Toast=reactExports.forwardRef(function(e,t){const{name:r,content:n,actions:i,title:o,className:s,theme:a="normal",renderIcon:l,autoHiding:c=DEFAULT_TIMEOUT,isClosable:u=!0,mobile:d=!1,onClose:p,removeCallback:h}=e,f=reactExports.useCallback(()=>{h(r),p&&p()},[h,p,r]),m=useCloseOnTimeout({onClose:f,timeout:"number"==typeof c?c:void 0}),g={mobile:d,theme:a},b=Boolean(o),y=Boolean(n),{t:T}=i18n$f.useTranslation(),E=l?l(e):renderIconByType({theme:a});return jsxRuntimeExports.jsxs("div",{ref:t,className:b$H(g,s),...m,"data-toast":!0,children:[E&&jsxRuntimeExports.jsx("div",{className:b$H("icon-container"),children:E}),jsxRuntimeExports.jsxs("div",{className:b$H("container"),children:[b&&jsxRuntimeExports.jsx("h3",{className:b$H("title"),children:o}),u&&jsxRuntimeExports.jsx(Button,{size:"s",view:"flat",className:b$H("btn-close"),onClick:f,"aria-label":T("label_close-button"),children:jsxRuntimeExports.jsx(Icon,{data:Xmark})}),y&&jsxRuntimeExports.jsx("div",{className:b$H("content",{"without-title":!b}),children:n}),renderActions({actions:i,onClose:f})]})]})}),ToasterContext=reactExports.createContext(null);function useToaster(){const e=reactExports.useContext(ToasterContext);if(null===e)throw new Error("Toaster: `useToaster` hook is used out of context");return reactExports.useMemo(()=>({add:e.add.bind(e),remove:e.remove.bind(e),removeAll:e.removeAll.bind(e),update:e.update.bind(e),has:e.has.bind(e)}),[e])}ToasterContext.displayName="ToasterContext";const ToastsContext=reactExports.createContext([]);ToastsContext.displayName="ToastsContext";const desktopTransitionClassNames=getCSSTransitionClassNames(block$2("toast-animation-desktop")),mobileTransitionClassNames=getCSSTransitionClassNames(block$2("toast-animation-mobile"));function ToastList(e){const{toasts:t,mobile:r,removeCallback:n}=e;return jsxRuntimeExports.jsx(TransitionGroup,{component:null,children:t.map(e=>jsxRuntimeExports.jsx(CSSTransition,{nodeRef:e.ref,classNames:r?mobileTransitionClassNames:desktopTransitionClassNames,addEndListener:t=>e.ref?.current?.addEventListener("animationend",t),onEnter:()=>updateToastHeightCssProperty(e),onExit:()=>updateToastHeightCssProperty(e),children:jsxRuntimeExports.jsx(Toast,{...e,mobile:r,removeCallback:n})},`${e.name}_${e.addedAt}`))})}function updateToastHeightCssProperty(e){e.ref?.current&&e.ref.current.style.setProperty("--_--item-height",`${e.ref.current.offsetHeight}px`)}const b$G=block$2("toaster");function ToasterComponent({className:e,mobile:t,hasPortal:r=!0}){const n=useMobile(),{remove:i}=useToaster(),o=reactExports.useContext(ToastsContext),s=jsxRuntimeExports.jsx(ToastList,{toasts:o,removeCallback:i,mobile:t??n});return r?jsxRuntimeExports.jsx(Portal$2,{children:jsxRuntimeExports.jsx("div",{className:b$G({mobile:t??n},e),"aria-live":"assertive",children:s})}):s}ToasterComponent.displayName="ToasterComponent";const ToasterProvider=({toaster:e,children:t})=>{const[r,n]=reactExports.useState([]);return reactExports.useEffect(()=>{const t=e.subscribe(n);return()=>{t()}},[e]),jsxRuntimeExports.jsx(ToasterContext.Provider,{value:e,children:jsxRuntimeExports.jsx(ToastsContext.Provider,{value:r,children:t})})};var Lang;ToasterProvider.displayName="ToasterProvider",function(e){e.Ru="ru",e.En="en"}(Lang||(Lang={}));const config={},getConfig$1=()=>config,i18n$e=new I18N;function registerKeyset(e,t){return i18n$e.registerKeyset(Lang.En,e,t.en),i18n$e.registerKeyset(Lang.Ru,e,t.ru),i18n$e.keyset(e)}i18n$e.setLang(getConfig$1().lang||Lang.En);const cancel$1="Cancel",close$1="Close",edit$1="Edit",preview$1="Preview",remove$7="Remove",save$1="Save",toolbar_action_disabled$1="Incompatible markup element",en$i={cancel:cancel$1,close:close$1,delete:"Delete",edit:edit$1,preview:preview$1,remove:remove$7,save:save$1,toolbar_action_disabled:toolbar_action_disabled$1},cancel="",close="",edit="",preview="",remove$6="",save="",toolbar_action_disabled="  ",ru$i={cancel:cancel,close:close,delete:"",edit:edit,preview:preview,remove:remove$6,save:save,toolbar_action_disabled:toolbar_action_disabled},KEYSET$e="common",i18n$d=registerKeyset(KEYSET$e,{en:en$i,ru:ru$i}),b$F=cn("toolbar-button"),DEFAULT_ICON_SIZE=16,ToolbarButtonView=reactExports.forwardRef(function({title:e,hint:t,hotkey:r,hintWhenDisabled:n,active:i,enabled:o,onClick:s,className:a,qa:l,id:c,disableTooltip:u,...d},p){const h=!i&&!o,f=isFunction$1(e)?e():e,m=isFunction$1(t)?t():t,g=!1===n||!h,b="string"==typeof n?n:"function"==typeof n?n():i18n$d("toolbar_action_disabled");return jsxRuntimeExports.jsx(Popover$3,{content:jsxRuntimeExports.jsx("div",{className:b$F("action-disabled-tooltip"),children:b}),disabled:g,placement:["bottom"],children:(e,t)=>jsxRuntimeExports.jsx(ActionTooltip,{openDelay:ToolbarTooltipDelay.Open,closeDelay:ToolbarTooltipDelay.Close,description:m,title:f,hotkey:r,disabled:u,children:(e,r)=>jsxRuntimeExports.jsx(Button,{qa:l,size:"m",ref:e=>{setRef(p,e),setRef(t,e),setRef(r,e)},selected:i,disabled:h,view:i?"normal":"flat",onClick:s,className:b$F(null,[a]),"aria-label":f,"data-toolbar-item":c,children:"icon"in d?jsxRuntimeExports.jsx(Icon,{data:d.icon.data,size:d.icon.size??DEFAULT_ICON_SIZE}):d.children})})})});function ToolbarButton(e){const{id:t,editor:r,focus:n,isActive:i,isEnable:o,exec:s,onClick:a}=e,l=i(r),c=o(r);return jsxRuntimeExports.jsx(ToolbarButtonView,{...e,active:l,enabled:c,onClick:()=>{n(),s(r),a?.(t)}})}function useMountedState(){var e=reactExports.useRef(!1),t=reactExports.useCallback(function(){return e.current},[]);return reactExports.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),t}var noop$4=function(){};function on(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function off(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var isBrowser="undefined"!=typeof window,updateReducer=function(e){return(e+1)%1e6};function useUpdate(){return reactExports.useReducer(updateReducer,0)[1]}var useIsomorphicLayoutEffect=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,useEffectOnce=function(e){reactExports.useEffect(e,[])};function useEnsuredForwardedRef(e){var t=reactExports.useRef(e&&e.current);return reactExports.useEffect(function(){e&&(e.current=t.current)},[e]),t}var defaultTarget=isBrowser?window:null,isListenerType1=function(e){return!!e.addEventListener},isListenerType2=function(e){return!!e.on},useEvent=function(e,t,r,n){void 0===r&&(r=defaultTarget),reactExports.useEffect(function(){if(t&&r)return isListenerType1(r)?on(r,e,t,n):isListenerType2(r)&&r.on(e,t,n),function(){isListenerType1(r)?off(r,e,t,n):isListenerType2(r)&&r.off(e,t,n)}},[e,t,r,JSON.stringify(n)])},createKeyPredicate=function(e){return"function"==typeof e?e:"string"==typeof e?function(t){return t.key===e}:e?function(){return!0}:function(){return!1}},useKey=function(e,t,r,n){void 0===t&&(t=noop$4),void 0===r&&(r={}),void 0===n&&(n=[e]);var i=r.event,o=void 0===i?"keydown":i,s=r.target,a=r.options,l=reactExports.useMemo(function(){var r=createKeyPredicate(e);return function(e){if(r(e))return t(e)}},n);useEvent(o,l,s,a)},useLatest=function(e){var t=reactExports.useRef(e);return t.current=e,t},defaultState={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function useMeasure(){var e=reactExports.useState(null),t=e[0],r=e[1],n=reactExports.useState(defaultState),i=n[0],o=n[1],s=reactExports.useMemo(function(){return new window.ResizeObserver(function(e){if(e[0]){var t=e[0].contentRect,r=t.x,n=t.y,i=t.width,s=t.height,a=t.top,l=t.left,c=t.bottom,u=t.right;o({x:r,y:n,width:i,height:s,top:a,left:l,bottom:c,right:u})}})},[]);return useIsomorphicLayoutEffect(function(){if(t)return s.observe(t),function(){s.disconnect()}},[t]),[r,i]}const useMeasure$1=isBrowser&&void 0!==window.ResizeObserver?useMeasure:function(){return[noop$4,defaultState]},useElementState=()=>reactExports.useState(null);function useBooleanState(e){const[t,r]=reactExports.useState(e);return[t,reactExports.useCallback(()=>r(!0),[]),reactExports.useCallback(()=>r(!1),[]),reactExports.useCallback(()=>r(e=>!e),[])]}const useComponentWillMount=e=>{const t=reactExports.useRef(!0);t.current&&e(),t.current=!1},useRenderTime=e=>{let t=0;useComponentWillMount(()=>{t=Date.now()}),useEffectOnce(()=>{e(Date.now()-t)})};function ToolbarButtonPopup(e){const{className:t,editor:r,isActive:n,isEnable:i,renderPopup:o,disableTooltip:s,...a}=e,[l,c]=useElementState(),[u,,d,p]=useBooleanState(!1),h=n(r),f=i(r);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ToolbarButtonView,{...a,ref:c,active:h,enabled:f,className:t,onClick:p,disableTooltip:s||u}),u&&o({...e,anchorElement:l,hide:d})]})}const LAYOUT={STICKY_TOOLBAR:"sticky-toolbar"};var changedArray=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),e.length!==t.length||e.some(function(e,r){return!Object.is(e,t[r])})},initialState={error:null},ErrorBoundary=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).state=initialState,t.resetErrorBoundary=function(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];null==t.props.onReset||(e=t.props).onReset.apply(e,n),t.reset()},t}_inheritsLoose(t,e),t.getDerivedStateFromError=function(e){return{error:e}};var r=t.prototype;return r.reset=function(){this.setState(initialState)},r.componentDidCatch=function(e,t){var r,n;null==(r=(n=this.props).onError)||r.call(n,e,t)},r.componentDidUpdate=function(e,t){var r,n,i=this.state.error,o=this.props.resetKeys;null!==i&&null!==t.error&&changedArray(e.resetKeys,o)&&(null==(r=(n=this.props).onResetKeysChange)||r.call(n,e.resetKeys,o),this.reset())},r.render=function(){var e=this.state.error,t=this.props,r=t.fallbackRender,n=t.FallbackComponent,i=t.fallback;if(null!==e){var o={error:e,resetErrorBoundary:this.resetErrorBoundary};if(reactExports.isValidElement(i))return i;if("function"==typeof r)return r(o);if(n)return reactExports.createElement(n,o);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(reactExports.Component);const ErrorLoggerBoundary=({children:e})=>jsxRuntimeExports.jsx(ErrorBoundary,{onError:e=>{logger.error(e)},fallbackRender:()=>null,children:e}),Renderer=reactExports.memo(({storage:e})=>{const t=useUpdate();return reactExports.useEffect(()=>(e.on("update",t),()=>{e.off("update",t)}),[e,t]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e.getItems().map(e=>jsxRuntimeExports.jsx(ItemRenderer,{item:e},e.id))})});Renderer.displayName="ReactRenderer";const ItemRenderer=reactExports.memo(({item:e})=>{const t=useUpdate();return reactExports.useEffect(()=>(e.on("rerender",t),()=>{e.off("rerender",t)}),[e,t]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e.render()})});ItemRenderer.displayName="ReactItemRenderer";const key$4=new PluginKey("reactrenderer");function getReactRendererFromState(e){const t=key$4.getState(e);if(!t)throw new Error("ReactRenderer is missing in the editor state. Probably, you forgot to use ReactRendererExtension");return t}const ReactRendererExtension=(e,t)=>{e.context.set("reactrenderer",t),e.addPlugin(()=>new Plugin({key:key$4,state:{init:()=>t,apply:()=>t}}),e.Priority.Highest)};class ReactRenderStorage extends EventEmitter$1{static Item=class e extends EventEmitter$1{static GlobalId=0;static getNextId(){return this.GlobalId++}id;renderFn;removeFn;constructor(t,r,n){super(),this.id=t+e.getNextId(),this.renderFn=r,this.removeFn=n}render(){return this.renderFn()}remove(){this.removeFn(this)}rerender(){this.emit("rerender",null)}};#R=[];getItems(){return this.#R}createItem(e,t){const r=new ReactRenderStorage.Item(e,t,this.removeItem.bind(this));return this.#R.push(r),this.emit("update",null),r}removeItem(e){this.#R="string"==typeof e?this.#R.filter(t=>t.id!==e):this.#R.filter(t=>t!==e),this.emit("update",null)}}const ReactNodeStopEventCn="prosemirror-stop-event";class ReactNodeView{dom;node;view;serializer;renderItem;getPos;constructor(e,t){const{getPos:r,node:n,serializer:i,view:o,options:s}=t;this.node=n,this.dom=s?.isInline?document.createElement("span"):document.createElement("div"),this.dom.contentEditable="false",this.dom.classList.add("react-node-container");const a=document.createElement(s?.isInline?"span":"div");a.classList.add("react-node-wrapper"),s?.reactNodeWrapperCn&&a.classList.add(s?.reactNodeWrapperCn),this.dom.appendChild(a),this.serializer=i,this.view=o,this.getPos=r,this.renderItem=getReactRendererFromState(o.state).createItem(`${e.displayName||this.node.type.name}-view`,()=>jsxRuntimeExports.jsx(Portal$2,{container:a,children:jsxRuntimeExports.jsx(e,{dom:a,view:this.view,updateAttributes:this.updateAttributes.bind(this),node:this.node,getPos:this.getPos.bind(this),serializer:this.serializer,extensionOptions:s?.extensionOptions})}))}update(e){return e.type===this.node.type&&(this.node===e||(this.node=e,this.renderItem.rerender()),!0)}destroy(){this.renderItem.remove()}ignoreMutation(e){return!0}updateAttributes(e,t=[]){const r=this.getPos();if(void 0===r)return;const{tr:n}=this.view.state;n.setNodeMarkup(r,void 0,{...this.node.attrs,...e},t),this.view.dispatch(n)}stopEvent(e){const t=e.target;return["INPUT","BUTTON","SELECT","TEXTAREA"].includes(t.tagName)||t.classList.contains(ReactNodeStopEventCn)}}const reactNodeViewFactory=(e,t)=>({serializer:r})=>(n,i,o)=>new ReactNodeView(e,{node:n,view:i,getPos:o,serializer:r,options:t}),useNodeEditing=({nodeRef:e,view:t})=>{const r=useBooleanState(!1),[,,n,i]=r;return reactExports.useEffect(()=>{const{current:r}=e;return r?.addEventListener("dblclick",i),t.dom.addEventListener("focus",n),()=>{r?.removeEventListener("dblclick",i),t.dom.removeEventListener("focus",n)}},[t.dom,i,n,e.current]),r},useNodeHovered=e=>{const[t,r,n]=useBooleanState(!1);return reactExports.useEffect(()=>{const{current:t}=e;return t?.addEventListener("mouseenter",r),t?.addEventListener("mouseleave",n),()=>{t?.removeEventListener("mouseenter",r),t?.removeEventListener("mouseleave",n)}},[e.current,r,n]),t},events$1=new Set(["resize","scroll","touchstart","touchmove","touchend","pageshow","load","orientationchange"]);function useSticky(e){const[t,r]=reactExports.useState(!1),n=useLatest(t);return useEffectOnce(()=>{let t=null;o();for(const e of events$1)window.addEventListener(e,i,!0);return()=>{null!==t&&cancelAnimationFrame(t);for(const e of events$1)window.removeEventListener(e,i,!0)};function i(){null!==t&&cancelAnimationFrame(t),t=requestAnimationFrame(o)}function o(){if(t=null,!e.current)return;const i=e.current.getBoundingClientRect().top<=parseInt(getComputedStyle(e.current).top,10);i&&!n.current?r(!0):!i&&n.current&&r(!1)}}),t}const DEFAULT_OFFSET=10;function getTargetZIndex(e,t=DEFAULT_OFFSET){const r=document.querySelector(`[data-layout="${e}"]`);if(!r)return;const n=window.getComputedStyle(r),i=parseInt(n.zIndex,10);return!Number.isFinite(i)||i<=0?void 0:i+t}const events=new Set(["resize","scroll","touchstart","touchmove","touchend","pageshow","load","orientationchange"]);function useTargetZIndex(e,t=10){const[r,n]=reactExports.useState(()=>getTargetZIndex(e,t)),i=useLatest(r);return useEffectOnce(()=>{let r=null;s();for(const e of events)window.addEventListener(e,o,!0);return()=>{null!==r&&cancelAnimationFrame(r);for(const e of events)window.removeEventListener(e,o,!0)};function o(){null!==r&&cancelAnimationFrame(r),r=requestAnimationFrame(s)}function s(){r=null;const o=getTargetZIndex(e,t);o!==i.current&&n(o)}}),r}const b$E=cn("preview-tooltip"),PreviewTooltip=({preview:e,children:t,disabled:r})=>!e||r?t:jsxRuntimeExports.jsx(Tooltip,{placement:["right","left"],className:b$E(),openDelay:ToolbarTooltipDelay.Open,closeDelay:ToolbarTooltipDelay.Close,content:jsxRuntimeExports.jsx("div",{className:b$E("content"),children:e}),children:t}),b$D=cn("toolbar-list-button");function ToolbarListButton({className:e,editor:t,focus:r,onClick:n,icon:i,title:o,withArrow:s,data:a,alwaysActive:l,replaceActiveIcon:c,qa:u,qaMenu:d,qaActionDisabledPopover:p="g-md-toolbar-action-disabled-hint",disableHotkey:h,disablePreview:f,disableTooltip:m}){const[g,b]=useElementState(),[y,,T,E]=useBooleanState(!1),[O,S]=reactExports.useState(),x=useTargetZIndex(LAYOUT.STICKY_TOOLBAR),v=!l&&a.every(e=>!e.isEnable(t)),_=!v&&y,A=y&&!_;if(reactExports.useEffect(()=>{A&&T()},[T,A]),0===a.length)return null;const C=a.find(e=>e.isActive(t)&&!e.doNotActivateList),w=!l&&Boolean(C);c&&w&&C&&(i=C.icon);const k=[jsxRuntimeExports.jsx(Icon,{data:i.data,size:i.size??16},1)];s&&(k.push(jsxRuntimeExports.jsx(reactExports.Fragment,{children:""},2)),k.push(jsxRuntimeExports.jsx(Icon,{data:ChevronDown,size:16},3)));const D=isFunction$1(o)?o():o;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ToolbarButtonView,{qa:u,ref:b,active:w,enabled:!v,title:o,className:b$D({arrow:s},[e]),onClick:()=>{O?S(void 0):E()},disableTooltip:m||_,children:k}),jsxRuntimeExports.jsx(Popup,{anchorElement:g,open:_,onOpenChange:T,zIndex:"number"==typeof x?x:void 0,children:jsxRuntimeExports.jsx(Menu,{size:"l",className:b$D("menu"),qa:d,"data-toolbar-menu-for":D,children:a.map(e=>{const{id:i,title:o,icon:s,hotkey:a,isActive:l,isEnable:c,exec:u,hint:d,hintWhenDisabled:m,preview:g}=e,b=isFunction$1(o)?o():o,y=isFunction$1(d)?d():d,E=!c(t),O=!1===m||!E,x="string"==typeof m?m:"function"==typeof m?m():i18n$d("toolbar_action_disabled"),v=()=>{T(),isPopupItem(e)?S(e):(S(void 0),r(),u(t),n?.(i))};return jsxRuntimeExports.jsx(Popover$3,{className:b$D("action-disabled-popover"),content:jsxRuntimeExports.jsx("div",{className:b$D("action-disabled-tooltip"),children:x}),placement:"left",modal:!1,disabled:O,qa:p,children:(e,r)=>jsxRuntimeExports.jsx(PreviewTooltip,{preview:g,disabled:f,children:jsxRuntimeExports.jsx(Menu.Item,{ref:r,active:l(t),disabled:!c(t),onClick:v,iconStart:jsxRuntimeExports.jsx(Icon,{data:s.data,size:s.size??16}),extraProps:{...e,"aria-label":b},children:jsxRuntimeExports.jsxs("div",{className:b$D("item"),children:[b,!h&&jsxRuntimeExports.jsxs("div",{className:b$D("extra"),children:[a&&jsxRuntimeExports.jsx(Hotkey,{value:a}),y&&jsxRuntimeExports.jsx(HelpMark,{className:b$D("hint"),popoverProps:{modal:!1},children:y})]})]})},i)})},i)}).filter(Boolean)})}),O?O.renderPopup({...O,editor:t,focus:r,onClick:n,anchorElement:g,hide:()=>S(void 0)}):null]})}function isPopupItem(e){return Boolean(e.renderPopup)}const b$C=cn("toolbar-group");function ToolbarButtonGroup({className:e,editor:t,data:r,focus:n,onClick:i,disableTooltip:o,disablePreview:s,disableHotkey:a}){return jsxRuntimeExports.jsx("div",{className:b$C(null,[e]),children:r.map(e=>{if(e.type===ToolbarDataType.SingleButton)return reactExports.createElement(ToolbarButton,{...e,key:e.id,editor:t,focus:n,onClick:i,className:b$C(e.type,{id:e.id},[e.className]),disableTooltip:o});if(e.type===ToolbarDataType.ButtonPopup)return reactExports.createElement(ToolbarButtonPopup,{...e,key:e.id,editor:t,focus:n,onClick:i,className:b$C(e.type,{id:e.id},e.className),disableTooltip:o});if(e.type===ToolbarDataType.ListButton)return reactExports.createElement(ToolbarListButton,{...e,qaMenu:"g-md-toolbar-menu",key:e.id,editor:t,focus:n,onClick:i,className:b$C(e.type,{id:e.id},[e.className]),disablePreview:s,disableHotkey:a,disableTooltip:o});if(e.type===ToolbarDataType.ReactComponent){const r=e.component;return reactExports.createElement(r,{...e.props,key:e.id,editor:t,focus:n,onClick:i,className:b$C(e.type,{id:e.id},[e.className])})}return e.type===ToolbarDataType.ReactNode?jsxRuntimeExports.jsx(reactExports.Fragment,{children:e.content},e.id):e.type===ToolbarDataType.ReactNodeFn?jsxRuntimeExports.jsx(reactExports.Fragment,{children:e.content(t)},e.id):null})})}const b$B=cn("toolbar");function Toolbar({editor:e,data:t,className:r,focus:n,onClick:i,display:o,qa:s,disableHotkey:a,disablePreview:l,disableTooltip:c}){return jsxRuntimeExports.jsx("div",{className:b$B({display:o},[r]),"data-qa":s,children:t.map((r,o)=>{const s=o===t.length-1;return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ToolbarButtonGroup,{data:r,editor:e,focus:n,onClick:i,className:b$B("group"),disableHotkey:a,disablePreview:l,disableTooltip:c}),s||jsxRuntimeExports.jsx("div",{className:b$B("group-separator")})]},o)})})}const H_GAP=17,B_WIDTH=28,B_WITH_ARROW_WIDTH=42,BG_H_GAP=2,B_DOTS_WIDTH=B_WIDTH,B_DOTS_LEFT_GAP=8,dotsWidth=B_DOTS_LEFT_GAP+B_DOTS_WIDTH;function shrinkToolbarData({availableWidth:e,data:t,hiddenActions:r=[]}){const n=[],i=[];let o=0;const s=t.length-1;let a=!1;return t.forEach((l,c)=>{const u=[];l.forEach((n,d)=>{o+=getItemWidth(n,c,d,l.length),a||(!r.length&&((e,r)=>e===s&&r===t[s].length-1)(c,d)?o>e:o+dotsWidth>e)?(a=!0,n.type===ToolbarDataType.SingleButton||n.type===ToolbarDataType.ButtonPopup?i.push(n):n.type===ToolbarDataType.ListButton&&i.push(...n.data)):u.push(l[d])}),u.length&&n.push(u)}),i.push(...r),{data:n,dots:i.length?i:void 0}}function getItemWidth(e,t,r,n){let i=0;return t>0&&0===r&&(i+=H_GAP),r>0&&r<n&&(i+=BG_H_GAP),e.type===ToolbarDataType.SingleButton||e.type===ToolbarDataType.ButtonPopup?B_WIDTH+i:e.type===ToolbarDataType.ListButton?B_WITH_ARROW_WIDTH+i:(e.width||0)+i}const b$A=cn("flex-toolbar");function FlexToolbar(e){useRenderTime(e=>{logger.metrics({component:"toolbar",event:"render",duration:e})});const{data:t,className:r,hiddenActions:n,disableTooltip:i,disablePreview:o,disableHotkey:s,display:a="shrink"}=e,[l,{width:c}]=useMeasure$1(),{data:u,dots:d}=reactExports.useMemo(()=>{const e=t.reduce((e,t)=>[...e,...t.map(e=>e.type===ToolbarDataType.ListButton?e.data.map(e=>e.id):e.id).flat()],[]),r=n?.filter(t=>!e.includes(t.id));return"scroll"===a?{data:t,dots:r?.length?r:void 0}:shrinkToolbarData({data:t,availableWidth:c,hiddenActions:r})},[t,a,n,c]);return jsxRuntimeExports.jsx("div",{ref:l,className:b$A(null,[r]),children:jsxRuntimeExports.jsxs("div",{className:b$A("container"),children:[jsxRuntimeExports.jsx(Toolbar,{...e,data:u,className:b$A("bar")}),d?.length&&jsxRuntimeExports.jsx(ToolbarListButton,{qa:"g-md-toolbar-more-action",qaMenu:"g-md-toolbar-additional",data:d,icon:{data:Ellipsis},title:e.dotsTitle,editor:e.editor,focus:e.focus,onClick:e.onClick,className:b$A("dots"),alwaysActive:!0,disableTooltip:i,disableHotkey:o,disablePreview:s})]})})}const deleteSelection=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(e,t){let{$cursor:r}=e.selection;return!r||(t?!t.endOfTextblock("backward",e):r.parentOffset>0)?null:r}const joinBackward=(e,t,r)=>{let n=atBlockStart(e,r);if(!n)return!1;let i=findCutBefore(n);if(!i){let r=n.blockRange(),i=r&&liftTarget(r);return null!=i&&(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)}let o=i.nodeBefore;if(deleteBarrier(e,i,t,-1))return!0;if(0==n.parent.content.size&&(textblockAt(o,"end")||NodeSelection.isSelectable(o)))for(let s=n.depth;;s--){let r=replaceStep(e.doc,n.before(s),n.after(s),Slice.empty);if(r&&r.slice.size<r.to-r.from){if(t){let n=e.tr.step(r);n.setSelection(textblockAt(o,"end")?Selection$1.findFrom(n.doc.resolve(n.mapping.map(i.pos,-1)),-1):NodeSelection.create(n.doc,i.pos-o.nodeSize)),t(n.scrollIntoView())}return!0}if(1==s||n.node(s-1).childCount>1)break}return!(!o.isAtom||i.depth!=n.depth-1||(t&&t(e.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),0))};function textblockAt(e,t,r=!1){for(let n=e;n;n="start"==t?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&1!=n.childCount)return!1}return!1}const selectNodeBackward=(e,t,r)=>{let{$head:n,empty:i}=e.selection,o=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",e):n.parentOffset>0)return!1;o=findCutBefore(n)}let s=o&&o.nodeBefore;return!(!s||!NodeSelection.isSelectable(s)||(t&&t(e.tr.setSelection(NodeSelection.create(e.doc,o.pos-s.nodeSize)).scrollIntoView()),0))};function findCutBefore(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function atBlockEnd(e,t){let{$cursor:r}=e.selection;return!r||(t?!t.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)?null:r}const joinForward=(e,t,r)=>{let n=atBlockEnd(e,r);if(!n)return!1;let i=findCutAfter(n);if(!i)return!1;let o=i.nodeAfter;if(deleteBarrier(e,i,t,1))return!0;if(0==n.parent.content.size&&(textblockAt(o,"start")||NodeSelection.isSelectable(o))){let r=replaceStep(e.doc,n.before(),n.after(),Slice.empty);if(r&&r.slice.size<r.to-r.from){if(t){let n=e.tr.step(r);n.setSelection(textblockAt(o,"start")?Selection$1.findFrom(n.doc.resolve(n.mapping.map(i.pos)),1):NodeSelection.create(n.doc,n.mapping.map(i.pos))),t(n.scrollIntoView())}return!0}}return!(!o.isAtom||i.depth!=n.depth-1||(t&&t(e.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),0))},selectNodeForward=(e,t,r)=>{let{$head:n,empty:i}=e.selection,o=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)return!1;o=findCutAfter(n)}let s=o&&o.nodeAfter;return!(!s||!NodeSelection.isSelectable(s)||(t&&t(e.tr.setSelection(NodeSelection.create(e.doc,o.pos)).scrollIntoView()),0))};function findCutAfter(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let r=e.node(t);if(e.index(t)+1<r.childCount)return e.doc.resolve(e.after(t+1));if(r.type.spec.isolating)break}return null}const lift=(e,t)=>{let{$from:r,$to:n}=e.selection,i=r.blockRange(n),o=i&&liftTarget(i);return null!=o&&(t&&t(e.tr.lift(i,o).scrollIntoView()),!0)},newlineInCode=(e,t)=>{let{$head:r,$anchor:n}=e.selection;return!(!r.parent.type.spec.code||!r.sameParent(n)||(t&&t(e.tr.insertText("\n").scrollIntoView()),0))};function defaultBlockAt(e){for(let t=0;t<e.edgeCount;t++){let{type:r}=e.edge(t);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const exitCode=(e,t)=>{let{$head:r,$anchor:n}=e.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),o=r.indexAfter(-1),s=defaultBlockAt(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(t){let n=r.after(),i=e.tr.replaceWith(n,n,s.createAndFill());i.setSelection(Selection$1.near(i.doc.resolve(n),1)),t(i.scrollIntoView())}return!0},createParagraphNear=(e,t)=>{let r=e.selection,{$from:n,$to:i}=r;if(r instanceof AllSelection||n.parent.inlineContent||i.parent.inlineContent)return!1;let o=defaultBlockAt(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let r=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,s=e.tr.insert(r,o.createAndFill());s.setSelection(TextSelection.create(s.doc,r+1)),t(s.scrollIntoView())}return!0},liftEmptyBlock=(e,t)=>{let{$cursor:r}=e.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let n=r.before();if(canSplit(e.doc,n))return t&&t(e.tr.split(n).scrollIntoView()),!0}let n=r.blockRange(),i=n&&liftTarget(n);return null!=i&&(t&&t(e.tr.lift(n,i).scrollIntoView()),!0)};function splitBlockAs(e){return(e,t)=>{let{$from:r,$to:n}=e.selection;if(e.selection instanceof NodeSelection&&e.selection.node.isBlock)return!(!r.parentOffset||!canSplit(e.doc,r.pos)||(t&&t(e.tr.split(r.pos).scrollIntoView()),0));if(!r.depth)return!1;let i,o,s=[],a=!1,l=!1;for(let p=r.depth;;p--){if(r.node(p).isBlock){a=r.end(p)==r.pos+(r.depth-p),l=r.start(p)==r.pos-(r.depth-p),o=defaultBlockAt(r.node(p-1).contentMatchAt(r.indexAfter(p-1))),s.unshift(a&&o?{type:o}:null),i=p;break}if(1==p)return!1;s.unshift(null)}let c=e.tr;(e.selection instanceof TextSelection||e.selection instanceof AllSelection)&&c.deleteSelection();let u=c.mapping.map(r.pos),d=canSplit(c.doc,u,s.length,s);if(d||(s[0]=o?{type:o}:null,d=canSplit(c.doc,u,s.length,s)),!d)return!1;if(c.split(u,s.length,s),!a&&l&&r.node(i).type!=o){let e=c.mapping.map(r.before(i)),t=c.doc.resolve(e);o&&r.node(i-1).canReplaceWith(t.index(),t.index()+1,o)&&c.setNodeMarkup(c.mapping.map(r.before(i)),o)}return t&&t(c.scrollIntoView()),!0}}const splitBlock=splitBlockAs(),selectParentNode=(e,t)=>{let r,{$from:n,to:i}=e.selection,o=n.sharedDepth(i);return 0!=o&&(r=n.before(o),t&&t(e.tr.setSelection(NodeSelection.create(e.doc,r))),!0)},selectAll$1=(e,t)=>(t&&t(e.tr.setSelection(new AllSelection(e.doc))),!0);function joinMaybeClear(e,t,r){let n=t.nodeBefore,i=t.nodeAfter,o=t.index();return!(!(n&&i&&n.type.compatibleContent(i.type))||(!n.content.size&&t.parent.canReplace(o-1,o)?(r&&r(e.tr.delete(t.pos-n.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(o,o+1)||!i.isTextblock&&!canJoin(e.doc,t.pos)||(r&&r(e.tr.join(t.pos).scrollIntoView()),0)))}function deleteBarrier(e,t,r,n){let i,o,s=t.nodeBefore,a=t.nodeAfter,l=s.type.spec.isolating||a.type.spec.isolating;if(!l&&joinMaybeClear(e,t,r))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(i=(o=s.contentMatchAt(s.childCount)).findWrapping(a.type))&&o.matchType(i[0]||a.type).validEnd){if(r){let n=t.pos+a.nodeSize,o=Fragment.empty;for(let e=i.length-1;e>=0;e--)o=Fragment.from(i[e].create(null,o));o=Fragment.from(s.copy(o));let l=e.tr.step(new ReplaceAroundStep(t.pos-1,n,t.pos,n,new Slice(o,1,0),i.length,!0)),c=l.doc.resolve(n+2*i.length);c.nodeAfter&&c.nodeAfter.type==s.type&&canJoin(l.doc,c.pos)&&l.join(c.pos),r(l.scrollIntoView())}return!0}let u=a.type.spec.isolating||n>0&&l?null:Selection$1.findFrom(t,1),d=u&&u.$from.blockRange(u.$to),p=d&&liftTarget(d);if(null!=p&&p>=t.depth)return r&&r(e.tr.lift(d,p).scrollIntoView()),!0;if(c&&textblockAt(a,"start",!0)&&textblockAt(s,"end")){let n=s,i=[];for(;i.push(n),!n.isTextblock;)n=n.lastChild;let o=a,l=1;for(;!o.isTextblock;o=o.firstChild)l++;if(n.canReplace(n.childCount,n.childCount,o.content)){if(r){let n=Fragment.empty;for(let e=i.length-1;e>=0;e--)n=Fragment.from(i[e].copy(n));r(e.tr.step(new ReplaceAroundStep(t.pos-i.length,t.pos+a.nodeSize,t.pos+l,t.pos+a.nodeSize-l,new Slice(n,i.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function selectTextblockSide(e){return function(t,r){let n=t.selection,i=e<0?n.$from:n.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return!!i.node(o).isTextblock&&(r&&r(t.tr.setSelection(TextSelection.create(t.doc,e<0?i.start(o):i.end(o)))),!0)}}const selectTextblockStart=selectTextblockSide(-1),selectTextblockEnd=selectTextblockSide(1);function wrapIn(e,t=null){return function(r,n){let{$from:i,$to:o}=r.selection,s=i.blockRange(o),a=s&&findWrapping(s,e,t);return!!a&&(n&&n(r.tr.wrap(s,a).scrollIntoView()),!0)}}function setBlockType(e,t=null){return function(r,n){let i=!1;for(let o=0;o<r.selection.ranges.length&&!i;o++){let{$from:{pos:n},$to:{pos:s}}=r.selection.ranges[o];r.doc.nodesBetween(n,s,(n,o)=>{if(i)return!1;if(n.isTextblock&&!n.hasMarkup(e,t))if(n.type==e)i=!0;else{let t=r.doc.resolve(o),n=t.index();i=t.parent.canReplaceWith(n,n+1,e)}})}if(!i)return!1;if(n){let i=r.tr;for(let n=0;n<r.selection.ranges.length;n++){let{$from:{pos:o},$to:{pos:s}}=r.selection.ranges[n];i.setBlockType(o,s,e,t)}n(i.scrollIntoView())}return!0}}function markApplies(e,t,r,n){for(let i=0;i<t.length;i++){let{$from:n,$to:o}=t[i],s=0==n.depth&&e.inlineContent&&e.type.allowsMarkType(r);if(e.nodesBetween(n.pos,o.pos,(e,t)=>{if(s)return!1;s=e.inlineContent&&e.type.allowsMarkType(r)}),s)return!0}return!1}function toggleMark(e,t=null,r){return function(r,n){let{empty:i,$cursor:o,ranges:s}=r.selection;if(i&&!o||!markApplies(r.doc,s,e))return!1;if(n)if(o)e.isInSet(r.storedMarks||o.marks())?n(r.tr.removeStoredMark(e)):n(r.tr.addStoredMark(e.create(t)));else{let i,o=r.tr;i=!s.some(t=>r.doc.rangeHasMark(t.$from.pos,t.$to.pos,e));for(let r=0;r<s.length;r++){let{$from:n,$to:a}=s[r];if(i){let r=n.pos,i=a.pos,s=n.nodeAfter,l=a.nodeBefore,c=s&&s.isText?/^\s*/.exec(s.text)[0].length:0,u=l&&l.isText?/\s*$/.exec(l.text)[0].length:0;r+c<i&&(r+=c,i-=u),o.addMark(r,i,e.create(t))}else o.removeMark(n.pos,a.pos,e)}n(o.scrollIntoView())}return!0}}function chainCommands(...e){return function(t,r,n){for(let i=0;i<e.length;i++)if(e[i](t,r,n))return!0;return!1}}let backspace$1=chainCommands(deleteSelection,joinBackward,selectNodeBackward),del=chainCommands(deleteSelection,joinForward,selectNodeForward);const pcBaseKeymap={Enter:chainCommands(newlineInCode,createParagraphNear,liftEmptyBlock,splitBlock),"Mod-Enter":exitCode,Backspace:backspace$1,"Mod-Backspace":backspace$1,"Shift-Backspace":backspace$1,Delete:del,"Mod-Delete":del,"Mod-a":selectAll$1},macBaseKeymap={"Ctrl-h":pcBaseKeymap.Backspace,"Alt-Backspace":pcBaseKeymap["Mod-Backspace"],"Ctrl-d":pcBaseKeymap.Delete,"Ctrl-Alt-Backspace":pcBaseKeymap["Mod-Delete"],"Alt-Delete":pcBaseKeymap["Mod-Delete"],"Alt-d":pcBaseKeymap["Mod-Delete"],"Ctrl-a":selectTextblockStart,"Ctrl-e":selectTextblockEnd};for(let e in pcBaseKeymap)macBaseKeymap[e]=pcBaseKeymap[e];const mac="undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&"darwin"==os.platform(),baseKeymap=mac?macBaseKeymap:pcBaseKeymap;var removeParentNodeOfType=e=>t=>{const r=findParentNodeOfType(e)(t.selection);return r?removeNodeAtPos(r.pos)(t):t},replaceParentNodeOfType=(e,t)=>r=>{Array.isArray(e)||(e=[e]);for(let n=0,i=e.length;n<i;n++){const i=findParentNodeOfType(e[n])(r.selection);if(i){const e=replaceNodeAtPos(i.pos,t)(r);if(e!==r)return e}}return r},setTextSelection=(e,t=1)=>r=>{const n=Selection$1.findFrom(r.doc.resolve(e),t,!0);return n?r.setSelection(n):r},isNodeSelection$1=e=>e instanceof NodeSelection,equalNodeType=(e,t)=>Array.isArray(e)&&e.indexOf(t.type)>-1||t.type===e,cloneTr=e=>Object.assign(Object.create(e),e).setTime(Date.now()),replaceNodeAtPos=(e,t)=>r=>{const n=r.doc.nodeAt(e),i=r.doc.resolve(e);if(!n)return r;if(canReplace(i,t)){const i=(r=r.replaceWith(e,e+n.nodeSize,t)).selection.$from.pos-1;return r=setTextSelection(Math.max(i,0),-1)(r),r=setTextSelection(r.selection.$from.start())(r),cloneTr(r)}return r},canReplace=(e,t)=>{const r=e.node(e.depth);return r&&r.type.validContent(t instanceof Fragment?t:Fragment.from(t))},removeNodeAtPos=e=>t=>{const r=t.doc.nodeAt(e);return r?cloneTr(t.delete(e,e+r.nodeSize)):t},findParentNode=e=>({$from:t,$to:r},n=!1)=>{if(n&&!t.sameParent(r)){let n=Math.min(t.depth,r.depth);for(;n>=0;){const i=t.node(n);if(r.node(n)===i&&e(i))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:i};n-=1}return}return findParentNodeClosestToPos(t,e)},findParentNodeClosestToPos=(e,t)=>{for(let r=e.depth;r>0;r--){const n=e.node(r);if(t(n))return{pos:r>0?e.before(r):0,start:e.start(r),depth:r,node:n}}},findParentDomRef=(e,t)=>r=>{const n=findParentNode(e)(r);if(n)return findDomRefAtPos(n.pos,t)},hasParentNode=e=>t=>!!findParentNode(e)(t),findParentNodeOfType=e=>t=>findParentNode(t=>equalNodeType(e,t))(t),findParentNodeOfTypeClosestToPos=(e,t)=>findParentNodeClosestToPos(e,e=>equalNodeType(t,e)),hasParentNodeOfType=e=>t=>hasParentNode(t=>equalNodeType(e,t))(t),findParentDomRefOfType=(e,t)=>r=>findParentDomRef(t=>equalNodeType(e,t),t)(r),findSelectedNodeOfType=e=>t=>{if(isNodeSelection$1(t)){const{node:r,$from:n}=t;if(equalNodeType(e,r))return{node:r,start:n.start(),pos:n.pos,depth:n.depth}}},findDomRefAtPos=(e,t)=>{const r=t(e),n=r.node.childNodes[r.offset];return r.node.nodeType===Node.TEXT_NODE&&r.node.parentNode?r.node.parentNode:n&&n.nodeType!==Node.TEXT_NODE?n:r.node},flatten$1=(e,t=!0)=>{if(!e)throw new Error('Invalid "node" parameter');const r=[];return e.descendants((e,n)=>{if(r.push({node:e,pos:n}),!t)return!1}),r},findChildren=(e,t,r=!0)=>{if(!e)throw new Error('Invalid "node" parameter');if(!t)throw new Error('Invalid "predicate" parameter');return flatten$1(e,r).filter(e=>t(e.node))},findChildrenByType=(e,t,r=!0)=>findChildren(e,e=>e.type===t,r),findChildrenByMark=(e,t,r=!0)=>findChildren(e,e=>Boolean(t.isInSet(e.marks)),r);function withLogAction(e,t){return(...r)=>{const n=t(...r);if(n){const[t]=r;getLoggerFromState(t).action({action:e,source:"keymap"}),globalLogger.action({action:e,source:"keymap",mode:"wysiwyg"})}return n}}function findFirstTextblockChild(e){if(e instanceof Node$2&&(!e.isBlock||e.isAtom))return null;for(const t of getChildrenOfNode(e)){if(t.node.isTextblock)return t;const e=findFirstTextblockChild(t.node);if(e)return{node:e.node,offset:t.offset+e.offset}}return null}const isNodeEmpty=e=>{const t=findChildren(e,e=>!e.isText&&!e.isAtom&&0===e.content.size&&"paragraph"===e.type.name||e.isText&&!e.textContent,!0);let r=0;return e.descendants(()=>{r++}),t.length===r},isSelectableNode=e=>!1!==e.type.spec.selectable&&(!e.type.isText||!0===e.type.spec.selectable);function isCodeBlock(e){return e.isTextblock&&Boolean(e.type.spec.code)}function getChildrenOfNode(e){const t=[];return e.forEach((e,r,n)=>t.push({node:e,offset:r,index:n})),t}function getLastChildOfNode(e){const t=getChildrenOfNode(e);return t[t.length-1]}const isEmptyString=e=>"paragraph"===e.type.name&&!e.content.size||1===e.childCount&&"text"===e.child(0).type.name&&""===e.child(0).text?.trim(),nodeTypeFactory=e=>t=>t.nodes[e],markTypeFactory=e=>t=>t.marks[e];function isSameNodeType(e,t){return(e instanceof Node$2?e.type:e)===(t instanceof Node$2?t.type:t)}var BaseNode$1,BaseNode2;BaseNode2=BaseNode$1||(BaseNode$1={}),BaseNode2.Doc="doc",BaseNode2.Text="text",BaseNode2.Paragraph="paragraph";const paragraphLineNumberAttr="data-line",pType=nodeTypeFactory(BaseNode$1.Paragraph),BaseSchemaSpecs=(e,t)=>{e.addNode(BaseNode$1.Doc,()=>({spec:{content:"block+"},fromMd:{tokenSpec:{name:BaseNode$1.Doc,type:"block",ignore:!0}},toMd:()=>{throw new Error("Unexpected toMd() call on doc node")}})).addNode(BaseNode$1.Text,()=>({spec:{group:"inline"},fromMd:{tokenSpec:{name:BaseNode$1.Text,type:"node",ignore:!0}},toMd:(e,t,r)=>{const{escapeText:n}=r.type.spec;e.text(t.text??"",n??!e.isAutolink)}})).addNode(BaseNode$1.Paragraph,()=>({spec:{attrs:{[paragraphLineNumberAttr]:{default:null}},content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(e){const t=e.attrs[paragraphLineNumberAttr];return["p",null===t?{}:{[paragraphLineNumberAttr]:t},0]},selectable:!0,placeholder:t.paragraphPlaceholder?{content:t.paragraphPlaceholder,alwaysVisible:!1}:void 0},fromMd:{tokenSpec:{name:BaseNode$1.Paragraph,type:"block"}},toMd:(e,r,n)=>{if(t.preserveEmptyRows&&isEmptyString(r)){let t=!0;for(let e=0;e<n.content.childCount;e++){const r=n.content.child(e);0===r.content.size&&"paragraph"===r.type.name||(t=!1)}t||(e.write("&nbsp;\n"),e.write("\n"))}else e.renderInline(r),e.closeBlock(r)}}))},pAction="toParagraph",toParagraph=(e,t)=>setBlockType(pType(e.schema))(e,t),BaseSchema=(e,t)=>{e.use(BaseSchemaSpecs,t);const{paragraphKey:r}=t;r&&e.addKeymap(({schema:e})=>({[r]:withLogAction("paragraph",setBlockType(pType(e)))})),e.addAction(pAction,({schema:e})=>{const t=pType(e),r=setBlockType(t),n=e=>hasParentNodeOfType(t)(e.selection);return{isActive:n,isEnable:chainCommands(n,r),run:r}})},CLASSNAME="g-md-editor",BaseStyles=(e,t)=>{const{attributes:r={}}=t;e.addPlugin(()=>new Plugin({props:{attributes:{...r,class:[CLASSNAME,r.class].filter(Boolean).join(" ")}}}))},BaseKeymap=e=>{e.addKeymap(()=>({Backspace:undoInputRule,"Mod-BracketLeft":lift,"Alt-Shift-Escape":selectParentNode}),e.Priority.Lowest).addKeymap(()=>baseKeymap,e.Priority.Lowest)},BaseInputRules=e=>{e.addInputRules(()=>({rules:[ellipsis]}))},addParagraphToStart=(e,t)=>{const{firstChild:r}=e.doc;if(r?.type===pType(e.schema)){if(t){const r=1,n=e.tr;n.setSelection(TextSelection.create(n.doc,r)),t(n.scrollIntoView())}return!0}return insertParagraph(0,e,t),!0},addParagraphToEnd=(e,t)=>{const{lastChild:r}=e.doc;if(!r)return!1;if(r.type===pType(e.schema)&&2===r.nodeSize){if(t){const r=e.doc.nodeSize-3,n=e.tr;n.setSelection(TextSelection.create(n.doc,r)),t(n.scrollIntoView())}return!0}return insertParagraph(e.doc.nodeSize-2,e,t),!0};function insertParagraph(e,t,r){if(!r)return;const n=t.tr;n.insert(e,pType(t.schema).create()),n.setSelection(TextSelection.create(n.doc,e+1)),r(n.scrollIntoView())}const startActionName="addEmptyDefaultTextblockToStartOfDocument",endActionName="addEmptyDefaultTextblockToEndOfDocument",ClicksOnEdges=e=>{e.addAction(startActionName,()=>({isEnable:addParagraphToStart,run:addParagraphToStart})),e.addAction(endActionName,()=>({isEnable:addParagraphToEnd,run:addParagraphToEnd})),e.addPlugin(()=>new Plugin({props:{handleClick(e,t,r){if(r.target!==e.dom)return!1;const{firstChild:n,lastChild:i}=r.target;if(!n||!i)return!1;const o=r.target.getBoundingClientRect(),s=n.getBoundingClientRect(),a=i.getBoundingClientRect(),l=s.top-o.y,c=a.bottom-o.y;return r.offsetY<l?addParagraphToStart(e.state,e.dispatch):r.offsetY>c&&addParagraphToEnd(e.state,e.dispatch)}}}))};function tryCatch(e){try{return{success:!0,result:e()}}catch(t){return{success:!1,error:t}}}const isTextSelection=e=>e instanceof TextSelection,isNodeSelection=e=>e instanceof NodeSelection,isWholeSelection=e=>e instanceof AllSelection,get$Cursor=e=>isTextSelection(e)?e.$cursor:null;function get$CursorAtBlockStart(e){const t=get$Cursor(e);return!t||t.parentOffset>0||t.parent.isInline?null:t}function dedent(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=Array.from("string"==typeof e?[e]:e);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce(function(e,t){var r=t.match(/\n([\t ]+|(?!\s).)/g);return r?e.concat(r.map(function(e){var t,r;return null!==(r=null===(t=e.match(/[\t ]/g))||void 0===t?void 0:t.length)&&void 0!==r?r:0})):e},[]);if(i.length){var o=new RegExp("\n[\t ]{"+Math.min.apply(Math,i)+"}","g");n=n.map(function(e){return e.replace(o,"\n")})}n[0]=n[0].replace(/^\r?\n/,"");var s=n[0];return t.forEach(function(e,t){var r=s.match(/(?:^|\n)( *)$/),i=r?r[1]:"",o=e;"string"==typeof e&&e.includes("\n")&&(o=String(e).split("\n").map(function(e,t){return 0===t?e:""+i+e}).join("\n")),s+=o+n[t+1]}),s}var ListNode,ListNode2,ListsAttr,ListsAttr2;ListNode2=ListNode||(ListNode={}),ListNode2.ListItem="list_item",ListNode2.BulletList="bullet_list",ListNode2.OrderedList="ordered_list",ListsAttr2=ListsAttr||(ListsAttr={}),ListsAttr2.Tight="tight",ListsAttr2.Order="order",ListsAttr2.Markup="markup";const Markup={bullet:{values:["-","+","*"],default:"*"},ordered:{values:[".",")"],default:"."}},parserTokens$8={[ListNode.ListItem]:{name:ListNode.ListItem,type:"block",getAttrs:e=>({[ListsAttr.Markup]:e.markup})},[ListNode.BulletList]:{name:ListNode.BulletList,type:"block",getAttrs:(e,t,r)=>({[ListsAttr.Tight]:listIsTight(t,r),[ListsAttr.Markup]:e.markup})},[ListNode.OrderedList]:{name:ListNode.OrderedList,type:"block",getAttrs:(e,t,r)=>({[ListsAttr.Order]:Number(e.attrGet("start"))||1,[ListsAttr.Tight]:listIsTight(t,r),[ListsAttr.Markup]:e.markup})}};function listIsTight(e,t){for(;++t<e.length;)if("list_item_open"!==e[t].type)return e[t].hidden;return!1}const schemaSpecs$2={[ListNode.ListItem]:{attrs:{[ListsAttr.Markup]:{default:null}},content:"(paragraph|block)+",defining:!0,parseDOM:[{tag:"li"}],toDOM:()=>["li",0],selectable:!0,allowSelection:!1,disableGapCursor:!0,complex:"leaf"},[ListNode.BulletList]:{content:`${ListNode.ListItem}+`,group:"block",attrs:{[ListsAttr.Tight]:{default:!0},[ListsAttr.Markup]:{default:Markup.bullet.default}},parseDOM:[{tag:"ul",getAttrs:e=>({[ListsAttr.Tight]:e.hasAttribute("data-tight")})}],toDOM:e=>["ul",{"data-tight":e.attrs[ListsAttr.Tight]?"true":null},0],selectable:!1,allowSelection:!1,complex:"root"},[ListNode.OrderedList]:{attrs:{[ListsAttr.Order]:{default:1},[ListsAttr.Tight]:{default:!0},[ListsAttr.Markup]:{default:Markup.ordered.default}},content:`${ListNode.ListItem}+`,group:"block",parseDOM:[{tag:"ol",getAttrs:e=>({[ListsAttr.Order]:e.hasAttribute("start")?Number(e.getAttribute("start")):1,[ListsAttr.Tight]:e.hasAttribute("data-tight")})}],toDOM:e=>["ol",{start:1===e.attrs[ListsAttr.Order]?null:e.attrs[ListsAttr.Order],"data-tight":e.attrs[ListsAttr.Tight]?"true":null},0],selectable:!1,allowSelection:!1,complex:"root"}},serializerTokens$7={[ListNode.ListItem]:(e,t)=>{e.renderContent(t)},[ListNode.BulletList]:(e,t)=>{e.renderList(t,"  ",(e,r)=>getMarkup$2({item:r,list:t,type:"bullet"})+" ")},[ListNode.OrderedList]:(e,t)=>{const r=t.attrs[ListsAttr.Order]||1,n=String(r+t.childCount-1).length,i=e.repeat(" ",n+2);e.renderList(t,i,(i,o)=>{const s=String(r+i),a=getMarkup$2({item:o,list:t,type:"ordered"});return e.repeat(" ",n-s.length)+s+a+" "})}};function getMarkup$2({item:e,list:t,type:r}){const n=Markup[r];let i=e.attrs[ListsAttr.Markup];return n.values.includes(i)||(i=t.attrs[ListsAttr.Markup]),n.values.includes(i)||(i=n.default),i}const liType=nodeTypeFactory(ListNode.ListItem),blType=nodeTypeFactory(ListNode.BulletList),olType=nodeTypeFactory(ListNode.OrderedList),ListsSpecs=e=>{e.addNode(ListNode.ListItem,()=>({spec:schemaSpecs$2[ListNode.ListItem],toMd:serializerTokens$7[ListNode.ListItem],fromMd:{tokenSpec:parserTokens$8[ListNode.ListItem]}})).addNode(ListNode.BulletList,()=>({spec:schemaSpecs$2[ListNode.BulletList],toMd:serializerTokens$7[ListNode.BulletList],fromMd:{tokenSpec:parserTokens$8[ListNode.BulletList]}})).addNode(ListNode.OrderedList,()=>({spec:schemaSpecs$2[ListNode.OrderedList],toMd:serializerTokens$7[ListNode.OrderedList],fromMd:{tokenSpec:parserTokens$8[ListNode.OrderedList]}}))},findAnyParentList=e=>findParentNodeOfType([blType(e),olType(e)]),isIntoListOfType=e=>t=>findAnyParentList(t.schema)(t.selection)?.node.type.name===e,isListNode=({type:e})=>e===blType(e.schema)||e===olType(e.schema),isListItemNode=e=>e.type===liType(e.type.schema),isListOrItemNode=e=>isListNode(e)||isListItemNode(e),findMark=(e,t)=>e.marks.find(e=>e.type.name===t.name);function isMarkActive(e,t){const{from:r,$from:n,to:i,empty:o}=e.selection;return o?t.isInSet(e.storedMarks||n.marks()):e.doc.rangeHasMark(r,i,t)}function defineActions(e){return e}function createToggleMarkAction(e){const t=toggleMark(e);return{isActive:t=>Boolean(isMarkActive(t,e)),isEnable:t,run:t}}const KEEP_OPEN="KEEP_OPEN";var ActionKind,ActionKind2;ActionKind2=ActionKind||(ActionKind={}),ActionKind2.open="open",ActionKind2.close="close",ActionKind2.filter="filter",ActionKind2.up="ArrowUp",ActionKind2.down="ArrowDown",ActionKind2.left="ArrowLeft",ActionKind2.right="ArrowRight",ActionKind2.enter="enter";const pluginKey$4=new PluginKey("autocomplete");function inSuggestion(e,t){return t.find(e.from,e.to).length>0}function openAutocomplete(e,t,r){const n=pluginKey$4.get(e.state),i={action:"add",trigger:t,filter:r,type:null},o=e.state.tr.insertText(`${t}${null!=r?r:""}`).scrollIntoView().setMeta(n,i);e.dispatch(o)}function closeAutocomplete(e){const t=pluginKey$4.get(e.state),r=e.state.tr.setMeta(t,{action:"remove"});return e.dispatch(r),!0}const inactiveAutocompleteState={active:!1,decorations:DecorationSet.empty};function actionFromEvent(e){switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":return e.key;case"Tab":case"Enter":return ActionKind.enter;case"Escape":return ActionKind.close;default:return null}}function cancelIfInsideAndPass(e){const t=pluginKey$4.get(e.state),{decorations:r}=t.getState(e.state);return inSuggestion(e.state.selection,r)&&closeAutocomplete(e),!1}function getDecorationPlugin$1(e){const t=new Plugin({key:pluginKey$4,view:()=>({update:(r,n)=>{var i,o,s,a;const l=t.getState(n),c=t.getState(r.state),u=!l.active&&c.active,d=l.active&&!c.active,p=c.active&&!u&&!d&&l.filter!==c.filter,h={view:r,trigger:null!==(i=c.trigger)&&void 0!==i?i:l.trigger,filter:null!==(o=c.filter)&&void 0!==o?o:l.filter,range:null!==(s=c.range)&&void 0!==s?s:l.range,type:null!==(a=c.type)&&void 0!==a?a:l.type};u&&e(Object.assign(Object.assign({},h),{kind:ActionKind.open})),p&&e(Object.assign(Object.assign({},h),{kind:ActionKind.filter})),d&&e(Object.assign(Object.assign({},h),{kind:ActionKind.close}))}}),state:{init:()=>inactiveAutocompleteState,apply(e,r){var n,i,o;const s=e.getMeta(t);if("add"===(null==s?void 0:s.action)){const{trigger:t,filter:r,type:a}=s,l=e.selection.from-t.length-(null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0),c=e.selection.from,u=(null===(i=null==a?void 0:a.decorationAttrs)||void 0===i?void 0:i.class)?["autocomplete",null===(o=null==a?void 0:a.decorationAttrs)||void 0===o?void 0:o.class].join(" "):"autocomplete",d=Object.assign(Object.assign({},null==a?void 0:a.decorationAttrs),{class:u}),p=Decoration$1.inline(l,c,d,{inclusiveStart:!1,inclusiveEnd:!0});return{active:!0,trigger:s.trigger,decorations:DecorationSet.create(e.doc,[p]),filter:null!=r?r:"",range:{from:l,to:c},type:a}}const{decorations:a}=r,l=a.map(e.mapping,e.doc),c=l.find().length>0;if("remove"===(null==s?void 0:s.action)||!inSuggestion(e.selection,l)||!c)return inactiveAutocompleteState;const{active:u,trigger:d,type:p}=r,{from:h,to:f}=l.find()[0],m=e.doc.textBetween(h,f);return m.startsWith(d)?{active:u,trigger:d,decorations:l,filter:m.slice(d.length),range:{from:h,to:f},type:p}:inactiveAutocompleteState}},props:{decorations:e=>{var r;return null===(r=t.getState(e))||void 0===r?void 0:r.decorations},handlePaste:e=>cancelIfInsideAndPass(e),handleDrop:e=>cancelIfInsideAndPass(e),handleKeyDown(r,n){var i,o;const{trigger:s,active:a,decorations:l,type:c}=t.getState(r.state);if(!a||!inSuggestion(r.state.selection,l))return!1;const{from:u,to:d}=l.find()[0],p=r.state.doc.textBetween(u,d).slice(null!==(i=null==s?void 0:s.length)&&void 0!==i?i:1);if((null===(o=null==c?void 0:c.cancelOnFirstSpace)||void 0===o||o)&&0===p.length&&(" "===n.key||"Spacebar"===n.key))return closeAutocomplete(r),r.dispatch(r.state.tr.insertText(" ").scrollIntoView()),!0;if(0===p.length&&"Backspace"===n.key)return undoInputRule(r.state,r.dispatch),closeAutocomplete(r),!0;const h=actionFromEvent(n),f={view:r,trigger:s,filter:p,range:{from:u,to:d},type:c,event:n};switch(h){case ActionKind.close:return closeAutocomplete(r);case ActionKind.enter:{const t=e(Object.assign(Object.assign({},f),{kind:ActionKind.enter}));return t===KEEP_OPEN||t||closeAutocomplete(r)}case ActionKind.up:case ActionKind.down:return Boolean(e(Object.assign(Object.assign({},f),{kind:h})));case ActionKind.left:case ActionKind.right:return!!(null==c?void 0:c.allArrowKeys)&&Boolean(e(Object.assign(Object.assign({},f),{kind:h})))}return!1}}});return t}function createInputRule$1(e,t){const r="string"==typeof t.trigger?RegExp(`(?:^|\\s|\\n|[^\\d\\w])(${t.trigger.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})$`):t.trigger;return new InputRule(r,(r,n)=>{const{decorations:i}=e.getState(r);if(inSuggestion(r.selection,i))return null;const o=r.tr.insertText(n[1][n[1].length-1]).scrollIntoView(),s={action:"add",trigger:n[1],type:t};return o.setMeta(e,s),o})}function defaultReducer(e){return t=>{var r,n,i,o,s,a,l,c,u,d;switch(t.kind){case ActionKind.open:return null!==(n=null===(r=e.onOpen)||void 0===r?void 0:r.call(e,t))&&void 0!==n&&n;case ActionKind.close:return null!==(o=null===(i=e.onClose)||void 0===i?void 0:i.call(e,t))&&void 0!==o&&o;case ActionKind.up:case ActionKind.down:case ActionKind.left:case ActionKind.right:return null!==(a=null===(s=e.onArrow)||void 0===s?void 0:s.call(e,t))&&void 0!==a&&a;case ActionKind.filter:return null!==(c=null===(l=e.onFilter)||void 0===l?void 0:l.call(e,t))&&void 0!==c&&c;case ActionKind.enter:return null!==(d=null===(u=e.onEnter)||void 0===u?void 0:u.call(e,t))&&void 0!==d&&d;default:return!1}}}function autocomplete(e={}){const t=Object.assign({triggers:[],reducer:defaultReducer(e)},e),{reducer:r,triggers:n}=t,i=getDecorationPlugin$1(r);return[i,inputRules({rules:n.map(e=>createInputRule$1(i,e))})]}class MainHandler{static log(e,t){const r="[Autocomplete]";if("destroy"===t.event)return e.log(`${r} Destroy`),void globalLogger.log(`${r} Destroy`);const{action:n,item:i}=t,o=[r,capitalize(t.event),`Trigger="${n.trigger}"`,"Filter="+(void 0!==n.filter?`"${n.filter}"`:"None"),"Type="+(n.type?`"${n.type.name}"`:"None"),"Handler="+(i?`"${i.trigger.name}"`:"None")].join(" ");e.log(o),globalLogger.log(o)}config;logger;constructor(e,t){this.config=e,this.logger=t.nested({module:"autocomplete-main-handler"})}onOpen(e){const t=this.getItem(e);return MainHandler.log(this.logger,{event:"open",action:e,item:t}),t?.handler.onOpen?.(e)??!1}onClose(e){const t=this.getItem(e);return MainHandler.log(this.logger,{event:"close",action:e,item:t}),t?.handler.onClose?.(e)??!1}onArrow(e){const t=this.getItem(e);return MainHandler.log(this.logger,{event:"arrow",action:e,item:t}),t?.handler.onArrow?.(e)??!1}onEnter(e){const t=this.getItem(e);return MainHandler.log(this.logger,{event:"enter",action:e,item:t}),t?.handler.onEnter?.(e)??!1}onFilter(e){const t=this.getItem(e);return MainHandler.log(this.logger,{event:"filter",action:e,item:t}),t?.handler.onFilter?.(e)??!1}onDestroy(){MainHandler.log(this.logger,{event:"destroy"});for(const e of this.config)e.handler.onDestroy?.()}getItem({trigger:e,type:t}){let r;return r=t?e=>e.trigger.name===t.name:t=>{const r=t.trigger.trigger;return isString$1(r)?r===e:r.test(e)},this.config.find(r)}}function getAutocompleteState(e){return pluginKey$4.getState(e)||null}const AutocompleteDecoClassName="autocomplete",Autocomplete=e=>{const t=new Set;e.context.set("autocomplete",t),e.addPlugin(r=>{const n=[],i=[];for(const e of t){const t=isFunction$1(e)?e(r):e;n.push(t.trigger),i.push(t)}const o=new MainHandler(i,e.logger);return autocomplete({triggers:n,onOpen:o.onOpen.bind(o),onClose:o.onClose.bind(o),onFilter:o.onFilter.bind(o),onArrow:o.onArrow.bind(o),onEnter:o.onEnter.bind(o)}).concat(new Plugin({view:()=>({destroy:()=>o.onDestroy()})}))},e.Priority.VeryHigh)};class AutocompletePopupCloser{#r;#N;constructor(e){this.#r=e}popupOpenChangeHandler=(e,t,r)=>{"escape-key"!==r?this.#r.hasFocus()||(this.#N=setTimeout(()=>{this.#N=void 0,this.#r.hasFocus()||this.closeAutocomplete()},20)):this.closeAutocomplete()};closeAutocomplete(){closeAutocomplete(this.#r)}cancelTimer(){void 0!==this.#N&&(clearTimeout(this.#N),this.#N=void 0)}}class IndexCarousel{static isValidLength(e){return Number.isSafeInteger(length)&&e>=0}length;_current=0;constructor(e,t){if(!IndexCarousel.isValidLength(e))throw new Error("IndexCarousel: length must be greater or equal zero");if(this.length=e,void 0!==t){if(!Number.isSafeInteger(t))throw new Error("IndexCarousel: start must be safe integer");if(t<0)throw new Error("IndexCarousel: start must be greater or equal zero");if(t>=e)throw new Error("IndexCarousel: start must be lower than length");this.current=t}}get current(){return this.length<=0?-1:this._current}set current(e){if(e<0||e>=this.length)throw new Error("IndexCarousel: new current must be in the range from 0 to length-1");this._current=e}next(){if(this.length<=0)return-1;let e=this.current+1;return e%=this.length,this.current=e,e}prev(){if(this.length<=0)return-1;let e=this.current-1;return e+=this.length,e%=this.length,this.current=e,e}reset(e){if(void 0!==e){if(!IndexCarousel.isValidLength(e))throw new Error("IndexCarousel: newLength must be greater or equal zero");this.length=e}this.current=0}}class ArrayCarousel{_array;indexCarousel;constructor(e){if(!Array.isArray(e))throw new Error('ArrayCarousel: "array" argument must be array');this._array=e,this.indexCarousel=new IndexCarousel(e.length)}get array(){return this._array}get currentIndex(){return this.indexCarousel.current}set currentIndex(e){this.indexCarousel.current=e}get currentItem(){return this.array[this.currentIndex]}next(){return this.indexCarousel.next(),this}prev(){return this.indexCarousel.prev(),this}}var DataTransferType$1,DataTransferType2;function isFilesOnly$3({types:e}){return 1===e.length&&e[0]===DataTransferType$1.Files}function isFilesFromHtml$3({types:e}){return 2===e.length&&e.includes(DataTransferType$1.Files)&&e.includes(DataTransferType$1.Html)}function isImageFile$3(e){return e.type.startsWith("image/")}function isVSCode(e){return e.types.includes(DataTransferType$1.VSCodeData)}function tryParseVSCodeData(e){try{return JSON.parse(e.getData(DataTransferType$1.VSCodeData))}catch(t){return}}function shouldSkipHtmlConversion(e){return!e.types.includes(DataTransferType$1.Html)||1!==e.types.length&&(2!==e.types.length&&(3!==e.types.length||e.getData(DataTransferType$1.Rtf).indexOf("\fmodern JetBrains")>0))}DataTransferType2=DataTransferType$1||(DataTransferType$1={}),DataTransferType2.Text="text/plain",DataTransferType2.Html="text/html",DataTransferType2.Yfm="text/yfm",DataTransferType2.Rtf="text/rtf",DataTransferType2.UriList="text/uri-list",DataTransferType2.VSCodeData="vscode-editor-data",DataTransferType2.Files="Files";const reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);function escapeRegExp(e){return e&&reHasRegExpChar.test(e)?e.replace(reRegExpChar,"\\$&"):e||""}const REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function validate(e){return"string"==typeof e&&REGEX.test(e)}function parse$7(e){if(!validate(e))throw TypeError("Invalid UUID");let t;return Uint8Array.of((t=parseInt(e.slice(0,8),16))>>>24,t>>>16&255,t>>>8&255,255&t,(t=parseInt(e.slice(9,13),16))>>>8,255&t,(t=parseInt(e.slice(14,18),16))>>>8,255&t,(t=parseInt(e.slice(19,23),16))>>>8,255&t,(t=parseInt(e.slice(24,36),16))/1099511627776&255,t/4294967296&255,t>>>24&255,t>>>16&255,t>>>8&255,255&t)}const byteToHex=[];for(let e=0;e<256;++e)byteToHex.push((e+256).toString(16).slice(1));function unsafeStringify(e,t=0){return(byteToHex[e[t+0]]+byteToHex[e[t+1]]+byteToHex[e[t+2]]+byteToHex[e[t+3]]+"-"+byteToHex[e[t+4]]+byteToHex[e[t+5]]+"-"+byteToHex[e[t+6]]+byteToHex[e[t+7]]+"-"+byteToHex[e[t+8]]+byteToHex[e[t+9]]+"-"+byteToHex[e[t+10]]+byteToHex[e[t+11]]+byteToHex[e[t+12]]+byteToHex[e[t+13]]+byteToHex[e[t+14]]+byteToHex[e[t+15]]).toLowerCase()}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");getRandomValues=crypto.getRandomValues.bind(crypto)}return getRandomValues(rnds8)}function stringToBytes(e){e=unescape(encodeURIComponent(e));const t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r);return t}const DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(e,t,r,n,i,o){const s="string"==typeof r?stringToBytes(r):r,a="string"==typeof n?parse$7(n):n;if("string"==typeof n&&(n=parse$7(n)),16!==n?.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+s.length);if(l.set(a),l.set(s,a.length),l=t(l),l[6]=15&l[6]|e,l[8]=63&l[8]|128,i){o=o||0;for(let e=0;e<16;++e)i[o+e]=l[e];return i}return unsafeStringify(l)}const randomUUID="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID:randomUUID};function v4(e,t,r){if(native.randomUUID&&!e)return native.randomUUID();const n=(e=e||{}).random??e.rng?.()??rng();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=15&n[6]|64,n[8]=63&n[8]|128,unsafeStringify(n)}function f(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function ROTL(e,t){return e<<t|e>>>32-t}function sha1(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520],n=new Uint8Array(e.length+1);n.set(e),n[e.length]=128;const i=(e=n).length/4+2,o=Math.ceil(i/16),s=new Array(o);for(let a=0;a<o;++a){const t=new Uint32Array(16);for(let r=0;r<16;++r)t[r]=e[64*a+4*r]<<24|e[64*a+4*r+1]<<16|e[64*a+4*r+2]<<8|e[64*a+4*r+3];s[a]=t}s[o-1][14]=8*(e.length-1)/Math.pow(2,32),s[o-1][14]=Math.floor(s[o-1][14]),s[o-1][15]=8*(e.length-1)&4294967295;for(let a=0;a<o;++a){const e=new Uint32Array(80);for(let t=0;t<16;++t)e[t]=s[a][t];for(let t=16;t<80;++t)e[t]=ROTL(e[t-3]^e[t-8]^e[t-14]^e[t-16],1);let n=r[0],i=r[1],o=r[2],l=r[3],c=r[4];for(let r=0;r<80;++r){const s=Math.floor(r/20),a=ROTL(n,5)+f(s,i,o,l)+c+t[s]+e[r]>>>0;c=l,l=o,o=ROTL(i,30)>>>0,i=n,n=a}r[0]=r[0]+n>>>0,r[1]=r[1]+i>>>0,r[2]=r[2]+o>>>0,r[3]=r[3]+l>>>0,r[4]=r[4]+c>>>0}return Uint8Array.of(r[0]>>24,r[0]>>16,r[0]>>8,r[0],r[1]>>24,r[1]>>16,r[1]>>8,r[1],r[2]>>24,r[2]>>16,r[2]>>8,r[2],r[3]>>24,r[3]>>16,r[3]>>8,r[3],r[4]>>24,r[4]>>16,r[4]>>8,r[4])}function v5(e,t,r,n){return v35(80,sha1,e,t,r,n)}v5.DNS=DNS,v5.URL=URL$1;const boldMarkName="strong",boldType=markTypeFactory(boldMarkName),BoldAttrs={Markup:"data-markup"},defaultMarkup$1="**",BoldSpecs=e=>{e.addMark(boldMarkName,()=>({spec:{attrs:{[BoldAttrs.Markup]:{default:defaultMarkup$1}},parseDOM:[{tag:"b"},{tag:"strong",getAttrs:e=>({[BoldAttrs.Markup]:e.getAttribute(BoldAttrs.Markup)})},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:e=>["strong",e.attrs]},fromMd:{tokenSpec:{name:boldMarkName,type:"mark",getAttrs:e=>({[BoldAttrs.Markup]:e.markup})}},toMd:{open:getMarkup$1,close:getMarkup$1,mixable:!0,expelEnclosingWhitespace:!0}}))};function getMarkup$1(e,t){return t.attrs[BoldAttrs.Markup]||defaultMarkup$1}const codeMarkName="code",codeType=markTypeFactory(codeMarkName),CodeSpecs=e=>{e.addMark(codeMarkName,()=>({spec:{code:!0,parseDOM:[{tag:"code"}],toDOM:()=>["code"]},toMd:{open:(e,t,r,n)=>backticksFor(r.child(n),-1),close:(e,t,r,n)=>backticksFor(r.child(n-1),1),escape:!1},fromMd:{tokenSpec:{name:codeMarkName,type:"mark",code:!0,noCloseToken:!0},tokenName:"code_inline"}}),e.Priority.Lowest)};function backticksFor(e,t){const r=/`+/g;let n,i=0;if(e.isText)for(;n=r.exec(e.text||"");)i=Math.max(i,n[0].length);let o=i>0&&t>0?" `":"`";for(let s=0;s<i;s++)o+="`";return i>0&&t<0&&(o+=" "),o}const linkMarkName="link",linkType=markTypeFactory(linkMarkName);var LinkAttr,LinkAttr2;LinkAttr2=LinkAttr||(LinkAttr={}),LinkAttr2.Href="href",LinkAttr2.Title="title",LinkAttr2.IsPlaceholder="is-placeholder",LinkAttr2.RawLink="raw-link";const LinkSpecs=e=>{e.addMark(linkMarkName,()=>({spec:{attrs:{[LinkAttr.Href]:{},[LinkAttr.Title]:{default:null},[LinkAttr.IsPlaceholder]:{default:!1},[LinkAttr.RawLink]:{default:!1}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:e=>({href:e.getAttribute(LinkAttr.Href),title:e.getAttribute(LinkAttr.Title)})}],toDOM:e=>["a",e.attrs]},toMd:{open:(e,t,r,n)=>(e.isAutolink=isPlainURL(t,r,n),e.isAutolink?t.attrs[LinkAttr.RawLink]?"":"<":"["),close:(e,t)=>e.isAutolink?(e.isAutolink=void 0,t.attrs[LinkAttr.RawLink]?"":">"):(e.isAutolink=void 0,"]("+escapeParenthesesInUrl(t.attrs[LinkAttr.Href])+(t.attrs[LinkAttr.Title]?" "+e.quote(t.attrs[LinkAttr.Title]):"")+")")},fromMd:{tokenSpec:{name:linkMarkName,type:"mark",getAttrs:e=>({href:e.attrGet("href"),title:e.attrGet("title")||null})}}}),e.Priority.High)};function isPlainURL(e,t,r,n){if(e.attrs.title||!/^\w+:/.test(e.attrs[LinkAttr.Href]))return!1;const i=t.child(r+0);if(!i.isText||i.text!==e.attrs[LinkAttr.Href]||i.marks[i.marks.length-1]!==e)return!1;if(r===t.childCount-1)return!0;const o=t.child(r+1);return!e.isInSet(o.marks)}function escapeParenthesesInUrl(e){return e.replaceAll(/\(|\)/g,e=>"\\"+e)}const italicMarkName="em",italicType=markTypeFactory(italicMarkName),ItalicAttrs={Markup:"data-markup"},defaultMarkup="*",ItalicSpecs=e=>{e.addMark(italicMarkName,()=>({spec:{attrs:{[ItalicAttrs.Markup]:{default:defaultMarkup}},parseDOM:[{tag:"i"},{tag:"em",getAttrs:e=>({[ItalicAttrs.Markup]:e.getAttribute(ItalicAttrs.Markup)})},{style:"font-style",getAttrs:e=>"italic"===e&&null}],toDOM:e=>["em",e.attrs]},toMd:{open:getMarkup,close:getMarkup,mixable:!0,expelEnclosingWhitespace:!0},fromMd:{tokenSpec:{name:italicMarkName,type:"mark",getAttrs:e=>({[ItalicAttrs.Markup]:e.markup})}}}))};function getMarkup(e,t){return t.attrs[ItalicAttrs.Markup]||defaultMarkup}const strikeMarkName="strike",strikeType=markTypeFactory(strikeMarkName),StrikeSpecs=e=>{e.addMark(strikeMarkName,()=>({spec:{parseDOM:[{tag:"strike"},{tag:"s"}],toDOM:()=>["strike"]},fromMd:{tokenSpec:{name:strikeMarkName,type:"mark"},tokenName:"s"},toMd:{open:"~~",close:"~~",mixable:!0,expelEnclosingWhitespace:!0}}))};var markdownItIns,hasRequiredMarkdownItIns;function requireMarkdownItIns(){return hasRequiredMarkdownItIns?markdownItIns:(hasRequiredMarkdownItIns=1,markdownItIns=function(e){function t(e,t){var r,n,i,o,s,a=[],l=t.length;for(r=0;r<l;r++)43===(i=t[r]).marker&&-1!==i.end&&(o=t[i.end],(s=e.tokens[i.token]).type="ins_open",s.tag="ins",s.nesting=1,s.markup="++",s.content="",(s=e.tokens[o.token]).type="ins_close",s.tag="ins",s.nesting=-1,s.markup="++",s.content="","text"===e.tokens[o.token-1].type&&"+"===e.tokens[o.token-1].content&&a.push(o.token-1));for(;a.length;){for(n=(r=a.pop())+1;n<e.tokens.length&&"ins_close"===e.tokens[n].type;)n++;r!==--n&&(s=e.tokens[n],e.tokens[n]=e.tokens[r],e.tokens[r]=s)}}e.inline.ruler.before("emphasis","ins",function(e,t){var r,n,i,o,s=e.pos,a=e.src.charCodeAt(s);if(t)return!1;if(43!==a)return!1;if(i=(n=e.scanDelims(e.pos,!0)).length,o=String.fromCharCode(a),i<2)return!1;for(i%2&&(e.push("text","",0).content=o,i--),r=0;r<i;r+=2)e.push("text","",0).content=o+o,(n.can_open||n.can_close)&&e.delimiters.push({marker:a,length:0,jump:r/2,token:e.tokens.length-1,end:-1,open:n.can_open,close:n.can_close});return e.pos+=n.length,!0}),e.inline.ruler2.before("emphasis","ins",function(e){var r,n=e.tokens_meta,i=(e.tokens_meta||[]).length;for(t(e,e.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&t(e,n[r].delimiters)})})}var markdownItInsExports=requireMarkdownItIns();const insPlugin=getDefaultExportFromCjs(markdownItInsExports),underlineMarkName="ins",underlineType=markTypeFactory(underlineMarkName),UnderlineSpecs=e=>{e.configureMd(e=>e.use(insPlugin)).addMark(underlineMarkName,()=>({spec:{parseDOM:[{tag:"ins"},{tag:"u"}],toDOM:()=>["ins"]},toMd:{open:"++",close:"++",mixable:!0,expelEnclosingWhitespace:!0},fromMd:{tokenSpec:{name:underlineMarkName,type:"mark"}}}))};var markdownItMark,hasRequiredMarkdownItMark;function requireMarkdownItMark(){return hasRequiredMarkdownItMark?markdownItMark:(hasRequiredMarkdownItMark=1,markdownItMark=function(e){function t(e,t){var r,n,i,o,s,a=[],l=t.length;for(r=0;r<l;r++)61===(i=t[r]).marker&&-1!==i.end&&(o=t[i.end],(s=e.tokens[i.token]).type="mark_open",s.tag="mark",s.nesting=1,s.markup="==",s.content="",(s=e.tokens[o.token]).type="mark_close",s.tag="mark",s.nesting=-1,s.markup="==",s.content="","text"===e.tokens[o.token-1].type&&"="===e.tokens[o.token-1].content&&a.push(o.token-1));for(;a.length;){for(n=(r=a.pop())+1;n<e.tokens.length&&"mark_close"===e.tokens[n].type;)n++;r!==--n&&(s=e.tokens[n],e.tokens[n]=e.tokens[r],e.tokens[r]=s)}}e.inline.ruler.before("emphasis","mark",function(e,t){var r,n,i,o,s=e.pos,a=e.src.charCodeAt(s);if(t)return!1;if(61!==a)return!1;if(i=(n=e.scanDelims(e.pos,!0)).length,o=String.fromCharCode(a),i<2)return!1;for(i%2&&(e.push("text","",0).content=o,i--),r=0;r<i;r+=2)e.push("text","",0).content=o+o,(n.can_open||n.can_close)&&e.delimiters.push({marker:a,length:0,jump:r/2,token:e.tokens.length-1,end:-1,open:n.can_open,close:n.can_close});return e.pos+=n.length,!0}),e.inline.ruler2.before("emphasis","mark",function(e){var r,n=e.tokens_meta,i=(e.tokens_meta||[]).length;for(t(e,e.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&t(e,n[r].delimiters)})})}var markdownItMarkExports=requireMarkdownItMark();const markPlugin=getDefaultExportFromCjs(markdownItMarkExports),markMarkName="mark",markMarkType=markTypeFactory(markMarkName),MarkSpecs=e=>{e.configureMd(e=>e.use(markPlugin)).addMark(markMarkName,()=>({spec:{parseDOM:[{tag:"mark"}],toDOM:()=>["mark"]},fromMd:{tokenSpec:{name:markMarkName,type:"mark"}},toMd:{open:"==",close:"==",mixable:!0,expelEnclosingWhitespace:!0}}))};var markdownItSub,hasRequiredMarkdownItSub;function requireMarkdownItSub(){if(hasRequiredMarkdownItSub)return markdownItSub;hasRequiredMarkdownItSub=1;var e=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function t(t,r){var n,i,o=t.posMax,s=t.pos;if(126!==t.src.charCodeAt(s))return!1;if(r)return!1;if(s+2>=o)return!1;for(t.pos=s+1;t.pos<o;){if(126===t.src.charCodeAt(t.pos)){n=!0;break}t.md.inline.skipToken(t)}return n&&s+1!==t.pos?(i=t.src.slice(s+1,t.pos)).match(/(^|[^\\])(\\\\)*\s/)?(t.pos=s,!1):(t.posMax=t.pos,t.pos=s+1,t.push("sub_open","sub",1).markup="~",t.push("text","",0).content=i.replace(e,"$1"),t.push("sub_close","sub",-1).markup="~",t.pos=t.posMax+1,t.posMax=o,!0):(t.pos=s,!1)}return markdownItSub=function(e){e.inline.ruler.after("emphasis","sub",t)}}var markdownItSubExports=requireMarkdownItSub();const subPlugin=getDefaultExportFromCjs(markdownItSubExports),subscriptMarkName="sub",subscriptType=markTypeFactory(subscriptMarkName),SubscriptSpecs=e=>{e.configureMd(e=>e.use(subPlugin)).addMark(subscriptMarkName,()=>({spec:{excludes:"_",parseDOM:[{tag:"sub"}],toDOM:()=>["sub"]},toMd:{open:e=>(e.escapeWhitespace=!0,"~"),close:e=>(e.escapeWhitespace=!1,"~"),mixable:!1,expelEnclosingWhitespace:!0},fromMd:{tokenSpec:{name:subscriptMarkName,type:"mark"}}}))};var log={},ansiStyles={exports:{}},colorName,hasRequiredColorName,conversions,hasRequiredConversions,route,hasRequiredRoute,colorConvert,hasRequiredColorConvert,hasRequiredAnsiStyles,browser$3,hasRequiredBrowser$1,util$2,hasRequiredUtil$2,templates,hasRequiredTemplates,source,hasRequiredSource,hasRequiredLog;function requireColorName(){return hasRequiredColorName?colorName:(hasRequiredColorName=1,colorName={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]})}function requireConversions(){if(hasRequiredConversions)return conversions;hasRequiredConversions=1;const e=requireColorName(),t={};for(const i of Object.keys(e))t[e[i]]=i;const r={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};conversions=r;for(const i of Object.keys(r)){if(!("channels"in r[i]))throw new Error("missing channels property: "+i);if(!("labels"in r[i]))throw new Error("missing channel labels property: "+i);if(r[i].labels.length!==r[i].channels)throw new Error("channel and label counts mismatch: "+i);const{channels:e,labels:t}=r[i];delete r[i].channels,delete r[i].labels,Object.defineProperty(r[i],"channels",{value:e}),Object.defineProperty(r[i],"labels",{value:t})}function n(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}return r.rgb.hsl=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),o=Math.max(t,r,n),s=o-i;let a,l;o===i?a=0:t===o?a=(r-n)/s:r===o?a=2+(n-t)/s:n===o&&(a=4+(t-r)/s),a=Math.min(60*a,360),a<0&&(a+=360);const c=(i+o)/2;return l=o===i?0:c<=.5?s/(o+i):s/(2-o-i),[a,100*l,100*c]},r.rgb.hsv=function(e){let t,r,n,i,o;const s=e[0]/255,a=e[1]/255,l=e[2]/255,c=Math.max(s,a,l),u=c-Math.min(s,a,l),d=function(e){return(c-e)/6/u+.5};return 0===u?(i=0,o=0):(o=u/c,t=d(s),r=d(a),n=d(l),s===c?i=n-r:a===c?i=1/3+t-n:l===c&&(i=2/3+r-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*c]},r.rgb.hwb=function(e){const t=e[0],n=e[1];let i=e[2];const o=r.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(n,i));return i=1-1/255*Math.max(t,Math.max(n,i)),[o,100*s,100*i]},r.rgb.cmyk=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(1-t,1-r,1-n);return[100*((1-t-i)/(1-i)||0),100*((1-r-i)/(1-i)||0),100*((1-n-i)/(1-i)||0),100*i]},r.rgb.keyword=function(r){const i=t[r];if(i)return i;let o,s=1/0;for(const t of Object.keys(e)){const i=n(r,e[t]);i<s&&(s=i,o=t)}return o},r.keyword.rgb=function(t){return e[t]},r.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255;return t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,[100*(.4124*t+.3576*r+.1805*n),100*(.2126*t+.7152*r+.0722*n),100*(.0193*t+.1192*r+.9505*n)]},r.rgb.lab=function(e){const t=r.rgb.xyz(e);let n=t[0],i=t[1],o=t[2];return n/=95.047,i/=100,o/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,o=o>.008856?o**(1/3):7.787*o+16/116,[116*i-16,500*(n-i),200*(i-o)]},r.hsl.rgb=function(e){const t=e[0]/360,r=e[1]/100,n=e[2]/100;let i,o,s;if(0===r)return s=255*n,[s,s,s];i=n<.5?n*(1+r):n+r-n*r;const a=2*n-i,l=[0,0,0];for(let c=0;c<3;c++)o=t+1/3*-(c-1),o<0&&o++,o>1&&o--,s=6*o<1?a+6*(i-a)*o:2*o<1?i:3*o<2?a+(i-a)*(2/3-o)*6:a,l[c]=255*s;return l},r.hsl.hsv=function(e){const t=e[0];let r=e[1]/100,n=e[2]/100,i=r;const o=Math.max(n,.01);return n*=2,r*=n<=1?n:2-n,i*=o<=1?o:2-o,[t,100*(0===n?2*i/(o+i):2*r/(n+r)),(n+r)/2*100]},r.hsv.rgb=function(e){const t=e[0]/60,r=e[1]/100;let n=e[2]/100;const i=Math.floor(t)%6,o=t-Math.floor(t),s=255*n*(1-r),a=255*n*(1-r*o),l=255*n*(1-r*(1-o));switch(n*=255,i){case 0:return[n,l,s];case 1:return[a,n,s];case 2:return[s,n,l];case 3:return[s,a,n];case 4:return[l,s,n];case 5:return[n,s,a]}},r.hsv.hsl=function(e){const t=e[0],r=e[1]/100,n=e[2]/100,i=Math.max(n,.01);let o,s;s=(2-r)*n;const a=(2-r)*i;return o=r*i,o/=a<=1?a:2-a,o=o||0,s/=2,[t,100*o,100*s]},r.hwb.rgb=function(e){const t=e[0]/360;let r=e[1]/100,n=e[2]/100;const i=r+n;let o;i>1&&(r/=i,n/=i);const s=Math.floor(6*t),a=1-n;o=6*t-s,1&s&&(o=1-o);const l=r+o*(a-r);let c,u,d;switch(s){default:case 6:case 0:c=a,u=l,d=r;break;case 1:c=l,u=a,d=r;break;case 2:c=r,u=a,d=l;break;case 3:c=r,u=l,d=a;break;case 4:c=l,u=r,d=a;break;case 5:c=a,u=r,d=l}return[255*c,255*u,255*d]},r.cmyk.rgb=function(e){const t=e[0]/100,r=e[1]/100,n=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i))]},r.xyz.rgb=function(e){const t=e[0]/100,r=e[1]/100,n=e[2]/100;let i,o,s;return i=3.2406*t+-1.5372*r+-.4986*n,o=-.9689*t+1.8758*r+.0415*n,s=.0557*t+-.204*r+1.057*n,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[255*i,255*o,255*s]},r.xyz.lab=function(e){let t=e[0],r=e[1],n=e[2];return t/=95.047,r/=100,n/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,[116*r-16,500*(t-r),200*(r-n)]},r.lab.xyz=function(e){let t,r,n;r=(e[0]+16)/116,t=e[1]/500+r,n=r-e[2]/200;const i=r**3,o=t**3,s=n**3;return r=i>.008856?i:(r-16/116)/7.787,t=o>.008856?o:(t-16/116)/7.787,n=s>.008856?s:(n-16/116)/7.787,t*=95.047,r*=100,n*=108.883,[t,r,n]},r.lab.lch=function(e){const t=e[0],r=e[1],n=e[2];let i;return i=360*Math.atan2(n,r)/2/Math.PI,i<0&&(i+=360),[t,Math.sqrt(r*r+n*n),i]},r.lch.lab=function(e){const t=e[0],r=e[1],n=e[2]/360*2*Math.PI;return[t,r*Math.cos(n),r*Math.sin(n)]},r.rgb.ansi16=function(e,t=null){const[n,i,o]=e;let s=null===t?r.rgb.hsv(e)[2]:t;if(s=Math.round(s/50),0===s)return 30;let a=30+(Math.round(o/255)<<2|Math.round(i/255)<<1|Math.round(n/255));return 2===s&&(a+=60),a},r.hsv.ansi16=function(e){return r.rgb.ansi16(r.hsv.rgb(e),e[2])},r.rgb.ansi256=function(e){const t=e[0],r=e[1],n=e[2];return t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},r.ansi16.rgb=function(e){let t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const r=.5*(1+~~(e>50));return[(1&t)*r*255,(t>>1&1)*r*255,(t>>2&1)*r*255]},r.ansi256.rgb=function(e){if(e>=232){const t=10*(e-232)+8;return[t,t,t]}let t;return e-=16,[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},r.rgb.hex=function(e){const t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},r.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];3===t[0].length&&(r=r.split("").map(e=>e+e).join(""));const n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},r.rgb.hcg=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.max(Math.max(t,r),n),o=Math.min(Math.min(t,r),n),s=i-o;let a,l;return a=s<1?o/(1-s):0,l=s<=0?0:i===t?(r-n)/s%6:i===r?2+(n-t)/s:4+(t-r)/s,l/=6,l%=1,[360*l,100*s,100*a]},r.hsl.hcg=function(e){const t=e[1]/100,r=e[2]/100,n=r<.5?2*t*r:2*t*(1-r);let i=0;return n<1&&(i=(r-.5*n)/(1-n)),[e[0],100*n,100*i]},r.hsv.hcg=function(e){const t=e[1]/100,r=e[2]/100,n=t*r;let i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]},r.hcg.rgb=function(e){const t=e[0]/360,r=e[1]/100,n=e[2]/100;if(0===r)return[255*n,255*n,255*n];const i=[0,0,0],o=t%1*6,s=o%1,a=1-s;let l=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return l=(1-r)*n,[255*(r*i[0]+l),255*(r*i[1]+l),255*(r*i[2]+l)]},r.hcg.hsv=function(e){const t=e[1]/100,r=t+e[2]/100*(1-t);let n=0;return r>0&&(n=t/r),[e[0],100*n,100*r]},r.hcg.hsl=function(e){const t=e[1]/100,r=e[2]/100*(1-t)+.5*t;let n=0;return r>0&&r<.5?n=t/(2*r):r>=.5&&r<1&&(n=t/(2*(1-r))),[e[0],100*n,100*r]},r.hcg.hwb=function(e){const t=e[1]/100,r=t+e[2]/100*(1-t);return[e[0],100*(r-t),100*(1-r)]},r.hwb.hcg=function(e){const t=e[1]/100,r=1-e[2]/100,n=r-t;let i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]},r.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},r.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},r.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},r.gray.hsl=function(e){return[0,0,e[0]]},r.gray.hsv=r.gray.hsl,r.gray.hwb=function(e){return[0,100,e[0]]},r.gray.cmyk=function(e){return[0,0,0,e[0]]},r.gray.lab=function(e){return[e[0],0,0]},r.gray.hex=function(e){const t=255&Math.round(e[0]/100*255),r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r},r.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]},conversions}function requireRoute(){if(hasRequiredRoute)return route;hasRequiredRoute=1;const e=requireConversions();function t(e,t){return function(r){return t(e(r))}}function r(r,n){const i=[n[r].parent,r];let o=e[n[r].parent][r],s=n[r].parent;for(;n[s].parent;)i.unshift(n[s].parent),o=t(e[n[s].parent][s],o),s=n[s].parent;return o.conversion=i,o}return route=function(t){const n=function(t){const r=function(){const t={},r=Object.keys(e);for(let e=r.length,n=0;n<e;n++)t[r[n]]={distance:-1,parent:null};return t}(),n=[t];for(r[t].distance=0;n.length;){const t=n.pop(),i=Object.keys(e[t]);for(let e=i.length,o=0;o<e;o++){const e=i[o],s=r[e];-1===s.distance&&(s.distance=r[t].distance+1,s.parent=t,n.unshift(e))}}return r}(t),i={},o=Object.keys(n);for(let e=o.length,s=0;s<e;s++){const e=o[s];null!==n[e].parent&&(i[e]=r(e,n))}return i}}function requireColorConvert(){if(hasRequiredColorConvert)return colorConvert;hasRequiredColorConvert=1;const e=requireConversions(),t=requireRoute(),r={};return Object.keys(e).forEach(n=>{r[n]={},Object.defineProperty(r[n],"channels",{value:e[n].channels}),Object.defineProperty(r[n],"labels",{value:e[n].labels});const i=t(n);Object.keys(i).forEach(e=>{const t=i[e];r[n][e]=function(e){const t=function(...t){const r=t[0];if(null==r)return r;r.length>1&&(t=r);const n=e(t);if("object"==typeof n)for(let e=n.length,i=0;i<e;i++)n[i]=Math.round(n[i]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}(t),r[n][e].raw=function(e){const t=function(...t){const r=t[0];return null==r?r:(r.length>1&&(t=r),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(t)})}),colorConvert=r}function requireAnsiStyles(){return hasRequiredAnsiStyles||(hasRequiredAnsiStyles=1,function(e){const t=(e,t)=>(...r)=>`[${e(...r)+t}m`,r=(e,t)=>(...r)=>{const n=e(...r);return`[${38+t};5;${n}m`},n=(e,t)=>(...r)=>{const n=e(...r);return`[${38+t};2;${n[0]};${n[1]};${n[2]}m`},i=e=>e,o=(e,t,r)=>[e,t,r],s=(e,t,r)=>{Object.defineProperty(e,t,{get:()=>{const n=r();return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0}),n},enumerable:!0,configurable:!0})};let a;const l=(e,t,r,n)=>{void 0===a&&(a=requireColorConvert());const i=n?10:0,o={};for(const[s,l]of Object.entries(a)){const n="ansi16"===s?"ansi":s;s===t?o[n]=e(r,i):"object"==typeof l&&(o[n]=e(l[t],i))}return o};Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,a={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};a.color.gray=a.color.blackBright,a.bgColor.bgGray=a.bgColor.bgBlackBright,a.color.grey=a.color.blackBright,a.bgColor.bgGrey=a.bgColor.bgBlackBright;for(const[t,r]of Object.entries(a)){for(const[t,n]of Object.entries(r))a[t]={open:`[${n[0]}m`,close:`[${n[1]}m`},r[t]=a[t],e.set(n[0],n[1]);Object.defineProperty(a,t,{value:r,enumerable:!1})}return Object.defineProperty(a,"codes",{value:e,enumerable:!1}),a.color.close="[39m",a.bgColor.close="[49m",s(a.color,"ansi",()=>l(t,"ansi16",i,!1)),s(a.color,"ansi256",()=>l(r,"ansi256",i,!1)),s(a.color,"ansi16m",()=>l(n,"rgb",o,!1)),s(a.bgColor,"ansi",()=>l(t,"ansi16",i,!0)),s(a.bgColor,"ansi256",()=>l(r,"ansi256",i,!0)),s(a.bgColor,"ansi16m",()=>l(n,"rgb",o,!0)),a}})}(ansiStyles)),ansiStyles.exports}function requireBrowser$1(){return hasRequiredBrowser$1?browser$3:(hasRequiredBrowser$1=1,browser$3={stdout:!1,stderr:!1})}function requireUtil$2(){return hasRequiredUtil$2?util$2:(hasRequiredUtil$2=1,util$2={stringReplaceAll:(e,t,r)=>{let n=e.indexOf(t);if(-1===n)return e;const i=t.length;let o=0,s="";do{s+=e.substr(o,n-o)+t+r,o=n+i,n=e.indexOf(t,o)}while(-1!==n);return s+=e.substr(o),s},stringEncaseCRLFWithFirstIndex:(e,t,r,n)=>{let i=0,o="";do{const s="\r"===e[n-1];o+=e.substr(i,(s?n-1:n)-i)+t+(s?"\r\n":"\n")+r,i=n+1,n=e.indexOf("\n",i)}while(-1!==n);return o+=e.substr(i),o}})}function requireTemplates(){if(hasRequiredTemplates)return templates;hasRequiredTemplates=1;const e=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,t=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,r=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,n=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,i=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function o(e){const t="u"===e[0],r="{"===e[1];return t&&!r&&5===e.length||"x"===e[0]&&3===e.length?String.fromCharCode(parseInt(e.slice(1),16)):t&&r?String.fromCodePoint(parseInt(e.slice(2,-1),16)):i.get(e)||e}function s(e,t){const i=[],s=t.trim().split(/\s*,\s*/g);let a;for(const l of s){const t=Number(l);if(Number.isNaN(t)){if(!(a=l.match(r)))throw new Error(`Invalid Chalk template style argument: ${l} (in style '${e}')`);i.push(a[2].replace(n,(e,t,r)=>t?o(t):r))}else i.push(t)}return i}function a(e){t.lastIndex=0;const r=[];let n;for(;null!==(n=t.exec(e));){const e=n[1];if(n[2]){const t=s(e,n[2]);r.push([e].concat(t))}else r.push([e])}return r}function l(e,t){const r={};for(const i of t)for(const e of i.styles)r[e[0]]=i.inverse?null:e.slice(1);let n=e;for(const[i,o]of Object.entries(r))if(Array.isArray(o)){if(!(i in n))throw new Error(`Unknown Chalk style: ${i}`);n=o.length>0?n[i](...o):n[i]}return n}return templates=(t,r)=>{const n=[],i=[];let s=[];if(r.replace(e,(e,r,c,u,d,p)=>{if(r)s.push(o(r));else if(u){const e=s.join("");s=[],i.push(0===n.length?e:l(t,n)(e)),n.push({inverse:c,styles:a(u)})}else if(d){if(0===n.length)throw new Error("Found extraneous } in Chalk template literal");i.push(l(t,n)(s.join(""))),s=[],n.pop()}else s.push(p)}),i.push(s.join("")),n.length>0){const e=`Chalk template literal is missing ${n.length} closing bracket${1===n.length?"":"s"} (\`}\`)`;throw new Error(e)}return i.join("")}}function requireSource(){if(hasRequiredSource)return source;hasRequiredSource=1;const e=requireAnsiStyles(),{stdout:t,stderr:r}=requireBrowser$1(),{stringReplaceAll:n,stringEncaseCRLFWithFirstIndex:i}=requireUtil$2(),{isArray:o}=Array,s=["ansi","ansi","ansi256","ansi16m"],a=Object.create(null);class l{constructor(e){return c(e)}}const c=e=>{const r={};return((e,r={})=>{if(r.level&&!(Number.isInteger(r.level)&&r.level>=0&&r.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const n=t?t.level:0;e.level=void 0===r.level?n:r.level})(r,e),r.template=(...e)=>b(r.template,...e),Object.setPrototypeOf(r,u.prototype),Object.setPrototypeOf(r.template,r),r.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},r.template.Instance=l,r.template};function u(e){return c(e)}for(const[T,E]of Object.entries(e))a[T]={get(){const e=f(this,h(E.open,E.close,this._styler),this._isEmpty);return Object.defineProperty(this,T,{value:e}),e}};a.visible={get(){const e=f(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:e}),e}};const d=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const T of d)a[T]={get(){const{level:t}=this;return function(...r){const n=h(e.color[s[t]][T](...r),e.color.close,this._styler);return f(this,n,this._isEmpty)}}};for(const T of d)a["bg"+T[0].toUpperCase()+T.slice(1)]={get(){const{level:t}=this;return function(...r){const n=h(e.bgColor[s[t]][T](...r),e.bgColor.close,this._styler);return f(this,n,this._isEmpty)}}};const p=Object.defineProperties(()=>{},{...a,level:{enumerable:!0,get(){return this._generator.level},set(e){this._generator.level=e}}}),h=(e,t,r)=>{let n,i;return void 0===r?(n=e,i=t):(n=r.openAll+e,i=t+r.closeAll),{open:e,close:t,openAll:n,closeAll:i,parent:r}},f=(e,t,r)=>{const n=(...e)=>o(e[0])&&o(e[0].raw)?m(n,b(n,...e)):m(n,1===e.length?""+e[0]:e.join(" "));return Object.setPrototypeOf(n,p),n._generator=e,n._styler=t,n._isEmpty=r,n},m=(e,t)=>{if(e.level<=0||!t)return e._isEmpty?"":t;let r=e._styler;if(void 0===r)return t;const{openAll:o,closeAll:s}=r;if(-1!==t.indexOf(""))for(;void 0!==r;)t=n(t,r.close,r.open),r=r.parent;const a=t.indexOf("\n");return-1!==a&&(t=i(t,s,o,a)),o+t+s};let g;const b=(e,...t)=>{const[r]=t;if(!o(r)||!o(r.raw))return t.join(" ");const n=t.slice(1),i=[r.raw[0]];for(let o=1;o<r.length;o++)i.push(String(n[o-1]).replace(/[{}\\]/g,"\\$&"),String(r.raw[o]));return void 0===g&&(g=requireTemplates()),g(e,i.join(""))};Object.defineProperties(u.prototype,a);const y=u();return y.supportsColor=t,y.stderr=u({level:r?r.level:0}),y.stderr.supportsColor=r,source=y}function requireLog(){return hasRequiredLog||(hasRequiredLog=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.log=e.LogLevels=void 0;const t=requireSource();var r,n;(n=r=e.LogLevels||(e.LogLevels={})).INFO="info",n.WARN="warn",n.ERROR="error",n.DISABLED="disabled";const i={[r.INFO]:[],[r.WARN]:[],[r.ERROR]:[],[r.DISABLED]:[]};function o(e){const n={[r.INFO]:e=>`${(0,t.green)("INFO")} ${e}`,[r.WARN]:e=>`${(0,t.yellow)("WARN")} ${e}`,[r.ERROR]:e=>`${(0,t.red)("ERR")} ${e}`};return function(t){const r=n[e](t);i[e].includes(r)||i[e].push(r)}}e.log={[r.INFO]:o(r.INFO),[r.WARN]:o(r.WARN),[r.ERROR]:o(r.ERROR),LogLevels:r,get:()=>i,add:e=>{i[r.INFO]=i[r.INFO].concat(e[r.INFO]),i[r.WARN]=i[r.WARN].concat(e[r.WARN]),i[r.ERROR]=i[r.ERROR].concat(e[r.ERROR])},clear:()=>{i[r.INFO]=[],i[r.WARN]=[],i[r.ERROR]=[]},isEmpty:()=>!(i[r.INFO].length||i[r.WARN].length||i[r.ERROR].length)},e.default=e.log}(log)),log}ansiStyles.exports;var logExports=requireLog(),markdownItSup,hasRequiredMarkdownItSup,sup$1,hasRequiredSup;function requireMarkdownItSup(){if(hasRequiredMarkdownItSup)return markdownItSup;hasRequiredMarkdownItSup=1;var e=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function t(t,r){var n,i,o=t.posMax,s=t.pos;if(94!==t.src.charCodeAt(s))return!1;if(r)return!1;if(s+2>=o)return!1;for(t.pos=s+1;t.pos<o;){if(94===t.src.charCodeAt(t.pos)){n=!0;break}t.md.inline.skipToken(t)}return n&&s+1!==t.pos?(i=t.src.slice(s+1,t.pos)).match(/(^|[^\\])(\\\\)*\s/)?(t.pos=s,!1):(t.posMax=t.pos,t.pos=s+1,t.push("sup_open","sup",1).markup="^",t.push("text","",0).content=i.replace(e,"$1"),t.push("sup_close","sup",-1).markup="^",t.pos=t.posMax+1,t.posMax=o,!0):(t.pos=s,!1)}return markdownItSup=function(e){e.inline.ruler.after("emphasis","sup",t)}}function requireSup(){if(hasRequiredSup)return sup$1;hasRequiredSup=1;const e=(sup$1&&sup$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(requireMarkdownItSup());return sup$1=e.default}var supExports=requireSup();const sup=getDefaultExportFromCjs(supExports),superscriptMarkName="sup",superscriptType=markTypeFactory(superscriptMarkName),SuperscriptSpecs=e=>{e.configureMd(e=>e.use(sup,{log:logExports.log})).addMark(superscriptMarkName,()=>({spec:{excludes:"_",parseDOM:[{tag:"sup"}],toDOM:()=>["sup"]},toMd:{open:e=>(e.escapeWhitespace=!0,"^"),close:e=>(e.escapeWhitespace=!1,"^"),mixable:!0,expelEnclosingWhitespace:!0},fromMd:{tokenSpec:{name:superscriptMarkName,type:"mark"}}}))};var HtmlNode,HtmlNode2,HtmlAttr;HtmlNode2=HtmlNode||(HtmlNode={}),HtmlNode2.Block="html_block",HtmlNode2.Inline="html_inline",(HtmlAttr||(HtmlAttr={})).Content="html-content";const parserTokens$7={[HtmlNode.Block]:{name:HtmlNode.Block,type:"node",noCloseToken:!0,getAttrs:e=>({[HtmlAttr.Content]:e.content})},[HtmlNode.Inline]:{name:HtmlNode.Inline,type:"node",noCloseToken:!0,getAttrs:e=>({[HtmlAttr.Content]:e.content})}};var sanitize$2={},lib$8={},Parser$3={},Tokenizer$2={},decode$2={},decodeDataHtml$1={},hasRequiredDecodeDataHtml$1;function requireDecodeDataHtml$1(){return hasRequiredDecodeDataHtml$1||(hasRequiredDecodeDataHtml$1=1,Object.defineProperty(decodeDataHtml$1,"__esModule",{value:!0}),decodeDataHtml$1.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(e){return e.charCodeAt(0)}))),decodeDataHtml$1}var decodeDataXml$1={},hasRequiredDecodeDataXml$1;function requireDecodeDataXml$1(){return hasRequiredDecodeDataXml$1||(hasRequiredDecodeDataXml$1=1,Object.defineProperty(decodeDataXml$1,"__esModule",{value:!0}),decodeDataXml$1.default=new Uint16Array("aglq\t\0\0p;os;t;t;uot;".split("").map(function(e){return e.charCodeAt(0)}))),decodeDataXml$1}var decode_codepoint$1={},hasRequiredDecode_codepoint$1,hasRequiredDecode$1,hasRequiredTokenizer,hasRequiredParser$2;function requireDecode_codepoint$1(){return hasRequiredDecode_codepoint$1||(hasRequiredDecode_codepoint$1=1,function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.replaceCodePoint=e.fromCodePoint=void 0;var r=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function n(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=r.get(e))&&void 0!==t?t:e}e.fromCodePoint=null!==(t=String.fromCodePoint)&&void 0!==t?t:function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+String.fromCharCode(e)},e.replaceCodePoint=n,e.default=function(t){return(0,e.fromCodePoint)(n(t))}}(decode_codepoint$1)),decode_codepoint$1}function requireDecode$1(){return hasRequiredDecode$1||(hasRequiredDecode$1=1,function(e){var t=decode$2&&decode$2.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=decode$2&&decode$2.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=decode$2&&decode$2.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(n,e,i);return r(n,e),n},i=decode$2&&decode$2.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXML=e.decodeHTMLStrict=e.decodeHTMLAttribute=e.decodeHTML=e.determineBranch=e.EntityDecoder=e.DecodingMode=e.BinTrieFlags=e.fromCodePoint=e.replaceCodePoint=e.decodeCodePoint=e.xmlDecodeTree=e.htmlDecodeTree=void 0;var o=i(requireDecodeDataHtml$1());e.htmlDecodeTree=o.default;var s=i(requireDecodeDataXml$1());e.xmlDecodeTree=s.default;var a=n(requireDecode_codepoint$1());e.decodeCodePoint=a.default;var l,c,u,d,p,h,f,m,g=requireDecode_codepoint$1();function b(e){return e>=l.ZERO&&e<=l.NINE}function y(e){return e>=l.UPPER_A&&e<=l.UPPER_F||e>=l.LOWER_A&&e<=l.LOWER_F}function T(e){return e===l.EQUALS||function(e){return e>=l.UPPER_A&&e<=l.UPPER_Z||e>=l.LOWER_A&&e<=l.LOWER_Z||b(e)}(e)}Object.defineProperty(e,"replaceCodePoint",{enumerable:!0,get:function(){return g.replaceCodePoint}}),Object.defineProperty(e,"fromCodePoint",{enumerable:!0,get:function(){return g.fromCodePoint}}),(c=l||(l={}))[c.NUM=35]="NUM",c[c.SEMI=59]="SEMI",c[c.EQUALS=61]="EQUALS",c[c.ZERO=48]="ZERO",c[c.NINE=57]="NINE",c[c.LOWER_A=97]="LOWER_A",c[c.LOWER_F=102]="LOWER_F",c[c.LOWER_X=120]="LOWER_X",c[c.LOWER_Z=122]="LOWER_Z",c[c.UPPER_A=65]="UPPER_A",c[c.UPPER_F=70]="UPPER_F",c[c.UPPER_Z=90]="UPPER_Z",(d=u=e.BinTrieFlags||(e.BinTrieFlags={}))[d.VALUE_LENGTH=49152]="VALUE_LENGTH",d[d.BRANCH_LENGTH=16256]="BRANCH_LENGTH",d[d.JUMP_TABLE=127]="JUMP_TABLE",(h=p||(p={}))[h.EntityStart=0]="EntityStart",h[h.NumericStart=1]="NumericStart",h[h.NumericDecimal=2]="NumericDecimal",h[h.NumericHex=3]="NumericHex",h[h.NamedEntity=4]="NamedEntity",(m=f=e.DecodingMode||(e.DecodingMode={}))[m.Legacy=0]="Legacy",m[m.Strict=1]="Strict",m[m.Attribute=2]="Attribute";var E=function(){function e(e,t,r){this.decodeTree=e,this.emitCodePoint=t,this.errors=r,this.state=p.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=f.Strict}return e.prototype.startEntity=function(e){this.decodeMode=e,this.state=p.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},e.prototype.write=function(e,t){switch(this.state){case p.EntityStart:return e.charCodeAt(t)===l.NUM?(this.state=p.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=p.NamedEntity,this.stateNamedEntity(e,t));case p.NumericStart:return this.stateNumericStart(e,t);case p.NumericDecimal:return this.stateNumericDecimal(e,t);case p.NumericHex:return this.stateNumericHex(e,t);case p.NamedEntity:return this.stateNamedEntity(e,t)}},e.prototype.stateNumericStart=function(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===l.LOWER_X?(this.state=p.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=p.NumericDecimal,this.stateNumericDecimal(e,t))},e.prototype.addToNumericResult=function(e,t,r,n){if(t!==r){var i=r-t;this.result=this.result*Math.pow(n,i)+parseInt(e.substr(t,i),n),this.consumed+=i}},e.prototype.stateNumericHex=function(e,t){for(var r=t;t<e.length;){var n=e.charCodeAt(t);if(!b(n)&&!y(n))return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(n,3);t+=1}return this.addToNumericResult(e,r,t,16),-1},e.prototype.stateNumericDecimal=function(e,t){for(var r=t;t<e.length;){var n=e.charCodeAt(t);if(!b(n))return this.addToNumericResult(e,r,t,10),this.emitNumericEntity(n,2);t+=1}return this.addToNumericResult(e,r,t,10),-1},e.prototype.emitNumericEntity=function(e,t){var r;if(this.consumed<=t)return null===(r=this.errors)||void 0===r||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===l.SEMI)this.consumed+=1;else if(this.decodeMode===f.Strict)return 0;return this.emitCodePoint((0,a.replaceCodePoint)(this.result),this.consumed),this.errors&&(e!==l.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},e.prototype.stateNamedEntity=function(e,t){for(var r=this.decodeTree,n=r[this.treeIndex],i=(n&u.VALUE_LENGTH)>>14;t<e.length;t++,this.excess++){var o=e.charCodeAt(t);if(this.treeIndex=S(r,n,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return 0===this.result||this.decodeMode===f.Attribute&&(0===i||T(o))?0:this.emitNotTerminatedNamedEntity();if(0!=(i=((n=r[this.treeIndex])&u.VALUE_LENGTH)>>14)){if(o===l.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==f.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},e.prototype.emitNotTerminatedNamedEntity=function(){var e,t=this.result,r=(this.decodeTree[t]&u.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,r,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed},e.prototype.emitNamedEntityData=function(e,t,r){var n=this.decodeTree;return this.emitCodePoint(1===t?n[e]&~u.VALUE_LENGTH:n[e+1],r),3===t&&this.emitCodePoint(n[e+2],r),r},e.prototype.end=function(){var e;switch(this.state){case p.NamedEntity:return 0===this.result||this.decodeMode===f.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case p.NumericDecimal:return this.emitNumericEntity(0,2);case p.NumericHex:return this.emitNumericEntity(0,3);case p.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case p.EntityStart:return 0}},e}();function O(e){var t="",r=new E(e,function(e){return t+=(0,a.fromCodePoint)(e)});return function(e,n){for(var i=0,o=0;(o=e.indexOf("&",o))>=0;){t+=e.slice(i,o),r.startEntity(n);var s=r.write(e,o+1);if(s<0){i=o+r.end();break}i=o+s,o=0===s?i+1:i}var a=t+e.slice(i);return t="",a}}function S(e,t,r,n){var i=(t&u.BRANCH_LENGTH)>>7,o=t&u.JUMP_TABLE;if(0===i)return 0!==o&&n===o?r:-1;if(o){var s=n-o;return s<0||s>=i?-1:e[r+s]-1}for(var a=r,l=a+i-1;a<=l;){var c=a+l>>>1,d=e[c];if(d<n)a=c+1;else{if(!(d>n))return e[c+i];l=c-1}}return-1}e.EntityDecoder=E,e.determineBranch=S;var x=O(o.default),v=O(s.default);e.decodeHTML=function(e,t){return void 0===t&&(t=f.Legacy),x(e,t)},e.decodeHTMLAttribute=function(e){return x(e,f.Attribute)},e.decodeHTMLStrict=function(e){return x(e,f.Strict)},e.decodeXML=function(e){return v(e,f.Strict)}}(decode$2)),decode$2}function requireTokenizer(){return hasRequiredTokenizer||(hasRequiredTokenizer=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.QuoteType=void 0;var t,r,n,i,o,s,a=requireDecode$1();function l(e){return e===t.Space||e===t.NewLine||e===t.Tab||e===t.FormFeed||e===t.CarriageReturn}function c(e){return e===t.Slash||e===t.Gt||l(e)}function u(e){return e>=t.Zero&&e<=t.Nine}(r=t||(t={}))[r.Tab=9]="Tab",r[r.NewLine=10]="NewLine",r[r.FormFeed=12]="FormFeed",r[r.CarriageReturn=13]="CarriageReturn",r[r.Space=32]="Space",r[r.ExclamationMark=33]="ExclamationMark",r[r.Number=35]="Number",r[r.Amp=38]="Amp",r[r.SingleQuote=39]="SingleQuote",r[r.DoubleQuote=34]="DoubleQuote",r[r.Dash=45]="Dash",r[r.Slash=47]="Slash",r[r.Zero=48]="Zero",r[r.Nine=57]="Nine",r[r.Semi=59]="Semi",r[r.Lt=60]="Lt",r[r.Eq=61]="Eq",r[r.Gt=62]="Gt",r[r.Questionmark=63]="Questionmark",r[r.UpperA=65]="UpperA",r[r.LowerA=97]="LowerA",r[r.UpperF=70]="UpperF",r[r.LowerF=102]="LowerF",r[r.UpperZ=90]="UpperZ",r[r.LowerZ=122]="LowerZ",r[r.LowerX=120]="LowerX",r[r.OpeningSquareBracket=91]="OpeningSquareBracket",(i=n||(n={}))[i.Text=1]="Text",i[i.BeforeTagName=2]="BeforeTagName",i[i.InTagName=3]="InTagName",i[i.InSelfClosingTag=4]="InSelfClosingTag",i[i.BeforeClosingTagName=5]="BeforeClosingTagName",i[i.InClosingTagName=6]="InClosingTagName",i[i.AfterClosingTagName=7]="AfterClosingTagName",i[i.BeforeAttributeName=8]="BeforeAttributeName",i[i.InAttributeName=9]="InAttributeName",i[i.AfterAttributeName=10]="AfterAttributeName",i[i.BeforeAttributeValue=11]="BeforeAttributeValue",i[i.InAttributeValueDq=12]="InAttributeValueDq",i[i.InAttributeValueSq=13]="InAttributeValueSq",i[i.InAttributeValueNq=14]="InAttributeValueNq",i[i.BeforeDeclaration=15]="BeforeDeclaration",i[i.InDeclaration=16]="InDeclaration",i[i.InProcessingInstruction=17]="InProcessingInstruction",i[i.BeforeComment=18]="BeforeComment",i[i.CDATASequence=19]="CDATASequence",i[i.InSpecialComment=20]="InSpecialComment",i[i.InCommentLike=21]="InCommentLike",i[i.BeforeSpecialS=22]="BeforeSpecialS",i[i.SpecialStartSequence=23]="SpecialStartSequence",i[i.InSpecialTag=24]="InSpecialTag",i[i.BeforeEntity=25]="BeforeEntity",i[i.BeforeNumericEntity=26]="BeforeNumericEntity",i[i.InNamedEntity=27]="InNamedEntity",i[i.InNumericEntity=28]="InNumericEntity",i[i.InHexEntity=29]="InHexEntity",(s=o=e.QuoteType||(e.QuoteType={}))[s.NoValue=0]="NoValue",s[s.Unquoted=1]="Unquoted",s[s.Single=2]="Single",s[s.Double=3]="Double";var d={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},p=function(){function e(e,t){var r=e.xmlMode,i=void 0!==r&&r,o=e.decodeEntities,s=void 0===o||o;this.cbs=t,this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=i,this.decodeEntities=s,this.entityTrie=i?a.xmlDecodeTree:a.htmlDecodeTree}return e.prototype.reset=function(){this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},e.prototype.write=function(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()},e.prototype.end=function(){this.running&&this.finish()},e.prototype.pause=function(){this.running=!1},e.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},e.prototype.getIndex=function(){return this.index},e.prototype.getSectionStart=function(){return this.sectionStart},e.prototype.stateText=function(e){e===t.Lt||!this.decodeEntities&&this.fastForwardTo(t.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=n.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===t.Amp&&(this.state=n.BeforeEntity)},e.prototype.stateSpecialStartSequence=function(e){var t=this.sequenceIndex===this.currentSequence.length;if(t?c(e):(32|e)===this.currentSequence[this.sequenceIndex]){if(!t)return void this.sequenceIndex++}else this.isSpecial=!1;this.sequenceIndex=0,this.state=n.InTagName,this.stateInTagName(e)},e.prototype.stateInSpecialTag=function(e){if(this.sequenceIndex===this.currentSequence.length){if(e===t.Gt||l(e)){var r=this.index-this.currentSequence.length;if(this.sectionStart<r){var i=this.index;this.index=r,this.cbs.ontext(this.sectionStart,r),this.index=i}return this.isSpecial=!1,this.sectionStart=r+2,void this.stateInClosingTagName(e)}this.sequenceIndex=0}(32|e)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:0===this.sequenceIndex?this.currentSequence===d.TitleEnd?this.decodeEntities&&e===t.Amp&&(this.state=n.BeforeEntity):this.fastForwardTo(t.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=Number(e===t.Lt)},e.prototype.stateCDATASequence=function(e){e===d.Cdata[this.sequenceIndex]?++this.sequenceIndex===d.Cdata.length&&(this.state=n.InCommentLike,this.currentSequence=d.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=n.InDeclaration,this.stateInDeclaration(e))},e.prototype.fastForwardTo=function(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1},e.prototype.stateInCommentLike=function(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=n.Text):0===this.sequenceIndex?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},e.prototype.isTagStartChar=function(e){return this.xmlMode?!c(e):function(e){return e>=t.LowerA&&e<=t.LowerZ||e>=t.UpperA&&e<=t.UpperZ}(e)},e.prototype.startSpecial=function(e,t){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=t,this.state=n.SpecialStartSequence},e.prototype.stateBeforeTagName=function(e){if(e===t.ExclamationMark)this.state=n.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===t.Questionmark)this.state=n.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){var r=32|e;this.sectionStart=this.index,this.xmlMode||r!==d.TitleEnd[2]?this.state=this.xmlMode||r!==d.ScriptEnd[2]?n.InTagName:n.BeforeSpecialS:this.startSpecial(d.TitleEnd,3)}else e===t.Slash?this.state=n.BeforeClosingTagName:(this.state=n.Text,this.stateText(e))},e.prototype.stateInTagName=function(e){c(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(e))},e.prototype.stateBeforeClosingTagName=function(e){l(e)||(e===t.Gt?this.state=n.Text:(this.state=this.isTagStartChar(e)?n.InClosingTagName:n.InSpecialComment,this.sectionStart=this.index))},e.prototype.stateInClosingTagName=function(e){(e===t.Gt||l(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterClosingTagName,this.stateAfterClosingTagName(e))},e.prototype.stateAfterClosingTagName=function(e){(e===t.Gt||this.fastForwardTo(t.Gt))&&(this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeAttributeName=function(e){e===t.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=n.InSpecialTag,this.sequenceIndex=0):this.state=n.Text,this.baseState=this.state,this.sectionStart=this.index+1):e===t.Slash?this.state=n.InSelfClosingTag:l(e)||(this.state=n.InAttributeName,this.sectionStart=this.index)},e.prototype.stateInSelfClosingTag=function(e){e===t.Gt?(this.cbs.onselfclosingtag(this.index),this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1,this.isSpecial=!1):l(e)||(this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(e))},e.prototype.stateInAttributeName=function(e){(e===t.Eq||c(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterAttributeName,this.stateAfterAttributeName(e))},e.prototype.stateAfterAttributeName=function(e){e===t.Eq?this.state=n.BeforeAttributeValue:e===t.Slash||e===t.Gt?(this.cbs.onattribend(o.NoValue,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(e)):l(e)||(this.cbs.onattribend(o.NoValue,this.index),this.state=n.InAttributeName,this.sectionStart=this.index)},e.prototype.stateBeforeAttributeValue=function(e){e===t.DoubleQuote?(this.state=n.InAttributeValueDq,this.sectionStart=this.index+1):e===t.SingleQuote?(this.state=n.InAttributeValueSq,this.sectionStart=this.index+1):l(e)||(this.sectionStart=this.index,this.state=n.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))},e.prototype.handleInAttributeValue=function(e,r){e===r||!this.decodeEntities&&this.fastForwardTo(r)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(r===t.DoubleQuote?o.Double:o.Single,this.index),this.state=n.BeforeAttributeName):this.decodeEntities&&e===t.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},e.prototype.stateInAttributeValueDoubleQuotes=function(e){this.handleInAttributeValue(e,t.DoubleQuote)},e.prototype.stateInAttributeValueSingleQuotes=function(e){this.handleInAttributeValue(e,t.SingleQuote)},e.prototype.stateInAttributeValueNoQuotes=function(e){l(e)||e===t.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(o.Unquoted,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===t.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},e.prototype.stateBeforeDeclaration=function(e){e===t.OpeningSquareBracket?(this.state=n.CDATASequence,this.sequenceIndex=0):this.state=e===t.Dash?n.BeforeComment:n.InDeclaration},e.prototype.stateInDeclaration=function(e){(e===t.Gt||this.fastForwardTo(t.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},e.prototype.stateInProcessingInstruction=function(e){(e===t.Gt||this.fastForwardTo(t.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeComment=function(e){e===t.Dash?(this.state=n.InCommentLike,this.currentSequence=d.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=n.InDeclaration},e.prototype.stateInSpecialComment=function(e){(e===t.Gt||this.fastForwardTo(t.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=n.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeSpecialS=function(e){var t=32|e;t===d.ScriptEnd[3]?this.startSpecial(d.ScriptEnd,4):t===d.StyleEnd[3]?this.startSpecial(d.StyleEnd,4):(this.state=n.InTagName,this.stateInTagName(e))},e.prototype.stateBeforeEntity=function(e){this.entityExcess=1,this.entityResult=0,e===t.Number?this.state=n.BeforeNumericEntity:e===t.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=n.InNamedEntity,this.stateInNamedEntity(e))},e.prototype.stateInNamedEntity=function(e){if(this.entityExcess+=1,this.trieIndex=(0,a.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,e),this.trieIndex<0)return this.emitNamedEntity(),void this.index--;this.trieCurrent=this.entityTrie[this.trieIndex];var r=this.trieCurrent&a.BinTrieFlags.VALUE_LENGTH;if(r){var n=(r>>14)-1;if(this.allowLegacyEntity()||e===t.Semi){var i=this.index-this.entityExcess+1;i>this.sectionStart&&this.emitPartial(this.sectionStart,i),this.entityResult=this.trieIndex,this.trieIndex+=n,this.entityExcess=0,this.sectionStart=this.index+1,0===n&&this.emitNamedEntity()}else this.trieIndex+=n}},e.prototype.emitNamedEntity=function(){if(this.state=this.baseState,0!==this.entityResult)switch((this.entityTrie[this.entityResult]&a.BinTrieFlags.VALUE_LENGTH)>>14){case 1:this.emitCodePoint(this.entityTrie[this.entityResult]&~a.BinTrieFlags.VALUE_LENGTH);break;case 2:this.emitCodePoint(this.entityTrie[this.entityResult+1]);break;case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}},e.prototype.stateBeforeNumericEntity=function(e){(32|e)===t.LowerX?(this.entityExcess++,this.state=n.InHexEntity):(this.state=n.InNumericEntity,this.stateInNumericEntity(e))},e.prototype.emitNumericEntity=function(e){var t=this.index-this.entityExcess-1;t+2+Number(this.state===n.InHexEntity)!==this.index&&(t>this.sectionStart&&this.emitPartial(this.sectionStart,t),this.sectionStart=this.index+Number(e),this.emitCodePoint((0,a.replaceCodePoint)(this.entityResult))),this.state=this.baseState},e.prototype.stateInNumericEntity=function(e){e===t.Semi?this.emitNumericEntity(!0):u(e)?(this.entityResult=10*this.entityResult+(e-t.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},e.prototype.stateInHexEntity=function(e){e===t.Semi?this.emitNumericEntity(!0):u(e)?(this.entityResult=16*this.entityResult+(e-t.Zero),this.entityExcess++):function(e){return e>=t.UpperA&&e<=t.UpperF||e>=t.LowerA&&e<=t.LowerF}(e)?(this.entityResult=16*this.entityResult+((32|e)-t.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},e.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===n.Text||this.baseState===n.InSpecialTag)},e.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===n.Text||this.state===n.InSpecialTag&&0===this.sequenceIndex?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):this.state!==n.InAttributeValueDq&&this.state!==n.InAttributeValueSq&&this.state!==n.InAttributeValueNq||(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},e.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},e.prototype.parse=function(){for(;this.shouldContinue();){var e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case n.Text:this.stateText(e);break;case n.SpecialStartSequence:this.stateSpecialStartSequence(e);break;case n.InSpecialTag:this.stateInSpecialTag(e);break;case n.CDATASequence:this.stateCDATASequence(e);break;case n.InAttributeValueDq:this.stateInAttributeValueDoubleQuotes(e);break;case n.InAttributeName:this.stateInAttributeName(e);break;case n.InCommentLike:this.stateInCommentLike(e);break;case n.InSpecialComment:this.stateInSpecialComment(e);break;case n.BeforeAttributeName:this.stateBeforeAttributeName(e);break;case n.InTagName:this.stateInTagName(e);break;case n.InClosingTagName:this.stateInClosingTagName(e);break;case n.BeforeTagName:this.stateBeforeTagName(e);break;case n.AfterAttributeName:this.stateAfterAttributeName(e);break;case n.InAttributeValueSq:this.stateInAttributeValueSingleQuotes(e);break;case n.BeforeAttributeValue:this.stateBeforeAttributeValue(e);break;case n.BeforeClosingTagName:this.stateBeforeClosingTagName(e);break;case n.AfterClosingTagName:this.stateAfterClosingTagName(e);break;case n.BeforeSpecialS:this.stateBeforeSpecialS(e);break;case n.InAttributeValueNq:this.stateInAttributeValueNoQuotes(e);break;case n.InSelfClosingTag:this.stateInSelfClosingTag(e);break;case n.InDeclaration:this.stateInDeclaration(e);break;case n.BeforeDeclaration:this.stateBeforeDeclaration(e);break;case n.BeforeComment:this.stateBeforeComment(e);break;case n.InProcessingInstruction:this.stateInProcessingInstruction(e);break;case n.InNamedEntity:this.stateInNamedEntity(e);break;case n.BeforeEntity:this.stateBeforeEntity(e);break;case n.InHexEntity:this.stateInHexEntity(e);break;case n.InNumericEntity:this.stateInNumericEntity(e);break;default:this.stateBeforeNumericEntity(e)}this.index++}this.cleanup()},e.prototype.finish=function(){this.state===n.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},e.prototype.handleTrailingData=function(){var e=this.buffer.length+this.offset;this.state===n.InCommentLike?this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===n.InNumericEntity&&this.allowLegacyEntity()||this.state===n.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InTagName||this.state===n.BeforeAttributeName||this.state===n.BeforeAttributeValue||this.state===n.AfterAttributeName||this.state===n.InAttributeName||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueDq||this.state===n.InAttributeValueNq||this.state===n.InClosingTagName||this.cbs.ontext(this.sectionStart,e)},e.prototype.emitPartial=function(e,t){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribdata(e,t):this.cbs.ontext(e,t)},e.prototype.emitCodePoint=function(e){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribentity(e):this.cbs.ontextentity(e)},e}();e.default=p}(Tokenizer$2)),Tokenizer$2}function requireParser$2(){if(hasRequiredParser$2)return Parser$3;hasRequiredParser$2=1;var e=Parser$3&&Parser$3.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),t=Parser$3&&Parser$3.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=Parser$3&&Parser$3.__importStar||function(r){if(r&&r.__esModule)return r;var n={};if(null!=r)for(var i in r)"default"!==i&&Object.prototype.hasOwnProperty.call(r,i)&&e(n,r,i);return t(n,r),n};Object.defineProperty(Parser$3,"__esModule",{value:!0}),Parser$3.Parser=void 0;var n=r(requireTokenizer()),i=requireDecode$1(),o=new Set(["input","option","optgroup","select","button","datalist","textarea"]),s=new Set(["p"]),a=new Set(["thead","tbody"]),l=new Set(["dd","dt"]),c=new Set(["rt","rp"]),u=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",s],["h1",s],["h2",s],["h3",s],["h4",s],["h5",s],["h6",s],["select",o],["input",o],["output",o],["button",o],["datalist",o],["textarea",o],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",l],["dt",l],["address",s],["article",s],["aside",s],["blockquote",s],["details",s],["div",s],["dl",s],["fieldset",s],["figcaption",s],["figure",s],["footer",s],["form",s],["header",s],["hr",s],["main",s],["nav",s],["ol",s],["pre",s],["section",s],["table",s],["ul",s],["rt",c],["rp",c],["tbody",a],["tfoot",a]]),d=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),p=new Set(["math","svg"]),h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),f=/\s|\//,m=function(){function e(e,t){var r,i,o,s,a;void 0===t&&(t={}),this.options=t,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=null!=e?e:{},this.lowerCaseTagNames=null!==(r=t.lowerCaseTags)&&void 0!==r?r:!t.xmlMode,this.lowerCaseAttributeNames=null!==(i=t.lowerCaseAttributeNames)&&void 0!==i?i:!t.xmlMode,this.tokenizer=new(null!==(o=t.Tokenizer)&&void 0!==o?o:n.default)(this.options,this),null===(a=(s=this.cbs).onparserinit)||void 0===a||a.call(s,this)}return e.prototype.ontext=function(e,t){var r,n,i=this.getSlice(e,t);this.endIndex=t-1,null===(n=(r=this.cbs).ontext)||void 0===n||n.call(r,i),this.startIndex=t},e.prototype.ontextentity=function(e){var t,r,n=this.tokenizer.getSectionStart();this.endIndex=n-1,null===(r=(t=this.cbs).ontext)||void 0===r||r.call(t,(0,i.fromCodePoint)(e)),this.startIndex=n},e.prototype.isVoidElement=function(e){return!this.options.xmlMode&&d.has(e)},e.prototype.onopentagname=function(e,t){this.endIndex=t;var r=this.getSlice(e,t);this.lowerCaseTagNames&&(r=r.toLowerCase()),this.emitOpenTag(r)},e.prototype.emitOpenTag=function(e){var t,r,n,i;this.openTagStart=this.startIndex,this.tagname=e;var o=!this.options.xmlMode&&u.get(e);if(o)for(;this.stack.length>0&&o.has(this.stack[this.stack.length-1]);){var s=this.stack.pop();null===(r=(t=this.cbs).onclosetag)||void 0===r||r.call(t,s,!0)}this.isVoidElement(e)||(this.stack.push(e),p.has(e)?this.foreignContext.push(!0):h.has(e)&&this.foreignContext.push(!1)),null===(i=(n=this.cbs).onopentagname)||void 0===i||i.call(n,e),this.cbs.onopentag&&(this.attribs={})},e.prototype.endOpenTag=function(e){var t,r;this.startIndex=this.openTagStart,this.attribs&&(null===(r=(t=this.cbs).onopentag)||void 0===r||r.call(t,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},e.prototype.onopentagend=function(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1},e.prototype.onclosetag=function(e,t){var r,n,i,o,s,a;this.endIndex=t;var l=this.getSlice(e,t);if(this.lowerCaseTagNames&&(l=l.toLowerCase()),(p.has(l)||h.has(l))&&this.foreignContext.pop(),this.isVoidElement(l))this.options.xmlMode||"br"!==l||(null===(n=(r=this.cbs).onopentagname)||void 0===n||n.call(r,"br"),null===(o=(i=this.cbs).onopentag)||void 0===o||o.call(i,"br",{},!0),null===(a=(s=this.cbs).onclosetag)||void 0===a||a.call(s,"br",!1));else{var c=this.stack.lastIndexOf(l);if(-1!==c)if(this.cbs.onclosetag)for(var u=this.stack.length-c;u--;)this.cbs.onclosetag(this.stack.pop(),0!==u);else this.stack.length=c;else this.options.xmlMode||"p"!==l||(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=t+1},e.prototype.onselfclosingtag=function(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)},e.prototype.closeCurrentTag=function(e){var t,r,n=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===n&&(null===(r=(t=this.cbs).onclosetag)||void 0===r||r.call(t,n,!e),this.stack.pop())},e.prototype.onattribname=function(e,t){this.startIndex=e;var r=this.getSlice(e,t);this.attribname=this.lowerCaseAttributeNames?r.toLowerCase():r},e.prototype.onattribdata=function(e,t){this.attribvalue+=this.getSlice(e,t)},e.prototype.onattribentity=function(e){this.attribvalue+=(0,i.fromCodePoint)(e)},e.prototype.onattribend=function(e,t){var r,i;this.endIndex=t,null===(i=(r=this.cbs).onattribute)||void 0===i||i.call(r,this.attribname,this.attribvalue,e===n.QuoteType.Double?'"':e===n.QuoteType.Single?"'":e===n.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},e.prototype.getInstructionName=function(e){var t=e.search(f),r=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(r=r.toLowerCase()),r},e.prototype.ondeclaration=function(e,t){this.endIndex=t;var r=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var n=this.getInstructionName(r);this.cbs.onprocessinginstruction("!".concat(n),"!".concat(r))}this.startIndex=t+1},e.prototype.onprocessinginstruction=function(e,t){this.endIndex=t;var r=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var n=this.getInstructionName(r);this.cbs.onprocessinginstruction("?".concat(n),"?".concat(r))}this.startIndex=t+1},e.prototype.oncomment=function(e,t,r){var n,i,o,s;this.endIndex=t,null===(i=(n=this.cbs).oncomment)||void 0===i||i.call(n,this.getSlice(e,t-r)),null===(s=(o=this.cbs).oncommentend)||void 0===s||s.call(o),this.startIndex=t+1},e.prototype.oncdata=function(e,t,r){var n,i,o,s,a,l,c,u,d,p;this.endIndex=t;var h=this.getSlice(e,t-r);this.options.xmlMode||this.options.recognizeCDATA?(null===(i=(n=this.cbs).oncdatastart)||void 0===i||i.call(n),null===(s=(o=this.cbs).ontext)||void 0===s||s.call(o,h),null===(l=(a=this.cbs).oncdataend)||void 0===l||l.call(a)):(null===(u=(c=this.cbs).oncomment)||void 0===u||u.call(c,"[CDATA[".concat(h,"]]")),null===(p=(d=this.cbs).oncommentend)||void 0===p||p.call(d)),this.startIndex=t+1},e.prototype.onend=function(){var e,t;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var r=this.stack.length;r>0;this.cbs.onclosetag(this.stack[--r],!0));}null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)},e.prototype.reset=function(){var e,t,r,n;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,null===(n=(r=this.cbs).onparserinit)||void 0===n||n.call(r,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},e.prototype.parseComplete=function(e){this.reset(),this.end(e)},e.prototype.getSlice=function(e,t){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var r=this.buffers[0].slice(e-this.bufferOffset,t-this.bufferOffset);t-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),r+=this.buffers[0].slice(0,t-this.bufferOffset);return r},e.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},e.prototype.write=function(e){var t,r;this.ended?null===(r=(t=this.cbs).onerror)||void 0===r||r.call(t,new Error(".write() after done!")):(this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++))},e.prototype.end=function(e){var t,r;this.ended?null===(r=(t=this.cbs).onerror)||void 0===r||r.call(t,new Error(".end() after done!")):(e&&this.write(e),this.ended=!0,this.tokenizer.end())},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},e.prototype.parseChunk=function(e){this.write(e)},e.prototype.done=function(e){this.end(e)},e}();return Parser$3.Parser=m,Parser$3}var lib$7={},lib$6={},hasRequiredLib$8;function requireLib$8(){return hasRequiredLib$8||(hasRequiredLib$8=1,e=lib$6,Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0,(r=t=e.ElementType||(e.ElementType={})).Root="root",r.Text="text",r.Directive="directive",r.Comment="comment",r.Script="script",r.Style="style",r.Tag="tag",r.CDATA="cdata",r.Doctype="doctype",e.isTag=function(e){return e.type===t.Tag||e.type===t.Script||e.type===t.Style},e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype),lib$6;var e,t,r}var node$1={},hasRequiredNode$1,hasRequiredLib$7;function requireNode$1(){if(hasRequiredNode$1)return node$1;hasRequiredNode$1=1;var e=node$1&&node$1.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),t=node$1&&node$1.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(node$1,"__esModule",{value:!0}),node$1.cloneNode=node$1.hasChildren=node$1.isDocument=node$1.isDirective=node$1.isComment=node$1.isText=node$1.isCDATA=node$1.isTag=node$1.Element=node$1.Document=node$1.CDATA=node$1.NodeWithChildren=node$1.ProcessingInstruction=node$1.Comment=node$1.Text=node$1.DataNode=node$1.Node=void 0;var r=requireLib$8(),n=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),y(this,e)},e}();node$1.Node=n;var i=function(t){function r(e){var r=t.call(this)||this;return r.data=e,r}return e(r,t),Object.defineProperty(r.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),r}(n);node$1.DataNode=i;var o=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.ElementType.Text,e}return e(n,t),Object.defineProperty(n.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),n}(i);node$1.Text=o;var s=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.ElementType.Comment,e}return e(n,t),Object.defineProperty(n.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),n}(i);node$1.Comment=s;var a=function(t){function n(e,n){var i=t.call(this,n)||this;return i.name=e,i.type=r.ElementType.Directive,i}return e(n,t),Object.defineProperty(n.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),n}(i);node$1.ProcessingInstruction=a;var l=function(t){function r(e){var r=t.call(this)||this;return r.children=e,r}return e(r,t),Object.defineProperty(r.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),r}(n);node$1.NodeWithChildren=l;var c=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.ElementType.CDATA,e}return e(n,t),Object.defineProperty(n.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),n}(l);node$1.CDATA=c;var u=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.ElementType.Root,e}return e(n,t),Object.defineProperty(n.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),n}(l);node$1.Document=u;var d=function(t){function n(e,n,i,o){void 0===i&&(i=[]),void 0===o&&(o="script"===e?r.ElementType.Script:"style"===e?r.ElementType.Style:r.ElementType.Tag);var s=t.call(this,i)||this;return s.name=e,s.attribs=n,s.type=o,s}return e(n,t),Object.defineProperty(n.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map(function(t){var r,n;return{name:t,value:e.attribs[t],namespace:null===(r=e["x-attribsNamespace"])||void 0===r?void 0:r[t],prefix:null===(n=e["x-attribsPrefix"])||void 0===n?void 0:n[t]}})},enumerable:!1,configurable:!0}),n}(l);function p(e){return(0,r.isTag)(e)}function h(e){return e.type===r.ElementType.CDATA}function f(e){return e.type===r.ElementType.Text}function m(e){return e.type===r.ElementType.Comment}function g(e){return e.type===r.ElementType.Directive}function b(e){return e.type===r.ElementType.Root}function y(e,r){var n;if(void 0===r&&(r=!1),f(e))n=new o(e.data);else if(m(e))n=new s(e.data);else if(p(e)){var i=r?T(e.children):[],l=new d(e.name,t({},e.attribs),i);i.forEach(function(e){return e.parent=l}),null!=e.namespace&&(l.namespace=e.namespace),e["x-attribsNamespace"]&&(l["x-attribsNamespace"]=t({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(l["x-attribsPrefix"]=t({},e["x-attribsPrefix"])),n=l}else if(h(e)){i=r?T(e.children):[];var y=new c(i);i.forEach(function(e){return e.parent=y}),n=y}else if(b(e)){i=r?T(e.children):[];var E=new u(i);i.forEach(function(e){return e.parent=E}),e["x-mode"]&&(E["x-mode"]=e["x-mode"]),n=E}else{if(!g(e))throw new Error("Not implemented yet: ".concat(e.type));var O=new a(e.name,e.data);null!=e["x-name"]&&(O["x-name"]=e["x-name"],O["x-publicId"]=e["x-publicId"],O["x-systemId"]=e["x-systemId"]),n=O}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function T(e){for(var t=e.map(function(e){return y(e,!0)}),r=1;r<t.length;r++)t[r].prev=t[r-1],t[r-1].next=t[r];return t}return node$1.Element=d,node$1.isTag=p,node$1.isCDATA=h,node$1.isText=f,node$1.isComment=m,node$1.isDirective=g,node$1.isDocument=b,node$1.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},node$1.cloneNode=y,node$1}function requireLib$7(){return hasRequiredLib$7||(hasRequiredLib$7=1,function(e){var t=lib$7&&lib$7.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=lib$7&&lib$7.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var n=requireLib$8(),i=requireNode$1();r(requireNode$1(),e);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},s=function(){function e(e,t,r){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(r=t,t=o),"object"==typeof e&&(t=e,e=void 0),this.callback=null!=e?e:null,this.options=null!=t?t:o,this.elementCB=null!=r?r:null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var r=this.options.xmlMode?n.ElementType.Tag:void 0,o=new i.Element(e,t,void 0,r);this.addNode(o),this.tagStack.push(o)},e.prototype.ontext=function(e){var t=this.lastNode;if(t&&t.type===n.ElementType.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{var r=new i.Text(e);this.addNode(r),this.lastNode=r}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment)this.lastNode.data+=e;else{var t=new i.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new i.Text(""),t=new i.CDATA([e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var r=new i.ProcessingInstruction(e,t);this.addNode(r)},e.prototype.handleCallback=function(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],r=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),r&&(e.prev=r,r.next=e),e.parent=t,this.lastNode=null},e}();e.DomHandler=s,e.default=s}(lib$7)),lib$7}var lib$5={},stringify$2={},lib$4={},lib$3={},decode$1={},decodeDataHtml={},hasRequiredDecodeDataHtml;function requireDecodeDataHtml(){return hasRequiredDecodeDataHtml||(hasRequiredDecodeDataHtml=1,Object.defineProperty(decodeDataHtml,"__esModule",{value:!0}),decodeDataHtml.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(e){return e.charCodeAt(0)}))),decodeDataHtml}var decodeDataXml={},hasRequiredDecodeDataXml;function requireDecodeDataXml(){return hasRequiredDecodeDataXml||(hasRequiredDecodeDataXml=1,Object.defineProperty(decodeDataXml,"__esModule",{value:!0}),decodeDataXml.default=new Uint16Array("aglq\t\0\0p;os;t;t;uot;".split("").map(function(e){return e.charCodeAt(0)}))),decodeDataXml}var decode_codepoint={},hasRequiredDecode_codepoint,hasRequiredDecode;function requireDecode_codepoint(){return hasRequiredDecode_codepoint||(hasRequiredDecode_codepoint=1,function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.replaceCodePoint=e.fromCodePoint=void 0;var r=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function n(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=r.get(e))&&void 0!==t?t:e}e.fromCodePoint=null!==(t=String.fromCodePoint)&&void 0!==t?t:function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+String.fromCharCode(e)},e.replaceCodePoint=n,e.default=function(t){return(0,e.fromCodePoint)(n(t))}}(decode_codepoint)),decode_codepoint}function requireDecode(){return hasRequiredDecode||(hasRequiredDecode=1,function(e){var t=decode$1&&decode$1.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=decode$1&&decode$1.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=decode$1&&decode$1.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(n,e,i);return r(n,e),n},i=decode$1&&decode$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXML=e.decodeHTMLStrict=e.decodeHTMLAttribute=e.decodeHTML=e.determineBranch=e.EntityDecoder=e.DecodingMode=e.BinTrieFlags=e.fromCodePoint=e.replaceCodePoint=e.decodeCodePoint=e.xmlDecodeTree=e.htmlDecodeTree=void 0;var o=i(requireDecodeDataHtml());e.htmlDecodeTree=o.default;var s=i(requireDecodeDataXml());e.xmlDecodeTree=s.default;var a=n(requireDecode_codepoint());e.decodeCodePoint=a.default;var l,c,u,d,p,h,f,m,g=requireDecode_codepoint();function b(e){return e>=l.ZERO&&e<=l.NINE}function y(e){return e>=l.UPPER_A&&e<=l.UPPER_F||e>=l.LOWER_A&&e<=l.LOWER_F}function T(e){return e===l.EQUALS||function(e){return e>=l.UPPER_A&&e<=l.UPPER_Z||e>=l.LOWER_A&&e<=l.LOWER_Z||b(e)}(e)}Object.defineProperty(e,"replaceCodePoint",{enumerable:!0,get:function(){return g.replaceCodePoint}}),Object.defineProperty(e,"fromCodePoint",{enumerable:!0,get:function(){return g.fromCodePoint}}),(c=l||(l={}))[c.NUM=35]="NUM",c[c.SEMI=59]="SEMI",c[c.EQUALS=61]="EQUALS",c[c.ZERO=48]="ZERO",c[c.NINE=57]="NINE",c[c.LOWER_A=97]="LOWER_A",c[c.LOWER_F=102]="LOWER_F",c[c.LOWER_X=120]="LOWER_X",c[c.LOWER_Z=122]="LOWER_Z",c[c.UPPER_A=65]="UPPER_A",c[c.UPPER_F=70]="UPPER_F",c[c.UPPER_Z=90]="UPPER_Z",(d=u=e.BinTrieFlags||(e.BinTrieFlags={}))[d.VALUE_LENGTH=49152]="VALUE_LENGTH",d[d.BRANCH_LENGTH=16256]="BRANCH_LENGTH",d[d.JUMP_TABLE=127]="JUMP_TABLE",(h=p||(p={}))[h.EntityStart=0]="EntityStart",h[h.NumericStart=1]="NumericStart",h[h.NumericDecimal=2]="NumericDecimal",h[h.NumericHex=3]="NumericHex",h[h.NamedEntity=4]="NamedEntity",(m=f=e.DecodingMode||(e.DecodingMode={}))[m.Legacy=0]="Legacy",m[m.Strict=1]="Strict",m[m.Attribute=2]="Attribute";var E=function(){function e(e,t,r){this.decodeTree=e,this.emitCodePoint=t,this.errors=r,this.state=p.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=f.Strict}return e.prototype.startEntity=function(e){this.decodeMode=e,this.state=p.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},e.prototype.write=function(e,t){switch(this.state){case p.EntityStart:return e.charCodeAt(t)===l.NUM?(this.state=p.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=p.NamedEntity,this.stateNamedEntity(e,t));case p.NumericStart:return this.stateNumericStart(e,t);case p.NumericDecimal:return this.stateNumericDecimal(e,t);case p.NumericHex:return this.stateNumericHex(e,t);case p.NamedEntity:return this.stateNamedEntity(e,t)}},e.prototype.stateNumericStart=function(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===l.LOWER_X?(this.state=p.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=p.NumericDecimal,this.stateNumericDecimal(e,t))},e.prototype.addToNumericResult=function(e,t,r,n){if(t!==r){var i=r-t;this.result=this.result*Math.pow(n,i)+parseInt(e.substr(t,i),n),this.consumed+=i}},e.prototype.stateNumericHex=function(e,t){for(var r=t;t<e.length;){var n=e.charCodeAt(t);if(!b(n)&&!y(n))return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(n,3);t+=1}return this.addToNumericResult(e,r,t,16),-1},e.prototype.stateNumericDecimal=function(e,t){for(var r=t;t<e.length;){var n=e.charCodeAt(t);if(!b(n))return this.addToNumericResult(e,r,t,10),this.emitNumericEntity(n,2);t+=1}return this.addToNumericResult(e,r,t,10),-1},e.prototype.emitNumericEntity=function(e,t){var r;if(this.consumed<=t)return null===(r=this.errors)||void 0===r||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===l.SEMI)this.consumed+=1;else if(this.decodeMode===f.Strict)return 0;return this.emitCodePoint((0,a.replaceCodePoint)(this.result),this.consumed),this.errors&&(e!==l.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},e.prototype.stateNamedEntity=function(e,t){for(var r=this.decodeTree,n=r[this.treeIndex],i=(n&u.VALUE_LENGTH)>>14;t<e.length;t++,this.excess++){var o=e.charCodeAt(t);if(this.treeIndex=S(r,n,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return 0===this.result||this.decodeMode===f.Attribute&&(0===i||T(o))?0:this.emitNotTerminatedNamedEntity();if(0!=(i=((n=r[this.treeIndex])&u.VALUE_LENGTH)>>14)){if(o===l.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==f.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},e.prototype.emitNotTerminatedNamedEntity=function(){var e,t=this.result,r=(this.decodeTree[t]&u.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,r,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed},e.prototype.emitNamedEntityData=function(e,t,r){var n=this.decodeTree;return this.emitCodePoint(1===t?n[e]&~u.VALUE_LENGTH:n[e+1],r),3===t&&this.emitCodePoint(n[e+2],r),r},e.prototype.end=function(){var e;switch(this.state){case p.NamedEntity:return 0===this.result||this.decodeMode===f.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case p.NumericDecimal:return this.emitNumericEntity(0,2);case p.NumericHex:return this.emitNumericEntity(0,3);case p.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case p.EntityStart:return 0}},e}();function O(e){var t="",r=new E(e,function(e){return t+=(0,a.fromCodePoint)(e)});return function(e,n){for(var i=0,o=0;(o=e.indexOf("&",o))>=0;){t+=e.slice(i,o),r.startEntity(n);var s=r.write(e,o+1);if(s<0){i=o+r.end();break}i=o+s,o=0===s?i+1:i}var a=t+e.slice(i);return t="",a}}function S(e,t,r,n){var i=(t&u.BRANCH_LENGTH)>>7,o=t&u.JUMP_TABLE;if(0===i)return 0!==o&&n===o?r:-1;if(o){var s=n-o;return s<0||s>=i?-1:e[r+s]-1}for(var a=r,l=a+i-1;a<=l;){var c=a+l>>>1,d=e[c];if(d<n)a=c+1;else{if(!(d>n))return e[c+i];l=c-1}}return-1}e.EntityDecoder=E,e.determineBranch=S;var x=O(o.default),v=O(s.default);e.decodeHTML=function(e,t){return void 0===t&&(t=f.Legacy),x(e,t)},e.decodeHTMLAttribute=function(e){return x(e,f.Attribute)},e.decodeHTMLStrict=function(e){return x(e,f.Strict)},e.decodeXML=function(e){return v(e,f.Strict)}}(decode$1)),decode$1}var encode$1={},encodeHtml$1={},hasRequiredEncodeHtml$1;function requireEncodeHtml$1(){if(hasRequiredEncodeHtml$1)return encodeHtml$1;function e(e){for(var t=1;t<e.length;t++)e[t][0]+=e[t-1][0]+1;return e}return hasRequiredEncodeHtml$1=1,Object.defineProperty(encodeHtml$1,"__esModule",{value:!0}),encodeHtml$1.default=new Map(e([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(e([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(e([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(e([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]])),encodeHtml$1}var _escape$1={},hasRequired_escape$1,hasRequiredEncode$1,hasRequiredLib$6;function require_escape$1(){return hasRequired_escape$1||(hasRequired_escape$1=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.getCodePoint=e.xmlReplacer=void 0,e.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var t=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);function r(r){for(var n,i="",o=0;null!==(n=e.xmlReplacer.exec(r));){var s=n.index,a=r.charCodeAt(s),l=t.get(a);void 0!==l?(i+=r.substring(o,s)+l,o=s+1):(i+="".concat(r.substring(o,s),"&#x").concat((0,e.getCodePoint)(r,s).toString(16),";"),o=e.xmlReplacer.lastIndex+=Number(55296==(64512&a)))}return i+r.substr(o)}function n(e,t){return function(r){for(var n,i=0,o="";n=e.exec(r);)i!==n.index&&(o+=r.substring(i,n.index)),o+=t.get(n[0].charCodeAt(0)),i=n.index+1;return o+r.substring(i)}}e.getCodePoint=null!=String.prototype.codePointAt?function(e,t){return e.codePointAt(t)}:function(e,t){return 55296==(64512&e.charCodeAt(t))?1024*(e.charCodeAt(t)-55296)+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t)},e.encodeXML=r,e.escape=r,e.escapeUTF8=n(/[&<>'"]/g,t),e.escapeAttribute=n(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),e.escapeText=n(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))}(_escape$1)),_escape$1}function requireEncode$1(){if(hasRequiredEncode$1)return encode$1;hasRequiredEncode$1=1;var e=encode$1&&encode$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(encode$1,"__esModule",{value:!0}),encode$1.encodeNonAsciiHTML=encode$1.encodeHTML=void 0;var t=e(requireEncodeHtml$1()),r=require_escape$1(),n=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function i(e,n){for(var i,o="",s=0;null!==(i=e.exec(n));){var a=i.index;o+=n.substring(s,a);var l=n.charCodeAt(a),c=t.default.get(l);if("object"==typeof c){if(a+1<n.length){var u=n.charCodeAt(a+1),d="number"==typeof c.n?c.n===u?c.o:void 0:c.n.get(u);if(void 0!==d){o+=d,s=e.lastIndex+=1;continue}}c=c.v}if(void 0!==c)o+=c,s=a+1;else{var p=(0,r.getCodePoint)(n,a);o+="&#x".concat(p.toString(16),";"),s=e.lastIndex+=Number(p!==l)}}return o+n.substr(s)}return encode$1.encodeHTML=function(e){return i(n,e)},encode$1.encodeNonAsciiHTML=function(e){return i(r.xmlReplacer,e)},encode$1}function requireLib$6(){return hasRequiredLib$6||(hasRequiredLib$6=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXMLStrict=e.decodeHTML5Strict=e.decodeHTML4Strict=e.decodeHTML5=e.decodeHTML4=e.decodeHTMLAttribute=e.decodeHTMLStrict=e.decodeHTML=e.decodeXML=e.DecodingMode=e.EntityDecoder=e.encodeHTML5=e.encodeHTML4=e.encodeNonAsciiHTML=e.encodeHTML=e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.encode=e.decodeStrict=e.decode=e.EncodingMode=e.EntityLevel=void 0;var t,r,n,i,o=requireDecode(),s=requireEncode$1(),a=require_escape$1();function l(e,r){if(void 0===r&&(r=t.XML),("number"==typeof r?r:r.level)===t.HTML){var n="object"==typeof r?r.mode:void 0;return(0,o.decodeHTML)(e,n)}return(0,o.decodeXML)(e)}(r=t=e.EntityLevel||(e.EntityLevel={}))[r.XML=0]="XML",r[r.HTML=1]="HTML",(i=n=e.EncodingMode||(e.EncodingMode={}))[i.UTF8=0]="UTF8",i[i.ASCII=1]="ASCII",i[i.Extensive=2]="Extensive",i[i.Attribute=3]="Attribute",i[i.Text=4]="Text",e.decode=l,e.decodeStrict=function(e,r){var n;void 0===r&&(r=t.XML);var i="number"==typeof r?{level:r}:r;return null!==(n=i.mode)&&void 0!==n||(i.mode=o.DecodingMode.Strict),l(e,i)},e.encode=function(e,r){void 0===r&&(r=t.XML);var i="number"==typeof r?{level:r}:r;return i.mode===n.UTF8?(0,a.escapeUTF8)(e):i.mode===n.Attribute?(0,a.escapeAttribute)(e):i.mode===n.Text?(0,a.escapeText)(e):i.level===t.HTML?i.mode===n.ASCII?(0,s.encodeNonAsciiHTML)(e):(0,s.encodeHTML)(e):(0,a.encodeXML)(e)};var c=require_escape$1();Object.defineProperty(e,"encodeXML",{enumerable:!0,get:function(){return c.encodeXML}}),Object.defineProperty(e,"escape",{enumerable:!0,get:function(){return c.escape}}),Object.defineProperty(e,"escapeUTF8",{enumerable:!0,get:function(){return c.escapeUTF8}}),Object.defineProperty(e,"escapeAttribute",{enumerable:!0,get:function(){return c.escapeAttribute}}),Object.defineProperty(e,"escapeText",{enumerable:!0,get:function(){return c.escapeText}});var u=requireEncode$1();Object.defineProperty(e,"encodeHTML",{enumerable:!0,get:function(){return u.encodeHTML}}),Object.defineProperty(e,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return u.encodeNonAsciiHTML}}),Object.defineProperty(e,"encodeHTML4",{enumerable:!0,get:function(){return u.encodeHTML}}),Object.defineProperty(e,"encodeHTML5",{enumerable:!0,get:function(){return u.encodeHTML}});var d=requireDecode();Object.defineProperty(e,"EntityDecoder",{enumerable:!0,get:function(){return d.EntityDecoder}}),Object.defineProperty(e,"DecodingMode",{enumerable:!0,get:function(){return d.DecodingMode}}),Object.defineProperty(e,"decodeXML",{enumerable:!0,get:function(){return d.decodeXML}}),Object.defineProperty(e,"decodeHTML",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(e,"decodeHTMLStrict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTMLAttribute",{enumerable:!0,get:function(){return d.decodeHTMLAttribute}}),Object.defineProperty(e,"decodeHTML4",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(e,"decodeHTML5",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(e,"decodeHTML4Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML5Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(e,"decodeXMLStrict",{enumerable:!0,get:function(){return d.decodeXML}})}(lib$3)),lib$3}var foreignNames={},hasRequiredForeignNames,hasRequiredLib$5,hasRequiredStringify$3;function requireForeignNames(){return hasRequiredForeignNames||(hasRequiredForeignNames=1,Object.defineProperty(foreignNames,"__esModule",{value:!0}),foreignNames.attributeNames=foreignNames.elementNames=void 0,foreignNames.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(e){return[e.toLowerCase(),e]})),foreignNames.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(e){return[e.toLowerCase(),e]}))),foreignNames}function requireLib$5(){if(hasRequiredLib$5)return lib$4;hasRequiredLib$5=1;var e=lib$4&&lib$4.__assign||function(){return e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},e.apply(this,arguments)},t=lib$4&&lib$4.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=lib$4&&lib$4.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=lib$4&&lib$4.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(n,e,i);return r(n,e),n};Object.defineProperty(lib$4,"__esModule",{value:!0}),lib$4.render=void 0;var i=n(requireLib$8()),o=requireLib$6(),s=requireForeignNames(),a=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function l(e){return e.replace(/"/g,"&quot;")}var c=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function u(e,t){void 0===t&&(t={});for(var r=("length"in e?e:[e]),n="",i=0;i<r.length;i++)n+=d(r[i],t);return n}function d(t,r){switch(t.type){case i.Root:return u(t.children,r);case i.Doctype:case i.Directive:return"<".concat(t.data,">");case i.Comment:return"\x3c!--".concat(t.data,"--\x3e");case i.CDATA:return function(e){return"<![CDATA[".concat(e.children[0].data,"]]>")}(t);case i.Script:case i.Style:case i.Tag:return function(t,r){var n;"foreign"===r.xmlMode&&(t.name=null!==(n=s.elementNames.get(t.name))&&void 0!==n?n:t.name,t.parent&&p.has(t.parent.name)&&(r=e(e({},r),{xmlMode:!1}))),!r.xmlMode&&h.has(t.name)&&(r=e(e({},r),{xmlMode:"foreign"}));var i="<".concat(t.name),a=function(e,t){var r;if(e){var n=!1===(null!==(r=t.encodeEntities)&&void 0!==r?r:t.decodeEntities)?l:t.xmlMode||"utf8"!==t.encodeEntities?o.encodeXML:o.escapeAttribute;return Object.keys(e).map(function(r){var i,o,a=null!==(i=e[r])&&void 0!==i?i:"";return"foreign"===t.xmlMode&&(r=null!==(o=s.attributeNames.get(r))&&void 0!==o?o:r),t.emptyAttrs||t.xmlMode||""!==a?"".concat(r,'="').concat(n(a),'"'):r}).join(" ")}}(t.attribs,r);return a&&(i+=" ".concat(a)),0===t.children.length&&(r.xmlMode?!1!==r.selfClosingTags:r.selfClosingTags&&c.has(t.name))?(r.xmlMode||(i+=" "),i+="/>"):(i+=">",t.children.length>0&&(i+=u(t.children,r)),!r.xmlMode&&c.has(t.name)||(i+="</".concat(t.name,">"))),i}(t,r);case i.Text:return function(e,t){var r,n=e.data||"";return!1===(null!==(r=t.encodeEntities)&&void 0!==r?r:t.decodeEntities)||!t.xmlMode&&e.parent&&a.has(e.parent.name)||(n=t.xmlMode||"utf8"!==t.encodeEntities?(0,o.encodeXML)(n):(0,o.escapeText)(n)),n}(t,r)}}lib$4.render=u,lib$4.default=u;var p=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),h=new Set(["svg","math"]);return lib$4}function requireStringify$3(){if(hasRequiredStringify$3)return stringify$2;hasRequiredStringify$3=1;var e=stringify$2&&stringify$2.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(stringify$2,"__esModule",{value:!0}),stringify$2.getOuterHTML=i,stringify$2.getInnerHTML=function(e,r){return(0,t.hasChildren)(e)?e.children.map(function(e){return i(e,r)}).join(""):""},stringify$2.getText=function e(r){return Array.isArray(r)?r.map(e).join(""):(0,t.isTag)(r)?"br"===r.name?"\n":e(r.children):(0,t.isCDATA)(r)?e(r.children):(0,t.isText)(r)?r.data:""},stringify$2.textContent=function e(r){return Array.isArray(r)?r.map(e).join(""):(0,t.hasChildren)(r)&&!(0,t.isComment)(r)?e(r.children):(0,t.isText)(r)?r.data:""},stringify$2.innerText=function e(r){return Array.isArray(r)?r.map(e).join(""):(0,t.hasChildren)(r)&&(r.type===n.ElementType.Tag||(0,t.isCDATA)(r))?e(r.children):(0,t.isText)(r)?r.data:""};var t=requireLib$7(),r=e(requireLib$5()),n=requireLib$8();function i(e,t){return(0,r.default)(e,t)}return stringify$2}var traversal={},hasRequiredTraversal;function requireTraversal(){if(hasRequiredTraversal)return traversal;hasRequiredTraversal=1,Object.defineProperty(traversal,"__esModule",{value:!0}),traversal.getChildren=t,traversal.getParent=r,traversal.getSiblings=function(e){var n=r(e);if(null!=n)return t(n);for(var i=[e],o=e.prev,s=e.next;null!=o;)i.unshift(o),o=o.prev;for(;null!=s;)i.push(s),s=s.next;return i},traversal.getAttributeValue=function(e,t){var r;return null===(r=e.attribs)||void 0===r?void 0:r[t]},traversal.hasAttrib=function(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]},traversal.getName=function(e){return e.name},traversal.nextElementSibling=function(t){for(var r=t.next;null!==r&&!(0,e.isTag)(r);)r=r.next;return r},traversal.prevElementSibling=function(t){for(var r=t.prev;null!==r&&!(0,e.isTag)(r);)r=r.prev;return r};var e=requireLib$7();function t(t){return(0,e.hasChildren)(t)?t.children:[]}function r(e){return e.parent||null}return traversal}var manipulation={},hasRequiredManipulation;function requireManipulation(){if(hasRequiredManipulation)return manipulation;function e(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children,r=t.lastIndexOf(e);r>=0&&t.splice(r,1)}e.next=null,e.prev=null,e.parent=null}return hasRequiredManipulation=1,Object.defineProperty(manipulation,"__esModule",{value:!0}),manipulation.removeElement=e,manipulation.replaceElement=function(e,t){var r=t.prev=e.prev;r&&(r.next=t);var n=t.next=e.next;n&&(n.prev=t);var i=t.parent=e.parent;if(i){var o=i.children;o[o.lastIndexOf(e)]=t,e.parent=null}},manipulation.appendChild=function(t,r){if(e(r),r.next=null,r.parent=t,t.children.push(r)>1){var n=t.children[t.children.length-2];n.next=r,r.prev=n}else r.prev=null},manipulation.append=function(t,r){e(r);var n=t.parent,i=t.next;if(r.next=i,r.prev=t,t.next=r,r.parent=n,i){if(i.prev=r,n){var o=n.children;o.splice(o.lastIndexOf(i),0,r)}}else n&&n.children.push(r)},manipulation.prependChild=function(t,r){if(e(r),r.parent=t,r.prev=null,1!==t.children.unshift(r)){var n=t.children[1];n.prev=r,r.next=n}else r.next=null},manipulation.prepend=function(t,r){e(r);var n=t.parent;if(n){var i=n.children;i.splice(i.indexOf(t),0,r)}t.prev&&(t.prev.next=r),r.parent=n,r.prev=t.prev,r.next=t,t.prev=r},manipulation}var querying={},hasRequiredQuerying;function requireQuerying(){if(hasRequiredQuerying)return querying;hasRequiredQuerying=1,Object.defineProperty(querying,"__esModule",{value:!0}),querying.filter=function(e,r,n,i){return void 0===n&&(n=!0),void 0===i&&(i=1/0),t(e,Array.isArray(r)?r:[r],n,i)},querying.find=t,querying.findOneChild=function(e,t){return t.find(e)},querying.findOne=function t(r,n,i){void 0===i&&(i=!0);for(var o=Array.isArray(n)?n:[n],s=0;s<o.length;s++){var a=o[s];if((0,e.isTag)(a)&&r(a))return a;if(i&&(0,e.hasChildren)(a)&&a.children.length>0){var l=t(r,a.children,!0);if(l)return l}}return null},querying.existsOne=function t(r,n){return(Array.isArray(n)?n:[n]).some(function(n){return(0,e.isTag)(n)&&r(n)||(0,e.hasChildren)(n)&&t(r,n.children)})},querying.findAll=function(t,r){for(var n=[],i=[Array.isArray(r)?r:[r]],o=[0];;)if(o[0]>=i[0].length){if(1===i.length)return n;i.shift(),o.shift()}else{var s=i[0][o[0]++];(0,e.isTag)(s)&&t(s)&&n.push(s),(0,e.hasChildren)(s)&&s.children.length>0&&(o.unshift(0),i.unshift(s.children))}};var e=requireLib$7();function t(t,r,n,i){for(var o=[],s=[Array.isArray(r)?r:[r]],a=[0];;)if(a[0]>=s[0].length){if(1===a.length)return o;s.shift(),a.shift()}else{var l=s[0][a[0]++];if(t(l)&&(o.push(l),--i<=0))return o;n&&(0,e.hasChildren)(l)&&l.children.length>0&&(a.unshift(0),s.unshift(l.children))}}return querying}var legacy={},hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1,Object.defineProperty(legacy,"__esModule",{value:!0}),legacy.testElement=function(e,t){var r=o(e);return!r||r(t)},legacy.getElements=function(e,r,n,i){void 0===i&&(i=1/0);var s=o(e);return s?(0,t.filter)(s,r,n,i):[]},legacy.getElementById=function(e,r,i){return void 0===i&&(i=!0),Array.isArray(r)||(r=[r]),(0,t.findOne)(n("id",e),r,i)},legacy.getElementsByTagName=function(e,n,i,o){return void 0===i&&(i=!0),void 0===o&&(o=1/0),(0,t.filter)(r.tag_name(e),n,i,o)},legacy.getElementsByClassName=function(e,r,i,o){return void 0===i&&(i=!0),void 0===o&&(o=1/0),(0,t.filter)(n("class",e),r,i,o)},legacy.getElementsByTagType=function(e,n,i,o){return void 0===i&&(i=!0),void 0===o&&(o=1/0),(0,t.filter)(r.tag_type(e),n,i,o)};var e=requireLib$7(),t=requireQuerying(),r={tag_name:function(t){return"function"==typeof t?function(r){return(0,e.isTag)(r)&&t(r.name)}:"*"===t?e.isTag:function(r){return(0,e.isTag)(r)&&r.name===t}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(t){return"function"==typeof t?function(r){return(0,e.isText)(r)&&t(r.data)}:function(r){return(0,e.isText)(r)&&r.data===t}}};function n(t,r){return"function"==typeof r?function(n){return(0,e.isTag)(n)&&r(n.attribs[t])}:function(n){return(0,e.isTag)(n)&&n.attribs[t]===r}}function i(e,t){return function(r){return e(r)||t(r)}}function o(e){var t=Object.keys(e).map(function(t){var i=e[t];return Object.prototype.hasOwnProperty.call(r,t)?r[t](i):n(t,i)});return 0===t.length?null:t.reduce(i)}return legacy}var helpers$1={},hasRequiredHelpers$1;function requireHelpers$1(){if(hasRequiredHelpers$1)return helpers$1;hasRequiredHelpers$1=1,Object.defineProperty(helpers$1,"__esModule",{value:!0}),helpers$1.DocumentPosition=void 0,helpers$1.removeSubsets=function(e){for(var t=e.length;--t>=0;){var r=e[t];if(t>0&&e.lastIndexOf(r,t-1)>=0)e.splice(t,1);else for(var n=r.parent;n;n=n.parent)if(e.includes(n)){e.splice(t,1);break}}return e},helpers$1.compareDocumentPosition=n,helpers$1.uniqueSort=function(t){return(t=t.filter(function(e,t,r){return!r.includes(e,t+1)})).sort(function(t,r){var i=n(t,r);return i&e.PRECEDING?-1:i&e.FOLLOWING?1:0}),t};var e,t,r=requireLib$7();function n(t,n){var i=[],o=[];if(t===n)return 0;for(var s=(0,r.hasChildren)(t)?t:t.parent;s;)i.unshift(s),s=s.parent;for(s=(0,r.hasChildren)(n)?n:n.parent;s;)o.unshift(s),s=s.parent;for(var a=Math.min(i.length,o.length),l=0;l<a&&i[l]===o[l];)l++;if(0===l)return e.DISCONNECTED;var c=i[l-1],u=c.children,d=i[l],p=o[l];return u.indexOf(d)>u.indexOf(p)?c===n?e.FOLLOWING|e.CONTAINED_BY:e.FOLLOWING:c===t?e.PRECEDING|e.CONTAINS:e.PRECEDING}return(t=e||(helpers$1.DocumentPosition=e={}))[t.DISCONNECTED=1]="DISCONNECTED",t[t.PRECEDING=2]="PRECEDING",t[t.FOLLOWING=4]="FOLLOWING",t[t.CONTAINS=8]="CONTAINS",t[t.CONTAINED_BY=16]="CONTAINED_BY",helpers$1}var feeds={},hasRequiredFeeds,hasRequiredLib$4,hasRequiredLib$3,escapeStringRegexp,hasRequiredEscapeStringRegexp;function requireFeeds(){if(hasRequiredFeeds)return feeds;hasRequiredFeeds=1,Object.defineProperty(feeds,"__esModule",{value:!0}),feeds.getFeed=function(e){var r=o(l,e);return r?"feed"===r.name?function(e){var r,n=e.children,l={type:"atom",items:(0,t.getElementsByTagName)("entry",n).map(function(e){var t,r=e.children,n={media:i(r)};a(n,"id","id",r),a(n,"title","title",r);var l=null===(t=o("link",r))||void 0===t?void 0:t.attribs.href;l&&(n.link=l);var c=s("summary",r)||s("content",r);c&&(n.description=c);var u=s("updated",r);return u&&(n.pubDate=new Date(u)),n})};a(l,"id","id",n),a(l,"title","title",n);var c=null===(r=o("link",n))||void 0===r?void 0:r.attribs.href;c&&(l.link=c),a(l,"description","subtitle",n);var u=s("updated",n);return u&&(l.updated=new Date(u)),a(l,"author","email",n,!0),l}(r):function(e){var r,n,l=null!==(n=null===(r=o("channel",e.children))||void 0===r?void 0:r.children)&&void 0!==n?n:[],c={type:e.name.substr(0,3),id:"",items:(0,t.getElementsByTagName)("item",e.children).map(function(e){var t=e.children,r={media:i(t)};a(r,"id","guid",t),a(r,"title","title",t),a(r,"link","link",t),a(r,"description","description",t);var n=s("pubDate",t)||s("dc:date",t);return n&&(r.pubDate=new Date(n)),r})};a(c,"title","title",l),a(c,"link","link",l),a(c,"description","description",l);var u=s("lastBuildDate",l);return u&&(c.updated=new Date(u)),a(c,"author","managingEditor",l,!0),c}(r):null};var e=requireStringify$3(),t=requireLegacy(),r=["url","type","lang"],n=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function i(e){return(0,t.getElementsByTagName)("media:content",e).map(function(e){for(var t=e.attribs,i={medium:t.medium,isDefault:!!t.isDefault},o=0,s=r;o<s.length;o++)t[c=s[o]]&&(i[c]=t[c]);for(var a=0,l=n;a<l.length;a++){var c;t[c=l[a]]&&(i[c]=parseInt(t[c],10))}return t.expression&&(i.expression=t.expression),i})}function o(e,r){return(0,t.getElementsByTagName)(e,r,!0,1)[0]}function s(r,n,i){return void 0===i&&(i=!1),(0,e.textContent)((0,t.getElementsByTagName)(r,n,i,1)).trim()}function a(e,t,r,n,i){void 0===i&&(i=!1);var o=s(r,n,i);o&&(e[t]=o)}function l(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}return feeds}function requireLib$4(){return hasRequiredLib$4||(hasRequiredLib$4=1,function(e){var t=lib$5&&lib$5.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=lib$5&&lib$5.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.hasChildren=e.isDocument=e.isComment=e.isText=e.isCDATA=e.isTag=void 0,r(requireStringify$3(),e),r(requireTraversal(),e),r(requireManipulation(),e),r(requireQuerying(),e),r(requireLegacy(),e),r(requireHelpers$1(),e),r(requireFeeds(),e);var n=requireLib$7();Object.defineProperty(e,"isTag",{enumerable:!0,get:function(){return n.isTag}}),Object.defineProperty(e,"isCDATA",{enumerable:!0,get:function(){return n.isCDATA}}),Object.defineProperty(e,"isText",{enumerable:!0,get:function(){return n.isText}}),Object.defineProperty(e,"isComment",{enumerable:!0,get:function(){return n.isComment}}),Object.defineProperty(e,"isDocument",{enumerable:!0,get:function(){return n.isDocument}}),Object.defineProperty(e,"hasChildren",{enumerable:!0,get:function(){return n.hasChildren}})}(lib$5)),lib$5}function requireLib$3(){return hasRequiredLib$3||(hasRequiredLib$3=1,function(e){var t=lib$8&&lib$8.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=lib$8&&lib$8.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=lib$8&&lib$8.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(n,e,i);return r(n,e),n},i=lib$8&&lib$8.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.DomUtils=e.parseFeed=e.getFeed=e.ElementType=e.Tokenizer=e.createDomStream=e.parseDOM=e.parseDocument=e.DefaultHandler=e.DomHandler=e.Parser=void 0;var o=requireParser$2(),s=requireParser$2();Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return s.Parser}});var a=requireLib$7(),l=requireLib$7();function c(e,t){var r=new a.DomHandler(void 0,t);return new o.Parser(r,t).end(e),r.root}function u(e,t){return c(e,t).children}Object.defineProperty(e,"DomHandler",{enumerable:!0,get:function(){return l.DomHandler}}),Object.defineProperty(e,"DefaultHandler",{enumerable:!0,get:function(){return l.DomHandler}}),e.parseDocument=c,e.parseDOM=u,e.createDomStream=function(e,t,r){var n=new a.DomHandler(e,t,r);return new o.Parser(n,t)};var d=requireTokenizer();Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return i(d).default}}),e.ElementType=n(requireLib$8());var p=requireLib$4(),h=requireLib$4();Object.defineProperty(e,"getFeed",{enumerable:!0,get:function(){return h.getFeed}});var f={xmlMode:!0};e.parseFeed=function(e,t){return void 0===t&&(t=f),(0,p.getFeed)(u(e,t))},e.DomUtils=n(requireLib$4())}(lib$8)),lib$8}function requireEscapeStringRegexp(){return hasRequiredEscapeStringRegexp?escapeStringRegexp:(hasRequiredEscapeStringRegexp=1,escapeStringRegexp=e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")})}var isPlainObject={},hasRequiredIsPlainObject,cjs,hasRequiredCjs;function requireIsPlainObject(){if(hasRequiredIsPlainObject)return isPlainObject;
/*!
   * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   */
function e(e){return"[object Object]"===Object.prototype.toString.call(e)}return hasRequiredIsPlainObject=1,Object.defineProperty(isPlainObject,"__esModule",{value:!0}),isPlainObject.isPlainObject=function(t){var r,n;return!1!==e(t)&&(void 0===(r=t.constructor)||!1!==e(n=r.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf"))},isPlainObject}function requireCjs(){if(hasRequiredCjs)return cjs;hasRequiredCjs=1;var e=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var r=Object.prototype.toString.call(e);return"[object RegExp]"===r||"[object Date]"===r||function(e){return e.$$typeof===t}(e)}(e)},t="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?s((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function n(e,t,n){return e.concat(t).map(function(e){return r(e,n)})}function i(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}(e))}function o(e,t){try{return t in e}catch(r){return!1}}function s(t,a,l){(l=l||{}).arrayMerge=l.arrayMerge||n,l.isMergeableObject=l.isMergeableObject||e,l.cloneUnlessOtherwiseSpecified=r;var c=Array.isArray(a);return c===Array.isArray(t)?c?l.arrayMerge(t,a,l):function(e,t,n){var a={};return n.isMergeableObject(e)&&i(e).forEach(function(t){a[t]=r(e[t],n)}),i(t).forEach(function(i){(function(e,t){return o(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(o(e,i)&&n.isMergeableObject(t[i])?a[i]=function(e,t){if(!t.customMerge)return s;var r=t.customMerge(e);return"function"==typeof r?r:s}(i,n)(e[i],t[i],n):a[i]=r(t[i],n))}),a}(t,a,l):r(a,l)}return s.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,r){return s(e,r,t)},{})},cjs=s}var parseSrcset$1={exports:{}},parseSrcset=parseSrcset$1.exports,hasRequiredParseSrcset;function requireParseSrcset(){return hasRequiredParseSrcset||(hasRequiredParseSrcset=1,t=parseSrcset,r=function(){return function(e){function t(e){return" "===e||"\t"===e||"\n"===e||"\f"===e||"\r"===e}function r(t){var r,n=t.exec(e.substring(m));if(n)return r=n[0],m+=r.length,r}for(var n,i,o,s,a,l=e.length,c=/^[ \t\n\r\u000c]+/,u=/^[, \t\n\r\u000c]+/,d=/^[^ \t\n\r\u000c]+/,p=/[,]+$/,h=/^\d+$/,f=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,m=0,g=[];;){if(r(u),m>=l)return g;n=r(d),i=[],","===n.slice(-1)?(n=n.replace(p,""),y()):b()}function b(){for(r(c),o="",s="in descriptor";;){if(a=e.charAt(m),"in descriptor"===s)if(t(a))o&&(i.push(o),o="",s="after descriptor");else{if(","===a)return m+=1,o&&i.push(o),void y();if("("===a)o+=a,s="in parens";else{if(""===a)return o&&i.push(o),void y();o+=a}}else if("in parens"===s)if(")"===a)o+=a,s="in descriptor";else{if(""===a)return i.push(o),void y();o+=a}else if("after descriptor"===s)if(t(a));else{if(""===a)return void y();s="in descriptor",m-=1}m+=1}}function y(){var e,t,r,o,s,a,l,c,u,d=!1,p={};for(o=0;o<i.length;o++)a=(s=i[o])[s.length-1],l=s.substring(0,s.length-1),c=parseInt(l,10),u=parseFloat(l),h.test(l)&&"w"===a?((e||t)&&(d=!0),0===c?d=!0:e=c):f.test(l)&&"x"===a?((e||t||r)&&(d=!0),u<0?d=!0:t=u):h.test(l)&&"h"===a?((r||t)&&(d=!0),0===c?d=!0:r=c):d=!0;d?console&&console.log:(p.url=n,e&&(p.w=e),t&&(p.d=t),r&&(p.h=r),g.push(p))}}},(e=parseSrcset$1).exports?e.exports=r():t.parseSrcset=r()),parseSrcset$1.exports;var e,t,r}var picocolors_browser={exports:{}},hasRequiredPicocolors_browser;function requirePicocolors_browser(){if(hasRequiredPicocolors_browser)return picocolors_browser.exports;hasRequiredPicocolors_browser=1;var e=String,t=function(){return{isColorSupported:!1,reset:e,bold:e,dim:e,italic:e,underline:e,inverse:e,hidden:e,strikethrough:e,black:e,red:e,green:e,yellow:e,blue:e,magenta:e,cyan:e,white:e,gray:e,bgBlack:e,bgRed:e,bgGreen:e,bgYellow:e,bgBlue:e,bgMagenta:e,bgCyan:e,bgWhite:e,blackBright:e,redBright:e,greenBright:e,yellowBright:e,blueBright:e,magentaBright:e,cyanBright:e,whiteBright:e,bgBlackBright:e,bgRedBright:e,bgGreenBright:e,bgYellowBright:e,bgBlueBright:e,bgMagentaBright:e,bgCyanBright:e,bgWhiteBright:e}};return picocolors_browser.exports=t(),picocolors_browser.exports.createColors=t,picocolors_browser.exports}const __viteBrowserExternal=new Proxy({},{get(e,t){throw new Error(`Module "" has been externalized for browser compatibility. Cannot access ".${t}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(__viteBrowserExternal$1);var cssSyntaxError,hasRequiredCssSyntaxError,stringifier,hasRequiredStringifier,stringify_1$1,hasRequiredStringify$2;function requireCssSyntaxError(){if(hasRequiredCssSyntaxError)return cssSyntaxError;hasRequiredCssSyntaxError=1;let e=requirePicocolors_browser(),t=require$$0$1;class r extends Error{constructor(e,t,n,i,o,s){super(e),this.name="CssSyntaxError",this.reason=e,o&&(this.file=o),i&&(this.source=i),s&&(this.plugin=s),void 0!==t&&void 0!==n&&("number"==typeof t?(this.line=t,this.column=n):(this.line=t.line,this.column=t.column,this.endLine=n.line,this.endColumn=n.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,r)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(r){if(!this.source)return"";let n=this.source;null==r&&(r=e.isColorSupported);let i=e=>e,o=e=>e,s=e=>e;if(r){let{bold:r,gray:n,red:a}=e.createColors(!0);o=e=>r(a(e)),i=e=>n(e),t&&(s=e=>t(e))}let a=n.split(/\r?\n/),l=Math.max(this.line-3,0),c=Math.min(this.line+2,a.length),u=String(c).length;return a.slice(l,c).map((e,t)=>{let r=l+1+t,n=" "+(" "+r).slice(-u)+" | ";if(r===this.line){if(e.length>160){let t=20,r=Math.max(0,this.column-t),a=Math.max(this.column+t,this.endColumn+t),l=e.slice(r,a),c=i(n.replace(/\d/g," "))+e.slice(0,Math.min(this.column-1,t-1)).replace(/[^\t]/g," ");return o(">")+i(n)+s(l)+"\n "+c+o("^")}let t=i(n.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return o(">")+i(n)+s(e)+"\n "+t+o("^")}return" "+i(n)+s(e)}).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}return cssSyntaxError=r,r.default=r,cssSyntaxError}function requireStringifier(){if(hasRequiredStringifier)return stringifier;hasRequiredStringifier=1;const e={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};class t{constructor(e){this.builder=e}atrule(e,t){let r="@"+e.name,n=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?r+=e.raws.afterName:n&&(r+=" "),e.nodes)this.block(e,r+n);else{let i=(e.raws.between||"")+(t?";":"");this.builder(r+n+i,e)}}beforeAfter(e,t){let r;r="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let n=e.parent,i=0;for(;n&&"root"!==n.type;)i+=1,n=n.parent;if(r.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<i;e++)r+=t}return r}block(e,t){let r,n=this.raw(e,"between","beforeOpen");this.builder(t+n+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),r=this.raw(e,"after")):r=this.raw(e,"after","emptyBody"),r&&this.builder(r),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let r=this.raw(e,"semicolon");for(let n=0;n<e.nodes.length;n++){let i=e.nodes[n],o=this.raw(i,"before");o&&this.builder(o),this.stringify(i,t!==n||r)}}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),n=e.prop+r+this.rawValue(e,"value");e.important&&(n+=e.raws.important||" !important"),t&&(n+=";"),this.builder(n,e)}document(e){this.body(e)}raw(t,r,n){let i;if(n||(n=r),r&&(i=t.raws[r],void 0!==i))return i;let o=t.parent;if("before"===n){if(!o||"root"===o.type&&o.first===t)return"";if(o&&"document"===o.type)return""}if(!o)return e[n];let s=t.root();if(s.rawCache||(s.rawCache={}),void 0!==s.rawCache[n])return s.rawCache[n];if("before"===n||"after"===n)return this.beforeAfter(t,n);{let e="raw"+((a=n)[0].toUpperCase()+a.slice(1));this[e]?i=this[e](s,t):s.walk(e=>{if(i=e.raws[r],void 0!==i)return!1})}var a;return void 0===i&&(i=e[n]),s.rawCache[n]=i,i}rawBeforeClose(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let r;return e.walkComments(e=>{if(void 0!==e.raws.before)return r=e.raws.before,r.includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1}),void 0===r?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls(e=>{if(void 0!==e.raws.before)return r=e.raws.before,r.includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1}),void 0===r?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeOpen(e){let t;return e.walk(e=>{if("decl"!==e.type&&(t=e.raws.between,void 0!==t))return!1}),t}rawBeforeRule(e){let t;return e.walk(r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&void 0!==r.raws.before)return t=r.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,void 0!==t))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(r=>{let n=r.parent;if(n&&n!==e&&n.parent&&n.parent===e&&void 0!==r.raws.before){let e=r.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,void 0!==t))return!1}),t}rawValue(e,t){let r=e[t],n=e.raws[t];return n&&n.value===r?n.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}}return stringifier=t,t.default=t,stringifier}function requireStringify$2(){if(hasRequiredStringify$2)return stringify_1$1;hasRequiredStringify$2=1;let e=requireStringifier();function t(t,r){new e(r).stringify(t)}return stringify_1$1=t,t.default=t,stringify_1$1}var symbols={},hasRequiredSymbols,node,hasRequiredNode,comment$1,hasRequiredComment,declaration,hasRequiredDeclaration,container,hasRequiredContainer,atRule,hasRequiredAtRule,document$1,hasRequiredDocument,nonSecure,hasRequiredNonSecure,previousMap,hasRequiredPreviousMap,input,hasRequiredInput,root$1,hasRequiredRoot,list_1,hasRequiredList,rule,hasRequiredRule,fromJSON_1,hasRequiredFromJSON,mapGenerator,hasRequiredMapGenerator,tokenize,hasRequiredTokenize,parser$5,hasRequiredParser$1,parse_1,hasRequiredParse$2,warning$2,hasRequiredWarning,result,hasRequiredResult,warnOnce,hasRequiredWarnOnce,lazyResult,hasRequiredLazyResult,noWorkResult,hasRequiredNoWorkResult,processor,hasRequiredProcessor,postcss_1,hasRequiredPostcss,sanitizeHtml_1,hasRequiredSanitizeHtml;function requireSymbols(){return hasRequiredSymbols||(hasRequiredSymbols=1,symbols.isClean=Symbol("isClean"),symbols.my=Symbol("my")),symbols}function requireNode(){if(hasRequiredNode)return node;hasRequiredNode=1;let e=requireCssSyntaxError(),t=requireStringifier(),r=requireStringify$2(),{isClean:n,my:i}=requireSymbols();function o(e,t){let r=new e.constructor;for(let n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;if("proxyCache"===n)continue;let i=e[n],s=typeof i;"parent"===n&&"object"===s?t&&(r[n]=t):"source"===n?r[n]=i:Array.isArray(i)?r[n]=i.map(e=>o(e,r)):("object"===s&&null!==i&&(i=o(i)),r[n]=i)}return r}function s(e,t){if(t&&void 0!==t.offset)return t.offset;let r=1,n=1,i=0;for(let o=0;o<e.length;o++){if(n===t.line&&r===t.column){i=o;break}"\n"===e[o]?(r=1,n+=1):r+=1}return i}class a{get proxyOf(){return this}constructor(e={}){this.raws={},this[n]=!1,this[i]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let r of e[t])"function"==typeof r.clone?this.append(r.clone()):this.append(r)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=o(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(t,r={}){if(this.source){let{end:e,start:n}=this.rangeBy(r);return this.source.input.error(t,{column:n.column,line:n.line},{column:e.column,line:e.line},r)}return new e(t)}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t],set:(e,t,r)=>(e[t]===r||(e[t]=r,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0)}}markClean(){this[n]=!0}markDirty(){if(this[n]){this[n]=!1;let e=this;for(;e=e.parent;)e[n]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e={}){let t=this.source.start;if(e.index)t=this.positionInside(e.index);else if(e.word){let r="document"in this.source.input?this.source.input.document:this.source.input.css,n=r.slice(s(r,this.source.start),s(r,this.source.end)).indexOf(e.word);-1!==n&&(t=this.positionInside(n))}return t}positionInside(e){let t=this.source.start.column,r=this.source.start.line,n="document"in this.source.input?this.source.input.document:this.source.input.css,i=s(n,this.source.start),o=i+e;for(let s=i;s<o;s++)"\n"===n[s]?(t=1,r+=1):t+=1;return{column:t,line:r,offset:o}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e={}){let t="document"in this.source.input?this.source.input.document:this.source.input.css,r={column:this.source.start.column,line:this.source.start.line,offset:s(t,this.source.start)},n=this.source.end?{column:this.source.end.column+1,line:this.source.end.line,offset:"number"==typeof this.source.end.offset?this.source.end.offset:s(t,this.source.end)+1}:{column:r.column+1,line:r.line,offset:r.offset+1};if(e.word){let i=t.slice(s(t,this.source.start),s(t,this.source.end)).indexOf(e.word);-1!==i&&(r=this.positionInside(i),n=this.positionInside(i+e.word.length))}else e.start?r={column:e.start.column,line:e.start.line,offset:s(t,e.start)}:e.index&&(r=this.positionInside(e.index)),e.end?n={column:e.end.column,line:e.end.line,offset:s(t,e.end)}:"number"==typeof e.endIndex?n=this.positionInside(e.endIndex):e.index&&(n=this.positionInside(e.index+1));return(n.line<r.line||n.line===r.line&&n.column<=r.column)&&(n={column:r.column+1,line:r.line,offset:r.offset+1}),{end:n,start:r}}raw(e,r){return(new t).raw(this,e,r)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let n of e)n===this?r=!0:r?(this.parent.insertAfter(t,n),t=n):this.parent.insertBefore(t,n);r||this.remove()}return this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}toJSON(e,t){let r={},n=null==t;t=t||new Map;let i=0;for(let o in this){if(!Object.prototype.hasOwnProperty.call(this,o))continue;if("parent"===o||"proxyCache"===o)continue;let e=this[o];if(Array.isArray(e))r[o]=e.map(e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e);else if("object"==typeof e&&e.toJSON)r[o]=e.toJSON(null,t);else if("source"===o){if(null==e)continue;let n=t.get(e.input);null==n&&(n=i,t.set(e.input,i),i++),r[o]={end:e.end,inputId:n,start:e.start}}else r[o]=e}return n&&(r.inputs=[...t.keys()].map(e=>e.toJSON())),r}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=r){e.stringify&&(e=e.stringify);let t="";return e(this,e=>{t+=e}),t}warn(e,t,r={}){let n={node:this};for(let i in r)n[i]=r[i];return e.warn(t,n)}}return node=a,a.default=a,node}function requireComment(){if(hasRequiredComment)return comment$1;hasRequiredComment=1;let e=requireNode();class t extends e{constructor(e){super(e),this.type="comment"}}return comment$1=t,t.default=t,comment$1}function requireDeclaration(){if(hasRequiredDeclaration)return declaration;hasRequiredDeclaration=1;let e=requireNode();class t extends e{get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}}return declaration=t,t.default=t,declaration}function requireContainer(){if(hasRequiredContainer)return container;hasRequiredContainer=1;let e,t,r,n,i=requireComment(),o=requireDeclaration(),s=requireNode(),{isClean:a,my:l}=requireSymbols();function c(e){return e.map(e=>(e.nodes&&(e.nodes=c(e.nodes)),delete e.source,e))}function u(e){if(e[a]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)u(t)}class d extends s{get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t,r,n=this.getIterator();for(;this.indexes[n]<this.proxyOf.nodes.length&&(t=this.indexes[n],r=e(this.proxyOf.nodes[t],t),!1!==r);)this.indexes[n]+=1;return delete this.indexes[n],r}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...r)=>e[t](...r.map(e=>"function"==typeof e?(t,r)=>e(t.toProxy(),r):e)):"every"===t||"some"===t?r=>e[t]((e,...t)=>r(e.toProxy(),...t)):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map(e=>e.toProxy()):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t],set:(e,t,r)=>(e[t]===r||(e[t]=r,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0)}}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let r,n=this.index(e),i=this.normalize(t,this.proxyOf.nodes[n]).reverse();n=this.index(e);for(let o of i)this.proxyOf.nodes.splice(n+1,0,o);for(let o in this.indexes)r=this.indexes[o],n<r&&(this.indexes[o]=r+i.length);return this.markDirty(),this}insertBefore(e,t){let r,n=this.index(e),i=0===n&&"prepend",o=this.normalize(t,this.proxyOf.nodes[n],i).reverse();n=this.index(e);for(let s of o)this.proxyOf.nodes.splice(n,0,s);for(let s in this.indexes)r=this.indexes[s],n<=r&&(this.indexes[s]=r+o.length);return this.markDirty(),this}normalize(r,s){if("string"==typeof r)r=c(t(r).nodes);else if(void 0===r)r=[];else if(Array.isArray(r)){r=r.slice(0);for(let e of r)e.parent&&e.parent.removeChild(e,"ignore")}else if("root"===r.type&&"document"!==this.type){r=r.nodes.slice(0);for(let e of r)e.parent&&e.parent.removeChild(e,"ignore")}else if(r.type)r=[r];else if(r.prop){if(void 0===r.value)throw new Error("Value field is missed in node creation");"string"!=typeof r.value&&(r.value=String(r.value)),r=[new o(r)]}else if(r.selector||r.selectors)r=[new n(r)];else if(r.name)r=[new e(r)];else{if(!r.text)throw new Error("Unknown node type in node creation");r=[new i(r)]}return r.map(e=>(e[l]||d.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[a]&&u(e),e.raws||(e.raws={}),void 0===e.raws.before&&s&&void 0!==s.raws.before&&(e.raws.before=s.raws.before.replace(/\S/g,"")),e.parent=this.proxyOf,e))}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let r in this.indexes)t=this.indexes[r],t>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls(n=>{t.props&&!t.props.includes(n.prop)||t.fast&&!n.value.includes(t.fast)||(n.value=n.value.replace(e,r))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,r)=>{let n;try{n=e(t,r)}catch(i){throw t.addToError(i)}return!1!==n&&t.walk&&(n=t.walk(e)),n})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((r,n)=>{if("atrule"===r.type&&e.test(r.name))return t(r,n)}):this.walk((r,n)=>{if("atrule"===r.type&&r.name===e)return t(r,n)}):(t=e,this.walk((e,r)=>{if("atrule"===e.type)return t(e,r)}))}walkComments(e){return this.walk((t,r)=>{if("comment"===t.type)return e(t,r)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((r,n)=>{if("decl"===r.type&&e.test(r.prop))return t(r,n)}):this.walk((r,n)=>{if("decl"===r.type&&r.prop===e)return t(r,n)}):(t=e,this.walk((e,r)=>{if("decl"===e.type)return t(e,r)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((r,n)=>{if("rule"===r.type&&e.test(r.selector))return t(r,n)}):this.walk((r,n)=>{if("rule"===r.type&&r.selector===e)return t(r,n)}):(t=e,this.walk((e,r)=>{if("rule"===e.type)return t(e,r)}))}}return d.registerParse=e=>{t=e},d.registerRule=e=>{n=e},d.registerAtRule=t=>{e=t},d.registerRoot=e=>{r=e},container=d,d.default=d,d.rebuild=t=>{"atrule"===t.type?Object.setPrototypeOf(t,e.prototype):"rule"===t.type?Object.setPrototypeOf(t,n.prototype):"decl"===t.type?Object.setPrototypeOf(t,o.prototype):"comment"===t.type?Object.setPrototypeOf(t,i.prototype):"root"===t.type&&Object.setPrototypeOf(t,r.prototype),t[l]=!0,t.nodes&&t.nodes.forEach(e=>{d.rebuild(e)})},container}function requireAtRule(){if(hasRequiredAtRule)return atRule;hasRequiredAtRule=1;let e=requireContainer();class t extends e{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}}return atRule=t,t.default=t,e.registerAtRule(t),atRule}function requireDocument(){if(hasRequiredDocument)return document$1;hasRequiredDocument=1;let e,t,r=requireContainer();class n extends r{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(r={}){return new e(new t,this,r).stringify()}}return n.registerLazyResult=t=>{e=t},n.registerProcessor=e=>{t=e},document$1=n,n.default=n,document$1}function requireNonSecure(){return hasRequiredNonSecure?nonSecure:(hasRequiredNonSecure=1,nonSecure={nanoid:(e=21)=>{let t="",r=0|e;for(;r--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(e,t=21)=>(r=t)=>{let n="",i=0|r;for(;i--;)n+=e[Math.random()*e.length|0];return n}})}function requirePreviousMap(){if(hasRequiredPreviousMap)return previousMap;hasRequiredPreviousMap=1;let{existsSync:e,readFileSync:t}=require$$0$1,{dirname:r,join:n}=require$$0$1,{SourceMapConsumer:i,SourceMapGenerator:o}=require$$0$1;class s{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let n=t.map?t.map.prev:void 0,i=this.loadMap(t.from,n);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=r(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new i(this.text)),this.consumerCache}decodeInline(e){let t=e.match(/^data:application\/json;charset=utf-?8,/)||e.match(/^data:application\/json,/);if(t)return decodeURIComponent(e.substr(t[0].length));let r=e.match(/^data:application\/json;charset=utf-?8;base64,/)||e.match(/^data:application\/json;base64,/);if(r)return n=e.substr(r[0].length),Buffer?Buffer.from(n,"base64").toString():window.atob(n);var n;let i=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+i)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/g);if(!t)return;let r=e.lastIndexOf(t.pop()),n=e.indexOf("*/",r);r>-1&&n>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,n)))}loadFile(n){if(this.root=r(n),e(n))return this.mapFile=n,t(n,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof i)return o.fromSourceMap(t).toString();if(t instanceof o)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let r=t(e);if(r){let e=this.loadFile(r);if(!e)throw new Error("Unable to load previous source map: "+r.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=n(r(e),t)),this.loadFile(t)}}}startWith(e,t){return!!e&&e.substr(0,t.length)===t}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}return previousMap=s,s.default=s,previousMap}function requireInput(){if(hasRequiredInput)return input;hasRequiredInput=1;let{nanoid:e}=requireNonSecure(),{isAbsolute:t,resolve:r}=require$$0$1,{SourceMapConsumer:n,SourceMapGenerator:i}=require$$0$1,{fileURLToPath:o,pathToFileURL:s}=require$$0$1,a=requireCssSyntaxError(),l=requirePreviousMap(),c=require$$0$1,u=Symbol("lineToIndexCache"),d=Boolean(n&&i),p=Boolean(r&&t);function h(e){if(e[u])return e[u];let t=e.css.split("\n"),r=new Array(t.length),n=0;for(let i=0,o=t.length;i<o;i++)r[i]=n,n+=t[i].length+1;return e[u]=r,r}class f{get from(){return this.file||this.id}constructor(n,i={}){if(null==n||"object"==typeof n&&!n.toString)throw new Error(`PostCSS received ${n} instead of CSS string`);if(this.css=n.toString(),"\ufeff"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,this.document=this.css,i.document&&(this.document=i.document.toString()),i.from&&(!p||/^\w+:\/\//.test(i.from)||t(i.from)?this.file=i.from:this.file=r(i.from)),p&&d){let e=new l(this.css,i);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+e(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,r,n={}){let i,o,l,c,u;if(t&&"object"==typeof t){let e=t,n=r;if("number"==typeof e.offset){c=e.offset;let n=this.fromOffset(c);t=n.line,r=n.col}else t=e.line,r=e.column,c=this.fromLineAndColumn(t,r);if("number"==typeof n.offset){l=n.offset;let e=this.fromOffset(l);o=e.line,i=e.col}else o=n.line,i=n.column,l=this.fromLineAndColumn(n.line,n.column)}else if(r)c=this.fromLineAndColumn(t,r);else{c=t;let e=this.fromOffset(c);t=e.line,r=e.col}let d=this.origin(t,r,o,i);return u=d?new a(e,void 0===d.endLine?d.line:{column:d.column,line:d.line},void 0===d.endLine?d.column:{column:d.endColumn,line:d.endLine},d.source,d.file,n.plugin):new a(e,void 0===o?t:{column:r,line:t},void 0===o?r:{column:i,line:o},this.css,this.file,n.plugin),u.input={column:r,endColumn:i,endLine:o,endOffset:l,line:t,offset:c,source:this.css},this.file&&(s&&(u.input.url=s(this.file).toString()),u.input.file=this.file),u}fromLineAndColumn(e,t){return h(this)[e-1]+t-1}fromOffset(e){let t=h(this),r=0;if(e>=t[t.length-1])r=t.length-1;else{let n,i=t.length-2;for(;r<i;)if(n=r+(i-r>>1),e<t[n])i=n-1;else{if(!(e>=t[n+1])){r=n;break}r=n+1}}return{col:e-t[r]+1,line:r+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:r(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,r,n,i){if(!this.map)return!1;let a,l,c=this.map.consumer(),u=c.originalPositionFor({column:r,line:e});if(!u.source)return!1;"number"==typeof n&&(a=c.originalPositionFor({column:i,line:n})),l=t(u.source)?s(u.source):new URL(u.source,this.map.consumer().sourceRoot||s(this.map.mapFile));let d={column:u.column,endColumn:a&&a.column,endLine:a&&a.line,line:u.line,url:l.toString()};if("file:"===l.protocol){if(!o)throw new Error("file: protocol is not available in this PostCSS build");d.file=o(l)}let p=c.sourceContentFor(u.source);return p&&(d.source=p),d}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}}return input=f,f.default=f,c&&c.registerInput&&c.registerInput(f),input}function requireRoot(){if(hasRequiredRoot)return root$1;hasRequiredRoot=1;let e,t,r=requireContainer();class n extends r{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,r){let n=super.normalize(e);if(t)if("prepend"===r)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let i of n)i.raws.before=t.raws.before;return n}removeChild(e,t){let r=this.index(e);return!t&&0===r&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(r={}){return new e(new t,this,r).stringify()}}return n.registerLazyResult=t=>{e=t},n.registerProcessor=e=>{t=e},root$1=n,n.default=n,r.registerRoot(n),root$1}function requireList(){if(hasRequiredList)return list_1;hasRequiredList=1;let e={comma:t=>e.split(t,[","],!0),space:t=>e.split(t,[" ","\n","\t"]),split(e,t,r){let n=[],i="",o=!1,s=0,a=!1,l="",c=!1;for(let u of e)c?c=!1:"\\"===u?c=!0:a?u===l&&(a=!1):'"'===u||"'"===u?(a=!0,l=u):"("===u?s+=1:")"===u?s>0&&(s-=1):0===s&&t.includes(u)&&(o=!0),o?(""!==i&&n.push(i.trim()),i="",o=!1):i+=u;return(r||""!==i)&&n.push(i.trim()),n}};return list_1=e,e.default=e,list_1}function requireRule(){if(hasRequiredRule)return rule;hasRequiredRule=1;let e=requireContainer(),t=requireList();class r extends e{get selectors(){return t.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}}return rule=r,r.default=r,e.registerRule(r),rule}function requireFromJSON(){if(hasRequiredFromJSON)return fromJSON_1;hasRequiredFromJSON=1;let e=requireAtRule(),t=requireComment(),r=requireDeclaration(),n=requireInput(),i=requirePreviousMap(),o=requireRoot(),s=requireRule();function a(l,c){if(Array.isArray(l))return l.map(e=>a(e));let{inputs:u,...d}=l;if(u){c=[];for(let e of u){let t={...e,__proto__:n.prototype};t.map&&(t.map={...t.map,__proto__:i.prototype}),c.push(t)}}if(d.nodes&&(d.nodes=l.nodes.map(e=>a(e,c))),d.source){let{inputId:e,...t}=d.source;d.source=t,null!=e&&(d.source.input=c[e])}if("root"===d.type)return new o(d);if("decl"===d.type)return new r(d);if("rule"===d.type)return new s(d);if("comment"===d.type)return new t(d);if("atrule"===d.type)return new e(d);throw new Error("Unknown node type: "+l.type)}return fromJSON_1=a,a.default=a,fromJSON_1}function requireMapGenerator(){if(hasRequiredMapGenerator)return mapGenerator;hasRequiredMapGenerator=1;let{dirname:e,relative:t,resolve:r,sep:n}=require$$0$1,{SourceMapConsumer:i,SourceMapGenerator:o}=require$$0$1,{pathToFileURL:s}=require$$0$1,a=requireInput(),l=Boolean(i&&o),c=Boolean(e&&r&&t&&n);return mapGenerator=class{constructor(e,t,r,n){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=n,this.originalCSS=n,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let t of this.previous()){let r,n=this.toUrl(this.path(t.file)),o=t.root||e(t.file);!1===this.mapOpts.sourcesContent?(r=new i(t.text),r.sourcesContent&&(r.sourcesContent=null)):r=t.consumer(),this.map.applySourceMap(r,n,this.toUrl(this.path(o)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&e.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),c&&l&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=o.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new o({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new o({file:this.outputFile(),ignoreInvalidMapping:!0});let e,t,r=1,n=1,i="<no source>",s={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,(o,a,l)=>{if(this.css+=o,a&&"end"!==l&&(s.generated.line=r,s.generated.column=n-1,a.source&&a.source.start?(s.source=this.sourcePath(a),s.original.line=a.source.start.line,s.original.column=a.source.start.column-1,this.map.addMapping(s)):(s.source=i,s.original.line=1,s.original.column=0,this.map.addMapping(s))),t=o.match(/\n/g),t?(r+=t.length,e=o.lastIndexOf("\n"),n=o.length-e):n+=o.length,a&&"start"!==l){let e=a.parent||{raws:{}};("decl"===a.type||"atrule"===a.type&&!a.nodes)&&a===e.last&&!e.raws.semicolon||(a.source&&a.source.end?(s.source=this.sourcePath(a),s.original.line=a.source.end.line,s.original.column=a.source.end.column-1,s.generated.line=r,s.generated.column=n-2,this.map.addMapping(s)):(s.source=i,s.original.line=1,s.original.column=0,s.generated.line=r,s.generated.column=n-1,this.map.addMapping(s)))}})}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(e=>e.annotation))}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some(e=>e.inline))}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(e=>e.withContent())}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(n){if(this.mapOpts.absolute)return n;if(60===n.charCodeAt(0))return n;if(/^\w+:\/\//.test(n))return n;let i=this.memoizedPaths.get(n);if(i)return i;let o=this.opts.to?e(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(o=e(r(o,this.mapOpts.annotation)));let s=t(o,n);return this.memoizedPaths.set(n,s),s}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new a(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let n=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(n,t.source.input.css)}}});else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(s){let t=s(e).toString();return this.memoizedFileURLs.set(e,t),t}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;"\\"===n&&(e=e.replace(/\\/g,"/"));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}}}function requireTokenize(){if(hasRequiredTokenize)return tokenize;hasRequiredTokenize=1;const e="'".charCodeAt(0),t='"'.charCodeAt(0),r="\\".charCodeAt(0),n="/".charCodeAt(0),i="\n".charCodeAt(0),o=" ".charCodeAt(0),s="\f".charCodeAt(0),a="\t".charCodeAt(0),l="\r".charCodeAt(0),c="[".charCodeAt(0),u="]".charCodeAt(0),d="(".charCodeAt(0),p=")".charCodeAt(0),h="{".charCodeAt(0),f="}".charCodeAt(0),m=";".charCodeAt(0),g="*".charCodeAt(0),b=":".charCodeAt(0),y="@".charCodeAt(0),T=/[\t\n\f\r "#'()/;[\\\]{}]/g,E=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,O=/.[\r\n"'(/\\]/,S=/[\da-f]/i;return tokenize=function(x,v={}){let _,A,C,w,k,D,I,R,N,P,M=x.css.valueOf(),$=v.ignoreErrors,L=M.length,B=0,F=[],q=[];function j(e){throw x.error("Unclosed "+e,B)}return{back:function(e){q.push(e)},endOfFile:function(){return 0===q.length&&B>=L},nextToken:function(x){if(q.length)return q.pop();if(B>=L)return;let v=!!x&&x.ignoreUnclosed;switch(_=M.charCodeAt(B),_){case i:case o:case a:case l:case s:w=B;do{w+=1,_=M.charCodeAt(w)}while(_===o||_===i||_===a||_===l||_===s);D=["space",M.slice(B,w)],B=w-1;break;case c:case u:case h:case f:case b:case m:case p:{let e=String.fromCharCode(_);D=[e,e,B];break}case d:if(P=F.length?F.pop()[1]:"",N=M.charCodeAt(B+1),"url"===P&&N!==e&&N!==t&&N!==o&&N!==i&&N!==a&&N!==s&&N!==l){w=B;do{if(I=!1,w=M.indexOf(")",w+1),-1===w){if($||v){w=B;break}j("bracket")}for(R=w;M.charCodeAt(R-1)===r;)R-=1,I=!I}while(I);D=["brackets",M.slice(B,w+1),B,w],B=w}else w=M.indexOf(")",B+1),A=M.slice(B,w+1),-1===w||O.test(A)?D=["(","(",B]:(D=["brackets",A,B,w],B=w);break;case e:case t:k=_===e?"'":'"',w=B;do{if(I=!1,w=M.indexOf(k,w+1),-1===w){if($||v){w=B+1;break}j("string")}for(R=w;M.charCodeAt(R-1)===r;)R-=1,I=!I}while(I);D=["string",M.slice(B,w+1),B,w],B=w;break;case y:T.lastIndex=B+1,T.test(M),w=0===T.lastIndex?M.length-1:T.lastIndex-2,D=["at-word",M.slice(B,w+1),B,w],B=w;break;case r:for(w=B,C=!0;M.charCodeAt(w+1)===r;)w+=1,C=!C;if(_=M.charCodeAt(w+1),C&&_!==n&&_!==o&&_!==i&&_!==a&&_!==l&&_!==s&&(w+=1,S.test(M.charAt(w)))){for(;S.test(M.charAt(w+1));)w+=1;M.charCodeAt(w+1)===o&&(w+=1)}D=["word",M.slice(B,w+1),B,w],B=w;break;default:_===n&&M.charCodeAt(B+1)===g?(w=M.indexOf("*/",B+2)+1,0===w&&($||v?w=M.length:j("comment")),D=["comment",M.slice(B,w+1),B,w],B=w):(E.lastIndex=B+1,E.test(M),w=0===E.lastIndex?M.length-1:E.lastIndex-2,D=["word",M.slice(B,w+1),B,w],F.push(D),B=w)}return B++,D},position:function(){return B}}}}function requireParser$1(){if(hasRequiredParser$1)return parser$5;hasRequiredParser$1=1;let e=requireAtRule(),t=requireComment(),r=requireDeclaration(),n=requireRoot(),i=requireRule(),o=requireTokenize();const s={empty:!0,space:!0};return parser$5=class{constructor(e){this.input=e,this.root=new n,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(t){let r,n,i,o=new e;o.name=t[1].slice(1),""===o.name&&this.unnamedAtrule(o,t),this.init(o,t[2]);let s=!1,a=!1,l=[],c=[];for(;!this.tokenizer.endOfFile();){if(r=(t=this.tokenizer.nextToken())[0],"("===r||"["===r?c.push("("===r?")":"]"):"{"===r&&c.length>0?c.push("}"):r===c[c.length-1]&&c.pop(),0===c.length){if(";"===r){o.source.end=this.getPosition(t[2]),o.source.end.offset++,this.semicolon=!0;break}if("{"===r){a=!0;break}if("}"===r){if(l.length>0){for(i=l.length-1,n=l[i];n&&"space"===n[0];)n=l[--i];n&&(o.source.end=this.getPosition(n[3]||n[2]),o.source.end.offset++)}this.end(t);break}l.push(t)}else l.push(t);if(this.tokenizer.endOfFile()){s=!0;break}}o.raws.between=this.spacesAndCommentsFromEnd(l),l.length?(o.raws.afterName=this.spacesAndCommentsFromStart(l),this.raw(o,"params",l),s&&(t=l[l.length-1],o.source.end=this.getPosition(t[3]||t[2]),o.source.end.offset++,this.spaces=o.raws.between,o.raws.between="")):(o.raws.afterName="",o.params=""),a&&(o.nodes=[],this.current=o)}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let r,n=0;for(let i=t-1;i>=0&&(r=e[i],"space"===r[0]||(n+=1,2!==n));i--);throw this.input.error("Missed semicolon","word"===r[0]?r[3]+1:r[2])}colon(e){let t,r,n,i=0;for(let[o,s]of e.entries()){if(r=s,n=r[0],"("===n&&(i+=1),")"===n&&(i-=1),0===i&&":"===n){if(t){if("word"===t[0]&&"progid"===t[1])continue;return o}this.doubleColon(r)}t=r}return!1}comment(e){let r=new t;this.init(r,e[2]),r.source.end=this.getPosition(e[3]||e[2]),r.source.end.offset++;let n=e[1].slice(2,-2);if(/^\s*$/.test(n))r.text="",r.raws.left=n,r.raws.right="";else{let e=n.match(/^(\s*)([^]*\S)(\s*)$/);r.text=e[2],r.raws.left=e[1],r.raws.right=e[3]}}createTokenizer(){this.tokenizer=o(this.input)}decl(e,t){let n=new r;this.init(n,e[0][2]);let i,o=e[e.length-1];for(";"===o[0]&&(this.semicolon=!0,e.pop()),n.source.end=this.getPosition(o[3]||o[2]||function(e){for(let t=e.length-1;t>=0;t--){let r=e[t],n=r[3]||r[2];if(n)return n}}(e)),n.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),n.raws.before+=e.shift()[1];for(n.source.start=this.getPosition(e[0][2]),n.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;n.prop+=e.shift()[1]}for(n.raws.between="";e.length;){if(i=e.shift(),":"===i[0]){n.raws.between+=i[1];break}"word"===i[0]&&/\w/.test(i[1])&&this.unknownWord([i]),n.raws.between+=i[1]}"_"!==n.prop[0]&&"*"!==n.prop[0]||(n.raws.before+=n.prop[0],n.prop=n.prop.slice(1));let s,a=[];for(;e.length&&(s=e[0][0],"space"===s||"comment"===s);)a.push(e.shift());this.precheckMissedSemicolon(e);for(let r=e.length-1;r>=0;r--){if(i=e[r],"!important"===i[1].toLowerCase()){n.important=!0;let t=this.stringFrom(e,r);t=this.spacesFromEnd(e)+t," !important"!==t&&(n.raws.important=t);break}if("important"===i[1].toLowerCase()){let t=e.slice(0),i="";for(let e=r;e>0;e--){let r=t[e][0];if(i.trim().startsWith("!")&&"space"!==r)break;i=t.pop()[1]+i}i.trim().startsWith("!")&&(n.important=!0,n.raws.important=i,e=t)}if("space"!==i[0]&&"comment"!==i[0])break}e.some(e=>"space"!==e[0]&&"comment"!==e[0])&&(n.raws.between+=a.map(e=>e[1]).join(""),a=[]),this.raw(n,"value",a.concat(e),t),n.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new i;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&"rule"===t.type&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="",t.source.end=this.getPosition(e[2]),t.source.end.offset+=t.raws.ownSemicolon.length)}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let t=!1,r=null,n=!1,i=null,o=[],s=e[1].startsWith("--"),a=[],l=e;for(;l;){if(r=l[0],a.push(l),"("===r||"["===r)i||(i=l),o.push("("===r?")":"]");else if(s&&n&&"{"===r)i||(i=l),o.push("}");else if(0===o.length){if(";"===r){if(n)return void this.decl(a,s);break}if("{"===r)return void this.rule(a);if("}"===r){this.tokenizer.back(a.pop()),t=!0;break}":"===r&&(n=!0)}else r===o[o.length-1]&&(o.pop(),0===o.length&&(i=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(i),t&&n){if(!s)for(;a.length&&(l=a[a.length-1][0],"space"===l||"comment"===l);)this.tokenizer.back(a.pop());this.decl(a,s)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,n){let i,o,a,l,c=r.length,u="",d=!0;for(let p=0;p<c;p+=1)i=r[p],o=i[0],"space"!==o||p!==c-1||n?"comment"===o?(l=r[p-1]?r[p-1][0]:"empty",a=r[p+1]?r[p+1][0]:"empty",s[l]||s[a]||","===u.slice(-1)?d=!1:u+=i[1]):u+=i[1]:d=!1;if(!d){let n=r.reduce((e,t)=>e+t[1],"");e.raws[t]={raw:n,value:u}}e[t]=u}rule(e){e.pop();let t=new i;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],"space"===t||"comment"===t);)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r="";for(;e.length&&(t=e[0][0],"space"===t||"comment"===t);)r+=e.shift()[1];return r}spacesFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],"space"===t);)r=e.pop()[1]+r;return r}stringFrom(e,t){let r="";for(let n=t;n<e.length;n++)r+=e[n][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word "+e[0][1],{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}}}function requireParse$2(){if(hasRequiredParse$2)return parse_1;hasRequiredParse$2=1;let e=requireContainer(),t=requireInput(),r=requireParser$1();function n(e,n){let i=new t(e,n),o=new r(i);try{o.parse()}catch(s){throw"CssSyntaxError"===s.name&&n&&n.from&&(/\.scss$/i.test(n.from)?s.message+="\nYou tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser":/\.sass/i.test(n.from)?s.message+="\nYou tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser":/\.less$/i.test(n.from)&&(s.message+="\nYou tried to parse Less with the standard CSS parser; try again with the postcss-less parser")),s}return o.root}return parse_1=n,n.default=n,e.registerParse(n),parse_1}function requireWarning(){if(hasRequiredWarning)return warning$2;hasRequiredWarning=1;class e{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let r in t)this[r]=t[r]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}return warning$2=e,e.default=e,warning$2}function requireResult(){if(hasRequiredResult)return result;hasRequiredResult=1;let e=requireWarning();class t{get content(){return this.css}constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css="",this.map=void 0}toString(){return this.css}warn(t,r={}){r.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(r.plugin=this.lastPlugin.postcssPlugin);let n=new e(t,r);return this.messages.push(n),n}warnings(){return this.messages.filter(e=>"warning"===e.type)}}return result=t,t.default=t,result}function requireWarnOnce(){if(hasRequiredWarnOnce)return warnOnce;hasRequiredWarnOnce=1;let e={};return warnOnce=function(t){e[t]||(e[t]=!0,"undefined"!=typeof console&&console.warn)}}function requireLazyResult(){if(hasRequiredLazyResult)return lazyResult;hasRequiredLazyResult=1;let e=requireContainer(),t=requireDocument(),r=requireMapGenerator(),n=requireParse$2(),i=requireResult(),o=requireRoot(),s=requireStringify$2(),{isClean:a,my:l}=requireSymbols(),c=requireWarnOnce();const u={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},d={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},p={Once:!0,postcssPlugin:!0,prepare:!0};function h(e){return"object"==typeof e&&"function"==typeof e.then}function f(e){let t=!1,r=u[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[r,r+"-"+t,0,r+"Exit",r+"Exit-"+t]:t?[r,r+"-"+t,r+"Exit",r+"Exit-"+t]:e.append?[r,0,r+"Exit"]:[r,r+"Exit"]}function m(e){let t;return t="document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:f(e),{eventIndex:0,events:t,iterator:0,node:e,visitorIndex:0,visitors:[]}}function g(e){return e[a]=!1,e.nodes&&e.nodes.forEach(e=>g(e)),e}let b={};class y{get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}constructor(t,r,o){let s;if(this.stringified=!1,this.processed=!1,"object"!=typeof r||null===r||"root"!==r.type&&"document"!==r.type)if(r instanceof y||r instanceof i)s=g(r.root),r.map&&(void 0===o.map&&(o.map={}),o.map.inline||(o.map.inline=!1),o.map.prev=r.map);else{let t=n;o.syntax&&(t=o.syntax.parse),o.parser&&(t=o.parser),t.parse&&(t=t.parse);try{s=t(r,o)}catch(a){this.processed=!0,this.error=a}s&&!s[l]&&e.rebuild(s)}else s=g(r);this.result=new i(t,s,o),this.helpers={...b,postcss:b,result:this.result},this.plugins=this.processor.plugins.map(e=>"object"==typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{if(t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin){if(r.postcssVersion){r.postcssPlugin;let e=r.postcssVersion,t=this.result.processor.version,n=e.split("."),i=t.split(".");n[0]!==i[0]||(parseInt(n[1]),parseInt(i[1]))}}else e.plugin=r.postcssPlugin,e.setMessage()}catch(n){console&&console.error}return e}prepareVisitors(){this.listeners={};let e=(e,t,r)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,r])};for(let t of this.plugins)if("object"==typeof t)for(let r in t){if(!d[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!p[r])if("object"==typeof t[r])for(let n in t[r])e(t,"*"===n?r:r+"-"+n.toLowerCase(),t[r][n]);else"function"==typeof t[r]&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let r=0;r<this.plugins.length;r++){let t=this.plugins[r],n=this.runOnRoot(t);if(h(n))try{await n}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[a];){e[a]=!0;let r=[m(e)];for(;r.length>0;){let e=this.visitTick(r);if(h(e))try{await e}catch(t){let e=r[r.length-1].node;throw this.handleError(t,e)}}}if(this.listeners.OnceExit)for(let[r,n]of this.listeners.OnceExit){this.result.lastPlugin=r;try{if("document"===e.type){let t=e.nodes.map(e=>n(e,this.helpers));await Promise.all(t)}else await n(e,this.helpers)}catch(t){throw this.handleError(t)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map(t=>e.Once(t,this.helpers));return h(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=s;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let n=new r(t,this.result.root,this.result.opts).generate();return this.result.css=n[0],this.result.map=n[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins)if(h(this.runOnRoot(e)))throw this.getAsyncError();if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[a];)e[a]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return"from"in this.opts||c("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning."),this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[n,i]of e){let e;this.result.lastPlugin=n;try{e=i(t,this.helpers)}catch(r){throw this.handleError(r,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(h(e))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:r,visitors:n}=t;if("root"!==r.type&&"document"!==r.type&&!r.parent)return void e.pop();if(n.length>0&&t.visitorIndex<n.length){let[e,i]=n[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===n.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return i(r.toProxy(),this.helpers)}catch(o){throw this.handleError(o,r)}}if(0!==t.iterator){let n,i=t.iterator;for(;n=r.nodes[r.indexes[i]];)if(r.indexes[i]+=1,!n[a])return n[a]=!0,void e.push(m(n));t.iterator=0,delete r.indexes[i]}let i=t.events;for(;t.eventIndex<i.length;){let e=i[t.eventIndex];if(t.eventIndex+=1,0===e)return void(r.nodes&&r.nodes.length&&(r[a]=!0,t.iterator=r.getIterator()));if(this.listeners[e])return void(t.visitors=this.listeners[e])}e.pop()}walkSync(e){e[a]=!0;let t=f(e);for(let r of t)if(0===r)e.nodes&&e.each(e=>{e[a]||this.walkSync(e)});else{let t=this.listeners[r];if(t&&this.visitSync(t,e.toProxy()))return}}warnings(){return this.sync().warnings()}}return y.registerPostcss=e=>{b=e},lazyResult=y,y.default=y,o.registerLazyResult(y),t.registerLazyResult(y),lazyResult}function requireNoWorkResult(){if(hasRequiredNoWorkResult)return noWorkResult;hasRequiredNoWorkResult=1;let e=requireMapGenerator(),t=requireParse$2();const r=requireResult();let n=requireStringify$2(),i=requireWarnOnce();class o{get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,r=t;try{e=r(this._css,this._opts)}catch(n){this.error=n}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}constructor(t,i,o){let s;i=i.toString(),this.stringified=!1,this._processor=t,this._css=i,this._opts=o,this._map=void 0;let a=n;this.result=new r(this._processor,s,this._opts),this.result.css=i;let l=this;Object.defineProperty(this.result,"root",{get:()=>l.root});let c=new e(a,s,this._opts,i);if(c.isMap()){let[e,t]=c.generate();e&&(this.result.css=e),t&&(this.result.map=t)}else c.clearAnnotation(),this.result.css=c.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return"from"in this._opts||i("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning."),this.async().then(e,t)}toString(){return this._css}warnings(){return[]}}return noWorkResult=o,o.default=o,noWorkResult}function requireProcessor(){if(hasRequiredProcessor)return processor;hasRequiredProcessor=1;let e=requireDocument(),t=requireLazyResult(),r=requireNoWorkResult(),n=requireRoot();class i{constructor(e=[]){this.version="8.5.6",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(!0===r.postcss?r=r():r.postcss&&(r=r.postcss),"object"==typeof r&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if("object"==typeof r&&r.postcssPlugin)t.push(r);else{if("function"!=typeof r)throw"object"==typeof r&&(r.parse||r.stringify)?new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation."):new Error(r+" is not a PostCSS plugin");t.push(r)}return t}process(e,n={}){return this.plugins.length||n.parser||n.stringifier||n.syntax?new t(this,e,n):new r(this,e,n)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}}return processor=i,i.default=i,n.registerProcessor(i),e.registerProcessor(i),processor}function requirePostcss(){if(hasRequiredPostcss)return postcss_1;hasRequiredPostcss=1;var e={};let t=requireAtRule(),r=requireComment(),n=requireContainer(),i=requireCssSyntaxError(),o=requireDeclaration(),s=requireDocument(),a=requireFromJSON(),l=requireInput(),c=requireLazyResult(),u=requireList(),d=requireNode(),p=requireParse$2(),h=requireProcessor(),f=requireResult(),m=requireRoot(),g=requireRule(),b=requireStringify$2(),y=requireWarning();function T(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new h(e)}return T.plugin=function(t,r){let n,i=!1;function o(...n){console&&console.warn&&!i&&(i=!0,e.LANG&&e.LANG.startsWith("cn"));let o=r(...n);return o.postcssPlugin=t,o.postcssVersion=(new h).version,o}return Object.defineProperty(o,"postcss",{get:()=>(n||(n=o()),n)}),o.process=function(e,t,r){return T([o(r)]).process(e,t)},o},T.stringify=b,T.parse=p,T.fromJSON=a,T.list=u,T.comment=e=>new r(e),T.atRule=e=>new t(e),T.decl=e=>new o(e),T.rule=e=>new g(e),T.root=e=>new m(e),T.document=e=>new s(e),T.CssSyntaxError=i,T.Declaration=o,T.Container=n,T.Processor=h,T.Document=s,T.Comment=r,T.Warning=y,T.AtRule=t,T.Result=f,T.Input=l,T.Rule=g,T.Root=m,T.Node=d,c.registerPostcss(T),postcss_1=T,T.default=T,postcss_1}function requireSanitizeHtml(){if(hasRequiredSanitizeHtml)return sanitizeHtml_1;hasRequiredSanitizeHtml=1;const e=requireLib$3(),t=requireEscapeStringRegexp(),{isPlainObject:r}=requireIsPlainObject(),n=requireCjs(),i=requireParseSrcset(),{parse:o}=requirePostcss(),s=["img","audio","video","picture","svg","object","map","iframe","embed"],a=["script","style"];function l(e,t){e&&Object.keys(e).forEach(function(r){t(e[r],r)})}function c(e,t){return{}.hasOwnProperty.call(e,t)}function u(e,t){const r=[];return l(e,function(e){t(e)&&r.push(e)}),r}sanitizeHtml_1=p;const d=/^[^\0\t\n\f\r /<=>]+$/;function p(f,m,g){if(null==f)return"";"number"==typeof f&&(f=f.toString());let b="",y="";function T(e,t){const r=this;this.tag=e,this.attribs=t||{},this.tagPosition=b.length,this.text="",this.openingTagLength=0,this.mediaChildren=[],this.updateParentNodeText=function(){D.length&&(D[D.length-1].text+=r.text)},this.updateParentNodeMediaChildren=function(){D.length&&s.includes(this.tag)&&D[D.length-1].mediaChildren.push(this.tag)}}(m=Object.assign({},p.defaults,m)).parser=Object.assign({},h,m.parser);const E=function(e){return!1===m.allowedTags||(m.allowedTags||[]).indexOf(e)>-1};a.forEach(function(e){E(e)&&m.allowVulnerableTags});const O=m.nonTextTags||["script","style","textarea","option"];let S,x;m.allowedAttributes&&(S={},x={},l(m.allowedAttributes,function(e,r){S[r]=[];const n=[];e.forEach(function(e){"string"==typeof e&&e.indexOf("*")>=0?n.push(t(e).replace(/\\\*/g,".*")):S[r].push(e)}),n.length&&(x[r]=new RegExp("^("+n.join("|")+")$"))}));const v={},_={},A={};l(m.allowedClasses,function(e,r){if(S&&(c(S,r)||(S[r]=[]),S[r].push("class")),v[r]=e,Array.isArray(e)){const n=[];v[r]=[],A[r]=[],e.forEach(function(e){"string"==typeof e&&e.indexOf("*")>=0?n.push(t(e).replace(/\\\*/g,".*")):e instanceof RegExp?A[r].push(e):v[r].push(e)}),n.length&&(_[r]=new RegExp("^("+n.join("|")+")$"))}});const C={};let w,k,D,I,R,N,P;l(m.transformTags,function(e,t){let r;"function"==typeof e?r=e:"string"==typeof e&&(r=p.simpleTransform(e)),"*"===t?w=r:C[t]=r});let M=!1;L();const $=new e.Parser({onopentag:function(e,t){if(m.onOpenTag&&m.onOpenTag(e,t),m.enforceHtmlBoundary&&"html"===e&&L(),N)return void P++;const s=new T(e,t);D.push(s);let a=!1;const p=!!s.text;let h;if(c(C,e)&&(h=C[e](e,t),s.attribs=t=h.attribs,void 0!==h.text&&(s.innerText=h.text),e!==h.tagName&&(s.name=e=h.tagName,R[k]=h.tagName)),w&&(h=w(e,t),s.attribs=t=h.attribs,e!==h.tagName&&(s.name=e=h.tagName,R[k]=h.tagName)),(!E(e)||"recursiveEscape"===m.disallowedTagsMode&&!function(e){for(const t in e)if(c(e,t))return!1;return!0}(I)||null!=m.nestingLimit&&k>=m.nestingLimit)&&(a=!0,I[k]=!0,"discard"!==m.disallowedTagsMode&&"completelyDiscard"!==m.disallowedTagsMode||-1!==O.indexOf(e)&&(N=!0,P=1)),k++,a){if("discard"===m.disallowedTagsMode||"completelyDiscard"===m.disallowedTagsMode){if(s.innerText&&!p){const t=B(s.innerText);m.textFilter?b+=m.textFilter(t,e):b+=t,M=!0}return}y=b,b=""}b+="<"+e,"script"===e&&(m.allowedScriptHostnames||m.allowedScriptDomains)&&(s.innerText=""),a&&("escape"===m.disallowedTagsMode||"recursiveEscape"===m.disallowedTagsMode)&&m.preserveEscapedAttributes?l(t,function(e,t){b+=" "+t+'="'+B(e||"",!0)+'"'}):(!S||c(S,e)||S["*"])&&l(t,function(t,a){if(!d.test(a))return void delete s.attribs[a];if(""===t&&!m.allowedEmptyAttributes.includes(a)&&(m.nonBooleanAttributes.includes(a)||m.nonBooleanAttributes.includes("*")))return void delete s.attribs[a];let l=!1;if(!S||c(S,e)&&-1!==S[e].indexOf(a)||S["*"]&&-1!==S["*"].indexOf(a)||c(x,e)&&x[e].test(a)||x["*"]&&x["*"].test(a))l=!0;else if(S&&S[e])for(const n of S[e])if(r(n)&&n.name&&n.name===a){l=!0;let e="";if(!0===n.multiple){const r=t.split(" ");for(const t of r)-1!==n.values.indexOf(t)&&(""===e?e=t:e+=" "+t)}else n.values.indexOf(t)>=0&&(e=t);t=e}if(l){if(-1!==m.allowedSchemesAppliedToAttributes.indexOf(a)&&F(e,t))return void delete s.attribs[a];if("script"===e&&"src"===a){let e=!0;try{const r=q(t);if(m.allowedScriptHostnames||m.allowedScriptDomains){const t=(m.allowedScriptHostnames||[]).find(function(e){return e===r.url.hostname}),n=(m.allowedScriptDomains||[]).find(function(e){return r.url.hostname===e||r.url.hostname.endsWith(`.${e}`)});e=t||n}}catch(g){e=!1}if(!e)return void delete s.attribs[a]}if("iframe"===e&&"src"===a){let e=!0;try{const r=q(t);if(r.isRelativeUrl)e=c(m,"allowIframeRelativeUrls")?m.allowIframeRelativeUrls:!m.allowedIframeHostnames&&!m.allowedIframeDomains;else if(m.allowedIframeHostnames||m.allowedIframeDomains){const t=(m.allowedIframeHostnames||[]).find(function(e){return e===r.url.hostname}),n=(m.allowedIframeDomains||[]).find(function(e){return r.url.hostname===e||r.url.hostname.endsWith(`.${e}`)});e=t||n}}catch(g){e=!1}if(!e)return void delete s.attribs[a]}if("srcset"===a)try{let e=i(t);if(e.forEach(function(e){F("srcset",e.url)&&(e.evil=!0)}),e=u(e,function(e){return!e.evil}),!e.length)return void delete s.attribs[a];t=u(e,function(e){return!e.evil}).map(function(e){if(!e.url)throw new Error("URL missing");return e.url+(e.w?` ${e.w}w`:"")+(e.h?` ${e.h}h`:"")+(e.d?` ${e.d}x`:"")}).join(", "),s.attribs[a]=t}catch(g){return void delete s.attribs[a]}if("class"===a){const r=v[e],i=v["*"],o=_[e],l=A[e],c=A["*"],u=[o,_["*"]].concat(l,c).filter(function(e){return e});if(!(p=t,h=r&&i?n(r,i):r||i,f=u,t=h?(p=p.split(/\s+/)).filter(function(e){return-1!==h.indexOf(e)||f.some(function(t){return t.test(e)})}).join(" "):p).length)return void delete s.attribs[a]}if("style"===a)if(m.parseStyleAttributes)try{if(t=function(e){return e.nodes[0].nodes.reduce(function(e,t){return e.push(`${t.prop}:${t.value}${t.important?" !important":""}`),e},[]).join(";")}(function(e,t){if(!t)return e;const r=e.nodes[0];let i;return i=t[r.selector]&&t["*"]?n(t[r.selector],t["*"]):t[r.selector]||t["*"],i&&(e.nodes[0].nodes=r.nodes.reduce(function(e){return function(t,r){return c(e,r.prop)&&e[r.prop].some(function(e){return e.test(r.value)})&&t.push(r),t}}(i),[])),e}(o(e+" {"+t+"}",{map:!1}),m.allowedStyles)),0===t.length)return void delete s.attribs[a]}catch(g){return void delete s.attribs[a]}else if(m.allowedStyles)throw new Error("allowedStyles option cannot be used together with parseStyleAttributes: false.");b+=" "+a,t&&t.length?b+='="'+B(t,!0)+'"':m.allowedEmptyAttributes.includes(a)&&(b+='=""')}else delete s.attribs[a];var p,h,f}),-1!==m.selfClosing.indexOf(e)?b+=" />":(b+=">",!s.innerText||p||m.textFilter||(b+=B(s.innerText),M=!0)),a&&(b=y+B(b),y=""),s.openingTagLength=b.length-s.tagPosition},ontext:function(e){if(N)return;const t=D[D.length-1];let r;if(t&&(r=t.tag,e=void 0!==t.innerText?t.innerText:e),"completelyDiscard"!==m.disallowedTagsMode||E(r))if("discard"!==m.disallowedTagsMode&&"completelyDiscard"!==m.disallowedTagsMode||"script"!==r&&"style"!==r){if(!M){const t=B(e,!1);m.textFilter?b+=m.textFilter(t,r):b+=t}}else b+=e;else e="";D.length&&(D[D.length-1].text+=e)},onclosetag:function(e,t){if(m.onCloseTag&&m.onCloseTag(e,t),N){if(P--,P)return;N=!1}const r=D.pop();if(!r)return;if(r.tag!==e)return void D.push(r);N=!!m.enforceHtmlBoundary&&"html"===e,k--;const n=I[k];if(n){if(delete I[k],"discard"===m.disallowedTagsMode||"completelyDiscard"===m.disallowedTagsMode)return void r.updateParentNodeText();y=b,b=""}if(R[k]&&(e=R[k],delete R[k]),m.exclusiveFilter){const e=m.exclusiveFilter(r);if("excludeTag"===e)return n&&(b=y,y=""),void(b=b.substring(0,r.tagPosition)+b.substring(r.tagPosition+r.openingTagLength));if(e)return void(b=b.substring(0,r.tagPosition))}r.updateParentNodeMediaChildren(),r.updateParentNodeText(),-1!==m.selfClosing.indexOf(e)||t&&!E(e)&&["escape","recursiveEscape"].indexOf(m.disallowedTagsMode)>=0?n&&(b=y,y=""):(b+="</"+e+">",n&&(b=y+B(b),y=""),M=!1)}},m.parser);return $.write(f),$.end(),b;function L(){b="",k=0,D=[],I={},R={},N=!1,P=0}function B(e,t){return"string"!=typeof e&&(e+=""),m.parser.decodeEntities&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),t&&(e=e.replace(/"/g,"&quot;"))),e=e.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),t&&(e=e.replace(/"/g,"&quot;")),e}function F(e,t){for(t=t.replace(/[\x00-\x20]+/g,"");;){const e=t.indexOf("\x3c!--");if(-1===e)break;const r=t.indexOf("--\x3e",e+4);if(-1===r)break;t=t.substring(0,e)+t.substring(r+3)}const r=t.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!r)return!!t.match(/^[/\\]{2}/)&&!m.allowProtocolRelative;const n=r[1].toLowerCase();return c(m.allowedSchemesByTag,e)?-1===m.allowedSchemesByTag[e].indexOf(n):!m.allowedSchemes||-1===m.allowedSchemes.indexOf(n)}function q(e){if((e=e.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//")).startsWith("relative:"))throw new Error("relative: exploit attempt");let t="relative://relative-site";for(let n=0;n<100;n++)t+=`/${n}`;const r=new URL(e,t);return{isRelativeUrl:r&&"relative-site"===r.hostname&&"relative:"===r.protocol,url:r}}}const h={decodeEntities:!0};return p.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","menu","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],nonBooleanAttributes:["abbr","accept","accept-charset","accesskey","action","allow","alt","as","autocapitalize","autocomplete","blocking","charset","cite","class","color","cols","colspan","content","contenteditable","coords","crossorigin","data","datetime","decoding","dir","dirname","download","draggable","enctype","enterkeyhint","fetchpriority","for","form","formaction","formenctype","formmethod","formtarget","headers","height","hidden","high","href","hreflang","http-equiv","id","imagesizes","imagesrcset","inputmode","integrity","is","itemid","itemprop","itemref","itemtype","kind","label","lang","list","loading","low","max","maxlength","media","method","min","minlength","name","nonce","optimum","pattern","ping","placeholder","popover","popovertarget","popovertargetaction","poster","preload","referrerpolicy","rel","rows","rowspan","sandbox","scope","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","tabindex","target","title","translate","type","usemap","value","width","wrap","onauxclick","onafterprint","onbeforematch","onbeforeprint","onbeforeunload","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmessageerror","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onoffline","ononline","onpagehide","onpageshow","onpaste","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreset","onresize","onrejectionhandled","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","ontoggle","onunhandledrejection","onunload","onvolumechange","onwaiting","onwheel"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},allowedEmptyAttributes:["alt"],selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1,parseStyleAttributes:!0,preserveEscapedAttributes:!1},p.simpleTransform=function(e,t,r){return r=void 0===r||r,t=t||{},function(n,i){let o;if(r)for(o in t)i[o]=t[o];else i=t;return{tagName:e,attribs:i}}},sanitizeHtml_1}var lib$2={exports:{}},_default={},hasRequired_default,util$1,hasRequiredUtil$1,parser$4,hasRequiredParser,css$3,hasRequiredCss$1,hasRequiredLib$2,ElementType,ElementType2;function require_default(){if(hasRequired_default)return _default;function e(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}hasRequired_default=1;var t=/javascript\s*\:/gim;return _default.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},_default.getDefaultWhiteList=e,_default.onAttr=function(e,t,r){},_default.onIgnoreAttr=function(e,t,r){},_default.safeAttrValue=function(e,r){return t.test(r)?"":r},_default}function requireUtil$1(){return hasRequiredUtil$1?util$1:(hasRequiredUtil$1=1,util$1={indexOf:function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var n,i;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}})}function requireParser(){if(hasRequiredParser)return parser$4;hasRequiredParser=1;var e=requireUtil$1();return parser$4=function(t,r){";"!==(t=e.trimRight(t))[t.length-1]&&(t+=";");var n=t.length,i=!1,o=0,s=0,a="";function l(){if(!i){var n=e.trim(t.slice(o,s)),l=n.indexOf(":");if(-1!==l){var c=e.trim(n.slice(0,l)),u=e.trim(n.slice(l+1));if(c){var d=r(o,a.length,c,u,n);d&&(a+=d+"; ")}}}o=s+1}for(;s<n;s++){var c=t[s];if("/"===c&&"*"===t[s+1]){var u=t.indexOf("*/",s+2);if(-1===u)break;o=(s=u+1)+1,i=!1}else"("===c?i=!0:")"===c?i=!1:";"===c?i||l():"\n"===c&&l()}return e.trim(a)}}function requireCss$1(){if(hasRequiredCss$1)return css$3;hasRequiredCss$1=1;var e=require_default(),t=requireParser();function r(e){return null==e}function n(t){(t=function(e){var t={};for(var r in e)t[r]=e[r];return t}(t||{})).whiteList=t.whiteList||e.whiteList,t.onAttr=t.onAttr||e.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||e.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||e.safeAttrValue,this.options=t}return requireUtil$1(),n.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var n=this.options,i=n.whiteList,o=n.onAttr,s=n.onIgnoreAttr,a=n.safeAttrValue;return t(e,function(e,t,n,l,c){var u=i[n],d=!1;if(!0===u?d=u:"function"==typeof u?d=u(l):u instanceof RegExp&&(d=u.test(l)),!0!==d&&(d=!1),l=a(n,l)){var p,h={position:t,sourcePosition:e,source:c,isWhite:d};return d?r(p=o(n,l,h))?n+":"+l:p:r(p=s(n,l,h))?void 0:p}})},css$3=n}function requireLib$2(){return hasRequiredLib$2||(hasRequiredLib$2=1,function(e,t){var r=require_default(),n=requireCss$1();for(var i in(t=e.exports=function(e,t){return new n(t).process(e)}).FilterCSS=n,r)t[i]=r[i];"undefined"!=typeof window&&(window.filterCSS=e.exports)}(lib$2,lib$2.exports)),lib$2.exports}function isTag$1(e){return e.type===ElementType.Tag||e.type===ElementType.Script||e.type===ElementType.Style}ElementType2=ElementType||(ElementType={}),ElementType2.Root="root",ElementType2.Text="text",ElementType2.Directive="directive",ElementType2.Comment="comment",ElementType2.Script="script",ElementType2.Style="style",ElementType2.Tag="tag",ElementType2.CDATA="cdata",ElementType2.Doctype="doctype";const Root$2=ElementType.Root,Text$2=ElementType.Text,Directive=ElementType.Directive,Comment$1=ElementType.Comment,Script=ElementType.Script,Style=ElementType.Style,Tag$1=ElementType.Tag,CDATA$1=ElementType.CDATA,Doctype=ElementType.Doctype;let Node$1=class{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(e){this.parent=e}get previousSibling(){return this.prev}set previousSibling(e){this.prev=e}get nextSibling(){return this.next}set nextSibling(e){this.next=e}cloneNode(e=!1){return cloneNode(this,e)}};class DataNode extends Node$1{constructor(e){super(),this.data=e}get nodeValue(){return this.data}set nodeValue(e){this.data=e}}let Text$1=class extends DataNode{constructor(){super(...arguments),this.type=ElementType.Text}get nodeType(){return 3}};class Comment extends DataNode{constructor(){super(...arguments),this.type=ElementType.Comment}get nodeType(){return 8}}class ProcessingInstruction extends DataNode{constructor(e,t){super(t),this.name=e,this.type=ElementType.Directive}get nodeType(){return 1}}class NodeWithChildren extends Node$1{constructor(e){super(),this.children=e}get firstChild(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(e){this.children=e}}class CDATA extends NodeWithChildren{constructor(){super(...arguments),this.type=ElementType.CDATA}get nodeType(){return 4}}class Document extends NodeWithChildren{constructor(){super(...arguments),this.type=ElementType.Root}get nodeType(){return 9}}let Element$3=class extends NodeWithChildren{constructor(e,t,r=[],n=("script"===e?ElementType.Script:"style"===e?ElementType.Style:ElementType.Tag)){super(r),this.name=e,this.attribs=t,this.type=n}get nodeType(){return 1}get tagName(){return this.name}set tagName(e){this.name=e}get attributes(){return Object.keys(this.attribs).map(e=>{var t,r;return{name:e,value:this.attribs[e],namespace:null===(t=this["x-attribsNamespace"])||void 0===t?void 0:t[e],prefix:null===(r=this["x-attribsPrefix"])||void 0===r?void 0:r[e]}})}};function isTag(e){return isTag$1(e)}function isCDATA(e){return e.type===ElementType.CDATA}function isText(e){return e.type===ElementType.Text}function isComment(e){return e.type===ElementType.Comment}function isDirective(e){return e.type===ElementType.Directive}function isDocument(e){return e.type===ElementType.Root}function hasChildren(e){return Object.prototype.hasOwnProperty.call(e,"children")}function cloneNode(e,t=!1){let r;if(isText(e))r=new Text$1(e.data);else if(isComment(e))r=new Comment(e.data);else if(isTag(e)){const n=t?cloneChildren(e.children):[],i=new Element$3(e.name,{...e.attribs},n);n.forEach(e=>e.parent=i),null!=e.namespace&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]={...e["x-attribsNamespace"]}),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]={...e["x-attribsPrefix"]}),r=i}else if(isCDATA(e)){const n=t?cloneChildren(e.children):[],i=new CDATA(n);n.forEach(e=>e.parent=i),r=i}else if(isDocument(e)){const n=t?cloneChildren(e.children):[],i=new Document(n);n.forEach(e=>e.parent=i),e["x-mode"]&&(i["x-mode"]=e["x-mode"]),r=i}else{if(!isDirective(e))throw new Error(`Not implemented yet: ${e.type}`);{const t=new ProcessingInstruction(e.name,e.data);null!=e["x-name"]&&(t["x-name"]=e["x-name"],t["x-publicId"]=e["x-publicId"],t["x-systemId"]=e["x-systemId"]),r=t}}return r.startIndex=e.startIndex,r.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(r.sourceCodeLocation=e.sourceCodeLocation),r}function cloneChildren(e){const t=e.map(e=>cloneNode(e,!0));for(let r=1;r<t.length;r++)t[r].prev=t[r-1],t[r-1].next=t[r];return t}const defaultOpts$2={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class DomHandler{constructor(e,t,r){this.dom=[],this.root=new Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(r=t,t=defaultOpts$2),"object"==typeof e&&(t=e,e=void 0),this.callback=null!=e?e:null,this.options=null!=t?t:defaultOpts$2,this.elementCB=null!=r?r:null}onparserinit(e){this.parser=e}onreset(){this.dom=[],this.root=new Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(e){this.handleCallback(e)}onclosetag(){this.lastNode=null;const e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)}onopentag(e,t){const r=this.options.xmlMode?ElementType.Tag:void 0,n=new Element$3(e,t,void 0,r);this.addNode(n),this.tagStack.push(n)}ontext(e){const{lastNode:t}=this;if(t&&t.type===ElementType.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{const t=new Text$1(e);this.addNode(t),this.lastNode=t}}oncomment(e){if(this.lastNode&&this.lastNode.type===ElementType.Comment)return void(this.lastNode.data+=e);const t=new Comment(e);this.addNode(t),this.lastNode=t}oncommentend(){this.lastNode=null}oncdatastart(){const e=new Text$1(""),t=new CDATA([e]);this.addNode(t),e.parent=t,this.lastNode=e}oncdataend(){this.lastNode=null}onprocessinginstruction(e,t){const r=new ProcessingInstruction(e,t);this.addNode(r)}handleCallback(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e}addNode(e){const t=this.tagStack[this.tagStack.length-1],r=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),r&&(e.prev=r,r.next=e),e.parent=t,this.lastNode=null}}const xmlReplacer=/["&'<>$\x80-\uFFFF]/g,xmlCodeMap=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),getCodePoint=null!=String.prototype.codePointAt?(e,t)=>e.codePointAt(t):(e,t)=>55296==(64512&e.charCodeAt(t))?1024*(e.charCodeAt(t)-55296)+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t);function encodeXML(e){let t,r="",n=0;for(;null!==(t=xmlReplacer.exec(e));){const i=t.index,o=e.charCodeAt(i),s=xmlCodeMap.get(o);void 0!==s?(r+=e.substring(n,i)+s,n=i+1):(r+=`${e.substring(n,i)}&#x${getCodePoint(e,i).toString(16)};`,n=xmlReplacer.lastIndex+=Number(55296==(64512&o)))}return r+e.substr(n)}function getEscaper$1(e,t){return function(r){let n,i=0,o="";for(;n=e.exec(r);)i!==n.index&&(o+=r.substring(i,n.index)),o+=t.get(n[0].charCodeAt(0)),i=n.index+1;return o+r.substring(i)}}const escapeAttribute$1=getEscaper$1(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),escapeText$1=getEscaper$1(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),unencodedElements=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function replaceQuotes(e){return e.replace(/"/g,"&quot;")}function formatAttributes(e,t){var r;if(!e)return;const n=!1===(null!==(r=t.encodeEntities)&&void 0!==r?r:t.decodeEntities)?replaceQuotes:t.xmlMode||"utf8"!==t.encodeEntities?encodeXML:escapeAttribute$1;return Object.keys(e).map(r=>{var i,o;const s=null!==(i=e[r])&&void 0!==i?i:"";return"foreign"===t.xmlMode&&(r=null!==(o=attributeNames.get(r))&&void 0!==o?o:r),t.emptyAttrs||t.xmlMode||""!==s?`${r}="${n(s)}"`:r}).join(" ")}const singleTag=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function render$4(e,t={}){const r="length"in e?e:[e];let n="";for(let i=0;i<r.length;i++)n+=renderNode(r[i],t);return n}function renderNode(e,t){switch(e.type){case Root$2:return render$4(e.children,t);case Doctype:case Directive:return renderDirective(e);case Comment$1:return renderComment(e);case CDATA$1:return renderCdata(e);case Script:case Style:case Tag$1:return renderTag(e,t);case Text$2:return renderText(e,t)}}const foreignModeIntegrationPoints=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),foreignElements=new Set(["svg","math"]);function renderTag(e,t){var r;"foreign"===t.xmlMode&&(e.name=null!==(r=elementNames.get(e.name))&&void 0!==r?r:e.name,e.parent&&foreignModeIntegrationPoints.has(e.parent.name)&&(t={...t,xmlMode:!1})),!t.xmlMode&&foreignElements.has(e.name)&&(t={...t,xmlMode:"foreign"});let n=`<${e.name}`;const i=formatAttributes(e.attribs,t);return i&&(n+=` ${i}`),0===e.children.length&&(t.xmlMode?!1!==t.selfClosingTags:t.selfClosingTags&&singleTag.has(e.name))?(t.xmlMode||(n+=" "),n+="/>"):(n+=">",e.children.length>0&&(n+=render$4(e.children,t)),!t.xmlMode&&singleTag.has(e.name)||(n+=`</${e.name}>`)),n}function renderDirective(e){return`<${e.data}>`}function renderText(e,t){var r;let n=e.data||"";return!1===(null!==(r=t.encodeEntities)&&void 0!==r?r:t.decodeEntities)||!t.xmlMode&&e.parent&&unencodedElements.has(e.parent.name)||(n=t.xmlMode||"utf8"!==t.encodeEntities?encodeXML(n):escapeText$1(n)),n}function renderCdata(e){return`<![CDATA[${e.children[0].data}]]>`}function renderComment(e){return`\x3c!--${e.data}--\x3e`}function getOuterHTML(e,t){return render$4(e,t)}function getInnerHTML(e,t){return hasChildren(e)?e.children.map(e=>getOuterHTML(e,t)).join(""):""}function getText(e){return Array.isArray(e)?e.map(getText).join(""):isTag(e)?"br"===e.name?"\n":getText(e.children):isCDATA(e)?getText(e.children):isText(e)?e.data:""}function textContent(e){return Array.isArray(e)?e.map(textContent).join(""):hasChildren(e)&&!isComment(e)?textContent(e.children):isText(e)?e.data:""}function innerText(e){return Array.isArray(e)?e.map(innerText).join(""):hasChildren(e)&&(e.type===ElementType.Tag||isCDATA(e))?innerText(e.children):isText(e)?e.data:""}function getChildren$1(e){return hasChildren(e)?e.children:[]}function getParent(e){return e.parent||null}function getSiblings(e){const t=getParent(e);if(null!=t)return getChildren$1(t);const r=[e];let{prev:n,next:i}=e;for(;null!=n;)r.unshift(n),({prev:n}=n);for(;null!=i;)r.push(i),({next:i}=i);return r}function getAttributeValue(e,t){var r;return null===(r=e.attribs)||void 0===r?void 0:r[t]}function hasAttrib(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]}function getName(e){return e.name}function nextElementSibling(e){let{next:t}=e;for(;null!==t&&!isTag(t);)({next:t}=t);return t}function prevElementSibling(e){let{prev:t}=e;for(;null!==t&&!isTag(t);)({prev:t}=t);return t}function removeElement(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){const t=e.parent.children,r=t.lastIndexOf(e);r>=0&&t.splice(r,1)}e.next=null,e.prev=null,e.parent=null}function replaceElement(e,t){const r=t.prev=e.prev;r&&(r.next=t);const n=t.next=e.next;n&&(n.prev=t);const i=t.parent=e.parent;if(i){const r=i.children;r[r.lastIndexOf(e)]=t,e.parent=null}}function appendChild(e,t){if(removeElement(t),t.next=null,t.parent=e,e.children.push(t)>1){const r=e.children[e.children.length-2];r.next=t,t.prev=r}else t.prev=null}function append$1(e,t){removeElement(t);const{parent:r}=e,n=e.next;if(t.next=n,t.prev=e,e.next=t,t.parent=r,n){if(n.prev=t,r){const e=r.children;e.splice(e.lastIndexOf(n),0,t)}}else r&&r.children.push(t)}function prependChild(e,t){if(removeElement(t),t.parent=e,t.prev=null,1!==e.children.unshift(t)){const r=e.children[1];r.prev=t,t.next=r}else t.next=null}function prepend$1(e,t){removeElement(t);const{parent:r}=e;if(r){const n=r.children;n.splice(n.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=r,t.prev=e.prev,t.next=e,e.prev=t}function filter$2(e,t,r=!0,n=1/0){return find$3(e,Array.isArray(t)?t:[t],r,n)}function find$3(e,t,r,n){const i=[],o=[Array.isArray(t)?t:[t]],s=[0];for(;;){if(s[0]>=o[0].length){if(1===s.length)return i;o.shift(),s.shift();continue}const t=o[0][s[0]++];if(e(t)&&(i.push(t),--n<=0))return i;r&&hasChildren(t)&&t.children.length>0&&(s.unshift(0),o.unshift(t.children))}}function findOneChild(e,t){return t.find(e)}function findOne(e,t,r=!0){const n=Array.isArray(t)?t:[t];for(let i=0;i<n.length;i++){const t=n[i];if(isTag(t)&&e(t))return t;if(r&&hasChildren(t)&&t.children.length>0){const r=findOne(e,t.children,!0);if(r)return r}}return null}function existsOne(e,t){return(Array.isArray(t)?t:[t]).some(t=>isTag(t)&&e(t)||hasChildren(t)&&existsOne(e,t.children))}function findAll(e,t){const r=[],n=[Array.isArray(t)?t:[t]],i=[0];for(;;){if(i[0]>=n[0].length){if(1===n.length)return r;n.shift(),i.shift();continue}const t=n[0][i[0]++];isTag(t)&&e(t)&&r.push(t),hasChildren(t)&&t.children.length>0&&(i.unshift(0),n.unshift(t.children))}}const Checks={tag_name:e=>"function"==typeof e?t=>isTag(t)&&e(t.name):"*"===e?isTag:t=>isTag(t)&&t.name===e,tag_type:e=>"function"==typeof e?t=>e(t.type):t=>t.type===e,tag_contains:e=>"function"==typeof e?t=>isText(t)&&e(t.data):t=>isText(t)&&t.data===e};function getAttribCheck(e,t){return"function"==typeof t?r=>isTag(r)&&t(r.attribs[e]):r=>isTag(r)&&r.attribs[e]===t}function combineFuncs(e,t){return r=>e(r)||t(r)}function compileTest(e){const t=Object.keys(e).map(t=>{const r=e[t];return Object.prototype.hasOwnProperty.call(Checks,t)?Checks[t](r):getAttribCheck(t,r)});return 0===t.length?null:t.reduce(combineFuncs)}function testElement(e,t){const r=compileTest(e);return!r||r(t)}function getElements(e,t,r,n=1/0){const i=compileTest(e);return i?filter$2(i,t,r,n):[]}function getElementById(e,t,r=!0){return Array.isArray(t)||(t=[t]),findOne(getAttribCheck("id",e),t,r)}function getElementsByTagName(e,t,r=!0,n=1/0){return filter$2(Checks.tag_name(e),t,r,n)}function getElementsByClassName(e,t,r=!0,n=1/0){return filter$2(getAttribCheck("class",e),t,r,n)}function getElementsByTagType(e,t,r=!0,n=1/0){return filter$2(Checks.tag_type(e),t,r,n)}function removeSubsets(e){let t=e.length;for(;--t>=0;){const r=e[t];if(t>0&&e.lastIndexOf(r,t-1)>=0)e.splice(t,1);else for(let n=r.parent;n;n=n.parent)if(e.includes(n)){e.splice(t,1);break}}return e}var DocumentPosition,DocumentPosition2;function compareDocumentPosition(e,t){const r=[],n=[];if(e===t)return 0;let i=hasChildren(e)?e:e.parent;for(;i;)r.unshift(i),i=i.parent;for(i=hasChildren(t)?t:t.parent;i;)n.unshift(i),i=i.parent;const o=Math.min(r.length,n.length);let s=0;for(;s<o&&r[s]===n[s];)s++;if(0===s)return DocumentPosition.DISCONNECTED;const a=r[s-1],l=a.children,c=r[s],u=n[s];return l.indexOf(c)>l.indexOf(u)?a===t?DocumentPosition.FOLLOWING|DocumentPosition.CONTAINED_BY:DocumentPosition.FOLLOWING:a===e?DocumentPosition.PRECEDING|DocumentPosition.CONTAINS:DocumentPosition.PRECEDING}function uniqueSort(e){return(e=e.filter((e,t,r)=>!r.includes(e,t+1))).sort((e,t)=>{const r=compareDocumentPosition(e,t);return r&DocumentPosition.PRECEDING?-1:r&DocumentPosition.FOLLOWING?1:0}),e}function getFeed(e){const t=getOneElement(isValidFeed,e);return t?"feed"===t.name?getAtomFeed(t):getRssFeed(t):null}function getAtomFeed(e){var t;const r=e.children,n={type:"atom",items:getElementsByTagName("entry",r).map(e=>{var t;const{children:r}=e,n={media:getMediaElements(r)};addConditionally(n,"id","id",r),addConditionally(n,"title","title",r);const i=null===(t=getOneElement("link",r))||void 0===t?void 0:t.attribs.href;i&&(n.link=i);const o=fetch("summary",r)||fetch("content",r);o&&(n.description=o);const s=fetch("updated",r);return s&&(n.pubDate=new Date(s)),n})};addConditionally(n,"id","id",r),addConditionally(n,"title","title",r);const i=null===(t=getOneElement("link",r))||void 0===t?void 0:t.attribs.href;i&&(n.link=i),addConditionally(n,"description","subtitle",r);const o=fetch("updated",r);return o&&(n.updated=new Date(o)),addConditionally(n,"author","email",r,!0),n}function getRssFeed(e){var t,r;const n=null!==(r=null===(t=getOneElement("channel",e.children))||void 0===t?void 0:t.children)&&void 0!==r?r:[],i={type:e.name.substr(0,3),id:"",items:getElementsByTagName("item",e.children).map(e=>{const{children:t}=e,r={media:getMediaElements(t)};addConditionally(r,"id","guid",t),addConditionally(r,"title","title",t),addConditionally(r,"link","link",t),addConditionally(r,"description","description",t);const n=fetch("pubDate",t)||fetch("dc:date",t);return n&&(r.pubDate=new Date(n)),r})};addConditionally(i,"title","title",n),addConditionally(i,"link","link",n),addConditionally(i,"description","description",n);const o=fetch("lastBuildDate",n);return o&&(i.updated=new Date(o)),addConditionally(i,"author","managingEditor",n,!0),i}DocumentPosition2=DocumentPosition||(DocumentPosition={}),DocumentPosition2[DocumentPosition2.DISCONNECTED=1]="DISCONNECTED",DocumentPosition2[DocumentPosition2.PRECEDING=2]="PRECEDING",DocumentPosition2[DocumentPosition2.FOLLOWING=4]="FOLLOWING",DocumentPosition2[DocumentPosition2.CONTAINS=8]="CONTAINS",DocumentPosition2[DocumentPosition2.CONTAINED_BY=16]="CONTAINED_BY";const MEDIA_KEYS_STRING=["url","type","lang"],MEDIA_KEYS_INT=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function getMediaElements(e){return getElementsByTagName("media:content",e).map(e=>{const{attribs:t}=e,r={medium:t.medium,isDefault:!!t.isDefault};for(const n of MEDIA_KEYS_STRING)t[n]&&(r[n]=t[n]);for(const n of MEDIA_KEYS_INT)t[n]&&(r[n]=parseInt(t[n],10));return t.expression&&(r.expression=t.expression),r})}function getOneElement(e,t){return getElementsByTagName(e,t,!0,1)[0]}function fetch(e,t,r=!1){return textContent(getElementsByTagName(e,t,r,1)).trim()}function addConditionally(e,t,r,n,i=!1){const o=fetch(r,n,i);o&&(e[t]=o)}function isValidFeed(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}const DomUtils=Object.freeze(Object.defineProperty({__proto__:null,get DocumentPosition(){return DocumentPosition},append:append$1,appendChild:appendChild,compareDocumentPosition:compareDocumentPosition,existsOne:existsOne,filter:filter$2,find:find$3,findAll:findAll,findOne:findOne,findOneChild:findOneChild,getAttributeValue:getAttributeValue,getChildren:getChildren$1,getElementById:getElementById,getElements:getElements,getElementsByClassName:getElementsByClassName,getElementsByTagName:getElementsByTagName,getElementsByTagType:getElementsByTagType,getFeed:getFeed,getInnerHTML:getInnerHTML,getName:getName,getOuterHTML:getOuterHTML,getParent:getParent,getSiblings:getSiblings,getText:getText,hasAttrib:hasAttrib,hasChildren:hasChildren,innerText:innerText,isCDATA:isCDATA,isComment:isComment,isDocument:isDocument,isTag:isTag,isText:isText,nextElementSibling:nextElementSibling,prepend:prepend$1,prependChild:prependChild,prevElementSibling:prevElementSibling,removeElement:removeElement,removeSubsets:removeSubsets,replaceElement:replaceElement,testElement:testElement,textContent:textContent,uniqueSort:uniqueSort},Symbol.toStringTag,{value:"Module"})),defaultOpts$1={_useHtmlParser2:!1};function flattenOptions(e,t){if(!e)return null!=t?t:defaultOpts$1;const r={_useHtmlParser2:!!e.xmlMode,...t,...e};return e.xml?(r._useHtmlParser2=!0,r.xmlMode=!0,!0!==e.xml&&Object.assign(r,e.xml)):e.xmlMode&&(r._useHtmlParser2=!0),r}function render$3(e,t,r){return e?e(null!=t?t:e._root.children,null,void 0,r).toString():""}function isOptions(e,t){return"object"==typeof e&&null!=e&&!("length"in e)&&!("type"in e)}function html$4(e,t){return render$3(this,isOptions(e)?void(t=e):e,{...null==this?void 0:this._options,...flattenOptions(t)})}function xml(e){return render$3(this,e,{...this._options,xmlMode:!0})}function text$5(e){const t=null!=e?e:this?this.root():[];let r="";for(let n=0;n<t.length;n++)r+=textContent(t[n]);return r}function parseHTML(e,t,r="boolean"==typeof t&&t){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t);const n=this.load(e,this._options,!1);return r||n("script").remove(),[...n.root()[0].children]}function root(){return this(this._root)}function contains$1(e,t){if(t===e)return!1;let r=t;for(;r&&r!==r.parent;)if(r=r.parent,r===e)return!0;return!1}function extract$1(e){return this.root().extract(e)}function merge(e,t){if(!isArrayLike(e)||!isArrayLike(t))return;let r=e.length;const n=+t.length;for(let i=0;i<n;i++)e[r++]=t[i];return e.length=r,e}function isArrayLike(e){if(Array.isArray(e))return!0;if("object"!=typeof e||null===e||!("length"in e)||"number"!=typeof e.length||e.length<0)return!1;for(let t=0;t<e.length;t++)if(!(t in e))return!1;return!0}const staticMethods=Object.freeze(Object.defineProperty({__proto__:null,contains:contains$1,extract:extract$1,html:html$4,merge:merge,parseHTML:parseHTML,root:root,text:text$5,xml:xml},Symbol.toStringTag,{value:"Module"}));function isCheerio(e){return null!=e.cheerio}function camelCase(e){return e.replace(/[._-](\w|$)/g,(e,t)=>t.toUpperCase())}function cssCase(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()}function domEach(e,t){const r=e.length;for(let n=0;n<r;n++)t(e[n],n);return e}var CharacterCode,CharacterCode2;function isHtml(e){const t=e.indexOf("<");if(-1===t||t>e.length-3)return!1;const r=e.charCodeAt(t+1);return(r>=CharacterCode.LowerA&&r<=CharacterCode.LowerZ||r>=CharacterCode.UpperA&&r<=CharacterCode.UpperZ||r===CharacterCode.Exclamation)&&e.includes(">",t+2)}CharacterCode2=CharacterCode||(CharacterCode={}),CharacterCode2[CharacterCode2.LowerA=97]="LowerA",CharacterCode2[CharacterCode2.LowerZ=122]="LowerZ",CharacterCode2[CharacterCode2.UpperA=65]="UpperA",CharacterCode2[CharacterCode2.UpperZ=90]="UpperZ",CharacterCode2[CharacterCode2.Exclamation=33]="Exclamation";const htmlDecodeTree$1=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),xmlDecodeTree=new Uint16Array("aglq\t\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var _a$2;const decodeMap$1=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),fromCodePoint$1=null!==(_a$2=String.fromCodePoint)&&void 0!==_a$2?_a$2:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e),t};function replaceCodePoint$1(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=decodeMap$1.get(e))&&void 0!==t?t:e}var CharCodes$2;!function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"}(CharCodes$2||(CharCodes$2={}));const TO_LOWER_BIT$1=32;var BinTrieFlags$1,EntityDecoderState$1,DecodingMode$1;function isNumber$3(e){return e>=CharCodes$2.ZERO&&e<=CharCodes$2.NINE}function isHexadecimalCharacter$1(e){return e>=CharCodes$2.UPPER_A&&e<=CharCodes$2.UPPER_F||e>=CharCodes$2.LOWER_A&&e<=CharCodes$2.LOWER_F}function isAsciiAlphaNumeric$2(e){return e>=CharCodes$2.UPPER_A&&e<=CharCodes$2.UPPER_Z||e>=CharCodes$2.LOWER_A&&e<=CharCodes$2.LOWER_Z||isNumber$3(e)}function isEntityInAttributeInvalidEnd$1(e){return e===CharCodes$2.EQUALS||isAsciiAlphaNumeric$2(e)}!function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(BinTrieFlags$1||(BinTrieFlags$1={})),function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(EntityDecoderState$1||(EntityDecoderState$1={})),function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"}(DecodingMode$1||(DecodingMode$1={}));let EntityDecoder$1=class{constructor(e,t,r){this.decodeTree=e,this.emitCodePoint=t,this.errors=r,this.state=EntityDecoderState$1.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=DecodingMode$1.Strict}startEntity(e){this.decodeMode=e,this.state=EntityDecoderState$1.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case EntityDecoderState$1.EntityStart:return e.charCodeAt(t)===CharCodes$2.NUM?(this.state=EntityDecoderState$1.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=EntityDecoderState$1.NamedEntity,this.stateNamedEntity(e,t));case EntityDecoderState$1.NumericStart:return this.stateNumericStart(e,t);case EntityDecoderState$1.NumericDecimal:return this.stateNumericDecimal(e,t);case EntityDecoderState$1.NumericHex:return this.stateNumericHex(e,t);case EntityDecoderState$1.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(e.charCodeAt(t)|TO_LOWER_BIT$1)===CharCodes$2.LOWER_X?(this.state=EntityDecoderState$1.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=EntityDecoderState$1.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,r,n){if(t!==r){const i=r-t;this.result=this.result*Math.pow(n,i)+Number.parseInt(e.substr(t,i),n),this.consumed+=i}}stateNumericHex(e,t){const r=t;for(;t<e.length;){const n=e.charCodeAt(t);if(!isNumber$3(n)&&!isHexadecimalCharacter$1(n))return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(n,3);t+=1}return this.addToNumericResult(e,r,t,16),-1}stateNumericDecimal(e,t){const r=t;for(;t<e.length;){const n=e.charCodeAt(t);if(!isNumber$3(n))return this.addToNumericResult(e,r,t,10),this.emitNumericEntity(n,2);t+=1}return this.addToNumericResult(e,r,t,10),-1}emitNumericEntity(e,t){var r;if(this.consumed<=t)return null===(r=this.errors)||void 0===r||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===CharCodes$2.SEMI)this.consumed+=1;else if(this.decodeMode===DecodingMode$1.Strict)return 0;return this.emitCodePoint(replaceCodePoint$1(this.result),this.consumed),this.errors&&(e!==CharCodes$2.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:r}=this;let n=r[this.treeIndex],i=(n&BinTrieFlags$1.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const o=e.charCodeAt(t);if(this.treeIndex=determineBranch$1(r,n,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return 0===this.result||this.decodeMode===DecodingMode$1.Attribute&&(0===i||isEntityInAttributeInvalidEnd$1(o))?0:this.emitNotTerminatedNamedEntity();if(n=r[this.treeIndex],i=(n&BinTrieFlags$1.VALUE_LENGTH)>>14,0!==i){if(o===CharCodes$2.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==DecodingMode$1.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:r}=this,n=(r[t]&BinTrieFlags$1.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,n,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,r){const{decodeTree:n}=this;return this.emitCodePoint(1===t?n[e]&~BinTrieFlags$1.VALUE_LENGTH:n[e+1],r),3===t&&this.emitCodePoint(n[e+2],r),r}end(){var e;switch(this.state){case EntityDecoderState$1.NamedEntity:return 0===this.result||this.decodeMode===DecodingMode$1.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case EntityDecoderState$1.NumericDecimal:return this.emitNumericEntity(0,2);case EntityDecoderState$1.NumericHex:return this.emitNumericEntity(0,3);case EntityDecoderState$1.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case EntityDecoderState$1.EntityStart:return 0}}};function determineBranch$1(e,t,r,n){const i=(t&BinTrieFlags$1.BRANCH_LENGTH)>>7,o=t&BinTrieFlags$1.JUMP_TABLE;if(0===i)return 0!==o&&n===o?r:-1;if(o){const t=n-o;return t<0||t>=i?-1:e[r+t]-1}let s=r,a=s+i-1;for(;s<=a;){const t=s+a>>>1,r=e[t];if(r<n)s=t+1;else{if(!(r>n))return e[t+i];a=t-1}}return-1}var CharCodes$1,State$1,State2,QuoteType,QuoteType2;function isWhitespace$2(e){return e===CharCodes$1.Space||e===CharCodes$1.NewLine||e===CharCodes$1.Tab||e===CharCodes$1.FormFeed||e===CharCodes$1.CarriageReturn}function isEndOfTagSection(e){return e===CharCodes$1.Slash||e===CharCodes$1.Gt||isWhitespace$2(e)}function isASCIIAlpha(e){return e>=CharCodes$1.LowerA&&e<=CharCodes$1.LowerZ||e>=CharCodes$1.UpperA&&e<=CharCodes$1.UpperZ}!function(e){e[e.Tab=9]="Tab",e[e.NewLine=10]="NewLine",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.Number=35]="Number",e[e.Amp=38]="Amp",e[e.SingleQuote=39]="SingleQuote",e[e.DoubleQuote=34]="DoubleQuote",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Zero=48]="Zero",e[e.Nine=57]="Nine",e[e.Semi=59]="Semi",e[e.Lt=60]="Lt",e[e.Eq=61]="Eq",e[e.Gt=62]="Gt",e[e.Questionmark=63]="Questionmark",e[e.UpperA=65]="UpperA",e[e.LowerA=97]="LowerA",e[e.UpperF=70]="UpperF",e[e.LowerF=102]="LowerF",e[e.UpperZ=90]="UpperZ",e[e.LowerZ=122]="LowerZ",e[e.LowerX=120]="LowerX",e[e.OpeningSquareBracket=91]="OpeningSquareBracket"}(CharCodes$1||(CharCodes$1={})),State2=State$1||(State$1={}),State2[State2.Text=1]="Text",State2[State2.BeforeTagName=2]="BeforeTagName",State2[State2.InTagName=3]="InTagName",State2[State2.InSelfClosingTag=4]="InSelfClosingTag",State2[State2.BeforeClosingTagName=5]="BeforeClosingTagName",State2[State2.InClosingTagName=6]="InClosingTagName",State2[State2.AfterClosingTagName=7]="AfterClosingTagName",State2[State2.BeforeAttributeName=8]="BeforeAttributeName",State2[State2.InAttributeName=9]="InAttributeName",State2[State2.AfterAttributeName=10]="AfterAttributeName",State2[State2.BeforeAttributeValue=11]="BeforeAttributeValue",State2[State2.InAttributeValueDq=12]="InAttributeValueDq",State2[State2.InAttributeValueSq=13]="InAttributeValueSq",State2[State2.InAttributeValueNq=14]="InAttributeValueNq",State2[State2.BeforeDeclaration=15]="BeforeDeclaration",State2[State2.InDeclaration=16]="InDeclaration",State2[State2.InProcessingInstruction=17]="InProcessingInstruction",State2[State2.BeforeComment=18]="BeforeComment",State2[State2.CDATASequence=19]="CDATASequence",State2[State2.InSpecialComment=20]="InSpecialComment",State2[State2.InCommentLike=21]="InCommentLike",State2[State2.BeforeSpecialS=22]="BeforeSpecialS",State2[State2.BeforeSpecialT=23]="BeforeSpecialT",State2[State2.SpecialStartSequence=24]="SpecialStartSequence",State2[State2.InSpecialTag=25]="InSpecialTag",State2[State2.InEntity=26]="InEntity",QuoteType2=QuoteType||(QuoteType={}),QuoteType2[QuoteType2.NoValue=0]="NoValue",QuoteType2[QuoteType2.Unquoted=1]="Unquoted",QuoteType2[QuoteType2.Single=2]="Single",QuoteType2[QuoteType2.Double=3]="Double";const Sequences={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97]),XmpEnd:new Uint8Array([60,47,120,109,112])};let Tokenizer$1=class{constructor({xmlMode:e=!1,decodeEntities:t=!0},r){this.cbs=r,this.state=State$1.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=State$1.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=e,this.decodeEntities=t,this.entityDecoder=new EntityDecoder$1(e?xmlDecodeTree:htmlDecodeTree$1,(e,t)=>this.emitCodePoint(e,t))}reset(){this.state=State$1.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=State$1.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}stateText(e){e===CharCodes$1.Lt||!this.decodeEntities&&this.fastForwardTo(CharCodes$1.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=State$1.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===CharCodes$1.Amp&&this.startEntity()}stateSpecialStartSequence(e){const t=this.sequenceIndex===this.currentSequence.length;if(t?isEndOfTagSection(e):(32|e)===this.currentSequence[this.sequenceIndex]){if(!t)return void this.sequenceIndex++}else this.isSpecial=!1;this.sequenceIndex=0,this.state=State$1.InTagName,this.stateInTagName(e)}stateInSpecialTag(e){if(this.sequenceIndex===this.currentSequence.length){if(e===CharCodes$1.Gt||isWhitespace$2(e)){const t=this.index-this.currentSequence.length;if(this.sectionStart<t){const e=this.index;this.index=t,this.cbs.ontext(this.sectionStart,t),this.index=e}return this.isSpecial=!1,this.sectionStart=t+2,void this.stateInClosingTagName(e)}this.sequenceIndex=0}(32|e)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:0===this.sequenceIndex?this.currentSequence===Sequences.TitleEnd?this.decodeEntities&&e===CharCodes$1.Amp&&this.startEntity():this.fastForwardTo(CharCodes$1.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=Number(e===CharCodes$1.Lt)}stateCDATASequence(e){e===Sequences.Cdata[this.sequenceIndex]?++this.sequenceIndex===Sequences.Cdata.length&&(this.state=State$1.InCommentLike,this.currentSequence=Sequences.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=State$1.InDeclaration,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Sequences.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=State$1.Text):0===this.sequenceIndex?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(e){return this.xmlMode?!isEndOfTagSection(e):isASCIIAlpha(e)}startSpecial(e,t){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=t,this.state=State$1.SpecialStartSequence}stateBeforeTagName(e){if(e===CharCodes$1.ExclamationMark)this.state=State$1.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===CharCodes$1.Questionmark)this.state=State$1.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){const t=32|e;this.sectionStart=this.index,this.xmlMode?this.state=State$1.InTagName:t===Sequences.ScriptEnd[2]?this.state=State$1.BeforeSpecialS:t===Sequences.TitleEnd[2]||t===Sequences.XmpEnd[2]?this.state=State$1.BeforeSpecialT:this.state=State$1.InTagName}else e===CharCodes$1.Slash?this.state=State$1.BeforeClosingTagName:(this.state=State$1.Text,this.stateText(e))}stateInTagName(e){isEndOfTagSection(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=State$1.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateBeforeClosingTagName(e){isWhitespace$2(e)||(e===CharCodes$1.Gt?this.state=State$1.Text:(this.state=this.isTagStartChar(e)?State$1.InClosingTagName:State$1.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(e){(e===CharCodes$1.Gt||isWhitespace$2(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=State$1.AfterClosingTagName,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){(e===CharCodes$1.Gt||this.fastForwardTo(CharCodes$1.Gt))&&(this.state=State$1.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(e){e===CharCodes$1.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=State$1.InSpecialTag,this.sequenceIndex=0):this.state=State$1.Text,this.sectionStart=this.index+1):e===CharCodes$1.Slash?this.state=State$1.InSelfClosingTag:isWhitespace$2(e)||(this.state=State$1.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===CharCodes$1.Gt?(this.cbs.onselfclosingtag(this.index),this.state=State$1.Text,this.sectionStart=this.index+1,this.isSpecial=!1):isWhitespace$2(e)||(this.state=State$1.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateInAttributeName(e){(e===CharCodes$1.Eq||isEndOfTagSection(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=State$1.AfterAttributeName,this.stateAfterAttributeName(e))}stateAfterAttributeName(e){e===CharCodes$1.Eq?this.state=State$1.BeforeAttributeValue:e===CharCodes$1.Slash||e===CharCodes$1.Gt?(this.cbs.onattribend(QuoteType.NoValue,this.sectionStart),this.sectionStart=-1,this.state=State$1.BeforeAttributeName,this.stateBeforeAttributeName(e)):isWhitespace$2(e)||(this.cbs.onattribend(QuoteType.NoValue,this.sectionStart),this.state=State$1.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(e){e===CharCodes$1.DoubleQuote?(this.state=State$1.InAttributeValueDq,this.sectionStart=this.index+1):e===CharCodes$1.SingleQuote?(this.state=State$1.InAttributeValueSq,this.sectionStart=this.index+1):isWhitespace$2(e)||(this.sectionStart=this.index,this.state=State$1.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))}handleInAttributeValue(e,t){e===t||!this.decodeEntities&&this.fastForwardTo(t)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(t===CharCodes$1.DoubleQuote?QuoteType.Double:QuoteType.Single,this.index+1),this.state=State$1.BeforeAttributeName):this.decodeEntities&&e===CharCodes$1.Amp&&this.startEntity()}stateInAttributeValueDoubleQuotes(e){this.handleInAttributeValue(e,CharCodes$1.DoubleQuote)}stateInAttributeValueSingleQuotes(e){this.handleInAttributeValue(e,CharCodes$1.SingleQuote)}stateInAttributeValueNoQuotes(e){isWhitespace$2(e)||e===CharCodes$1.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(QuoteType.Unquoted,this.index),this.state=State$1.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===CharCodes$1.Amp&&this.startEntity()}stateBeforeDeclaration(e){e===CharCodes$1.OpeningSquareBracket?(this.state=State$1.CDATASequence,this.sequenceIndex=0):this.state=e===CharCodes$1.Dash?State$1.BeforeComment:State$1.InDeclaration}stateInDeclaration(e){(e===CharCodes$1.Gt||this.fastForwardTo(CharCodes$1.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=State$1.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===CharCodes$1.Gt||this.fastForwardTo(CharCodes$1.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=State$1.Text,this.sectionStart=this.index+1)}stateBeforeComment(e){e===CharCodes$1.Dash?(this.state=State$1.InCommentLike,this.currentSequence=Sequences.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=State$1.InDeclaration}stateInSpecialComment(e){(e===CharCodes$1.Gt||this.fastForwardTo(CharCodes$1.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=State$1.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){const t=32|e;t===Sequences.ScriptEnd[3]?this.startSpecial(Sequences.ScriptEnd,4):t===Sequences.StyleEnd[3]?this.startSpecial(Sequences.StyleEnd,4):(this.state=State$1.InTagName,this.stateInTagName(e))}stateBeforeSpecialT(e){switch(32|e){case Sequences.TitleEnd[3]:this.startSpecial(Sequences.TitleEnd,4);break;case Sequences.TextareaEnd[3]:this.startSpecial(Sequences.TextareaEnd,4);break;case Sequences.XmpEnd[3]:this.startSpecial(Sequences.XmpEnd,4);break;default:this.state=State$1.InTagName,this.stateInTagName(e)}}startEntity(){this.baseState=this.state,this.state=State$1.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?DecodingMode$1.Strict:this.baseState===State$1.Text||this.baseState===State$1.InSpecialTag?DecodingMode$1.Legacy:DecodingMode$1.Attribute)}stateInEntity(){const e=this.entityDecoder.write(this.buffer,this.index-this.offset);e>=0?(this.state=this.baseState,0===e&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===State$1.Text||this.state===State$1.InSpecialTag&&0===this.sequenceIndex?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):this.state!==State$1.InAttributeValueDq&&this.state!==State$1.InAttributeValueSq&&this.state!==State$1.InAttributeValueNq||(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case State$1.Text:this.stateText(e);break;case State$1.SpecialStartSequence:this.stateSpecialStartSequence(e);break;case State$1.InSpecialTag:this.stateInSpecialTag(e);break;case State$1.CDATASequence:this.stateCDATASequence(e);break;case State$1.InAttributeValueDq:this.stateInAttributeValueDoubleQuotes(e);break;case State$1.InAttributeName:this.stateInAttributeName(e);break;case State$1.InCommentLike:this.stateInCommentLike(e);break;case State$1.InSpecialComment:this.stateInSpecialComment(e);break;case State$1.BeforeAttributeName:this.stateBeforeAttributeName(e);break;case State$1.InTagName:this.stateInTagName(e);break;case State$1.InClosingTagName:this.stateInClosingTagName(e);break;case State$1.BeforeTagName:this.stateBeforeTagName(e);break;case State$1.AfterAttributeName:this.stateAfterAttributeName(e);break;case State$1.InAttributeValueSq:this.stateInAttributeValueSingleQuotes(e);break;case State$1.BeforeAttributeValue:this.stateBeforeAttributeValue(e);break;case State$1.BeforeClosingTagName:this.stateBeforeClosingTagName(e);break;case State$1.AfterClosingTagName:this.stateAfterClosingTagName(e);break;case State$1.BeforeSpecialS:this.stateBeforeSpecialS(e);break;case State$1.BeforeSpecialT:this.stateBeforeSpecialT(e);break;case State$1.InAttributeValueNq:this.stateInAttributeValueNoQuotes(e);break;case State$1.InSelfClosingTag:this.stateInSelfClosingTag(e);break;case State$1.InDeclaration:this.stateInDeclaration(e);break;case State$1.BeforeDeclaration:this.stateBeforeDeclaration(e);break;case State$1.BeforeComment:this.stateBeforeComment(e);break;case State$1.InProcessingInstruction:this.stateInProcessingInstruction(e);break;case State$1.InEntity:this.stateInEntity()}this.index++}this.cleanup()}finish(){this.state===State$1.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length+this.offset;this.sectionStart>=e||(this.state===State$1.InCommentLike?this.currentSequence===Sequences.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===State$1.InTagName||this.state===State$1.BeforeAttributeName||this.state===State$1.BeforeAttributeValue||this.state===State$1.AfterAttributeName||this.state===State$1.InAttributeName||this.state===State$1.InAttributeValueSq||this.state===State$1.InAttributeValueDq||this.state===State$1.InAttributeValueNq||this.state===State$1.InClosingTagName||this.cbs.ontext(this.sectionStart,e))}emitCodePoint(e,t){this.baseState!==State$1.Text&&this.baseState!==State$1.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+t,this.index=this.sectionStart-1,this.cbs.onattribentity(e)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+t,this.index=this.sectionStart-1,this.cbs.ontextentity(e,this.sectionStart))}};const formTags=new Set(["input","option","optgroup","select","button","datalist","textarea"]),pTag=new Set(["p"]),tableSectionTags=new Set(["thead","tbody"]),ddtTags=new Set(["dd","dt"]),rtpTags=new Set(["rt","rp"]),openImpliesClose=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",pTag],["h1",pTag],["h2",pTag],["h3",pTag],["h4",pTag],["h5",pTag],["h6",pTag],["select",formTags],["input",formTags],["output",formTags],["button",formTags],["datalist",formTags],["textarea",formTags],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",ddtTags],["dt",ddtTags],["address",pTag],["article",pTag],["aside",pTag],["blockquote",pTag],["details",pTag],["div",pTag],["dl",pTag],["fieldset",pTag],["figcaption",pTag],["figure",pTag],["footer",pTag],["form",pTag],["header",pTag],["hr",pTag],["main",pTag],["nav",pTag],["ol",pTag],["pre",pTag],["section",pTag],["table",pTag],["ul",pTag],["rt",rtpTags],["rp",rtpTags],["tbody",tableSectionTags],["tfoot",tableSectionTags]]),voidElements=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),foreignContextElements=new Set(["math","svg"]),htmlIntegrationElements=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),reNameEnd=/\s|\//;let Parser$2=class{constructor(e,t={}){var r,n,i,o,s,a;this.options=t,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=null!=e?e:{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=null!==(r=t.lowerCaseTags)&&void 0!==r?r:this.htmlMode,this.lowerCaseAttributeNames=null!==(n=t.lowerCaseAttributeNames)&&void 0!==n?n:this.htmlMode,this.recognizeSelfClosing=null!==(i=t.recognizeSelfClosing)&&void 0!==i?i:!this.htmlMode,this.tokenizer=new(null!==(o=t.Tokenizer)&&void 0!==o?o:Tokenizer$1)(this.options,this),this.foreignContext=[!this.htmlMode],null===(a=(s=this.cbs).onparserinit)||void 0===a||a.call(s,this)}ontext(e,t){var r,n;const i=this.getSlice(e,t);this.endIndex=t-1,null===(n=(r=this.cbs).ontext)||void 0===n||n.call(r,i),this.startIndex=t}ontextentity(e,t){var r,n;this.endIndex=t-1,null===(n=(r=this.cbs).ontext)||void 0===n||n.call(r,fromCodePoint$1(e)),this.startIndex=t}isVoidElement(e){return this.htmlMode&&voidElements.has(e)}onopentagname(e,t){this.endIndex=t;let r=this.getSlice(e,t);this.lowerCaseTagNames&&(r=r.toLowerCase()),this.emitOpenTag(r)}emitOpenTag(e){var t,r,n,i;this.openTagStart=this.startIndex,this.tagname=e;const o=this.htmlMode&&openImpliesClose.get(e);if(o)for(;this.stack.length>0&&o.has(this.stack[0]);){const e=this.stack.shift();null===(r=(t=this.cbs).onclosetag)||void 0===r||r.call(t,e,!0)}this.isVoidElement(e)||(this.stack.unshift(e),this.htmlMode&&(foreignContextElements.has(e)?this.foreignContext.unshift(!0):htmlIntegrationElements.has(e)&&this.foreignContext.unshift(!1))),null===(i=(n=this.cbs).onopentagname)||void 0===i||i.call(n,e),this.cbs.onopentag&&(this.attribs={})}endOpenTag(e){var t,r;this.startIndex=this.openTagStart,this.attribs&&(null===(r=(t=this.cbs).onopentag)||void 0===r||r.call(t,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1}onclosetag(e,t){var r,n,i,o,s,a,l,c;this.endIndex=t;let u=this.getSlice(e,t);if(this.lowerCaseTagNames&&(u=u.toLowerCase()),this.htmlMode&&(foreignContextElements.has(u)||htmlIntegrationElements.has(u))&&this.foreignContext.shift(),this.isVoidElement(u))this.htmlMode&&"br"===u&&(null===(o=(i=this.cbs).onopentagname)||void 0===o||o.call(i,"br"),null===(a=(s=this.cbs).onopentag)||void 0===a||a.call(s,"br",{},!0),null===(c=(l=this.cbs).onclosetag)||void 0===c||c.call(l,"br",!1));else{const e=this.stack.indexOf(u);if(-1!==e)for(let t=0;t<=e;t++){const i=this.stack.shift();null===(n=(r=this.cbs).onclosetag)||void 0===n||n.call(r,i,t!==e)}else this.htmlMode&&"p"===u&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=t+1}onselfclosingtag(e){this.endIndex=e,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)}closeCurrentTag(e){var t,r;const n=this.tagname;this.endOpenTag(e),this.stack[0]===n&&(null===(r=(t=this.cbs).onclosetag)||void 0===r||r.call(t,n,!e),this.stack.shift())}onattribname(e,t){this.startIndex=e;const r=this.getSlice(e,t);this.attribname=this.lowerCaseAttributeNames?r.toLowerCase():r}onattribdata(e,t){this.attribvalue+=this.getSlice(e,t)}onattribentity(e){this.attribvalue+=fromCodePoint$1(e)}onattribend(e,t){var r,n;this.endIndex=t,null===(n=(r=this.cbs).onattribute)||void 0===n||n.call(r,this.attribname,this.attribvalue,e===QuoteType.Double?'"':e===QuoteType.Single?"'":e===QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(e){const t=e.search(reNameEnd);let r=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(r=r.toLowerCase()),r}ondeclaration(e,t){this.endIndex=t;const r=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){const e=this.getInstructionName(r);this.cbs.onprocessinginstruction(`!${e}`,`!${r}`)}this.startIndex=t+1}onprocessinginstruction(e,t){this.endIndex=t;const r=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){const e=this.getInstructionName(r);this.cbs.onprocessinginstruction(`?${e}`,`?${r}`)}this.startIndex=t+1}oncomment(e,t,r){var n,i,o,s;this.endIndex=t,null===(i=(n=this.cbs).oncomment)||void 0===i||i.call(n,this.getSlice(e,t-r)),null===(s=(o=this.cbs).oncommentend)||void 0===s||s.call(o),this.startIndex=t+1}oncdata(e,t,r){var n,i,o,s,a,l,c,u,d,p;this.endIndex=t;const h=this.getSlice(e,t-r);!this.htmlMode||this.options.recognizeCDATA?(null===(i=(n=this.cbs).oncdatastart)||void 0===i||i.call(n),null===(s=(o=this.cbs).ontext)||void 0===s||s.call(o,h),null===(l=(a=this.cbs).oncdataend)||void 0===l||l.call(a)):(null===(u=(c=this.cbs).oncomment)||void 0===u||u.call(c,`[CDATA[${h}]]`),null===(p=(d=this.cbs).oncommentend)||void 0===p||p.call(d)),this.startIndex=t+1}onend(){var e,t;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let e=0;e<this.stack.length;e++)this.cbs.onclosetag(this.stack[e],!0)}null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)}reset(){var e,t,r,n;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,null===(n=(r=this.cbs).onparserinit)||void 0===n||n.call(r,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(e){this.reset(),this.end(e)}getSlice(e,t){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let r=this.buffers[0].slice(e-this.bufferOffset,t-this.bufferOffset);for(;t-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),r+=this.buffers[0].slice(0,t-this.bufferOffset);return r}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(e){var t,r;this.ended?null===(r=(t=this.cbs).onerror)||void 0===r||r.call(t,new Error(".write() after done!")):(this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++))}end(e){var t,r;this.ended?null===(r=(t=this.cbs).onerror)||void 0===r||r.call(t,new Error(".end() after done!")):(e&&this.write(e),this.ended=!0,this.tokenizer.end())}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(e){this.write(e)}done(e){this.end(e)}};function parseDocument(e,t){const r=new DomHandler(void 0,t);return new Parser$2(r,t).end(e),r.root}var _a$1;const hasOwn=null!==(_a$1=Object.hasOwn)&&void 0!==_a$1?_a$1:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),rspace=/\s+/,dataAttrPrefix="data-",rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,rbrace=/^{[^]*}$|^\[[^]*]$/;function getAttr(e,t,r){var n;if(e&&isTag(e))return null!==(n=e.attribs)&&void 0!==n||(e.attribs={}),t?hasOwn(e.attribs,t)?!r&&rboolean.test(t)?t:e.attribs[t]:"option"===e.name&&"value"===t?text$5(e.children):"input"!==e.name||"radio"!==e.attribs.type&&"checkbox"!==e.attribs.type||"value"!==t?void 0:"on":e.attribs}function setAttr(e,t,r){null===r?removeAttribute(e,t):e.attribs[t]=`${r}`}function attr(e,t){if("object"==typeof e||void 0!==t){if("function"==typeof t){if("string"!=typeof e)throw new Error("Bad combination of arguments.");return domEach(this,(r,n)=>{isTag(r)&&setAttr(r,e,t.call(r,n,r.attribs[e]))})}return domEach(this,r=>{if(isTag(r))if("object"==typeof e)for(const t of Object.keys(e))setAttr(r,t,e[t]);else setAttr(r,e,t)})}return arguments.length>1?this:getAttr(this[0],e,this.options.xmlMode)}function getProp(e,t,r){return t in e?e[t]:!r&&rboolean.test(t)?void 0!==getAttr(e,t,!1):getAttr(e,t,r)}function setProp(e,t,r,n){t in e?e[t]=r:setAttr(e,t,!n&&rboolean.test(t)?r?"":null:`${r}`)}function prop(e,t){var r;if("string"==typeof e&&void 0===t){const t=this[0];if(!t)return;switch(e){case"style":{const e=this.css(),t=Object.keys(e);for(let r=0;r<t.length;r++)e[r]=t[r];return e.length=t.length,e}case"tagName":case"nodeName":if(!isTag(t))return;return t.name.toUpperCase();case"href":case"src":{if(!isTag(t))return;const n=null===(r=t.attribs)||void 0===r?void 0:r[e];return"undefined"==typeof URL||("href"!==e||"a"!==t.tagName&&"link"!==t.tagName)&&("src"!==e||"img"!==t.tagName&&"iframe"!==t.tagName&&"audio"!==t.tagName&&"video"!==t.tagName&&"source"!==t.tagName)||void 0===n||!this.options.baseURI?n:new URL(n,this.options.baseURI).href}case"innerText":return innerText(t);case"textContent":return textContent(t);case"outerHTML":return t.type===Root$2?this.html():this.clone().wrap("<container />").parent().html();case"innerHTML":return this.html();default:if(!isTag(t))return;return getProp(t,e,this.options.xmlMode)}}if("object"==typeof e||void 0!==t){if("function"==typeof t){if("object"==typeof e)throw new TypeError("Bad combination of arguments.");return domEach(this,(r,n)=>{isTag(r)&&setProp(r,e,t.call(r,n,getProp(r,e,this.options.xmlMode)),this.options.xmlMode)})}return domEach(this,r=>{if(isTag(r))if("object"==typeof e)for(const t of Object.keys(e))setProp(r,t,e[t],this.options.xmlMode);else setProp(r,e,t,this.options.xmlMode)})}}function setData(e,t,r){var n;null!==(n=e.data)&&void 0!==n||(e.data={}),"object"==typeof t?Object.assign(e.data,t):"string"==typeof t&&void 0!==r&&(e.data[t]=r)}function readAllData(e){for(const t of Object.keys(e.attribs)){if(!t.startsWith(dataAttrPrefix))continue;const r=camelCase(t.slice(dataAttrPrefix.length));hasOwn(e.data,r)||(e.data[r]=parseDataValue(e.attribs[t]))}return e.data}function readData(e,t){const r=dataAttrPrefix+cssCase(t),n=e.data;return hasOwn(n,t)?n[t]:hasOwn(e.attribs,r)?n[t]=parseDataValue(e.attribs[r]):void 0}function parseDataValue(e){if("null"===e)return null;if("true"===e)return!0;if("false"===e)return!1;const t=Number(e);if(e===String(t))return t;if(rbrace.test(e))try{return JSON.parse(e)}catch{}return e}function data$1(e,t){var r;const n=this[0];if(!n||!isTag(n))return;const i=n;return null!==(r=i.data)&&void 0!==r||(i.data={}),null==e?readAllData(i):"object"==typeof e||void 0!==t?(domEach(this,r=>{isTag(r)&&("object"==typeof e?setData(r,e):setData(r,e,t))}),this):readData(i,e)}function val(e){const t=0===arguments.length,r=this[0];if(!r||!isTag(r))return t?void 0:this;switch(r.name){case"textarea":return this.text(e);case"select":{const r=this.find("option:selected");if(!t){if(null==this.attr("multiple")&&"object"==typeof e)return this;this.find("option").removeAttr("selected");const t="object"==typeof e?e:[e];for(const e of t)this.find(`option[value="${e}"]`).attr("selected","");return this}return this.attr("multiple")?r.toArray().map(e=>text$5(e.children)):r.attr("value")}case"input":case"option":return t?this.attr("value"):this.attr("value",e)}}function removeAttribute(e,t){e.attribs&&hasOwn(e.attribs,t)&&delete e.attribs[t]}function splitNames(e){return e?e.trim().split(rspace):[]}function removeAttr(e){const t=splitNames(e);for(const r of t)domEach(this,e=>{isTag(e)&&removeAttribute(e,r)});return this}function hasClass(e){return this.toArray().some(t=>{const r=isTag(t)&&t.attribs.class;let n=-1;if(r&&e.length>0)for(;(n=r.indexOf(e,n+1))>-1;){const t=n+e.length;if((0===n||rspace.test(r[n-1]))&&(t===r.length||rspace.test(r[t])))return!0}return!1})}function addClass(e){if("function"==typeof e)return domEach(this,(t,r)=>{if(isTag(t)){const n=t.attribs.class||"";addClass.call([t],e.call(t,r,n))}});if(!e||"string"!=typeof e)return this;const t=e.split(rspace),r=this.length;for(let n=0;n<r;n++){const e=this[n];if(!isTag(e))continue;const r=getAttr(e,"class",!1);if(r){let n=` ${r} `;for(const e of t){const t=`${e} `;n.includes(` ${t}`)||(n+=t)}setAttr(e,"class",n.trim())}else setAttr(e,"class",t.join(" ").trim())}return this}function removeClass(e){if("function"==typeof e)return domEach(this,(t,r)=>{isTag(t)&&removeClass.call([t],e.call(t,r,t.attribs.class||""))});const t=splitNames(e),r=t.length,n=0===arguments.length;return domEach(this,e=>{if(isTag(e))if(n)e.attribs.class="";else{const n=splitNames(e.attribs.class);let i=!1;for(let e=0;e<r;e++){const r=n.indexOf(t[e]);-1!==r&&(n.splice(r,1),i=!0,e--)}i&&(e.attribs.class=n.join(" "))}})}function toggleClass(e,t){if("function"==typeof e)return domEach(this,(r,n)=>{isTag(r)&&toggleClass.call([r],e.call(r,n,r.attribs.class||"",t),t)});if(!e||"string"!=typeof e)return this;const r=e.split(rspace),n=r.length,i="boolean"==typeof t?t?1:-1:0,o=this.length;for(let s=0;s<o;s++){const e=this[s];if(!isTag(e))continue;const t=splitNames(e.attribs.class);for(let o=0;o<n;o++){const e=t.indexOf(r[o]);i>=0&&-1===e?t.push(r[o]):i<=0&&-1!==e&&t.splice(e,1)}e.attribs.class=t.join(" ")}return this}const Attributes=Object.freeze(Object.defineProperty({__proto__:null,addClass:addClass,attr:attr,data:data$1,hasClass:hasClass,prop:prop,removeAttr:removeAttr,removeClass:removeClass,toggleClass:toggleClass,val:val},Symbol.toStringTag,{value:"Module"}));var SelectorType,SelectorType2,AttributeAction,AttributeAction2;SelectorType2=SelectorType||(SelectorType={}),SelectorType2.Attribute="attribute",SelectorType2.Pseudo="pseudo",SelectorType2.PseudoElement="pseudo-element",SelectorType2.Tag="tag",SelectorType2.Universal="universal",SelectorType2.Adjacent="adjacent",SelectorType2.Child="child",SelectorType2.Descendant="descendant",SelectorType2.Parent="parent",SelectorType2.Sibling="sibling",SelectorType2.ColumnCombinator="column-combinator",AttributeAction2=AttributeAction||(AttributeAction={}),AttributeAction2.Any="any",AttributeAction2.Element="element",AttributeAction2.End="end",AttributeAction2.Equals="equals",AttributeAction2.Exists="exists",AttributeAction2.Hyphen="hyphen",AttributeAction2.Not="not",AttributeAction2.Start="start";const reName=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,reEscape=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,actionTypes=new Map([[126,AttributeAction.Element],[94,AttributeAction.Start],[36,AttributeAction.End],[42,AttributeAction.Any],[33,AttributeAction.Not],[124,AttributeAction.Hyphen]]),unpackPseudos=new Set(["has","not","matches","is","where","host","host-context"]);function isTraversal$1(e){switch(e.type){case SelectorType.Adjacent:case SelectorType.Child:case SelectorType.Descendant:case SelectorType.Parent:case SelectorType.Sibling:case SelectorType.ColumnCombinator:return!0;default:return!1}}const stripQuotesFromPseudos=new Set(["contains","icontains"]);function funescape(e,t,r){const n=parseInt(t,16)-65536;return n!=n||r?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)}function unescapeCSS(e){return e.replace(reEscape,funescape)}function isQuote(e){return 39===e||34===e}function isWhitespace$1(e){return 32===e||9===e||10===e||12===e||13===e}function parse$6(e){const t=[],r=parseSelector(t,`${e}`,0);if(r<e.length)throw new Error(`Unmatched selector: ${e.slice(r)}`);return t}function parseSelector(e,t,r){let n=[];function i(e){const n=t.slice(r+e).match(reName);if(!n)throw new Error(`Expected name, found ${t.slice(r)}`);const[i]=n;return r+=e+i.length,unescapeCSS(i)}function o(e){for(r+=e;r<t.length&&isWhitespace$1(t.charCodeAt(r));)r++}function s(){const e=r+=1;let n=1;for(;n>0&&r<t.length;r++)40!==t.charCodeAt(r)||a(r)?41!==t.charCodeAt(r)||a(r)||n--:n++;if(n)throw new Error("Parenthesis not matched");return unescapeCSS(t.slice(e,r-1))}function a(e){let r=0;for(;92===t.charCodeAt(--e);)r++;return!(1&~r)}function l(){if(n.length>0&&isTraversal$1(n[n.length-1]))throw new Error("Did not expect successive traversals.")}function c(e){n.length>0&&n[n.length-1].type===SelectorType.Descendant?n[n.length-1].type=e:(l(),n.push({type:e}))}function u(e,t){n.push({type:SelectorType.Attribute,name:e,action:t,value:i(1),namespace:null,ignoreCase:"quirks"})}function d(){if(n.length&&n[n.length-1].type===SelectorType.Descendant&&n.pop(),0===n.length)throw new Error("Empty sub-selector");e.push(n)}if(o(0),t.length===r)return r;e:for(;r<t.length;){const e=t.charCodeAt(r);switch(e){case 32:case 9:case 10:case 12:case 13:0!==n.length&&n[0].type===SelectorType.Descendant||(l(),n.push({type:SelectorType.Descendant})),o(1);break;case 62:c(SelectorType.Child),o(1);break;case 60:c(SelectorType.Parent),o(1);break;case 126:c(SelectorType.Sibling),o(1);break;case 43:c(SelectorType.Adjacent),o(1);break;case 46:u("class",AttributeAction.Element);break;case 35:u("id",AttributeAction.Equals);break;case 91:{let e;o(1);let s=null;124===t.charCodeAt(r)?e=i(1):t.startsWith("*|",r)?(s="*",e=i(2)):(e=i(0),124===t.charCodeAt(r)&&61!==t.charCodeAt(r+1)&&(s=e,e=i(1))),o(0);let l=AttributeAction.Exists;const c=actionTypes.get(t.charCodeAt(r));if(c){if(l=c,61!==t.charCodeAt(r+1))throw new Error("Expected `=`");o(2)}else 61===t.charCodeAt(r)&&(l=AttributeAction.Equals,o(1));let u="",d=null;if("exists"!==l){if(isQuote(t.charCodeAt(r))){const e=t.charCodeAt(r);let n=r+1;for(;n<t.length&&(t.charCodeAt(n)!==e||a(n));)n+=1;if(t.charCodeAt(n)!==e)throw new Error("Attribute value didn't end");u=unescapeCSS(t.slice(r+1,n)),r=n+1}else{const e=r;for(;r<t.length&&(!isWhitespace$1(t.charCodeAt(r))&&93!==t.charCodeAt(r)||a(r));)r+=1;u=unescapeCSS(t.slice(e,r))}o(0);const e=32|t.charCodeAt(r);115===e?(d=!1,o(1)):105===e&&(d=!0,o(1))}if(93!==t.charCodeAt(r))throw new Error("Attribute selector didn't terminate");r+=1;const p={type:SelectorType.Attribute,name:e,action:l,value:u,namespace:s,ignoreCase:d};n.push(p);break}case 58:{if(58===t.charCodeAt(r+1)){n.push({type:SelectorType.PseudoElement,name:i(2).toLowerCase(),data:40===t.charCodeAt(r)?s():null});continue}const e=i(1).toLowerCase();let o=null;if(40===t.charCodeAt(r))if(unpackPseudos.has(e)){if(isQuote(t.charCodeAt(r+1)))throw new Error(`Pseudo-selector ${e} cannot be quoted`);if(o=[],r=parseSelector(o,t,r+1),41!==t.charCodeAt(r))throw new Error(`Missing closing parenthesis in :${e} (${t})`);r+=1}else{if(o=s(),stripQuotesFromPseudos.has(e)){const e=o.charCodeAt(0);e===o.charCodeAt(o.length-1)&&isQuote(e)&&(o=o.slice(1,-1))}o=unescapeCSS(o)}n.push({type:SelectorType.Pseudo,name:e,data:o});break}case 44:d(),n=[],o(1);break;default:{if(t.startsWith("/*",r)){const e=t.indexOf("*/",r+2);if(e<0)throw new Error("Comment was not terminated");r=e+2,0===n.length&&o(0);break}let s,a=null;if(42===e)r+=1,s="*";else if(124===e){if(s="",124===t.charCodeAt(r+1)){c(SelectorType.ColumnCombinator),o(2);break}}else{if(!reName.test(t.slice(r)))break e;s=i(0)}124===t.charCodeAt(r)&&124!==t.charCodeAt(r+1)&&(a=s,42===t.charCodeAt(r+1)?(s="*",r+=2):s=i(1)),n.push("*"===s?{type:SelectorType.Universal,namespace:a}:{type:SelectorType.Tag,name:s,namespace:a})}}}return d(),r}var boolbase$1,hasRequiredBoolbase;function requireBoolbase(){return hasRequiredBoolbase?boolbase$1:(hasRequiredBoolbase=1,boolbase$1={trueFunc:function(){return!0},falseFunc:function(){return!1}})}var boolbaseExports=requireBoolbase();const boolbase=getDefaultExportFromCjs(boolbaseExports),procedure=new Map([[SelectorType.Universal,50],[SelectorType.Tag,30],[SelectorType.Attribute,1],[SelectorType.Pseudo,0]]);function isTraversal(e){return!procedure.has(e.type)}const attributes=new Map([[AttributeAction.Exists,10],[AttributeAction.Equals,8],[AttributeAction.Not,7],[AttributeAction.Start,6],[AttributeAction.End,6],[AttributeAction.Any,5]]);function sortByProcedure(e){const t=e.map(getProcedure);for(let r=1;r<e.length;r++){const n=t[r];if(!(n<0))for(let i=r-1;i>=0&&n<t[i];i--){const r=e[i+1];e[i+1]=e[i],e[i]=r,t[i+1]=t[i],t[i]=n}}}function getProcedure(e){var t,r;let n=null!==(t=procedure.get(e.type))&&void 0!==t?t:-1;return e.type===SelectorType.Attribute?(n=null!==(r=attributes.get(e.action))&&void 0!==r?r:4,e.action===AttributeAction.Equals&&"id"===e.name&&(n=9),e.ignoreCase&&(n>>=1)):e.type===SelectorType.Pseudo&&(e.data?"has"===e.name||"contains"===e.name?n=0:Array.isArray(e.data)?(n=Math.min(...e.data.map(e=>Math.min(...e.map(getProcedure)))),n<0&&(n=0)):n=2:n=3),n}const reChars=/[-[\]{}()*+?.,\\^$|#\s]/g;function escapeRegex$1(e){return e.replace(reChars,"\\$&")}const caseInsensitiveAttributes=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function shouldIgnoreCase(e,t){return"boolean"==typeof e.ignoreCase?e.ignoreCase:"quirks"===e.ignoreCase?!!t.quirksMode:!t.xmlMode&&caseInsensitiveAttributes.has(e.name)}const attributeRules={equals(e,t,r){const{adapter:n}=r,{name:i}=t;let{value:o}=t;return shouldIgnoreCase(t,r)?(o=o.toLowerCase(),t=>{const r=n.getAttributeValue(t,i);return null!=r&&r.length===o.length&&r.toLowerCase()===o&&e(t)}):t=>n.getAttributeValue(t,i)===o&&e(t)},hyphen(e,t,r){const{adapter:n}=r,{name:i}=t;let{value:o}=t;const s=o.length;return shouldIgnoreCase(t,r)?(o=o.toLowerCase(),function(t){const r=n.getAttributeValue(t,i);return null!=r&&(r.length===s||"-"===r.charAt(s))&&r.substr(0,s).toLowerCase()===o&&e(t)}):function(t){const r=n.getAttributeValue(t,i);return null!=r&&(r.length===s||"-"===r.charAt(s))&&r.substr(0,s)===o&&e(t)}},element(e,t,r){const{adapter:n}=r,{name:i,value:o}=t;if(/\s/.test(o))return boolbase.falseFunc;const s=new RegExp(`(?:^|\\s)${escapeRegex$1(o)}(?:$|\\s)`,shouldIgnoreCase(t,r)?"i":"");return function(t){const r=n.getAttributeValue(t,i);return null!=r&&r.length>=o.length&&s.test(r)&&e(t)}},exists:(e,{name:t},{adapter:r})=>n=>r.hasAttrib(n,t)&&e(n),start(e,t,r){const{adapter:n}=r,{name:i}=t;let{value:o}=t;const s=o.length;return 0===s?boolbase.falseFunc:shouldIgnoreCase(t,r)?(o=o.toLowerCase(),t=>{const r=n.getAttributeValue(t,i);return null!=r&&r.length>=s&&r.substr(0,s).toLowerCase()===o&&e(t)}):t=>{var r;return!!(null===(r=n.getAttributeValue(t,i))||void 0===r?void 0:r.startsWith(o))&&e(t)}},end(e,t,r){const{adapter:n}=r,{name:i}=t;let{value:o}=t;const s=-o.length;return 0===s?boolbase.falseFunc:shouldIgnoreCase(t,r)?(o=o.toLowerCase(),t=>{var r;return(null===(r=n.getAttributeValue(t,i))||void 0===r?void 0:r.substr(s).toLowerCase())===o&&e(t)}):t=>{var r;return!!(null===(r=n.getAttributeValue(t,i))||void 0===r?void 0:r.endsWith(o))&&e(t)}},any(e,t,r){const{adapter:n}=r,{name:i,value:o}=t;if(""===o)return boolbase.falseFunc;if(shouldIgnoreCase(t,r)){const t=new RegExp(escapeRegex$1(o),"i");return function(r){const s=n.getAttributeValue(r,i);return null!=s&&s.length>=o.length&&t.test(s)&&e(r)}}return t=>{var r;return!!(null===(r=n.getAttributeValue(t,i))||void 0===r?void 0:r.includes(o))&&e(t)}},not(e,t,r){const{adapter:n}=r,{name:i}=t;let{value:o}=t;return""===o?t=>!!n.getAttributeValue(t,i)&&e(t):shouldIgnoreCase(t,r)?(o=o.toLowerCase(),t=>{const r=n.getAttributeValue(t,i);return(null==r||r.length!==o.length||r.toLowerCase()!==o)&&e(t)}):t=>n.getAttributeValue(t,i)!==o&&e(t)}},whitespace=new Set([9,10,12,13,32]),ZERO="0".charCodeAt(0),NINE="9".charCodeAt(0);function parse$5(e){if("even"===(e=e.trim().toLowerCase()))return[2,0];if("odd"===e)return[2,1];let t=0,r=0,n=o(),i=s();if(t<e.length&&"n"===e.charAt(t)&&(t++,r=n*(null!=i?i:1),a(),t<e.length?(n=o(),a(),i=s()):n=i=0),null===i||t<e.length)throw new Error(`n-th rule couldn't be parsed ('${e}')`);return[r,n*i];function o(){return"-"===e.charAt(t)?(t++,-1):("+"===e.charAt(t)&&t++,1)}function s(){const r=t;let n=0;for(;t<e.length&&e.charCodeAt(t)>=ZERO&&e.charCodeAt(t)<=NINE;)n=10*n+(e.charCodeAt(t)-ZERO),t++;return t===r?null:n}function a(){for(;t<e.length&&whitespace.has(e.charCodeAt(t));)t++}}function compile(e){const t=e[0],r=e[1]-1;if(r<0&&t<=0)return boolbase.falseFunc;if(-1===t)return e=>e<=r;if(0===t)return e=>e===r;if(1===t)return r<0?boolbase.trueFunc:e=>e>=r;const n=Math.abs(t),i=(r%n+n)%n;return t>1?e=>e>=r&&e%n===i:e=>e<=r&&e%n===i}function nthCheck(e){return compile(parse$5(e))}function getChildFunc(e,t){return r=>{const n=t.getParent(r);return null!=n&&t.isTag(n)&&e(r)}}const filters={contains:(e,t,{adapter:r})=>function(n){return e(n)&&r.getText(n).includes(t)},icontains(e,t,{adapter:r}){const n=t.toLowerCase();return function(t){return e(t)&&r.getText(t).toLowerCase().includes(n)}},"nth-child"(e,t,{adapter:r,equals:n}){const i=nthCheck(t);return i===boolbase.falseFunc?boolbase.falseFunc:i===boolbase.trueFunc?getChildFunc(e,r):function(t){const o=r.getSiblings(t);let s=0;for(let e=0;e<o.length&&!n(t,o[e]);e++)r.isTag(o[e])&&s++;return i(s)&&e(t)}},"nth-last-child"(e,t,{adapter:r,equals:n}){const i=nthCheck(t);return i===boolbase.falseFunc?boolbase.falseFunc:i===boolbase.trueFunc?getChildFunc(e,r):function(t){const o=r.getSiblings(t);let s=0;for(let e=o.length-1;e>=0&&!n(t,o[e]);e--)r.isTag(o[e])&&s++;return i(s)&&e(t)}},"nth-of-type"(e,t,{adapter:r,equals:n}){const i=nthCheck(t);return i===boolbase.falseFunc?boolbase.falseFunc:i===boolbase.trueFunc?getChildFunc(e,r):function(t){const o=r.getSiblings(t);let s=0;for(let e=0;e<o.length;e++){const i=o[e];if(n(t,i))break;r.isTag(i)&&r.getName(i)===r.getName(t)&&s++}return i(s)&&e(t)}},"nth-last-of-type"(e,t,{adapter:r,equals:n}){const i=nthCheck(t);return i===boolbase.falseFunc?boolbase.falseFunc:i===boolbase.trueFunc?getChildFunc(e,r):function(t){const o=r.getSiblings(t);let s=0;for(let e=o.length-1;e>=0;e--){const i=o[e];if(n(t,i))break;r.isTag(i)&&r.getName(i)===r.getName(t)&&s++}return i(s)&&e(t)}},root:(e,t,{adapter:r})=>t=>{const n=r.getParent(t);return(null==n||!r.isTag(n))&&e(t)},scope(e,t,r,n){const{equals:i}=r;return n&&0!==n.length?1===n.length?t=>i(n[0],t)&&e(t):t=>n.includes(t)&&e(t):filters.root(e,t,r)},hover:dynamicStatePseudo("isHovered"),visited:dynamicStatePseudo("isVisited"),active:dynamicStatePseudo("isActive")};function dynamicStatePseudo(e){return function(t,r,{adapter:n}){const i=n[e];return"function"!=typeof i?boolbase.falseFunc:function(e){return i(e)&&t(e)}}}const pseudos={empty:(e,{adapter:t})=>!t.getChildren(e).some(e=>t.isTag(e)||""!==t.getText(e)),"first-child"(e,{adapter:t,equals:r}){if(t.prevElementSibling)return null==t.prevElementSibling(e);const n=t.getSiblings(e).find(e=>t.isTag(e));return null!=n&&r(e,n)},"last-child"(e,{adapter:t,equals:r}){const n=t.getSiblings(e);for(let i=n.length-1;i>=0;i--){if(r(e,n[i]))return!0;if(t.isTag(n[i]))break}return!1},"first-of-type"(e,{adapter:t,equals:r}){const n=t.getSiblings(e),i=t.getName(e);for(let o=0;o<n.length;o++){const s=n[o];if(r(e,s))return!0;if(t.isTag(s)&&t.getName(s)===i)break}return!1},"last-of-type"(e,{adapter:t,equals:r}){const n=t.getSiblings(e),i=t.getName(e);for(let o=n.length-1;o>=0;o--){const s=n[o];if(r(e,s))return!0;if(t.isTag(s)&&t.getName(s)===i)break}return!1},"only-of-type"(e,{adapter:t,equals:r}){const n=t.getName(e);return t.getSiblings(e).every(i=>r(e,i)||!t.isTag(i)||t.getName(i)!==n)},"only-child":(e,{adapter:t,equals:r})=>t.getSiblings(e).every(n=>r(e,n)||!t.isTag(n))};function verifyPseudoArgs(e,t,r,n){if(null===r){if(e.length>n)throw new Error(`Pseudo-class :${t} requires an argument`)}else if(e.length===n)throw new Error(`Pseudo-class :${t} doesn't have any arguments`)}const aliases={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:":is(\n        :is(button, input, select, textarea, optgroup, option)[disabled],\n        optgroup[disabled] > option,\n        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)\n    )",enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"},PLACEHOLDER_ELEMENT={};function ensureIsTag(e,t){return e===boolbase.falseFunc?boolbase.falseFunc:r=>t.isTag(r)&&e(r)}function getNextSiblings(e,t){const r=t.getSiblings(e);if(r.length<=1)return[];const n=r.indexOf(e);return n<0||n===r.length-1?[]:r.slice(n+1).filter(t.isTag)}function copyOptions(e){return{xmlMode:!!e.xmlMode,lowerCaseAttributeNames:!!e.lowerCaseAttributeNames,lowerCaseTags:!!e.lowerCaseTags,quirksMode:!!e.quirksMode,cacheResults:!!e.cacheResults,pseudos:e.pseudos,adapter:e.adapter,equals:e.equals}}const is$2=(e,t,r,n,i)=>{const o=i(t,copyOptions(r),n);return o===boolbase.trueFunc?e:o===boolbase.falseFunc?boolbase.falseFunc:t=>o(t)&&e(t)},subselects={is:is$2,matches:is$2,where:is$2,not(e,t,r,n,i){const o=i(t,copyOptions(r),n);return o===boolbase.falseFunc?e:o===boolbase.trueFunc?boolbase.falseFunc:t=>!o(t)&&e(t)},has(e,t,r,n,i){const{adapter:o}=r,s=copyOptions(r);s.relativeSelector=!0;const a=t.some(e=>e.some(isTraversal))?[PLACEHOLDER_ELEMENT]:void 0,l=i(t,s,a);if(l===boolbase.falseFunc)return boolbase.falseFunc;const c=ensureIsTag(l,o);if(a&&l!==boolbase.trueFunc){const{shouldTestNextSiblings:t=!1}=l;return r=>{if(!e(r))return!1;a[0]=r;const n=o.getChildren(r),i=t?[...n,...getNextSiblings(r,o)]:n;return o.existsOne(c,i)}}return t=>e(t)&&o.existsOne(c,o.getChildren(t))}};function compilePseudoSelector(e,t,r,n,i){var o;const{name:s,data:a}=t;if(Array.isArray(a)){if(!(s in subselects))throw new Error(`Unknown pseudo-class :${s}(${a})`);return subselects[s](e,a,r,n,i)}const l=null===(o=r.pseudos)||void 0===o?void 0:o[s],c="string"==typeof l?l:aliases[s];if("string"==typeof c){if(null!=a)throw new Error(`Pseudo ${s} doesn't have any arguments`);const t=parse$6(c);return subselects.is(e,t,r,n,i)}if("function"==typeof l)return verifyPseudoArgs(l,s,a,1),t=>l(t,a)&&e(t);if(s in filters)return filters[s](e,a,r,n);if(s in pseudos){const t=pseudos[s];return verifyPseudoArgs(t,s,a,2),n=>t(n,r,a)&&e(n)}throw new Error(`Unknown pseudo-class :${s}`)}function getElementParent(e,t){const r=t.getParent(e);return r&&t.isTag(r)?r:null}function compileGeneralSelector(e,t,r,n,i){const{adapter:o,equals:s}=r;switch(t.type){case SelectorType.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case SelectorType.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case SelectorType.Attribute:if(null!=t.namespace)throw new Error("Namespaced attributes are not yet supported by css-select");return r.xmlMode&&!r.lowerCaseAttributeNames||(t.name=t.name.toLowerCase()),attributeRules[t.action](e,t,r);case SelectorType.Pseudo:return compilePseudoSelector(e,t,r,n,i);case SelectorType.Tag:{if(null!=t.namespace)throw new Error("Namespaced tag names are not yet supported by css-select");let{name:n}=t;return r.xmlMode&&!r.lowerCaseTags||(n=n.toLowerCase()),function(t){return o.getName(t)===n&&e(t)}}case SelectorType.Descendant:{if(!1===r.cacheResults||"undefined"==typeof WeakSet)return function(t){let r=t;for(;r=getElementParent(r,o);)if(e(r))return!0;return!1};const t=new WeakSet;return function(r){let n=r;for(;n=getElementParent(n,o);)if(!t.has(n)){if(o.isTag(n)&&e(n))return!0;t.add(n)}return!1}}case"_flexibleDescendant":return function(t){let r=t;do{if(e(r))return!0}while(r=getElementParent(r,o));return!1};case SelectorType.Parent:return function(t){return o.getChildren(t).some(t=>o.isTag(t)&&e(t))};case SelectorType.Child:return function(t){const r=o.getParent(t);return null!=r&&o.isTag(r)&&e(r)};case SelectorType.Sibling:return function(t){const r=o.getSiblings(t);for(let n=0;n<r.length;n++){const i=r[n];if(s(t,i))break;if(o.isTag(i)&&e(i))return!0}return!1};case SelectorType.Adjacent:return o.prevElementSibling?function(t){const r=o.prevElementSibling(t);return null!=r&&e(r)}:function(t){const r=o.getSiblings(t);let n;for(let e=0;e<r.length;e++){const i=r[e];if(s(t,i))break;o.isTag(i)&&(n=i)}return!!n&&e(n)};case SelectorType.Universal:if(null!=t.namespace&&"*"!==t.namespace)throw new Error("Namespaced universal selectors are not yet supported by css-select");return e}}function includesScopePseudo(e){return e.type===SelectorType.Pseudo&&("scope"===e.name||Array.isArray(e.data)&&e.data.some(e=>e.some(includesScopePseudo)))}const DESCENDANT_TOKEN={type:SelectorType.Descendant},FLEXIBLE_DESCENDANT_TOKEN={type:"_flexibleDescendant"},SCOPE_TOKEN={type:SelectorType.Pseudo,name:"scope",data:null};function absolutize(e,{adapter:t},r){const n=!!(null==r?void 0:r.every(e=>{const r=t.isTag(e)&&t.getParent(e);return e===PLACEHOLDER_ELEMENT||r&&t.isTag(r)}));for(const i of e){if(i.length>0&&isTraversal(i[0])&&i[0].type!==SelectorType.Descendant);else{if(!n||i.some(includesScopePseudo))continue;i.unshift(DESCENDANT_TOKEN)}i.unshift(SCOPE_TOKEN)}}function compileToken(e,t,r){var n;e.forEach(sortByProcedure),r=null!==(n=t.context)&&void 0!==n?n:r;const i=Array.isArray(r),o=r&&(Array.isArray(r)?r:[r]);if(!1!==t.relativeSelector)absolutize(e,t,o);else if(e.some(e=>e.length>0&&isTraversal(e[0])))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");let s=!1;const a=e.map(e=>{if(e.length>=2){const[t,r]=e;t.type!==SelectorType.Pseudo||"scope"!==t.name||(i&&r.type===SelectorType.Descendant?e[1]=FLEXIBLE_DESCENDANT_TOKEN:r.type!==SelectorType.Adjacent&&r.type!==SelectorType.Sibling||(s=!0))}return compileRules(e,t,o)}).reduce(reduceRules,boolbase.falseFunc);return a.shouldTestNextSiblings=s,a}function compileRules(e,t,r){var n;return e.reduce((e,n)=>e===boolbase.falseFunc?boolbase.falseFunc:compileGeneralSelector(e,n,t,r,compileToken),null!==(n=t.rootFunc)&&void 0!==n?n:boolbase.trueFunc)}function reduceRules(e,t){return t===boolbase.falseFunc||e===boolbase.trueFunc?e:e===boolbase.falseFunc||t===boolbase.trueFunc?t:function(r){return e(r)||t(r)}}const defaultEquals=(e,t)=>e===t,defaultOptions={adapter:DomUtils,equals:defaultEquals};function convertOptionFormats(e){var t,r,n,i;const o=null!=e?e:defaultOptions;return null!==(t=o.adapter)&&void 0!==t||(o.adapter=DomUtils),null!==(r=o.equals)&&void 0!==r||(o.equals=null!==(i=null===(n=o.adapter)||void 0===n?void 0:n.equals)&&void 0!==i?i:defaultEquals),o}function wrapCompile(e){return function(t,r,n){const i=convertOptionFormats(r);return e(t,i,n)}}const _compileToken=wrapCompile(compileToken);function prepareContext(e,t,r=!1){return r&&(e=appendNextSiblings(e,t)),Array.isArray(e)?t.removeSubsets(e):t.getChildren(e)}function appendNextSiblings(e,t){const r=Array.isArray(e)?e.slice(0):[e],n=r.length;for(let i=0;i<n;i++){const e=getNextSiblings(r[i],t);r.push(...e)}return r}const filterNames=new Set(["first","last","eq","gt","nth","lt","even","odd"]);function isFilter(e){return"pseudo"===e.type&&(!!filterNames.has(e.name)||!("not"!==e.name||!Array.isArray(e.data))&&e.data.some(e=>e.some(isFilter)))}function getLimit(e,t,r){const n=null!=t?parseInt(t,10):NaN;switch(e){case"first":return 1;case"nth":case"eq":return isFinite(n)?n>=0?n+1:1/0:0;case"lt":return isFinite(n)?n>=0?Math.min(n,r):1/0:0;case"gt":return isFinite(n)?1/0:0;case"odd":return 2*r;case"even":return 2*r-1;case"last":case"not":return 1/0}}function getDocumentRoot(e){for(;e.parent;)e=e.parent;return e}function groupSelectors(e){const t=[],r=[];for(const n of e)n.some(isFilter)?t.push(n):r.push(n);return[r,t]}const UNIVERSAL_SELECTOR={type:SelectorType.Universal,namespace:null},SCOPE_PSEUDO={type:SelectorType.Pseudo,name:"scope",data:null};function is$1(e,t,r={}){return some([e],t,r)}function some(e,t,r={}){if("function"==typeof t)return e.some(t);const[n,i]=groupSelectors(parse$6(t));return n.length>0&&e.some(_compileToken(n,r))||i.some(t=>filterBySelector(t,e,r).length>0)}function filterByPosition(e,t,r,n){const i="string"==typeof r?parseInt(r,10):NaN;switch(e){case"first":case"lt":return t;case"last":return t.length>0?[t[t.length-1]]:t;case"nth":case"eq":return isFinite(i)&&Math.abs(i)<t.length?[i<0?t[t.length+i]:t[i]]:[];case"gt":return isFinite(i)?t.slice(i+1):[];case"even":return t.filter((e,t)=>t%2==0);case"odd":return t.filter((e,t)=>t%2==1);case"not":{const e=new Set(filterParsed(r,t,n));return t.filter(t=>!e.has(t))}}}function filter$1(e,t,r={}){return filterParsed(parse$6(e),t,r)}function filterParsed(e,t,r){if(0===t.length)return[];const[n,i]=groupSelectors(e);let o;if(n.length){const e=filterElements(t,n,r);if(0===i.length)return e;e.length&&(o=new Set(e))}for(let s=0;s<i.length&&(null==o?void 0:o.size)!==t.length;s++){const e=i[s];if(0===(o?t.filter(e=>isTag(e)&&!o.has(e)):t).length)break;const n=filterBySelector(e,t,r);if(n.length)if(o)n.forEach(e=>o.add(e));else{if(s===i.length-1)return n;o=new Set(n)}}return void 0!==o?o.size===t.length?t:t.filter(e=>o.has(e)):[]}function filterBySelector(e,t,r){var n;if(e.some(isTraversal$1)){const i=null!==(n=r.root)&&void 0!==n?n:getDocumentRoot(t[0]),o={...r,context:t,relativeSelector:!1};return e.push(SCOPE_PSEUDO),findFilterElements(i,e,o,!0,t.length)}return findFilterElements(t,e,r,!1,t.length)}function select(e,t,r={},n=1/0){if("function"==typeof e)return find$2(t,e);const[i,o]=groupSelectors(parse$6(e)),s=o.map(e=>findFilterElements(t,e,r,!0,n));return i.length&&s.push(findElements(t,i,r,n)),0===s.length?[]:1===s.length?s[0]:uniqueSort(s.reduce((e,t)=>[...e,...t]))}function findFilterElements(e,t,r,n,i){const o=t.findIndex(isFilter),s=t.slice(0,o),a=t[o],l=t.length-1===o?i:1/0,c=getLimit(a.name,a.data,l);if(0===c)return[];const u=(0!==s.length||Array.isArray(e)?0===s.length?(Array.isArray(e)?e:[e]).filter(isTag):n||s.some(isTraversal$1)?findElements(e,[s],r,c):filterElements(e,[s],r):getChildren$1(e).filter(isTag)).slice(0,c);let d=filterByPosition(a.name,u,a.data,r);if(0===d.length||t.length===o+1)return d;const p=t.slice(o+1),h=p.some(isTraversal$1);if(h){if(isTraversal$1(p[0])){const{type:e}=p[0];e!==SelectorType.Sibling&&e!==SelectorType.Adjacent||(d=prepareContext(d,DomUtils,!0)),p.unshift(UNIVERSAL_SELECTOR)}r={...r,relativeSelector:!1,rootFunc:e=>d.includes(e)}}else r.rootFunc&&r.rootFunc!==boolbaseExports.trueFunc&&(r={...r,rootFunc:boolbaseExports.trueFunc});return p.some(isFilter)?findFilterElements(d,p,r,!1,i):h?findElements(d,[p],r,i):filterElements(d,[p],r)}function findElements(e,t,r,n){return find$2(e,_compileToken(t,r,e),n)}function find$2(e,t,r=1/0){return find$3(e=>isTag(e)&&t(e),prepareContext(e,DomUtils,t.shouldTestNextSiblings),!0,r)}function filterElements(e,t,r){const n=(Array.isArray(e)?e:[e]).filter(isTag);if(0===n.length)return n;const i=_compileToken(t,r);return i===boolbaseExports.trueFunc?n:n.filter(i)}const reSiblingSelector=/^\s*[+~]/;function find$1(e){if(!e)return this._make([]);if("string"!=typeof e){const t=isCheerio(e)?e.toArray():[e],r=this.toArray();return this._make(t.filter(e=>r.some(t=>contains$1(t,e))))}return this._findBySelector(e,Number.POSITIVE_INFINITY)}function _findBySelector(e,t){var r;const n=this.toArray(),i=reSiblingSelector.test(e)?n:this.children().toArray(),o={context:n,root:null===(r=this._root)||void 0===r?void 0:r[0],xmlMode:this.options.xmlMode,lowerCaseTags:this.options.lowerCaseTags,lowerCaseAttributeNames:this.options.lowerCaseAttributeNames,pseudos:this.options.pseudos,quirksMode:this.options.quirksMode};return this._make(select(e,i,o,t))}function _getMatcher(e){return function(t,...r){return function(n){var i;let o=e(t,this);return n&&(o=filterArray(o,n,this.options.xmlMode,null===(i=this._root)||void 0===i?void 0:i[0])),this._make(this.length>1&&o.length>1?r.reduce((e,t)=>t(e),o):o)}}}const _matcher=_getMatcher((e,t)=>{let r=[];for(let n=0;n<t.length;n++){const i=e(t[n]);i.length>0&&(r=r.concat(i))}return r}),_singleMatcher=_getMatcher((e,t)=>{const r=[];for(let n=0;n<t.length;n++){const i=e(t[n]);null!==i&&r.push(i)}return r});function _matchUntil(e,...t){let r=null;const n=_getMatcher((e,t)=>{const n=[];return domEach(t,t=>{for(let i;(i=e(t))&&!(null==r?void 0:r(i,n.length));t=i)n.push(i)}),n})(e,...t);return function(e,t){r="string"==typeof e?t=>is$1(t,e,this.options):e?getFilterFn(e):null;const i=n.call(this,t);return r=null,i}}function _removeDuplicates(e){return e.length>1?Array.from(new Set(e)):e}const parent=_singleMatcher(({parent:e})=>e&&!isDocument(e)?e:null,_removeDuplicates),parents=_matcher(e=>{const t=[];for(;e.parent&&!isDocument(e.parent);)t.push(e.parent),e=e.parent;return t},uniqueSort,e=>e.reverse()),parentsUntil=_matchUntil(({parent:e})=>e&&!isDocument(e)?e:null,uniqueSort,e=>e.reverse());function closest(e){var t;const r=[];if(!e)return this._make(r);const n={xmlMode:this.options.xmlMode,root:null===(t=this._root)||void 0===t?void 0:t[0]},i="string"==typeof e?t=>is$1(t,e,n):getFilterFn(e);return domEach(this,e=>{for(!e||isDocument(e)||isTag(e)||(e=e.parent);e&&isTag(e);){if(i(e,0)){r.includes(e)||r.push(e);break}e=e.parent}}),this._make(r)}const next=_singleMatcher(e=>nextElementSibling(e)),nextAll=_matcher(e=>{const t=[];for(;e.next;)isTag(e=e.next)&&t.push(e);return t},_removeDuplicates),nextUntil=_matchUntil(e=>nextElementSibling(e),_removeDuplicates),prev=_singleMatcher(e=>prevElementSibling(e)),prevAll=_matcher(e=>{const t=[];for(;e.prev;)isTag(e=e.prev)&&t.push(e);return t},_removeDuplicates),prevUntil=_matchUntil(e=>prevElementSibling(e),_removeDuplicates),siblings=_matcher(e=>getSiblings(e).filter(t=>isTag(t)&&t!==e),uniqueSort),children=_matcher(e=>getChildren$1(e).filter(isTag),_removeDuplicates);function contents(){const e=this.toArray().reduce((e,t)=>hasChildren(t)?e.concat(t.children):e,[]);return this._make(e)}function each(e){let t=0;const r=this.length;for(;t<r&&!1!==e.call(this[t],t,this[t]);)++t;return this}function map(e){let t=[];for(let r=0;r<this.length;r++){const n=this[r],i=e.call(n,r,n);null!=i&&(t=t.concat(i))}return this._make(t)}function getFilterFn(e){return"function"==typeof e?(t,r)=>e.call(t,r,t):isCheerio(e)?t=>Array.prototype.includes.call(e,t):function(t){return e===t}}function filter(e){var t;return this._make(filterArray(this.toArray(),e,this.options.xmlMode,null===(t=this._root)||void 0===t?void 0:t[0]))}function filterArray(e,t,r,n){return"string"==typeof t?filter$1(t,e,{xmlMode:r,root:n}):e.filter(getFilterFn(t))}function is(e){const t=this.toArray();return"string"==typeof e?some(t.filter(isTag),e,this.options):!!e&&t.some(getFilterFn(e))}function not(e){let t=this.toArray();if("string"==typeof e){const r=new Set(filter$1(e,t,this.options));t=t.filter(e=>!r.has(e))}else{const r=getFilterFn(e);t=t.filter((e,t)=>!r(e,t))}return this._make(t)}function has(e){return this.filter("string"==typeof e?`:has(${e})`:(t,r)=>this._make(r).find(e).length>0)}function first(){return this.length>1?this._make(this[0]):this}function last(){return this.length>0?this._make(this[this.length-1]):this}function eq(e){var t;return 0===(e=+e)&&this.length<=1?this:(e<0&&(e=this.length+e),this._make(null!==(t=this[e])&&void 0!==t?t:[]))}function get$1(e){return null==e?this.toArray():this[e<0?this.length+e:e]}function toArray(){return Array.prototype.slice.call(this)}function index(e){let t,r;return null==e?(t=this.parent().children(),r=this[0]):"string"==typeof e?(t=this._make(e),r=this[0]):(t=this,r=isCheerio(e)?e[0]:e),Array.prototype.indexOf.call(t,r)}function slice(e,t){return this._make(Array.prototype.slice.call(this,e,t))}function end(){var e;return null!==(e=this.prevObject)&&void 0!==e?e:this._make([])}function add$1(e,t){const r=this._make(e,t),n=uniqueSort([...this.get(),...r.get()]);return this._make(n)}function addBack(e){return this.prevObject?this.add(e?this.prevObject.filter(e):this.prevObject):this}const Traversing=Object.freeze(Object.defineProperty({__proto__:null,_findBySelector:_findBySelector,add:add$1,addBack:addBack,children:children,closest:closest,contents:contents,each:each,end:end,eq:eq,filter:filter,filterArray:filterArray,find:find$1,first:first,get:get$1,has:has,index:index,is:is,last:last,map:map,next:next,nextAll:nextAll,nextUntil:nextUntil,not:not,parent:parent,parents:parents,parentsUntil:parentsUntil,prev:prev,prevAll:prevAll,prevUntil:prevUntil,siblings:siblings,slice:slice,toArray:toArray},Symbol.toStringTag,{value:"Module"}));function getParse(e){return function(t,r,n,i){if("undefined"!=typeof Buffer&&Buffer.isBuffer(t)&&(t=t.toString()),"string"==typeof t)return e(t,r,n,i);const o=t;if(!Array.isArray(o)&&isDocument(o))return o;const s=new Document([]);return update$1(o,s),s}}function update$1(e,t){const r=Array.isArray(e)?e:[e];t?t.children=r:t=null;for(let n=0;n<r.length;n++){const e=r[n];e.parent&&e.parent.children!==r&&removeElement(e),t?(e.prev=r[n-1]||null,e.next=r[n+1]||null):e.prev=e.next=null,e.parent=t}return t}function _makeDomArray(e,t){if(null==e)return[];if("string"==typeof e)return this._parse(e,this.options,!1,null).children.slice(0);if("length"in e){if(1===e.length)return this._makeDomArray(e[0],t);const r=[];for(let n=0;n<e.length;n++){const i=e[n];if("object"==typeof i){if(null==i)continue;if(!("length"in i)){r.push(t?cloneNode(i,!0):i);continue}}r.push(...this._makeDomArray(i,t))}return r}return[t?cloneNode(e,!0):e]}function _insert(e){return function(...t){const r=this.length-1;return domEach(this,(n,i)=>{if(!hasChildren(n))return;const o="function"==typeof t[0]?t[0].call(n,i,this._render(n.children)):t,s=this._makeDomArray(o,i<r);e(s,n.children,n)})}}function uniqueSplice(e,t,r,n,i){var o,s;const a=[t,r,...n],l=0===t?null:e[t-1],c=t+r>=e.length?null:e[t+r];for(let u=0;u<n.length;++u){const e=n[u],r=e.parent;if(r){const n=r.children.indexOf(e);-1!==n&&(r.children.splice(n,1),i===r&&t>n&&a[0]--)}e.parent=i,e.prev&&(e.prev.next=null!==(o=e.next)&&void 0!==o?o:null),e.next&&(e.next.prev=null!==(s=e.prev)&&void 0!==s?s:null),e.prev=0===u?l:n[u-1],e.next=u===n.length-1?c:n[u+1]}return l&&(l.next=n[0]),c&&(c.prev=n[n.length-1]),e.splice(...a)}function appendTo(e){return(isCheerio(e)?e:this._make(e)).append(this),this}function prependTo(e){return(isCheerio(e)?e:this._make(e)).prepend(this),this}const append=_insert((e,t,r)=>{uniqueSplice(t,t.length,0,e,r)}),prepend=_insert((e,t,r)=>{uniqueSplice(t,0,0,e,r)});function _wrap(e){return function(t){const r=this.length-1,n=this.parents().last();for(let i=0;i<this.length;i++){const o=this[i],s="function"==typeof t?t.call(o,i,o):"string"!=typeof t||isHtml(t)?t:n.find(t).clone(),[a]=this._makeDomArray(s,i<r);if(!a||!hasChildren(a))continue;let l=a,c=0;for(;c<l.children.length;){const e=l.children[c];isTag(e)?(l=e,c=0):c++}e(o,l,[a])}return this}}const wrap=_wrap((e,t,r)=>{const{parent:n}=e;if(!n)return;const i=n.children,o=i.indexOf(e);update$1([e],t),uniqueSplice(i,o,0,r,n)}),wrapInner=_wrap((e,t,r)=>{hasChildren(e)&&(update$1(e.children,t),update$1(r,e))});function unwrap(e){return this.parent(e).not("body").each((e,t)=>{this._make(t).replaceWith(t.children)}),this}function wrapAll(e){const t=this[0];if(t){const r=this._make("function"==typeof e?e.call(t,0,t):e).insertBefore(t);let n;for(let e=0;e<r.length;e++)r[e].type===Tag$1&&(n=r[e]);let i=0;for(;n&&i<n.children.length;){const e=n.children[i];e.type===Tag$1?(n=e,i=0):i++}n&&this._make(n).append(this)}return this}function after(...e){const t=this.length-1;return domEach(this,(r,n)=>{if(!hasChildren(r)||!r.parent)return;const i=r.parent.children,o=i.indexOf(r);if(-1===o)return;const s="function"==typeof e[0]?e[0].call(r,n,this._render(r.children)):e;uniqueSplice(i,o+1,0,this._makeDomArray(s,n<t),r.parent)})}function insertAfter(e){"string"==typeof e&&(e=this._make(e)),this.remove();const t=[];for(const r of this._makeDomArray(e)){const e=this.clone().toArray(),{parent:n}=r;if(!n)continue;const i=n.children,o=i.indexOf(r);-1!==o&&(uniqueSplice(i,o+1,0,e,n),t.push(...e))}return this._make(t)}function before(...e){const t=this.length-1;return domEach(this,(r,n)=>{if(!hasChildren(r)||!r.parent)return;const i=r.parent.children,o=i.indexOf(r);if(-1===o)return;const s="function"==typeof e[0]?e[0].call(r,n,this._render(r.children)):e;uniqueSplice(i,o,0,this._makeDomArray(s,n<t),r.parent)})}function insertBefore(e){const t=this._make(e);this.remove();const r=[];return domEach(t,e=>{const t=this.clone().toArray(),{parent:n}=e;if(!n)return;const i=n.children,o=i.indexOf(e);-1!==o&&(uniqueSplice(i,o,0,t,n),r.push(...t))}),this._make(r)}function remove$5(e){return domEach(e?this.filter(e):this,e=>{removeElement(e),e.prev=e.next=e.parent=null}),this}function replaceWith(e){return domEach(this,(t,r)=>{const{parent:n}=t;if(!n)return;const i=n.children,o="function"==typeof e?e.call(t,r,t):e,s=this._makeDomArray(o);update$1(s,null);const a=i.indexOf(t);uniqueSplice(i,a,1,s,n),s.includes(t)||(t.parent=t.prev=t.next=null)})}function empty$1(){return domEach(this,e=>{if(hasChildren(e)){for(const t of e.children)t.next=t.prev=t.parent=null;e.children.length=0}})}function html$3(e){if(void 0===e){const e=this[0];return e&&hasChildren(e)?this._render(e.children):null}return domEach(this,t=>{if(hasChildren(t)){for(const e of t.children)e.next=e.prev=e.parent=null;update$1(isCheerio(e)?e.toArray():this._parse(`${e}`,this.options,!1,t).children,t)}})}function toString(){return this._render(this)}function text$4(e){return void 0===e?text$5(this):domEach(this,"function"==typeof e?(t,r)=>this._make(t).text(e.call(t,r,text$5([t]))):t=>{if(hasChildren(t)){for(const e of t.children)e.next=e.prev=e.parent=null;update$1(new Text$1(`${e}`),t)}})}function clone(){const e=Array.prototype.map.call(this.get(),e=>cloneNode(e,!0)),t=new Document(e);for(const r of e)r.parent=t;return this._make(e)}const Manipulation=Object.freeze(Object.defineProperty({__proto__:null,_makeDomArray:_makeDomArray,after:after,append:append,appendTo:appendTo,before:before,clone:clone,empty:empty$1,html:html$3,insertAfter:insertAfter,insertBefore:insertBefore,prepend:prepend,prependTo:prependTo,remove:remove$5,replaceWith:replaceWith,text:text$4,toString:toString,unwrap:unwrap,wrap:wrap,wrapAll:wrapAll,wrapInner:wrapInner},Symbol.toStringTag,{value:"Module"}));function css$2(e,t){return null!=e&&null!=t||"object"==typeof e&&!Array.isArray(e)?domEach(this,(r,n)=>{isTag(r)&&setCss(r,e,t,n)}):0!==this.length?getCss(this[0],e):void 0}function setCss(e,t,r,n){if("string"==typeof t){const i=getCss(e),o="function"==typeof r?r.call(e,n,i[t]):r;""===o?delete i[t]:null!=o&&(i[t]=o),e.attribs.style=stringify$1(i)}else if("object"==typeof t){const r=Object.keys(t);for(let n=0;n<r.length;n++){const i=r[n];setCss(e,i,t[i],n)}}}function getCss(e,t){if(!e||!isTag(e))return;const r=parse$4(e.attribs.style);if("string"==typeof t)return r[t];if(Array.isArray(t)){const e={};for(const n of t)null!=r[n]&&(e[n]=r[n]);return e}return r}function stringify$1(e){return Object.keys(e).reduce((t,r)=>`${t}${t?" ":""}${r}: ${e[r]};`,"")}function parse$4(e){if(!(e=(e||"").trim()))return{};const t={};let r;for(const n of e.split(";")){const e=n.indexOf(":");if(e<1||e===n.length-1){const e=n.trimEnd();e.length>0&&void 0!==r&&(t[r]+=`;${e}`)}else r=n.slice(0,e).trim(),t[r]=n.slice(e+1).trim()}return t}const Css=Object.freeze(Object.defineProperty({__proto__:null,css:css$2},Symbol.toStringTag,{value:"Module"})),submittableSelector="input,select,textarea,keygen",r20=/%20/g,rCRLF=/\r?\n/g;function serialize(){return this.serializeArray().map(e=>`${encodeURIComponent(e.name)}=${encodeURIComponent(e.value)}`).join("&").replace(r20,"+")}function serializeArray(){return this.map((e,t)=>{const r=this._make(t);return isTag(t)&&"form"===t.name?r.find(submittableSelector).toArray():r.filter(submittableSelector).toArray()}).filter('[name!=""]:enabled:not(:submit, :button, :image, :reset, :file):matches([checked], :not(:checkbox, :radio))').map((e,t)=>{var r;const n=this._make(t),i=n.attr("name"),o=null!==(r=n.val())&&void 0!==r?r:"";return Array.isArray(o)?o.map(e=>({name:i,value:e.replace(rCRLF,"\r\n")})):{name:i,value:o.replace(rCRLF,"\r\n")}}).toArray()}const Forms=Object.freeze(Object.defineProperty({__proto__:null,serialize:serialize,serializeArray:serializeArray},Symbol.toStringTag,{value:"Module"}));function getExtractDescr(e){var t;return"string"==typeof e?{selector:e,value:"textContent"}:{selector:e.selector,value:null!==(t=e.value)&&void 0!==t?t:"textContent"}}function extract(e){const t={};for(const r in e){const n=e[r],i=Array.isArray(n),{selector:o,value:s}=getExtractDescr(i?n[0]:n),a="function"==typeof s?s:"string"==typeof s?e=>this._make(e).prop(s):e=>this._make(e).extract(s);if(i)t[r]=this._findBySelector(o,Number.POSITIVE_INFINITY).map((e,n)=>a(n,r,t)).get();else{const e=this._findBySelector(o,1);t[r]=e.length>0?a(e[0],r,t):void 0}}return t}const Extract=Object.freeze(Object.defineProperty({__proto__:null,extract:extract},Symbol.toStringTag,{value:"Module"}));class Cheerio{constructor(e,t,r){if(this.length=0,this.options=r,this._root=t,e){for(let t=0;t<e.length;t++)this[t]=e[t];this.length=e.length}}}function getLoad(e,t){return function r(n,i,o=!0){if(null==n)throw new Error("cheerio.load() expects a string");const s=flattenOptions(i),a=e(n,s,o,null);class l extends Cheerio{_make(e,t){const r=c(e,t);return r.prevObject=this,r}_parse(t,r,n,i){return e(t,r,n,i)}_render(e){return t(e,this.options)}}function c(t,r,n=a,i){if(t&&isCheerio(t))return t;const o=flattenOptions(i,s),c="string"==typeof n?[e(n,o,!1,null)]:"length"in n?n:[n],u=isCheerio(c)?c:new l(c,null,o);if(u._root=u,!t)return new l(void 0,u,o);const d="string"==typeof t&&isHtml(t)?e(t,o,!1,null).children:isNode(t)?[t]:Array.isArray(t)?t:void 0,p=new l(d,u,o);if(d)return p;if("string"!=typeof t)throw new TypeError("Unexpected type of selector");let h=t;const f=r?"string"==typeof r?isHtml(r)?new l([e(r,o,!1,null)],u,o):(h=`${r} ${h}`,u):isCheerio(r)?r:new l(Array.isArray(r)?r:[r],u,o):u;return f?f.find(h):p}return Object.assign(c,staticMethods,{load:r,_root:a,_options:s,fn:l.prototype,prototype:l.prototype}),c}}function isNode(e){return!!e.name||e.type===Root$2||e.type===Text$2||e.type===Comment$1}Cheerio.prototype.cheerio="[cheerio object]",Cheerio.prototype.splice=Array.prototype.splice,Cheerio.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],Object.assign(Cheerio.prototype,Attributes,Traversing,Manipulation,Css,Forms,Extract);const UNDEFINED_CODE_POINTS=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),REPLACEMENT_CHARACTER="";var CODE_POINTS,CODE_POINTS2;CODE_POINTS2=CODE_POINTS||(CODE_POINTS={}),CODE_POINTS2[CODE_POINTS2.EOF=-1]="EOF",CODE_POINTS2[CODE_POINTS2.NULL=0]="NULL",CODE_POINTS2[CODE_POINTS2.TABULATION=9]="TABULATION",CODE_POINTS2[CODE_POINTS2.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",CODE_POINTS2[CODE_POINTS2.LINE_FEED=10]="LINE_FEED",CODE_POINTS2[CODE_POINTS2.FORM_FEED=12]="FORM_FEED",CODE_POINTS2[CODE_POINTS2.SPACE=32]="SPACE",CODE_POINTS2[CODE_POINTS2.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",CODE_POINTS2[CODE_POINTS2.QUOTATION_MARK=34]="QUOTATION_MARK",CODE_POINTS2[CODE_POINTS2.AMPERSAND=38]="AMPERSAND",CODE_POINTS2[CODE_POINTS2.APOSTROPHE=39]="APOSTROPHE",CODE_POINTS2[CODE_POINTS2.HYPHEN_MINUS=45]="HYPHEN_MINUS",CODE_POINTS2[CODE_POINTS2.SOLIDUS=47]="SOLIDUS",CODE_POINTS2[CODE_POINTS2.DIGIT_0=48]="DIGIT_0",CODE_POINTS2[CODE_POINTS2.DIGIT_9=57]="DIGIT_9",CODE_POINTS2[CODE_POINTS2.SEMICOLON=59]="SEMICOLON",CODE_POINTS2[CODE_POINTS2.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",CODE_POINTS2[CODE_POINTS2.EQUALS_SIGN=61]="EQUALS_SIGN",CODE_POINTS2[CODE_POINTS2.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",CODE_POINTS2[CODE_POINTS2.QUESTION_MARK=63]="QUESTION_MARK",CODE_POINTS2[CODE_POINTS2.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",CODE_POINTS2[CODE_POINTS2.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",CODE_POINTS2[CODE_POINTS2.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",CODE_POINTS2[CODE_POINTS2.GRAVE_ACCENT=96]="GRAVE_ACCENT",CODE_POINTS2[CODE_POINTS2.LATIN_SMALL_A=97]="LATIN_SMALL_A",CODE_POINTS2[CODE_POINTS2.LATIN_SMALL_Z=122]="LATIN_SMALL_Z";const SEQUENCES={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function isSurrogate(e){return e>=55296&&e<=57343}function isSurrogatePair(e){return e>=56320&&e<=57343}function getSurrogatePairCodePoint(e,t){return 1024*(e-55296)+9216+t}function isControlCodePoint(e){return 32!==e&&10!==e&&13!==e&&9!==e&&12!==e&&e>=1&&e<=31||e>=127&&e<=159}function isUndefinedCodePoint(e){return e>=64976&&e<=65007||UNDEFINED_CODE_POINTS.has(e)}var ERR,ERR2;ERR2=ERR||(ERR={}),ERR2.controlCharacterInInputStream="control-character-in-input-stream",ERR2.noncharacterInInputStream="noncharacter-in-input-stream",ERR2.surrogateInInputStream="surrogate-in-input-stream",ERR2.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",ERR2.endTagWithAttributes="end-tag-with-attributes",ERR2.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",ERR2.unexpectedSolidusInTag="unexpected-solidus-in-tag",ERR2.unexpectedNullCharacter="unexpected-null-character",ERR2.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",ERR2.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",ERR2.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",ERR2.missingEndTagName="missing-end-tag-name",ERR2.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",ERR2.unknownNamedCharacterReference="unknown-named-character-reference",ERR2.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",ERR2.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",ERR2.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",ERR2.eofBeforeTagName="eof-before-tag-name",ERR2.eofInTag="eof-in-tag",ERR2.missingAttributeValue="missing-attribute-value",ERR2.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",ERR2.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",ERR2.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",ERR2.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",ERR2.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",ERR2.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",ERR2.missingDoctypePublicIdentifier="missing-doctype-public-identifier",ERR2.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",ERR2.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",ERR2.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",ERR2.cdataInHtmlContent="cdata-in-html-content",ERR2.incorrectlyOpenedComment="incorrectly-opened-comment",ERR2.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",ERR2.eofInDoctype="eof-in-doctype",ERR2.nestedComment="nested-comment",ERR2.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",ERR2.eofInComment="eof-in-comment",ERR2.incorrectlyClosedComment="incorrectly-closed-comment",ERR2.eofInCdata="eof-in-cdata",ERR2.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",ERR2.nullCharacterReference="null-character-reference",ERR2.surrogateCharacterReference="surrogate-character-reference",ERR2.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",ERR2.controlCharacterReference="control-character-reference",ERR2.noncharacterCharacterReference="noncharacter-character-reference",ERR2.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",ERR2.missingDoctypeName="missing-doctype-name",ERR2.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",ERR2.duplicateAttribute="duplicate-attribute",ERR2.nonConformingDoctype="non-conforming-doctype",ERR2.missingDoctype="missing-doctype",ERR2.misplacedDoctype="misplaced-doctype",ERR2.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",ERR2.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",ERR2.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",ERR2.openElementsLeftAfterEof="open-elements-left-after-eof",ERR2.abandonedHeadElementChild="abandoned-head-element-child",ERR2.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",ERR2.nestedNoscriptInHead="nested-noscript-in-head",ERR2.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text";const DEFAULT_BUFFER_WATERLINE=65536;class Preprocessor{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=DEFAULT_BUFFER_WATERLINE,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+Number(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,t){const{line:r,col:n,offset:i}=this,o=n+t,s=i+t;return{code:e,startLine:r,endLine:r,startCol:o,endCol:o,startOffset:s,endOffset:s}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const t=this.html.charCodeAt(this.pos+1);if(isSurrogatePair(t))return this.pos++,this._addGap(),getSurrogatePairCodePoint(e,t)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,CODE_POINTS.EOF;return this._err(ERR.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,t){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=t}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,t){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(t)return this.html.startsWith(e,this.pos);for(let r=0;r<e.length;r++)if((32|this.html.charCodeAt(this.pos+r))!==e.charCodeAt(r))return!1;return!0}peek(e){const t=this.pos+e;if(t>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,CODE_POINTS.EOF;const r=this.html.charCodeAt(t);return r===CODE_POINTS.CARRIAGE_RETURN?CODE_POINTS.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,CODE_POINTS.EOF;let e=this.html.charCodeAt(this.pos);return e===CODE_POINTS.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,CODE_POINTS.LINE_FEED):e===CODE_POINTS.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,isSurrogate(e)&&(e=this._processSurrogate(e)),null===this.handler.onParseError||e>31&&e<127||e===CODE_POINTS.LINE_FEED||e===CODE_POINTS.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){isControlCodePoint(e)?this._err(ERR.controlCharacterInInputStream):isUndefinedCodePoint(e)&&this._err(ERR.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var TokenType;function getTokenAttr(e,t){for(let r=e.attrs.length-1;r>=0;r--)if(e.attrs[r].name===t)return e.attrs[r].value;return null}!function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"}(TokenType||(TokenType={}));const htmlDecodeTree=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),decodeMap=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function replaceCodePoint(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=decodeMap.get(e))&&void 0!==t?t:e}var CharCodes;!function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"}(CharCodes||(CharCodes={}));const TO_LOWER_BIT=32;var BinTrieFlags,EntityDecoderState,DecodingMode,NS,NS2,ATTRS,ATTRS2,DOCUMENT_MODE,DOCUMENT_MODE2,TAG_NAMES,TAG_NAMES2,TAG_ID,TAG_ID2;function isNumber$2(e){return e>=CharCodes.ZERO&&e<=CharCodes.NINE}function isHexadecimalCharacter(e){return e>=CharCodes.UPPER_A&&e<=CharCodes.UPPER_F||e>=CharCodes.LOWER_A&&e<=CharCodes.LOWER_F}function isAsciiAlphaNumeric$1(e){return e>=CharCodes.UPPER_A&&e<=CharCodes.UPPER_Z||e>=CharCodes.LOWER_A&&e<=CharCodes.LOWER_Z||isNumber$2(e)}function isEntityInAttributeInvalidEnd(e){return e===CharCodes.EQUALS||isAsciiAlphaNumeric$1(e)}!function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(BinTrieFlags||(BinTrieFlags={})),function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(EntityDecoderState||(EntityDecoderState={})),function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"}(DecodingMode||(DecodingMode={}));class EntityDecoder{constructor(e,t,r){this.decodeTree=e,this.emitCodePoint=t,this.errors=r,this.state=EntityDecoderState.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=DecodingMode.Strict}startEntity(e){this.decodeMode=e,this.state=EntityDecoderState.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case EntityDecoderState.EntityStart:return e.charCodeAt(t)===CharCodes.NUM?(this.state=EntityDecoderState.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=EntityDecoderState.NamedEntity,this.stateNamedEntity(e,t));case EntityDecoderState.NumericStart:return this.stateNumericStart(e,t);case EntityDecoderState.NumericDecimal:return this.stateNumericDecimal(e,t);case EntityDecoderState.NumericHex:return this.stateNumericHex(e,t);case EntityDecoderState.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(e.charCodeAt(t)|TO_LOWER_BIT)===CharCodes.LOWER_X?(this.state=EntityDecoderState.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=EntityDecoderState.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,r,n){if(t!==r){const i=r-t;this.result=this.result*Math.pow(n,i)+Number.parseInt(e.substr(t,i),n),this.consumed+=i}}stateNumericHex(e,t){const r=t;for(;t<e.length;){const n=e.charCodeAt(t);if(!isNumber$2(n)&&!isHexadecimalCharacter(n))return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(n,3);t+=1}return this.addToNumericResult(e,r,t,16),-1}stateNumericDecimal(e,t){const r=t;for(;t<e.length;){const n=e.charCodeAt(t);if(!isNumber$2(n))return this.addToNumericResult(e,r,t,10),this.emitNumericEntity(n,2);t+=1}return this.addToNumericResult(e,r,t,10),-1}emitNumericEntity(e,t){var r;if(this.consumed<=t)return null===(r=this.errors)||void 0===r||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===CharCodes.SEMI)this.consumed+=1;else if(this.decodeMode===DecodingMode.Strict)return 0;return this.emitCodePoint(replaceCodePoint(this.result),this.consumed),this.errors&&(e!==CharCodes.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:r}=this;let n=r[this.treeIndex],i=(n&BinTrieFlags.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const o=e.charCodeAt(t);if(this.treeIndex=determineBranch(r,n,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return 0===this.result||this.decodeMode===DecodingMode.Attribute&&(0===i||isEntityInAttributeInvalidEnd(o))?0:this.emitNotTerminatedNamedEntity();if(n=r[this.treeIndex],i=(n&BinTrieFlags.VALUE_LENGTH)>>14,0!==i){if(o===CharCodes.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==DecodingMode.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:r}=this,n=(r[t]&BinTrieFlags.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,n,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,r){const{decodeTree:n}=this;return this.emitCodePoint(1===t?n[e]&~BinTrieFlags.VALUE_LENGTH:n[e+1],r),3===t&&this.emitCodePoint(n[e+2],r),r}end(){var e;switch(this.state){case EntityDecoderState.NamedEntity:return 0===this.result||this.decodeMode===DecodingMode.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case EntityDecoderState.NumericDecimal:return this.emitNumericEntity(0,2);case EntityDecoderState.NumericHex:return this.emitNumericEntity(0,3);case EntityDecoderState.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case EntityDecoderState.EntityStart:return 0}}}function determineBranch(e,t,r,n){const i=(t&BinTrieFlags.BRANCH_LENGTH)>>7,o=t&BinTrieFlags.JUMP_TABLE;if(0===i)return 0!==o&&n===o?r:-1;if(o){const t=n-o;return t<0||t>=i?-1:e[r+t]-1}let s=r,a=s+i-1;for(;s<=a;){const t=s+a>>>1,r=e[t];if(r<n)s=t+1;else{if(!(r>n))return e[t+i];a=t-1}}return-1}NS2=NS||(NS={}),NS2.HTML="http://www.w3.org/1999/xhtml",NS2.MATHML="http://www.w3.org/1998/Math/MathML",NS2.SVG="http://www.w3.org/2000/svg",NS2.XLINK="http://www.w3.org/1999/xlink",NS2.XML="http://www.w3.org/XML/1998/namespace",NS2.XMLNS="http://www.w3.org/2000/xmlns/",ATTRS2=ATTRS||(ATTRS={}),ATTRS2.TYPE="type",ATTRS2.ACTION="action",ATTRS2.ENCODING="encoding",ATTRS2.PROMPT="prompt",ATTRS2.NAME="name",ATTRS2.COLOR="color",ATTRS2.FACE="face",ATTRS2.SIZE="size",DOCUMENT_MODE2=DOCUMENT_MODE||(DOCUMENT_MODE={}),DOCUMENT_MODE2.NO_QUIRKS="no-quirks",DOCUMENT_MODE2.QUIRKS="quirks",DOCUMENT_MODE2.LIMITED_QUIRKS="limited-quirks",TAG_NAMES2=TAG_NAMES||(TAG_NAMES={}),TAG_NAMES2.A="a",TAG_NAMES2.ADDRESS="address",TAG_NAMES2.ANNOTATION_XML="annotation-xml",TAG_NAMES2.APPLET="applet",TAG_NAMES2.AREA="area",TAG_NAMES2.ARTICLE="article",TAG_NAMES2.ASIDE="aside",TAG_NAMES2.B="b",TAG_NAMES2.BASE="base",TAG_NAMES2.BASEFONT="basefont",TAG_NAMES2.BGSOUND="bgsound",TAG_NAMES2.BIG="big",TAG_NAMES2.BLOCKQUOTE="blockquote",TAG_NAMES2.BODY="body",TAG_NAMES2.BR="br",TAG_NAMES2.BUTTON="button",TAG_NAMES2.CAPTION="caption",TAG_NAMES2.CENTER="center",TAG_NAMES2.CODE="code",TAG_NAMES2.COL="col",TAG_NAMES2.COLGROUP="colgroup",TAG_NAMES2.DD="dd",TAG_NAMES2.DESC="desc",TAG_NAMES2.DETAILS="details",TAG_NAMES2.DIALOG="dialog",TAG_NAMES2.DIR="dir",TAG_NAMES2.DIV="div",TAG_NAMES2.DL="dl",TAG_NAMES2.DT="dt",TAG_NAMES2.EM="em",TAG_NAMES2.EMBED="embed",TAG_NAMES2.FIELDSET="fieldset",TAG_NAMES2.FIGCAPTION="figcaption",TAG_NAMES2.FIGURE="figure",TAG_NAMES2.FONT="font",TAG_NAMES2.FOOTER="footer",TAG_NAMES2.FOREIGN_OBJECT="foreignObject",TAG_NAMES2.FORM="form",TAG_NAMES2.FRAME="frame",TAG_NAMES2.FRAMESET="frameset",TAG_NAMES2.H1="h1",TAG_NAMES2.H2="h2",TAG_NAMES2.H3="h3",TAG_NAMES2.H4="h4",TAG_NAMES2.H5="h5",TAG_NAMES2.H6="h6",TAG_NAMES2.HEAD="head",TAG_NAMES2.HEADER="header",TAG_NAMES2.HGROUP="hgroup",TAG_NAMES2.HR="hr",TAG_NAMES2.HTML="html",TAG_NAMES2.I="i",TAG_NAMES2.IMG="img",TAG_NAMES2.IMAGE="image",TAG_NAMES2.INPUT="input",TAG_NAMES2.IFRAME="iframe",TAG_NAMES2.KEYGEN="keygen",TAG_NAMES2.LABEL="label",TAG_NAMES2.LI="li",TAG_NAMES2.LINK="link",TAG_NAMES2.LISTING="listing",TAG_NAMES2.MAIN="main",TAG_NAMES2.MALIGNMARK="malignmark",TAG_NAMES2.MARQUEE="marquee",TAG_NAMES2.MATH="math",TAG_NAMES2.MENU="menu",TAG_NAMES2.META="meta",TAG_NAMES2.MGLYPH="mglyph",TAG_NAMES2.MI="mi",TAG_NAMES2.MO="mo",TAG_NAMES2.MN="mn",TAG_NAMES2.MS="ms",TAG_NAMES2.MTEXT="mtext",TAG_NAMES2.NAV="nav",TAG_NAMES2.NOBR="nobr",TAG_NAMES2.NOFRAMES="noframes",TAG_NAMES2.NOEMBED="noembed",TAG_NAMES2.NOSCRIPT="noscript",TAG_NAMES2.OBJECT="object",TAG_NAMES2.OL="ol",TAG_NAMES2.OPTGROUP="optgroup",TAG_NAMES2.OPTION="option",TAG_NAMES2.P="p",TAG_NAMES2.PARAM="param",TAG_NAMES2.PLAINTEXT="plaintext",TAG_NAMES2.PRE="pre",TAG_NAMES2.RB="rb",TAG_NAMES2.RP="rp",TAG_NAMES2.RT="rt",TAG_NAMES2.RTC="rtc",TAG_NAMES2.RUBY="ruby",TAG_NAMES2.S="s",TAG_NAMES2.SCRIPT="script",TAG_NAMES2.SEARCH="search",TAG_NAMES2.SECTION="section",TAG_NAMES2.SELECT="select",TAG_NAMES2.SOURCE="source",TAG_NAMES2.SMALL="small",TAG_NAMES2.SPAN="span",TAG_NAMES2.STRIKE="strike",TAG_NAMES2.STRONG="strong",TAG_NAMES2.STYLE="style",TAG_NAMES2.SUB="sub",TAG_NAMES2.SUMMARY="summary",TAG_NAMES2.SUP="sup",TAG_NAMES2.TABLE="table",TAG_NAMES2.TBODY="tbody",TAG_NAMES2.TEMPLATE="template",TAG_NAMES2.TEXTAREA="textarea",TAG_NAMES2.TFOOT="tfoot",TAG_NAMES2.TD="td",TAG_NAMES2.TH="th",TAG_NAMES2.THEAD="thead",TAG_NAMES2.TITLE="title",TAG_NAMES2.TR="tr",TAG_NAMES2.TRACK="track",TAG_NAMES2.TT="tt",TAG_NAMES2.U="u",TAG_NAMES2.UL="ul",TAG_NAMES2.SVG="svg",TAG_NAMES2.VAR="var",TAG_NAMES2.WBR="wbr",TAG_NAMES2.XMP="xmp",TAG_ID2=TAG_ID||(TAG_ID={}),TAG_ID2[TAG_ID2.UNKNOWN=0]="UNKNOWN",TAG_ID2[TAG_ID2.A=1]="A",TAG_ID2[TAG_ID2.ADDRESS=2]="ADDRESS",TAG_ID2[TAG_ID2.ANNOTATION_XML=3]="ANNOTATION_XML",TAG_ID2[TAG_ID2.APPLET=4]="APPLET",TAG_ID2[TAG_ID2.AREA=5]="AREA",TAG_ID2[TAG_ID2.ARTICLE=6]="ARTICLE",TAG_ID2[TAG_ID2.ASIDE=7]="ASIDE",TAG_ID2[TAG_ID2.B=8]="B",TAG_ID2[TAG_ID2.BASE=9]="BASE",TAG_ID2[TAG_ID2.BASEFONT=10]="BASEFONT",TAG_ID2[TAG_ID2.BGSOUND=11]="BGSOUND",TAG_ID2[TAG_ID2.BIG=12]="BIG",TAG_ID2[TAG_ID2.BLOCKQUOTE=13]="BLOCKQUOTE",TAG_ID2[TAG_ID2.BODY=14]="BODY",TAG_ID2[TAG_ID2.BR=15]="BR",TAG_ID2[TAG_ID2.BUTTON=16]="BUTTON",TAG_ID2[TAG_ID2.CAPTION=17]="CAPTION",TAG_ID2[TAG_ID2.CENTER=18]="CENTER",TAG_ID2[TAG_ID2.CODE=19]="CODE",TAG_ID2[TAG_ID2.COL=20]="COL",TAG_ID2[TAG_ID2.COLGROUP=21]="COLGROUP",TAG_ID2[TAG_ID2.DD=22]="DD",TAG_ID2[TAG_ID2.DESC=23]="DESC",TAG_ID2[TAG_ID2.DETAILS=24]="DETAILS",TAG_ID2[TAG_ID2.DIALOG=25]="DIALOG",TAG_ID2[TAG_ID2.DIR=26]="DIR",TAG_ID2[TAG_ID2.DIV=27]="DIV",TAG_ID2[TAG_ID2.DL=28]="DL",TAG_ID2[TAG_ID2.DT=29]="DT",TAG_ID2[TAG_ID2.EM=30]="EM",TAG_ID2[TAG_ID2.EMBED=31]="EMBED",TAG_ID2[TAG_ID2.FIELDSET=32]="FIELDSET",TAG_ID2[TAG_ID2.FIGCAPTION=33]="FIGCAPTION",TAG_ID2[TAG_ID2.FIGURE=34]="FIGURE",TAG_ID2[TAG_ID2.FONT=35]="FONT",TAG_ID2[TAG_ID2.FOOTER=36]="FOOTER",TAG_ID2[TAG_ID2.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",TAG_ID2[TAG_ID2.FORM=38]="FORM",TAG_ID2[TAG_ID2.FRAME=39]="FRAME",TAG_ID2[TAG_ID2.FRAMESET=40]="FRAMESET",TAG_ID2[TAG_ID2.H1=41]="H1",TAG_ID2[TAG_ID2.H2=42]="H2",TAG_ID2[TAG_ID2.H3=43]="H3",TAG_ID2[TAG_ID2.H4=44]="H4",TAG_ID2[TAG_ID2.H5=45]="H5",TAG_ID2[TAG_ID2.H6=46]="H6",TAG_ID2[TAG_ID2.HEAD=47]="HEAD",TAG_ID2[TAG_ID2.HEADER=48]="HEADER",TAG_ID2[TAG_ID2.HGROUP=49]="HGROUP",TAG_ID2[TAG_ID2.HR=50]="HR",TAG_ID2[TAG_ID2.HTML=51]="HTML",TAG_ID2[TAG_ID2.I=52]="I",TAG_ID2[TAG_ID2.IMG=53]="IMG",TAG_ID2[TAG_ID2.IMAGE=54]="IMAGE",TAG_ID2[TAG_ID2.INPUT=55]="INPUT",TAG_ID2[TAG_ID2.IFRAME=56]="IFRAME",TAG_ID2[TAG_ID2.KEYGEN=57]="KEYGEN",TAG_ID2[TAG_ID2.LABEL=58]="LABEL",TAG_ID2[TAG_ID2.LI=59]="LI",TAG_ID2[TAG_ID2.LINK=60]="LINK",TAG_ID2[TAG_ID2.LISTING=61]="LISTING",TAG_ID2[TAG_ID2.MAIN=62]="MAIN",TAG_ID2[TAG_ID2.MALIGNMARK=63]="MALIGNMARK",TAG_ID2[TAG_ID2.MARQUEE=64]="MARQUEE",TAG_ID2[TAG_ID2.MATH=65]="MATH",TAG_ID2[TAG_ID2.MENU=66]="MENU",TAG_ID2[TAG_ID2.META=67]="META",TAG_ID2[TAG_ID2.MGLYPH=68]="MGLYPH",TAG_ID2[TAG_ID2.MI=69]="MI",TAG_ID2[TAG_ID2.MO=70]="MO",TAG_ID2[TAG_ID2.MN=71]="MN",TAG_ID2[TAG_ID2.MS=72]="MS",TAG_ID2[TAG_ID2.MTEXT=73]="MTEXT",TAG_ID2[TAG_ID2.NAV=74]="NAV",TAG_ID2[TAG_ID2.NOBR=75]="NOBR",TAG_ID2[TAG_ID2.NOFRAMES=76]="NOFRAMES",TAG_ID2[TAG_ID2.NOEMBED=77]="NOEMBED",TAG_ID2[TAG_ID2.NOSCRIPT=78]="NOSCRIPT",TAG_ID2[TAG_ID2.OBJECT=79]="OBJECT",TAG_ID2[TAG_ID2.OL=80]="OL",TAG_ID2[TAG_ID2.OPTGROUP=81]="OPTGROUP",TAG_ID2[TAG_ID2.OPTION=82]="OPTION",TAG_ID2[TAG_ID2.P=83]="P",TAG_ID2[TAG_ID2.PARAM=84]="PARAM",TAG_ID2[TAG_ID2.PLAINTEXT=85]="PLAINTEXT",TAG_ID2[TAG_ID2.PRE=86]="PRE",TAG_ID2[TAG_ID2.RB=87]="RB",TAG_ID2[TAG_ID2.RP=88]="RP",TAG_ID2[TAG_ID2.RT=89]="RT",TAG_ID2[TAG_ID2.RTC=90]="RTC",TAG_ID2[TAG_ID2.RUBY=91]="RUBY",TAG_ID2[TAG_ID2.S=92]="S",TAG_ID2[TAG_ID2.SCRIPT=93]="SCRIPT",TAG_ID2[TAG_ID2.SEARCH=94]="SEARCH",TAG_ID2[TAG_ID2.SECTION=95]="SECTION",TAG_ID2[TAG_ID2.SELECT=96]="SELECT",TAG_ID2[TAG_ID2.SOURCE=97]="SOURCE",TAG_ID2[TAG_ID2.SMALL=98]="SMALL",TAG_ID2[TAG_ID2.SPAN=99]="SPAN",TAG_ID2[TAG_ID2.STRIKE=100]="STRIKE",TAG_ID2[TAG_ID2.STRONG=101]="STRONG",TAG_ID2[TAG_ID2.STYLE=102]="STYLE",TAG_ID2[TAG_ID2.SUB=103]="SUB",TAG_ID2[TAG_ID2.SUMMARY=104]="SUMMARY",TAG_ID2[TAG_ID2.SUP=105]="SUP",TAG_ID2[TAG_ID2.TABLE=106]="TABLE",TAG_ID2[TAG_ID2.TBODY=107]="TBODY",TAG_ID2[TAG_ID2.TEMPLATE=108]="TEMPLATE",TAG_ID2[TAG_ID2.TEXTAREA=109]="TEXTAREA",TAG_ID2[TAG_ID2.TFOOT=110]="TFOOT",TAG_ID2[TAG_ID2.TD=111]="TD",TAG_ID2[TAG_ID2.TH=112]="TH",TAG_ID2[TAG_ID2.THEAD=113]="THEAD",TAG_ID2[TAG_ID2.TITLE=114]="TITLE",TAG_ID2[TAG_ID2.TR=115]="TR",TAG_ID2[TAG_ID2.TRACK=116]="TRACK",TAG_ID2[TAG_ID2.TT=117]="TT",TAG_ID2[TAG_ID2.U=118]="U",TAG_ID2[TAG_ID2.UL=119]="UL",TAG_ID2[TAG_ID2.SVG=120]="SVG",TAG_ID2[TAG_ID2.VAR=121]="VAR",TAG_ID2[TAG_ID2.WBR=122]="WBR",TAG_ID2[TAG_ID2.XMP=123]="XMP";const TAG_NAME_TO_ID=new Map([[TAG_NAMES.A,TAG_ID.A],[TAG_NAMES.ADDRESS,TAG_ID.ADDRESS],[TAG_NAMES.ANNOTATION_XML,TAG_ID.ANNOTATION_XML],[TAG_NAMES.APPLET,TAG_ID.APPLET],[TAG_NAMES.AREA,TAG_ID.AREA],[TAG_NAMES.ARTICLE,TAG_ID.ARTICLE],[TAG_NAMES.ASIDE,TAG_ID.ASIDE],[TAG_NAMES.B,TAG_ID.B],[TAG_NAMES.BASE,TAG_ID.BASE],[TAG_NAMES.BASEFONT,TAG_ID.BASEFONT],[TAG_NAMES.BGSOUND,TAG_ID.BGSOUND],[TAG_NAMES.BIG,TAG_ID.BIG],[TAG_NAMES.BLOCKQUOTE,TAG_ID.BLOCKQUOTE],[TAG_NAMES.BODY,TAG_ID.BODY],[TAG_NAMES.BR,TAG_ID.BR],[TAG_NAMES.BUTTON,TAG_ID.BUTTON],[TAG_NAMES.CAPTION,TAG_ID.CAPTION],[TAG_NAMES.CENTER,TAG_ID.CENTER],[TAG_NAMES.CODE,TAG_ID.CODE],[TAG_NAMES.COL,TAG_ID.COL],[TAG_NAMES.COLGROUP,TAG_ID.COLGROUP],[TAG_NAMES.DD,TAG_ID.DD],[TAG_NAMES.DESC,TAG_ID.DESC],[TAG_NAMES.DETAILS,TAG_ID.DETAILS],[TAG_NAMES.DIALOG,TAG_ID.DIALOG],[TAG_NAMES.DIR,TAG_ID.DIR],[TAG_NAMES.DIV,TAG_ID.DIV],[TAG_NAMES.DL,TAG_ID.DL],[TAG_NAMES.DT,TAG_ID.DT],[TAG_NAMES.EM,TAG_ID.EM],[TAG_NAMES.EMBED,TAG_ID.EMBED],[TAG_NAMES.FIELDSET,TAG_ID.FIELDSET],[TAG_NAMES.FIGCAPTION,TAG_ID.FIGCAPTION],[TAG_NAMES.FIGURE,TAG_ID.FIGURE],[TAG_NAMES.FONT,TAG_ID.FONT],[TAG_NAMES.FOOTER,TAG_ID.FOOTER],[TAG_NAMES.FOREIGN_OBJECT,TAG_ID.FOREIGN_OBJECT],[TAG_NAMES.FORM,TAG_ID.FORM],[TAG_NAMES.FRAME,TAG_ID.FRAME],[TAG_NAMES.FRAMESET,TAG_ID.FRAMESET],[TAG_NAMES.H1,TAG_ID.H1],[TAG_NAMES.H2,TAG_ID.H2],[TAG_NAMES.H3,TAG_ID.H3],[TAG_NAMES.H4,TAG_ID.H4],[TAG_NAMES.H5,TAG_ID.H5],[TAG_NAMES.H6,TAG_ID.H6],[TAG_NAMES.HEAD,TAG_ID.HEAD],[TAG_NAMES.HEADER,TAG_ID.HEADER],[TAG_NAMES.HGROUP,TAG_ID.HGROUP],[TAG_NAMES.HR,TAG_ID.HR],[TAG_NAMES.HTML,TAG_ID.HTML],[TAG_NAMES.I,TAG_ID.I],[TAG_NAMES.IMG,TAG_ID.IMG],[TAG_NAMES.IMAGE,TAG_ID.IMAGE],[TAG_NAMES.INPUT,TAG_ID.INPUT],[TAG_NAMES.IFRAME,TAG_ID.IFRAME],[TAG_NAMES.KEYGEN,TAG_ID.KEYGEN],[TAG_NAMES.LABEL,TAG_ID.LABEL],[TAG_NAMES.LI,TAG_ID.LI],[TAG_NAMES.LINK,TAG_ID.LINK],[TAG_NAMES.LISTING,TAG_ID.LISTING],[TAG_NAMES.MAIN,TAG_ID.MAIN],[TAG_NAMES.MALIGNMARK,TAG_ID.MALIGNMARK],[TAG_NAMES.MARQUEE,TAG_ID.MARQUEE],[TAG_NAMES.MATH,TAG_ID.MATH],[TAG_NAMES.MENU,TAG_ID.MENU],[TAG_NAMES.META,TAG_ID.META],[TAG_NAMES.MGLYPH,TAG_ID.MGLYPH],[TAG_NAMES.MI,TAG_ID.MI],[TAG_NAMES.MO,TAG_ID.MO],[TAG_NAMES.MN,TAG_ID.MN],[TAG_NAMES.MS,TAG_ID.MS],[TAG_NAMES.MTEXT,TAG_ID.MTEXT],[TAG_NAMES.NAV,TAG_ID.NAV],[TAG_NAMES.NOBR,TAG_ID.NOBR],[TAG_NAMES.NOFRAMES,TAG_ID.NOFRAMES],[TAG_NAMES.NOEMBED,TAG_ID.NOEMBED],[TAG_NAMES.NOSCRIPT,TAG_ID.NOSCRIPT],[TAG_NAMES.OBJECT,TAG_ID.OBJECT],[TAG_NAMES.OL,TAG_ID.OL],[TAG_NAMES.OPTGROUP,TAG_ID.OPTGROUP],[TAG_NAMES.OPTION,TAG_ID.OPTION],[TAG_NAMES.P,TAG_ID.P],[TAG_NAMES.PARAM,TAG_ID.PARAM],[TAG_NAMES.PLAINTEXT,TAG_ID.PLAINTEXT],[TAG_NAMES.PRE,TAG_ID.PRE],[TAG_NAMES.RB,TAG_ID.RB],[TAG_NAMES.RP,TAG_ID.RP],[TAG_NAMES.RT,TAG_ID.RT],[TAG_NAMES.RTC,TAG_ID.RTC],[TAG_NAMES.RUBY,TAG_ID.RUBY],[TAG_NAMES.S,TAG_ID.S],[TAG_NAMES.SCRIPT,TAG_ID.SCRIPT],[TAG_NAMES.SEARCH,TAG_ID.SEARCH],[TAG_NAMES.SECTION,TAG_ID.SECTION],[TAG_NAMES.SELECT,TAG_ID.SELECT],[TAG_NAMES.SOURCE,TAG_ID.SOURCE],[TAG_NAMES.SMALL,TAG_ID.SMALL],[TAG_NAMES.SPAN,TAG_ID.SPAN],[TAG_NAMES.STRIKE,TAG_ID.STRIKE],[TAG_NAMES.STRONG,TAG_ID.STRONG],[TAG_NAMES.STYLE,TAG_ID.STYLE],[TAG_NAMES.SUB,TAG_ID.SUB],[TAG_NAMES.SUMMARY,TAG_ID.SUMMARY],[TAG_NAMES.SUP,TAG_ID.SUP],[TAG_NAMES.TABLE,TAG_ID.TABLE],[TAG_NAMES.TBODY,TAG_ID.TBODY],[TAG_NAMES.TEMPLATE,TAG_ID.TEMPLATE],[TAG_NAMES.TEXTAREA,TAG_ID.TEXTAREA],[TAG_NAMES.TFOOT,TAG_ID.TFOOT],[TAG_NAMES.TD,TAG_ID.TD],[TAG_NAMES.TH,TAG_ID.TH],[TAG_NAMES.THEAD,TAG_ID.THEAD],[TAG_NAMES.TITLE,TAG_ID.TITLE],[TAG_NAMES.TR,TAG_ID.TR],[TAG_NAMES.TRACK,TAG_ID.TRACK],[TAG_NAMES.TT,TAG_ID.TT],[TAG_NAMES.U,TAG_ID.U],[TAG_NAMES.UL,TAG_ID.UL],[TAG_NAMES.SVG,TAG_ID.SVG],[TAG_NAMES.VAR,TAG_ID.VAR],[TAG_NAMES.WBR,TAG_ID.WBR],[TAG_NAMES.XMP,TAG_ID.XMP]]);function getTagID(e){var t;return null!==(t=TAG_NAME_TO_ID.get(e))&&void 0!==t?t:TAG_ID.UNKNOWN}const $$1=TAG_ID,SPECIAL_ELEMENTS={[NS.HTML]:new Set([$$1.ADDRESS,$$1.APPLET,$$1.AREA,$$1.ARTICLE,$$1.ASIDE,$$1.BASE,$$1.BASEFONT,$$1.BGSOUND,$$1.BLOCKQUOTE,$$1.BODY,$$1.BR,$$1.BUTTON,$$1.CAPTION,$$1.CENTER,$$1.COL,$$1.COLGROUP,$$1.DD,$$1.DETAILS,$$1.DIR,$$1.DIV,$$1.DL,$$1.DT,$$1.EMBED,$$1.FIELDSET,$$1.FIGCAPTION,$$1.FIGURE,$$1.FOOTER,$$1.FORM,$$1.FRAME,$$1.FRAMESET,$$1.H1,$$1.H2,$$1.H3,$$1.H4,$$1.H5,$$1.H6,$$1.HEAD,$$1.HEADER,$$1.HGROUP,$$1.HR,$$1.HTML,$$1.IFRAME,$$1.IMG,$$1.INPUT,$$1.LI,$$1.LINK,$$1.LISTING,$$1.MAIN,$$1.MARQUEE,$$1.MENU,$$1.META,$$1.NAV,$$1.NOEMBED,$$1.NOFRAMES,$$1.NOSCRIPT,$$1.OBJECT,$$1.OL,$$1.P,$$1.PARAM,$$1.PLAINTEXT,$$1.PRE,$$1.SCRIPT,$$1.SECTION,$$1.SELECT,$$1.SOURCE,$$1.STYLE,$$1.SUMMARY,$$1.TABLE,$$1.TBODY,$$1.TD,$$1.TEMPLATE,$$1.TEXTAREA,$$1.TFOOT,$$1.TH,$$1.THEAD,$$1.TITLE,$$1.TR,$$1.TRACK,$$1.UL,$$1.WBR,$$1.XMP]),[NS.MATHML]:new Set([$$1.MI,$$1.MO,$$1.MN,$$1.MS,$$1.MTEXT,$$1.ANNOTATION_XML]),[NS.SVG]:new Set([$$1.TITLE,$$1.FOREIGN_OBJECT,$$1.DESC]),[NS.XLINK]:new Set,[NS.XML]:new Set,[NS.XMLNS]:new Set},NUMBERED_HEADERS=new Set([$$1.H1,$$1.H2,$$1.H3,$$1.H4,$$1.H5,$$1.H6]),UNESCAPED_TEXT=new Set([TAG_NAMES.STYLE,TAG_NAMES.SCRIPT,TAG_NAMES.XMP,TAG_NAMES.IFRAME,TAG_NAMES.NOEMBED,TAG_NAMES.NOFRAMES,TAG_NAMES.PLAINTEXT]);function hasUnescapedText(e,t){return UNESCAPED_TEXT.has(e)||t&&e===TAG_NAMES.NOSCRIPT}var State;!function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"}(State||(State={}));const TokenizerMode={DATA:State.DATA,RCDATA:State.RCDATA,RAWTEXT:State.RAWTEXT,SCRIPT_DATA:State.SCRIPT_DATA,PLAINTEXT:State.PLAINTEXT,CDATA_SECTION:State.CDATA_SECTION};function isAsciiDigit(e){return e>=CODE_POINTS.DIGIT_0&&e<=CODE_POINTS.DIGIT_9}function isAsciiUpper(e){return e>=CODE_POINTS.LATIN_CAPITAL_A&&e<=CODE_POINTS.LATIN_CAPITAL_Z}function isAsciiLower(e){return e>=CODE_POINTS.LATIN_SMALL_A&&e<=CODE_POINTS.LATIN_SMALL_Z}function isAsciiLetter(e){return isAsciiLower(e)||isAsciiUpper(e)}function isAsciiAlphaNumeric(e){return isAsciiLetter(e)||isAsciiDigit(e)}function toAsciiLower(e){return e+32}function isWhitespace(e){return e===CODE_POINTS.SPACE||e===CODE_POINTS.LINE_FEED||e===CODE_POINTS.TABULATION||e===CODE_POINTS.FORM_FEED}function isScriptDataDoubleEscapeSequenceEnd(e){return isWhitespace(e)||e===CODE_POINTS.SOLIDUS||e===CODE_POINTS.GREATER_THAN_SIGN}function getErrorForNumericCharacterReference(e){return e===CODE_POINTS.NULL?ERR.nullCharacterReference:e>1114111?ERR.characterReferenceOutsideUnicodeRange:isSurrogate(e)?ERR.surrogateCharacterReference:isUndefinedCodePoint(e)?ERR.noncharacterCharacterReference:isControlCodePoint(e)||e===CODE_POINTS.CARRIAGE_RETURN?ERR.controlCharacterReference:null}class Tokenizer{constructor(e,t){this.options=e,this.handler=t,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=State.DATA,this.returnState=State.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Preprocessor(t),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new EntityDecoder(htmlDecodeTree,(e,t)=>{this.preprocessor.pos=this.entityStartPos+t-1,this._flushCodePointConsumedAsCharacterReference(e)},t.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(ERR.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:e=>{this._err(ERR.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+e)},validateNumericCharacterReference:e=>{const t=getErrorForNumericCharacterReference(e);t&&this._err(t,1)}}:void 0)}_err(e,t=0){var r,n;null===(n=(r=this.handler).onParseError)||void 0===n||n.call(r,this.preprocessor.getError(e,t))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,this.inLoop||(this._runParsingLoop(),this.paused||null==e||e())}write(e,t,r){this.active=!0,this.preprocessor.write(e,t),this._runParsingLoop(),this.paused||null==r||r()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return!!this.preprocessor.endOfChunkHit&&(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0)}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let t=0;t<e;t++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,t){return!!this.preprocessor.startsWith(e,t)&&(this._advanceBy(e.length-1),!0)}_createStartTagToken(){this.currentToken={type:TokenType.START_TAG,tagName:"",tagID:TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:TokenType.END_TAG,tagName:"",tagID:TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:TokenType.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:TokenType.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,t){this.currentCharacterToken={type:e,chars:t,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,t;const r=this.currentToken;null===getTokenAttr(r,this.currentAttr.name)?(r.attrs.push(this.currentAttr),r.location&&this.currentLocation&&((null!==(e=(t=r.location).attrs)&&void 0!==e?e:t.attrs=Object.create(null))[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue())):this._err(ERR.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=getTagID(e.tagName),e.type===TokenType.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(ERR.endTagWithAttributes),e.selfClosing&&this._err(ERR.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case TokenType.CHARACTER:this.handler.onCharacter(this.currentCharacterToken);break;case TokenType.NULL_CHARACTER:this.handler.onNullCharacter(this.currentCharacterToken);break;case TokenType.WHITESPACE_CHARACTER:this.handler.onWhitespaceCharacter(this.currentCharacterToken)}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:TokenType.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,t){if(this.currentCharacterToken){if(this.currentCharacterToken.type===e)return void(this.currentCharacterToken.chars+=t);this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk()}this._createCharacterToken(e,t)}_emitCodePoint(e){const t=isWhitespace(e)?TokenType.WHITESPACE_CHARACTER:e===CODE_POINTS.NULL?TokenType.NULL_CHARACTER:TokenType.CHARACTER;this._appendCharToCurrentCharacterToken(t,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(TokenType.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=State.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?DecodingMode.Attribute:DecodingMode.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===State.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===State.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===State.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case State.DATA:this._stateData(e);break;case State.RCDATA:this._stateRcdata(e);break;case State.RAWTEXT:this._stateRawtext(e);break;case State.SCRIPT_DATA:this._stateScriptData(e);break;case State.PLAINTEXT:this._statePlaintext(e);break;case State.TAG_OPEN:this._stateTagOpen(e);break;case State.END_TAG_OPEN:this._stateEndTagOpen(e);break;case State.TAG_NAME:this._stateTagName(e);break;case State.RCDATA_LESS_THAN_SIGN:this._stateRcdataLessThanSign(e);break;case State.RCDATA_END_TAG_OPEN:this._stateRcdataEndTagOpen(e);break;case State.RCDATA_END_TAG_NAME:this._stateRcdataEndTagName(e);break;case State.RAWTEXT_LESS_THAN_SIGN:this._stateRawtextLessThanSign(e);break;case State.RAWTEXT_END_TAG_OPEN:this._stateRawtextEndTagOpen(e);break;case State.RAWTEXT_END_TAG_NAME:this._stateRawtextEndTagName(e);break;case State.SCRIPT_DATA_LESS_THAN_SIGN:this._stateScriptDataLessThanSign(e);break;case State.SCRIPT_DATA_END_TAG_OPEN:this._stateScriptDataEndTagOpen(e);break;case State.SCRIPT_DATA_END_TAG_NAME:this._stateScriptDataEndTagName(e);break;case State.SCRIPT_DATA_ESCAPE_START:this._stateScriptDataEscapeStart(e);break;case State.SCRIPT_DATA_ESCAPE_START_DASH:this._stateScriptDataEscapeStartDash(e);break;case State.SCRIPT_DATA_ESCAPED:this._stateScriptDataEscaped(e);break;case State.SCRIPT_DATA_ESCAPED_DASH:this._stateScriptDataEscapedDash(e);break;case State.SCRIPT_DATA_ESCAPED_DASH_DASH:this._stateScriptDataEscapedDashDash(e);break;case State.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataEscapedLessThanSign(e);break;case State.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:this._stateScriptDataEscapedEndTagOpen(e);break;case State.SCRIPT_DATA_ESCAPED_END_TAG_NAME:this._stateScriptDataEscapedEndTagName(e);break;case State.SCRIPT_DATA_DOUBLE_ESCAPE_START:this._stateScriptDataDoubleEscapeStart(e);break;case State.SCRIPT_DATA_DOUBLE_ESCAPED:this._stateScriptDataDoubleEscaped(e);break;case State.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:this._stateScriptDataDoubleEscapedDash(e);break;case State.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:this._stateScriptDataDoubleEscapedDashDash(e);break;case State.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataDoubleEscapedLessThanSign(e);break;case State.SCRIPT_DATA_DOUBLE_ESCAPE_END:this._stateScriptDataDoubleEscapeEnd(e);break;case State.BEFORE_ATTRIBUTE_NAME:this._stateBeforeAttributeName(e);break;case State.ATTRIBUTE_NAME:this._stateAttributeName(e);break;case State.AFTER_ATTRIBUTE_NAME:this._stateAfterAttributeName(e);break;case State.BEFORE_ATTRIBUTE_VALUE:this._stateBeforeAttributeValue(e);break;case State.ATTRIBUTE_VALUE_DOUBLE_QUOTED:this._stateAttributeValueDoubleQuoted(e);break;case State.ATTRIBUTE_VALUE_SINGLE_QUOTED:this._stateAttributeValueSingleQuoted(e);break;case State.ATTRIBUTE_VALUE_UNQUOTED:this._stateAttributeValueUnquoted(e);break;case State.AFTER_ATTRIBUTE_VALUE_QUOTED:this._stateAfterAttributeValueQuoted(e);break;case State.SELF_CLOSING_START_TAG:this._stateSelfClosingStartTag(e);break;case State.BOGUS_COMMENT:this._stateBogusComment(e);break;case State.MARKUP_DECLARATION_OPEN:this._stateMarkupDeclarationOpen(e);break;case State.COMMENT_START:this._stateCommentStart(e);break;case State.COMMENT_START_DASH:this._stateCommentStartDash(e);break;case State.COMMENT:this._stateComment(e);break;case State.COMMENT_LESS_THAN_SIGN:this._stateCommentLessThanSign(e);break;case State.COMMENT_LESS_THAN_SIGN_BANG:this._stateCommentLessThanSignBang(e);break;case State.COMMENT_LESS_THAN_SIGN_BANG_DASH:this._stateCommentLessThanSignBangDash(e);break;case State.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:this._stateCommentLessThanSignBangDashDash(e);break;case State.COMMENT_END_DASH:this._stateCommentEndDash(e);break;case State.COMMENT_END:this._stateCommentEnd(e);break;case State.COMMENT_END_BANG:this._stateCommentEndBang(e);break;case State.DOCTYPE:this._stateDoctype(e);break;case State.BEFORE_DOCTYPE_NAME:this._stateBeforeDoctypeName(e);break;case State.DOCTYPE_NAME:this._stateDoctypeName(e);break;case State.AFTER_DOCTYPE_NAME:this._stateAfterDoctypeName(e);break;case State.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._stateAfterDoctypePublicKeyword(e);break;case State.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:this._stateBeforeDoctypePublicIdentifier(e);break;case State.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypePublicIdentifierDoubleQuoted(e);break;case State.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypePublicIdentifierSingleQuoted(e);break;case State.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:this._stateAfterDoctypePublicIdentifier(e);break;case State.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break;case State.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._stateAfterDoctypeSystemKeyword(e);break;case State.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:this._stateBeforeDoctypeSystemIdentifier(e);break;case State.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypeSystemIdentifierDoubleQuoted(e);break;case State.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypeSystemIdentifierSingleQuoted(e);break;case State.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:this._stateAfterDoctypeSystemIdentifier(e);break;case State.BOGUS_DOCTYPE:this._stateBogusDoctype(e);break;case State.CDATA_SECTION:this._stateCdataSection(e);break;case State.CDATA_SECTION_BRACKET:this._stateCdataSectionBracket(e);break;case State.CDATA_SECTION_END:this._stateCdataSectionEnd(e);break;case State.CHARACTER_REFERENCE:this._stateCharacterReference();break;case State.AMBIGUOUS_AMPERSAND:this._stateAmbiguousAmpersand(e);break;default:throw new Error("Unknown state")}}_stateData(e){switch(e){case CODE_POINTS.LESS_THAN_SIGN:this.state=State.TAG_OPEN;break;case CODE_POINTS.AMPERSAND:this._startCharacterReference();break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this._emitCodePoint(e);break;case CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case CODE_POINTS.AMPERSAND:this._startCharacterReference();break;case CODE_POINTS.LESS_THAN_SIGN:this.state=State.RCDATA_LESS_THAN_SIGN;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break;case CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case CODE_POINTS.LESS_THAN_SIGN:this.state=State.RAWTEXT_LESS_THAN_SIGN;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break;case CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case CODE_POINTS.LESS_THAN_SIGN:this.state=State.SCRIPT_DATA_LESS_THAN_SIGN;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break;case CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break;case CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateTagOpen(e){if(isAsciiLetter(e))this._createStartTagToken(),this.state=State.TAG_NAME,this._stateTagName(e);else switch(e){case CODE_POINTS.EXCLAMATION_MARK:this.state=State.MARKUP_DECLARATION_OPEN;break;case CODE_POINTS.SOLIDUS:this.state=State.END_TAG_OPEN;break;case CODE_POINTS.QUESTION_MARK:this._err(ERR.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=State.BOGUS_COMMENT,this._stateBogusComment(e);break;case CODE_POINTS.EOF:this._err(ERR.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break;default:this._err(ERR.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=State.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(isAsciiLetter(e))this._createEndTagToken(),this.state=State.TAG_NAME,this._stateTagName(e);else switch(e){case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.missingEndTagName),this.state=State.DATA;break;case CODE_POINTS.EOF:this._err(ERR.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break;default:this._err(ERR.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=State.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const t=this.currentToken;switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:this.state=State.BEFORE_ATTRIBUTE_NAME;break;case CODE_POINTS.SOLIDUS:this.state=State.SELF_CLOSING_START_TAG;break;case CODE_POINTS.GREATER_THAN_SIGN:this.state=State.DATA,this.emitCurrentTagToken();break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),t.tagName+=REPLACEMENT_CHARACTER;break;case CODE_POINTS.EOF:this._err(ERR.eofInTag),this._emitEOFToken();break;default:t.tagName+=String.fromCodePoint(isAsciiUpper(e)?toAsciiLower(e):e)}}_stateRcdataLessThanSign(e){e===CODE_POINTS.SOLIDUS?this.state=State.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=State.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){isAsciiLetter(e)?(this.state=State.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=State.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();switch(this._createEndTagToken(),this.currentToken.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=State.BEFORE_ATTRIBUTE_NAME,!1;case CODE_POINTS.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=State.SELF_CLOSING_START_TAG,!1;case CODE_POINTS.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=State.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=State.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===CODE_POINTS.SOLIDUS?this.state=State.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=State.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){isAsciiLetter(e)?(this.state=State.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=State.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=State.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case CODE_POINTS.SOLIDUS:this.state=State.SCRIPT_DATA_END_TAG_OPEN;break;case CODE_POINTS.EXCLAMATION_MARK:this.state=State.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break;default:this._emitChars("<"),this.state=State.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){isAsciiLetter(e)?(this.state=State.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=State.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=State.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===CODE_POINTS.HYPHEN_MINUS?(this.state=State.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=State.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===CODE_POINTS.HYPHEN_MINUS?(this.state=State.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=State.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case CODE_POINTS.HYPHEN_MINUS:this.state=State.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break;case CODE_POINTS.LESS_THAN_SIGN:this.state=State.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break;case CODE_POINTS.EOF:this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case CODE_POINTS.HYPHEN_MINUS:this.state=State.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break;case CODE_POINTS.LESS_THAN_SIGN:this.state=State.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this.state=State.SCRIPT_DATA_ESCAPED,this._emitChars(REPLACEMENT_CHARACTER);break;case CODE_POINTS.EOF:this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=State.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case CODE_POINTS.HYPHEN_MINUS:this._emitChars("-");break;case CODE_POINTS.LESS_THAN_SIGN:this.state=State.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case CODE_POINTS.GREATER_THAN_SIGN:this.state=State.SCRIPT_DATA,this._emitChars(">");break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this.state=State.SCRIPT_DATA_ESCAPED,this._emitChars(REPLACEMENT_CHARACTER);break;case CODE_POINTS.EOF:this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=State.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===CODE_POINTS.SOLIDUS?this.state=State.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:isAsciiLetter(e)?(this._emitChars("<"),this.state=State.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=State.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){isAsciiLetter(e)?(this.state=State.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=State.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=State.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(SEQUENCES.SCRIPT,!1)&&isScriptDataDoubleEscapeSequenceEnd(this.preprocessor.peek(SEQUENCES.SCRIPT.length))){this._emitCodePoint(e);for(let e=0;e<SEQUENCES.SCRIPT.length;e++)this._emitCodePoint(this._consume());this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=State.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case CODE_POINTS.HYPHEN_MINUS:this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break;case CODE_POINTS.LESS_THAN_SIGN:this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break;case CODE_POINTS.EOF:this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case CODE_POINTS.HYPHEN_MINUS:this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break;case CODE_POINTS.LESS_THAN_SIGN:this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(REPLACEMENT_CHARACTER);break;case CODE_POINTS.EOF:this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case CODE_POINTS.HYPHEN_MINUS:this._emitChars("-");break;case CODE_POINTS.LESS_THAN_SIGN:this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case CODE_POINTS.GREATER_THAN_SIGN:this.state=State.SCRIPT_DATA,this._emitChars(">");break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(REPLACEMENT_CHARACTER);break;case CODE_POINTS.EOF:this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===CODE_POINTS.SOLIDUS?(this.state=State.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(SEQUENCES.SCRIPT,!1)&&isScriptDataDoubleEscapeSequenceEnd(this.preprocessor.peek(SEQUENCES.SCRIPT.length))){this._emitCodePoint(e);for(let e=0;e<SEQUENCES.SCRIPT.length;e++)this._emitCodePoint(this._consume());this.state=State.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=State.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.SOLIDUS:case CODE_POINTS.GREATER_THAN_SIGN:case CODE_POINTS.EOF:this.state=State.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case CODE_POINTS.EQUALS_SIGN:this._err(ERR.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=State.ATTRIBUTE_NAME;break;default:this._createAttr(""),this.state=State.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:case CODE_POINTS.SOLIDUS:case CODE_POINTS.GREATER_THAN_SIGN:case CODE_POINTS.EOF:this._leaveAttrName(),this.state=State.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case CODE_POINTS.EQUALS_SIGN:this._leaveAttrName(),this.state=State.BEFORE_ATTRIBUTE_VALUE;break;case CODE_POINTS.QUOTATION_MARK:case CODE_POINTS.APOSTROPHE:case CODE_POINTS.LESS_THAN_SIGN:this._err(ERR.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this.currentAttr.name+=REPLACEMENT_CHARACTER;break;default:this.currentAttr.name+=String.fromCodePoint(isAsciiUpper(e)?toAsciiLower(e):e)}}_stateAfterAttributeName(e){switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.SOLIDUS:this.state=State.SELF_CLOSING_START_TAG;break;case CODE_POINTS.EQUALS_SIGN:this.state=State.BEFORE_ATTRIBUTE_VALUE;break;case CODE_POINTS.GREATER_THAN_SIGN:this.state=State.DATA,this.emitCurrentTagToken();break;case CODE_POINTS.EOF:this._err(ERR.eofInTag),this._emitEOFToken();break;default:this._createAttr(""),this.state=State.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.QUOTATION_MARK:this.state=State.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break;case CODE_POINTS.APOSTROPHE:this.state=State.ATTRIBUTE_VALUE_SINGLE_QUOTED;break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.missingAttributeValue),this.state=State.DATA,this.emitCurrentTagToken();break;default:this.state=State.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case CODE_POINTS.QUOTATION_MARK:this.state=State.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case CODE_POINTS.AMPERSAND:this._startCharacterReference();break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this.currentAttr.value+=REPLACEMENT_CHARACTER;break;case CODE_POINTS.EOF:this._err(ERR.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case CODE_POINTS.APOSTROPHE:this.state=State.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case CODE_POINTS.AMPERSAND:this._startCharacterReference();break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this.currentAttr.value+=REPLACEMENT_CHARACTER;break;case CODE_POINTS.EOF:this._err(ERR.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:this._leaveAttrValue(),this.state=State.BEFORE_ATTRIBUTE_NAME;break;case CODE_POINTS.AMPERSAND:this._startCharacterReference();break;case CODE_POINTS.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=State.DATA,this.emitCurrentTagToken();break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this.currentAttr.value+=REPLACEMENT_CHARACTER;break;case CODE_POINTS.QUOTATION_MARK:case CODE_POINTS.APOSTROPHE:case CODE_POINTS.LESS_THAN_SIGN:case CODE_POINTS.EQUALS_SIGN:case CODE_POINTS.GRAVE_ACCENT:this._err(ERR.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break;case CODE_POINTS.EOF:this._err(ERR.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:this._leaveAttrValue(),this.state=State.BEFORE_ATTRIBUTE_NAME;break;case CODE_POINTS.SOLIDUS:this._leaveAttrValue(),this.state=State.SELF_CLOSING_START_TAG;break;case CODE_POINTS.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=State.DATA,this.emitCurrentTagToken();break;case CODE_POINTS.EOF:this._err(ERR.eofInTag),this._emitEOFToken();break;default:this._err(ERR.missingWhitespaceBetweenAttributes),this.state=State.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case CODE_POINTS.GREATER_THAN_SIGN:this.currentToken.selfClosing=!0,this.state=State.DATA,this.emitCurrentTagToken();break;case CODE_POINTS.EOF:this._err(ERR.eofInTag),this._emitEOFToken();break;default:this._err(ERR.unexpectedSolidusInTag),this.state=State.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const t=this.currentToken;switch(e){case CODE_POINTS.GREATER_THAN_SIGN:this.state=State.DATA,this.emitCurrentComment(t);break;case CODE_POINTS.EOF:this.emitCurrentComment(t),this._emitEOFToken();break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),t.data+=REPLACEMENT_CHARACTER;break;default:t.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(SEQUENCES.DASH_DASH,!0)?(this._createCommentToken(SEQUENCES.DASH_DASH.length+1),this.state=State.COMMENT_START):this._consumeSequenceIfMatch(SEQUENCES.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(SEQUENCES.DOCTYPE.length+1),this.state=State.DOCTYPE):this._consumeSequenceIfMatch(SEQUENCES.CDATA_START,!0)?this.inForeignNode?this.state=State.CDATA_SECTION:(this._err(ERR.cdataInHtmlContent),this._createCommentToken(SEQUENCES.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=State.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ERR.incorrectlyOpenedComment),this._createCommentToken(2),this.state=State.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case CODE_POINTS.HYPHEN_MINUS:this.state=State.COMMENT_START_DASH;break;case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptClosingOfEmptyComment),this.state=State.DATA;const e=this.currentToken;this.emitCurrentComment(e);break}default:this.state=State.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const t=this.currentToken;switch(e){case CODE_POINTS.HYPHEN_MINUS:this.state=State.COMMENT_END;break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.abruptClosingOfEmptyComment),this.state=State.DATA,this.emitCurrentComment(t);break;case CODE_POINTS.EOF:this._err(ERR.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=State.COMMENT,this._stateComment(e)}}_stateComment(e){const t=this.currentToken;switch(e){case CODE_POINTS.HYPHEN_MINUS:this.state=State.COMMENT_END_DASH;break;case CODE_POINTS.LESS_THAN_SIGN:t.data+="<",this.state=State.COMMENT_LESS_THAN_SIGN;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),t.data+=REPLACEMENT_CHARACTER;break;case CODE_POINTS.EOF:this._err(ERR.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const t=this.currentToken;switch(e){case CODE_POINTS.EXCLAMATION_MARK:t.data+="!",this.state=State.COMMENT_LESS_THAN_SIGN_BANG;break;case CODE_POINTS.LESS_THAN_SIGN:t.data+="<";break;default:this.state=State.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===CODE_POINTS.HYPHEN_MINUS?this.state=State.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=State.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===CODE_POINTS.HYPHEN_MINUS?this.state=State.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=State.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==CODE_POINTS.GREATER_THAN_SIGN&&e!==CODE_POINTS.EOF&&this._err(ERR.nestedComment),this.state=State.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const t=this.currentToken;switch(e){case CODE_POINTS.HYPHEN_MINUS:this.state=State.COMMENT_END;break;case CODE_POINTS.EOF:this._err(ERR.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=State.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const t=this.currentToken;switch(e){case CODE_POINTS.GREATER_THAN_SIGN:this.state=State.DATA,this.emitCurrentComment(t);break;case CODE_POINTS.EXCLAMATION_MARK:this.state=State.COMMENT_END_BANG;break;case CODE_POINTS.HYPHEN_MINUS:t.data+="-";break;case CODE_POINTS.EOF:this._err(ERR.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--",this.state=State.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const t=this.currentToken;switch(e){case CODE_POINTS.HYPHEN_MINUS:t.data+="--!",this.state=State.COMMENT_END_DASH;break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.incorrectlyClosedComment),this.state=State.DATA,this.emitCurrentComment(t);break;case CODE_POINTS.EOF:this._err(ERR.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--!",this.state=State.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:this.state=State.BEFORE_DOCTYPE_NAME;break;case CODE_POINTS.GREATER_THAN_SIGN:this.state=State.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break;case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._err(ERR.missingWhitespaceBeforeDoctypeName),this.state=State.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(isAsciiUpper(e))this._createDoctypeToken(String.fromCharCode(toAsciiLower(e))),this.state=State.DOCTYPE_NAME;else switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this._createDoctypeToken(REPLACEMENT_CHARACTER),this.state=State.DOCTYPE_NAME;break;case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypeName),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this.state=State.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=State.DOCTYPE_NAME}}_stateDoctypeName(e){const t=this.currentToken;switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:this.state=State.AFTER_DOCTYPE_NAME;break;case CODE_POINTS.GREATER_THAN_SIGN:this.state=State.DATA,this.emitCurrentDoctype(t);break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),t.name+=REPLACEMENT_CHARACTER;break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.name+=String.fromCodePoint(isAsciiUpper(e)?toAsciiLower(e):e)}}_stateAfterDoctypeName(e){const t=this.currentToken;switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.GREATER_THAN_SIGN:this.state=State.DATA,this.emitCurrentDoctype(t);break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._consumeSequenceIfMatch(SEQUENCES.PUBLIC,!1)?this.state=State.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(SEQUENCES.SYSTEM,!1)?this.state=State.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ERR.invalidCharacterSequenceAfterDoctypeName),t.forceQuirks=!0,this.state=State.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const t=this.currentToken;switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:this.state=State.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break;case CODE_POINTS.QUOTATION_MARK:this._err(ERR.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=State.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case CODE_POINTS.APOSTROPHE:this._err(ERR.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=State.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=State.DATA,this.emitCurrentDoctype(t);break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(ERR.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=State.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const t=this.currentToken;switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.QUOTATION_MARK:t.publicId="",this.state=State.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case CODE_POINTS.APOSTROPHE:t.publicId="",this.state=State.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=State.DATA,this.emitCurrentDoctype(t);break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(ERR.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=State.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const t=this.currentToken;switch(e){case CODE_POINTS.QUOTATION_MARK:this.state=State.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),t.publicId+=REPLACEMENT_CHARACTER;break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=State.DATA;break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const t=this.currentToken;switch(e){case CODE_POINTS.APOSTROPHE:this.state=State.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),t.publicId+=REPLACEMENT_CHARACTER;break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=State.DATA;break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const t=this.currentToken;switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:this.state=State.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break;case CODE_POINTS.GREATER_THAN_SIGN:this.state=State.DATA,this.emitCurrentDoctype(t);break;case CODE_POINTS.QUOTATION_MARK:this._err(ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=State.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case CODE_POINTS.APOSTROPHE:this._err(ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=State.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=State.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const t=this.currentToken;switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=State.DATA;break;case CODE_POINTS.QUOTATION_MARK:t.systemId="",this.state=State.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case CODE_POINTS.APOSTROPHE:t.systemId="",this.state=State.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=State.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const t=this.currentToken;switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:this.state=State.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break;case CODE_POINTS.QUOTATION_MARK:this._err(ERR.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=State.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case CODE_POINTS.APOSTROPHE:this._err(ERR.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=State.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=State.DATA,this.emitCurrentDoctype(t);break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=State.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const t=this.currentToken;switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.QUOTATION_MARK:t.systemId="",this.state=State.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case CODE_POINTS.APOSTROPHE:t.systemId="",this.state=State.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=State.DATA,this.emitCurrentDoctype(t);break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=State.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const t=this.currentToken;switch(e){case CODE_POINTS.QUOTATION_MARK:this.state=State.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),t.systemId+=REPLACEMENT_CHARACTER;break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=State.DATA;break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const t=this.currentToken;switch(e){case CODE_POINTS.APOSTROPHE:this.state=State.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),t.systemId+=REPLACEMENT_CHARACTER;break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=State.DATA;break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const t=this.currentToken;switch(e){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=State.DATA;break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(ERR.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=State.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const t=this.currentToken;switch(e){case CODE_POINTS.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=State.DATA;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter);break;case CODE_POINTS.EOF:this.emitCurrentDoctype(t),this._emitEOFToken()}}_stateCdataSection(e){switch(e){case CODE_POINTS.RIGHT_SQUARE_BRACKET:this.state=State.CDATA_SECTION_BRACKET;break;case CODE_POINTS.EOF:this._err(ERR.eofInCdata),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===CODE_POINTS.RIGHT_SQUARE_BRACKET?this.state=State.CDATA_SECTION_END:(this._emitChars("]"),this.state=State.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case CODE_POINTS.GREATER_THAN_SIGN:this.state=State.DATA;break;case CODE_POINTS.RIGHT_SQUARE_BRACKET:this._emitChars("]");break;default:this._emitChars("]]"),this.state=State.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0){if(!this.preprocessor.lastChunkWritten)return this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,void(this.preprocessor.endOfChunkHit=!0);e=this.entityDecoder.end()}0===e?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(CODE_POINTS.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&isAsciiAlphaNumeric(this.preprocessor.peek(1))?State.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){isAsciiAlphaNumeric(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===CODE_POINTS.SEMICOLON&&this._err(ERR.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const IMPLICIT_END_TAG_REQUIRED=new Set([TAG_ID.DD,TAG_ID.DT,TAG_ID.LI,TAG_ID.OPTGROUP,TAG_ID.OPTION,TAG_ID.P,TAG_ID.RB,TAG_ID.RP,TAG_ID.RT,TAG_ID.RTC]),IMPLICIT_END_TAG_REQUIRED_THOROUGHLY=new Set([...IMPLICIT_END_TAG_REQUIRED,TAG_ID.CAPTION,TAG_ID.COLGROUP,TAG_ID.TBODY,TAG_ID.TD,TAG_ID.TFOOT,TAG_ID.TH,TAG_ID.THEAD,TAG_ID.TR]),SCOPING_ELEMENTS_HTML=new Set([TAG_ID.APPLET,TAG_ID.CAPTION,TAG_ID.HTML,TAG_ID.MARQUEE,TAG_ID.OBJECT,TAG_ID.TABLE,TAG_ID.TD,TAG_ID.TEMPLATE,TAG_ID.TH]),SCOPING_ELEMENTS_HTML_LIST=new Set([...SCOPING_ELEMENTS_HTML,TAG_ID.OL,TAG_ID.UL]),SCOPING_ELEMENTS_HTML_BUTTON=new Set([...SCOPING_ELEMENTS_HTML,TAG_ID.BUTTON]),SCOPING_ELEMENTS_MATHML=new Set([TAG_ID.ANNOTATION_XML,TAG_ID.MI,TAG_ID.MN,TAG_ID.MO,TAG_ID.MS,TAG_ID.MTEXT]),SCOPING_ELEMENTS_SVG=new Set([TAG_ID.DESC,TAG_ID.FOREIGN_OBJECT,TAG_ID.TITLE]),TABLE_ROW_CONTEXT=new Set([TAG_ID.TR,TAG_ID.TEMPLATE,TAG_ID.HTML]),TABLE_BODY_CONTEXT=new Set([TAG_ID.TBODY,TAG_ID.TFOOT,TAG_ID.THEAD,TAG_ID.TEMPLATE,TAG_ID.HTML]),TABLE_CONTEXT=new Set([TAG_ID.TABLE,TAG_ID.TEMPLATE,TAG_ID.HTML]),TABLE_CELLS=new Set([TAG_ID.TD,TAG_ID.TH]);class OpenElementStack{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,t,r){this.treeAdapter=t,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=TAG_ID.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===TAG_ID.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===NS.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,t){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=t,this.currentTagId=t,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,t,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,t){const r=this._indexOf(e);this.items[r]=t,r===this.stackTop&&(this.current=t)}insertAfter(e,t,r){const n=this._indexOf(e)+1;this.items.splice(n,0,t),this.tagIDs.splice(n,0,r),this.stackTop++,n===this.stackTop&&this._updateCurrentElement(),this.current&&void 0!==this.currentTagId&&this.handler.onItemPush(this.current,this.currentTagId,n===this.stackTop)}popUntilTagNamePopped(e){let t=this.stackTop+1;do{t=this.tagIDs.lastIndexOf(e,t-1)}while(t>0&&this.treeAdapter.getNamespaceURI(this.items[t])!==NS.HTML);this.shortenToLength(Math.max(t,0))}shortenToLength(e){for(;this.stackTop>=e;){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,this.stackTop<e)}}popUntilElementPopped(e){const t=this._indexOf(e);this.shortenToLength(Math.max(t,0))}popUntilPopped(e,t){const r=this._indexOfTagNames(e,t);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(NUMBERED_HEADERS,NS.HTML)}popUntilTableCellPopped(){this.popUntilPopped(TABLE_CELLS,NS.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,t){for(let r=this.stackTop;r>=0;r--)if(e.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===t)return r;return-1}clearBackTo(e,t){const r=this._indexOfTagNames(e,t);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(TABLE_CONTEXT,NS.HTML)}clearBackToTableBodyContext(){this.clearBackTo(TABLE_BODY_CONTEXT,NS.HTML)}clearBackToTableRowContext(){this.clearBackTo(TABLE_ROW_CONTEXT,NS.HTML)}remove(e){const t=this._indexOf(e);t>=0&&(t===this.stackTop?this.pop():(this.items.splice(t,1),this.tagIDs.splice(t,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===TAG_ID.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const t=this._indexOf(e)-1;return t>=0?this.items[t]:null}isRootHtmlElementCurrent(){return 0===this.stackTop&&this.tagIDs[0]===TAG_ID.HTML}hasInDynamicScope(e,t){for(let r=this.stackTop;r>=0;r--){const n=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case NS.HTML:if(n===e)return!0;if(t.has(n))return!1;break;case NS.SVG:if(SCOPING_ELEMENTS_SVG.has(n))return!1;break;case NS.MATHML:if(SCOPING_ELEMENTS_MATHML.has(n))return!1}}return!0}hasInScope(e){return this.hasInDynamicScope(e,SCOPING_ELEMENTS_HTML)}hasInListItemScope(e){return this.hasInDynamicScope(e,SCOPING_ELEMENTS_HTML_LIST)}hasInButtonScope(e){return this.hasInDynamicScope(e,SCOPING_ELEMENTS_HTML_BUTTON)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const t=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case NS.HTML:if(NUMBERED_HEADERS.has(t))return!0;if(SCOPING_ELEMENTS_HTML.has(t))return!1;break;case NS.SVG:if(SCOPING_ELEMENTS_SVG.has(t))return!1;break;case NS.MATHML:if(SCOPING_ELEMENTS_MATHML.has(t))return!1}}return!0}hasInTableScope(e){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===NS.HTML)switch(this.tagIDs[t]){case e:return!0;case TAG_ID.TABLE:case TAG_ID.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===NS.HTML)switch(this.tagIDs[e]){case TAG_ID.TBODY:case TAG_ID.THEAD:case TAG_ID.TFOOT:return!0;case TAG_ID.TABLE:case TAG_ID.HTML:return!1}return!0}hasInSelectScope(e){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===NS.HTML)switch(this.tagIDs[t]){case e:return!0;case TAG_ID.OPTION:case TAG_ID.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;void 0!==this.currentTagId&&IMPLICIT_END_TAG_REQUIRED.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;void 0!==this.currentTagId&&IMPLICIT_END_TAG_REQUIRED_THOROUGHLY.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;void 0!==this.currentTagId&&this.currentTagId!==e&&IMPLICIT_END_TAG_REQUIRED_THOROUGHLY.has(this.currentTagId);)this.pop()}}const NOAH_ARK_CAPACITY=3;var EntryType,EntryType2;EntryType2=EntryType||(EntryType={}),EntryType2[EntryType2.Marker=0]="Marker",EntryType2[EntryType2.Element=1]="Element";const MARKER={type:EntryType.Marker};class FormattingElementList{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,t){const r=[],n=t.length,i=this.treeAdapter.getTagName(e),o=this.treeAdapter.getNamespaceURI(e);for(let s=0;s<this.entries.length;s++){const e=this.entries[s];if(e.type===EntryType.Marker)break;const{element:t}=e;if(this.treeAdapter.getTagName(t)===i&&this.treeAdapter.getNamespaceURI(t)===o){const e=this.treeAdapter.getAttrList(t);e.length===n&&r.push({idx:s,attrs:e})}}return r}_ensureNoahArkCondition(e){if(this.entries.length<NOAH_ARK_CAPACITY)return;const t=this.treeAdapter.getAttrList(e),r=this._getNoahArkConditionCandidates(e,t);if(r.length<NOAH_ARK_CAPACITY)return;const n=new Map(t.map(e=>[e.name,e.value]));let i=0;for(let o=0;o<r.length;o++){const e=r[o];e.attrs.every(e=>n.get(e.name)===e.value)&&(i+=1,i>=NOAH_ARK_CAPACITY&&this.entries.splice(e.idx,1))}}insertMarker(){this.entries.unshift(MARKER)}pushElement(e,t){this._ensureNoahArkCondition(e),this.entries.unshift({type:EntryType.Element,element:e,token:t})}insertElementAfterBookmark(e,t){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:EntryType.Element,element:e,token:t})}removeEntry(e){const t=this.entries.indexOf(e);-1!==t&&this.entries.splice(t,1)}clearToLastMarker(){const e=this.entries.indexOf(MARKER);-1===e?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const t=this.entries.find(t=>t.type===EntryType.Marker||this.treeAdapter.getTagName(t.element)===e);return t&&t.type===EntryType.Element?t:null}getElementEntry(e){return this.entries.find(t=>t.type===EntryType.Element&&t.element===e)}}const defaultTreeAdapter={createDocument:()=>({nodeName:"#document",mode:DOCUMENT_MODE.NO_QUIRKS,childNodes:[]}),createDocumentFragment:()=>({nodeName:"#document-fragment",childNodes:[]}),createElement:(e,t,r)=>({nodeName:e,tagName:e,attrs:r,namespaceURI:t,childNodes:[],parentNode:null}),createCommentNode:e=>({nodeName:"#comment",data:e,parentNode:null}),createTextNode:e=>({nodeName:"#text",value:e,parentNode:null}),appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,r){const n=e.childNodes.indexOf(r);e.childNodes.splice(n,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent:e=>e.content,setDocumentType(e,t,r,n){const i=e.childNodes.find(e=>"#documentType"===e.nodeName);if(i)i.name=t,i.publicId=r,i.systemId=n;else{const i={nodeName:"#documentType",name:t,publicId:r,systemId:n,parentNode:null};defaultTreeAdapter.appendChild(e,i)}},setDocumentMode(e,t){e.mode=t},getDocumentMode:e=>e.mode,detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const r=e.childNodes[e.childNodes.length-1];if(defaultTreeAdapter.isTextNode(r))return void(r.value+=t)}defaultTreeAdapter.appendChild(e,defaultTreeAdapter.createTextNode(t))},insertTextBefore(e,t,r){const n=e.childNodes[e.childNodes.indexOf(r)-1];n&&defaultTreeAdapter.isTextNode(n)?n.value+=t:defaultTreeAdapter.insertBefore(e,defaultTreeAdapter.createTextNode(t),r)},adoptAttributes(e,t){const r=new Set(e.attrs.map(e=>e.name));for(let n=0;n<t.length;n++)r.has(t[n].name)||e.attrs.push(t[n])},getFirstChild:e=>e.childNodes[0],getChildNodes:e=>e.childNodes,getParentNode:e=>e.parentNode,getAttrList:e=>e.attrs,getTagName:e=>e.tagName,getNamespaceURI:e=>e.namespaceURI,getTextNodeContent:e=>e.value,getCommentNodeContent:e=>e.data,getDocumentTypeNodeName:e=>e.name,getDocumentTypeNodePublicId:e=>e.publicId,getDocumentTypeNodeSystemId:e=>e.systemId,isTextNode:e=>"#text"===e.nodeName,isCommentNode:e=>"#comment"===e.nodeName,isDocumentTypeNode:e=>"#documentType"===e.nodeName,isElementNode:e=>Object.prototype.hasOwnProperty.call(e,"tagName"),setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation:e=>e.sourceCodeLocation,updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},VALID_DOCTYPE_NAME="html",VALID_SYSTEM_ID="about:legacy-compat",QUIRKS_MODE_SYSTEM_ID="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",QUIRKS_MODE_PUBLIC_ID_PREFIXES=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],QUIRKS_MODE_NO_SYSTEM_ID_PUBLIC_ID_PREFIXES=[...QUIRKS_MODE_PUBLIC_ID_PREFIXES,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],QUIRKS_MODE_PUBLIC_IDS=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),LIMITED_QUIRKS_PUBLIC_ID_PREFIXES=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],LIMITED_QUIRKS_WITH_SYSTEM_ID_PUBLIC_ID_PREFIXES=[...LIMITED_QUIRKS_PUBLIC_ID_PREFIXES,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function hasPrefix(e,t){return t.some(t=>e.startsWith(t))}function isConforming(e){return e.name===VALID_DOCTYPE_NAME&&null===e.publicId&&(null===e.systemId||e.systemId===VALID_SYSTEM_ID)}function getDocumentMode(e){if(e.name!==VALID_DOCTYPE_NAME)return DOCUMENT_MODE.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===QUIRKS_MODE_SYSTEM_ID)return DOCUMENT_MODE.QUIRKS;let{publicId:r}=e;if(null!==r){if(r=r.toLowerCase(),QUIRKS_MODE_PUBLIC_IDS.has(r))return DOCUMENT_MODE.QUIRKS;let e=null===t?QUIRKS_MODE_NO_SYSTEM_ID_PUBLIC_ID_PREFIXES:QUIRKS_MODE_PUBLIC_ID_PREFIXES;if(hasPrefix(r,e))return DOCUMENT_MODE.QUIRKS;if(e=null===t?LIMITED_QUIRKS_PUBLIC_ID_PREFIXES:LIMITED_QUIRKS_WITH_SYSTEM_ID_PUBLIC_ID_PREFIXES,hasPrefix(r,e))return DOCUMENT_MODE.LIMITED_QUIRKS}return DOCUMENT_MODE.NO_QUIRKS}const MIME_TYPES={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},DEFINITION_URL_ATTR="definitionurl",ADJUSTED_DEFINITION_URL_ATTR="definitionURL",SVG_ATTRS_ADJUSTMENT_MAP=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),XML_ATTRS_ADJUSTMENT_MAP=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:NS.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:NS.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:NS.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:NS.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:NS.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:NS.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:NS.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:NS.XML}],["xml:space",{prefix:"xml",name:"space",namespace:NS.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:NS.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:NS.XMLNS}]]),SVG_TAG_NAMES_ADJUSTMENT_MAP=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),EXITS_FOREIGN_CONTENT=new Set([TAG_ID.B,TAG_ID.BIG,TAG_ID.BLOCKQUOTE,TAG_ID.BODY,TAG_ID.BR,TAG_ID.CENTER,TAG_ID.CODE,TAG_ID.DD,TAG_ID.DIV,TAG_ID.DL,TAG_ID.DT,TAG_ID.EM,TAG_ID.EMBED,TAG_ID.H1,TAG_ID.H2,TAG_ID.H3,TAG_ID.H4,TAG_ID.H5,TAG_ID.H6,TAG_ID.HEAD,TAG_ID.HR,TAG_ID.I,TAG_ID.IMG,TAG_ID.LI,TAG_ID.LISTING,TAG_ID.MENU,TAG_ID.META,TAG_ID.NOBR,TAG_ID.OL,TAG_ID.P,TAG_ID.PRE,TAG_ID.RUBY,TAG_ID.S,TAG_ID.SMALL,TAG_ID.SPAN,TAG_ID.STRONG,TAG_ID.STRIKE,TAG_ID.SUB,TAG_ID.SUP,TAG_ID.TABLE,TAG_ID.TT,TAG_ID.U,TAG_ID.UL,TAG_ID.VAR]);function causesExit(e){const t=e.tagID;return t===TAG_ID.FONT&&e.attrs.some(({name:e})=>e===ATTRS.COLOR||e===ATTRS.SIZE||e===ATTRS.FACE)||EXITS_FOREIGN_CONTENT.has(t)}function adjustTokenMathMLAttrs(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===DEFINITION_URL_ATTR){e.attrs[t].name=ADJUSTED_DEFINITION_URL_ATTR;break}}function adjustTokenSVGAttrs(e){for(let t=0;t<e.attrs.length;t++){const r=SVG_ATTRS_ADJUSTMENT_MAP.get(e.attrs[t].name);null!=r&&(e.attrs[t].name=r)}}function adjustTokenXMLAttrs(e){for(let t=0;t<e.attrs.length;t++){const r=XML_ATTRS_ADJUSTMENT_MAP.get(e.attrs[t].name);r&&(e.attrs[t].prefix=r.prefix,e.attrs[t].name=r.name,e.attrs[t].namespace=r.namespace)}}function adjustTokenSVGTagName(e){const t=SVG_TAG_NAMES_ADJUSTMENT_MAP.get(e.tagName);null!=t&&(e.tagName=t,e.tagID=getTagID(e.tagName))}function isMathMLTextIntegrationPoint(e,t){return t===NS.MATHML&&(e===TAG_ID.MI||e===TAG_ID.MO||e===TAG_ID.MN||e===TAG_ID.MS||e===TAG_ID.MTEXT)}function isHtmlIntegrationPoint(e,t,r){if(t===NS.MATHML&&e===TAG_ID.ANNOTATION_XML)for(let n=0;n<r.length;n++)if(r[n].name===ATTRS.ENCODING){const e=r[n].value.toLowerCase();return e===MIME_TYPES.TEXT_HTML||e===MIME_TYPES.APPLICATION_XML}return t===NS.SVG&&(e===TAG_ID.FOREIGN_OBJECT||e===TAG_ID.DESC||e===TAG_ID.TITLE)}function isIntegrationPoint(e,t,r,n){return(!n||n===NS.HTML)&&isHtmlIntegrationPoint(e,t,r)||(!n||n===NS.MATHML)&&isMathMLTextIntegrationPoint(e,t)}const HIDDEN_INPUT_TYPE="hidden",AA_OUTER_LOOP_ITER=8,AA_INNER_LOOP_ITER=3;var InsertionMode,InsertionMode2;InsertionMode2=InsertionMode||(InsertionMode={}),InsertionMode2[InsertionMode2.INITIAL=0]="INITIAL",InsertionMode2[InsertionMode2.BEFORE_HTML=1]="BEFORE_HTML",InsertionMode2[InsertionMode2.BEFORE_HEAD=2]="BEFORE_HEAD",InsertionMode2[InsertionMode2.IN_HEAD=3]="IN_HEAD",InsertionMode2[InsertionMode2.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",InsertionMode2[InsertionMode2.AFTER_HEAD=5]="AFTER_HEAD",InsertionMode2[InsertionMode2.IN_BODY=6]="IN_BODY",InsertionMode2[InsertionMode2.TEXT=7]="TEXT",InsertionMode2[InsertionMode2.IN_TABLE=8]="IN_TABLE",InsertionMode2[InsertionMode2.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",InsertionMode2[InsertionMode2.IN_CAPTION=10]="IN_CAPTION",InsertionMode2[InsertionMode2.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",InsertionMode2[InsertionMode2.IN_TABLE_BODY=12]="IN_TABLE_BODY",InsertionMode2[InsertionMode2.IN_ROW=13]="IN_ROW",InsertionMode2[InsertionMode2.IN_CELL=14]="IN_CELL",InsertionMode2[InsertionMode2.IN_SELECT=15]="IN_SELECT",InsertionMode2[InsertionMode2.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",InsertionMode2[InsertionMode2.IN_TEMPLATE=17]="IN_TEMPLATE",InsertionMode2[InsertionMode2.AFTER_BODY=18]="AFTER_BODY",InsertionMode2[InsertionMode2.IN_FRAMESET=19]="IN_FRAMESET",InsertionMode2[InsertionMode2.AFTER_FRAMESET=20]="AFTER_FRAMESET",InsertionMode2[InsertionMode2.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",InsertionMode2[InsertionMode2.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET";const BASE_LOC={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},TABLE_STRUCTURE_TAGS=new Set([TAG_ID.TABLE,TAG_ID.TBODY,TAG_ID.TFOOT,TAG_ID.THEAD,TAG_ID.TR]),defaultParserOptions={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:defaultTreeAdapter,onParseError:null};let Parser$1=class{constructor(e,t,r=null,n=null){this.fragmentContext=r,this.scriptHandler=n,this.currentToken=null,this.stopped=!1,this.insertionMode=InsertionMode.INITIAL,this.originalInsertionMode=InsertionMode.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...defaultParserOptions,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=null!=t?t:this.treeAdapter.createDocument(),this.tokenizer=new Tokenizer(this.options,this),this.activeFormattingElements=new FormattingElementList(this.treeAdapter),this.fragmentContextID=r?getTagID(this.treeAdapter.getTagName(r)):TAG_ID.UNKNOWN,this._setContextModes(null!=r?r:this.document,this.fragmentContextID),this.openElements=new OpenElementStack(this.document,this.treeAdapter,this)}static parse(e,t){const r=new this(t);return r.tokenizer.write(e,!0),r.document}static getFragmentParser(e,t){const r={...defaultParserOptions,...t};null!=e||(e=r.treeAdapter.createElement(TAG_NAMES.TEMPLATE,NS.HTML,[]));const n=r.treeAdapter.createElement("documentmock",NS.HTML,[]),i=new this(r,n,e);return i.fragmentContextID===TAG_ID.TEMPLATE&&i.tmplInsertionModeStack.unshift(InsertionMode.IN_TEMPLATE),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),i}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),t=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,t),t}_err(e,t,r){var n;if(!this.onParseError)return;const i=null!==(n=e.location)&&void 0!==n?n:BASE_LOC,o={code:t,startLine:i.startLine,startCol:i.startCol,startOffset:i.startOffset,endLine:r?i.startLine:i.endLine,endCol:r?i.startCol:i.endCol,endOffset:r?i.startOffset:i.endOffset};this.onParseError(o)}onItemPush(e,t,r){var n,i;null===(i=(n=this.treeAdapter).onItemPush)||void 0===i||i.call(n,e),r&&this.openElements.stackTop>0&&this._setContextModes(e,t)}onItemPop(e,t){var r,n;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),null===(n=(r=this.treeAdapter).onItemPop)||void 0===n||n.call(r,e,this.openElements.current),t){let e,t;0===this.openElements.stackTop&&this.fragmentContext?(e=this.fragmentContext,t=this.fragmentContextID):({current:e,currentTagId:t}=this.openElements),this._setContextModes(e,t)}}_setContextModes(e,t){const r=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===NS.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&void 0!==e&&void 0!==t&&!this._isIntegrationPoint(t,e)}_switchToTextParsing(e,t){this._insertElement(e,NS.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode=InsertionMode.TEXT}switchToPlaintextParsing(){this.insertionMode=InsertionMode.TEXT,this.originalInsertionMode=InsertionMode.IN_BODY,this.tokenizer.state=TokenizerMode.PLAINTEXT}_getAdjustedCurrentElement(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===TAG_NAMES.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(this.fragmentContext&&this.treeAdapter.getNamespaceURI(this.fragmentContext)===NS.HTML)switch(this.fragmentContextID){case TAG_ID.TITLE:case TAG_ID.TEXTAREA:this.tokenizer.state=TokenizerMode.RCDATA;break;case TAG_ID.STYLE:case TAG_ID.XMP:case TAG_ID.IFRAME:case TAG_ID.NOEMBED:case TAG_ID.NOFRAMES:case TAG_ID.NOSCRIPT:this.tokenizer.state=TokenizerMode.RAWTEXT;break;case TAG_ID.SCRIPT:this.tokenizer.state=TokenizerMode.SCRIPT_DATA;break;case TAG_ID.PLAINTEXT:this.tokenizer.state=TokenizerMode.PLAINTEXT}}_setDocumentType(e){const t=e.name||"",r=e.publicId||"",n=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,t,r,n),e.location){const t=this.treeAdapter.getChildNodes(this.document).find(e=>this.treeAdapter.isDocumentTypeNode(e));t&&this.treeAdapter.setNodeSourceCodeLocation(t,e.location)}}_attachElementToTree(e,t){if(this.options.sourceCodeLocationInfo){const r=t&&{...t,startTag:t};this.treeAdapter.setNodeSourceCodeLocation(e,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const t=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(null!=t?t:this.document,e)}}_appendElement(e,t){const r=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(r,e.location)}_insertElement(e,t){const r=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID)}_insertFakeElement(e,t){const r=this.treeAdapter.createElement(e,NS.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,t)}_insertTemplate(e){const t=this.treeAdapter.createElement(e.tagName,NS.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,r),this._attachElementToTree(t,e.location),this.openElements.push(t,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(TAG_NAMES.HTML,NS.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,TAG_ID.HTML)}_appendCommentNode(e,t){const r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_insertCharacters(e){let t,r;if(this._shouldFosterParentOnInsertion()?(({parent:t,beforeElement:r}=this._findFosterParentingLocation()),r?this.treeAdapter.insertTextBefore(t,e.chars,r):this.treeAdapter.insertText(t,e.chars)):(t=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(t,e.chars)),!e.location)return;const n=this.treeAdapter.getChildNodes(t),i=r?n.lastIndexOf(r):n.length,o=n[i-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:t,endCol:r,endOffset:n}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:t,endCol:r,endOffset:n})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}_adoptNodes(e,t){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(t,r)}_setEndLocation(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){const r=t.location,n=this.treeAdapter.getTagName(e),i=t.type===TokenType.END_TAG&&n===t.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,i)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let t,r;return 0===this.openElements.stackTop&&this.fragmentContext?(t=this.fragmentContext,r=this.fragmentContextID):({current:t,currentTagId:r}=this.openElements),(e.tagID!==TAG_ID.SVG||this.treeAdapter.getTagName(t)!==TAG_NAMES.ANNOTATION_XML||this.treeAdapter.getNamespaceURI(t)!==NS.MATHML)&&(this.tokenizer.inForeignNode||(e.tagID===TAG_ID.MGLYPH||e.tagID===TAG_ID.MALIGNMARK)&&void 0!==r&&!this._isIntegrationPoint(r,t,NS.HTML))}_processToken(e){switch(e.type){case TokenType.CHARACTER:this.onCharacter(e);break;case TokenType.NULL_CHARACTER:this.onNullCharacter(e);break;case TokenType.COMMENT:this.onComment(e);break;case TokenType.DOCTYPE:this.onDoctype(e);break;case TokenType.START_TAG:this._processStartTag(e);break;case TokenType.END_TAG:this.onEndTag(e);break;case TokenType.EOF:this.onEof(e);break;case TokenType.WHITESPACE_CHARACTER:this.onWhitespaceCharacter(e)}}_isIntegrationPoint(e,t,r){return isIntegrationPoint(e,this.treeAdapter.getNamespaceURI(t),this.treeAdapter.getAttrList(t),r)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const t=this.activeFormattingElements.entries.findIndex(e=>e.type===EntryType.Marker||this.openElements.contains(e.element));for(let r=-1===t?e-1:t-1;r>=0;r--){const e=this.activeFormattingElements.entries[r];this._insertElement(e.token,this.treeAdapter.getNamespaceURI(e.element)),e.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=InsertionMode.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(TAG_ID.P),this.openElements.popUntilTagNamePopped(TAG_ID.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(0===e&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case TAG_ID.TR:return void(this.insertionMode=InsertionMode.IN_ROW);case TAG_ID.TBODY:case TAG_ID.THEAD:case TAG_ID.TFOOT:return void(this.insertionMode=InsertionMode.IN_TABLE_BODY);case TAG_ID.CAPTION:return void(this.insertionMode=InsertionMode.IN_CAPTION);case TAG_ID.COLGROUP:return void(this.insertionMode=InsertionMode.IN_COLUMN_GROUP);case TAG_ID.TABLE:return void(this.insertionMode=InsertionMode.IN_TABLE);case TAG_ID.BODY:return void(this.insertionMode=InsertionMode.IN_BODY);case TAG_ID.FRAMESET:return void(this.insertionMode=InsertionMode.IN_FRAMESET);case TAG_ID.SELECT:return void this._resetInsertionModeForSelect(e);case TAG_ID.TEMPLATE:return void(this.insertionMode=this.tmplInsertionModeStack[0]);case TAG_ID.HTML:return void(this.insertionMode=this.headElement?InsertionMode.AFTER_HEAD:InsertionMode.BEFORE_HEAD);case TAG_ID.TD:case TAG_ID.TH:if(e>0)return void(this.insertionMode=InsertionMode.IN_CELL);break;case TAG_ID.HEAD:if(e>0)return void(this.insertionMode=InsertionMode.IN_HEAD)}this.insertionMode=InsertionMode.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let t=e-1;t>0;t--){const e=this.openElements.tagIDs[t];if(e===TAG_ID.TEMPLATE)break;if(e===TAG_ID.TABLE)return void(this.insertionMode=InsertionMode.IN_SELECT_IN_TABLE)}this.insertionMode=InsertionMode.IN_SELECT}_isElementCausesFosterParenting(e){return TABLE_STRUCTURE_TAGS.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&void 0!==this.openElements.currentTagId&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const t=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case TAG_ID.TEMPLATE:if(this.treeAdapter.getNamespaceURI(t)===NS.HTML)return{parent:this.treeAdapter.getTemplateContent(t),beforeElement:null};break;case TAG_ID.TABLE:{const r=this.treeAdapter.getParentNode(t);return r?{parent:r,beforeElement:t}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}_isSpecialElement(e,t){const r=this.treeAdapter.getNamespaceURI(e);return SPECIAL_ELEMENTS[r].has(t)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)characterInForeignContent(this,e);else switch(this.insertionMode){case InsertionMode.INITIAL:tokenInInitialMode(this,e);break;case InsertionMode.BEFORE_HTML:tokenBeforeHtml(this,e);break;case InsertionMode.BEFORE_HEAD:tokenBeforeHead(this,e);break;case InsertionMode.IN_HEAD:tokenInHead(this,e);break;case InsertionMode.IN_HEAD_NO_SCRIPT:tokenInHeadNoScript(this,e);break;case InsertionMode.AFTER_HEAD:tokenAfterHead(this,e);break;case InsertionMode.IN_BODY:case InsertionMode.IN_CAPTION:case InsertionMode.IN_CELL:case InsertionMode.IN_TEMPLATE:characterInBody(this,e);break;case InsertionMode.TEXT:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:this._insertCharacters(e);break;case InsertionMode.IN_TABLE:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:characterInTable(this,e);break;case InsertionMode.IN_TABLE_TEXT:characterInTableText(this,e);break;case InsertionMode.IN_COLUMN_GROUP:tokenInColumnGroup(this,e);break;case InsertionMode.AFTER_BODY:tokenAfterBody(this,e);break;case InsertionMode.AFTER_AFTER_BODY:tokenAfterAfterBody(this,e)}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)nullCharacterInForeignContent(this,e);else switch(this.insertionMode){case InsertionMode.INITIAL:tokenInInitialMode(this,e);break;case InsertionMode.BEFORE_HTML:tokenBeforeHtml(this,e);break;case InsertionMode.BEFORE_HEAD:tokenBeforeHead(this,e);break;case InsertionMode.IN_HEAD:tokenInHead(this,e);break;case InsertionMode.IN_HEAD_NO_SCRIPT:tokenInHeadNoScript(this,e);break;case InsertionMode.AFTER_HEAD:tokenAfterHead(this,e);break;case InsertionMode.TEXT:this._insertCharacters(e);break;case InsertionMode.IN_TABLE:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:characterInTable(this,e);break;case InsertionMode.IN_COLUMN_GROUP:tokenInColumnGroup(this,e);break;case InsertionMode.AFTER_BODY:tokenAfterBody(this,e);break;case InsertionMode.AFTER_AFTER_BODY:tokenAfterAfterBody(this,e)}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML)appendComment(this,e);else switch(this.insertionMode){case InsertionMode.INITIAL:case InsertionMode.BEFORE_HTML:case InsertionMode.BEFORE_HEAD:case InsertionMode.IN_HEAD:case InsertionMode.IN_HEAD_NO_SCRIPT:case InsertionMode.AFTER_HEAD:case InsertionMode.IN_BODY:case InsertionMode.IN_TABLE:case InsertionMode.IN_CAPTION:case InsertionMode.IN_COLUMN_GROUP:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:case InsertionMode.IN_CELL:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:case InsertionMode.IN_TEMPLATE:case InsertionMode.IN_FRAMESET:case InsertionMode.AFTER_FRAMESET:appendComment(this,e);break;case InsertionMode.IN_TABLE_TEXT:tokenInTableText(this,e);break;case InsertionMode.AFTER_BODY:appendCommentToRootHtmlElement(this,e);break;case InsertionMode.AFTER_AFTER_BODY:case InsertionMode.AFTER_AFTER_FRAMESET:appendCommentToDocument(this,e)}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case InsertionMode.INITIAL:doctypeInInitialMode(this,e);break;case InsertionMode.BEFORE_HEAD:case InsertionMode.IN_HEAD:case InsertionMode.IN_HEAD_NO_SCRIPT:case InsertionMode.AFTER_HEAD:this._err(e,ERR.misplacedDoctype);break;case InsertionMode.IN_TABLE_TEXT:tokenInTableText(this,e)}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,ERR.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?startTagInForeignContent(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case InsertionMode.INITIAL:tokenInInitialMode(this,e);break;case InsertionMode.BEFORE_HTML:startTagBeforeHtml(this,e);break;case InsertionMode.BEFORE_HEAD:startTagBeforeHead(this,e);break;case InsertionMode.IN_HEAD:startTagInHead(this,e);break;case InsertionMode.IN_HEAD_NO_SCRIPT:startTagInHeadNoScript(this,e);break;case InsertionMode.AFTER_HEAD:startTagAfterHead(this,e);break;case InsertionMode.IN_BODY:startTagInBody(this,e);break;case InsertionMode.IN_TABLE:startTagInTable(this,e);break;case InsertionMode.IN_TABLE_TEXT:tokenInTableText(this,e);break;case InsertionMode.IN_CAPTION:startTagInCaption(this,e);break;case InsertionMode.IN_COLUMN_GROUP:startTagInColumnGroup(this,e);break;case InsertionMode.IN_TABLE_BODY:startTagInTableBody(this,e);break;case InsertionMode.IN_ROW:startTagInRow(this,e);break;case InsertionMode.IN_CELL:startTagInCell(this,e);break;case InsertionMode.IN_SELECT:startTagInSelect(this,e);break;case InsertionMode.IN_SELECT_IN_TABLE:startTagInSelectInTable(this,e);break;case InsertionMode.IN_TEMPLATE:startTagInTemplate(this,e);break;case InsertionMode.AFTER_BODY:startTagAfterBody(this,e);break;case InsertionMode.IN_FRAMESET:startTagInFrameset(this,e);break;case InsertionMode.AFTER_FRAMESET:startTagAfterFrameset(this,e);break;case InsertionMode.AFTER_AFTER_BODY:startTagAfterAfterBody(this,e);break;case InsertionMode.AFTER_AFTER_FRAMESET:startTagAfterAfterFrameset(this,e)}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?endTagInForeignContent(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case InsertionMode.INITIAL:tokenInInitialMode(this,e);break;case InsertionMode.BEFORE_HTML:endTagBeforeHtml(this,e);break;case InsertionMode.BEFORE_HEAD:endTagBeforeHead(this,e);break;case InsertionMode.IN_HEAD:endTagInHead(this,e);break;case InsertionMode.IN_HEAD_NO_SCRIPT:endTagInHeadNoScript(this,e);break;case InsertionMode.AFTER_HEAD:endTagAfterHead(this,e);break;case InsertionMode.IN_BODY:endTagInBody(this,e);break;case InsertionMode.TEXT:endTagInText(this,e);break;case InsertionMode.IN_TABLE:endTagInTable(this,e);break;case InsertionMode.IN_TABLE_TEXT:tokenInTableText(this,e);break;case InsertionMode.IN_CAPTION:endTagInCaption(this,e);break;case InsertionMode.IN_COLUMN_GROUP:endTagInColumnGroup(this,e);break;case InsertionMode.IN_TABLE_BODY:endTagInTableBody(this,e);break;case InsertionMode.IN_ROW:endTagInRow(this,e);break;case InsertionMode.IN_CELL:endTagInCell(this,e);break;case InsertionMode.IN_SELECT:endTagInSelect(this,e);break;case InsertionMode.IN_SELECT_IN_TABLE:endTagInSelectInTable(this,e);break;case InsertionMode.IN_TEMPLATE:endTagInTemplate(this,e);break;case InsertionMode.AFTER_BODY:endTagAfterBody(this,e);break;case InsertionMode.IN_FRAMESET:endTagInFrameset(this,e);break;case InsertionMode.AFTER_FRAMESET:endTagAfterFrameset(this,e);break;case InsertionMode.AFTER_AFTER_BODY:tokenAfterAfterBody(this,e)}}onEof(e){switch(this.insertionMode){case InsertionMode.INITIAL:tokenInInitialMode(this,e);break;case InsertionMode.BEFORE_HTML:tokenBeforeHtml(this,e);break;case InsertionMode.BEFORE_HEAD:tokenBeforeHead(this,e);break;case InsertionMode.IN_HEAD:tokenInHead(this,e);break;case InsertionMode.IN_HEAD_NO_SCRIPT:tokenInHeadNoScript(this,e);break;case InsertionMode.AFTER_HEAD:tokenAfterHead(this,e);break;case InsertionMode.IN_BODY:case InsertionMode.IN_TABLE:case InsertionMode.IN_CAPTION:case InsertionMode.IN_COLUMN_GROUP:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:case InsertionMode.IN_CELL:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:eofInBody(this,e);break;case InsertionMode.TEXT:eofInText(this,e);break;case InsertionMode.IN_TABLE_TEXT:tokenInTableText(this,e);break;case InsertionMode.IN_TEMPLATE:eofInTemplate(this,e);break;case InsertionMode.AFTER_BODY:case InsertionMode.IN_FRAMESET:case InsertionMode.AFTER_FRAMESET:case InsertionMode.AFTER_AFTER_BODY:case InsertionMode.AFTER_AFTER_FRAMESET:stopParsing(this,e)}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===CODE_POINTS.LINE_FEED)){if(1===e.chars.length)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode)this._insertCharacters(e);else switch(this.insertionMode){case InsertionMode.IN_HEAD:case InsertionMode.IN_HEAD_NO_SCRIPT:case InsertionMode.AFTER_HEAD:case InsertionMode.TEXT:case InsertionMode.IN_COLUMN_GROUP:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:case InsertionMode.IN_FRAMESET:case InsertionMode.AFTER_FRAMESET:this._insertCharacters(e);break;case InsertionMode.IN_BODY:case InsertionMode.IN_CAPTION:case InsertionMode.IN_CELL:case InsertionMode.IN_TEMPLATE:case InsertionMode.AFTER_BODY:case InsertionMode.AFTER_AFTER_BODY:case InsertionMode.AFTER_AFTER_FRAMESET:whitespaceCharacterInBody(this,e);break;case InsertionMode.IN_TABLE:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:characterInTable(this,e);break;case InsertionMode.IN_TABLE_TEXT:whitespaceCharacterInTableText(this,e)}}};function aaObtainFormattingElementEntry(e,t){let r=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return r?e.openElements.contains(r.element)?e.openElements.hasInScope(t.tagID)||(r=null):(e.activeFormattingElements.removeEntry(r),r=null):genericEndTagInBody(e,t),r}function aaObtainFurthestBlock(e,t){let r=null,n=e.openElements.stackTop;for(;n>=0;n--){const i=e.openElements.items[n];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[n])&&(r=i)}return r||(e.openElements.shortenToLength(Math.max(n,0)),e.activeFormattingElements.removeEntry(t)),r}function aaInnerLoop(e,t,r){let n=t,i=e.openElements.getCommonAncestor(t);for(let o=0,s=i;s!==r;o++,s=i){i=e.openElements.getCommonAncestor(s);const r=e.activeFormattingElements.getElementEntry(s),a=r&&o>=AA_INNER_LOOP_ITER;!r||a?(a&&e.activeFormattingElements.removeEntry(r),e.openElements.remove(s)):(s=aaRecreateElementFromEntry(e,r),n===t&&(e.activeFormattingElements.bookmark=r),e.treeAdapter.detachNode(n),e.treeAdapter.appendChild(s,n),n=s)}return n}function aaRecreateElementFromEntry(e,t){const r=e.treeAdapter.getNamespaceURI(t.element),n=e.treeAdapter.createElement(t.token.tagName,r,t.token.attrs);return e.openElements.replace(t.element,n),t.element=n,n}function aaInsertLastNodeInCommonAncestor(e,t,r){const n=getTagID(e.treeAdapter.getTagName(t));if(e._isElementCausesFosterParenting(n))e._fosterParentElement(r);else{const i=e.treeAdapter.getNamespaceURI(t);n===TAG_ID.TEMPLATE&&i===NS.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,r)}}function aaReplaceFormattingElement(e,t,r){const n=e.treeAdapter.getNamespaceURI(r.element),{token:i}=r,o=e.treeAdapter.createElement(i.tagName,n,i.attrs);e._adoptNodes(t,o),e.treeAdapter.appendChild(t,o),e.activeFormattingElements.insertElementAfterBookmark(o,i),e.activeFormattingElements.removeEntry(r),e.openElements.remove(r.element),e.openElements.insertAfter(t,o,i.tagID)}function callAdoptionAgency(e,t){for(let r=0;r<AA_OUTER_LOOP_ITER;r++){const r=aaObtainFormattingElementEntry(e,t);if(!r)break;const n=aaObtainFurthestBlock(e,r);if(!n)break;e.activeFormattingElements.bookmark=r;const i=aaInnerLoop(e,n,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(i),o&&aaInsertLastNodeInCommonAncestor(e,o,i),aaReplaceFormattingElement(e,n,r)}}function appendComment(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function appendCommentToRootHtmlElement(e,t){e._appendCommentNode(t,e.openElements.items[0])}function appendCommentToDocument(e,t){e._appendCommentNode(t,e.document)}function stopParsing(e,t){if(e.stopped=!0,t.location){const r=e.fragmentContext?0:2;for(let n=e.openElements.stackTop;n>=r;n--)e._setEndLocation(e.openElements.items[n],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],n=e.treeAdapter.getNodeSourceCodeLocation(r);if(n&&!n.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const r=e.openElements.items[1],n=e.treeAdapter.getNodeSourceCodeLocation(r);n&&!n.endTag&&e._setEndLocation(r,t)}}}}function doctypeInInitialMode(e,t){e._setDocumentType(t);const r=t.forceQuirks?DOCUMENT_MODE.QUIRKS:getDocumentMode(t);isConforming(t)||e._err(t,ERR.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,r),e.insertionMode=InsertionMode.BEFORE_HTML}function tokenInInitialMode(e,t){e._err(t,ERR.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,DOCUMENT_MODE.QUIRKS),e.insertionMode=InsertionMode.BEFORE_HTML,e._processToken(t)}function startTagBeforeHtml(e,t){t.tagID===TAG_ID.HTML?(e._insertElement(t,NS.HTML),e.insertionMode=InsertionMode.BEFORE_HEAD):tokenBeforeHtml(e,t)}function endTagBeforeHtml(e,t){const r=t.tagID;r!==TAG_ID.HTML&&r!==TAG_ID.HEAD&&r!==TAG_ID.BODY&&r!==TAG_ID.BR||tokenBeforeHtml(e,t)}function tokenBeforeHtml(e,t){e._insertFakeRootElement(),e.insertionMode=InsertionMode.BEFORE_HEAD,e._processToken(t)}function startTagBeforeHead(e,t){switch(t.tagID){case TAG_ID.HTML:startTagInBody(e,t);break;case TAG_ID.HEAD:e._insertElement(t,NS.HTML),e.headElement=e.openElements.current,e.insertionMode=InsertionMode.IN_HEAD;break;default:tokenBeforeHead(e,t)}}function endTagBeforeHead(e,t){const r=t.tagID;r===TAG_ID.HEAD||r===TAG_ID.BODY||r===TAG_ID.HTML||r===TAG_ID.BR?tokenBeforeHead(e,t):e._err(t,ERR.endTagWithoutMatchingOpenElement)}function tokenBeforeHead(e,t){e._insertFakeElement(TAG_NAMES.HEAD,TAG_ID.HEAD),e.headElement=e.openElements.current,e.insertionMode=InsertionMode.IN_HEAD,e._processToken(t)}function startTagInHead(e,t){switch(t.tagID){case TAG_ID.HTML:startTagInBody(e,t);break;case TAG_ID.BASE:case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.LINK:case TAG_ID.META:e._appendElement(t,NS.HTML),t.ackSelfClosing=!0;break;case TAG_ID.TITLE:e._switchToTextParsing(t,TokenizerMode.RCDATA);break;case TAG_ID.NOSCRIPT:e.options.scriptingEnabled?e._switchToTextParsing(t,TokenizerMode.RAWTEXT):(e._insertElement(t,NS.HTML),e.insertionMode=InsertionMode.IN_HEAD_NO_SCRIPT);break;case TAG_ID.NOFRAMES:case TAG_ID.STYLE:e._switchToTextParsing(t,TokenizerMode.RAWTEXT);break;case TAG_ID.SCRIPT:e._switchToTextParsing(t,TokenizerMode.SCRIPT_DATA);break;case TAG_ID.TEMPLATE:e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=InsertionMode.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(InsertionMode.IN_TEMPLATE);break;case TAG_ID.HEAD:e._err(t,ERR.misplacedStartTagForHeadElement);break;default:tokenInHead(e,t)}}function endTagInHead(e,t){switch(t.tagID){case TAG_ID.HEAD:e.openElements.pop(),e.insertionMode=InsertionMode.AFTER_HEAD;break;case TAG_ID.BODY:case TAG_ID.BR:case TAG_ID.HTML:tokenInHead(e,t);break;case TAG_ID.TEMPLATE:templateEndTagInHead(e,t);break;default:e._err(t,ERR.endTagWithoutMatchingOpenElement)}}function templateEndTagInHead(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==TAG_ID.TEMPLATE&&e._err(t,ERR.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,ERR.endTagWithoutMatchingOpenElement)}function tokenInHead(e,t){e.openElements.pop(),e.insertionMode=InsertionMode.AFTER_HEAD,e._processToken(t)}function startTagInHeadNoScript(e,t){switch(t.tagID){case TAG_ID.HTML:startTagInBody(e,t);break;case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.HEAD:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.NOFRAMES:case TAG_ID.STYLE:startTagInHead(e,t);break;case TAG_ID.NOSCRIPT:e._err(t,ERR.nestedNoscriptInHead);break;default:tokenInHeadNoScript(e,t)}}function endTagInHeadNoScript(e,t){switch(t.tagID){case TAG_ID.NOSCRIPT:e.openElements.pop(),e.insertionMode=InsertionMode.IN_HEAD;break;case TAG_ID.BR:tokenInHeadNoScript(e,t);break;default:e._err(t,ERR.endTagWithoutMatchingOpenElement)}}function tokenInHeadNoScript(e,t){const r=t.type===TokenType.EOF?ERR.openElementsLeftAfterEof:ERR.disallowedContentInNoscriptInHead;e._err(t,r),e.openElements.pop(),e.insertionMode=InsertionMode.IN_HEAD,e._processToken(t)}function startTagAfterHead(e,t){switch(t.tagID){case TAG_ID.HTML:startTagInBody(e,t);break;case TAG_ID.BODY:e._insertElement(t,NS.HTML),e.framesetOk=!1,e.insertionMode=InsertionMode.IN_BODY;break;case TAG_ID.FRAMESET:e._insertElement(t,NS.HTML),e.insertionMode=InsertionMode.IN_FRAMESET;break;case TAG_ID.BASE:case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.NOFRAMES:case TAG_ID.SCRIPT:case TAG_ID.STYLE:case TAG_ID.TEMPLATE:case TAG_ID.TITLE:e._err(t,ERR.abandonedHeadElementChild),e.openElements.push(e.headElement,TAG_ID.HEAD),startTagInHead(e,t),e.openElements.remove(e.headElement);break;case TAG_ID.HEAD:e._err(t,ERR.misplacedStartTagForHeadElement);break;default:tokenAfterHead(e,t)}}function endTagAfterHead(e,t){switch(t.tagID){case TAG_ID.BODY:case TAG_ID.HTML:case TAG_ID.BR:tokenAfterHead(e,t);break;case TAG_ID.TEMPLATE:templateEndTagInHead(e,t);break;default:e._err(t,ERR.endTagWithoutMatchingOpenElement)}}function tokenAfterHead(e,t){e._insertFakeElement(TAG_NAMES.BODY,TAG_ID.BODY),e.insertionMode=InsertionMode.IN_BODY,modeInBody(e,t)}function modeInBody(e,t){switch(t.type){case TokenType.CHARACTER:characterInBody(e,t);break;case TokenType.WHITESPACE_CHARACTER:whitespaceCharacterInBody(e,t);break;case TokenType.COMMENT:appendComment(e,t);break;case TokenType.START_TAG:startTagInBody(e,t);break;case TokenType.END_TAG:endTagInBody(e,t);break;case TokenType.EOF:eofInBody(e,t)}}function whitespaceCharacterInBody(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function characterInBody(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function htmlStartTagInBody(e,t){0===e.openElements.tmplCount&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function bodyStartTagInBody(e,t){const r=e.openElements.tryPeekProperlyNestedBodyElement();r&&0===e.openElements.tmplCount&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(r,t.attrs))}function framesetStartTagInBody(e,t){const r=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&r&&(e.treeAdapter.detachNode(r),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,NS.HTML),e.insertionMode=InsertionMode.IN_FRAMESET)}function addressStartTagInBody(e,t){e.openElements.hasInButtonScope(TAG_ID.P)&&e._closePElement(),e._insertElement(t,NS.HTML)}function numberedHeaderStartTagInBody(e,t){e.openElements.hasInButtonScope(TAG_ID.P)&&e._closePElement(),void 0!==e.openElements.currentTagId&&NUMBERED_HEADERS.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,NS.HTML)}function preStartTagInBody(e,t){e.openElements.hasInButtonScope(TAG_ID.P)&&e._closePElement(),e._insertElement(t,NS.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function formStartTagInBody(e,t){const r=e.openElements.tmplCount>0;e.formElement&&!r||(e.openElements.hasInButtonScope(TAG_ID.P)&&e._closePElement(),e._insertElement(t,NS.HTML),r||(e.formElement=e.openElements.current))}function listItemStartTagInBody(e,t){e.framesetOk=!1;const r=t.tagID;for(let n=e.openElements.stackTop;n>=0;n--){const t=e.openElements.tagIDs[n];if(r===TAG_ID.LI&&t===TAG_ID.LI||(r===TAG_ID.DD||r===TAG_ID.DT)&&(t===TAG_ID.DD||t===TAG_ID.DT)){e.openElements.generateImpliedEndTagsWithExclusion(t),e.openElements.popUntilTagNamePopped(t);break}if(t!==TAG_ID.ADDRESS&&t!==TAG_ID.DIV&&t!==TAG_ID.P&&e._isSpecialElement(e.openElements.items[n],t))break}e.openElements.hasInButtonScope(TAG_ID.P)&&e._closePElement(),e._insertElement(t,NS.HTML)}function plaintextStartTagInBody(e,t){e.openElements.hasInButtonScope(TAG_ID.P)&&e._closePElement(),e._insertElement(t,NS.HTML),e.tokenizer.state=TokenizerMode.PLAINTEXT}function buttonStartTagInBody(e,t){e.openElements.hasInScope(TAG_ID.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(TAG_ID.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,NS.HTML),e.framesetOk=!1}function aStartTagInBody(e,t){const r=e.activeFormattingElements.getElementEntryInScopeWithTagName(TAG_NAMES.A);r&&(callAdoptionAgency(e,t),e.openElements.remove(r.element),e.activeFormattingElements.removeEntry(r)),e._reconstructActiveFormattingElements(),e._insertElement(t,NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function bStartTagInBody(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function nobrStartTagInBody(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(TAG_ID.NOBR)&&(callAdoptionAgency(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function appletStartTagInBody(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,NS.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function tableStartTagInBody(e,t){e.treeAdapter.getDocumentMode(e.document)!==DOCUMENT_MODE.QUIRKS&&e.openElements.hasInButtonScope(TAG_ID.P)&&e._closePElement(),e._insertElement(t,NS.HTML),e.framesetOk=!1,e.insertionMode=InsertionMode.IN_TABLE}function areaStartTagInBody(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,NS.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function isHiddenInput(e){const t=getTokenAttr(e,ATTRS.TYPE);return null!=t&&t.toLowerCase()===HIDDEN_INPUT_TYPE}function inputStartTagInBody(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,NS.HTML),isHiddenInput(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function paramStartTagInBody(e,t){e._appendElement(t,NS.HTML),t.ackSelfClosing=!0}function hrStartTagInBody(e,t){e.openElements.hasInButtonScope(TAG_ID.P)&&e._closePElement(),e._appendElement(t,NS.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function imageStartTagInBody(e,t){t.tagName=TAG_NAMES.IMG,t.tagID=TAG_ID.IMG,areaStartTagInBody(e,t)}function textareaStartTagInBody(e,t){e._insertElement(t,NS.HTML),e.skipNextNewLine=!0,e.tokenizer.state=TokenizerMode.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=InsertionMode.TEXT}function xmpStartTagInBody(e,t){e.openElements.hasInButtonScope(TAG_ID.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,TokenizerMode.RAWTEXT)}function iframeStartTagInBody(e,t){e.framesetOk=!1,e._switchToTextParsing(t,TokenizerMode.RAWTEXT)}function rawTextStartTagInBody(e,t){e._switchToTextParsing(t,TokenizerMode.RAWTEXT)}function selectStartTagInBody(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,NS.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===InsertionMode.IN_TABLE||e.insertionMode===InsertionMode.IN_CAPTION||e.insertionMode===InsertionMode.IN_TABLE_BODY||e.insertionMode===InsertionMode.IN_ROW||e.insertionMode===InsertionMode.IN_CELL?InsertionMode.IN_SELECT_IN_TABLE:InsertionMode.IN_SELECT}function optgroupStartTagInBody(e,t){e.openElements.currentTagId===TAG_ID.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,NS.HTML)}function rbStartTagInBody(e,t){e.openElements.hasInScope(TAG_ID.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,NS.HTML)}function rtStartTagInBody(e,t){e.openElements.hasInScope(TAG_ID.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(TAG_ID.RTC),e._insertElement(t,NS.HTML)}function mathStartTagInBody(e,t){e._reconstructActiveFormattingElements(),adjustTokenMathMLAttrs(t),adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,NS.MATHML):e._insertElement(t,NS.MATHML),t.ackSelfClosing=!0}function svgStartTagInBody(e,t){e._reconstructActiveFormattingElements(),adjustTokenSVGAttrs(t),adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,NS.SVG):e._insertElement(t,NS.SVG),t.ackSelfClosing=!0}function genericStartTagInBody(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,NS.HTML)}function startTagInBody(e,t){switch(t.tagID){case TAG_ID.I:case TAG_ID.S:case TAG_ID.B:case TAG_ID.U:case TAG_ID.EM:case TAG_ID.TT:case TAG_ID.BIG:case TAG_ID.CODE:case TAG_ID.FONT:case TAG_ID.SMALL:case TAG_ID.STRIKE:case TAG_ID.STRONG:bStartTagInBody(e,t);break;case TAG_ID.A:aStartTagInBody(e,t);break;case TAG_ID.H1:case TAG_ID.H2:case TAG_ID.H3:case TAG_ID.H4:case TAG_ID.H5:case TAG_ID.H6:numberedHeaderStartTagInBody(e,t);break;case TAG_ID.P:case TAG_ID.DL:case TAG_ID.OL:case TAG_ID.UL:case TAG_ID.DIV:case TAG_ID.DIR:case TAG_ID.NAV:case TAG_ID.MAIN:case TAG_ID.MENU:case TAG_ID.ASIDE:case TAG_ID.CENTER:case TAG_ID.FIGURE:case TAG_ID.FOOTER:case TAG_ID.HEADER:case TAG_ID.HGROUP:case TAG_ID.DIALOG:case TAG_ID.DETAILS:case TAG_ID.ADDRESS:case TAG_ID.ARTICLE:case TAG_ID.SEARCH:case TAG_ID.SECTION:case TAG_ID.SUMMARY:case TAG_ID.FIELDSET:case TAG_ID.BLOCKQUOTE:case TAG_ID.FIGCAPTION:addressStartTagInBody(e,t);break;case TAG_ID.LI:case TAG_ID.DD:case TAG_ID.DT:listItemStartTagInBody(e,t);break;case TAG_ID.BR:case TAG_ID.IMG:case TAG_ID.WBR:case TAG_ID.AREA:case TAG_ID.EMBED:case TAG_ID.KEYGEN:areaStartTagInBody(e,t);break;case TAG_ID.HR:hrStartTagInBody(e,t);break;case TAG_ID.RB:case TAG_ID.RTC:rbStartTagInBody(e,t);break;case TAG_ID.RT:case TAG_ID.RP:rtStartTagInBody(e,t);break;case TAG_ID.PRE:case TAG_ID.LISTING:preStartTagInBody(e,t);break;case TAG_ID.XMP:xmpStartTagInBody(e,t);break;case TAG_ID.SVG:svgStartTagInBody(e,t);break;case TAG_ID.HTML:htmlStartTagInBody(e,t);break;case TAG_ID.BASE:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.STYLE:case TAG_ID.TITLE:case TAG_ID.SCRIPT:case TAG_ID.BGSOUND:case TAG_ID.BASEFONT:case TAG_ID.TEMPLATE:startTagInHead(e,t);break;case TAG_ID.BODY:bodyStartTagInBody(e,t);break;case TAG_ID.FORM:formStartTagInBody(e,t);break;case TAG_ID.NOBR:nobrStartTagInBody(e,t);break;case TAG_ID.MATH:mathStartTagInBody(e,t);break;case TAG_ID.TABLE:tableStartTagInBody(e,t);break;case TAG_ID.INPUT:inputStartTagInBody(e,t);break;case TAG_ID.PARAM:case TAG_ID.TRACK:case TAG_ID.SOURCE:paramStartTagInBody(e,t);break;case TAG_ID.IMAGE:imageStartTagInBody(e,t);break;case TAG_ID.BUTTON:buttonStartTagInBody(e,t);break;case TAG_ID.APPLET:case TAG_ID.OBJECT:case TAG_ID.MARQUEE:appletStartTagInBody(e,t);break;case TAG_ID.IFRAME:iframeStartTagInBody(e,t);break;case TAG_ID.SELECT:selectStartTagInBody(e,t);break;case TAG_ID.OPTION:case TAG_ID.OPTGROUP:optgroupStartTagInBody(e,t);break;case TAG_ID.NOEMBED:case TAG_ID.NOFRAMES:rawTextStartTagInBody(e,t);break;case TAG_ID.FRAMESET:framesetStartTagInBody(e,t);break;case TAG_ID.TEXTAREA:textareaStartTagInBody(e,t);break;case TAG_ID.NOSCRIPT:e.options.scriptingEnabled?rawTextStartTagInBody(e,t):genericStartTagInBody(e,t);break;case TAG_ID.PLAINTEXT:plaintextStartTagInBody(e,t);break;case TAG_ID.COL:case TAG_ID.TH:case TAG_ID.TD:case TAG_ID.TR:case TAG_ID.HEAD:case TAG_ID.FRAME:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:case TAG_ID.CAPTION:case TAG_ID.COLGROUP:break;default:genericStartTagInBody(e,t)}}function bodyEndTagInBody(e,t){if(e.openElements.hasInScope(TAG_ID.BODY)&&(e.insertionMode=InsertionMode.AFTER_BODY,e.options.sourceCodeLocationInfo)){const r=e.openElements.tryPeekProperlyNestedBodyElement();r&&e._setEndLocation(r,t)}}function htmlEndTagInBody(e,t){e.openElements.hasInScope(TAG_ID.BODY)&&(e.insertionMode=InsertionMode.AFTER_BODY,endTagAfterBody(e,t))}function addressEndTagInBody(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r))}function formEndTagInBody(e){const t=e.openElements.tmplCount>0,{formElement:r}=e;t||(e.formElement=null),(r||t)&&e.openElements.hasInScope(TAG_ID.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(TAG_ID.FORM):r&&e.openElements.remove(r))}function pEndTagInBody(e){e.openElements.hasInButtonScope(TAG_ID.P)||e._insertFakeElement(TAG_NAMES.P,TAG_ID.P),e._closePElement()}function liEndTagInBody(e){e.openElements.hasInListItemScope(TAG_ID.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(TAG_ID.LI),e.openElements.popUntilTagNamePopped(TAG_ID.LI))}function ddEndTagInBody(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.popUntilTagNamePopped(r))}function numberedHeaderEndTagInBody(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function appletEndTagInBody(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r),e.activeFormattingElements.clearToLastMarker())}function brEndTagInBody(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(TAG_NAMES.BR,TAG_ID.BR),e.openElements.pop(),e.framesetOk=!1}function genericEndTagInBody(e,t){const r=t.tagName,n=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const t=e.openElements.items[i],o=e.openElements.tagIDs[i];if(n===o&&(n!==TAG_ID.UNKNOWN||e.treeAdapter.getTagName(t)===r)){e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(t,o))break}}function endTagInBody(e,t){switch(t.tagID){case TAG_ID.A:case TAG_ID.B:case TAG_ID.I:case TAG_ID.S:case TAG_ID.U:case TAG_ID.EM:case TAG_ID.TT:case TAG_ID.BIG:case TAG_ID.CODE:case TAG_ID.FONT:case TAG_ID.NOBR:case TAG_ID.SMALL:case TAG_ID.STRIKE:case TAG_ID.STRONG:callAdoptionAgency(e,t);break;case TAG_ID.P:pEndTagInBody(e);break;case TAG_ID.DL:case TAG_ID.UL:case TAG_ID.OL:case TAG_ID.DIR:case TAG_ID.DIV:case TAG_ID.NAV:case TAG_ID.PRE:case TAG_ID.MAIN:case TAG_ID.MENU:case TAG_ID.ASIDE:case TAG_ID.BUTTON:case TAG_ID.CENTER:case TAG_ID.FIGURE:case TAG_ID.FOOTER:case TAG_ID.HEADER:case TAG_ID.HGROUP:case TAG_ID.DIALOG:case TAG_ID.ADDRESS:case TAG_ID.ARTICLE:case TAG_ID.DETAILS:case TAG_ID.SEARCH:case TAG_ID.SECTION:case TAG_ID.SUMMARY:case TAG_ID.LISTING:case TAG_ID.FIELDSET:case TAG_ID.BLOCKQUOTE:case TAG_ID.FIGCAPTION:addressEndTagInBody(e,t);break;case TAG_ID.LI:liEndTagInBody(e);break;case TAG_ID.DD:case TAG_ID.DT:ddEndTagInBody(e,t);break;case TAG_ID.H1:case TAG_ID.H2:case TAG_ID.H3:case TAG_ID.H4:case TAG_ID.H5:case TAG_ID.H6:numberedHeaderEndTagInBody(e);break;case TAG_ID.BR:brEndTagInBody(e);break;case TAG_ID.BODY:bodyEndTagInBody(e,t);break;case TAG_ID.HTML:htmlEndTagInBody(e,t);break;case TAG_ID.FORM:formEndTagInBody(e);break;case TAG_ID.APPLET:case TAG_ID.OBJECT:case TAG_ID.MARQUEE:appletEndTagInBody(e,t);break;case TAG_ID.TEMPLATE:templateEndTagInHead(e,t);break;default:genericEndTagInBody(e,t)}}function eofInBody(e,t){e.tmplInsertionModeStack.length>0?eofInTemplate(e,t):stopParsing(e,t)}function endTagInText(e,t){var r;t.tagID===TAG_ID.SCRIPT&&(null===(r=e.scriptHandler)||void 0===r||r.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function eofInText(e,t){e._err(t,ERR.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function characterInTable(e,t){if(void 0!==e.openElements.currentTagId&&TABLE_STRUCTURE_TAGS.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=InsertionMode.IN_TABLE_TEXT,t.type){case TokenType.CHARACTER:characterInTableText(e,t);break;case TokenType.WHITESPACE_CHARACTER:whitespaceCharacterInTableText(e,t)}else tokenInTable(e,t)}function captionStartTagInTable(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,NS.HTML),e.insertionMode=InsertionMode.IN_CAPTION}function colgroupStartTagInTable(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,NS.HTML),e.insertionMode=InsertionMode.IN_COLUMN_GROUP}function colStartTagInTable(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(TAG_NAMES.COLGROUP,TAG_ID.COLGROUP),e.insertionMode=InsertionMode.IN_COLUMN_GROUP,startTagInColumnGroup(e,t)}function tbodyStartTagInTable(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,NS.HTML),e.insertionMode=InsertionMode.IN_TABLE_BODY}function tdStartTagInTable(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(TAG_NAMES.TBODY,TAG_ID.TBODY),e.insertionMode=InsertionMode.IN_TABLE_BODY,startTagInTableBody(e,t)}function tableStartTagInTable(e,t){e.openElements.hasInTableScope(TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(TAG_ID.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function inputStartTagInTable(e,t){isHiddenInput(t)?e._appendElement(t,NS.HTML):tokenInTable(e,t),t.ackSelfClosing=!0}function formStartTagInTable(e,t){e.formElement||0!==e.openElements.tmplCount||(e._insertElement(t,NS.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function startTagInTable(e,t){switch(t.tagID){case TAG_ID.TD:case TAG_ID.TH:case TAG_ID.TR:tdStartTagInTable(e,t);break;case TAG_ID.STYLE:case TAG_ID.SCRIPT:case TAG_ID.TEMPLATE:startTagInHead(e,t);break;case TAG_ID.COL:colStartTagInTable(e,t);break;case TAG_ID.FORM:formStartTagInTable(e,t);break;case TAG_ID.TABLE:tableStartTagInTable(e,t);break;case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:tbodyStartTagInTable(e,t);break;case TAG_ID.INPUT:inputStartTagInTable(e,t);break;case TAG_ID.CAPTION:captionStartTagInTable(e,t);break;case TAG_ID.COLGROUP:colgroupStartTagInTable(e,t);break;default:tokenInTable(e,t)}}function endTagInTable(e,t){switch(t.tagID){case TAG_ID.TABLE:e.openElements.hasInTableScope(TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(TAG_ID.TABLE),e._resetInsertionMode());break;case TAG_ID.TEMPLATE:templateEndTagInHead(e,t);break;case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TBODY:case TAG_ID.TD:case TAG_ID.TFOOT:case TAG_ID.TH:case TAG_ID.THEAD:case TAG_ID.TR:break;default:tokenInTable(e,t)}}function tokenInTable(e,t){const r=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,modeInBody(e,t),e.fosterParentingEnabled=r}function whitespaceCharacterInTableText(e,t){e.pendingCharacterTokens.push(t)}function characterInTableText(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function tokenInTableText(e,t){let r=0;if(e.hasNonWhitespacePendingCharacterToken)for(;r<e.pendingCharacterTokens.length;r++)tokenInTable(e,e.pendingCharacterTokens[r]);else for(;r<e.pendingCharacterTokens.length;r++)e._insertCharacters(e.pendingCharacterTokens[r]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const TABLE_VOID_ELEMENTS=new Set([TAG_ID.CAPTION,TAG_ID.COL,TAG_ID.COLGROUP,TAG_ID.TBODY,TAG_ID.TD,TAG_ID.TFOOT,TAG_ID.TH,TAG_ID.THEAD,TAG_ID.TR]);function startTagInCaption(e,t){const r=t.tagID;TABLE_VOID_ELEMENTS.has(r)?e.openElements.hasInTableScope(TAG_ID.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(TAG_ID.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=InsertionMode.IN_TABLE,startTagInTable(e,t)):startTagInBody(e,t)}function endTagInCaption(e,t){const r=t.tagID;switch(r){case TAG_ID.CAPTION:case TAG_ID.TABLE:e.openElements.hasInTableScope(TAG_ID.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(TAG_ID.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=InsertionMode.IN_TABLE,r===TAG_ID.TABLE&&endTagInTable(e,t));break;case TAG_ID.BODY:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TBODY:case TAG_ID.TD:case TAG_ID.TFOOT:case TAG_ID.TH:case TAG_ID.THEAD:case TAG_ID.TR:break;default:endTagInBody(e,t)}}function startTagInColumnGroup(e,t){switch(t.tagID){case TAG_ID.HTML:startTagInBody(e,t);break;case TAG_ID.COL:e._appendElement(t,NS.HTML),t.ackSelfClosing=!0;break;case TAG_ID.TEMPLATE:startTagInHead(e,t);break;default:tokenInColumnGroup(e,t)}}function endTagInColumnGroup(e,t){switch(t.tagID){case TAG_ID.COLGROUP:e.openElements.currentTagId===TAG_ID.COLGROUP&&(e.openElements.pop(),e.insertionMode=InsertionMode.IN_TABLE);break;case TAG_ID.TEMPLATE:templateEndTagInHead(e,t);break;case TAG_ID.COL:break;default:tokenInColumnGroup(e,t)}}function tokenInColumnGroup(e,t){e.openElements.currentTagId===TAG_ID.COLGROUP&&(e.openElements.pop(),e.insertionMode=InsertionMode.IN_TABLE,e._processToken(t))}function startTagInTableBody(e,t){switch(t.tagID){case TAG_ID.TR:e.openElements.clearBackToTableBodyContext(),e._insertElement(t,NS.HTML),e.insertionMode=InsertionMode.IN_ROW;break;case TAG_ID.TH:case TAG_ID.TD:e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(TAG_NAMES.TR,TAG_ID.TR),e.insertionMode=InsertionMode.IN_ROW,startTagInRow(e,t);break;case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=InsertionMode.IN_TABLE,startTagInTable(e,t));break;default:startTagInTable(e,t)}}function endTagInTableBody(e,t){const r=t.tagID;switch(t.tagID){case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:e.openElements.hasInTableScope(r)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=InsertionMode.IN_TABLE);break;case TAG_ID.TABLE:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=InsertionMode.IN_TABLE,endTagInTable(e,t));break;case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TD:case TAG_ID.TH:case TAG_ID.TR:break;default:endTagInTable(e,t)}}function startTagInRow(e,t){switch(t.tagID){case TAG_ID.TH:case TAG_ID.TD:e.openElements.clearBackToTableRowContext(),e._insertElement(t,NS.HTML),e.insertionMode=InsertionMode.IN_CELL,e.activeFormattingElements.insertMarker();break;case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:case TAG_ID.TR:e.openElements.hasInTableScope(TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=InsertionMode.IN_TABLE_BODY,startTagInTableBody(e,t));break;default:startTagInTable(e,t)}}function endTagInRow(e,t){switch(t.tagID){case TAG_ID.TR:e.openElements.hasInTableScope(TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=InsertionMode.IN_TABLE_BODY);break;case TAG_ID.TABLE:e.openElements.hasInTableScope(TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=InsertionMode.IN_TABLE_BODY,endTagInTableBody(e,t));break;case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(TAG_ID.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=InsertionMode.IN_TABLE_BODY,endTagInTableBody(e,t));break;case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TD:case TAG_ID.TH:break;default:endTagInTable(e,t)}}function startTagInCell(e,t){const r=t.tagID;TABLE_VOID_ELEMENTS.has(r)?(e.openElements.hasInTableScope(TAG_ID.TD)||e.openElements.hasInTableScope(TAG_ID.TH))&&(e._closeTableCell(),startTagInRow(e,t)):startTagInBody(e,t)}function endTagInCell(e,t){const r=t.tagID;switch(r){case TAG_ID.TD:case TAG_ID.TH:e.openElements.hasInTableScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=InsertionMode.IN_ROW);break;case TAG_ID.TABLE:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:case TAG_ID.TR:e.openElements.hasInTableScope(r)&&(e._closeTableCell(),endTagInRow(e,t));break;case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:break;default:endTagInBody(e,t)}}function startTagInSelect(e,t){switch(t.tagID){case TAG_ID.HTML:startTagInBody(e,t);break;case TAG_ID.OPTION:e.openElements.currentTagId===TAG_ID.OPTION&&e.openElements.pop(),e._insertElement(t,NS.HTML);break;case TAG_ID.OPTGROUP:e.openElements.currentTagId===TAG_ID.OPTION&&e.openElements.pop(),e.openElements.currentTagId===TAG_ID.OPTGROUP&&e.openElements.pop(),e._insertElement(t,NS.HTML);break;case TAG_ID.HR:e.openElements.currentTagId===TAG_ID.OPTION&&e.openElements.pop(),e.openElements.currentTagId===TAG_ID.OPTGROUP&&e.openElements.pop(),e._appendElement(t,NS.HTML),t.ackSelfClosing=!0;break;case TAG_ID.INPUT:case TAG_ID.KEYGEN:case TAG_ID.TEXTAREA:case TAG_ID.SELECT:e.openElements.hasInSelectScope(TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(TAG_ID.SELECT),e._resetInsertionMode(),t.tagID!==TAG_ID.SELECT&&e._processStartTag(t));break;case TAG_ID.SCRIPT:case TAG_ID.TEMPLATE:startTagInHead(e,t)}}function endTagInSelect(e,t){switch(t.tagID){case TAG_ID.OPTGROUP:e.openElements.stackTop>0&&e.openElements.currentTagId===TAG_ID.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===TAG_ID.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===TAG_ID.OPTGROUP&&e.openElements.pop();break;case TAG_ID.OPTION:e.openElements.currentTagId===TAG_ID.OPTION&&e.openElements.pop();break;case TAG_ID.SELECT:e.openElements.hasInSelectScope(TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(TAG_ID.SELECT),e._resetInsertionMode());break;case TAG_ID.TEMPLATE:templateEndTagInHead(e,t)}}function startTagInSelectInTable(e,t){const r=t.tagID;r===TAG_ID.CAPTION||r===TAG_ID.TABLE||r===TAG_ID.TBODY||r===TAG_ID.TFOOT||r===TAG_ID.THEAD||r===TAG_ID.TR||r===TAG_ID.TD||r===TAG_ID.TH?(e.openElements.popUntilTagNamePopped(TAG_ID.SELECT),e._resetInsertionMode(),e._processStartTag(t)):startTagInSelect(e,t)}function endTagInSelectInTable(e,t){const r=t.tagID;r===TAG_ID.CAPTION||r===TAG_ID.TABLE||r===TAG_ID.TBODY||r===TAG_ID.TFOOT||r===TAG_ID.THEAD||r===TAG_ID.TR||r===TAG_ID.TD||r===TAG_ID.TH?e.openElements.hasInTableScope(r)&&(e.openElements.popUntilTagNamePopped(TAG_ID.SELECT),e._resetInsertionMode(),e.onEndTag(t)):endTagInSelect(e,t)}function startTagInTemplate(e,t){switch(t.tagID){case TAG_ID.BASE:case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.NOFRAMES:case TAG_ID.SCRIPT:case TAG_ID.STYLE:case TAG_ID.TEMPLATE:case TAG_ID.TITLE:startTagInHead(e,t);break;case TAG_ID.CAPTION:case TAG_ID.COLGROUP:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:e.tmplInsertionModeStack[0]=InsertionMode.IN_TABLE,e.insertionMode=InsertionMode.IN_TABLE,startTagInTable(e,t);break;case TAG_ID.COL:e.tmplInsertionModeStack[0]=InsertionMode.IN_COLUMN_GROUP,e.insertionMode=InsertionMode.IN_COLUMN_GROUP,startTagInColumnGroup(e,t);break;case TAG_ID.TR:e.tmplInsertionModeStack[0]=InsertionMode.IN_TABLE_BODY,e.insertionMode=InsertionMode.IN_TABLE_BODY,startTagInTableBody(e,t);break;case TAG_ID.TD:case TAG_ID.TH:e.tmplInsertionModeStack[0]=InsertionMode.IN_ROW,e.insertionMode=InsertionMode.IN_ROW,startTagInRow(e,t);break;default:e.tmplInsertionModeStack[0]=InsertionMode.IN_BODY,e.insertionMode=InsertionMode.IN_BODY,startTagInBody(e,t)}}function endTagInTemplate(e,t){t.tagID===TAG_ID.TEMPLATE&&templateEndTagInHead(e,t)}function eofInTemplate(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):stopParsing(e,t)}function startTagAfterBody(e,t){t.tagID===TAG_ID.HTML?startTagInBody(e,t):tokenAfterBody(e,t)}function endTagAfterBody(e,t){var r;if(t.tagID===TAG_ID.HTML){if(e.fragmentContext||(e.insertionMode=InsertionMode.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===TAG_ID.HTML){e._setEndLocation(e.openElements.items[0],t);const n=e.openElements.items[1];n&&!(null===(r=e.treeAdapter.getNodeSourceCodeLocation(n))||void 0===r?void 0:r.endTag)&&e._setEndLocation(n,t)}}else tokenAfterBody(e,t)}function tokenAfterBody(e,t){e.insertionMode=InsertionMode.IN_BODY,modeInBody(e,t)}function startTagInFrameset(e,t){switch(t.tagID){case TAG_ID.HTML:startTagInBody(e,t);break;case TAG_ID.FRAMESET:e._insertElement(t,NS.HTML);break;case TAG_ID.FRAME:e._appendElement(t,NS.HTML),t.ackSelfClosing=!0;break;case TAG_ID.NOFRAMES:startTagInHead(e,t)}}function endTagInFrameset(e,t){t.tagID!==TAG_ID.FRAMESET||e.openElements.isRootHtmlElementCurrent()||(e.openElements.pop(),e.fragmentContext||e.openElements.currentTagId===TAG_ID.FRAMESET||(e.insertionMode=InsertionMode.AFTER_FRAMESET))}function startTagAfterFrameset(e,t){switch(t.tagID){case TAG_ID.HTML:startTagInBody(e,t);break;case TAG_ID.NOFRAMES:startTagInHead(e,t)}}function endTagAfterFrameset(e,t){t.tagID===TAG_ID.HTML&&(e.insertionMode=InsertionMode.AFTER_AFTER_FRAMESET)}function startTagAfterAfterBody(e,t){t.tagID===TAG_ID.HTML?startTagInBody(e,t):tokenAfterAfterBody(e,t)}function tokenAfterAfterBody(e,t){e.insertionMode=InsertionMode.IN_BODY,modeInBody(e,t)}function startTagAfterAfterFrameset(e,t){switch(t.tagID){case TAG_ID.HTML:startTagInBody(e,t);break;case TAG_ID.NOFRAMES:startTagInHead(e,t)}}function nullCharacterInForeignContent(e,t){t.chars=REPLACEMENT_CHARACTER,e._insertCharacters(t)}function characterInForeignContent(e,t){e._insertCharacters(t),e.framesetOk=!1}function popUntilHtmlOrIntegrationPoint(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==NS.HTML&&void 0!==e.openElements.currentTagId&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function startTagInForeignContent(e,t){if(causesExit(t))popUntilHtmlOrIntegrationPoint(e),e._startTagOutsideForeignContent(t);else{const r=e._getAdjustedCurrentElement(),n=e.treeAdapter.getNamespaceURI(r);n===NS.MATHML?adjustTokenMathMLAttrs(t):n===NS.SVG&&(adjustTokenSVGTagName(t),adjustTokenSVGAttrs(t)),adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,n):e._insertElement(t,n),t.ackSelfClosing=!0}}function endTagInForeignContent(e,t){if(t.tagID===TAG_ID.P||t.tagID===TAG_ID.BR)return popUntilHtmlOrIntegrationPoint(e),void e._endTagOutsideForeignContent(t);for(let r=e.openElements.stackTop;r>0;r--){const n=e.openElements.items[r];if(e.treeAdapter.getNamespaceURI(n)===NS.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(n);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(r);break}}}function getEscaper(e,t){return function(r){let n,i=0,o="";for(;n=e.exec(r);)i!==n.index&&(o+=r.substring(i,n.index)),o+=t.get(n[0].charCodeAt(0)),i=n.index+1;return o+r.substring(i)}}const escapeAttribute=getEscaper(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),escapeText=getEscaper(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),VOID_ELEMENTS=new Set([TAG_NAMES.AREA,TAG_NAMES.BASE,TAG_NAMES.BASEFONT,TAG_NAMES.BGSOUND,TAG_NAMES.BR,TAG_NAMES.COL,TAG_NAMES.EMBED,TAG_NAMES.FRAME,TAG_NAMES.HR,TAG_NAMES.IMG,TAG_NAMES.INPUT,TAG_NAMES.KEYGEN,TAG_NAMES.LINK,TAG_NAMES.META,TAG_NAMES.PARAM,TAG_NAMES.SOURCE,TAG_NAMES.TRACK,TAG_NAMES.WBR]);function isVoidElement(e,t){return t.treeAdapter.isElementNode(e)&&t.treeAdapter.getNamespaceURI(e)===NS.HTML&&VOID_ELEMENTS.has(t.treeAdapter.getTagName(e))}const defaultOpts={treeAdapter:defaultTreeAdapter,scriptingEnabled:!0};function serializeOuter(e,t){return serializeNode(e,{...defaultOpts,...t})}function serializeChildNodes(e,t){let r="";const n=t.treeAdapter.isElementNode(e)&&t.treeAdapter.getTagName(e)===TAG_NAMES.TEMPLATE&&t.treeAdapter.getNamespaceURI(e)===NS.HTML?t.treeAdapter.getTemplateContent(e):e,i=t.treeAdapter.getChildNodes(n);if(i)for(const o of i)r+=serializeNode(o,t);return r}function serializeNode(e,t){return t.treeAdapter.isElementNode(e)?serializeElement(e,t):t.treeAdapter.isTextNode(e)?serializeTextNode(e,t):t.treeAdapter.isCommentNode(e)?serializeCommentNode(e,t):t.treeAdapter.isDocumentTypeNode(e)?serializeDocumentTypeNode(e,t):""}function serializeElement(e,t){const r=t.treeAdapter.getTagName(e);return`<${r}${serializeAttributes(e,t)}>${isVoidElement(e,t)?"":`${serializeChildNodes(e,t)}</${r}>`}`}function serializeAttributes(e,{treeAdapter:t}){let r="";for(const n of t.getAttrList(e)){if(r+=" ",n.namespace)switch(n.namespace){case NS.XML:r+=`xml:${n.name}`;break;case NS.XMLNS:"xmlns"!==n.name&&(r+="xmlns:"),r+=n.name;break;case NS.XLINK:r+=`xlink:${n.name}`;break;default:r+=`${n.prefix}:${n.name}`}else r+=n.name;r+=`="${escapeAttribute(n.value)}"`}return r}function serializeTextNode(e,t){const{treeAdapter:r}=t,n=r.getTextNodeContent(e),i=r.getParentNode(e),o=i&&r.isElementNode(i)&&r.getTagName(i);return o&&r.getNamespaceURI(i)===NS.HTML&&hasUnescapedText(o,t.scriptingEnabled)?n:escapeText(n)}function serializeCommentNode(e,{treeAdapter:t}){return`\x3c!--${t.getCommentNodeContent(e)}--\x3e`}function serializeDocumentTypeNode(e,{treeAdapter:t}){return`<!DOCTYPE ${t.getDocumentTypeNodeName(e)}>`}function parse$3(e,t){return Parser$1.parse(e,t)}function parseFragment(e,t,r){"string"==typeof e&&(r=t,t=e,e=null);const n=Parser$1.getFragmentParser(e,r);return n.tokenizer.write(t,!0),n.getFragment()}function enquoteDoctypeId(e){const t=e.includes('"')?"'":'"';return t+e+t}function serializeDoctypeContent(e,t,r){let n="!DOCTYPE ";return e&&(n+=e),t?n+=` PUBLIC ${enquoteDoctypeId(t)}`:r&&(n+=" SYSTEM"),r&&(n+=` ${enquoteDoctypeId(r)}`),n}const adapter={isCommentNode:isComment,isElementNode:isTag,isTextNode:isText,createDocument(){const e=new Document([]);return e["x-mode"]=DOCUMENT_MODE.NO_QUIRKS,e},createDocumentFragment:()=>new Document([]),createElement(e,t,r){const n=Object.create(null),i=Object.create(null),o=Object.create(null);for(let a=0;a<r.length;a++){const e=r[a].name;n[e]=r[a].value,i[e]=r[a].namespace,o[e]=r[a].prefix}const s=new Element$3(e,n,[]);return s.namespace=t,s["x-attribsNamespace"]=i,s["x-attribsPrefix"]=o,s},createCommentNode:e=>new Comment(e),createTextNode:e=>new Text$1(e),appendChild(e,t){const r=e.children[e.children.length-1];r&&(r.next=t,t.prev=r),e.children.push(t),t.parent=e},insertBefore(e,t,r){const n=e.children.indexOf(r),{prev:i}=r;i&&(i.next=t,t.prev=i),r.prev=t,t.next=r,e.children.splice(n,0,t),t.parent=e},setTemplateContent(e,t){adapter.appendChild(e,t)},getTemplateContent:e=>e.children[0],setDocumentType(e,t,r,n){const i=serializeDoctypeContent(t,r,n);let o=e.children.find(e=>isDirective(e)&&"!doctype"===e.name);o?o.data=null!=i?i:null:(o=new ProcessingInstruction("!doctype",i),adapter.appendChild(e,o)),o["x-name"]=t,o["x-publicId"]=r,o["x-systemId"]=n},setDocumentMode(e,t){e["x-mode"]=t},getDocumentMode:e=>e["x-mode"],detachNode(e){if(e.parent){const t=e.parent.children.indexOf(e),{prev:r,next:n}=e;e.prev=null,e.next=null,r&&(r.next=n),n&&(n.prev=r),e.parent.children.splice(t,1),e.parent=null}},insertText(e,t){const r=e.children[e.children.length-1];r&&isText(r)?r.data+=t:adapter.appendChild(e,adapter.createTextNode(t))},insertTextBefore(e,t,r){const n=e.children[e.children.indexOf(r)-1];n&&isText(n)?n.data+=t:adapter.insertBefore(e,adapter.createTextNode(t),r)},adoptAttributes(e,t){for(let r=0;r<t.length;r++){const n=t[r].name;void 0===e.attribs[n]&&(e.attribs[n]=t[r].value,e["x-attribsNamespace"][n]=t[r].namespace,e["x-attribsPrefix"][n]=t[r].prefix)}},getFirstChild:e=>e.children[0],getChildNodes:e=>e.children,getParentNode:e=>e.parent,getAttrList:e=>e.attributes,getTagName:e=>e.name,getNamespaceURI:e=>e.namespace,getTextNodeContent:e=>e.data,getCommentNodeContent:e=>e.data,getDocumentTypeNodeName(e){var t;return null!==(t=e["x-name"])&&void 0!==t?t:""},getDocumentTypeNodePublicId(e){var t;return null!==(t=e["x-publicId"])&&void 0!==t?t:""},getDocumentTypeNodeSystemId(e){var t;return null!==(t=e["x-systemId"])&&void 0!==t?t:""},isDocumentTypeNode:e=>isDirective(e)&&"!doctype"===e.name,setNodeSourceCodeLocation(e,t){t&&(e.startIndex=t.startOffset,e.endIndex=t.endOffset),e.sourceCodeLocation=t},getNodeSourceCodeLocation:e=>e.sourceCodeLocation,updateNodeSourceCodeLocation(e,t){null!=t.endOffset&&(e.endIndex=t.endOffset),e.sourceCodeLocation={...e.sourceCodeLocation,...t}}};function parseWithParse5(e,t,r,n){var i;return null!==(i=t.treeAdapter)&&void 0!==i||(t.treeAdapter=adapter),!1!==t.scriptingEnabled&&(t.scriptingEnabled=!0),r?parse$3(e,t):parseFragment(n,e,t)}const renderOpts={treeAdapter:adapter};function renderWithParse5(e){const t="length"in e?e:[e];for(let n=0;n<t.length;n+=1){const e=t[n];isDocument(e)&&Array.prototype.splice.call(t,n,1,...e.children)}let r="";for(let n=0;n<t.length;n+=1)r+=serializeOuter(t[n],renderOpts);return r}const parse$2=getParse((e,t,r,n)=>t._useHtmlParser2?parseDocument(e,t):parseWithParse5(e,t,r,n)),load=getLoad(parse$2,(e,t)=>t._useHtmlParser2?render$4(e,t):renderWithParse5(e)),browser$2=Object.freeze(Object.defineProperty({__proto__:null,contains:contains$1,load:load,merge:merge},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace(browser$2);var css$1={},parse$1,hasRequiredParse$1,compiler,hasRequiredCompiler;function requireParse$1(){if(hasRequiredParse$1)return parse$1;hasRequiredParse$1=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function t(e){return e?e.replace(/^\s+|\s+$/g,""):""}function r(e,t){var n=e&&"string"==typeof e.type,i=n?e:t;for(var o in e){var s=e[o];Array.isArray(s)?s.forEach(function(e){r(e,i)}):s&&"object"==typeof s&&r(s,i)}return n&&Object.defineProperty(e,"parent",{configurable:!0,writable:!0,enumerable:!1,value:t||null}),e}return parse$1=function(n,i){i=i||{};var o=1,s=1;function a(e){var t=e.match(/\n/g);t&&(o+=t.length);var r=e.lastIndexOf("\n");s=~r?e.length-r:s+e.length}function l(){var e={line:o,column:s};return function(t){return t.position=new c(e),g(),t}}function c(e){this.start=e,this.end={line:o,column:s},this.source=i.source}c.prototype.content=n;var u=[];function d(e){var t=new Error(i.source+":"+o+":"+s+": "+e);if(t.reason=e,t.filename=i.source,t.line=o,t.column=s,t.source=n,!i.silent)throw t;u.push(t)}function p(){return m(/^{\s*/)}function h(){return m(/^}/)}function f(){var e,t=[];for(g(),b(t);n.length&&"}"!=n.charAt(0)&&(e=w()||k());)!1!==e&&(t.push(e),b(t));return t}function m(e){var t=e.exec(n);if(t){var r=t[0];return a(r),n=n.slice(r.length),t}}function g(){m(/^\s*/)}function b(e){var t;for(e=e||[];t=y();)!1!==t&&e.push(t);return e}function y(){var e=l();if("/"==n.charAt(0)&&"*"==n.charAt(1)){for(var t=2;""!=n.charAt(t)&&("*"!=n.charAt(t)||"/"!=n.charAt(t+1));)++t;if(t+=2,""===n.charAt(t-1))return d("End of comment missing");var r=n.slice(2,t-2);return s+=2,a(r),n=n.slice(t),s+=2,e({type:"comment",comment:r})}}function T(){var e=m(/^([^{]+)/);if(e)return t(e[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(e){return e.replace(/,/g,"")}).split(/\s*(?![^(]*\)),\s*/).map(function(e){return e.replace(/\u200C/g,",")})}function E(){var r=l(),n=m(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(n){if(n=t(n[0]),!m(/^:\s*/))return d("property missing ':'");var i=m(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),o=r({type:"declaration",property:n.replace(e,""),value:i?t(i[0]).replace(e,""):""});return m(/^[;\s]*/),o}}function O(){var e,t=[];if(!p())return d("missing '{'");for(b(t);e=E();)!1!==e&&(t.push(e),b(t));return h()?t:d("missing '}'")}function S(){for(var e,t=[],r=l();e=m(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)t.push(e[1]),m(/^,\s*/);if(t.length)return r({type:"keyframe",values:t,declarations:O()})}var x,v=C("import"),_=C("charset"),A=C("namespace");function C(e){var t=new RegExp("^@"+e+"\\s*([^;]+);");return function(){var r=l(),n=m(t);if(n){var i={type:e};return i[e]=n[1].trim(),r(i)}}}function w(){if("@"==n[0])return function(){var e=l();if(t=m(/^@([-\w]+)?keyframes\s*/)){var t,r=t[1];if(!(t=m(/^([-\w]+)\s*/)))return d("@keyframes missing name");var n,i=t[1];if(!p())return d("@keyframes missing '{'");for(var o=b();n=S();)o.push(n),o=o.concat(b());return h()?e({type:"keyframes",name:i,vendor:r,keyframes:o}):d("@keyframes missing '}'")}}()||function(){var e=l(),r=m(/^@media *([^{]+)/);if(r){var n=t(r[1]);if(!p())return d("@media missing '{'");var i=b().concat(f());return h()?e({type:"media",media:n,rules:i}):d("@media missing '}'")}}()||function(){var e=l(),r=m(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(r)return e({type:"custom-media",name:t(r[1]),media:t(r[2])})}()||function(){var e=l(),r=m(/^@supports *([^{]+)/);if(r){var n=t(r[1]);if(!p())return d("@supports missing '{'");var i=b().concat(f());return h()?e({type:"supports",supports:n,rules:i}):d("@supports missing '}'")}}()||v()||_()||A()||function(){var e=l(),r=m(/^@([-\w]+)?document *([^{]+)/);if(r){var n=t(r[1]),i=t(r[2]);if(!p())return d("@document missing '{'");var o=b().concat(f());return h()?e({type:"document",document:i,vendor:n,rules:o}):d("@document missing '}'")}}()||function(){var e=l();if(m(/^@page */)){var t=T()||[];if(!p())return d("@page missing '{'");for(var r,n=b();r=E();)n.push(r),n=n.concat(b());return h()?e({type:"page",selectors:t,declarations:n}):d("@page missing '}'")}}()||function(){var e=l();if(m(/^@host\s*/)){if(!p())return d("@host missing '{'");var t=b().concat(f());return h()?e({type:"host",rules:t}):d("@host missing '}'")}}()||function(){var e=l();if(m(/^@font-face\s*/)){if(!p())return d("@font-face missing '{'");for(var t,r=b();t=E();)r.push(t),r=r.concat(b());return h()?e({type:"font-face",declarations:r}):d("@font-face missing '}'")}}()}function k(){var e=l(),t=T();return t?(b(),e({type:"rule",selectors:t,declarations:O()})):d("selector missing")}return r((x=f(),{type:"stylesheet",stylesheet:{source:i.source,rules:x,parsingErrors:u}}))}}function requireCompiler(){if(hasRequiredCompiler)return compiler;function e(e){this.options=e||{}}return hasRequiredCompiler=1,compiler=e,e.prototype.emit=function(e){return e},e.prototype.visit=function(e){return this[e.type](e)},e.prototype.mapVisit=function(e,t){var r="";t=t||"";for(var n=0,i=e.length;n<i;n++)r+=this.visit(e[n]),t&&n<i-1&&(r+=this.emit(t));return r},compiler}var inherits_browser={exports:{}},hasRequiredInherits_browser,compress,hasRequiredCompress,identity,hasRequiredIdentity;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,"function"==typeof Object.create?inherits_browser.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}),inherits_browser.exports}function requireCompress(){if(hasRequiredCompress)return compress;hasRequiredCompress=1;var e=requireCompiler(),t=requireInherits_browser();function r(t){e.call(this,t)}return compress=r,t(r,e),r.prototype.compile=function(e){return e.stylesheet.rules.map(this.visit,this).join("")},r.prototype.comment=function(e){return this.emit("",e.position)},r.prototype.import=function(e){return this.emit("@import "+e.import+";",e.position)},r.prototype.media=function(e){return this.emit("@media "+e.media,e.position)+this.emit("{")+this.mapVisit(e.rules)+this.emit("}")},r.prototype.document=function(e){var t="@"+(e.vendor||"")+"document "+e.document;return this.emit(t,e.position)+this.emit("{")+this.mapVisit(e.rules)+this.emit("}")},r.prototype.charset=function(e){return this.emit("@charset "+e.charset+";",e.position)},r.prototype.namespace=function(e){return this.emit("@namespace "+e.namespace+";",e.position)},r.prototype.supports=function(e){return this.emit("@supports "+e.supports,e.position)+this.emit("{")+this.mapVisit(e.rules)+this.emit("}")},r.prototype.keyframes=function(e){return this.emit("@"+(e.vendor||"")+"keyframes "+e.name,e.position)+this.emit("{")+this.mapVisit(e.keyframes)+this.emit("}")},r.prototype.keyframe=function(e){var t=e.declarations;return this.emit(e.values.join(","),e.position)+this.emit("{")+this.mapVisit(t)+this.emit("}")},r.prototype.page=function(e){var t=e.selectors.length?e.selectors.join(", "):"";return this.emit("@page "+t,e.position)+this.emit("{")+this.mapVisit(e.declarations)+this.emit("}")},r.prototype["font-face"]=function(e){return this.emit("@font-face",e.position)+this.emit("{")+this.mapVisit(e.declarations)+this.emit("}")},r.prototype.host=function(e){return this.emit("@host",e.position)+this.emit("{")+this.mapVisit(e.rules)+this.emit("}")},r.prototype["custom-media"]=function(e){return this.emit("@custom-media "+e.name+" "+e.media+";",e.position)},r.prototype.rule=function(e){var t=e.declarations;return t.length?this.emit(e.selectors.join(","),e.position)+this.emit("{")+this.mapVisit(t)+this.emit("}"):""},r.prototype.declaration=function(e){return this.emit(e.property+":"+e.value,e.position)+this.emit(";")},compress}function requireIdentity(){if(hasRequiredIdentity)return identity;hasRequiredIdentity=1;var e=requireCompiler(),t=requireInherits_browser();function r(t){t=t||{},e.call(this,t),this.indentation=t.indent}return identity=r,t(r,e),r.prototype.compile=function(e){return this.stylesheet(e)},r.prototype.stylesheet=function(e){return this.mapVisit(e.stylesheet.rules,"\n\n")},r.prototype.comment=function(e){return this.emit(this.indent()+"/*"+e.comment+"*/",e.position)},r.prototype.import=function(e){return this.emit("@import "+e.import+";",e.position)},r.prototype.media=function(e){return this.emit("@media "+e.media,e.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},r.prototype.document=function(e){var t="@"+(e.vendor||"")+"document "+e.document;return this.emit(t,e.position)+this.emit("  {\n"+this.indent(1))+this.mapVisit(e.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},r.prototype.charset=function(e){return this.emit("@charset "+e.charset+";",e.position)},r.prototype.namespace=function(e){return this.emit("@namespace "+e.namespace+";",e.position)},r.prototype.supports=function(e){return this.emit("@supports "+e.supports,e.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},r.prototype.keyframes=function(e){return this.emit("@"+(e.vendor||"")+"keyframes "+e.name,e.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e.keyframes,"\n")+this.emit(this.indent(-1)+"}")},r.prototype.keyframe=function(e){var t=e.declarations;return this.emit(this.indent())+this.emit(e.values.join(", "),e.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(t,"\n")+this.emit(this.indent(-1)+"\n"+this.indent()+"}\n")},r.prototype.page=function(e){var t=e.selectors.length?e.selectors.join(", ")+" ":"";return this.emit("@page "+t,e.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(e.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")},r.prototype["font-face"]=function(e){return this.emit("@font-face ",e.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(e.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")},r.prototype.host=function(e){return this.emit("@host",e.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},r.prototype["custom-media"]=function(e){return this.emit("@custom-media "+e.name+" "+e.media+";",e.position)},r.prototype.rule=function(e){var t=this.indent(),r=e.declarations;return r.length?this.emit(e.selectors.map(function(e){return t+e}).join(",\n"),e.position)+this.emit(" {\n")+this.emit(this.indent(1))+this.mapVisit(r,"\n")+this.emit(this.indent(-1))+this.emit("\n"+this.indent()+"}"):""},r.prototype.declaration=function(e){return this.emit(this.indent())+this.emit(e.property+": "+e.value,e.position)+this.emit(";")},r.prototype.indent=function(e){return this.level=this.level||1,null!=e?(this.level+=e,""):Array(this.level).join(this.indentation||"  ")},identity}var sourceMapSupport={exports:{}},sourceMap={},sourceMapGenerator={},base64Vlq={},base64={},hasRequiredBase64,hasRequiredBase64Vlq;function requireBase64(){if(hasRequiredBase64)return base64;hasRequiredBase64=1;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return base64.encode=function(t){if(0<=t&&t<e.length)return e[t];throw new TypeError("Must be between 0 and 63: "+t)},base64.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1},base64}function requireBase64Vlq(){if(hasRequiredBase64Vlq)return base64Vlq;hasRequiredBase64Vlq=1;var e=requireBase64();return base64Vlq.encode=function(t){var r,n="",i=function(e){return e<0?1+(-e<<1):0+(e<<1)}(t);do{r=31&i,(i>>>=5)>0&&(r|=32),n+=e.encode(r)}while(i>0);return n},base64Vlq.decode=function(t,r,n){var i,o,s,a,l=t.length,c=0,u=0;do{if(r>=l)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(o=e.decode(t.charCodeAt(r++))))throw new Error("Invalid base64 digit: "+t.charAt(r-1));i=!!(32&o),c+=(o&=31)<<u,u+=5}while(i);n.value=(a=(s=c)>>1,1&~s?a:-a),n.rest=r},base64Vlq}var util={},hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,function(e){e.getArg=function(e,t,r){if(t in e)return e[t];if(3===arguments.length)return r;throw new Error('"'+t+'" is a required argument.')};var t=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,r=/^data:.+\,.+$/;function n(e){var r=e.match(t);return r?{scheme:r[1],auth:r[2],host:r[3],port:r[4],path:r[5]}:null}function i(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function o(t){var r=t,o=n(t);if(o){if(!o.path)return t;r=o.path}for(var s,a=e.isAbsolute(r),l=r.split(/\/+/),c=0,u=l.length-1;u>=0;u--)"."===(s=l[u])?l.splice(u,1):".."===s?c++:c>0&&(""===s?(l.splice(u+1,c),c=0):(l.splice(u,2),c--));return""===(r=l.join("/"))&&(r=a?"/":"."),o?(o.path=r,i(o)):r}function s(e,t){""===e&&(e="."),""===t&&(t=".");var s=n(t),a=n(e);if(a&&(e=a.path||"/"),s&&!s.scheme)return a&&(s.scheme=a.scheme),i(s);if(s||t.match(r))return t;if(a&&!a.host&&!a.path)return a.host=t,i(a);var l="/"===t.charAt(0)?t:o(e.replace(/\/+$/,"")+"/"+t);return a?(a.path=l,i(a)):l}e.urlParse=n,e.urlGenerate=i,e.normalize=o,e.join=s,e.isAbsolute=function(e){return"/"===e.charAt(0)||t.test(e)},e.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var r=0;0!==t.indexOf(e+"/");){var n=e.lastIndexOf("/");if(n<0)return t;if((e=e.slice(0,n)).match(/^([^\/]+:\/)?\/*$/))return t;++r}return Array(r+1).join("../")+t.substr(e.length+1)};var a=!("__proto__"in Object.create(null));function l(e){return e}function c(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var r=t-10;r>=0;r--)if(36!==e.charCodeAt(r))return!1;return!0}function u(e,t){return e===t?0:null===e?1:null===t?-1:e>t?1:-1}e.toSetString=a?l:function(e){return c(e)?"$"+e:e},e.fromSetString=a?l:function(e){return c(e)?e.slice(1):e},e.compareByOriginalPositions=function(e,t,r){var n=u(e.source,t.source);return 0!==n||0!==(n=e.originalLine-t.originalLine)||0!==(n=e.originalColumn-t.originalColumn)||r||0!==(n=e.generatedColumn-t.generatedColumn)||0!==(n=e.generatedLine-t.generatedLine)?n:u(e.name,t.name)},e.compareByGeneratedPositionsDeflated=function(e,t,r){var n=e.generatedLine-t.generatedLine;return 0!==n||0!==(n=e.generatedColumn-t.generatedColumn)||r||0!==(n=u(e.source,t.source))||0!==(n=e.originalLine-t.originalLine)||0!==(n=e.originalColumn-t.originalColumn)?n:u(e.name,t.name)},e.compareByGeneratedPositionsInflated=function(e,t){var r=e.generatedLine-t.generatedLine;return 0!==r||0!==(r=e.generatedColumn-t.generatedColumn)||0!==(r=u(e.source,t.source))||0!==(r=e.originalLine-t.originalLine)||0!==(r=e.originalColumn-t.originalColumn)?r:u(e.name,t.name)},e.parseSourceMapInput=function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},e.computeSourceURL=function(e,t,r){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),r){var a=n(r);if(!a)throw new Error("sourceMapURL could not be parsed");if(a.path){var l=a.path.lastIndexOf("/");l>=0&&(a.path=a.path.substring(0,l+1))}t=s(i(a),t)}return o(t)}}(util)),util}var arraySet={},hasRequiredArraySet;function requireArraySet(){if(hasRequiredArraySet)return arraySet;hasRequiredArraySet=1;var e=requireUtil(),t=Object.prototype.hasOwnProperty,r="undefined"!=typeof Map;function n(){this._array=[],this._set=r?new Map:Object.create(null)}return n.fromArray=function(e,t){for(var r=new n,i=0,o=e.length;i<o;i++)r.add(e[i],t);return r},n.prototype.size=function(){return r?this._set.size:Object.getOwnPropertyNames(this._set).length},n.prototype.add=function(n,i){var o=r?n:e.toSetString(n),s=r?this.has(n):t.call(this._set,o),a=this._array.length;s&&!i||this._array.push(n),s||(r?this._set.set(n,a):this._set[o]=a)},n.prototype.has=function(n){if(r)return this._set.has(n);var i=e.toSetString(n);return t.call(this._set,i)},n.prototype.indexOf=function(n){if(r){var i=this._set.get(n);if(i>=0)return i}else{var o=e.toSetString(n);if(t.call(this._set,o))return this._set[o]}throw new Error('"'+n+'" is not in the set.')},n.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},n.prototype.toArray=function(){return this._array.slice()},arraySet.ArraySet=n,arraySet}var mappingList={},hasRequiredMappingList,hasRequiredSourceMapGenerator;function requireMappingList(){if(hasRequiredMappingList)return mappingList;hasRequiredMappingList=1;var e=requireUtil();function t(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return t.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},t.prototype.add=function(t){var r,n,i,o,s,a;n=t,i=(r=this._last).generatedLine,o=n.generatedLine,s=r.generatedColumn,a=n.generatedColumn,o>i||o==i&&a>=s||e.compareByGeneratedPositionsInflated(r,n)<=0?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))},t.prototype.toArray=function(){return this._sorted||(this._array.sort(e.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},mappingList.MappingList=t,mappingList}function requireSourceMapGenerator(){if(hasRequiredSourceMapGenerator)return sourceMapGenerator;hasRequiredSourceMapGenerator=1;var e=requireBase64Vlq(),t=requireUtil(),r=requireArraySet().ArraySet,n=requireMappingList().MappingList;function i(e){e||(e={}),this._file=t.getArg(e,"file",null),this._sourceRoot=t.getArg(e,"sourceRoot",null),this._skipValidation=t.getArg(e,"skipValidation",!1),this._sources=new r,this._names=new r,this._mappings=new n,this._sourcesContents=null}return i.prototype._version=3,i.fromSourceMap=function(e){var r=e.sourceRoot,n=new i({file:e.file,sourceRoot:r});return e.eachMapping(function(e){var i={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(i.source=e.source,null!=r&&(i.source=t.relative(r,i.source)),i.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(i.name=e.name)),n.addMapping(i)}),e.sources.forEach(function(i){var o=i;null!==r&&(o=t.relative(r,i)),n._sources.has(o)||n._sources.add(o);var s=e.sourceContentFor(i);null!=s&&n.setSourceContent(i,s)}),n},i.prototype.addMapping=function(e){var r=t.getArg(e,"generated"),n=t.getArg(e,"original",null),i=t.getArg(e,"source",null),o=t.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,o),null!=i&&(i=String(i),this._sources.has(i)||this._sources.add(i)),null!=o&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:i,name:o})},i.prototype.setSourceContent=function(e,r){var n=e;null!=this._sourceRoot&&(n=t.relative(this._sourceRoot,n)),null!=r?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[t.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[t.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},i.prototype.applySourceMap=function(e,n,i){var o=n;if(null==n){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');o=e.file}var s=this._sourceRoot;null!=s&&(o=t.relative(s,o));var a=new r,l=new r;this._mappings.unsortedForEach(function(r){if(r.source===o&&null!=r.originalLine){var n=e.originalPositionFor({line:r.originalLine,column:r.originalColumn});null!=n.source&&(r.source=n.source,null!=i&&(r.source=t.join(i,r.source)),null!=s&&(r.source=t.relative(s,r.source)),r.originalLine=n.line,r.originalColumn=n.column,null!=n.name&&(r.name=n.name))}var c=r.source;null==c||a.has(c)||a.add(c);var u=r.name;null==u||l.has(u)||l.add(u)},this),this._sources=a,this._names=l,e.sources.forEach(function(r){var n=e.sourceContentFor(r);null!=n&&(null!=i&&(r=t.join(i,r)),null!=s&&(r=t.relative(s,r)),this.setSourceContent(r,n))},this)},i.prototype._validateMapping=function(e,t,r,n){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||r||n)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&r))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:t,name:n}))},i.prototype._serializeMappings=function(){for(var r,n,i,o,s=0,a=1,l=0,c=0,u=0,d=0,p="",h=this._mappings.toArray(),f=0,m=h.length;f<m;f++){if(r="",(n=h[f]).generatedLine!==a)for(s=0;n.generatedLine!==a;)r+=";",a++;else if(f>0){if(!t.compareByGeneratedPositionsInflated(n,h[f-1]))continue;r+=","}r+=e.encode(n.generatedColumn-s),s=n.generatedColumn,null!=n.source&&(o=this._sources.indexOf(n.source),r+=e.encode(o-d),d=o,r+=e.encode(n.originalLine-1-c),c=n.originalLine-1,r+=e.encode(n.originalColumn-l),l=n.originalColumn,null!=n.name&&(i=this._names.indexOf(n.name),r+=e.encode(i-u),u=i)),p+=r}return p},i.prototype._generateSourcesContent=function(e,r){return e.map(function(e){if(!this._sourcesContents)return null;null!=r&&(e=t.relative(r,e));var n=t.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)},i.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},i.prototype.toString=function(){return JSON.stringify(this.toJSON())},sourceMapGenerator.SourceMapGenerator=i,sourceMapGenerator}var sourceMapConsumer={},binarySearch={},hasRequiredBinarySearch;function requireBinarySearch(){return hasRequiredBinarySearch||(hasRequiredBinarySearch=1,function(e){function t(r,n,i,o,s,a){var l=Math.floor((n-r)/2)+r,c=s(i,o[l],!0);return 0===c?l:c>0?n-l>1?t(l,n,i,o,s,a):a==e.LEAST_UPPER_BOUND?n<o.length?n:-1:l:l-r>1?t(r,l,i,o,s,a):a==e.LEAST_UPPER_BOUND?l:r<0?-1:r}e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2,e.search=function(r,n,i,o){if(0===n.length)return-1;var s=t(-1,n.length,r,n,i,o||e.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&0===i(n[s],n[s-1],!0);)--s;return s}}(binarySearch)),binarySearch}var quickSort={},hasRequiredQuickSort,hasRequiredSourceMapConsumer;function requireQuickSort(){if(hasRequiredQuickSort)return quickSort;function e(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function t(r,n,i,o){if(i<o){var s=i-1;e(r,(u=i,d=o,Math.round(u+Math.random()*(d-u))),o);for(var a=r[o],l=i;l<o;l++)n(r[l],a)<=0&&e(r,s+=1,l);e(r,s+1,l);var c=s+1;t(r,n,i,c-1),t(r,n,c+1,o)}var u,d}return hasRequiredQuickSort=1,quickSort.quickSort=function(e,r){t(e,r,0,e.length-1)},quickSort}function requireSourceMapConsumer(){if(hasRequiredSourceMapConsumer)return sourceMapConsumer;hasRequiredSourceMapConsumer=1;var e=requireUtil(),t=requireBinarySearch(),r=requireArraySet().ArraySet,n=requireBase64Vlq(),i=requireQuickSort().quickSort;function o(t,r){var n=t;return"string"==typeof t&&(n=e.parseSourceMapInput(t)),null!=n.sections?new l(n,r):new s(n,r)}function s(t,n){var i=t;"string"==typeof t&&(i=e.parseSourceMapInput(t));var o=e.getArg(i,"version"),s=e.getArg(i,"sources"),a=e.getArg(i,"names",[]),l=e.getArg(i,"sourceRoot",null),c=e.getArg(i,"sourcesContent",null),u=e.getArg(i,"mappings"),d=e.getArg(i,"file",null);if(o!=this._version)throw new Error("Unsupported version: "+o);l&&(l=e.normalize(l)),s=s.map(String).map(e.normalize).map(function(t){return l&&e.isAbsolute(l)&&e.isAbsolute(t)?e.relative(l,t):t}),this._names=r.fromArray(a.map(String),!0),this._sources=r.fromArray(s,!0),this._absoluteSources=this._sources.toArray().map(function(t){return e.computeSourceURL(l,t,n)}),this.sourceRoot=l,this.sourcesContent=c,this._mappings=u,this._sourceMapURL=n,this.file=d}function a(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function l(t,n){var i=t;"string"==typeof t&&(i=e.parseSourceMapInput(t));var s=e.getArg(i,"version"),a=e.getArg(i,"sections");if(s!=this._version)throw new Error("Unsupported version: "+s);this._sources=new r,this._names=new r;var l={line:-1,column:0};this._sections=a.map(function(t){if(t.url)throw new Error("Support for url field in sections not implemented.");var r=e.getArg(t,"offset"),i=e.getArg(r,"line"),s=e.getArg(r,"column");if(i<l.line||i===l.line&&s<l.column)throw new Error("Section offsets must be ordered and non-overlapping.");return l=r,{generatedOffset:{generatedLine:i+1,generatedColumn:s+1},consumer:new o(e.getArg(t,"map"),n)}})}return o.fromSourceMap=function(e,t){return s.fromSourceMap(e,t)},o.prototype._version=3,o.prototype.__generatedMappings=null,Object.defineProperty(o.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),o.prototype.__originalMappings=null,Object.defineProperty(o.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),o.prototype._charIsMappingSeparator=function(e,t){var r=e.charAt(t);return";"===r||","===r},o.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},o.GENERATED_ORDER=1,o.ORIGINAL_ORDER=2,o.GREATEST_LOWER_BOUND=1,o.LEAST_UPPER_BOUND=2,o.prototype.eachMapping=function(t,r,n){var i,s=r||null;switch(n||o.GENERATED_ORDER){case o.GENERATED_ORDER:i=this._generatedMappings;break;case o.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;i.map(function(t){var r=null===t.source?null:this._sources.at(t.source);return{source:r=e.computeSourceURL(a,r,this._sourceMapURL),generatedLine:t.generatedLine,generatedColumn:t.generatedColumn,originalLine:t.originalLine,originalColumn:t.originalColumn,name:null===t.name?null:this._names.at(t.name)}},this).forEach(t,s)},o.prototype.allGeneratedPositionsFor=function(r){var n=e.getArg(r,"line"),i={source:e.getArg(r,"source"),originalLine:n,originalColumn:e.getArg(r,"column",0)};if(i.source=this._findSourceIndex(i.source),i.source<0)return[];var o=[],s=this._findMapping(i,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,t.LEAST_UPPER_BOUND);if(s>=0){var a=this._originalMappings[s];if(void 0===r.column)for(var l=a.originalLine;a&&a.originalLine===l;)o.push({line:e.getArg(a,"generatedLine",null),column:e.getArg(a,"generatedColumn",null),lastColumn:e.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s];else for(var c=a.originalColumn;a&&a.originalLine===n&&a.originalColumn==c;)o.push({line:e.getArg(a,"generatedLine",null),column:e.getArg(a,"generatedColumn",null),lastColumn:e.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s]}return o},sourceMapConsumer.SourceMapConsumer=o,s.prototype=Object.create(o.prototype),s.prototype.consumer=o,s.prototype._findSourceIndex=function(t){var r,n=t;if(null!=this.sourceRoot&&(n=e.relative(this.sourceRoot,n)),this._sources.has(n))return this._sources.indexOf(n);for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1},s.fromSourceMap=function(t,n){var o=Object.create(s.prototype),l=o._names=r.fromArray(t._names.toArray(),!0),c=o._sources=r.fromArray(t._sources.toArray(),!0);o.sourceRoot=t._sourceRoot,o.sourcesContent=t._generateSourcesContent(o._sources.toArray(),o.sourceRoot),o.file=t._file,o._sourceMapURL=n,o._absoluteSources=o._sources.toArray().map(function(t){return e.computeSourceURL(o.sourceRoot,t,n)});for(var u=t._mappings.toArray().slice(),d=o.__generatedMappings=[],p=o.__originalMappings=[],h=0,f=u.length;h<f;h++){var m=u[h],g=new a;g.generatedLine=m.generatedLine,g.generatedColumn=m.generatedColumn,m.source&&(g.source=c.indexOf(m.source),g.originalLine=m.originalLine,g.originalColumn=m.originalColumn,m.name&&(g.name=l.indexOf(m.name)),p.push(g)),d.push(g)}return i(o.__originalMappings,e.compareByOriginalPositions),o},s.prototype._version=3,Object.defineProperty(s.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),s.prototype._parseMappings=function(t,r){for(var o,s,l,c,u,d=1,p=0,h=0,f=0,m=0,g=0,b=t.length,y=0,T={},E={},O=[],S=[];y<b;)if(";"===t.charAt(y))d++,y++,p=0;else if(","===t.charAt(y))y++;else{for((o=new a).generatedLine=d,c=y;c<b&&!this._charIsMappingSeparator(t,c);c++);if(l=T[s=t.slice(y,c)])y+=s.length;else{for(l=[];y<c;)n.decode(t,y,E),u=E.value,y=E.rest,l.push(u);if(2===l.length)throw new Error("Found a source, but no line and column");if(3===l.length)throw new Error("Found a source and line, but no column");T[s]=l}o.generatedColumn=p+l[0],p=o.generatedColumn,l.length>1&&(o.source=m+l[1],m+=l[1],o.originalLine=h+l[2],h=o.originalLine,o.originalLine+=1,o.originalColumn=f+l[3],f=o.originalColumn,l.length>4&&(o.name=g+l[4],g+=l[4])),S.push(o),"number"==typeof o.originalLine&&O.push(o)}i(S,e.compareByGeneratedPositionsDeflated),this.__generatedMappings=S,i(O,e.compareByOriginalPositions),this.__originalMappings=O},s.prototype._findMapping=function(e,r,n,i,o,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return t.search(e,r,o,s)},s.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(t.generatedLine===r.generatedLine){t.lastGeneratedColumn=r.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},s.prototype.originalPositionFor=function(t){var r={generatedLine:e.getArg(t,"line"),generatedColumn:e.getArg(t,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",e.compareByGeneratedPositionsDeflated,e.getArg(t,"bias",o.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===r.generatedLine){var s=e.getArg(i,"source",null);null!==s&&(s=this._sources.at(s),s=e.computeSourceURL(this.sourceRoot,s,this._sourceMapURL));var a=e.getArg(i,"name",null);return null!==a&&(a=this._names.at(a)),{source:s,line:e.getArg(i,"originalLine",null),column:e.getArg(i,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},s.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e})},s.prototype.sourceContentFor=function(t,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(t);if(n>=0)return this.sourcesContent[n];var i,o=t;if(null!=this.sourceRoot&&(o=e.relative(this.sourceRoot,o)),null!=this.sourceRoot&&(i=e.urlParse(this.sourceRoot))){var s=o.replace(/^file:\/\//,"");if("file"==i.scheme&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!i.path||"/"==i.path)&&this._sources.has("/"+o))return this.sourcesContent[this._sources.indexOf("/"+o)]}if(r)return null;throw new Error('"'+o+'" is not in the SourceMap.')},s.prototype.generatedPositionFor=function(t){var r=e.getArg(t,"source");if((r=this._findSourceIndex(r))<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:e.getArg(t,"line"),originalColumn:e.getArg(t,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,e.getArg(t,"bias",o.GREATEST_LOWER_BOUND));if(i>=0){var s=this._originalMappings[i];if(s.source===n.source)return{line:e.getArg(s,"generatedLine",null),column:e.getArg(s,"generatedColumn",null),lastColumn:e.getArg(s,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},sourceMapConsumer.BasicSourceMapConsumer=s,l.prototype=Object.create(o.prototype),l.prototype.constructor=o,l.prototype._version=3,Object.defineProperty(l.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var r=0;r<this._sections[t].consumer.sources.length;r++)e.push(this._sections[t].consumer.sources[r]);return e}}),l.prototype.originalPositionFor=function(r){var n={generatedLine:e.getArg(r,"line"),generatedColumn:e.getArg(r,"column")},i=t.search(n,this._sections,function(e,t){return e.generatedLine-t.generatedOffset.generatedLine||e.generatedColumn-t.generatedOffset.generatedColumn}),o=this._sections[i];return o?o.consumer.originalPositionFor({line:n.generatedLine-(o.generatedOffset.generatedLine-1),column:n.generatedColumn-(o.generatedOffset.generatedLine===n.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:r.bias}):{source:null,line:null,column:null,name:null}},l.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},l.prototype.sourceContentFor=function(e,t){for(var r=0;r<this._sections.length;r++){var n=this._sections[r].consumer.sourceContentFor(e,!0);if(n)return n}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},l.prototype.generatedPositionFor=function(t){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(-1!==n.consumer._findSourceIndex(e.getArg(t,"source"))){var i=n.consumer.generatedPositionFor(t);if(i)return{line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},l.prototype._parseMappings=function(t,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var o=this._sections[n],s=o.consumer._generatedMappings,a=0;a<s.length;a++){var l=s[a],c=o.consumer._sources.at(l.source);c=e.computeSourceURL(o.consumer.sourceRoot,c,this._sourceMapURL),this._sources.add(c),c=this._sources.indexOf(c);var u=null;l.name&&(u=o.consumer._names.at(l.name),this._names.add(u),u=this._names.indexOf(u));var d={source:c,generatedLine:l.generatedLine+(o.generatedOffset.generatedLine-1),generatedColumn:l.generatedColumn+(o.generatedOffset.generatedLine===l.generatedLine?o.generatedOffset.generatedColumn-1:0),originalLine:l.originalLine,originalColumn:l.originalColumn,name:u};this.__generatedMappings.push(d),"number"==typeof d.originalLine&&this.__originalMappings.push(d)}i(this.__generatedMappings,e.compareByGeneratedPositionsDeflated),i(this.__originalMappings,e.compareByOriginalPositions)},sourceMapConsumer.IndexedSourceMapConsumer=l,sourceMapConsumer}var sourceNode={},hasRequiredSourceNode,hasRequiredSourceMap;function requireSourceNode(){if(hasRequiredSourceNode)return sourceNode;hasRequiredSourceNode=1;var e=requireSourceMapGenerator().SourceMapGenerator,t=requireUtil(),r=/(\r?\n)/,n="$$$isSourceNode$$$";function i(e,t,r,i,o){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==r?null:r,this.name=null==o?null:o,this[n]=!0,null!=i&&this.add(i)}return i.fromStringWithSourceMap=function(e,n,o){var s=new i,a=e.split(r),l=0,c=function(){return e()+(e()||"");function e(){return l<a.length?a[l++]:void 0}},u=1,d=0,p=null;return n.eachMapping(function(e){if(null!==p){if(!(u<e.generatedLine)){var t=(r=a[l]||"").substr(0,e.generatedColumn-d);return a[l]=r.substr(e.generatedColumn-d),d=e.generatedColumn,h(p,t),void(p=e)}h(p,c()),u++,d=0}for(;u<e.generatedLine;)s.add(c()),u++;if(d<e.generatedColumn){var r=a[l]||"";s.add(r.substr(0,e.generatedColumn)),a[l]=r.substr(e.generatedColumn),d=e.generatedColumn}p=e},this),l<a.length&&(p&&h(p,c()),s.add(a.splice(l).join(""))),n.sources.forEach(function(e){var r=n.sourceContentFor(e);null!=r&&(null!=o&&(e=t.join(o,e)),s.setSourceContent(e,r))}),s;function h(e,r){if(null===e||void 0===e.source)s.add(r);else{var n=o?t.join(o,e.source):e.source;s.add(new i(e.originalLine,e.originalColumn,n,r,e.name))}}},i.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[n]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},i.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[n]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},i.prototype.walk=function(e){for(var t,r=0,i=this.children.length;r<i;r++)(t=this.children[r])[n]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},i.prototype.join=function(e){var t,r,n=this.children.length;if(n>0){for(t=[],r=0;r<n-1;r++)t.push(this.children[r]),t.push(e);t.push(this.children[r]),this.children=t}return this},i.prototype.replaceRight=function(e,t){var r=this.children[this.children.length-1];return r[n]?r.replaceRight(e,t):"string"==typeof r?this.children[this.children.length-1]=r.replace(e,t):this.children.push("".replace(e,t)),this},i.prototype.setSourceContent=function(e,r){this.sourceContents[t.toSetString(e)]=r},i.prototype.walkSourceContents=function(e){for(var r=0,i=this.children.length;r<i;r++)this.children[r][n]&&this.children[r].walkSourceContents(e);var o=Object.keys(this.sourceContents);for(r=0,i=o.length;r<i;r++)e(t.fromSetString(o[r]),this.sourceContents[o[r]])},i.prototype.toString=function(){var e="";return this.walk(function(t){e+=t}),e},i.prototype.toStringWithSourceMap=function(t){var r={code:"",line:1,column:0},n=new e(t),i=!1,o=null,s=null,a=null,l=null;return this.walk(function(e,t){r.code+=e,null!==t.source&&null!==t.line&&null!==t.column?(o===t.source&&s===t.line&&a===t.column&&l===t.name||n.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:r.line,column:r.column},name:t.name}),o=t.source,s=t.line,a=t.column,l=t.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),o=null,i=!1);for(var c=0,u=e.length;c<u;c++)10===e.charCodeAt(c)?(r.line++,r.column=0,c+1===u?(o=null,i=!1):i&&n.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:r.line,column:r.column},name:t.name})):r.column++}),this.walkSourceContents(function(e,t){n.setSourceContent(e,t)}),{code:r.code,map:n}},sourceNode.SourceNode=i,sourceNode}function requireSourceMap(){return hasRequiredSourceMap||(hasRequiredSourceMap=1,sourceMap.SourceMapGenerator=requireSourceMapGenerator().SourceMapGenerator,sourceMap.SourceMapConsumer=requireSourceMapConsumer().SourceMapConsumer,sourceMap.SourceNode=requireSourceNode().SourceNode),sourceMap}var browserAtob={exports:{}},hasRequiredBrowserAtob;function requireBrowserAtob(){return hasRequiredBrowserAtob||(hasRequiredBrowserAtob=1,e=browserAtob,n="function"==typeof(r=(t=window).atob)?r:"function"==typeof Buffer?function(e){
//!! Deliberately using an API that's deprecated in node.js because
//!! this file is for browsers and we expect them to cope with it.
//!! Discussion: github.com/node-browser-compat/atob/pull/9
return new Buffer(e,"base64").toString("binary")}:"object"==typeof t.base64js?function(e){var r=t.base64js.b64ToByteArray(e);return Array.prototype.map.call(r,function(e){return String.fromCharCode(e)}).join("")}:function(){throw new Error("You're probably in an old browser or an iOS webworker. It might help to include beatgammit's base64-js.")},t.atob=n,e&&e.exports&&(e.exports=n)),browserAtob.exports;var e,t,r,n}var url={},punycode$1={exports:{}},punycode=punycode$1.exports,hasRequiredPunycode,type,hasRequiredType,objectInspect,hasRequiredObjectInspect,sideChannelList,hasRequiredSideChannelList,esObjectAtoms,hasRequiredEsObjectAtoms,esErrors,hasRequiredEsErrors,_eval,hasRequired_eval,range,hasRequiredRange,ref,hasRequiredRef,syntax,hasRequiredSyntax,uri,hasRequiredUri,abs,hasRequiredAbs,floor,hasRequiredFloor,max,hasRequiredMax,min,hasRequiredMin,pow,hasRequiredPow,round,hasRequiredRound,_isNaN,hasRequired_isNaN,sign,hasRequiredSign,gOPD,hasRequiredGOPD,gopd,hasRequiredGopd,esDefineProperty,hasRequiredEsDefineProperty,shams,hasRequiredShams,hasSymbols,hasRequiredHasSymbols,Reflect_getPrototypeOf,hasRequiredReflect_getPrototypeOf,Object_getPrototypeOf,hasRequiredObject_getPrototypeOf,implementation,hasRequiredImplementation,functionBind,hasRequiredFunctionBind,functionCall,hasRequiredFunctionCall,functionApply,hasRequiredFunctionApply,reflectApply,hasRequiredReflectApply,actualApply,hasRequiredActualApply,callBindApplyHelpers,hasRequiredCallBindApplyHelpers,get,hasRequiredGet,getProto,hasRequiredGetProto,hasown,hasRequiredHasown,getIntrinsic,hasRequiredGetIntrinsic,callBound,hasRequiredCallBound,sideChannelMap,hasRequiredSideChannelMap,sideChannelWeakmap,hasRequiredSideChannelWeakmap,sideChannel,hasRequiredSideChannel,formats,hasRequiredFormats,utils$3,hasRequiredUtils$3,stringify_1,hasRequiredStringify$1,parse,hasRequiredParse,lib$1,hasRequiredLib$1,hasRequiredUrl;function requirePunycode(){return hasRequiredPunycode||(hasRequiredPunycode=1,e=punycode$1,t=punycode$1.exports,function(r){var n=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,o="object"==typeof commonjsGlobal&&commonjsGlobal;o.global!==o&&o.window!==o&&o.self!==o||(r=o);var s,a,l=2147483647,c=36,u=/^xn--/,d=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,m=String.fromCharCode;function g(e){throw new RangeError(h[e])}function b(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function y(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+b((e=e.replace(p,".")).split("."),t).join(".")}function T(e){for(var t,r,n=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function E(e){return b(e,function(e){var t="";return e>65535&&(t+=m((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+m(e)}).join("")}function O(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:c}function S(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function x(e,t,r){var n=0;for(e=r?f(e/700):e>>1,e+=f(e/t);e>455;n+=c)e=f(e/35);return f(n+36*e/(e+38))}function v(e){var t,r,n,i,o,s,a,u,d,p,h=[],m=e.length,b=0,y=128,T=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&g("not-basic"),h.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<m;){for(o=b,s=1,a=c;i>=m&&g("invalid-input"),((u=O(e.charCodeAt(i++)))>=c||u>f((l-b)/s))&&g("overflow"),b+=u*s,!(u<(d=a<=T?1:a>=T+26?26:a-T));a+=c)s>f(l/(p=c-d))&&g("overflow"),s*=p;T=x(b-o,t=h.length+1,0==o),f(b/t)>l-y&&g("overflow"),y+=f(b/t),b%=t,h.splice(b++,0,y)}return E(h)}function _(e){var t,r,n,i,o,s,a,u,d,p,h,b,y,E,O,v=[];for(b=(e=T(e)).length,t=128,r=0,o=72,s=0;s<b;++s)(h=e[s])<128&&v.push(m(h));for(n=i=v.length,i&&v.push("-");n<b;){for(a=l,s=0;s<b;++s)(h=e[s])>=t&&h<a&&(a=h);for(a-t>f((l-r)/(y=n+1))&&g("overflow"),r+=(a-t)*y,t=a,s=0;s<b;++s)if((h=e[s])<t&&++r>l&&g("overflow"),h==t){for(u=r,d=c;!(u<(p=d<=o?1:d>=o+26?26:d-o));d+=c)O=u-p,E=c-p,v.push(m(S(p+O%E,0))),u=f(O/E);v.push(m(S(u,0))),o=x(r,y,n==i),r=0,++n}++r,++t}return v.join("")}if(s={version:"1.4.1",ucs2:{decode:T,encode:E},decode:v,encode:_,toASCII:function(e){return y(e,function(e){return d.test(e)?"xn--"+_(e):e})},toUnicode:function(e){return y(e,function(e){return u.test(e)?v(e.slice(4).toLowerCase()):e})}},n&&i)if(e.exports==n)i.exports=s;else for(a in s)s.hasOwnProperty(a)&&(n[a]=s[a]);else r.punycode=s}(punycode)),punycode$1.exports;var e,t}function requireType(){return hasRequiredType?type:(hasRequiredType=1,type=TypeError)}function requireObjectInspect(){if(hasRequiredObjectInspect)return objectInspect;hasRequiredObjectInspect=1;var e="function"==typeof Map&&Map.prototype,t=Object.getOwnPropertyDescriptor&&e?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r=e&&t&&"function"==typeof t.get?t.get:null,n=e&&Map.prototype.forEach,i="function"==typeof Set&&Set.prototype,o=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=i&&o&&"function"==typeof o.get?o.get:null,a=i&&Set.prototype.forEach,l="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,c="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,u="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,d=Boolean.prototype.valueOf,p=Object.prototype.toString,h=Function.prototype.toString,f=String.prototype.match,m=String.prototype.slice,g=String.prototype.replace,b=String.prototype.toUpperCase,y=String.prototype.toLowerCase,T=RegExp.prototype.test,E=Array.prototype.concat,O=Array.prototype.join,S=Array.prototype.slice,x=Math.floor,v="function"==typeof BigInt?BigInt.prototype.valueOf:null,_=Object.getOwnPropertySymbols,A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,C="function"==typeof Symbol&&"object"==typeof Symbol.iterator,w="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,k=Object.prototype.propertyIsEnumerable,D=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function I(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||T.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-x(-e):x(e);if(n!==e){var i=String(n),o=m.call(t,i.length+1);return g.call(i,r,"$&_")+"."+g.call(g.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return g.call(t,r,"$&_")}var R=require$$0$1,N=R.custom,P=G(N)?N:null,M={__proto__:null,double:'"',single:"'"},$={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};function L(e,t,r){var n=r.quoteStyle||t,i=M[n];return i+e+i}function B(e){return g.call(String(e),/"/g,"&quot;")}function F(e){return!w||!("object"==typeof e&&(w in e||void 0!==e[w]))}function q(e){return"[object Array]"===z(e)&&F(e)}function j(e){return"[object RegExp]"===z(e)&&F(e)}function G(e){if(C)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!A)return!1;try{return A.call(e),!0}catch(t){}return!1}objectInspect=function e(t,i,o,p){var b=i||{};if(Q(b,"quoteStyle")&&!Q(M,b.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Q(b,"maxStringLength")&&("number"==typeof b.maxStringLength?b.maxStringLength<0&&b.maxStringLength!==1/0:null!==b.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var T=!Q(b,"customInspect")||b.customInspect;if("boolean"!=typeof T&&"symbol"!==T)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Q(b,"indent")&&null!==b.indent&&"\t"!==b.indent&&!(parseInt(b.indent,10)===b.indent&&b.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Q(b,"numericSeparator")&&"boolean"!=typeof b.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var x=b.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return U(t,b);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var _=String(t);return x?I(t,_):_}if("bigint"==typeof t){var N=String(t)+"n";return x?I(t,N):N}var $=void 0===b.depth?5:b.depth;if(void 0===o&&(o=0),o>=$&&$>0&&"object"==typeof t)return q(t)?"[Array]":"[Object]";var H=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=O.call(Array(e.indent+1)," ")}return{base:r,prev:O.call(Array(t+1),r)}}(b,o);if(void 0===p)p=[];else if(V(p,t)>=0)return"[Circular]";function W(t,r,n){if(r&&(p=S.call(p)).push(r),n){var i={depth:b.depth};return Q(b,"quoteStyle")&&(i.quoteStyle=b.quoteStyle),e(t,i,o+1,p)}return e(t,b,o+1,p)}if("function"==typeof t&&!j(t)){var ee=function(e){if(e.name)return e.name;var t=f.call(h.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),te=J(t,W);return"[Function"+(ee?": "+ee:" (anonymous)")+"]"+(te.length>0?" { "+O.call(te,", ")+" }":"")}if(G(t)){var re=C?g.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):A.call(t);return"object"!=typeof t||C?re:Y(re)}if(function(e){return!(!e||"object"!=typeof e)&&("undefined"!=typeof HTMLElement&&e instanceof HTMLElement||"string"==typeof e.nodeName&&"function"==typeof e.getAttribute)}(t)){for(var ne="<"+y.call(String(t.nodeName)),ie=t.attributes||[],oe=0;oe<ie.length;oe++)ne+=" "+ie[oe].name+"="+L(B(ie[oe].value),"double",b);return ne+=">",t.childNodes&&t.childNodes.length&&(ne+="..."),ne+"</"+y.call(String(t.nodeName))+">"}if(q(t)){if(0===t.length)return"[]";var se=J(t,W);return H&&!function(e){for(var t=0;t<e.length;t++)if(V(e[t],"\n")>=0)return!1;return!0}(se)?"["+K(se,H)+"]":"[ "+O.call(se,", ")+" ]"}if(function(e){return"[object Error]"===z(e)&&F(e)}(t)){var ae=J(t,W);return"cause"in Error.prototype||!("cause"in t)||k.call(t,"cause")?0===ae.length?"["+String(t)+"]":"{ ["+String(t)+"] "+O.call(ae,", ")+" }":"{ ["+String(t)+"] "+O.call(E.call("[cause]: "+W(t.cause),ae),", ")+" }"}if("object"==typeof t&&T){if(P&&"function"==typeof t[P]&&R)return R(t,{depth:$-o});if("symbol"!==T&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!r||!e||"object"!=typeof e)return!1;try{r.call(e);try{s.call(e)}catch(ne){return!0}return e instanceof Map}catch(t){}return!1}(t)){var le=[];return n&&n.call(t,function(e,r){le.push(W(r,t,!0)+" => "+W(e,t))}),Z("Map",r.call(t),le,H)}if(function(e){if(!s||!e||"object"!=typeof e)return!1;try{s.call(e);try{r.call(e)}catch(t){return!0}return e instanceof Set}catch(n){}return!1}(t)){var ce=[];return a&&a.call(t,function(e){ce.push(W(e,t))}),Z("Set",s.call(t),ce,H)}if(function(e){if(!l||!e||"object"!=typeof e)return!1;try{l.call(e,l);try{c.call(e,c)}catch(ne){return!0}return e instanceof WeakMap}catch(t){}return!1}(t))return X("WeakMap");if(function(e){if(!c||!e||"object"!=typeof e)return!1;try{c.call(e,c);try{l.call(e,l)}catch(ne){return!0}return e instanceof WeakSet}catch(t){}return!1}(t))return X("WeakSet");if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{return u.call(e),!0}catch(t){}return!1}(t))return X("WeakRef");if(function(e){return"[object Number]"===z(e)&&F(e)}(t))return Y(W(Number(t)));if(function(e){if(!e||"object"!=typeof e||!v)return!1;try{return v.call(e),!0}catch(t){}return!1}(t))return Y(W(v.call(t)));if(function(e){return"[object Boolean]"===z(e)&&F(e)}(t))return Y(d.call(t));if(function(e){return"[object String]"===z(e)&&F(e)}(t))return Y(W(String(t)));if("undefined"!=typeof window&&t===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&t===globalThis||void 0!==commonjsGlobal&&t===commonjsGlobal)return"{ [object globalThis] }";if(!function(e){return"[object Date]"===z(e)&&F(e)}(t)&&!j(t)){var ue=J(t,W),de=D?D(t)===Object.prototype:t instanceof Object||t.constructor===Object,pe=t instanceof Object?"":"null prototype",he=!de&&w&&Object(t)===t&&w in t?m.call(z(t),8,-1):pe?"Object":"",fe=(de||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(he||pe?"["+O.call(E.call([],he||[],pe||[]),": ")+"] ":"");return 0===ue.length?fe+"{}":H?fe+"{"+K(ue,H)+"}":fe+"{ "+O.call(ue,", ")+" }"}return String(t)};var H=Object.prototype.hasOwnProperty||function(e){return e in this};function Q(e,t){return H.call(e,t)}function z(e){return p.call(e)}function V(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function U(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return U(m.call(e,0,t.maxStringLength),t)+n}var i=$[t.quoteStyle||"single"];return i.lastIndex=0,L(g.call(g.call(e,i,"\\$1"),/[\x00-\x1f]/g,W),"single",t)}function W(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+b.call(t.toString(16))}function Y(e){return"Object("+e+")"}function X(e){return e+" { ? }"}function Z(e,t,r,n){return e+" ("+t+") {"+(n?K(r,n):O.call(r,", "))+"}"}function K(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+O.call(e,","+r)+"\n"+t.prev}function J(e,t){var r=q(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=Q(e,i)?t(e[i],e):""}var o,s="function"==typeof _?_(e):[];if(C){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in e)Q(e,l)&&(r&&String(Number(l))===l&&l<e.length||C&&o["$"+l]instanceof Symbol||(T.call(/[^\w$]/,l)?n.push(t(l,e)+": "+t(e[l],e)):n.push(l+": "+t(e[l],e))));if("function"==typeof _)for(var c=0;c<s.length;c++)k.call(e,s[c])&&n.push("["+t(s[c])+"]: "+t(e[s[c]],e));return n}return objectInspect}function requireSideChannelList(){if(hasRequiredSideChannelList)return sideChannelList;hasRequiredSideChannelList=1;var e=requireObjectInspect(),t=requireType(),r=function(e,t,r){for(var n,i=e;null!=(n=i.next);i=n)if(n.key===t)return i.next=n.next,r||(n.next=e.next,e.next=n),n};return sideChannelList=function(){var n,i={assert:function(r){if(!i.has(r))throw new t("Side channel does not contain "+e(r))},delete:function(e){var t=n&&n.next,i=function(e,t){if(e)return r(e,t,!0)}(n,e);return i&&t&&t===i&&(n=void 0),!!i},get:function(e){return function(e,t){if(e){var n=r(e,t);return n&&n.value}}(n,e)},has:function(e){return function(e,t){return!!e&&!!r(e,t)}(n,e)},set:function(e,t){n||(n={next:void 0}),function(e,t,n){var i=r(e,t);i?i.value=n:e.next={key:t,next:e.next,value:n}}(n,e,t)}};return i}}function requireEsObjectAtoms(){return hasRequiredEsObjectAtoms?esObjectAtoms:(hasRequiredEsObjectAtoms=1,esObjectAtoms=Object)}function requireEsErrors(){return hasRequiredEsErrors?esErrors:(hasRequiredEsErrors=1,esErrors=Error)}function require_eval(){return hasRequired_eval?_eval:(hasRequired_eval=1,_eval=EvalError)}function requireRange(){return hasRequiredRange?range:(hasRequiredRange=1,range=RangeError)}function requireRef(){return hasRequiredRef?ref:(hasRequiredRef=1,ref=ReferenceError)}function requireSyntax(){return hasRequiredSyntax?syntax:(hasRequiredSyntax=1,syntax=SyntaxError)}function requireUri(){return hasRequiredUri?uri:(hasRequiredUri=1,uri=URIError)}function requireAbs(){return hasRequiredAbs?abs:(hasRequiredAbs=1,abs=Math.abs)}function requireFloor(){return hasRequiredFloor?floor:(hasRequiredFloor=1,floor=Math.floor)}function requireMax(){return hasRequiredMax?max:(hasRequiredMax=1,max=Math.max)}function requireMin(){return hasRequiredMin?min:(hasRequiredMin=1,min=Math.min)}function requirePow(){return hasRequiredPow?pow:(hasRequiredPow=1,pow=Math.pow)}function requireRound(){return hasRequiredRound?round:(hasRequiredRound=1,round=Math.round)}function require_isNaN(){return hasRequired_isNaN?_isNaN:(hasRequired_isNaN=1,_isNaN=Number.isNaN||function(e){return e!=e})}function requireSign(){if(hasRequiredSign)return sign;hasRequiredSign=1;var e=require_isNaN();return sign=function(t){return e(t)||0===t?t:t<0?-1:1}}function requireGOPD(){return hasRequiredGOPD?gOPD:(hasRequiredGOPD=1,gOPD=Object.getOwnPropertyDescriptor)}function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var e=requireGOPD();if(e)try{e([],"length")}catch(t){e=null}return gopd=e}function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch(t){e=!1}return esDefineProperty=e}function requireShams(){return hasRequiredShams?shams:(hasRequiredShams=1,shams=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var n in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0})}function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var e="undefined"!=typeof Symbol&&Symbol,t=requireShams();return hasSymbols=function(){return"function"==typeof e&&"function"==typeof Symbol&&"symbol"==typeof e("foo")&&"symbol"==typeof Symbol("bar")&&t()}}function requireReflect_getPrototypeOf(){return hasRequiredReflect_getPrototypeOf?Reflect_getPrototypeOf:(hasRequiredReflect_getPrototypeOf=1,Reflect_getPrototypeOf="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null)}function requireObject_getPrototypeOf(){return hasRequiredObject_getPrototypeOf?Object_getPrototypeOf:(hasRequiredObject_getPrototypeOf=1,Object_getPrototypeOf=requireEsObjectAtoms().getPrototypeOf||null)}function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var e=Object.prototype.toString,t=Math.max,r=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var i=0;i<t.length;i+=1)r[i+e.length]=t[i];return r};return implementation=function(n){var i=this;if("function"!=typeof i||"[object Function]"!==e.apply(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var o,s=function(e){for(var t=[],r=1,n=0;r<e.length;r+=1,n+=1)t[n]=e[r];return t}(arguments),a=t(0,i.length-s.length),l=[],c=0;c<a;c++)l[c]="$"+c;if(o=Function("binder","return function ("+function(e){for(var t="",r=0;r<e.length;r+=1)t+=e[r],r+1<e.length&&(t+=",");return t}(l)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof o){var e=i.apply(this,r(s,arguments));return Object(e)===e?e:this}return i.apply(n,r(s,arguments))}),i.prototype){var u=function(){};u.prototype=i.prototype,o.prototype=new u,u.prototype=null}return o},implementation}function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var e=requireImplementation();return functionBind=Function.prototype.bind||e}function requireFunctionCall(){return hasRequiredFunctionCall?functionCall:(hasRequiredFunctionCall=1,functionCall=Function.prototype.call)}function requireFunctionApply(){return hasRequiredFunctionApply?functionApply:(hasRequiredFunctionApply=1,functionApply=Function.prototype.apply)}function requireReflectApply(){return hasRequiredReflectApply?reflectApply:(hasRequiredReflectApply=1,reflectApply="undefined"!=typeof Reflect&&Reflect&&Reflect.apply)}function requireActualApply(){if(hasRequiredActualApply)return actualApply;hasRequiredActualApply=1;var e=requireFunctionBind(),t=requireFunctionApply(),r=requireFunctionCall(),n=requireReflectApply();return actualApply=n||e.call(r,t)}function requireCallBindApplyHelpers(){if(hasRequiredCallBindApplyHelpers)return callBindApplyHelpers;hasRequiredCallBindApplyHelpers=1;var e=requireFunctionBind(),t=requireType(),r=requireFunctionCall(),n=requireActualApply();return callBindApplyHelpers=function(i){if(i.length<1||"function"!=typeof i[0])throw new t("a function is required");return n(e,r,i)}}function requireGet(){if(hasRequiredGet)return get;hasRequiredGet=1;var e,t=requireCallBindApplyHelpers(),r=requireGopd();try{e=[].__proto__===Array.prototype}catch(s){if(!s||"object"!=typeof s||!("code"in s)||"ERR_PROTO_ACCESS"!==s.code)throw s}var n=!!e&&r&&r(Object.prototype,"__proto__"),i=Object,o=i.getPrototypeOf;return get=n&&"function"==typeof n.get?t([n.get]):"function"==typeof o&&function(e){return o(null==e?e:i(e))}}function requireGetProto(){if(hasRequiredGetProto)return getProto;hasRequiredGetProto=1;var e=requireReflect_getPrototypeOf(),t=requireObject_getPrototypeOf(),r=requireGet();return getProto=e?function(t){return e(t)}:t?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("getProto: not an object");return t(e)}:r?function(e){return r(e)}:null}function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=requireFunctionBind();return hasown=r.call(e,t)}function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;var e;hasRequiredGetIntrinsic=1;var t=requireEsObjectAtoms(),r=requireEsErrors(),n=require_eval(),i=requireRange(),o=requireRef(),s=requireSyntax(),a=requireType(),l=requireUri(),c=requireAbs(),u=requireFloor(),d=requireMax(),p=requireMin(),h=requirePow(),f=requireRound(),m=requireSign(),g=Function,b=function(e){try{return g('"use strict"; return ('+e+").constructor;")()}catch(t){}},y=requireGopd(),T=requireEsDefineProperty(),E=function(){throw new a},O=y?function(){try{return E}catch(e){try{return y(arguments,"callee").get}catch(t){return E}}}():E,S=requireHasSymbols()(),x=requireGetProto(),v=requireObject_getPrototypeOf(),_=requireReflect_getPrototypeOf(),A=requireFunctionApply(),C=requireFunctionCall(),w={},k="undefined"!=typeof Uint8Array&&x?x(Uint8Array):e,D={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?e:ArrayBuffer,"%ArrayIteratorPrototype%":S&&x?x([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":w,"%AsyncGenerator%":w,"%AsyncGeneratorFunction%":w,"%AsyncIteratorPrototype%":w,"%Atomics%":"undefined"==typeof Atomics?e:Atomics,"%BigInt%":"undefined"==typeof BigInt?e:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?e:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":n,"%Float16Array%":"undefined"==typeof Float16Array?e:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?e:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?e:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?e:FinalizationRegistry,"%Function%":g,"%GeneratorFunction%":w,"%Int8Array%":"undefined"==typeof Int8Array?e:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?e:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":S&&x?x(x([][Symbol.iterator]())):e,"%JSON%":"object"==typeof JSON?JSON:e,"%Map%":"undefined"==typeof Map?e:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&S&&x?x((new Map)[Symbol.iterator]()):e,"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":y,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?e:Promise,"%Proxy%":"undefined"==typeof Proxy?e:Proxy,"%RangeError%":i,"%ReferenceError%":o,"%Reflect%":"undefined"==typeof Reflect?e:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?e:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&S&&x?x((new Set)[Symbol.iterator]()):e,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":S&&x?x(""[Symbol.iterator]()):e,"%Symbol%":S?Symbol:e,"%SyntaxError%":s,"%ThrowTypeError%":O,"%TypedArray%":k,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?e:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?e:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?e:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?e:Uint32Array,"%URIError%":l,"%WeakMap%":"undefined"==typeof WeakMap?e:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?e:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?e:WeakSet,"%Function.prototype.call%":C,"%Function.prototype.apply%":A,"%Object.defineProperty%":T,"%Object.getPrototypeOf%":v,"%Math.abs%":c,"%Math.floor%":u,"%Math.max%":d,"%Math.min%":p,"%Math.pow%":h,"%Math.round%":f,"%Math.sign%":m,"%Reflect.getPrototypeOf%":_};if(x)try{null.error}catch(Q){var I=x(x(Q));D["%Error.prototype%"]=I}var R=function e(t){var r;if("%AsyncFunction%"===t)r=b("async function () {}");else if("%GeneratorFunction%"===t)r=b("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=b("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&x&&(r=x(i.prototype))}return D[t]=r,r},N={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},P=requireFunctionBind(),M=requireHasown(),$=P.call(C,Array.prototype.concat),L=P.call(A,Array.prototype.splice),B=P.call(C,String.prototype.replace),F=P.call(C,String.prototype.slice),q=P.call(C,RegExp.prototype.exec),j=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,G=/\\(\\)?/g,H=function(e,t){var r,n=e;if(M(N,n)&&(n="%"+(r=N[n])[0]+"%"),M(D,n)){var i=D[n];if(i===w&&(i=R(n)),void 0===i&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new s("intrinsic "+e+" does not exist!")};return getIntrinsic=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');if(null===q(/^%?[^%]*%?$/,e))throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=F(e,0,1),r=F(e,-1);if("%"===t&&"%"!==r)throw new s("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new s("invalid intrinsic syntax, expected opening `%`");var n=[];return B(e,j,function(e,t,r,i){n[n.length]=r?B(i,G,"$1"):t||e}),n}(e),n=r.length>0?r[0]:"",i=H("%"+n+"%",t),o=i.name,l=i.value,c=!1,u=i.alias;u&&(n=u[0],L(r,$([0,1],u)));for(var d=1,p=!0;d<r.length;d+=1){var h=r[d],f=F(h,0,1),m=F(h,-1);if(('"'===f||"'"===f||"`"===f||'"'===m||"'"===m||"`"===m)&&f!==m)throw new s("property names with quotes must have matching quotes");if("constructor"!==h&&p||(c=!0),M(D,o="%"+(n+="."+h)+"%"))l=D[o];else if(null!=l){if(!(h in l)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(y&&d+1>=r.length){var g=y(l,h);l=(p=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:l[h]}else p=M(l,h),l=l[h];p&&!c&&(D[o]=l)}}return l},getIntrinsic}function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var e=requireGetIntrinsic(),t=requireCallBindApplyHelpers(),r=t([e("%String.prototype.indexOf%")]);return callBound=function(n,i){var o=e(n,!!i);return"function"==typeof o&&r(n,".prototype.")>-1?t([o]):o}}function requireSideChannelMap(){if(hasRequiredSideChannelMap)return sideChannelMap;hasRequiredSideChannelMap=1;var e=requireGetIntrinsic(),t=requireCallBound(),r=requireObjectInspect(),n=requireType(),i=e("%Map%",!0),o=t("Map.prototype.get",!0),s=t("Map.prototype.set",!0),a=t("Map.prototype.has",!0),l=t("Map.prototype.delete",!0),c=t("Map.prototype.size",!0);return sideChannelMap=!!i&&function(){var e,t={assert:function(e){if(!t.has(e))throw new n("Side channel does not contain "+r(e))},delete:function(t){if(e){var r=l(e,t);return 0===c(e)&&(e=void 0),r}return!1},get:function(t){if(e)return o(e,t)},has:function(t){return!!e&&a(e,t)},set:function(t,r){e||(e=new i),s(e,t,r)}};return t}}function requireSideChannelWeakmap(){if(hasRequiredSideChannelWeakmap)return sideChannelWeakmap;hasRequiredSideChannelWeakmap=1;var e=requireGetIntrinsic(),t=requireCallBound(),r=requireObjectInspect(),n=requireSideChannelMap(),i=requireType(),o=e("%WeakMap%",!0),s=t("WeakMap.prototype.get",!0),a=t("WeakMap.prototype.set",!0),l=t("WeakMap.prototype.has",!0),c=t("WeakMap.prototype.delete",!0);return sideChannelWeakmap=o?function(){var e,t,u={assert:function(e){if(!u.has(e))throw new i("Side channel does not contain "+r(e))},delete:function(r){if(o&&r&&("object"==typeof r||"function"==typeof r)){if(e)return c(e,r)}else if(n&&t)return t.delete(r);return!1},get:function(r){return o&&r&&("object"==typeof r||"function"==typeof r)&&e?s(e,r):t&&t.get(r)},has:function(r){return o&&r&&("object"==typeof r||"function"==typeof r)&&e?l(e,r):!!t&&t.has(r)},set:function(r,i){o&&r&&("object"==typeof r||"function"==typeof r)?(e||(e=new o),a(e,r,i)):n&&(t||(t=n()),t.set(r,i))}};return u}:n}function requireSideChannel(){if(hasRequiredSideChannel)return sideChannel;hasRequiredSideChannel=1;var e=requireType(),t=requireObjectInspect(),r=requireSideChannelList(),n=requireSideChannelMap(),i=requireSideChannelWeakmap()||n||r;return sideChannel=function(){var r,n={assert:function(r){if(!n.has(r))throw new e("Side channel does not contain "+t(r))},delete:function(e){return!!r&&r.delete(e)},get:function(e){return r&&r.get(e)},has:function(e){return!!r&&r.has(e)},set:function(e,t){r||(r=i()),r.set(e,t)}};return n}}function requireFormats(){if(hasRequiredFormats)return formats;hasRequiredFormats=1;var e=String.prototype.replace,t=/%20/g,r="RFC3986";return formats={default:r,formatters:{RFC1738:function(r){return e.call(r,t,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:r}}function requireUtils$3(){if(hasRequiredUtils$3)return utils$3;hasRequiredUtils$3=1;var e=requireFormats(),t=Object.prototype.hasOwnProperty,r=Array.isArray,n=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),i=function(e,t){for(var r=t&&t.plainObjects?{__proto__:null}:{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},o=1024;return utils$3={arrayToObject:i,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],i=0;i<t.length;++i)for(var o=t[i],s=o.obj[o.prop],a=Object.keys(s),l=0;l<a.length;++l){var c=a[l],u=s[c];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:s,prop:c}),n.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(r(n)){for(var i=[],o=0;o<n.length;++o)void 0!==n[o]&&i.push(n[o]);t.obj[t.prop]=i}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(i){return n}},encode:function(t,r,i,s,a){if(0===t.length)return t;var l=t;if("symbol"==typeof t?l=Symbol.prototype.toString.call(t):"string"!=typeof t&&(l=String(t)),"iso-8859-1"===i)return escape(l).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var c="",u=0;u<l.length;u+=o){for(var d=l.length>=o?l.slice(u,u+o):l,p=[],h=0;h<d.length;++h){var f=d.charCodeAt(h);45===f||46===f||95===f||126===f||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||a===e.RFC1738&&(40===f||41===f)?p[p.length]=d.charAt(h):f<128?p[p.length]=n[f]:f<2048?p[p.length]=n[192|f>>6]+n[128|63&f]:f<55296||f>=57344?p[p.length]=n[224|f>>12]+n[128|f>>6&63]+n[128|63&f]:(h+=1,f=65536+((1023&f)<<10|1023&d.charCodeAt(h)),p[p.length]=n[240|f>>18]+n[128|f>>12&63]+n[128|f>>6&63]+n[128|63&f])}c+=p.join("")}return c},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(r(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(t(e[i]));return n}return t(e)},merge:function e(n,o,s){if(!o)return n;if("object"!=typeof o&&"function"!=typeof o){if(r(n))n.push(o);else{if(!n||"object"!=typeof n)return[n,o];(s&&(s.plainObjects||s.allowPrototypes)||!t.call(Object.prototype,o))&&(n[o]=!0)}return n}if(!n||"object"!=typeof n)return[n].concat(o);var a=n;return r(n)&&!r(o)&&(a=i(n,s)),r(n)&&r(o)?(o.forEach(function(r,i){if(t.call(n,i)){var o=n[i];o&&"object"==typeof o&&r&&"object"==typeof r?n[i]=e(o,r,s):n.push(r)}else n[i]=r}),n):Object.keys(o).reduce(function(r,n){var i=o[n];return t.call(r,n)?r[n]=e(r[n],i,s):r[n]=i,r},a)}}}function requireStringify$1(){if(hasRequiredStringify$1)return stringify_1;hasRequiredStringify$1=1;var e=requireSideChannel(),t=requireUtils$3(),r=requireFormats(),n=Object.prototype.hasOwnProperty,i={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},o=Array.isArray,s=Array.prototype.push,a=function(e,t){s.apply(e,o(t)?t:[t])},l=Date.prototype.toISOString,c=r.default,u={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:t.encode,encodeValuesOnly:!1,filter:void 0,format:c,formatter:r.formatters[c],indices:!1,serializeDate:function(e){return l.call(e)},skipNulls:!1,strictNullHandling:!1},d={},p=function r(n,i,s,l,c,p,h,f,m,g,b,y,T,E,O,S,x,v){for(var _,A=n,C=v,w=0,k=!1;void 0!==(C=C.get(d))&&!k;){var D=C.get(n);if(w+=1,void 0!==D){if(D===w)throw new RangeError("Cyclic object value");k=!0}void 0===C.get(d)&&(w=0)}if("function"==typeof g?A=g(i,A):A instanceof Date?A=T(A):"comma"===s&&o(A)&&(A=t.maybeMap(A,function(e){return e instanceof Date?T(e):e})),null===A){if(p)return m&&!S?m(i,u.encoder,x,"key",E):i;A=""}if("string"==typeof(_=A)||"number"==typeof _||"boolean"==typeof _||"symbol"==typeof _||"bigint"==typeof _||t.isBuffer(A))return m?[O(S?i:m(i,u.encoder,x,"key",E))+"="+O(m(A,u.encoder,x,"value",E))]:[O(i)+"="+O(String(A))];var I,R=[];if(void 0===A)return R;if("comma"===s&&o(A))S&&m&&(A=t.maybeMap(A,m)),I=[{value:A.length>0?A.join(",")||null:void 0}];else if(o(g))I=g;else{var N=Object.keys(A);I=b?N.sort(b):N}var P=f?String(i).replace(/\./g,"%2E"):String(i),M=l&&o(A)&&1===A.length?P+"[]":P;if(c&&o(A)&&0===A.length)return M+"[]";for(var $=0;$<I.length;++$){var L=I[$],B="object"==typeof L&&L&&void 0!==L.value?L.value:A[L];if(!h||null!==B){var F=y&&f?String(L).replace(/\./g,"%2E"):String(L),q=o(A)?"function"==typeof s?s(M,F):M:M+(y?"."+F:"["+F+"]");v.set(n,w);var j=e();j.set(d,v),a(R,r(B,q,s,l,c,p,h,f,"comma"===s&&S&&o(A)?null:m,g,b,y,T,E,O,S,x,j))}}return R};return stringify_1=function(t,s){var l,c=t,d=function(e){if(!e)return u;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||u.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var s=r.default;if(void 0!==e.format){if(!n.call(r.formatters,e.format))throw new TypeError("Unknown format option provided.");s=e.format}var a,l=r.formatters[s],c=u.filter;if(("function"==typeof e.filter||o(e.filter))&&(c=e.filter),a=e.arrayFormat in i?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":u.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var d=void 0===e.allowDots?!0===e.encodeDotInKeys||u.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:u.addQueryPrefix,allowDots:d,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:u.allowEmptyArrays,arrayFormat:a,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:u.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?u.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:u.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:u.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:u.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:u.encodeValuesOnly,filter:c,format:s,formatter:l,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:u.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:u.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:u.strictNullHandling}}(s);"function"==typeof d.filter?c=(0,d.filter)("",c):o(d.filter)&&(l=d.filter);var h=[];if("object"!=typeof c||null===c)return"";var f=i[d.arrayFormat],m="comma"===f&&d.commaRoundTrip;l||(l=Object.keys(c)),d.sort&&l.sort(d.sort);for(var g=e(),b=0;b<l.length;++b){var y=l[b],T=c[y];d.skipNulls&&null===T||a(h,p(T,y,f,m,d.allowEmptyArrays,d.strictNullHandling,d.skipNulls,d.encodeDotInKeys,d.encode?d.encoder:null,d.filter,d.sort,d.allowDots,d.serializeDate,d.format,d.formatter,d.encodeValuesOnly,d.charset,g))}var E=h.join(d.delimiter),O=!0===d.addQueryPrefix?"?":"";return d.charsetSentinel&&("iso-8859-1"===d.charset?O+="utf8=%26%2310003%3B&":O+="utf8=%E2%9C%93&"),E.length>0?O+E:""}}function requireParse(){if(hasRequiredParse)return parse;hasRequiredParse=1;var e=requireUtils$3(),t=Object.prototype.hasOwnProperty,r=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:e.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},i=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},o=function(e,t,r){if(e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1)return e.split(",");if(t.throwOnLimitExceeded&&r>=t.arrayLimit)throw new RangeError("Array limit exceeded. Only "+t.arrayLimit+" element"+(1===t.arrayLimit?"":"s")+" allowed in an array.");return e},s=function(r,n,i,s){if(r){var a=i.allowDots?r.replace(/\.([^.[]+)/g,"[$1]"):r,l=/(\[[^[\]]*])/g,c=i.depth>0&&/(\[[^[\]]*])/.exec(a),u=c?a.slice(0,c.index):a,d=[];if(u){if(!i.plainObjects&&t.call(Object.prototype,u)&&!i.allowPrototypes)return;d.push(u)}for(var p=0;i.depth>0&&null!==(c=l.exec(a))&&p<i.depth;){if(p+=1,!i.plainObjects&&t.call(Object.prototype,c[1].slice(1,-1))&&!i.allowPrototypes)return;d.push(c[1])}if(c){if(!0===i.strictDepth)throw new RangeError("Input depth exceeded depth option of "+i.depth+" and strictDepth is true");d.push("["+a.slice(c.index)+"]")}return function(t,r,n,i){var s=0;if(t.length>0&&"[]"===t[t.length-1]){var a=t.slice(0,-1).join("");s=Array.isArray(r)&&r[a]?r[a].length:0}for(var l=i?r:o(r,n,s),c=t.length-1;c>=0;--c){var u,d=t[c];if("[]"===d&&n.parseArrays)u=n.allowEmptyArrays&&(""===l||n.strictNullHandling&&null===l)?[]:e.combine([],l);else{u=n.plainObjects?{__proto__:null}:{};var p="["===d.charAt(0)&&"]"===d.charAt(d.length-1)?d.slice(1,-1):d,h=n.decodeDotInKeys?p.replace(/%2E/g,"."):p,f=parseInt(h,10);n.parseArrays||""!==h?!isNaN(f)&&d!==h&&String(f)===h&&f>=0&&n.parseArrays&&f<=n.arrayLimit?(u=[])[f]=l:"__proto__"!==h&&(u[h]=l):u={0:l}}l=u}return l}(d,n,i,s)}};return parse=function(a,l){var c=function(t){if(!t)return n;if(void 0!==t.allowEmptyArrays&&"boolean"!=typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==t.decodeDotInKeys&&"boolean"!=typeof t.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(void 0!==t.throwOnLimitExceeded&&"boolean"!=typeof t.throwOnLimitExceeded)throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var r=void 0===t.charset?n.charset:t.charset,i=void 0===t.duplicates?n.duplicates:t.duplicates;if("combine"!==i&&"first"!==i&&"last"!==i)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===t.allowDots?!0===t.decodeDotInKeys||n.allowDots:!!t.allowDots,allowEmptyArrays:"boolean"==typeof t.allowEmptyArrays?!!t.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:n.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:n.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:n.arrayLimit,charset:r,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:n.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:n.comma,decodeDotInKeys:"boolean"==typeof t.decodeDotInKeys?t.decodeDotInKeys:n.decodeDotInKeys,decoder:"function"==typeof t.decoder?t.decoder:n.decoder,delimiter:"string"==typeof t.delimiter||e.isRegExp(t.delimiter)?t.delimiter:n.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:n.depth,duplicates:i,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:n.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:n.plainObjects,strictDepth:"boolean"==typeof t.strictDepth?!!t.strictDepth:n.strictDepth,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:n.strictNullHandling,throwOnLimitExceeded:"boolean"==typeof t.throwOnLimitExceeded&&t.throwOnLimitExceeded}}(l);if(""===a||null==a)return c.plainObjects?{__proto__:null}:{};for(var u="string"==typeof a?function(s,a){var l={__proto__:null},c=a.ignoreQueryPrefix?s.replace(/^\?/,""):s;c=c.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var u=a.parameterLimit===1/0?void 0:a.parameterLimit,d=c.split(a.delimiter,a.throwOnLimitExceeded?u+1:u);if(a.throwOnLimitExceeded&&d.length>u)throw new RangeError("Parameter limit exceeded. Only "+u+" parameter"+(1===u?"":"s")+" allowed.");var p,h=-1,f=a.charset;if(a.charsetSentinel)for(p=0;p<d.length;++p)0===d[p].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[p]?f="utf-8":"utf8=%26%2310003%3B"===d[p]&&(f="iso-8859-1"),h=p,p=d.length);for(p=0;p<d.length;++p)if(p!==h){var m,g,b=d[p],y=b.indexOf("]="),T=-1===y?b.indexOf("="):y+1;-1===T?(m=a.decoder(b,n.decoder,f,"key"),g=a.strictNullHandling?null:""):(m=a.decoder(b.slice(0,T),n.decoder,f,"key"),g=e.maybeMap(o(b.slice(T+1),a,r(l[m])?l[m].length:0),function(e){return a.decoder(e,n.decoder,f,"value")})),g&&a.interpretNumericEntities&&"iso-8859-1"===f&&(g=i(String(g))),b.indexOf("[]=")>-1&&(g=r(g)?[g]:g);var E=t.call(l,m);E&&"combine"===a.duplicates?l[m]=e.combine(l[m],g):E&&"last"!==a.duplicates||(l[m]=g)}return l}(a,c):a,d=c.plainObjects?{__proto__:null}:{},p=Object.keys(u),h=0;h<p.length;++h){var f=p[h],m=s(f,u[f],c,"string"==typeof a);d=e.merge(d,m,c)}return!0===c.allowSparse?d:e.compact(d)}}function requireLib$1(){if(hasRequiredLib$1)return lib$1;hasRequiredLib$1=1;var e=requireStringify$1(),t=requireParse();return lib$1={formats:requireFormats(),parse:t,stringify:e}}function requireUrl(){if(hasRequiredUrl)return url;hasRequiredUrl=1;var e=requirePunycode();function t(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var r=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,o=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),s=["'"].concat(o),a=["%","/","?",";","#"].concat(s),l=["/","?","#"],c=/^[+a-z0-9A-Z_-]{0,63}$/,u=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,d={javascript:!0,"javascript:":!0},p={javascript:!0,"javascript:":!0},h={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},f=requireLib$1();function m(e,r,n){if(e&&"object"==typeof e&&e instanceof t)return e;var i=new t;return i.parse(e,r,n),i}return t.prototype.parse=function(t,n,o){if("string"!=typeof t)throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var m=t.indexOf("?"),g=-1!==m&&m<t.indexOf("#")?"?":"#",b=t.split(g);b[0]=b[0].replace(/\\/g,"/");var y=t=b.join(g);if(y=y.trim(),!o&&1===t.split("#").length){var T=i.exec(y);if(T)return this.path=y,this.href=y,this.pathname=T[1],T[2]?(this.search=T[2],this.query=n?f.parse(this.search.substr(1)):this.search.substr(1)):n&&(this.search="",this.query={}),this}var E=r.exec(y);if(E){var O=(E=E[0]).toLowerCase();this.protocol=O,y=y.substr(E.length)}if(o||E||y.match(/^\/\/[^@/]+@[^@/]+/)){var S="//"===y.substr(0,2);!S||E&&p[E]||(y=y.substr(2),this.slashes=!0)}if(!p[E]&&(S||E&&!h[E])){for(var x,v,_=-1,A=0;A<l.length;A++)-1!==(C=y.indexOf(l[A]))&&(-1===_||C<_)&&(_=C);for(-1!==(v=-1===_?y.lastIndexOf("@"):y.lastIndexOf("@",_))&&(x=y.slice(0,v),y=y.slice(v+1),this.auth=decodeURIComponent(x)),_=-1,A=0;A<a.length;A++){var C;-1!==(C=y.indexOf(a[A]))&&(-1===_||C<_)&&(_=C)}-1===_&&(_=y.length),this.host=y.slice(0,_),y=y.slice(_),this.parseHost(),this.hostname=this.hostname||"";var w="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!w)for(var k=this.hostname.split(/\./),D=(A=0,k.length);A<D;A++){var I=k[A];if(I&&!I.match(c)){for(var R="",N=0,P=I.length;N<P;N++)I.charCodeAt(N)>127?R+="x":R+=I[N];if(!R.match(c)){var M=k.slice(0,A),$=k.slice(A+1),L=I.match(u);L&&(M.push(L[1]),$.unshift(L[2])),$.length&&(y="/"+$.join(".")+y),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),w||(this.hostname=e.toASCII(this.hostname));var B=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+B,this.href+=this.host,w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!d[O])for(A=0,D=s.length;A<D;A++){var q=s[A];if(-1!==y.indexOf(q)){var j=encodeURIComponent(q);j===q&&(j=escape(q)),y=y.split(q).join(j)}}var G=y.indexOf("#");-1!==G&&(this.hash=y.substr(G),y=y.slice(0,G));var H=y.indexOf("?");if(-1!==H?(this.search=y.substr(H),this.query=y.substr(H+1),n&&(this.query=f.parse(this.query)),y=y.slice(0,H)):n&&(this.search="",this.query={}),y&&(this.pathname=y),h[O]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var Q=this.search||"";this.path=B+Q}return this.href=this.format(),this},t.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(o=f.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||h[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(s=s.replace("#","%23"))+n},t.prototype.resolve=function(e){return this.resolveObject(m(e,!1,!0)).format()},t.prototype.resolveObject=function(e){if("string"==typeof e){var r=new t;r.parse(e,!1,!0),e=r}for(var n=new t,i=Object.keys(this),o=0;o<i.length;o++){var s=i[o];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),l=0;l<a.length;l++){var c=a[l];"protocol"!==c&&(n[c]=e[c])}return h[n.protocol]&&n.hostname&&!n.pathname&&(n.pathname="/",n.path=n.pathname),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!h[e.protocol]){for(var u=Object.keys(e),d=0;d<u.length;d++){var f=u[d];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||p[e.protocol])n.pathname=e.pathname;else{for(var m=(e.pathname||"").split("/");m.length&&!(e.host=m.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),n.pathname=m.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",b=n.search||"";n.path=g+b}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),T=e.host||e.pathname&&"/"===e.pathname.charAt(0),E=T||y||n.host&&e.pathname,O=E,S=n.pathname&&n.pathname.split("/")||[],x=(m=e.pathname&&e.pathname.split("/")||[],n.protocol&&!h[n.protocol]);if(x&&(n.hostname="",n.port=null,n.host&&(""===S[0]?S[0]=n.host:S.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===m[0]?m[0]=e.host:m.unshift(e.host)),e.host=null),E=E&&(""===m[0]||""===S[0])),T)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,S=m;else if(m.length)S||(S=[]),S.pop(),S=S.concat(m),n.search=e.search,n.query=e.query;else if(null!=e.search)return x&&(n.host=S.shift(),n.hostname=n.host,(w=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=w.shift(),n.hostname=w.shift(),n.host=n.hostname)),n.search=e.search,n.query=e.query,null===n.pathname&&null===n.search||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var v=S.slice(-1)[0],_=(n.host||e.host||S.length>1)&&("."===v||".."===v)||""===v,A=0,C=S.length;C>=0;C--)"."===(v=S[C])?S.splice(C,1):".."===v?(S.splice(C,1),A++):A&&(S.splice(C,1),A--);if(!E&&!O)for(;A--;A)S.unshift("..");!E||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),_&&"/"!==S.join("/").substr(-1)&&S.push("");var w,k=""===S[0]||S[0]&&"/"===S[0].charAt(0);return x&&(n.hostname=k?"":S.length?S.shift():"",n.host=n.hostname,(w=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=w.shift(),n.hostname=w.shift(),n.host=n.hostname)),(E=E||n.host&&S.length)&&!k&&S.unshift(""),S.length>0?n.pathname=S.join("/"):(n.pathname=null,n.path=null),null===n.pathname&&null===n.search||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},t.prototype.parseHost=function(){var e=this.host,t=n.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},url.parse=m,url.resolve=function(e,t){return m(e,!1,!0).resolve(t)},url.resolveObject=function(e,t){return e?m(e,!1,!0).resolveObject(t):t},url.format=function(e){return"string"==typeof e&&(e=m(e)),e instanceof t?e.format():t.prototype.format.call(e)},url.Url=t,url}const __viteBrowserExternal_path=new Proxy({},{get(e,t){throw new Error(`Module "path" has been externalized for browser compatibility. Cannot access "path.${t}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),__viteBrowserExternal_path$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal_path},Symbol.toStringTag,{value:"Module"})),require$$3=getAugmentedNamespace(__viteBrowserExternal_path$1);var decodeUriComponent,hasRequiredDecodeUriComponent,sourceMapResolve,hasRequiredSourceMapResolve;function requireDecodeUriComponent(){if(hasRequiredDecodeUriComponent)return decodeUriComponent;hasRequiredDecodeUriComponent=1;var e="%[a-f0-9]{2}",t=new RegExp("("+e+")|([^%]+?)","gi"),r=new RegExp("("+e+")+","gi");function n(e,t){try{return[decodeURIComponent(e.join(""))]}catch(o){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],n(r),n(i))}function i(e){try{return decodeURIComponent(e)}catch(o){for(var r=e.match(t)||[],i=1;i<r.length;i++)r=(e=n(r,i).join("")).match(t)||[];return e}}return decodeUriComponent=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var n={"%FE%FF":"","%FF%FE":""},o=r.exec(e);o;){try{n[o[0]]=decodeURIComponent(o[0])}catch(t){var s=i(o[0]);s!==o[0]&&(n[o[0]]=s)}o=r.exec(e)}n["%C2"]="";for(var a=Object.keys(n),l=0;l<a.length;l++){var c=a[l];e=e.replace(new RegExp(c,"g"),n[c])}return e}(e)}}}function requireSourceMapResolve(){if(hasRequiredSourceMapResolve)return sourceMapResolve;hasRequiredSourceMapResolve=1;var e=requireBrowserAtob(),t=requireUrl(),r=require$$3,n=requireDecodeUriComponent();function i(){return Array.prototype.reduce.call(arguments,function(e,r){return t.resolve(e,r)})}function o(e){return"\\"===r.sep?e.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):e}function s(e){return n(e.replace(/\+/g,"%2B"))}function a(e,t,r){setImmediate(function(){e(t,r)})}function l(e,t){try{return JSON.parse(e.replace(/^\)\]\}'/,""))}catch(r){throw r.sourceMapData=t,r}}function c(e,t,r){var n=s(t);try{return String(e(n))}catch(i){throw i.sourceMapData=r,i}}var u=/[#@] sourceMappingURL=([^\s'"]*)/,d=RegExp("(?:/\\*(?:\\s*\r?\n(?://)?)?(?:"+u.source+")\\s*\\*/|//(?:"+u.source+"))\\s*");function p(e,t,r,n){var i;try{i=b(e,t)}catch(o){return a(n,o)}if(!i||i.map)return a(n,null,i);r(s(i.url),function(e,t){if(e)return e.sourceMapData=i,n(e);i.map=String(t);try{i.map=l(i.map,i)}catch(r){return n(r)}n(null,i)})}function h(e,t,r){var n=b(e,t);return!n||n.map||(n.map=c(r,n.url,n),n.map=l(n.map,n)),n}var f=/^data:([^,;]*)(;[^,;]*)*(?:,(.*))?$/,m=/^(?:application|text)\/json$/,g="utf-8";function b(t,r){r=o(r);var n=function(e){var t=e.match(d);return t?t[1]||t[2]||"":null}(t);if(!n)return null;var s=n.match(f);if(s){var a=s[1]||"text/plain",c=s[2]||"",u=s[3]||"",p={sourceMappingURL:n,url:null,sourcesRelativeTo:r,map:u};if(!m.test(a)){var h=new Error("Unuseful data uri mime type: "+a);throw h.sourceMapData=p,h}try{p.map=l(";base64"===c?function(t){if("undefined"==typeof TextDecoder||"undefined"==typeof Uint8Array)return e(t);var r=function(t){for(var r=e(t),n=r.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=r.charCodeAt(o);return i}(t);return new TextDecoder(g,{fatal:!0}).decode(r)}(u):decodeURIComponent(u),p)}catch(y){throw y.sourceMapData=p,y}return p}var b=i(r,n);return{sourceMappingURL:n,url:b,sourcesRelativeTo:b,map:null}}function y(e,t,r,n,i){"function"==typeof n&&(i=n,n={});var o=e.sources?e.sources.length:0,l={sourcesResolved:[],sourcesContent:[]};if(0!==o){var c=function(){0===--o&&i(null,l)};O(e,t,n,function(e,t,n){if(l.sourcesResolved[n]=e,"string"==typeof t)l.sourcesContent[n]=t,a(c,null);else{var i=s(e);r(i,function(e,t){l.sourcesContent[n]=e||String(t),c()})}})}else a(i,null,l)}function T(e,t,r,n){var i={sourcesResolved:[],sourcesContent:[]};return e.sources&&0!==e.sources.length?(O(e,t,n,function(e,t,n){if(i.sourcesResolved[n]=e,null!==r)if("string"==typeof t)i.sourcesContent[n]=t;else{var o=s(e);try{i.sourcesContent[n]=String(r(o))}catch(a){i.sourcesContent[n]=a}}}),i):i}var E=/\/?$/;function O(e,t,r,n){var s;r=r||{},t=o(t);for(var a=0,l=e.sources.length;a<l;a++)s=null,"string"==typeof r.sourceRoot?s=r.sourceRoot:"string"==typeof e.sourceRoot&&!1!==r.sourceRoot&&(s=e.sourceRoot),n(null===s||""===s?i(t,e.sources[a]):i(t,s.replace(E,"/"),e.sources[a]),(e.sourcesContent||[])[a],a)}return sourceMapResolve={resolveSourceMap:p,resolveSourceMapSync:h,resolveSources:y,resolveSourcesSync:T,resolve:function(e,t,r,n,i){if("function"==typeof n&&(i=n,n={}),null===e){var o={sourceMappingURL:null,url:t,sourcesRelativeTo:t,map:null},a=s(t);r(a,function(e,t){if(e)return e.sourceMapData=o,i(e);o.map=String(t);try{o.map=l(o.map,o)}catch(r){return i(r)}c(o)})}else p(e,t,r,function(e,t){return e?i(e):t?void c(t):i(null,null)});function c(e){y(e.map,e.sourcesRelativeTo,r,n,function(t,r){if(t)return i(t);e.sourcesResolved=r.sourcesResolved,e.sourcesContent=r.sourcesContent,i(null,e)})}},resolveSync:function(e,t,r,n){var i;if(null===e)(i={sourceMappingURL:null,url:t,sourcesRelativeTo:t,map:null}).map=c(r,t,i),i.map=l(i.map,i);else if(!(i=h(e,t,r)))return null;var o=T(i.map,i.sourcesRelativeTo,r,n);return i.sourcesResolved=o.sourcesResolved,i.sourcesContent=o.sourcesContent,i},parseMapToJSON:l}}const __viteBrowserExternal_fs=new Proxy({},{get(e,t){throw new Error(`Module "fs" has been externalized for browser compatibility. Cannot access "fs.${t}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),__viteBrowserExternal_fs$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal_fs},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(__viteBrowserExternal_fs$1);var hasRequiredSourceMapSupport,stringify,hasRequiredStringify,hasRequiredCss,hasRequiredSanitize;function requireSourceMapSupport(){return hasRequiredSourceMapSupport||(hasRequiredSourceMapSupport=1,function(e,t){var r=requireSourceMap().SourceMapGenerator,n=requireSourceMap().SourceMapConsumer,i=requireSourceMapResolve(),o=require$$2,s=require$$3;e.exports=function(e){for(var n in e._comment=e.comment,e.map=new r,e.position={line:1,column:1},e.files={},t)e[n]=t[n]};const a=function(e){return"\\"===s.sep?e.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):e};t.updatePosition=function(e){var t=e.match(/\n/g);t&&(this.position.line+=t.length);var r=e.lastIndexOf("\n");this.position.column=~r?e.length-r:this.position.column+e.length},t.emit=function(e,t){if(t){var r=a(t.source||"source.css");this.map.addMapping({source:r,generated:{line:this.position.line,column:Math.max(this.position.column-1,0)},original:{line:t.start.line,column:t.start.column-1}}),this.addFile(r,t)}return this.updatePosition(e),e},t.addFile=function(e,t){"string"==typeof t.content&&(Object.prototype.hasOwnProperty.call(this.files,e)||(this.files[e]=t.content))},t.applySourceMaps=function(){Object.keys(this.files).forEach(function(e){var t=this.files[e];if(this.map.setSourceContent(e,t),!1!==this.options.inputSourcemaps){var r=i.resolveSync(t,e,o.readFileSync);if(r){var l=new n(r.map),c=r.sourcesRelativeTo;this.map.applySourceMap(l,e,a(s.dirname(c)))}}},this)},t.comment=function(e){return/^# sourceMappingURL=/.test(e.comment)?this.emit("",e.position):this._comment(e)}}(sourceMapSupport,sourceMapSupport.exports)),sourceMapSupport.exports}function requireStringify(){if(hasRequiredStringify)return stringify;hasRequiredStringify=1;var e=requireCompress(),t=requireIdentity();return stringify=function(r,n){var i=(n=n||{}).compress?new e(n):new t(n);if(n.sourcemap){requireSourceMapSupport()(i);var o=i.compile(r);return i.applySourceMaps(),{code:o,map:"generator"===n.sourcemap?i.map:i.map.toJSON()}}return i.compile(r)}}function requireCss(){return hasRequiredCss||(hasRequiredCss=1,css$1.parse=requireParse$1(),css$1.stringify=requireStringify()),css$1}function requireSanitize(){return hasRequiredSanitize||(hasRequiredSanitize=1,function(e){var t=sanitize$2&&sanitize$2.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=sanitize$2&&sanitize$2.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=sanitize$2&&sanitize$2.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(n,e,i);return r(n,e),n},i=sanitize$2&&sanitize$2.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.sanitize=e.sanitizeStyles=e.defaultOptions=e.defaultParseOptions=void 0;const o=i(requireSanitizeHtml()),s=i(requireLib$2()),a=n(require$$2$1),l=i(requireCss()),c=i(requireLog()),u=Object.assign(Object.assign({},s.default.whiteList),{"--method":!0}),d=Array.from(new Set(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr","iframe","style","svg","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","switch","symbol","text","textpath","title","tref","tspan","view","vkern","animate","use",...o.default.defaults.allowedTags])),p=Array.from(new Set(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot","frameborder","scrolling","allow","target","attributeName","aria-hidden","referrerpolicy","aria-describedby","data-*","wide-content","sticky-header","viewBox","accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan","from","to","xlink:href","use","note-type","term-key"]));e.defaultParseOptions={lowerCaseAttributeNames:!1},e.defaultOptions=Object.assign(Object.assign({},o.default.defaults),{allowedTags:d,allowedAttributes:Object.assign(Object.assign({},o.default.defaults.allowedAttributes),{"*":p}),allowedSchemesAppliedToAttributes:[...o.default.defaults.allowedSchemesAppliedToAttributes,"xlink:href","from","to"],allowVulnerableTags:!0,parser:e.defaultParseOptions,cssWhiteList:u,transformTags:{use:(e,t)=>({tagName:e,attribs:(e=>{const t=["xlink:href","href"];return Object.fromEntries(Object.entries(e).map(([e,r])=>{return t.includes(e)?[e,(n=r,n.startsWith("#")?n:null)]:[e,r];var n}).filter(([e,t])=>null!==t))})(t)})}});const h=/<\s*(script|iframe|object|embed|svg|img|video|audio|link|meta|base|form|style|template|math|foreignobject)\b/i,f=/<\s*\/\s*style/i,m=/url\s*\(\s*['"]?\s*(?:javascript:|vbscript:|data\s*:\s*(?:text\/html|application\/xhtml\+xml|image\/svg\+xml))/i,g=/expression\s*\(/i,b=/behavior\s*:/i,y=/-moz-binding\s*:/i,T=/@(?:import|charset|namespace)\b/i,E=/\/\*[^]*?\*\//g,O=new RegExp([String.raw`[\u0000-\u0008\u000B\u000C\u000E-\u001F\u007F]`,String.raw`[\u202A-\u202E\u2066-\u2069]`].join("|"),"g"),S=/[<&\\/]|@|url\s*\(|expression|behavior|-moz-binding/i,x=/[\\&\u202A-\u202E\u2066-\u2069]/,v=new RegExp([String.raw`\\([0-9A-Fa-f]{1,6})\s?`,String.raw`&#x([0-9A-Fa-f]{1,6});`,String.raw`&#(\d{1,7});`,String.raw`&([a-zA-Z][a-zA-Z0-9]{1,31});`].join("|"),"g"),_={lt:"<",gt:">",quot:'"',apos:"'",amp:"&",newline:"\n",tab:"\t",colon:":",sol:"/",lpar:"(",rpar:")"};function A(e,t,r,n,i){var o;if(t)return String.fromCodePoint(parseInt(t,16)||0);if(r)return String.fromCodePoint(parseInt(r,16)||0);if(n)return String.fromCodePoint(parseInt(n,10)||0);if(i){const e=null!==(o=_[i])&&void 0!==o?o:_[i.toLowerCase()];if(e)return e}return e}function C(e,t){const r=t.cssWhiteList||{},n=a.load(e);return function(e,t){e("style").each((r,n)=>{const i=e(n).text();try{const r=l.default.parse(i);if(!r.stylesheet)return;r.stylesheet.rules=r.stylesheet.rules.filter(e=>"rule"===e.type),r.stylesheet.rules.forEach(e=>{e.declarations&&(e.declarations=e.declarations.filter(e=>{if(!e.property||!e.value)return!1;const r=String(e.property).toLowerCase(),n=String(e.value);if(!function(e,t){const r="content"===e.toLowerCase(),n=function(e){let t=String(null!=e?e:"");if(!x.test(t))return t;t=t.replace(E,"").replace(O,"").replace(v,A);try{t=t.normalize("NFKC")}catch(r){}return t}(t);if(!S.test(n))return!0;const i=/<[^>]{0,128}>/i.test(n);return![i&&f,!r&&i&&h,m,g,b,y,T].filter(Boolean).some(e=>e.test(n))}(r,n))return!1;const i=Boolean(t[r]);return i&&(e.value=s.default.safeAttrValue(r,n)),!!e.value&&i}))}),e(n).text(l.default.stringify(r))}catch(o){e(n).remove();const t=o instanceof Error?o.message:`${o}`;c.default.info(t)}})}(n,r),function(e,t){const r={whiteList:t},n=new s.default.FilterCSS(r);e("*").each((t,r)=>{const i=e(r).attr("style");i&&e(r).attr("style",n.process(i))})}(n,r),(n("head").html()||"")+(n("body").html()||"")}function w(t,r,n){var i;const s=r||e.defaultOptions;(null==n?void 0:n.cssWhiteList)&&(s.cssWhiteList=Object.assign(Object.assign({},s.cssWhiteList),n.cssWhiteList));const a=null!==(i=s.disableStyleSanitizer)&&void 0!==i&&i?t:C(t,s);return(0,o.default)(a,s)}e.sanitizeStyles=C,e.sanitize=w,e.default=w}(sanitize$2)),sanitize$2}var sanitizeExports=requireSanitize();const sanitize$1=getDefaultExportFromCjs(sanitizeExports),sanitizeModule=_mergeNamespaces({__proto__:null,default:sanitize$1},[sanitizeExports]),sanitizeAll=e=>()=>"",getSanitize=e=>{const t=sanitizeModule,r="sanitize"in t&&t.sanitize?t.sanitize:t.default;return r instanceof Function?r:sanitizeAll(e)};var DomAttr,DomAttr2;DomAttr2=DomAttr||(DomAttr={}),DomAttr2.Html="data-html",DomAttr2.HtmlRaw="data-html-raw";const sanitize=getSanitize("Html"),schemaSpecs$1={[HtmlNode.Block]:{atom:!0,group:"block",attrs:{[HtmlAttr.Content]:{}},parseDOM:[{tag:`div[${DomAttr.Html}]`,getAttrs(e){const t=e;return{[HtmlAttr.Content]:t.getAttribute(DomAttr.HtmlRaw)||t.innerHTML}}}],toDOM(e){const t=e.attrs[HtmlAttr.Content],r=document.createElement("div");return r.setAttribute(DomAttr.Html,""),r.setAttribute(DomAttr.HtmlRaw,t),r.contentEditable="false",r.innerHTML=sanitize(t),r}},[HtmlNode.Inline]:{atom:!0,inline:!0,group:"inline",attrs:{[HtmlAttr.Content]:{}},parseDOM:[{tag:`span[${DomAttr.Html}]`,getAttrs:e=>({[HtmlAttr.Content]:e.textContent})}],toDOM(e){const t=document.createElement("span");return t.setAttribute(DomAttr.Html,""),t.contentEditable="false",t.textContent=e.attrs[HtmlAttr.Content],t}}},serializerTokens$6={[HtmlNode.Block]:(e,t)=>{e.write(t.attrs[HtmlAttr.Content]),e.ensureNewLine(),e.closeBlock(t)},[HtmlNode.Inline]:(e,t)=>{e.write(t.attrs[HtmlAttr.Content])}},Html=e=>{if(e.context.has("html")&&!1===e.context.get("html"))return globalLogger.info("[HTML extension]: Skip extension, because HTML disabled via context"),void e.logger.log("[HTML extension]: Skip extension, because HTML disabled via context");e.addNode(HtmlNode.Block,()=>({spec:schemaSpecs$1[HtmlNode.Block],fromMd:{tokenSpec:parserTokens$7[HtmlNode.Block]},toMd:serializerTokens$6[HtmlNode.Block]})),e.addNode(HtmlNode.Inline,()=>({spec:schemaSpecs$1[HtmlNode.Inline],fromMd:{tokenSpec:parserTokens$7[HtmlNode.Inline]},toMd:serializerTokens$6[HtmlNode.Inline]}))};var BreakNodeName,BreakNodeName2;BreakNodeName2=BreakNodeName||(BreakNodeName={}),BreakNodeName2.HardBreak="hard_break",BreakNodeName2.SoftBreak="soft_break";const hbType=nodeTypeFactory(BreakNodeName.HardBreak),sbType=nodeTypeFactory(BreakNodeName.SoftBreak),BreaksSpecs=(e,t)=>{const{preferredBreak:r="hard"}=t,n=[{tag:"br"}];e.addNode(BreakNodeName.HardBreak,()=>({spec:{inline:!0,group:"inline break",marks:"",isBreak:!0,selectable:!1,parseDOM:"hard"===r?n:void 0,toDOM:()=>["br"]},fromMd:{tokenName:"hardbreak",tokenSpec:{name:BreakNodeName.HardBreak,type:"node"}},toMd:(e,t,r,n)=>{for(let i=n+1;i<r.childCount;i++)if(r.child(i).type!==t.type)return void e.write("\\\n")}})),e.addNode(BreakNodeName.SoftBreak,()=>({spec:{inline:!0,group:"inline break",marks:"",isBreak:!0,selectable:!1,parseDOM:"soft"===r?n:void 0,toDOM:()=>["br"]},fromMd:{tokenName:"softbreak",tokenSpec:{name:BreakNodeName.SoftBreak,type:"node"}},toMd:(e,t,r,n)=>{for(let i=n+1;i<r.childCount;i++)if(r.child(i).type!==t.type)return void e.write("\n")}}))},blockquoteNodeName="blockquote",blockquoteType=nodeTypeFactory(blockquoteNodeName),isBlockqouteNode=e=>e.type.name===blockquoteNodeName,BlockquoteSpecs=e=>{e.addNode(blockquoteNodeName,()=>({spec:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0],selectable:!0},fromMd:{tokenSpec:{name:blockquoteNodeName,type:"block"}},toMd:(e,t)=>{e.wrapBlock("> ",null,t,()=>e.renderContent(t))}}))},CodeBlockNodeAttr={Lang:"data-language",Markup:"data-markup"},codeBlockNodeName="code_block",codeBlockType=nodeTypeFactory(codeBlockNodeName),getLangOfNode=e=>{let t=e.getAttribute(CodeBlockNodeAttr.Lang)||"";if(!t){const r=e.firstElementChild;r&&"code"===r.nodeName.toLowerCase()&&r.classList.contains("hljs")&&(t=r.getAttribute("class")?.split(" ")?.[1]||"")}return t},CodeBlockSpecs=(e,t)=>{e.addNode(codeBlockNodeName,()=>({view:t.nodeview,spec:{attrs:{[CodeBlockNodeAttr.Lang]:{default:""},[CodeBlockNodeAttr.Markup]:{default:"```"}},content:"text*",group:"block",code:!0,marks:"",selectable:!0,allowSelection:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>({[CodeBlockNodeAttr.Lang]:getLangOfNode(e)})}],toDOM:({attrs:e})=>["pre",e,["code",0]]},fromMd:{tokenSpec:{name:codeBlockNodeName,type:"block",noCloseToken:!0,prepareContent:removeNewLineAtEnd}},toMd:(e,t)=>{const r=t.attrs[CodeBlockNodeAttr.Lang],n=t.attrs[CodeBlockNodeAttr.Markup];e.write(n+r+"\n"),e.text(t.textContent,!1),e.write("\n"),e.write(n),e.closeBlock(t)}})),e.addNode("fence",()=>({spec:{},fromMd:{tokenSpec:{name:codeBlockNodeName,type:"block",noCloseToken:!0,getAttrs:e=>{const t={[CodeBlockNodeAttr.Markup]:e.markup};return e.info&&(t[CodeBlockNodeAttr.Lang]=e.info.split(/(\s+)/g)[0]),t},prepareContent:removeNewLineAtEnd}},toMd:()=>{throw new Error("Unexpected toMd() call on fence node")}})),e.addKeymap(()=>({Tab:(e,t)=>{const{$anchor:r,$head:n}=e.selection;return!(!r.sameParent(n)||r.parent.type.name!==codeBlockNodeName||(t?.(e.tr.replaceSelectionWith(e.schema.text("\t")).scrollIntoView()),0))}}))};function removeNewLineAtEnd(e){return e.endsWith("\n")?e.slice(0,e.length-1):e}var markdownItDeflist,hasRequiredMarkdownItDeflist,deflist,hasRequiredDeflist;function requireMarkdownItDeflist(){return hasRequiredMarkdownItDeflist?markdownItDeflist:(hasRequiredMarkdownItDeflist=1,markdownItDeflist=function(e){var t=e.utils.isSpace;function r(e,t){var r,n,i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];return i>=o||126!==(n=e.src.charCodeAt(i++))&&58!==n||i===(r=e.skipSpaces(i))||r>=o?-1:i}e.block.ruler.before("paragraph","deflist",function(e,n,i,o){var s,a,l,c,u,d,p,h,f,m,g,b,y,T,E,O,S,x,v,_;if(o)return!(e.ddIndent<0)&&r(e,n)>=0;if((f=n+1)>=i)return!1;if(e.isEmpty(f)&&++f>=i)return!1;if(e.sCount[f]<e.blkIndent)return!1;if((a=r(e,f))<0)return!1;p=e.tokens.length,v=!0,(_=e.push("dl_open","dl",1)).map=d=[n,0],c=n,l=f;e:for(;;){for(x=!1,(_=e.push("dt_open","dt",1)).map=[c,c],(_=e.push("inline","",0)).map=[c,c],_.content=e.getLines(c,c+1,e.blkIndent,!1).trim(),_.children=[],_=e.push("dt_close","dt",-1);;){for((_=e.push("dd_open","dd",1)).map=u=[f,0],S=a,h=e.eMarks[l],m=e.sCount[l]+a-(e.bMarks[l]+e.tShift[l]);S<h&&(s=e.src.charCodeAt(S),t(s));)9===s?m+=4-m%4:m++,S++;if(a=S,O=e.tight,g=e.ddIndent,b=e.blkIndent,E=e.tShift[l],T=e.sCount[l],y=e.parentType,e.blkIndent=e.ddIndent=e.sCount[l]+2,e.tShift[l]=a-e.bMarks[l],e.sCount[l]=m,e.tight=!0,e.parentType="deflist",e.md.block.tokenize(e,l,i,!0),e.tight&&!x||(v=!1),x=e.line-l>1&&e.isEmpty(e.line-1),e.tShift[l]=E,e.sCount[l]=T,e.tight=O,e.parentType=y,e.blkIndent=b,e.ddIndent=g,_=e.push("dd_close","dd",-1),u[1]=f=e.line,f>=i)break e;if(e.sCount[f]<e.blkIndent)break e;if((a=r(e,f))<0)break;l=f}if(f>=i)break;if(c=f,e.isEmpty(c))break;if(e.sCount[c]<e.blkIndent)break;if((l=c+1)>=i)break;if(e.isEmpty(l)&&l++,l>=i)break;if(e.sCount[l]<e.blkIndent)break;if((a=r(e,l))<0)break}return _=e.push("dl_close","dl",-1),d[1]=f,e.line=f,v&&function(e,t){var r,n,i=e.level+2;for(r=t+2,n=e.tokens.length-2;r<n;r++)e.tokens[r].level===i&&"paragraph_open"===e.tokens[r].type&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}(e,p),!0},{alt:["paragraph","reference","blockquote"]})})}function requireDeflist(){if(hasRequiredDeflist)return deflist;hasRequiredDeflist=1;const e=(deflist&&deflist.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(requireMarkdownItDeflist());return deflist=e.default}var deflistExports=requireDeflist();const deflistPlugin=getDefaultExportFromCjs(deflistExports);var DeflistNode,DeflistNode2;DeflistNode2=DeflistNode||(DeflistNode={}),DeflistNode2.List="dl",DeflistNode2.Term="dt",DeflistNode2.Desc="dd";const parserTokens$6={[DeflistNode.List]:{name:DeflistNode.List,type:"block"},[DeflistNode.Term]:{name:DeflistNode.Term,type:"block"},[DeflistNode.Desc]:{name:DeflistNode.Desc,type:"block"}},DEFAULT_PLACEHOLDERS$2={Term:"Definition term",Desc:"Definition description"},getSchemaSpecs$5=(e,t)=>({[DeflistNode.List]:{group:"block",content:`(${DeflistNode.Term} ${DeflistNode.Desc})+`,parseDOM:[{tag:"dl"}],toDOM:()=>["dl",0],selectable:!0,allowSelection:!0,complex:"root"},[DeflistNode.Term]:{defining:!0,group:"block",content:"inline*",parseDOM:[{tag:"dt"}],toDOM:()=>["dt",0],placeholder:{content:t?.[DeflistNode.Term]??e?.deflistTermPlaceholder??DEFAULT_PLACEHOLDERS$2.Term,alwaysVisible:!0},selectable:!1,allowSelection:!1,complex:"leaf"},[DeflistNode.Desc]:{defining:!0,group:"block",content:"block+",parseDOM:[{tag:"dd"}],toDOM:()=>["dd",0],placeholder:{content:t?.[DeflistNode.Desc]??e?.deflistDescPlaceholder??DEFAULT_PLACEHOLDERS$2.Desc,alwaysVisible:!0},selectable:!1,allowSelection:!1,complex:"leaf"}}),serializerTokens$5={[DeflistNode.List]:(e,t)=>{e.renderContent(t)},[DeflistNode.Term]:(e,t)=>{e.renderInline(t),e.ensureNewLine()},[DeflistNode.Desc]:(e,t)=>{e.wrapBlock("  ",": ",t,()=>{e.renderContent(t)})}},defListType=nodeTypeFactory(DeflistNode.List),defTermType=nodeTypeFactory(DeflistNode.Term),defDescType=nodeTypeFactory(DeflistNode.Desc),DeflistSpecs=(e,t)=>{const r=getSchemaSpecs$5(t,e.context.get("placeholder"));e.configureMd(e=>e.use(deflistPlugin)),e.addNode(DeflistNode.List,()=>({spec:r[DeflistNode.List],fromMd:{tokenSpec:parserTokens$6[DeflistNode.List]},toMd:serializerTokens$5[DeflistNode.List]})).addNode(DeflistNode.Term,()=>({spec:r[DeflistNode.Term],fromMd:{tokenSpec:parserTokens$6[DeflistNode.Term]},toMd:serializerTokens$5[DeflistNode.Term]})).addNode(DeflistNode.Desc,()=>({spec:r[DeflistNode.Desc],fromMd:{tokenSpec:parserTokens$6[DeflistNode.Desc]},toMd:serializerTokens$5[DeflistNode.Desc]}))},imageNodeName="image",imageType=nodeTypeFactory(imageNodeName),ImageAttr={Src:"src",Alt:"alt",Title:"title",Loading:"loading"},ImageSpecs=e=>{e.addNode(imageNodeName,()=>({spec:{inline:!0,attrs:{[ImageAttr.Src]:{},[ImageAttr.Alt]:{default:null},[ImageAttr.Title]:{default:null},[ImageAttr.Loading]:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:e=>({[ImageAttr.Src]:e.getAttribute(ImageAttr.Src),[ImageAttr.Alt]:e.getAttribute(ImageAttr.Alt),[ImageAttr.Title]:e.getAttribute(ImageAttr.Title),[ImageAttr.Loading]:e.getAttribute(ImageAttr.Loading)})}],toDOM:e=>["img",e.attrs]},fromMd:{tokenSpec:{name:imageNodeName,type:"node",getAttrs:e=>({[ImageAttr.Src]:e.attrGet("src"),[ImageAttr.Title]:e.attrGet("title")||null,[ImageAttr.Loading]:e.attrGet(ImageAttr.Loading)||null,[ImageAttr.Alt]:e.children?.[0]?.content||null})}},toMd:(e,{attrs:t})=>{let r="![";t.alt&&(r+=e.esc(t.alt)),r+="](",t.src&&(r+=e.esc(t.src)),t.title&&(r+=` ${e.quote(t.title)}`),r+=")",e.write(r)}}))};var TableNode,TableNode2,TableAttrs,CellAlign,CellAlign2;TableNode2=TableNode||(TableNode={}),TableNode2.Table="table",TableNode2.Head="thead",TableNode2.Body="tbody",TableNode2.Row="tr",TableNode2.HeaderCell="th",TableNode2.DataCell="td",(TableAttrs||(TableAttrs={})).CellAlign="cell-align",CellAlign2=CellAlign||(CellAlign={}),CellAlign2.Left="left",CellAlign2.Center="center",CellAlign2.Right="right";const parserTokens$5={[TableNode.Table]:{name:TableNode.Table,type:"block"},[TableNode.Head]:{name:TableNode.Head,type:"block"},[TableNode.Body]:{name:TableNode.Body,type:"block"},[TableNode.Row]:{name:TableNode.Row,type:"block"},[TableNode.HeaderCell]:{name:TableNode.HeaderCell,type:"block",getAttrs:getTableCellAttrs},[TableNode.DataCell]:{name:TableNode.DataCell,type:"block",getAttrs:getTableCellAttrs}};function getTableCellAttrs({attrs:e}){const t=Object.fromEntries(e||[]);let r=CellAlign.Left;if(t.style){const e=t.style.split(";").find(e=>e.startsWith("text-align:"))||"";[,r=CellAlign.Left]=e.split(":")}return{[TableAttrs.CellAlign]:r}}
/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */var isNumber$1,hasRequiredIsNumber;function requireIsNumber(){return hasRequiredIsNumber?isNumber$1:(hasRequiredIsNumber=1,isNumber$1=function(e){return"number"==typeof e?e-e===0:"string"==typeof e&&""!==e.trim()&&(Number.isFinite?Number.isFinite(+e):isFinite(+e))})}var isNumberExports=requireIsNumber();const isNumber=getDefaultExportFromCjs(isNumberExports);var TableRole,TableRole2;TableRole2=TableRole||(TableRole={}),TableRole2.Table="table",TableRole2.Body="tableBody",TableRole2.Row="tableRow",TableRole2.Cell="tableCell";const isTableNode=e=>e.type.spec.tableRole===TableRole.Table,isTableBodyNode=e=>e.type.spec.tableRole===TableRole.Body,isTableRowNode=e=>e.type.spec.tableRole===TableRole.Row,isTableCellNode=e=>e.type.spec.tableRole===TableRole.Cell,findParentTable$1=findParentNode(isTableNode),findParentTableBody=findParentNode(isTableBodyNode),findParentTableRow=findParentNode(isTableRowNode),findParentTableCell=findParentNode(isTableCellNode),findParentTableFromPos=e=>findParentNodeClosestToPos(e,isTableNode),findChildTableRows=e=>findChildren(e,isTableRowNode),findChildTableCells=e=>findChildren(e,isTableCellNode);function atEndOfCell(e,t){if(!isTextSelection(e.state.selection))return null;const{$head:r}=e.state.selection;for(let n=r.depth-1;n>=0;n--){const i=r.node(n);if((t<0?r.index(n):r.indexAfter(n))!==(t<0?0:i.childCount))return null;if(i.type.spec.tableRole===TableRole.Cell){const i=r.before(n),o=t>0?"down":"up";return e.endOfTextblock(o)?i:null}}return null}function goToNextCell(e){return(t,r)=>{const n=findParentTable$1(t.selection),i=findParentTableCell(t.selection);if(!n||!i)return!1;const o=findChildTableCells(n.node),s=o.findIndex(e=>e.node===i.node),a=0===s,l=s===o.length-1,c=e=>{const i=o[e],s=n.start+i.pos;((e,n)=>{r?.(t.tr.setSelection(TextSelection.between(t.doc.resolve(e),t.doc.resolve(n))).scrollIntoView())})(s,s+i.node.nodeSize)},u=()=>c(s);return"prev"===e?(a?u():c(s-1),!0):"next"===e&&(l?u():c(s+1),!0)}}const addRowAfter$1=(e,t)=>{const r=findParentTableRow(e.selection),n=findParentTableBody(e.selection);if(!r||!n)return!1;if(t){const n=[];r.node.forEach(e=>{n.push(e.type.createAndFill(e.attrs))}),t(e.tr.insert(r.pos+r.node.nodeSize,r.node.copy(Fragment.from(n))).scrollIntoView())}return!0},findChildIndex=(e,t)=>{let r=-1;return e.forEach((e,n,i)=>{e===t&&(r=i)}),r},addColumnAfter=(e,t)=>{const r=findParentTableCell(e.selection),n=findParentTableRow(e.selection),i=findParentTable$1(e.selection);if(!r||!n||!i)return!1;const o=findChildIndex(n.node,r.node);if(o<0)return!1;if(t){const r=findChildTableRows(i.node);let n=e.tr;for(const e of r){const t=findChildTableCells(e.node)[o];n=n.insert(n.mapping.map(i.pos+e.pos+t.pos+t.node.nodeSize+2),t.node.type.createAndFill(t.node.attrs))}t(n.scrollIntoView())}return!0};class TableDesc{rows;cols;rowsDesc;baseOffset;static __cache=new WeakMap;static create(e){if(this.__cache.has(e))return this.__cache.get(e);if(!isTableNode(e))return null;const t=e.lastChild;if(!t||!isTableBodyNode(t))return null;const r=[];t.forEach((e,t)=>{r.push({node:e,offset:t,cells:[]})}),t.forEach((e,t,n)=>{e.forEach((e,t,i)=>{const o=r[n];let s=i;for(;o.cells[s];)s++;const a=o.cells[s]={type:"real",node:e,offset:t},l=[n,s];if(isNumber(e.attrs.colspan)){o.colspan=!0;const t=a.colspan=parseInt(e.attrs.colspan,10);for(let e=1;e<t;e++)o.cells[s+e]={type:"virtual",colspan:l}}if(isNumber(e.attrs.rowspan)){o.rowspan=!0;const t=a.rowspan=parseInt(e.attrs.rowspan,10);for(let e=1;e<t;e++){const t=a.colspan??1;for(let i=0;i<t;i++){const o=r[n+e].cells[s+i]={type:"virtual",rowspan:l};t>1&&(o.colspan=l)}}}})});const n=r.length,i=r[0].cells.length;for(let s=0;s<n;s++){if(!r[s]||r[s].cells.length!==i)return null;for(let e=0;e<i;e++)if(!r[s].cells[e])return null}const o=new this(r.length,r[0].cells.length,r,2);return this.__cache.set(e,o),o}_rowRanges;_columnRanges;constructor(e,t,r,n){this.rows=e,this.cols=t,this.rowsDesc=r,this.baseOffset=n}bind(e){return new TableDescBinded(e,this)}rowHasVirtualCells(e){return this.rowsDesc[e]?.cells.some(e=>"virtual"===e.type)}columnHasVirtualCells(e){return this.rowsDesc.some(t=>"virtual"===t.cells[e]?.type)}isSafeColumn(e){return this.rowsDesc.every(t=>{const r=t.cells[e];return!("real"!==r.type||r.colspan&&1!==r.colspan)||"virtual"===r.type&&r.rowspan?.[1]===e})}isSafeRow(e){return this.rowsDesc[e]?.cells.every(t=>!("real"!==t.type||t.rowspan&&1!==t.rowspan)||"virtual"===t.type&&t.colspan?.[0]===e)}getOffsetForRow(e){return this.baseOffset+this.rowsDesc[e]?.offset}getRelativePosForRow(e){const t=this.getOffsetForRow(e);return{from:t,to:t+this.rowsDesc[e].node.nodeSize}}getRelativePosForCell(e,t){const r=this.rowsDesc[e]?.cells[t],n=this.getOffsetForRow(e);if("real"===r?.type){const e=n+1+r.offset;return{type:"real",from:e,to:e+r.node.nodeSize}}if("virtual"===r?.type){let r=t;for(;--r>=0;){const t=this.rowsDesc[e].cells[r];if("real"===t.type)return{type:"virtual",closestPos:n+1+t.offset+t.node.nodeSize}}return{type:"virtual",closestPos:n+1}}throw new Error(`Impossible to calculate offset for cell with position [${e},${t}]`)}getRelativePosForRowCells(e){const t=[];for(let r=0;r<this.cols;r++)t.push(this.getRelativePosForCell(e,r));return t}getRelativePosForColumn(e){const t=[];for(let r=0;r<this.rows;r++)t.push(this.getRelativePosForCell(r,e));return t}getCellNodeType(){return this.rowsDesc[0].cells.find(e=>"real"===e.type).node.type}getRowNodeType(){return this.rowsDesc[0].node.type}getCellInfo(e){let t=null;for(let r=0;r<this.rowsDesc.length;r++){const n=this.rowsDesc[r];for(let i=0;i<n.cells.length;i++){const o=n.cells[i];"real"===o.type&&o.node===e&&(t={node:o.node,offset:this.getOffsetForRow(r)+1+o.offset,row:r,column:i})}}return t}getRowRanges(){if(this._rowRanges)return this._rowRanges;const e=[];let t=null;for(let r=0;r<this.rowsDesc.length;r++){const n=this.rowsDesc[r],i=n.cells[0];if("real"===i.type){let i=!0;for(const e of n.cells)"virtual"===e.type&&(i&&=!e.rowspan);e.push(t={startIdx:r,endIdx:r,rowsCount:1,safeTopBoundary:i,safeBottomBoundary:!0})}else{if(!i.rowspan)throw new Error(`First cell in row is virtual, but without rowspan [row=${r}]`);t.endIdx=r,t.rowsCount++}}for(let r=0;r<e.length;r++)e[r].safeTopBoundary||(e[r-1].safeBottomBoundary=!1);return this._rowRanges=e,e}getRowRangeByRowIdx(e){const t=this.getRowRangeIdxByRowIdx(e);return this.getRowRanges()[t]}getRowRangeIdxByRowIdx(e){return this.getRowRanges().findIndex(t=>t.startIdx<=e&&t.endIdx>=e)}getColumnRanges(){if(this._columnRanges)return this._columnRanges;const e=[];let t=null;const r=this.rowsDesc[0];for(let n=0;n<r.cells.length;n++){const i=r.cells[n];if("real"===i.type){let r=!0;for(const e of this.rowsDesc){const t=e.cells[n];"virtual"===t.type&&t.colspan&&(r&&=t.colspan[1]===n)}e.push(t={startIdx:n,endIdx:n,columnsCount:1,safeLeftBoundary:r,safeRightBoundary:!0})}else{if(!i.colspan)throw new Error(`First cell in column is virtual, but without colspan [column=${n}]`);t.endIdx=n,t.columnsCount++}}for(let n=0;n<e.length;n++)e[n].safeLeftBoundary||(e[n-1].safeRightBoundary=!1);return this._columnRanges=e,e}getColumnRangeByColumnIdx(e){const t=this.getColumnRangeIdxByColumnIdx(e);return this.getColumnRanges()[t]}getColumnRangeIdxByColumnIdx(e){return this.getColumnRanges().findIndex(t=>t.startIdx<=e&&t.endIdx>=e)}}class TableDescBinded{pos;base;get rows(){return this.base.rows}get cols(){return this.base.cols}constructor(e,t){this.pos=e,this.base=t}getRowIndexByPos(e){for(let t=0;t<this.rows;t++)if(e===this.pos+this.base.getOffsetForRow(t))return t;return null}getPosForRow(e){const t=this.base.getRelativePosForRow(e);return t.from+=this.pos,t.to+=this.pos,t}getPosForCell(e,t){const r=this.base.getRelativePosForCell(e,t);if("real"===r.type)r.from+=this.pos,r.to+=this.pos;else{if("virtual"!==r.type)throw new Error(`Impossible to calculate positions for cell with position [${e},${t}]`);r.closestPos+=this.pos}return r}getPosForRowCells(e){const t=[];for(let r=0;r<this.base.cols;r++)t.push(this.getPosForCell(e,r));return t}getPosForColumn(e){const t=[];for(let r=0;r<this.base.rows;r++)t.push(this.getPosForCell(r,e));return t}}const removeCurrentColumn=(e,t)=>{const r=findParentTableCell(e.selection),n=findParentTableRow(e.selection),i=findParentTable$1(e.selection);if(!r||!n||!i)return!1;if(n.node.childCount<2)return!1;const o=findChildIndex(n.node,r.node);if(o<0)return!1;if(0===o)return!1;if(t){let r=e.tr;const n=findChildTableRows(i.node);for(const e of n){const t=findChildTableCells(e.node)[o],n=i.start+e.pos+t.pos,s=n+t.node.nodeSize;r=r.delete(r.mapping.map(n),r.mapping.map(s))}t(r)}return!0},removeCurrentRow=(e,t)=>{const r=findParentTableRow(e.selection),n=findParentTableBody(e.selection);return!(!r||!n||findChildTableRows(n.node).length<2||(t?.(removeParentNodeOfType(r.node.type)(e.tr)),0))},schemaSpecs={[TableNode.Table]:{group:"block",content:`${TableNode.Head} ${TableNode.Body}`,isolating:!0,parseDOM:[{tag:"table"}],toDOM:()=>["table",0],selectable:!0,allowSelection:!0,tableRole:TableRole.Table,complex:"root"},[TableNode.Head]:{group:"block",content:TableNode.Row,isolating:!0,parseDOM:[{tag:"thead"}],toDOM:()=>["thead",0],tableRole:TableRole.Body,selectable:!1,allowSelection:!1,complex:"inner"},[TableNode.Body]:{group:"block",content:`${TableNode.Row}+`,isolating:!0,parseDOM:[{tag:"tbody"}],toDOM:()=>["tbody",0],tableRole:TableRole.Body,selectable:!1,allowSelection:!1,complex:"inner"},[TableNode.Row]:{group:"block",content:`(${TableNode.HeaderCell}|${TableNode.DataCell})+`,isolating:!0,parseDOM:[{tag:"tr"}],toDOM:()=>["tr",0],tableRole:TableRole.Row,selectable:!1,allowSelection:!1,complex:"inner"},[TableNode.HeaderCell]:cellTemplate("th"),[TableNode.DataCell]:cellTemplate("td")};function cellTemplate(e){return{attrs:{[TableAttrs.CellAlign]:{default:CellAlign.Left}},group:"block",content:"(text | inline)*",isolating:!0,parseDOM:[{tag:e,getAttrs:e=>e.hasAttribute(TableAttrs.CellAlign)?{[TableAttrs.CellAlign]:e.getAttribute(TableAttrs.CellAlign)}:null}],toDOM:({attrs:t})=>[e,{...t,style:`text-align:${t[TableAttrs.CellAlign]}`},0],tableRole:TableRole.Cell,selectable:!1,allowSelection:!1,complex:"leaf"}}const serializerTokens$4={[TableNode.Table]:(e,t)=>{e.ensureNewLine(),e.write("\n"),e.setNoAutoBlank(),e.renderContent(t),e.unsetNoAutoBlank(),e.ensureNewLine(),e.closeBlock(t)},[TableNode.Head]:(e,t)=>{e.renderContent(t);for(const r of t.content.content[0].content.content)switch(r.attrs[TableAttrs.CellAlign]){case CellAlign.Left:e.write("|:---");break;case CellAlign.Center:e.write("|:---:");break;case CellAlign.Right:e.write("|---:");break;default:e.write("|---")}e.write("|"),e.ensureNewLine(),e.closeBlock(t)},[TableNode.Body]:(e,t)=>{e.renderContent(t),e.closeBlock(t)},[TableNode.Row]:(e,t)=>{e.renderContent(t),e.closeBlock(t),e.write("|"),e.ensureNewLine()},[TableNode.HeaderCell]:(e,t)=>{e.write("|"),e.renderInline(t),e.closeBlock(t)},[TableNode.DataCell]:(e,t)=>{e.write("|"),e.renderInline(t),e.closeBlock(t)}},TableSpecs=e=>{e.addNode(TableNode.Table,()=>({spec:schemaSpecs[TableNode.Table],toMd:serializerTokens$4[TableNode.Table],fromMd:{tokenSpec:parserTokens$5[TableNode.Table]}})).addNode(TableNode.Head,()=>({spec:schemaSpecs[TableNode.Head],toMd:serializerTokens$4[TableNode.Head],fromMd:{tokenSpec:parserTokens$5[TableNode.Head]}})).addNode(TableNode.Body,()=>({spec:schemaSpecs[TableNode.Body],toMd:serializerTokens$4[TableNode.Body],fromMd:{tokenSpec:parserTokens$5[TableNode.Body]}})).addNode(TableNode.Row,()=>({spec:schemaSpecs[TableNode.Row],toMd:serializerTokens$4[TableNode.Row],fromMd:{tokenSpec:parserTokens$5[TableNode.Row]}})).addNode(TableNode.HeaderCell,()=>({spec:schemaSpecs[TableNode.HeaderCell],toMd:serializerTokens$4[TableNode.HeaderCell],fromMd:{tokenSpec:parserTokens$5[TableNode.HeaderCell]}})).addNode(TableNode.DataCell,()=>({spec:schemaSpecs[TableNode.DataCell],toMd:serializerTokens$4[TableNode.DataCell],fromMd:{tokenSpec:parserTokens$5[TableNode.DataCell]}}))},headingNodeName="heading",headingLevelAttr="level",headingLineNumberAttr="data-line",headingType=nodeTypeFactory(headingNodeName),DEFAULT_PLACEHOLDER$1=e=>"Heading "+e.attrs[headingLevelAttr],HeadingSpecs=(e,t)=>{e.addNode(headingNodeName,()=>({spec:{attrs:{[headingLevelAttr]:{default:1},[headingLineNumberAttr]:{default:null}},content:"(text | inline)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{[headingLevelAttr]:1}},{tag:"h2",attrs:{[headingLevelAttr]:2}},{tag:"h3",attrs:{[headingLevelAttr]:3}},{tag:"h4",attrs:{[headingLevelAttr]:4}},{tag:"h5",attrs:{[headingLevelAttr]:5}},{tag:"h6",attrs:{[headingLevelAttr]:6}}],toDOM(e){const t=e.attrs[headingLineNumberAttr];return["h"+e.attrs[headingLevelAttr],null===t?{}:{[headingLineNumberAttr]:t},0]},placeholder:{content:e.context.get("placeholder")?.heading??t.headingPlaceholder??DEFAULT_PLACEHOLDER$1,alwaysVisible:!0}},fromMd:{tokenSpec:{name:headingNodeName,type:"block",getAttrs:e=>({[headingLevelAttr]:Number(e.tag.slice(1))})}},toMd:(e,t)=>{e.write(e.repeat("#",t.attrs[headingLevelAttr])+" "),e.renderInline(t),e.closeBlock(t)}}))},horizontalRuleNodeName="horizontal_rule",horizontalRuleMarkupAttr="markup",horizontalRuleType=nodeTypeFactory(horizontalRuleNodeName),HorizontalRuleSpecs=e=>{e.addNode(horizontalRuleNodeName,()=>({spec:{attrs:{[horizontalRuleMarkupAttr]:{default:"---"}},group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["div",["hr"]],selectable:!0},fromMd:{tokenName:"hr",tokenSpec:{name:horizontalRuleNodeName,type:"node",getAttrs:e=>({[horizontalRuleMarkupAttr]:e.markup})}},toMd:(e,t)=>{e.write(t.attrs[horizontalRuleMarkupAttr]),e.closeBlock(t)}}))};function wrappingInputRule(e,t,r=null,n){return new InputRule(e,(e,i,o,s)=>{if(hasCodeMark(e,i,o,s))return null;if(!inDefaultTextblock(e,i,o))return null;const a=r instanceof Function?r(i):r,l=e.tr.delete(o,s),c=l.doc.resolve(o).blockRange(),u=c&&findWrapping(c,t,a);if(!u)return null;l.wrap(c,u);const d=l.doc.resolve(o-1).nodeBefore;return d&&d.type==t&&canJoin(l.doc,o-1)&&(!n||n(i,d))&&l.join(o-1),l})}function textblockTypeInputRule(e,t,r=null){return new InputRule(e,(e,n,i,o)=>{if(hasCodeMark(e,n,i,o))return null;const s=e.doc.resolve(i),a=r instanceof Function?r(n):r;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t)?e.tr.delete(i,o).setBlockType(i,i,t,a):null})}function hasCodeMark(e,t,r,n){const i=codeType(e.schema);return!!isMarkActive(e,i)||!!e.doc.rangeHasMark(r,n,i)}function inDefaultTextblock(e,t,r,n){return e.doc.resolve(r).parent.type===pType(e.schema)}function getMarksBetween(e,t,r){let n=[];return r.doc.nodesBetween(e,t,(e,t)=>{n=[...n,...e.marks.map(r=>({start:t,end:t+e.nodeSize,mark:r}))]}),n}function escapeRegex(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function markInputRule(e,t,r){let n;if(e instanceof RegExp)n=e;else{const t=escapeRegex(e.open),r=escapeRegex(e.close),i=escapeRegex(e.ignoreBetween||"");n=new RegExp(`(?:${t})`+(i?`([^\\s${i}]+)`:"([\\S]+)")+`(?:${r})\\s$`)}return new InputRule(n,(e,n,i,o)=>{if(n.index>0){const e=n;if(" "!==e.input[e.index-1])return null}if(hasCodeMark(e,n,i,o))return null;const s=r instanceof Function?r(n):r,{tr:a}=e,l=n.length-1;let c=o,u=i;if(n[l]){const r=i+n[0].indexOf(n[l-1]),s=r+n[l-1].length-1,d=r+n[l-1].lastIndexOf(n[l]),p=d+n[l].length;if(getMarksBetween(i,o,e).filter(e=>e.mark.type.excludes(t)).filter(e=>e.end>r).length)return null;p<s&&a.delete(p,s),d>r&&a.delete(r,d),u=r,c=u+n[l].length}return a.addMark(u,c,t.create(s)),a.removeStoredMark(t),a})}function nodeInputRule(e,t,r=0){return new InputRule(e,(e,n,i,o)=>{if(hasCodeMark(e,n,i,o))return null;const[s]=n,{tr:a}=e;return s&&a.replaceWith(i-1,o,isFunction$1(t)?t(s)??Fragment.empty:t??Fragment.empty).setSelection(new TextSelection(a.doc.resolve(i+r))),a})}function getChildBy(e,t){let r=null;return e.forEach((e,n,i)=>{const o={node:e,offset:n,index:i};t(o)&&(r=o)}),r}function getChildByIndex(e,t){return getChildBy(e,({index:e})=>e===t)}const getPlaceholderContent=(e,t)=>{const r=e.type.spec.placeholder?.content||"";return"function"==typeof r?r(e,t):r},isMac=()=>"undefined"!=typeof navigator&&/Mac/.test(navigator.platform),removeNode=({node:e,pos:t,tr:r,dispatch:n})=>{n(r.delete(t,t+e.nodeSize))};function getElementsForSourceLine(e,t){const r=Math.floor(e);let n=t[0]||null;for(const i of t){if(i.line===r)return{previous:i,next:void 0};if(i.line>r)return{previous:n,next:i};n=i}return{previous:n}}function getElementBounds({el:e}){const t=e.querySelector(".line");if(t){const r=Math.max(1,t.offsetTop-e.offsetTop);return{top:e.offsetTop,height:r}}return{top:e.offsetTop,height:e.offsetHeight}}function scrollToRevealSourceLine(e,t,r){const n=r.current;if(!n)return;if(e<=0)return void n.scroll(n.scrollLeft,0);const{previous:i,next:o}=getElementsForSourceLine(e,t);if(!i)return;let s=0;const a=getElementBounds(i),l=a.top;if(o&&o.line!==i.line){const t=(e-i.line)/(o.line-i.line),r=l+a.height;s=r+t*(o.el.offsetTop-r)}else{const t=e-Math.floor(e);s=l+a.height*t}s=Math.abs(s)<1?Math.sign(s):s,n.scroll(n.scrollLeft,Math.max(1,s))}function getEditorLineNumberForOffset(e,t,r){if(!r.current)return null;const{previous:n,next:i}=getLineElementsAtPageOffset(e,t,r);if(n){if(n.line<0)return 0;const t=getElementBounds(n),r=e-t.top;if(i){const e=r/(getElementBounds(i).top-t.top);return n.line+e*(i.line-n.line)}{const e=r/t.height;return n.line+e}}return null}function getLineElementsAtPageOffset(e,t,r){if(!r.current)return{previous:null};const n=e;let i=-1,o=t.length-1;for(;i+1<o;){const e=Math.floor((i+o)/2),r=getElementBounds(t[e]);r.top+r.height>=n?o=e:i=e}const s=t[o],a=getElementBounds(s);return o>=1&&a.top>n?{previous:t[i],next:s}:o>1&&o<t.length&&a.top+a.height>n?{previous:s,next:t[o+1]}:{previous:s}}async function batchUploadFiles(e,t,r,n){const i=[],o=[];return await Promise.allSettled(e.map(e=>t(e).then(t=>{const n={result:t,file:e};i.push(n),r?.(n)},t=>{const r={error:t,file:e};o.push(r)}).catch(console.error))),{success:i,failed:o}}function getProportionalSize({width:e,height:t,imgMaxHeight:r}){let n=e,i=t;const o=n/i;return i>r&&(i=r,n=Math.round(i*o)),{width:n,height:i}}var DataTransferType;function isIosSafariShare({types:e}){return e.includes(DataTransferType.UriList)&&!e.includes(DataTransferType.Text)&&!e.includes(DataTransferType.Html)}function isFilesOnly$2({types:e}){return 1===e.length&&e[0]===DataTransferType.Files}function isFilesFromHtml$2({types:e}){return 2===e.length&&e.includes(DataTransferType.Files)&&e.includes(DataTransferType.Html)}function isImageFile$2(e){return e.type.startsWith("image/")}function extractTextContentFromHtml(e){const t=document.createElement("div");return t.innerHTML=e,t.replaceChildren(...Array.from(t.children).filter(e=>"META"!==e.nodeName)),Array.from(t.children).every(({nodeName:e,classList:t,childNodes:r})=>!("DIV"!==e&&"SPAN"!==e||t.length||1!==r.length||"#text"!==r[0].nodeName&&"BR"!==r[0].nodeName))?Array.from(t.children).reduce((e,t)=>e+t.textContent+"\n",""):null}function findNotEmptyContentPosses(e){let t=-1,r=-1,n=-1,i=-1;return e.forEach((e,o)=>{if(-1===t&&(t=o),r=o+e.nodeSize,!isEmptyString(e))if(isListNode(e)||isListItemNode(e)){const[t,r]=findNotEmptyContentPosses(e.content);-1===n&&-1!==t&&(n=o+t+1),-1!==r&&(i=o+r+1)}else-1===n&&(n=o),i=o+e.nodeSize}),[n,i,t,r]}function trimContent(e,t){const[r,n,i,o]=findNotEmptyContentPosses(e);return r===i&&n===o?e:-1===r&&-1===n?t?t():Fragment.empty:e.cut(r,n)}!function(e){e.Text="text/plain",e.Html="text/html",e.Yfm="text/yfm",e.Rtf="text/rtf",e.UriList="text/uri-list",e.VSCodeData="vscode-editor-data",e.Files="Files"}(DataTransferType||(DataTransferType={}));const clipboardUtils=Object.freeze(Object.defineProperty({__proto__:null,get DataTransferType(){return DataTransferType},extractTextContentFromHtml:extractTextContentFromHtml,findNotEmptyContentPosses:findNotEmptyContentPosses,isFilesFromHtml:isFilesFromHtml$2,isFilesOnly:isFilesOnly$2,isImageFile:isImageFile$2,isIosSafariShare:isIosSafariShare,trimContent:trimContent},Symbol.toStringTag,{value:"Module"})),isCodeMark=e=>e.type.spec.code;function isInsideCode(e){return isInsideBlockCode(e)?"block":!!isInsideInlineCode(e)&&"inline"}function isInsideBlockCode(e){return Boolean(e.selection.$from.parent.type.spec.code)}function isInsideInlineCode(e){const t=e.selection.$from.marks().some(isCodeMark);return e.selection.empty?t||(e.storedMarks??[]).some(isCodeMark):t}const handlePasteIntoCodePlugin=()=>new Plugin({props:{handleDOMEvents:{paste(e,t){if(!t.clipboardData)return!1;const{clipboardData:r}=t,n=isInsideCode(e.state);if(!n)return!1;let i,o;isIosSafariShare(r)?(o=DataTransferType.UriList,i=r.getData(DataTransferType.UriList)):isFilesOnly$2(r)?(o=DataTransferType.Files,i=Array.from(r.files).map(e=>e.name).join(" ")):(o=DataTransferType.Text,i=dedent(r.getData(DataTransferType.Text))),"inline"===n&&(i=i.replaceAll("\n",""));const{state:s,dispatch:a}=e;getLoggerFromState(s).event({codeType:n,dataFormat:o,empty:!i,domEvent:"paste",event:"paste-into-code",dataTypes:r.types}),t.preventDefault();const{tr:l}=s;return i?l.replaceSelectionWith(s.schema.text(i),!0):l.replaceWith(l.selection.from,l.selection.to,Fragment.empty),a(l.scrollIntoView()),!0}}}}),clipboard=({logger:e,textParser:t,mdParser:r,serializer:n,pasteFileHandler:i})=>new Plugin({props:{handleDOMEvents:{copy(e,t){if(!t.clipboardData)return!1;const r=serializeSelected(e,n);return!!r&&(t.preventDefault(),setClipboardData(t.clipboardData,r),!0)},cut(e,t){if(!t.clipboardData)return!1;const r=serializeSelected(e,n);return!!r&&(t.preventDefault(),setClipboardData(t.clipboardData,r),e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut")),!0)},paste(n,o){if(!o.clipboardData)return!1;const s=e.nested({domEvent:"paste",dataTypes:o.clipboardData.types});let a,l=!1;if(isIosSafariShare(o.clipboardData)&&(a=o.clipboardData.getData(DataTransferType.UriList))){const e=n.state.schema;return n.dispatch(trackTransactionMetrics(n.state.tr.replaceSelection(new Slice(Fragment.from(pType(e).create(null,e.text(a))),1,1)),"paste",{clipboardDataFormat:DataTransferType.UriList})),s.event({event:"paste-uri-list"}),l=!0,o.preventDefault(),!0}if(!o.clipboardData.types.includes(DataTransferType.Yfm)&&(a=o.clipboardData.getData(DataTransferType.Html))){const e=extractTextContentFromHtml(a);if(!e)return!1;{const r=tryCatch(()=>t.parse(e));if(r.success){const e=getSliceFromMarkupFragment(r.result.content);n.dispatch(trackTransactionMetrics(n.state.tr.replaceSelection(e),"paste",{clipboardDataFormat:DataTransferType.Html})),s.event({event:"paste-parsed-html"}),l=!0}else globalLogger.error(r.error),s.error(r.error,{event:"parse-html"})}}if(!l&&((a=o.clipboardData.getData(DataTransferType.Yfm))||(a=o.clipboardData.getData(DataTransferType.Text)))){let e,i;o.clipboardData.types.includes(DataTransferType.Yfm)?(e=r,i=DataTransferType.Yfm):(e=t,i=DataTransferType.Text);const c=isInsideCode(n.state);if(c){const e=n.state.schema,t=o.clipboardData.getData(DataTransferType.Text);s.event({event:"paste-text-to-code",codeType:c}),n.dispatch(trackTransactionMetrics(n.state.tr.replaceSelectionWith(e.text("inline"===c?t.trim():t)),"paste",{clipboardDataFormat:DataTransferType.Text,code:c})),l=!0}else{const t=tryCatch(()=>e.parse(a));if(t.success){const e=getSliceFromMarkupFragment(t.result.content);s.event({event:"paste-parsed-content",dataFormat:i}),n.dispatch(trackTransactionMetrics(n.state.tr.replaceSelection(e),"paste",{clipboardDataFormat:i})),l=!0}else globalLogger.error(t.error),s.error(t.error,{event:"paste",dataFormat:i})}}if(o.clipboardData.files.length&&i){s.event({event:"paste-files"});for(const e of Array.from(o.clipboardData.files))i(e);l=!0}return!!l&&(o.preventDefault(),!0)}}}});function getSliceFromMarkupFragment(e){let t=0,r=0;return e.firstChild?.isTextblock&&(t=1,1===e.childCount&&(r=1)),new Slice(e,t,r)}function serializeSelected(e,t){const r=e.state.selection;if(r.empty)return null;if(getSharedDepthNode(r).type.spec.code){const e=r.content().content;return{text:e.textBetween(0,e.size)}}const n=t.serialize(getCopyContent(e.state).content),{dom:i,text:o}=e.serializeForClipboard(r.content());return{markup:n,text:o,html:i.innerHTML}}function setClipboardData(e,t){e.clearData(),"string"==typeof t.markup&&e.setData(DataTransferType.Yfm,t.markup),"string"==typeof t.html&&e.setData(DataTransferType.Html,t.html),e.setData(DataTransferType.Text,t.text)}function getCopyContent(e){const t=e.selection;if(isWholeSelection(t))return new Slice(e.doc.content,0,0);if(isTextSelectionWithinSameTextBlock(t))return new Slice(createFragmentFromInlineSelection(e),0,0);if(isNodeSelection(t)){const{node:r}=t;if(!r.type.spec.complex)return new Slice(Fragment.from(r),1,1);if(r.isTextblock)return new Slice(Fragment.from(e.schema.node(BaseNode$1.Paragraph,{},r.content)),1,1);{const{complex:e}=r.type.spec;if("root"===e)return new Slice(Fragment.from(r),1,1);if("leaf"===e)return new Slice(Fragment.from(r.content),1,1)}}let r=getSelectionContent(t);if(r.content.firstChild?.isTextblock&&r.content.firstChild.type.name!==BaseNode$1.Paragraph){let n=!0;const{firstChild:i}=r.content;i.eq(t.$from.parent)&&(n=!1),n&&(r=new Slice(r.content.replaceChild(0,e.schema.node(BaseNode$1.Paragraph,{},i.content)),r.openStart,r.openStart))}else{const t=()=>Fragment.from(pType(e.schema).createAndFill()),n=trimContent(r.content,t);n!==r.content&&(r=new Slice(n,1,1))}return r}function isTextSelectionWithinSameTextBlock(e){return isTextSelection(e)&&e.$from.sameParent(e.$to)&&e.$from.parent.isTextblock}function createFragmentFromInlineSelection(e){const t=e.selection,r=e.doc.slice(t.from,t.to),n=Boolean(t.$from.parent.type.spec.complex),i=t.$from.parent.content.eq(r.content);return n||!i?Fragment.from(e.schema.node(BaseNode$1.Paragraph,{},r.content)):Fragment.from(t.$from.parent.copy(r.content))}function getSelectionContent(e){const t=getSharedDepthNode(e).type.spec.complex,r=t&&"leaf"!==t;return e.$from.doc.slice(e.$from.pos,e.to,r)}function getSharedDepthNode({$from:e,$to:t}){return e.node(e.sharedDepth(t.pos))}const Clipboard=(e,t)=>{e.addPlugin(r=>clipboard({logger:e.logger.nested({module:"clipboard",plugin:"clipboard"}),mdParser:r.markupParser,textParser:r.textParser,serializer:r.serializer,pasteFileHandler:t.pasteFileHandler}),e.Priority.VeryLow),e.addPlugin(handlePasteIntoCodePlugin,e.Priority.Highest)},bAction="bold",Bold=(e,t)=>{if(e.use(BoldSpecs),e.addAction(bAction,({schema:e})=>createToggleMarkAction(boldType(e))),t?.boldKey){const{boldKey:r}=t;e.addKeymap(({schema:e})=>({[r]:withLogAction("bold",toggleMark(boldType(e)))}))}e.addInputRules(({schema:e})=>({rules:[markInputRule({open:"**",close:"**",ignoreBetween:"*"},boldType(e)),markInputRule({open:"__",close:"__",ignoreBetween:"_"},boldType(e))]}))},DEFAULT_ID="codemark",MAX_MATCH=100,pluginKey$3=new PluginKey(DEFAULT_ID);function getMarkType(e,t){var r,n;return"schema"in e?null!==(r=null==t?void 0:t.markType)&&void 0!==r?r:e.schema.marks.code:null!==(n=null==t?void 0:t.markType)&&void 0!==n?n:e.state.schema.marks.code}function safeResolve(e,t){return e.resolve(Math.min(Math.max(1,t),e.nodeSize-2))}function stopMatch(e,t,r,n){var i;const o=e.isInSet(null!==(i=t.state.storedMarks)&&void 0!==i?i:t.state.doc.resolve(r).marks()),s=t.state.doc.rangeHasMark(r,n,e);return!(!o&&!s)}const markBefore={match:/`((?:[^`\w]|[\w])+)`$/,handler:(e,t,r,n,i,o,s)=>{if(stopMatch(e,t,i,o))return!1;const a=n[1],l=e.create(),c=i+a.length,u=t.state.tr.delete(i,o).insertText(a).addMark(i,c,l),d=u.setSelection(TextSelection.create(u.doc,c)).removeStoredMark(e),p=d.setMeta(s.input,{transform:d,from:i,to:o,text:`\`${a}${r}`});return t.dispatch(p),!0}},markAfter={match:/^`((?:[^`\w]|[\w])+)`/,handler:(e,t,r,n,i,o,s)=>{if(stopMatch(e,t,i,o))return!1;const a=e.create(),l=n[1],c=i,u=t.state.tr.delete(i,o).insertText(l).addMark(i,i+l.length,a),d=u.setSelection(TextSelection.create(u.doc,c)).addStoredMark(e.create()),p=d.setMeta(s.input,{transform:d,from:i,to:o,text:`\`${l}${r}`});return t.dispatch(p),!0}};function run(e,t,r,n,i,o){if(t.composing)return!1;const{state:s}=t,a=s.doc.resolve(r);if(a.parent.type.spec.code)return!1;const l=a.parent.textBetween(Math.max(0,a.parentOffset-MAX_MATCH),a.parentOffset,void 0,"")+i,c=i+a.parent.textBetween(a.parentOffset,Math.min(a.parent.nodeSize-2,a.parentOffset+MAX_MATCH),void 0,""),u=markBefore.match.exec(l),d=markAfter.match.exec(c);if(u){const s=markBefore.handler(e,t,i,u,r-u[0].length+i.length,n,o);if(s)return s}return!!d&&markAfter.handler(e,t,i,d,r,n+d[0].length-i.length,o)}function createInputRule(e,t){const r=new Plugin({isInputRules:!0,state:{init:()=>null,apply:(e,t)=>e.getMeta(r)||(e.selectionSet||e.docChanged?null:t)},props:{handleTextInput:(n,i,o,s)=>run(getMarkType(n,t),n,i,o,s,{input:r,cursor:e})}});return r}function stepOutsideNextTrAndPass(e,t,r="next"){const n={action:r};return e.dispatch(e.state.tr.setMeta(t,n)),!1}function onBacktick(e,t,r,n){if(e.state.selection.empty)return!1;if(r.metaKey||r.shiftKey||r.altKey||r.ctrlKey)return!1;const{from:i,to:o}=e.state.selection;if(o-i>=MAX_MATCH||e.state.doc.rangeHasMark(i,o,n))return!1;const s=e.state.tr.addMark(i,o,n.create()),a=s.setSelection(TextSelection.create(s.doc,o)).removeStoredMark(n);return e.dispatch(a),!0}function onArrowRightInside(e,t,r,n){var i;if(r.metaKey)return stepOutsideNextTrAndPass(e,t);if(r.shiftKey||r.altKey||r.ctrlKey)return!1;const{selection:o,doc:s}=e.state;if(!o.empty)return!1;const a=t.getState(e.state),l=o.$from,c=!!n.isInSet(l.marks()),u=!!n.isInSet(null!==(i=l.marksAcross(safeResolve(s,o.from+1)))&&void 0!==i?i:[]);return l.pos===e.state.doc.nodeSize-3&&l.parentOffset===l.parent.nodeSize-2&&(null==a?void 0:a.active)?(e.dispatch(e.state.tr.removeStoredMark(n)),!0):!(c===u&&0!==l.parentOffset||(!c||(null==a?void 0:a.active)&&-1!==a.side||0===l.parentOffset?!u||-1!==(null==a?void 0:a.side)||(e.dispatch(e.state.tr.addStoredMark(n.create())),0):(e.dispatch(e.state.tr.removeStoredMark(n)),0)))}function onArrowRight(e,t,r,n){if(onArrowRightInside(e,t,r,n))return!0;const{selection:i}=e.state,o=i.$from;return!(!i.empty||o.parentOffset!==o.parent.nodeSize-2)&&stepOutsideNextTrAndPass(e,t)}function onArrowLeftInside(e,t,r,n){var i;if(r.metaKey)return stepOutsideNextTrAndPass(e,t);if(r.shiftKey||r.altKey||r.ctrlKey)return!1;const{selection:o,doc:s}=e.state,a=t.getState(e.state),l=!!n.isInSet(o.$from.marks()),c=!!n.isInSet(null!==(i=safeResolve(s,o.empty?o.from-1:o.from+1).marks())&&void 0!==i?i:[]);if(l&&-1===(null==a?void 0:a.side)&&0===o.$from.parentOffset)return!1;if(0===(null==a?void 0:a.side)&&0===o.$from.parentOffset)return e.dispatch(e.state.tr.removeStoredMark(n)),!0;if(l&&c&&0===(null==a?void 0:a.side))return e.dispatch(e.state.tr.addStoredMark(n.create())),!0;if(l&&!c&&(null==a?void 0:a.active)&&0===o.$from.parentOffset)return e.dispatch(e.state.tr.removeStoredMark(n)),!0;if(!l&&(null==a?void 0:a.active)&&0===(null==a?void 0:a.side))return e.dispatch(e.state.tr.removeStoredMark(n)),!0;if(l===c)return!1;if(c||!o.empty&&l){const t=o.empty?o.from-1:o.from,r=e.state.tr.setSelection(TextSelection.create(s,t));return!o.empty&&c?e.dispatch(r.addStoredMark(n.create())):e.dispatch(r.removeStoredMark(n)),!0}if((c||!o.empty&&l)&&!(null==a?void 0:a.active)){const t=o.empty?o.from-1:o.from;return e.dispatch(e.state.tr.setSelection(TextSelection.create(s,t)).removeStoredMark(n)),!0}if(l&&!(null==a?void 0:a.active)&&o.$from.parentOffset>0)return e.dispatch(e.state.tr.setSelection(TextSelection.create(s,o.from-1)).addStoredMark(n.create())),!0;if(l&&!c&&(null==a?void 0:a.active)&&-1!==a.side)return e.dispatch(e.state.tr.addStoredMark(n.create())),!0;if(l&&!c&&(null==a?void 0:a.active)){const t=o.from-1;return e.dispatch(e.state.tr.setSelection(TextSelection.create(s,t)).addStoredMark(n.create())),!0}return!1}function onArrowLeft(e,t,r,n){if(onArrowLeftInside(e,t,r,n))return!0;const{selection:i}=e.state,o=i.$from,s=t.getState(e.state);return 1===o.pos&&0===o.parentOffset&&-1===(null==s?void 0:s.side)||!(!i.empty||0!==o.parentOffset)&&stepOutsideNextTrAndPass(e,t)}function onBackspace(e,t,r,n){if(r.metaKey||r.shiftKey||r.altKey||r.ctrlKey)return!1;const{selection:i,doc:o}=e.state,s=safeResolve(o,i.from-1),a=!!n.isInSet(s.marks()),l=0===s.parentOffset,c=!!n.isInSet(safeResolve(o,i.to+1).marks());if((!a||l)&&!c)return stepOutsideNextTrAndPass(e,t);const u=t.getState(e.state);if(i.empty&&-1===(null==u?void 0:u.side)){const t=e.state.tr.delete(i.from-1,i.from);return e.dispatch(t),!0}return!1}function onDelete(e,t,r,n){if(r.metaKey||r.shiftKey||r.altKey||r.ctrlKey)return!1;const{selection:i,doc:o}=e.state,s=!!n.isInSet(i.$from.marks()),a=0===i.$from.parentOffset,l=!!n.isInSet(safeResolve(o,i.to+2).marks());return!(s&&!a||l)&&stepOutsideNextTrAndPass(e,t)}function stepOutside(e,t){var r,n;if(!e)return null;const{selection:i,doc:o}=e;if(!i.empty)return null;const s=!!t.isInSet(null!==(r=e.storedMarks)&&void 0!==r?r:[]),a=!!t.isInSet(i.$from.marks()),l=!!t.isInSet(null!==(n=safeResolve(o,i.from+1).marks())&&void 0!==n?n:[]),c=0===i.$from.parentOffset;return a!==l||!a&&s!==a||a&&c?e.tr.removeStoredMark(t):null}function toDom(){const e=document.createElement("span");return e.classList.add("fake-cursor"),e}function getDecorationPlugin(e){const t=new Plugin({key:pluginKey$3,appendTransaction:(r,n,i)=>{var o;const s=t.getState(n),a=null===(o=r[0])||void 0===o?void 0:o.getMeta(t);return(null==s?void 0:s.next)||"click"===(null==a?void 0:a.action)?stepOutside(i,getMarkType(i,e)):null},state:{init:()=>null,apply(r,n,i,o){var s;const a=r.getMeta(t);if("next"===(null==a?void 0:a.action))return{next:!0};const l=getMarkType(o,e),c=l.isInSet(null!==(s=o.storedMarks)&&void 0!==s?s:o.doc.resolve(r.selection.from).marks()),u=l.isInSet(o.doc.resolve(r.selection.from).marks()),d=l.isInSet(safeResolve(o.doc,r.selection.from+1).marks()),p=0===r.selection.$from.parentOffset;return r.selection.empty?c||!d||u&&!p?c&&(!u||p)||!c&&u&&!d?{active:!0,side:0}:c&&u&&!d?{active:!0,side:-1}:null:{active:!0,side:-1}:null}},props:{attributes:e=>{var r;const{active:n=!1}=null!==(r=t.getState(e))&&void 0!==r?r:{};return Object.assign({},n?{class:"no-cursor"}:{})},decorations:e=>{var r;const{active:n,side:i}=null!==(r=t.getState(e))&&void 0!==r?r:{};if(!n)return DecorationSet.empty;const o=Decoration$1.widget(e.selection.from,toDom,{side:i});return DecorationSet.create(e.doc,[o])},handleKeyDown(r,n){switch(n.key){case"`":return onBacktick(r,t,n,getMarkType(r,e));case"ArrowRight":return onArrowRight(r,t,n,getMarkType(r,e));case"ArrowLeft":return onArrowLeft(r,t,n,getMarkType(r,e));case"Backspace":return onBackspace(r,t,n,getMarkType(r,e));case"Delete":return onDelete(r,t,n,getMarkType(r,e));case"ArrowUp":case"ArrowDown":case"Home":case"End":return stepOutsideNextTrAndPass(r,t);case"e":case"a":return!!n.ctrlKey&&stepOutsideNextTrAndPass(r,t);default:return!1}},handleClick:e=>stepOutsideNextTrAndPass(e,t,"click")}});return t}function codemark(e){const t=getDecorationPlugin(e);return[t,createInputRule(t,e)]}const codeAction="code",Code=(e,t)=>{if(e.use(CodeSpecs),e.addAction(codeAction,({schema:e})=>createToggleMarkAction(codeType(e))),t?.codeKey){const{codeKey:r}=t;e.addKeymap(({schema:e})=>({[r]:withLogAction("code_inline",toggleMark(codeType(e)))}))}e.addPlugin(({schema:e})=>codemark({markType:codeType(e)})),e.addPlugin(()=>new Plugin({props:{handleTextInput:(e,t,r,n)=>{const{selection:{$anchor:i},tr:o,schema:s}=e.state;return!(!i.nodeBefore?.text?.endsWith("`")||!i.nodeAfter?.text?.startsWith("`")||(e.dispatch(o.replaceRangeWith(t-1,r+1,e.state.schema.text(n,[codeType(s).create()]))),0))}}}))},removeLink=(e,t)=>{const r=linkType(e.schema);return!!isMarkActive(e,r)&&toggleMark(r)(e,t)},isString=e=>"string"==typeof e,notEmpty=e=>e.length>0,normalizeUrlFactory=({markupParser:e})=>t=>isString(t)&&(t=t.trim(),notEmpty(t)&&(t=e.normalizeLink(t),e.validateLink(t)))?{url:t,text:e.normalizeLinkText(t)}:null;function linkCommand(e,t){const r=normalizeUrlFactory(t);return{isActive:t=>Boolean(isMarkActive(t,e)),isEnable:t=>toggleMark(e)(t),run(t,n,i,o){if(removeLink(t,n))return;if(!o)return;const{text:s,title:a}=o,l=r(o.href);if(l){if(s&&t.selection.empty)return void n(t.tr.replaceSelectionWith(t.schema.text(s,[e.create({[LinkAttr.Href]:l.url,[LinkAttr.Title]:a})]),!1));toggleMark(e,{[LinkAttr.Href]:l.url,[LinkAttr.Title]:a})(t,n)}},meta(e){const{selection:t}=e;return{hasSelection:!t.empty&&t instanceof TextSelection,text(){const e=t.content().content;return e.textBetween(0,e.size)}}}}}var plugin$3={},_const$1={},hasRequired_const$1;function require_const$1(){return hasRequired_const$1||(hasRequired_const$1=1,e=_const$1,Object.defineProperty(e,"__esModule",{value:!0}),e.ImsizeAttr=void 0,(t=e.ImsizeAttr||(e.ImsizeAttr={})).Src="src",t.Alt="alt",t.Title="title",t.Width="width",t.Height="height",t.Style="style",t.Inline="inline"),_const$1;var e,t}var helpers={},hasRequiredHelpers,hasRequiredPlugin$3,imsize_1,hasRequiredImsize;function requireHelpers(){if(hasRequiredHelpers)return helpers;function e(e,t,r){let n;const i=t,o={pos:t,ok:!1,value:""};for(n=e.charCodeAt(t);t<r&&n>=48&&n<=57||37===n;)n=e.charCodeAt(++t);return o.ok=!0,o.pos=t,o.value=e.slice(i,t),o}return hasRequiredHelpers=1,Object.defineProperty(helpers,"__esModule",{value:!0}),helpers.parseImageSize=void 0,helpers.parseImageSize=function(t,r,n){const i={ok:!1,pos:0,width:"",height:""};if(r>=n)return i;let o=t.charCodeAt(r);if(61!==o)return i;if(r++,o=t.charCodeAt(r),120!==o&&(o<48||o>57))return i;const s=e(t,r,n);if(r=s.pos,o=t.charCodeAt(r),120!==o)return i;const a=e(t,++r,n);return r=a.pos,i.width=s.value,i.height=a.value,i.pos=r,i.ok=!0,i},helpers}function requirePlugin$3(){if(hasRequiredPlugin$3)return plugin$3;hasRequiredPlugin$3=1,Object.defineProperty(plugin$3,"__esModule",{value:!0}),plugin$3.imageWithSize=void 0;const e=require_const$1(),t=requireHelpers();return plugin$3.imageWithSize=(r,n)=>(i,o)=>{var s,a;if(33!==i.src.charCodeAt(i.pos))return!1;if(91!==i.src.charCodeAt(i.pos+1))return!1;const l=i.pos+2,c=r.helpers.parseLinkLabel(i,i.pos+1,!1);if(c<0)return!1;let u="",d="",p="",h="";const f=i.pos,m=i.posMax;let g=c+1;if(g<m&&40===i.src.charCodeAt(g)){for(g++;g<m;g++){const e=i.src.charCodeAt(g);if(32!==e&&10!==e)break}if(g>=m)return!1;let e=g;const n=r.helpers.parseLinkDestination(i.src,g,i.posMax);for(n.ok&&(u=i.md.normalizeLink(n.str),i.md.validateLink(u)?g=n.pos:u=""),e=g;g<m;g++){const e=i.src.charCodeAt(g);if(32!==e&&10!==e)break}const o=r.helpers.parseLinkTitle(i.src,g,i.posMax);if(g<m&&e!==g&&o.ok)for(d=o.str,g=o.pos;g<m;g++){const e=i.src.charCodeAt(g);if(32!==e&&10!==e)break}else d="";if(g-1>=0&&32===i.src.charCodeAt(g-1)){const e=(0,t.parseImageSize)(i.src,g,i.posMax);if(e.ok)for(p=e.width,h=e.height,g=e.pos;g<m;g++){const e=i.src.charCodeAt(g);if(32!==e&&10!==e)break}}if(g>=m||41!==i.src.charCodeAt(g))return i.pos=f,!1;g++}else{if(void 0===i.env.references)return!1;for(;g<m;g++){const e=i.src.charCodeAt(g);if(32!==e&&10!==e)break}let e="";if(g<m&&91===i.src.charCodeAt(g)){const t=g+1;g=r.helpers.parseLinkLabel(i,g),g>=0?e=i.src.slice(t,g++):g=c+1}else g=c+1;e||(e=i.src.slice(l,c));const t=i.env.references[r.utils.normalizeReference(e)];if(!t)return i.pos=f,!1;u=t.href,d=t.title}if(!o){i.pos=l,i.posMax=c;const t=[],r=new i.md.inline.State(i.src.slice(l,c),i.md,i.env,t);r.md.inline.tokenize(r);const o=i.push("image","img",0);if(o.children=t,o.attrs=[[e.ImsizeAttr.Src,u],[e.ImsizeAttr.Alt,""]],i.src.slice(Math.max(0,g),m).includes("{")){const t=function(e){const t=/(\w+)=(?:'([^']*)'|"([^"]*)"|(\S+))/g,r={width:"",height:"",inline:""};let n;for(;null!==(n=t.exec(e));){const e=n[1],t=n[2]||n[3]||n[4];switch(e){case"width":case"height":case"inline":r[e]=t}}return r}(i.src.slice(Math.max(0,g)+1,m-1));""!==t.width&&(p=t.width),""!==t.height&&(h=t.height),""!==t.inline&&o.attrs.push([e.ImsizeAttr.Inline,t.inline])}if(d&&o.attrs.push([e.ImsizeAttr.Title,d]),""!==p&&o.attrs.push([e.ImsizeAttr.Width,p]),""!==h&&o.attrs.push([e.ImsizeAttr.Height,h]),null==n?void 0:n.enableInlineStyling){let t="";const r=p.includes("%"),n=h.includes("%");""!==p&&(t+=`width: ${r?p:`${p}px`};`),""!==h&&(""===p||n||r?t+=`height: ${n?h:`${h}px`};`:(t+=`aspect-ratio: ${p} / ${h};height: auto;`,null!==(s=(a=i.env).additionalOptionsCssWhiteList)&&void 0!==s||(a.additionalOptionsCssWhiteList={}),i.env.additionalOptionsCssWhiteList["aspect-ratio"]=!0)),t&&o.attrs.push([e.ImsizeAttr.Style,t])}}return i.pos=g,i.posMax=m,!0},plugin$3}function requireImsize(){if(hasRequiredImsize)return imsize_1;hasRequiredImsize=1;const e=requirePlugin$3();return imsize_1=(t,r)=>{t.inline.ruler.before("emphasis","image",(0,e.imageWithSize)(t,r))}}var imsizeExports=requireImsize();const imsize=getDefaultExportFromCjs(imsizeExports),addImageAction="addImage";var _constExports$1=require_const$1();const ImgSizeAttr={Alt:_constExports$1.ImsizeAttr.Alt,Src:_constExports$1.ImsizeAttr.Src,Title:_constExports$1.ImsizeAttr.Title,Width:_constExports$1.ImsizeAttr.Width,Height:_constExports$1.ImsizeAttr.Height,Loading:"loading",Id:"id"},ImgSizeSpecs=(e,t)=>{const r=e.context.get("placeholder")?.imgSize;e.configureMd(e=>e.use(imsize,{log:logExports.log,enableInlineStyling:!0})),e.addNode(imageNodeName,()=>({spec:{inline:!0,attrs:{[ImgSizeAttr.Src]:{},[ImgSizeAttr.Alt]:{default:null},[ImgSizeAttr.Title]:{default:null},[ImgSizeAttr.Height]:{default:null},[ImgSizeAttr.Width]:{default:null},[ImgSizeAttr.Loading]:{default:null},[ImgSizeAttr.Id]:{default:null}},placeholder:r?{content:r}:t.placeholder,group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(e){const t=e.getAttribute(ImgSizeAttr.Height),r=e.getAttribute(ImgSizeAttr.Width);return{[ImgSizeAttr.Src]:e.getAttribute(ImgSizeAttr.Src),[ImgSizeAttr.Alt]:e.getAttribute(ImgSizeAttr.Alt),[ImgSizeAttr.Title]:e.getAttribute(ImgSizeAttr.Title),[ImgSizeAttr.Loading]:e.getAttribute(ImgSizeAttr.Loading),[ImgSizeAttr.Height]:isNumber(t)?t:null,[ImgSizeAttr.Width]:isNumber(r)?t:null,[ImgSizeAttr.Id]:e.getAttribute(ImgSizeAttr.Id)}}}],toDOM:e=>["img",e.attrs]},fromMd:{tokenSpec:{name:imageNodeName,type:"node",getAttrs:e=>({[ImgSizeAttr.Src]:e.attrGet(ImgSizeAttr.Src),[ImgSizeAttr.Title]:e.attrGet(ImgSizeAttr.Title),[ImgSizeAttr.Height]:e.attrGet(ImgSizeAttr.Height),[ImgSizeAttr.Width]:e.attrGet(ImgSizeAttr.Width),[ImgSizeAttr.Loading]:e.attrGet(ImgSizeAttr.Loading),[ImgSizeAttr.Alt]:e.children?.[0]?.content||null,[ImgSizeAttr.Id]:e.attrGet(ImgSizeAttr.Id)})}},toMd:(e,t)=>{const r=t.attrs;let n="![";r.alt&&(n+=e.esc(r.alt)),n+="](",r.src&&(n+=e.esc(r.src)),r.title&&(n+=` ${e.quote(r.title)}`),n+=getSize$1(r),n+=")",e.write(n)}}))};function getSize$1({width:e,height:t}){return e||t?` =${e||""}x${t||""}`:""}const IMG_MAX_HEIGHT$1=600,imageRendererKey=new PluginKey("imageRenderer"),widgetDecorationPluginKey=new PluginKey,WidgetDecorationPlugin=()=>new Plugin({key:widgetDecorationPluginKey,props:{decorations:e=>widgetDecorationPluginKey.getState(e)??null},state:{init:()=>DecorationSet.empty,apply(e,t){let r=t.map(e.mapping,e.doc,{onRemove(e){const{descriptor:t}=e;t.remove()}});const n=e.getMeta(widgetDecorationPluginKey);if("add"===n?.type){const{descriptor:t}=n,i={id:t.id,pos:t.initPos,descriptor:t},o=Decoration$1.widget(t.initPos,t.render.bind(t),i);r=r.add(e.doc,[o])}if("remove"===n?.type){const e=r.find(void 0,void 0,e=>e.id===n.id);e.forEach(e=>e.spec.descriptor.remove()),r=r.remove(e)}return r}}}),removeDecoration=(e,t)=>{const r={type:"remove",id:t};return e.setMeta(widgetDecorationPluginKey,r)};class WidgetDescriptor{#P;#M;#r;#$;get id(){return this.#P}get initPos(){return this.#M}get view(){return this.#r}get getPos(){return this.#$}get pos(){return this.getPos?.()??this.initPos}constructor(e,t){this.#P=uniqueId(t),this.#M=e}render(e,t){return this.#r=e,this.#$=t,this.renderWidget(e,t)}applyTo(e){const t={type:"add",descriptor:this};return e.setMeta(widgetDecorationPluginKey,t)}rmDeco(e){return removeDecoration(e,this.id)}}class ReactWidgetDescriptor extends WidgetDescriptor{renderItem;remove(){this.renderItem?.remove(),this.renderItem=void 0}renderWidget(){return this.renderItem=this.renderItem??this.createRenderItem(),this.renderItem.rerender(),this.getDomElem()}createRenderItem(){return getReactRendererFromState(this.view.state).createItem("widget",()=>jsxRuntimeExports.jsx(Portal$2,{container:this.getDomElem(),children:jsxRuntimeExports.jsx(ErrorLoggerBoundary,{children:this.renderReactElement(this.view,this.getPos)})}))}}const WidgetDecoration=e=>{e.addPlugin(WidgetDecorationPlugin)},common_action_cancel$1="Cancel",common_action_submit$1="Submit",common_action_upload$1="Upload",common_tab_attach$1="Upload from device",common_tab_link$1="Add by link",common_link$1="Link",common_sizes$1="Size, px",image_name$1="Title",image_link_href$1="Image link",image_link_href_help$1="Adress the image link leads to.",image_alt$1="Alt text",image_alt_help$1="Alt text is displayed if the image cannot be loaded.",image_upload_help$1="JPEG, GIF or PNG image no larger than 1 MB.",image_upload_failed$1="Image failed to upload",image_size_width$1="Width",image_size_height$1="Height",link_url_help$1="Address the link leads to.",link_text$1="Link text",link_text_help$1="Text displayed as a link.",link_open_help$1="Open the link in a new tab",file_link_help$1="Link to download the file",file_name$1="File name",file_upload_help$1="Upload multiple files at once from your device.",file_upload_failed$1="Failed to upload files",anchor_href$1="Anchor identifier",anchor_href_help$1="Consists of numbers, symbols and Latin letters. Anchors are used for page navigation.",anchor_title$1="Hint",anchor_title_help$1="The text of the popup hint when hovering over the anchor node",form_id$1="Link or Form ID",en$h={common_action_cancel:common_action_cancel$1,common_action_submit:common_action_submit$1,common_action_upload:common_action_upload$1,common_tab_attach:common_tab_attach$1,common_tab_link:common_tab_link$1,common_link:common_link$1,common_sizes:common_sizes$1,image_name:image_name$1,image_link_href:image_link_href$1,image_link_href_help:image_link_href_help$1,image_alt:image_alt$1,image_alt_help:image_alt_help$1,image_upload_help:image_upload_help$1,image_upload_failed:image_upload_failed$1,image_size_width:image_size_width$1,image_size_height:image_size_height$1,link_url_help:link_url_help$1,link_text:link_text$1,link_text_help:link_text_help$1,link_open_help:link_open_help$1,file_link_help:file_link_help$1,file_name:file_name$1,file_upload_help:file_upload_help$1,file_upload_failed:file_upload_failed$1,anchor_href:anchor_href$1,anchor_href_help:anchor_href_help$1,anchor_title:anchor_title$1,anchor_title_help:anchor_title_help$1,form_id:form_id$1},common_action_cancel="",common_action_submit="",common_action_upload="",common_tab_attach="  ",common_tab_link="  ",common_link="",common_sizes="  ",image_name="  ",image_link_href=" ",image_link_href_help=",    .",image_alt=" ",image_alt_help="  ,     .",image_upload_help="   JPEG, GIF  PNG    1 .",image_upload_failed="   ",image_size_width="",image_size_height="",link_url_help=",    .",link_text="",link_text_help=",    .",link_open_help="    ",file_link_help="   ",file_name=" ",file_upload_help="     .",file_upload_failed="   ",anchor_href=" ",anchor_href_help="C  ,    .      .",anchor_title="",anchor_title_help="       ",form_id="  ID ",ru$h={common_action_cancel:common_action_cancel,common_action_submit:common_action_submit,common_action_upload:common_action_upload,common_tab_attach:common_tab_attach,common_tab_link:common_tab_link,common_link:common_link,common_sizes:common_sizes,image_name:image_name,image_link_href:image_link_href,image_link_href_help:image_link_href_help,image_alt:image_alt,image_alt_help:image_alt_help,image_upload_help:image_upload_help,image_upload_failed:image_upload_failed,image_size_width:image_size_width,image_size_height:image_size_height,link_url_help:link_url_help,link_text:link_text,link_text_help:link_text_help,link_open_help:link_open_help,file_link_help:file_link_help,file_name:file_name,file_upload_help:file_upload_help,file_upload_failed:file_upload_failed,anchor_href:anchor_href,anchor_href_help:anchor_href_help,anchor_title:anchor_title,anchor_title_help:anchor_title_help,form_id:form_id},KEYSET$d="forms",i18n$c=registerKeyset(KEYSET$d,{en:en$h,ru:ru$h});var ModKey,ModKey2,Key,Key2,Action,Action2;ModKey2=ModKey||(ModKey={}),ModKey2.Mod="mod",ModKey2.Alt="alt",ModKey2.Option="alt",ModKey2.Cmd="cmd",ModKey2.Ctrl="ctrl",ModKey2.Control="ctrl",ModKey2.Shift="shift",ModKey2.Tab="tab",Key2=Key||(Key={}),Key2.Enter="Enter",Key2.Esc="Escape",Action2=Action||(Action={}),Action2.__debug="__debug__",Action2.Cancel="cancel",Action2.Submit="submit",Action2.Undo="undo",Action2.Redo="redo",Action2.Bold="bold",Action2.Italic="italic",Action2.Underline="underline",Action2.Strike="strike",Action2.Code="code",Action2.Link="link",Action2.Text="text",Action2.Heading1="h1",Action2.Heading2="h2",Action2.Heading3="h3",Action2.Heading4="h4",Action2.Heading5="h5",Action2.Heading6="h6",Action2.EmptyRow="EmptyRow",Action2.BulletList="ulist",Action2.OrderedList="olist",Action2.LiftListItem="list__action_lift",Action2.SinkListItem="list__action_sink",Action2.Quote="quote",Action2.CodeBlock="codeblock",Action2.Cut="cut",Action2.Note="note";class ShortCutFormatter{#L=new Map;set(e,t){if(Array.isArray(t))this.#L.set(e,t);else{const r=t[isMac()?"mac":"pc"];r&&this.#L.set(e,r)}return this}toPM(e){const t=this.#L.get(e);return t?t.join("-"):null}toCM(e){const t=this.#L.get(e);return t?t.sort(e=>e===ModKey.Shift?-1:0).join("-"):null}toView(e){const t=this.#L.get(e);return t?.join("+")}}const formatter=new ShortCutFormatter;function enterKeyHandler(e){return t=>{t.key===Key.Enter&&e(t)}}formatter.set(Action.__debug,[ModKey.Mod,ModKey.Option,"]"]).set(Action.Cancel,[Key.Esc]).set(Action.Submit,[ModKey.Mod,Key.Enter]).set(Action.Undo,[ModKey.Mod,"z"]).set(Action.Redo,[ModKey.Mod,ModKey.Shift,"z"]).set(Action.Bold,[ModKey.Mod,"b"]).set(Action.Italic,[ModKey.Mod,"i"]).set(Action.Underline,[ModKey.Mod,"u"]).set(Action.Strike,[ModKey.Mod,ModKey.Shift,"s"]).set(Action.Code,[ModKey.Mod,"e"]).set(Action.Link,[ModKey.Mod,"k"]).set(Action.Text,{pc:[ModKey.Ctrl,ModKey.Shift,"0"],mac:[ModKey.Cmd,ModKey.Option,"0"]}).set(Action.Heading1,{pc:[ModKey.Ctrl,ModKey.Shift,"1"],mac:[ModKey.Cmd,ModKey.Option,"1"]}).set(Action.Heading2,{pc:[ModKey.Ctrl,ModKey.Shift,"2"],mac:[ModKey.Cmd,ModKey.Option,"2"]}).set(Action.Heading3,{pc:[ModKey.Ctrl,ModKey.Shift,"3"],mac:[ModKey.Cmd,ModKey.Option,"3"]}).set(Action.Heading4,{pc:[ModKey.Ctrl,ModKey.Shift,"4"],mac:[ModKey.Cmd,ModKey.Option,"4"]}).set(Action.Heading5,{pc:[ModKey.Ctrl,ModKey.Shift,"5"],mac:[ModKey.Cmd,ModKey.Option,"5"]}).set(Action.Heading6,{pc:[ModKey.Ctrl,ModKey.Shift,"6"],mac:[ModKey.Cmd,ModKey.Option,"6"]}).set(Action.EmptyRow,{pc:[ModKey.Ctrl,ModKey.Shift,Key.Enter],mac:[ModKey.Cmd,ModKey.Shift,Key.Enter]}).set(Action.BulletList,[ModKey.Mod,ModKey.Shift,"l"]).set(Action.OrderedList,[ModKey.Mod,ModKey.Shift,"m"]).set(Action.SinkListItem,[ModKey.Tab]).set(Action.LiftListItem,[ModKey.Shift,ModKey.Tab]).set(Action.Quote,[ModKey.Mod,ModKey.Shift,"."]).set(Action.CodeBlock,{pc:[ModKey.Ctrl,ModKey.Shift,"e"],mac:[ModKey.Cmd,ModKey.Option,"e"]}).set(Action.Cut,{pc:[ModKey.Ctrl,ModKey.Shift,"7"],mac:[ModKey.Cmd,ModKey.Option,"7"]}).set(Action.Note,{pc:[ModKey.Ctrl,ModKey.Shift,"8"],mac:[ModKey.Cmd,ModKey.Option,"8"]});const TextInputFixed=reactExports.forwardRef((e,t)=>{const r=reactExports.useRef(null),n=e.controlRef??r;return useEffectOnce(()=>{e.autoFocus&&setTimeout(()=>{n.current?.focus()},30)}),jsxRuntimeExports.jsx(TextInput,{ref:t,...e,controlRef:n,autoFocus:!1})});TextInputFixed.displayName="TextInputFixed";const TextAreaFixed=reactExports.forwardRef((e,t)=>{const r=reactExports.useRef(null),n=e.controlRef??r;return useEffectOnce(()=>{e.autoFocus&&setTimeout(()=>{n.current?.focus()},30)}),jsxRuntimeExports.jsx(TextArea,{ref:t,...e,controlRef:n,autoFocus:!1})});TextAreaFixed.displayName="TextAreaFixed";const b$z=cn("url-input-row"),UrlInputRow=reactExports.memo(function({href:e,input:t}){return jsxRuntimeExports.jsxs("div",{className:b$z(),children:[t,jsxRuntimeExports.jsx(ActionTooltip,{title:i18n$c("link_open_help"),children:jsxRuntimeExports.jsx(Button,{className:b$z("button"),view:"flat",size:"s",href:e,target:"_blank",children:jsxRuntimeExports.jsx(Icon,{data:ArrowUpRightFromSquare,size:16})})})]})}),b$y=cn("form"),Form$1=({className:e,children:t})=>jsxRuntimeExports.jsx("div",{className:b$y(null,[e]),children:t}),b$x=cn("form-layout"),FormLayout=({className:e,children:t})=>jsxRuntimeExports.jsx("div",{className:b$x({},[e]),children:t}),b$w=cn("form-row"),FormRow=({className:e,label:t,help:r,control:n,controlClassName:i})=>jsxRuntimeExports.jsxs("div",{className:b$w(null,[e]),children:[jsxRuntimeExports.jsxs("div",{className:b$w("label"),children:[jsxRuntimeExports.jsx("span",{className:b$w("label-text"),children:t}),r&&jsxRuntimeExports.jsx(HelpMark,{popoverProps:{modal:!1},className:b$w("label-help"),children:r})]}),jsxRuntimeExports.jsx("div",{className:b$w("control",[i]),children:n})]}),b$v=cn("form-footer"),FormFooter=({className:e,onCancel:t,onSubmit:r,children:n})=>jsxRuntimeExports.jsxs("div",{className:b$v(null,[e]),children:[t&&jsxRuntimeExports.jsx(Button,{size:"s",view:"flat-secondary",onClick:t,children:i18n$c("common_action_cancel")}),r&&jsxRuntimeExports.jsx(Button,{size:"s",view:"action",onClick:r,children:i18n$c("common_action_submit")}),n]}),Form={Form:Form$1,Layout:FormLayout,Row:FormRow,Footer:FormFooter},LinkForm$1=reactExports.memo(function({className:e,autoFocus:t,initialUrl:r,initialText:n,readOnlyText:i,onSubmit:o,onCancel:s}){const[a,l]=reactExports.useState(r??""),[c,u]=reactExports.useState(n??""),d=()=>{o({url:a,text:c})},p=enterKeyHandler(d);return jsxRuntimeExports.jsxs(Form.Form,{className:e,children:[jsxRuntimeExports.jsxs(Form.Layout,{children:[jsxRuntimeExports.jsx(Form.Row,{label:i18n$c("common_link"),help:i18n$c("link_url_help"),control:jsxRuntimeExports.jsx(UrlInputRow,{href:a,input:jsxRuntimeExports.jsx(TextInputFixed,{size:"s",view:"normal",value:a,onUpdate:l,autoFocus:t,placeholder:"https://",onKeyPress:p})})}),jsxRuntimeExports.jsx(Form.Row,{label:i18n$c("link_text"),help:i18n$c("link_text_help"),control:jsxRuntimeExports.jsx(TextInput,{size:"s",view:"normal",value:c,onUpdate:u,disabled:i,onKeyPress:p})})]}),jsxRuntimeExports.jsx(Form.Footer,{onCancel:s,onSubmit:d})]})}),iframe$1="Add a frame",image$3="Add an image",link$3="Add a link",file$3="Add a file",en$g={iframe:iframe$1,image:image$3,link:link$3,file:file$3},iframe=" ",image$2=" ",link$2=" ",file$2=" ",ru$g={iframe:iframe,image:image$2,link:link$2,file:file$2},KEYSET$c="widgets",i18n$b=registerKeyset(KEYSET$c,{en:en$g,ru:ru$g}),b$u=cn("link-placeholder-widget"),placement$8=["bottom-start","top-start","bottom-end","top-end"],LinkPlaceholderWidget=({onCancel:e,onSubmit:t})=>{const[r,n]=useElementState();return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{ref:n,className:b$u(),children:jsxRuntimeExports.jsx("a",{href:"#",children:i18n$b("link")})}),jsxRuntimeExports.jsx(Popup,{qa:"g-md-link-form",open:!0,modal:!0,onOpenChange:e,anchorElement:r,placement:placement$8,children:jsxRuntimeExports.jsx(LinkForm$1,{autoFocus:!0,onSubmit:t,onCancel:e})})]})},addPlaceholder=(e,t)=>new LinkWidgetDescriptor(e.selection.from,t).applyTo(e);class LinkWidgetDescriptor extends ReactWidgetDescriptor{#B;#r;#$;normalizeUrl;constructor(e,t){super(e,"link-empty"),this.#B=document.createElement("span"),this.normalizeUrl=normalizeUrlFactory(t)}getDomElem(){return this.#B}renderReactElement(e,t){return this.#r=e,this.#$=t,jsxRuntimeExports.jsx(LinkPlaceholderWidget,{onCancel:this.onCancel,onSubmit:this.onSubmit})}onCancel=()=>{this.#r&&(this.#r.dispatch(removeDecoration(this.#r.state.tr,this.id)),this.#r.focus())};onSubmit=e=>{const t=this.normalizeUrl(e.url);if(!t||!this.#r||!this.#$)return;const{url:r}=t,n=e.text.trim()||t.text,i=this.#$(),o=i+n.length;let s=this.#r.state.tr;s=s.insertText(n,i),s=s.addMark(i,o,linkType(this.#r.state.schema).create({[LinkAttr.Href]:r})),s=removeDecoration(s,this.id),this.#r.dispatch(s),this.#r.focus()}}const addLinkPlaceholder=e=>(t,r)=>{if(!t.selection.empty)return!1;const n=linkType(t.schema);return!n.isInSet(t.selection.$from.marks())&&!!toggleMark(n)(t)&&(r?.(addPlaceholder(t.tr,e).scrollIntoView()),!0)},addEmptyLink=(e,t)=>{const r=linkType(e.schema),{selection:n}=e,{nodeAfter:i}=n.$from;if(n.empty||isNodeSelection(n)&&n.node.type!==imageType(e.schema)||(!i?.isInline||!i?.isAtom)&&!i?.isText)return!1;const{$from:o,$to:s}=n;if(o.parent!==s.parent)return!1;let a=e.tr;if(!toggleMark(r,{[LinkAttr.Href]:"",[LinkAttr.IsPlaceholder]:!0})(e,e=>{a=e}))return!1;if(a.scrollIntoView(),n instanceof NodeSelection){if(a.setSelection(NodeSelection.create(a.doc,s.pos-1)),n.node.type===imageType(e.schema)){const e={linkAdded:!0};a.setMeta(imageRendererKey,e)}}else{const t=e.doc.textBetween(o.pos,s.pos),r=t.length-t.trimEnd().length;a.setSelection(TextSelection.create(a.doc,s.pos-r-1))}return t?.(a),!0},addLinkCmd2=e=>chainCommands(removeLink,addEmptyLink,addLinkPlaceholder(e)),linkActionSpec2=e=>({isActive:e=>Boolean(isMarkActive(e,linkType(e.schema))),isEnable:addLinkCmd2(e),run:addLinkCmd2(e)}),addImage$1=e=>({isEnable:e=>e.selection.empty,run(t,r,n,i){const o=i;if(o?.src){const{src:n,title:i,alt:s}=o,a={[ImageAttr.Src]:n,[ImageAttr.Title]:i??"",[ImageAttr.Alt]:s??""};r(t.tr.insert(t.selection.from,imageType(e).create(a)))}}});let InputState$1=class{#F=!1;get shiftKey(){return this.#F}keydown(e){this.#F=e.code.startsWith("Shift")||e.shiftKey}keyup(e){e.code.startsWith("Shift")&&(this.#F=!1)}};const imageUrlPaste=(e,t)=>{const r=new InputState$1;e.addPlugin(()=>new Plugin({props:{handleDOMEvents:{keydown(e,t){r.keydown(t)},keyup(e,t){r.keyup(t)},paste(e,n){if(!r.shiftKey||!t.parseInsertedUrlAsImage||!n.clipboardData||e.state.selection.$from.parent.type.spec.code)return!1;const{imageUrl:i,title:o}=t.parseInsertedUrlAsImage(n.clipboardData.getData(DataTransferType.Text)??"")||{};if(!i)return!1;n.preventDefault();const s=imageType(e.state.schema).create({src:i,alt:o}),a=e.state.tr.replaceSelectionWith(s);return e.dispatch(a.scrollIntoView()),!0}}}}),e.Priority.High)},Image$1=(e,t)=>{e.use(ImageSpecs),e.addAction(addImageAction,({schema:e})=>addImage$1(e)),isFunction$1(t?.parseInsertedUrlAsImage)&&e.use(imageUrlPaste,{parseInsertedUrlAsImage:t.parseInsertedUrlAsImage})};function linkPasteEnhance({markupParser:e}){return new Plugin({props:{handleDOMEvents:{paste(t,r){const n=getLoggerFromState(t.state).nested({plugin:"link-paste-enhance",domEvent:"paste"}),{state:i,dispatch:o}=t,s=i.selection;let a=null;if(isTextSelection(s)||isNodeSelection(s)&&s.node.type===imageType(i.schema)){const{$from:t,$to:o}=s;if(t.pos===o.pos){const o=getUrl(r.clipboardData,e);if(o){const e=linkType(i.schema);a=i.tr.replaceSelectionWith(i.schema.text(o,[...t.marks().filter(t=>t.type!==e),e.create({[LinkAttr.Href]:o})]),!1),n.event({event:"paste-url"})}}else if(t.sameParent(o)){const s=getUrl(r.clipboardData,e);s&&(a=i.tr.addMark(t.pos,o.pos,linkType(i.schema).create({[LinkAttr.Href]:s})),a.setSelection(TextSelection.create(a.doc,o.pos)),n.event({event:"paste-url-on-text"}))}}return!!a&&(o(a.scrollIntoView()),r.preventDefault(),!0)}}}})}function getUrl(e,t){if(!e||e.types.includes(DataTransferType.Yfm))return null;if(isIosSafariShare(e))return e.getData(DataTransferType.UriList);const r=e.getData(DataTransferType.Text),n=t.matchLinks(r);if(n?.[0]){const{raw:e,url:i}=n[0];if(e===r)return i;if(r.endsWith("?")&&e+"?"===r&&t.validateLink(r))return t.normalizeLink(r)}return null}const LinkForm=reactExports.memo(function({href:e,autoFocus:t,onChange:r,onCancel:n}){const[i,o]=reactExports.useState(e),s=()=>{r?.({href:i})},a=enterKeyHandler(s);return jsxRuntimeExports.jsxs(Form.Form,{children:[jsxRuntimeExports.jsx(Form.Layout,{children:jsxRuntimeExports.jsx(Form.Row,{label:i18n$c("common_link"),help:i18n$c("link_url_help"),control:jsxRuntimeExports.jsx(UrlInputRow,{href:i,input:jsxRuntimeExports.jsx(TextInputFixed,{size:"s",hasClear:!0,view:"normal",value:i,onUpdate:o,placeholder:"https://",autoFocus:t,onKeyPress:a})})})}),jsxRuntimeExports.jsx(Form.Footer,{onCancel:n,onSubmit:s})]})}),className="pm-link-focus-deco",placement$7=["bottom-start","bottom-end","top-start","top-end"];function getTextNode(e){if(!(e.selection instanceof TextSelection&&e.selection.empty&&isMarkActive(e,linkType(e.schema))))return null;const t=findParentNode(Boolean)(e.selection);if(!t)return null;const r=findChildrenByMark(t?.node,linkType(e.schema)).find(r=>{const n=r.pos+t.pos,i=n+r.node.nodeSize;return n<=e.selection.from&&i>=e.selection.from});if(!r)return null;const n=r.pos+t.pos+1;return{...r,absolutePos:n,parent:t,from:n,to:n+r.node.nodeSize}}const linkTooltipPlugin=e=>{let t=null;return new Plugin({view:r=>(t=new SelectionTooltip$2(r,e),t),props:{handleKeyDown:keydownHandler({Escape:()=>t?.onEscapeDown()??!1}),decorations(e){const t=getTextNode(e);if(!t)return DecorationSet.empty;const{from:r,to:n}=t;return DecorationSet.create(e.doc,[Decoration$1.inline(r,n,{class:`pm-node-selected ${className}`})])}}})};let SelectionTooltip$2=class{normalizeUrl;view;show;textNode;textNodeRef;manualHidden=!1;renderItem;constructor(e,t){this.normalizeUrl=normalizeUrlFactory(t),this.view=e,this.show=!1,this.update(e)}update(e){if(!e.dom.parentNode)return void this.hideTooltip();const{state:t}=e;this.textNode=getTextNode(t);const r=this.textNodeRef;this.textNodeRef=this.view.dom.getElementsByClassName(className)[0],r!==this.textNodeRef&&(this.manualHidden=!1),!this.manualHidden&&this.textNode&&this.textNodeRef?this.showTooltip():this.hideTooltip()}destroy(){this.show=!1,this.renderItem?.remove(),this.renderItem=void 0}onEscapeDown(){return!!this.show&&(this.removePlaceholderLink(this.textNode),this.manualHidden=!0,this.hideTooltip(),!0)}getMarkAttrs(){const{textNode:e}=this,t=e&&findMark(e.node,linkType(this.view.state.schema));return t?.attrs}renderTooltip(){this.renderItem=this.renderItem??this.createRenderItem(),this.renderItem.rerender()}hideTooltip(){this.show=!1,this.renderTooltip()}showTooltip(){this.show=!0,this.renderTooltip()}onOpenChange=(e,t,r)=>{e||("escape-key"===r?this.cancelPopup():this.onOutsideClick())};onOutsideClick=()=>{this.removePlaceholderLink(this.textNode),this.hideTooltip(),this.manualHidden=!0};cancelPopup(){this.removePlaceholderLink(this.textNode,{returnSelection:!0}),this.manualHidden=!0,this.hideTooltip(),this.view.focus()}removePlaceholderLink(e,t){if(e){const{view:r}=this,{state:n}=r,i=findMark(e.node,linkType(n.schema))?.attrs;if(i?.[LinkAttr.IsPlaceholder]){const{from:i,to:o}=e;let s=n.tr.removeMark(i,o,linkType(n.schema));t?.returnSelection&&(s=s.setSelection(TextSelection.create(s.doc,i,o))),r.dispatch(s)}}}changeAttrs({href:e}){const{view:t,textNode:r}=this;if(!r)return;const n=this.normalizeUrl(e);if(n){const{url:e}=n,{from:i,to:o}=r,s=t.state.tr;s.setSelection(TextSelection.create(s.doc,s.mapping.map(o))),s.addMark(i,o,linkType(t.state.schema).create({href:e})),t.dispatch(s)}}createRenderItem(){return getReactRendererFromState(this.view.state).createItem("link-tooltip",()=>jsxRuntimeExports.jsx(ErrorLoggerBoundary,{children:jsxRuntimeExports.jsx(SelectionTooltipView,{show:this.show,domElem:this.textNodeRef,onCancel:this.cancelPopup.bind(this),attrs:this.getMarkAttrs(),onChange:this.changeAttrs.bind(this),onOpenChange:this.onOpenChange})}))}};const SelectionTooltipView=e=>{const{show:t}=e;if(!t)return null;const{domElem:r,onChange:n,onCancel:i,onOpenChange:o,attrs:s={}}=e,a=s[LinkAttr.Href],l=s[LinkAttr.IsPlaceholder];return jsxRuntimeExports.jsx(Popup,{open:!0,anchorElement:r,placement:placement$7,onOpenChange:o,children:jsxRuntimeExports.jsx(LinkForm,{href:a??"",autoFocus:l,onChange:n,onCancel:i})},a)},linkAction="link",linkAction2="addLink",Link=(e,t)=>{if(e.use(LinkSpecs),e.addAction(linkAction2,linkActionSpec2),e.addPlugin(linkTooltipPlugin),t?.linkKey){const{linkKey:r}=t;e.addKeymap(e=>({[r]:addLinkCmd2(e)}))}e.addPlugin(linkPasteEnhance,e.Priority.High).addAction(linkAction,e=>linkCommand(linkType(e.schema),e)).addInputRules(({schema:e})=>({rules:[linkInputRule(linkType(e))]}))};function linkInputRule(e){return new InputRule(/\[(.+)]\((\S+)\)\s$/,(t,r,n,i)=>{if(hasCodeMark(t,r,n,i))return null;if(r.index>0){const e=r;if(" "!==e.input[e.index-1])return null}const[o,s,a]=r,{tr:l}=t;return o&&l.replaceWith(n,i,e.schema.text(s)).addMark(n,n+s.length,e.create({href:a})),l})}const iAction="italic",Italic=(e,t)=>{if(e.use(ItalicSpecs),e.addAction(iAction,({schema:e})=>createToggleMarkAction(italicType(e))),e.addInputRules(({schema:e})=>({rules:[markInputRule({open:"*",close:"*",ignoreBetween:"*"},italicType(e)),markInputRule({open:"_",close:"_",ignoreBetween:"_"},italicType(e))]})),t?.italicKey){const{italicKey:r}=t;e.addKeymap(({schema:e})=>({[r]:withLogAction("italic",toggleMark(italicType(e)))}))}},sAction="strike",Strike=(e,t)=>{if(e.use(StrikeSpecs),e.addAction(sAction,({schema:e})=>createToggleMarkAction(strikeType(e))).addInputRules(({schema:e})=>({rules:[markInputRule({open:"~~",close:"~~",ignoreBetween:"~"},strikeType(e))]})),t?.strikeKey){const{strikeKey:r}=t;e.addKeymap(({schema:e})=>({[r]:withLogAction("strike",toggleMark(strikeType(e)))}))}},undAction="underline",Underline=(e,t)=>{if(e.use(UnderlineSpecs),e.addAction(undAction,({schema:e})=>createToggleMarkAction(underlineType(e))).addInputRules(({schema:e})=>({rules:[markInputRule({open:"++",close:"++",ignoreBetween:"+"},underlineType(e))]})),t?.underlineKey){const{underlineKey:r}=t;e.addKeymap(({schema:e})=>({[r]:withLogAction("underline",toggleMark(underlineType(e)))}))}},mAction="mark",Mark=e=>{e.use(MarkSpecs),e.addAction(mAction,({schema:e})=>createToggleMarkAction(markMarkType(e))).addInputRules(({schema:e})=>({rules:[markInputRule({open:"==",close:"==",ignoreBetween:"="},markMarkType(e))]}))},subAction="subscript",Subscript$1=e=>{e.use(SubscriptSpecs),e.addAction(subAction,({schema:e})=>createToggleMarkAction(subscriptType(e))).addInputRules(({schema:e})=>({rules:[markInputRule({open:"~",close:"~",ignoreBetween:"~"},subscriptType(e))]}))},supAction="supscript",Superscript$1=e=>{e.use(SuperscriptSpecs),e.addAction(supAction,({schema:e})=>createToggleMarkAction(superscriptType(e))).addInputRules(({schema:e})=>({rules:[markInputRule({open:"^",close:"^",ignoreBetween:"^"},superscriptType(e))]}))},Breaks=(e,t)=>{let r;e.context.has("breaks")?r=e.context.get("breaks")?"soft":"hard":(r=t.preferredBreak??"hard",globalLogger.info("[Breaks extension]: Parameter 'breaks' is not defined in context; value from options is used"),e.logger.log("[Breaks extension]: Parameter 'breaks' is not defined in context; value from options is used")),e.use(BreaksSpecs,{preferredBreak:r}),e.addKeymap(({schema:e})=>{const t=addBr(("soft"===r?sbType:hbType)(e)),n={"Shift-Enter":t};return isMac()&&(n["Ctrl-Enter"]=t),n})},addBr=e=>chainCommands(exitCode,(t,r)=>{const{selection:n,schema:i}=t;if(!isTextSelection(n)||!n.empty||n.$cursor?.parent.type!==pType(i))return!1;if(isBreakNode(n.$cursor.nodeBefore)){if(r){const{$cursor:e,$cursor:{pos:o}}=n,s=isBreakNode(e.nodeAfter)?o+1:o,a=e.end(),l=e.after(),c=t.doc.slice(s,a,!1).content;let u=t.tr.insert(l,pType(i).create(null,c));u=u.setSelection(TextSelection.create(u.doc,l+1)).scrollIntoView().delete(o,a).delete(o-1,o),r(u)}return!0}return r?.(t.tr.replaceSelectionWith(e.create()).scrollIntoView()),!0});function isBreakNode(e){return Boolean(e?.type.spec.isBreak)}const joinPreviousBlock=({checkPrevNode:e,skipNode:t})=>(r,n)=>{const i=get$CursorAtBlockStart(r.selection);if(!i)return!1;const o=i.index(-1),s=i.node(-1).maybeChild(o-1);if(!s||!e(s))return!1;const a=i.parent,l=r.schema.topNodeType.create(null,a),c=0===a.childCount;let u,d=s,p=i.before()-s.nodeSize;for(;u=getLastChildOfNode(d);){if(u.node.isTextblock){const e=r.tr,t=p+u.offset+u.node.nodeSize;return e.delete(i.before(),i.after()),e.insert(t,a.content),e.setSelection(TextSelection.create(e.doc,t)),n?.(e.scrollIntoView()),!0}if(!t(u.node)&&u.node.canAppend(l)){const e=r.tr,t=p+1+u.offset+u.node.nodeSize-1;return e.delete(i.before(),i.after()),e.insert(t,a),e.setSelection(TextSelection.create(e.doc,t+1)),n?.(e.scrollIntoView()),!0}if(u.node.isAtom||u.node.isLeaf){const{tr:e}=r;if(c)e.delete(i.before(),i.after()),e.setSelection(NodeSelection.create(e.doc,p+1+u.offset));else if(!t(d)&&d.canAppend(l)){const t=p+d.nodeSize-1;e.insert(t,a),e.setSelection(TextSelection.create(e.doc,t))}else e.setSelection(NodeSelection.create(e.doc,p+1+u.offset));return n?.(e.scrollIntoView()),!0}d=u.node,p+=u.offset+1}return!1},liftFromQuote=(e,t)=>{const r=get$CursorAtBlockStart(e.selection);return!(!r||!isBlockqouteNode(r.node(-1)))&&lift(e,t)},joinPrevQuote=joinPreviousBlock({checkPrevNode:isBlockqouteNode,skipNode:isBlockqouteNode}),toggleQuote=(e,t)=>{const{selection:r}=e,n=blockquoteType(e.schema);if(!isTextSelection(r)||!r.$cursor)return wrapIn(n)(e,t);const{$cursor:i}=r;let{depth:o}=i;for(;o>0;){const r=i.node(o).type.spec;if(!r.complex||"root"===r.complex){const r=o-1,s=getBlockRange(i,o);return isBlockqouteNode(i.node(r))?t?.(e.tr.lift(s,r-1).scrollIntoView()):t?.(e.tr.wrap(s,[{type:n}]).scrollIntoView()),!0}o--}return!1};function getBlockRange(e,t){const{doc:r}=e,n=r.resolve(e.before(t)),i=r.resolve(e.after(t));return n.blockRange(i)}const bqAction="quote",Blockquote=(e,t)=>{if(e.use(BlockquoteSpecs),t?.qouteKey){const{qouteKey:r}=t;e.addKeymap(({schema:e})=>({[r]:withLogAction("blockquote",wrapIn(blockquoteType(e)))}))}e.addKeymap(()=>({Backspace:chainCommands(liftFromQuote,joinPrevQuote)})),e.addInputRules(({schema:e})=>({rules:[blockQuoteRule(blockquoteType(e))]})),e.addAction(bqAction,({schema:e})=>{const t=blockquoteType(e);return{isActive:e=>hasParentNodeOfType(t)(e.selection),isEnable:toggleQuote,run:toggleQuote}})};function blockQuoteRule(e){return wrappingInputRule(/^\s*>\s$/,e)}const remove$4="Remove",empty_option$1="No matches found",en$f={remove:remove$4,empty_option:empty_option$1},remove$3="",empty_option="  ",ru$f={remove:remove$3,empty_option:empty_option},KEYSET$b="codeblock",i18n$a=registerKeyset(KEYSET$b,{en:en$f,ru:ru$f}),doc_empty$1="Enter your text or type '/' to open the list of commands",doc_empty_mobile$1="Enter your text",checkbox$4="Add a description of the task or check point",codeblock$3="Add code or text to the block",deflist_term$1="Definition term",deflist_desc$1="Definition description",heading$6="Heading",cut_title$1="Cut title",cut_content$1="Add text to be displayed on click",note_title$1="Note title",note_content$1="Add content for note",block$1="Block with decoration",layout_cell$1="Text",table_cell$1="Cell content",select_filter$1="Search",en$e={doc_empty:doc_empty$1,doc_empty_mobile:doc_empty_mobile$1,checkbox:checkbox$4,codeblock:codeblock$3,deflist_term:deflist_term$1,deflist_desc:deflist_desc$1,heading:heading$6,cut_title:cut_title$1,cut_content:cut_content$1,note_title:note_title$1,note_content:note_content$1,block:block$1,layout_cell:layout_cell$1,table_cell:table_cell$1,select_filter:select_filter$1},doc_empty='     "/",    ',doc_empty_mobile="  ",checkbox$3="     ",codeblock$2="     ",deflist_term="",deflist_desc="",heading$5="",cut_title=" ",cut_content=" ,      ",note_title=" ",note_content="   ",block="  ",layout_cell="",table_cell="",select_filter="",ru$e={doc_empty:doc_empty,doc_empty_mobile:doc_empty_mobile,checkbox:checkbox$3,codeblock:codeblock$2,deflist_term:deflist_term,deflist_desc:deflist_desc,heading:heading$5,cut_title:cut_title,cut_content:cut_content,note_title:note_title,note_content:note_content,block:block,layout_cell:layout_cell,table_cell:table_cell,select_filter:select_filter},KEYSET$a="placeholder",i18n$9=registerKeyset(KEYSET$a,{en:en$e,ru:ru$e}),BaseTooltipCn=cn("base-tooltip"),defaultPlacement=["bottom-start","top-start","bottom-end","top-end"],b$t=BaseTooltipCn;class BaseTooltipPluginView{view;currentNode=null;content;nodeType;popupPlacement;manualHidden=!1;destroyed=!1;disableHideOnEscapeKeyDown;focusTrackingRafId=null;idPrefix;renderItem;constructor(e,t){this.view=e,this.idPrefix=t.idPrefix,this.content=t.content,this.nodeType=t.nodeType,this.popupPlacement=t.popupPlacement,this.disableHideOnEscapeKeyDown=t.disableHideOnEscapeKeyDown}update(e){this.view=e,this.updateTooltipView()}destroy(){this.destroyed=!0,this.renderItem?.remove(),this.renderItem=void 0}onEscapeDown=()=>!(this.disableHideOnEscapeKeyDown||!this.currentNode||this.manualHidden||(this.hidePopupManual(),0));setCurrentNode(e){const t=this.view,r=t.domAtPos.bind(t),{selection:n}=t.state,{$from:i,$to:o}=n,s=findSelectedNodeOfType(e)(n)||findParentNodeOfType(e)(n);if(!s||!i.node(s.depth).eq(o.node(s.depth)))return this.currentNode=null,this.manualHidden=!1,void this.stopTrackingViewFocus();this.currentNode&&this.currentNode.node.eq(s.node)&&this.currentNode.pos===s.pos||(this.manualHidden=!1,this.stopTrackingViewFocus());const{pos:a,node:l}=s,c=findDomRefAtPos(a,r);this.currentNode={pos:a,node:l,dom:c}}changeAttrsCb=(e,t)=>{if(this.currentNode){let r=this.view.state.tr.setNodeMarkup(this.currentNode.pos,void 0,{...this.currentNode.node.attrs,...e},t?.marks||[]);t?.setSelection&&(r=r.setSelection(NodeSelection.create(r.doc,this.currentNode.pos))),this.view.dispatch(r),t?.setFocus&&this.view.focus(),t?.hideTooltip&&this.hidePopupManual()}};updateTooltipView(){const e=this.currentNode;this.setCurrentNode(this.view.state.schema.nodes[this.nodeType.name]),e&&this.currentNode?.node.eq(e.node)&&this.currentNode.pos===e.pos&&this.currentNode.dom===e.dom||this.render()}render(){this.destroyed||(this.renderItem=this.renderItem??this.createRenderItem(),this.renderItem.rerender())}onOutsideClick=()=>{this.hidePopupManual()};popupOpenChangeHandler=(e,t,r)=>{e||"focus-out"===r&&t.relatedTarget===this.view.dom||this.disableHideOnEscapeKeyDown&&"escape-key"===r||(this.hidePopupManual(),requestAnimationFrame(()=>{this.destroyed||this.view.hasFocus()||this.startTrackingViewFocus()}))};startTrackingViewFocus(){this.focusTrackingRafId=requestAnimationFrame(()=>{if(!this.destroyed)return this.view.hasFocus()?(this.focusTrackingRafId=null,this.manualHidden=!1,void this.render()):void this.startTrackingViewFocus()})}stopTrackingViewFocus(){null!==this.focusTrackingRafId&&(cancelAnimationFrame(this.focusTrackingRafId),this.focusTrackingRafId=null)}hidePopupManual(){this.manualHidden=!0,this.render()}renderContent(e){return this.content?(window.dispatchEvent(new CustomEvent("scroll")),jsxRuntimeExports.jsx(Popup,{open:!0,hasArrow:!1,anchorElement:e.dom,placement:this.popupPlacement||defaultPlacement,onOpenChange:this.popupOpenChangeHandler,children:jsxRuntimeExports.jsx("div",{className:b$t(),children:this.content(this.view,e,this.changeAttrsCb)})})):null}createRenderItem(){return getReactRendererFromState(this.view.state).createItem(this.idPrefix,()=>this.currentNode&&!this.manualHidden?jsxRuntimeExports.jsx(ErrorLoggerBoundary,{children:this.renderContent(this.currentNode)}):null)}}const CodeMenu=({view:e,pos:t,node:r,selectItems:n,mapping:i})=>{const o=r.attrs[CodeBlockNodeAttr.Lang],s=i[o]??o;return jsxRuntimeExports.jsx(Select,{size:"m",width:"max",disablePortal:!0,value:[s],onUpdate:r=>{return n=r[0],e.focus(),void(n!==s&&e.dispatch(e.state.tr.setNodeMarkup(t,null,{[CodeBlockNodeAttr.Lang]:n})));var n},options:n,filterable:!0,filterPlaceholder:i18n$9("select_filter"),popupClassName:"g-md-code-block__select-popup",className:"g-md-code-block__select-button",renderEmptyOptions:()=>jsxRuntimeExports.jsx("div",{className:"g-md-code-block__select-empty",children:i18n$a("empty_option")})})},codeLangSelectTooltipViewCreator=(e,t,r={})=>new BaseTooltipPluginView(e,{idPrefix:"code-block-tooltip",nodeType:codeBlockType(e.state.schema),popupPlacement:["bottom","top"],content:(e,{node:n,pos:i})=>jsxRuntimeExports.jsx(Toolbar,{editor:{},focus:()=>e.focus(),className:"g-md-code-block-toolbar",data:[[{id:"code-block-type",type:ToolbarDataType.ReactComponent,component:()=>jsxRuntimeExports.jsx(CodeMenu,{view:e,pos:i,node:n,selectItems:t,mapping:r}),width:28}],[{id:"code-block-remove",icon:{data:TrashBin},title:i18n$a("remove"),type:ToolbarDataType.SingleButton,isActive:()=>!1,isEnable:()=>!0,exec:()=>removeNode({pos:i,node:n,tr:e.state.tr,dispatch:e.dispatch.bind(e)})}]]})}),key$3=new PluginKey("code_block_highlight"),CodeBlockHighlight=(e,t)=>{let r,n,i;function o(e){const t=[];if(!n)return DecorationSet.empty;for(const{node:r,pos:i}of findChildrenByType(e,codeBlockType(e.type.schema),!0)){let e,o=i+1;const s=r.attrs[CodeBlockNodeAttr.Lang];if(s&&n.registered(s)){e=n.highlight(s,r.textContent).children;for(const{text:r,classes:n}of parseNodes(e)){const e=o+r.length;n.length&&t.push(Decoration$1.inline(o,e,{class:n.join(" ")})),o=e}}}return DecorationSet.create(e,t)}e.addPlugin(()=>{let s=!1;const a=[],l={};return new Plugin({key:key$3,state:{init:(c,u)=>((async()=>{try{i=(await __vitePreload(async()=>{const{default:e}=await import("./core-UJTxJtEN.js").then(e=>e.c);return{default:e}},__vite__mapDeps([0,1,2]))).default;const e=await __vitePreload(()=>import("./index-AEOaPG7e.js").then(e=>e.i),__vite__mapDeps([3,1,2])),o=e.all,s=e.createLowlight;return r={...o,...t.langs},n=s(r),!0}catch(o){return globalLogger.info("Skip code_block highlighting"),e.logger.log("Skip code_block highlighting"),!1}})().then(e=>{if(s=e,s)for(const t of Object.keys(r)){const e=r[t](i);if(a.push({value:t,content:e.name||capitalize(t)}),e.aliases)for(const r of e.aliases)l[r]=t}}),o(u.doc)),apply:(e,t,r,n)=>{if(!s)return DecorationSet.empty;if(e.docChanged){const t=r.selection.$head.parent.type.name,i=n.selection.$head.parent.type.name;if(t===codeBlockNodeName||i===codeBlockNodeName)return o(e.doc);{const t=findChildrenByType(r.doc,codeBlockType(r.schema));if(findChildrenByType(n.doc,codeBlockType(n.schema)).length!==t.length||e.steps.some(e=>stepHasFromTo(e)&&t.some(t=>t.pos>=e.from&&t.pos+t.node.nodeSize<=e.to)))return o(e.doc)}}return t.map(e.mapping,e.doc)}},view:e=>codeLangSelectTooltipViewCreator(e,a,l),props:{decorations:e=>key$3.getState(e),nodeViews:{[codeBlockNodeName]:e=>{let t=e.attrs[CodeBlockNodeAttr.Lang];const r=document.createElement("pre"),n=document.createElement("code");return n.classList.add("hljs"),t&&(r.setAttribute(CodeBlockNodeAttr.Lang,t),n.classList.add(t)),r.append(n),{dom:r,contentDOM:n,update(i){if(e.type!==i.type)return!1;const o=i.attrs[CodeBlockNodeAttr.Lang];return t!==o&&(n.className="hljs",o?(r.setAttribute(CodeBlockNodeAttr.Lang,o),n.classList.add(o)):r.removeAttribute(CodeBlockNodeAttr.Lang),t=o),!0}}}}}})})};function parseNodes(e,t=[]){return e.map(e=>{let r=t;return"element"===e.type?(r=r.concat(e.properties.className??[]),parseNodes(e.children,r)):{text:"comment"===e.type||"text"===e.type?e.value:"",classes:r}}).flat()}function stepHasFromTo(e){return"number"==typeof e.from&&"number"==typeof e.to}const cbAction="toCodeBlock",resetCodeblock=(e,t,r)=>{const{selection:n}=e;return!(!n.empty||n.$from.parent.type!==codeBlockType(e.schema)||!r?.endOfTextblock("backward",e))&&toParagraph(e,t)},setCodeBlockType=({serializer:e})=>(t,r)=>{const n=codeBlockType(t.schema);if(!setBlockType(n)(t))return!1;if(r){const i=e.serialize(t.selection.content().content,{escape:!1});r(t.tr.replaceSelectionWith(n.createAndFill({},i?t.schema.text(i):null)))}return!0},handlePaste=(e,t)=>{if(!t.clipboardData||e.state.selection.$from.parent.type.spec.code)return!1;const r=getCodeData(t.clipboardData);if(!r)return!1;getLoggerFromState(e.state).event({domEvent:"paste",event:"paste-from-code-editor",editor:r.editor,editorMode:r.mode,empty:!r.value,dataTypes:t.clipboardData.types});const{tr:n,schema:i}=e.state;if(r.value){const e=codeBlockType(i).create({[CodeBlockNodeAttr.Lang]:r.mode},i.text(r.value));n.replaceSelectionWith(e)}else n.replaceWith(n.selection.from,n.selection.to,Fragment.empty);return e.dispatch(n.scrollIntoView()),!0};function getCodeData(e){if(e.getData(DataTransferType$1.Text)){let t,r="unknown";return isVSCode(e)?(r="vscode",t=tryParseVSCodeData(e)?.mode,{editor:r,mode:t,value:dedent(e.getData(DataTransferType$1.Text))}):null}return null}const codeBlockPastePlugin=()=>new Plugin({props:{handleDOMEvents:{paste:(e,t)=>!!handlePaste(e,t)&&(t.preventDefault(),!0)}}}),CodeBlock=(e,t)=>{e.use(CodeBlockSpecs,t),e.addKeymap(e=>{const{codeBlockKey:r}=t,n={Enter:newlineInCode,Backspace:resetCodeblock};return r&&(n[r]=withLogAction("code_block",setCodeBlockType(e))),n}),e.addInputRules(({schema:e})=>({rules:[codeBlockRule(codeBlockType(e))]})),e.addAction(cbAction,e=>{const t=codeBlockType(e.schema);return{isActive:e=>hasParentNodeOfType(t)(e.selection),isEnable:setCodeBlockType(e),run:setCodeBlockType(e)}}),e.addPlugin(codeBlockPastePlugin,e.Priority.High),isFunction$1(t.langs)?e.use(t.langs):e.use(CodeBlockHighlight,t.langs??{})};function codeBlockRule(e){return textblockTypeInputRule(/^```$/,e)}const wrapToDeflist=(e,t)=>{const r=findParentNode(e=>e.isTextblock)(e.selection);return!!r&&(t?.(replaceParentNodeOfType(r.node.type,defListType(e.schema).create(null,[defTermType(e.schema).create(),defDescType(e.schema).create(null,r.node.copy(r.node.content))]))(e.tr).scrollIntoView()),!0)},splitDeflist=(e,t)=>{const{selection:r}=e;if(isNodeSelection(r))return!1;const n=findParentNode(e=>e.isTextblock)(r);if(!n)return!1;if(""!==n.node.textContent)return!1;const i=r.$from.node(n.depth-1);if(!i||i.type!==defDescType(e.schema))return!1;const o=i.lastChild===n.node;if(i.childCount<2||!o)return!1;const s=e.tr;return t?.(s.delete(n.pos,n.pos+n.node.nodeSize).insert(s.mapping.map(r.$from.after(n.depth-2)),n.node.type.create(n.node.attrs))),!0},dlAction="toDefList",Deflist=(e,t)=>{e.use(DeflistSpecs,t),e.addKeymap(()=>({Enter:splitDeflist})),e.addAction(dlAction,()=>({isEnable:wrapToDeflist,run:wrapToDeflist}))};function wrapInList(e,t=null){return function(r,n){let{$from:i,$to:o}=r.selection,s=i.blockRange(o);if(!s)return!1;let a=n?r.tr:null;return!!wrapRangeInList(a,s,e,t)&&(n&&n(a.scrollIntoView()),!0)}}function wrapRangeInList(e,t,r,n=null){let i=!1,o=t,s=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(r)&&0==t.startIndex){if(0==t.$from.index(t.depth-1))return!1;let e=s.resolve(t.start-2);o=new NodeRange(e,e,t.depth),t.endIndex<t.parent.childCount&&(t=new NodeRange(t.$from,s.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let a=findWrapping(o,r,n,t);return!!a&&(e&&doWrapInList(e,t,a,i,r),!0)}function doWrapInList(e,t,r,n,i){let o=Fragment.empty;for(let u=r.length-1;u>=0;u--)o=Fragment.from(r[u].type.create(r[u].attrs,o));e.step(new ReplaceAroundStep(t.start-(n?2:0),t.end,t.start,t.end,new Slice(o,0,0),r.length,!0));let s=0;for(let u=0;u<r.length;u++)r[u].type==i&&(s=u+1);let a=r.length-s,l=t.start+r.length-(n?2:0),c=t.parent;for(let u=t.startIndex,d=t.endIndex,p=!0;u<d;u++,p=!1)!p&&canSplit(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return e}function splitListItem(e,t){return function(t,r){let{$from:n,$to:i,node:o}=t.selection;if(o&&o.isBlock||n.depth<2||!n.sameParent(i))return!1;let s=n.node(-1);if(s.type!=e)return!1;if(0==n.parent.content.size&&n.node(-1).childCount==n.indexAfter(-1)){if(3==n.depth||n.node(-3).type!=e||n.index(-2)!=n.node(-2).childCount-1)return!1;if(r){let i=Fragment.empty,o=n.index(-1)?1:n.index(-2)?2:3;for(let e=n.depth-o;e>=n.depth-3;e--)i=Fragment.from(n.node(e).copy(i));let s=n.indexAfter(-1)<n.node(-2).childCount?1:n.indexAfter(-2)<n.node(-3).childCount?2:3;i=i.append(Fragment.from(e.createAndFill()));let a=n.before(n.depth-(o-1)),l=t.tr.replace(a,n.after(-s),new Slice(i,4-o,0)),c=-1;l.doc.nodesBetween(a,l.doc.content.size,(e,t)=>{if(c>-1)return!1;e.isTextblock&&0==e.content.size&&(c=t+1)}),c>-1&&l.setSelection(Selection$1.near(l.doc.resolve(c))),r(l.scrollIntoView())}return!0}let a=i.pos==n.end()?s.contentMatchAt(0).defaultType:null,l=t.tr.delete(n.pos,i.pos),c=a?[null,{type:a}]:void 0;return!!canSplit(l.doc,n.pos,2,c)&&(r&&r(l.split(n.pos,2,c).scrollIntoView()),!0)}}function liftListItem$1(e){return function(t,r){let{$from:n,$to:i}=t.selection,o=n.blockRange(i,t=>t.childCount>0&&t.firstChild.type==e);return!!o&&(!r||(n.node(o.depth-1).type==e?liftToOuterList(t,r,e,o):liftOutOfList(t,r,o)))}}function liftToOuterList(e,t,r,n){let i=e.tr,o=n.end,s=n.$to.end(n.depth);o<s&&(i.step(new ReplaceAroundStep(o-1,s,o,s,new Slice(Fragment.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new NodeRange(i.doc.resolve(n.$from.pos),i.doc.resolve(s),n.depth));const a=liftTarget(n);if(null==a)return!1;i.lift(n,a);let l=i.doc.resolve(i.mapping.map(o,-1)-1);return canJoin(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),t(i.scrollIntoView()),!0}function liftOutOfList(e,t,r){let n=e.tr,i=r.parent;for(let h=r.end,f=r.endIndex-1,m=r.startIndex;f>m;f--)h-=i.child(f).nodeSize,n.delete(h-1,h+1);let o=n.doc.resolve(r.start),s=o.nodeAfter;if(n.mapping.map(r.end)!=r.start+o.nodeAfter.nodeSize)return!1;let a=0==r.startIndex,l=r.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?Fragment.empty:Fragment.from(i))))return!1;let d=o.pos,p=d+s.nodeSize;return n.step(new ReplaceAroundStep(d-(a?1:0),p+(l?1:0),d+1,p-1,new Slice((a?Fragment.empty:Fragment.from(i.copy(Fragment.empty))).append(l?Fragment.empty:Fragment.from(i.copy(Fragment.empty))),a?0:1,l?0:1),a?0:1)),t(n.scrollIntoView()),!0}function toList(e){return(t,r)=>{const n=findAnyParentList(t.schema)(t.selection);return n?(e===n.node.type||r?.(t.tr.setNodeMarkup(n.pos,e)),!0):wrapInList(e)(t,r)}}const joinPrevList=joinPreviousBlock({checkPrevNode:isListNode,skipNode:isListOrItemNode}),sink=(e,t,r)=>{const n=e.mapping.map(t.start),i=e.mapping.map(t.end),o=e.mapping.map(t.startIndex),s=t.parent,a=s.child(o-1),l=a.lastChild&&a.lastChild.type===s.type,c=Fragment.from(l?r.create():null),u=new Slice(Fragment.from(r.create(null,Fragment.from(s.type.create(null,c)))),l?3:1,0);return e.step(new ReplaceAroundStep(n-(l?3:1),i,n,i,u,1,!0)),!0};function sinkOnlySelectedListItem(e){return({tr:t,selection:r},n)=>{const{$from:i,$to:o}=r,s=i.blockRange(o,t=>t.childCount>0&&t.firstChild.type===e);if(!s)return!1;const{startIndex:a,parent:l,start:c,end:u}=s;if(0===a)return!1;if(l.child(a-1).type!==e)return!1;if(n){let r=u-1;for(;r>c;){const e=t.mapping.map(o.pos),n=t.doc.resolve(r),i=n.before(n.depth),s=t.doc.resolve(i).blockRange(n);if(s?.start){const n=t.doc.resolve(s.start);if(s.start>e&&isListNode(n.parent)){r=s.start;const e=liftTarget(s);null!==e&&t.lift(s,e)}}r--}return sink(t,s,e),n(t.scrollIntoView()),!0}return!0}}var ListAction,ListAction2;ListAction2=ListAction||(ListAction={}),ListAction2.ToBulletList="toBulletList",ListAction2.ToOrderedList="toOrderedList",ListAction2.SinkListItem="sinkListItem",ListAction2.LiftListItem="liftListItem";const actions={toBulletList:({schema:e})=>{const t=toList(blType(e));return{isActive:isIntoListOfType(ListNode.BulletList),isEnable:t,run:t}},toOrderedList:({schema:e})=>{const t=toList(olType(e));return{isActive:isIntoListOfType(ListNode.OrderedList),isEnable:t,run:t}},liftListItem:({schema:e})=>({isEnable:liftListItem$1(liType(e)),run:liftListItem$1(liType(e))}),sinkListItem:({schema:e})=>({isEnable:sinkOnlySelectedListItem(liType(e)),run:sinkOnlySelectedListItem(liType(e))})},ListsInputRulesExtension=(e,t)=>{e.addInputRules(({schema:e})=>{const r=[orderedListRule(olType(e))];if(!1!==t.bulletListInputRule){const n=bulletListRule(blType(e),t.bulletListInputRule);n&&r.push(n)}return{rules:r}})};function orderedListRule(e){return wrappingInputRule(/^(\d+)([.)])\s$/,e,e=>({[ListsAttr.Order]:Number(e[1]),[ListsAttr.Markup]:e[2]}),(e,t)=>t.childCount+t.attrs[ListsAttr.Order]===Number(e[1]))}function bulletListRule(e,t){const r=[];return!1!==t?.dash&&r.push("-"),!1!==t?.plus&&r.push("+"),!1!==t?.asterisk&&r.push("*"),0===r.length?null:wrappingInputRule(new RegExp(`^\\s*([${r.join("")}])\\s$`),e,e=>({[ListsAttr.Markup]:e[1]}))}const collapseListsPlugin=()=>new Plugin({appendTransaction(e,t,r){if(!e.some(e=>e.docChanged))return null;if(!hasParentNode(isListNode)(r.selection)&&!hasParentNode(isListNode)(t.selection))return null;const{tr:n}=r;let i=-1,o=0;for(;i!==o;)i=o,o=collapseEmptyListItems(n,findChildren(n.doc,isListNode,!0));return n.docChanged?n:null}});function collapseEmptyListItems(e,t){const r=e.steps.length;return t.reverse().forEach(t=>{const r=t.node,n=t.pos;getChildrenOfNode(r).reverse().forEach(({node:t,offset:r})=>{if(isListItemNode(t)){const{firstChild:i}=t,o=n+1+r;if(i&&isListNode(i)){const r=i.content,n=t.content.content.slice(1),s=n.length?r.append(Fragment.from(liType(e.doc.type.schema).create(null,n))):r,a=e.mapping.map(o),l=e.mapping.map(o+t.nodeSize);e.replaceWith(a,l,s);const c=findClosestTextNodePos(e.doc,a+r.size);c&&e.setSelection(TextSelection.create(e.doc,c))}}})}),e.steps.length-r}function findClosestTextNodePos(e,t){for(;t<e.content.size;){const r=e.nodeAt(t);if(r&&r.isText)return t;t++}return null}const mergeListsPlugin=()=>new Plugin({appendTransaction(e,t,r){if(!e.some(e=>e.docChanged))return null;if(!hasParentNode(isListNode)(r.selection)&&!hasParentNode(isListNode)(t.selection))return null;const{tr:n}=r;return mergeAdjacentNodesWithSameType(n,findChildren(n.doc,isListNode,!0)),n.docChanged?n:null}});function mergeAdjacentNodesWithSameType(e,t){const r={};for(const n of t){const t=n.pos;r[t+n.node.nodeSize]=n.node;const i=r[t];i?.type===n.node.type&&(e.join(e.mapping.map(t)),r[t]=void 0)}}const Lists=(e,t)=>{e.use(ListsSpecs),e.addKeymap(({schema:e})=>{const{ulKey:r,olKey:n}=t??{},i={};return r&&(i[r]=withLogAction("bulletList",toList(blType(e)))),n&&(i[n]=withLogAction("orderedList",toList(olType(e)))),{Tab:sinkOnlySelectedListItem(liType(e)),"Shift-Tab":liftListItem$1(liType(e)),"Mod-[":liftListItem$1(liType(e)),"Mod-]":sinkOnlySelectedListItem(liType(e)),...i}},e.Priority.High),e.addKeymap(({schema:e})=>({Enter:splitListItem(liType(e)),Backspace:joinPrevList}),e.Priority.Low),e.use(ListsInputRulesExtension,{bulletListInputRule:t?.ulInputRules}),e.addPlugin(mergeListsPlugin),e.addPlugin(collapseListsPlugin),e.addAction(ListAction.ToBulletList,actions.toBulletList).addAction(ListAction.ToOrderedList,actions.toOrderedList).addAction(ListAction.SinkListItem,actions.sinkListItem).addAction(ListAction.LiftListItem,actions.liftListItem)},isIntoTable=e=>hasParentNodeOfType(e.schema.nodes[TableNode.Table])(e.selection),findParentTable=e=>findParentNodeOfType(e.schema.nodes[TableNode.Table])(e.selection),findParentHeadOnPos=e=>findParentNodeOfTypeClosestToPos(e,e.doc.type.schema.nodes[TableNode.Head]),findParentBody=e=>findParentNodeOfType(e.schema.nodes[TableNode.Body])(e.selection),findParentBodyOnPos=e=>findParentNodeOfTypeClosestToPos(e,e.doc.type.schema.nodes[TableNode.Body]),findParentRow=e=>findParentNodeOfType(e.schema.nodes[TableNode.Row])(e.selection),findParentRowOnPos=e=>findParentNodeOfTypeClosestToPos(e,e.doc.type.schema.nodes[TableNode.Row]),findParentCell=e=>findParentNodeOfType([e.schema.nodes[TableNode.HeaderCell],e.schema.nodes[TableNode.DataCell]])(e.selection),findParentCellOnPos=e=>findParentNodeOfTypeClosestToPos(e,[e.doc.type.schema.nodes[TableNode.HeaderCell],e.doc.type.schema.nodes[TableNode.DataCell]]),findTableRows=(e,t)=>findChildrenByType(e,t.nodes[TableNode.Row]),findTableCells=(e,t)=>findChildren(e,e=>[t.nodes[TableNode.HeaderCell].name,t.nodes[TableNode.DataCell].name].includes(e.type.name)),mdTamplate="\n\n| Heading | Heading |\n| ------- | ------- |\n| Text    | Text    |\n| Text    | Text    |\n\n".trim(),createTableFactory=e=>(t,r)=>{if(isIntoTable(t))return!1;if(r){const n=e.parse(mdTamplate);r(t.tr.replaceSelectionWith(n).scrollIntoView())}return!0},removeTable=(e,t)=>!!isIntoTable(e)&&(t?.(removeParentNodeOfType(e.schema.nodes[TableNode.Table])(e.tr)),!0),createTableAction=({markupParser:e})=>({isActive:isIntoTable,isEnable:createTableFactory(e),run:createTableFactory(e)}),deleteTableAction={isEnable:removeTable,run:removeTable},moveToNextRow=(e,t,r)=>{const n=findParentTableFromPos(e);if(!n)return!1;const i=findParentHeadOnPos(e),o=findParentBodyOnPos(e);if(!i&&!o)return!1;const s=findParentRowOnPos(e),a=findParentCellOnPos(e);if(!s||!a)return!1;const l=e.index(a.depth-1),c=e.index(s.depth-1);if(!r)return!0;const u=(e,t,r)=>{const n=getChildByIndex(t,l);if(n){const t=r+1+n.offset;e.setSelection(TextSelection.create(e.doc,t+n.node.nodeSize-1))}else{const n=e.doc.resolve(r+t.nodeSize-1);e.setSelection(TextSelection.near(n,-1))}},d=e=>{const r=n.pos+n.node.nodeSize;e.insert(r,pType(t.schema).create()),e.setSelection(TextSelection.create(e.doc,r+1))},p=t.tr;if(i){const e=getChildByIndex(n.node,n.node.childCount-1);e&&e.node!==i.node&&e.node.firstChild?u(p,e.node.firstChild,n.start+e.offset+1):d(p)}else{const e=getChildByIndex(o.node,c+1);e?u(p,e.node,o.start+e.offset):d(p)}return r(p.scrollIntoView()),!0},moveToNextRowCommand=(e,t)=>moveToNextRow(e.selection.$head,e,t)||moveToNextRow(e.selection.$anchor,e,t),en$d={"column.add.before":"Add column before","column.add.after":"Add column after","column.remove":"Remove column","column.remove.multiple":"Remove columns","row.add.before":"Add row before","row.add.after":"Add row after","row.remove":"Remove row","row.remove.multiple":"Remove rows","cells.clear":"Clear cells","table.remove":"Remove table","table.menu.cell.align.left":"Align cell content to the left","table.menu.cell.align.right":"Align cell content to the right","table.menu.cell.align.center":"Align cell content to the center","table.menu.row.add":"Add row after","table.menu.row.remove":"Remove row","table.menu.column.add":"Add column after","table.menu.column.remove":"Remove column","table.menu.convert.yfm":"Convert to YFM table","table.menu.table.remove":"Remove table"},ru$d={"column.add.before":"  ","column.add.after":"  ","column.remove":" ","column.remove.multiple":" ","row.add.before":"  ","row.add.after":"  ","row.remove":" ","row.remove.multiple":" ","cells.clear":" ","table.remove":" ","table.menu.cell.align.left":"     ","table.menu.cell.align.right":"     ","table.menu.cell.align.center":"    ","table.menu.row.add":"  ","table.menu.row.remove":" ","table.menu.column.add":"  ","table.menu.column.remove":" ","table.menu.convert.yfm":"   YFM","table.menu.table.remove":" "},KEYSET$9="yfm-table",i18n$8=registerKeyset(KEYSET$9,{en:en$d,ru:ru$d});var YfmTableNode,YfmTableNode2,YfmTableAttr,YfmTableAttr2;YfmTableNode2=YfmTableNode||(YfmTableNode={}),YfmTableNode2.Table="yfm_table",YfmTableNode2.Body="yfm_tbody",YfmTableNode2.Row="yfm_tr",YfmTableNode2.Cell="yfm_td",YfmTableAttr2=YfmTableAttr||(YfmTableAttr={}),YfmTableAttr2.Colspan="colspan",YfmTableAttr2.Rowspan="rowspan",YfmTableAttr2.CellAlign="data-cell-align";const yfmTableType=nodeTypeFactory(YfmTableNode.Table),yfmTableBodyType=nodeTypeFactory(YfmTableNode.Body),yfmTableRowType=nodeTypeFactory(YfmTableNode.Row),yfmTableCellType=nodeTypeFactory(YfmTableNode.Cell),convertToYfmTable=(e,t)=>{const r=findParentTable(e);if(!r)return!1;if(t){const{schema:n}=e,i=[],o=findTableRows(r.node,e.schema);for(const t of o){const r=[],o=findTableCells(t.node,e.schema);for(const e of o)r.push(yfmTableCellType(n).create(null,pType(n).create(null,e.node.content)));i.push(yfmTableRowType(n).create(null,r))}const s=yfmTableType(n).create(null,yfmTableBodyType(n).create(null,i));t(e.tr.replaceWith(r.pos,r.pos+r.node.nodeSize,s))}return!0};function factory(e){return{isActive(t){const r=findParentCell(t);return r?.node.attrs[TableAttrs.CellAlign]===e},isEnable:e=>isIntoTable(e),run(t,r){const n=findParentTable(t),i=findParentRow(t),o=findParentCell(t);if(!o||!i||!n)return;let s=-1;if(i.node.forEach((e,t,r)=>{e===o.node&&(s=r)}),s<0)return;const a=t.tr,l=findTableRows(n.node,t.schema);for(const c of l){const r=findTableCells(c.node,t.schema)[s],i=n.pos+c.pos+r.pos+2;a.setNodeMarkup(i,void 0,{...r.node.attrs,[TableAttrs.CellAlign]:e})}r(a)}}}const setCellLeftAlign=factory(CellAlign.Left),setCellCenterAlign=factory(CellAlign.Center),setCellRightAlign=factory(CellAlign.Right),addRowAfter=(e,t,r)=>!!findParentBody(e)&&addRowAfter$1(e,t),addRow={isEnable:addRowAfter,run:addRowAfter},deleteRow={isEnable:removeCurrentRow,run:removeCurrentRow},addColumn={isEnable:addColumnAfter,run:addColumnAfter},deleteColumn={isEnable:removeCurrentColumn,run:removeCurrentColumn},innerActions=defineActions({setCellLeftAlign:setCellLeftAlign,setCellCenterAlign:setCellCenterAlign,setCellRightAlign:setCellRightAlign,addRow:addRow,deleteRow:deleteRow,addColumn:addColumn,deleteColumn:deleteColumn}),TableCellFloatingButton=({dom:e,actions:t})=>e?jsxRuntimeExports.jsx(Popup,{open:!0,keepMounted:!1,hasArrow:!1,anchorElement:e,offset:{crossAxis:2,mainAxis:-12},placement:"left-start",children:jsxRuntimeExports.jsx(DropdownMenuExport,{icon:jsxRuntimeExports.jsx(Icon,{data:Ellipsis,size:12,className:"table-cell-floating-icon"}),defaultSwitcherClassName:"table-cell-floating-button",items:t.map(buildMenuItem)})}):null;function buildMenuItem(e){if(Array.isArray(e))return e.map(buildMenuItem);const{action:t,text:r}=e,n=t.isActive();return{text:r,action:()=>t.run({}),active:n,disabled:!n&&!t.isEnable()}}TableCellFloatingButton.displayName="TableCellFloatingButton";class TableCellContextView{static findCellDom(e,t){return findParentDomRefOfType(t,e.domAtPos.bind(e))(e.state.selection)}#r;#i;#q;#j;constructor(e,t,r){this.#r=e,this.#i=t,this.#q=r,this.#j=getReactRendererFromState(e.state).createItem("table-cell-tooltip",()=>jsxRuntimeExports.jsx(ErrorLoggerBoundary,{children:jsxRuntimeExports.jsx(TableCellFloatingButton,{actions:this.#i,dom:TableCellContextView.findCellDom(this.#r,this.#q)})}))}update(e){this.#r=e,this.#j.rerender()}destroy(){this.#j.remove()}}const tableCellContextPlugin=()=>new Plugin({view(e){const{schema:t}=e.state,r=bindActions({...innerActions,deleteTable:deleteTableAction,convert:{isEnable:convertToYfmTable,run:convertToYfmTable}})(e);return new TableCellContextView(e,[[{action:r.setCellLeftAlign,text:i18n$8("table.menu.cell.align.left")},{action:r.setCellCenterAlign,text:i18n$8("table.menu.cell.align.center")},{action:r.setCellRightAlign,text:i18n$8("table.menu.cell.align.right")}],[{action:r.addRow,text:i18n$8("table.menu.row.add")},{action:r.deleteRow,text:i18n$8("table.menu.row.remove")},{action:r.addColumn,text:i18n$8("table.menu.column.add")},{action:r.deleteColumn,text:i18n$8("table.menu.column.remove")}],{action:r.convert,text:i18n$8("table.menu.convert.yfm")},{action:r.deleteTable,text:i18n$8("table.menu.table.remove")}],[t.nodes[TableNode.HeaderCell],t.nodes[TableNode.DataCell]])}}),Table$1=e=>{e.use(TableSpecs),e.addKeymap(()=>({Tab:goToNextCell("next"),"Shift-Tab":goToNextCell("prev"),Enter:moveToNextRowCommand,"Shift-Enter":moveToNextRowCommand})),e.addAction("createTable",createTableAction),e.addAction("deleteTable",()=>deleteTableAction),e.addPlugin(tableCellContextPlugin)};var HeadingAction,HeadingAction2;HeadingAction2=HeadingAction||(HeadingAction={}),HeadingAction2.ToH1="toH1",HeadingAction2.ToH2="toH2",HeadingAction2.ToH3="toH3",HeadingAction2.ToH4="toH4",HeadingAction2.ToH5="toH5",HeadingAction2.ToH6="toH6";const hasParentHeading=e=>t=>hasParentNode(r=>r.type===headingType(t.schema)&&r.attrs[headingLevelAttr]===e)(t.selection);function headingRule(e,t){return textblockTypeInputRule(new RegExp("^(#{1,"+t+"})\\s$"),e,e=>({[headingLevelAttr]:e[1].length}))}const headingAction$1=(e,t)=>{const r=setBlockType(e,{[headingLevelAttr]:t});return{isActive:hasParentHeading(t),isEnable:r,run:r}},resetHeading=(e,t,r)=>{const{selection:n}=e;return!(!n.empty||n.$from.parent.type!==headingType(e.schema)||!r?.endOfTextblock("backward",e))&&toParagraph(e,t)},Heading=(e,t)=>{e.use(HeadingSpecs,t),e.addKeymap(({schema:e})=>{const{h1Key:r,h2Key:n,h3Key:i,h4Key:o,h5Key:s,h6Key:a}=t??{},l=t=>setBlockType(headingType(e),{[headingLevelAttr]:t}),c={Backspace:resetHeading};return r&&(c[r]=withLogAction("heading1",l(1))),n&&(c[n]=withLogAction("heading2",l(2))),i&&(c[i]=withLogAction("heading3",l(3))),o&&(c[o]=withLogAction("heading4",l(4))),s&&(c[s]=withLogAction("heading5",l(5))),a&&(c[a]=withLogAction("heading6",l(6))),c}).addInputRules(({schema:e})=>({rules:[headingRule(headingType(e),6)]})),e.addAction(HeadingAction.ToH1,({schema:e})=>headingAction$1(headingType(e),1)).addAction(HeadingAction.ToH2,({schema:e})=>headingAction$1(headingType(e),2)).addAction(HeadingAction.ToH3,({schema:e})=>headingAction$1(headingType(e),3)).addAction(HeadingAction.ToH4,({schema:e})=>headingAction$1(headingType(e),4)).addAction(HeadingAction.ToH5,({schema:e})=>headingAction$1(headingType(e),5)).addAction(HeadingAction.ToH6,({schema:e})=>headingAction$1(headingType(e),6))},hrAction="hRule",HorizontalRule=e=>{e.use(HorizontalRuleSpecs),e.addInputRules(e=>({rules:[nodeInputRule(/^(---|___|\*\*\*)$/,t=>[horizontalRuleType(e.schema).create({[horizontalRuleMarkupAttr]:t}),pType(e.schema).create()],1)]})),e.addAction(hrAction,({schema:e})=>{const t=addHr(horizontalRuleType(e));return{isActive:e=>isHrSelection(e.selection),isEnable:t,run:t}})},addHr=e=>(t,r)=>{if(isHrSelection(t.selection))return!0;if(isNodeSelection(t.selection))return r?.(t.tr.replaceSelectionWith(e.create()).scrollIntoView()),!0;const n=get$Cursor(t.selection);if(!n||n.parent.type.spec.complex)return!1;if(!r)return!0;const{tr:i}=t;if(n.parent.type===pType(t.schema)&&2===n.parent.nodeSize){const t=n.before();i.insert(t,e.create())}else{const r=n.after();i.insert(r,[e.create(),pType(t.schema).create()]),i.setSelection(TextSelection.create(i.doc,r+2))}return r(i.scrollIntoView()),!0};function isHrSelection(e){return isNodeSelection(e)&&e.node.type.name===horizontalRuleNodeName}var checkbox$2={},hasRequiredCheckbox$1,checkbox_2,hasRequiredCheckbox;function requireCheckbox$1(){return hasRequiredCheckbox$1||(hasRequiredCheckbox$1=1,function(e){function t(t,r){return"paragraph_open"===t[r].type&&"inline"===t[r+1].type&&t[r+1].content.match(e.pattern)}Object.defineProperty(e,"__esModule",{value:!0}),e.checkboxReplace=e.CheckboxTokenType=e.pattern=void 0,e.pattern=/^\[(X|\s|\_|\-)\]\s(.*)/i,e.CheckboxTokenType={Checkbox:"checkbox",CheckboxOpen:"checkbox_open",CheckboxClose:"checkbox_close",CheckboxInput:"checkbox_input",CheckboxLabel:"checkbox_label",CheckboxLabelOpen:"checkbox_label_open",CheckboxLabelClose:"checkbox_label_close"},e.checkboxReplace=function(r,n){let i=0;const o=Object.assign({divClass:"checkbox",idPrefix:"checkbox",disabled:!0},n),s=function(t,r,n){let s=!1;const a=r[1];return"X"!==a&&"x"!==a||(s=!0),function(t,r,n,s){let a;const l=[];a=new t.Token(e.CheckboxTokenType.CheckboxOpen,"div",1),a.block=!0,a.map=t.tokens[s].map,a.attrs=[["class",o.divClass]],l.push(a);const c=o.idPrefix+i;return i+=1,a=new t.Token(e.CheckboxTokenType.CheckboxInput,"input",0),a.block=!0,a.map=t.tokens[s].map,a.attrs=[["type","checkbox"],["id",c]],o.disabled&&a.attrSet("disabled",""),!0===r&&a.attrSet("checked","true"),l.push(a),a=new t.Token(e.CheckboxTokenType.CheckboxLabelOpen,"label",1),a.attrs=[["for",c]],l.push(a),a=t.md.parseInline(n,t.env)[0],l.push(a),a=new t.Token(e.CheckboxTokenType.CheckboxLabelClose,"label",-1),a.block=!0,a.map=t.tokens[s].map,l.push(a),a=new t.Token(e.CheckboxTokenType.CheckboxClose,"div",-1),a.block=!0,a.map=t.tokens[s].map,l.push(a),l}(t,s,r[2],n)};return function(e){const r=e.tokens;for(let n=0;n<r.length;n++){const i=t(r,n);i&&r.splice(n,3,...s(e,i,n))}}}}(checkbox$2)),checkbox$2}function requireCheckbox(){if(hasRequiredCheckbox)return checkbox_2;hasRequiredCheckbox=1;const e=requireCheckbox$1();return checkbox_2=(t,r)=>(t.core.ruler.push("checkbox",(0,e.checkboxReplace)(t,r)),t)}var checkboxExports=requireCheckbox();const checkboxPlugin=getDefaultExportFromCjs(checkboxExports);var CheckboxNode,CheckboxNode2;CheckboxNode2=CheckboxNode||(CheckboxNode={}),CheckboxNode2.Checkbox="checkbox",CheckboxNode2.Input="checkbox_input",CheckboxNode2.Label="checkbox_label";const CheckboxAttr={Class:"class",Type:"type",Id:"id",Checked:"checked",For:"for"},idPrefix="yfm-editor-checkbox",b$s=cn("checkbox"),checkboxType=nodeTypeFactory(CheckboxNode.Checkbox),checkboxLabelType=nodeTypeFactory(CheckboxNode.Label),checkboxInputType=nodeTypeFactory(CheckboxNode.Input),getAttrs$3=e=>e.attrs?Object.fromEntries(e.attrs):{},parserTokens$4={[CheckboxNode.Checkbox]:{name:CheckboxNode.Checkbox,type:"block",getAttrs:getAttrs$3},[CheckboxNode.Input]:{name:CheckboxNode.Input,type:"node",getAttrs:getAttrs$3},[CheckboxNode.Label]:{name:CheckboxNode.Label,type:"block",getAttrs:getAttrs$3}},DEFAULT_LABEL_PLACEHOLDER="Checkbox",getSchemaSpecs$4=(e,t)=>({[CheckboxNode.Checkbox]:{group:"block checkbox",content:`${CheckboxNode.Input} ${CheckboxNode.Label}`,selectable:!0,allowSelection:!1,attrs:{[CheckboxAttr.Class]:{default:b$s()}},parseDOM:[{tag:"div.checkbox",priority:100,getContent(e,t){const r=e.querySelector("input[type=checkbox]"),n=e.querySelector("label[for]"),i=r?.checked?"true":null,o=n?.textContent;return Fragment.from([checkboxInputType(t).create({[CheckboxAttr.Checked]:i}),checkboxLabelType(t).create(null,o?t.text(o):null)])}},{tag:"input[type=checkbox]",priority:50,getContent(e,t){const r=e.id,n=e.checked?"true":null,i=e.parentNode?.querySelector(`label[for=${r}]`)?.textContent;return Fragment.from([checkboxInputType(t).create({[CheckboxAttr.Checked]:n}),checkboxLabelType(t).create(null,i?t.text(i):null)])}}],toDOM:e=>["div",e.attrs,0],complex:"root"},[CheckboxNode.Input]:{group:"block checkbox",parseDOM:[],attrs:{[CheckboxAttr.Type]:{default:"checkbox"},[CheckboxAttr.Id]:{default:null},[CheckboxAttr.Checked]:{default:null}},toDOM:e=>["div",e.attrs],selectable:!1,allowSelection:!1,complex:"leaf"},[CheckboxNode.Label]:{content:"inline*",group:"block checkbox",parseDOM:[{tag:`span[class="${b$s("label")}"]`,getAttrs:e=>({[CheckboxAttr.For]:e.getAttribute(CheckboxAttr.For)||""})},{tag:"input[type=checkbox] ~ label[for]",ignore:!0,consuming:!0}],attrs:{[CheckboxAttr.For]:{default:null}},escapeText:!1,placeholder:{content:t?.[CheckboxNode.Label]??e?.checkboxLabelPlaceholder??DEFAULT_LABEL_PLACEHOLDER,alwaysVisible:!0},toDOM:e=>["span",{...e.attrs,class:b$s("label")},0],selectable:!1,allowSelection:!1,disableGapCursor:!0,complex:"leaf"}}),serializerTokens$3={[CheckboxNode.Checkbox]:(e,t)=>{e.renderInline(t),e.closeBlock(t)},[CheckboxNode.Input]:(e,t)=>{const r="true"===t.attrs[CheckboxAttr.Checked];e.write(`[${r?"X":" "}] `)},[CheckboxNode.Label]:(e,t,r,n)=>{t.content.size&&0!==t.textContent.trim().length||0===n?(n||e.write("[ ] "),e.renderInline(t)):e.write(getPlaceholderContent(t))}},CheckboxSpecs=(e,t)=>{const r=getSchemaSpecs$4(t,e.context.get("placeholder"));e.configureMd(e=>e.use(checkboxPlugin,{idPrefix:idPrefix,divClass:b$s()})).addNode(CheckboxNode.Checkbox,()=>({spec:r[CheckboxNode.Checkbox],toMd:serializerTokens$3[CheckboxNode.Checkbox],fromMd:{tokenSpec:parserTokens$4[CheckboxNode.Checkbox]},view:t.checkboxView})).addNode(CheckboxNode.Input,()=>({spec:r[CheckboxNode.Input],toMd:serializerTokens$3[CheckboxNode.Input],fromMd:{tokenSpec:parserTokens$4[CheckboxNode.Input]},view:t.inputView})).addNode(CheckboxNode.Label,()=>({spec:r[CheckboxNode.Label],toMd:serializerTokens$3[CheckboxNode.Label],fromMd:{tokenSpec:parserTokens$4[CheckboxNode.Label],tokenName:"checkbox_label"},view:t.labelView}))},createCheckbox=(e,t)=>checkboxType(e).create({},[checkboxInputType(e).create(),checkboxLabelType(e).create({},t)]),addCheckboxCmd=(e,t)=>{function r(t,r,n){return t.insert(r,createCheckbox(e.schema,n)),t.setSelection(TextSelection.create(t.doc,r+3))}if(isNodeSelection(e.selection)&&rootOrNonComplex(e.selection.node)){const n=e.selection.to;return t?.(r(e.tr,n).scrollIntoView()),!0}const n=get$Cursor(e.selection);if(!n)return!1;if(n.parent.type===checkboxLabelType(e.schema)&&n.node(n.depth-1).type===checkboxType(e.schema)){const i=n.after(n.depth-1);return t?.(r(e.tr,i).scrollIntoView()),!0}if(!rootOrNonComplex(n.parent))return!1;if(!t)return!0;const{tr:i}=e;if(n.parent.type===pType(e.schema)){const t=n.before(),r=n.after();i.replaceWith(t,r,createCheckbox(e.schema,n.parent.content)),i.setSelection(TextSelection.create(i.doc,n.pos+2))}else r(i,n.after());return t(i.scrollIntoView()),!0},addCheckbox=()=>({isEnable:addCheckboxCmd,run:addCheckboxCmd});function rootOrNonComplex(e){const{complex:t}=e.type.spec;return!t||"root"===t}class CheckboxInputView{static create=(e,t,r)=>new this(e,t,r);dom;_node;_view;_getPos;constructor(e,t,r){this._node=e,this._view=t,this._getPos=r,this.dom=this._createDomElem(),this._applyNodeAttrsToDomElem()}ignoreMutation(){return!0}update(e){return e.type===this._node.type&&(this._node=e,this._applyNodeAttrsToDomElem(),!0)}destroy(){this.dom.removeEventListener("click",this._onInputClick)}_createDomElem(){const e=document.createElement("input");return e.setAttribute("class",b$s("input")),e.addEventListener("click",this._onInputClick),e}_applyNodeAttrsToDomElem(){const{dom:e,_node:t}=this;for(const[n,i]of Object.entries(t.attrs))i?e.setAttribute(n,i):e.removeAttribute(n);const r="true"===t.attrs[CheckboxAttr.Checked];this.dom.checked=r}_onInputClick=e=>{if(e.target instanceof HTMLInputElement){const{checked:t}=e.target,r=this._getPos();void 0!==r&&this._view.dispatch(this._view.state.tr.setNodeAttribute(r,CheckboxAttr.Checked,t?"true":null))}this._view.focus()}}const splitCheckbox=e=>(t,r)=>{const{$from:n,$to:i}=t.selection,{schema:o}=t,s=findParentNodeOfType(checkboxLabelType(o))(t.selection);if(!s)return!1;const a=findParentNodeOfType(checkboxType(o))(t.selection);if(0===s.node.content.size&&a)return r?.(t.tr.replaceWith(a.pos,a.pos+a.node.nodeSize,pType(o).create()).scrollIntoView()),!0;if(n.pos===i.pos){const{tr:i}=t,a=Fragment.from(n.parent.cut(n.parentOffset).content),l=e?pType(t.schema).create({},a):checkboxType(o).create({},[checkboxInputType(o).create(),checkboxLabelType(o).create({},a)]);return i.insert(n.after(),[l]),i.replace(s.start+n.parentOffset,s.pos+s.node.nodeSize),i.setSelection(new TextSelection(i.doc.resolve(i.selection.$from.after()+(e?2:4)))),r?.(i),!0}return!1},removeCheckbox=(e,t)=>{const r=findParentNodeOfType(checkboxLabelType(e.schema))(e.selection),n=findParentNodeOfType(checkboxType(e.schema))(e.selection),{selection:i}=e,{from:o,to:s}=i;if(!r||!n)return!1;if(o-r.pos-2<0&&o===s&&!isWholeSelection(i)){const{tr:i}=e;return t?.(i.replaceWith(n.pos,n.pos+n.node.nodeSize,pType(e.schema).create(null,r.node.content)).setSelection(new TextSelection(i.doc.resolve(e.selection.from-2)))),!0}return!1},keymapPlugin=()=>keymap$1({Enter:splitCheckbox(),Backspace:removeCheckbox,"Shift-Enter":splitCheckbox(!0)}),fixPastePlugin=()=>new Plugin({props:{transformPasted(e){const{firstChild:t}=e.content;return t&&t.type===checkboxType(t.type.schema)?new Slice(e.content,0,0):e}}}),checkboxAction="addCheckbox",Checkbox=(e,t)=>{e.use(CheckboxSpecs,{...t,inputView:()=>CheckboxInputView.create}),e.addPlugin(keymapPlugin,e.Priority.High).addPlugin(fixPastePlugin).addAction(checkboxAction,()=>addCheckbox()).addInputRules(({schema:e})=>({rules:[nodeInputRule(/^\[(\s?)\]\s$/,checkboxType(e).createAndFill({},checkboxInputType(e).create()),2)]}))};var dist$1={},hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,function(e){var t,r,n=Object.defineProperty;function i(e,r){let n=0,i=r-1;for(;i>=0&&e.charCodeAt(i)===t.Escape;)n++,i--;return n%2==1}n(e,"__esModule",{value:!0}),((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(e,{colorPlugin:()=>o,default:()=>s}),(r=t||(t={}))[r.OpenColorName=123]="OpenColorName",r[r.CloseColorName=125]="CloseColorName",r[r.OpenContent=40]="OpenContent",r[r.CloseContent=41]="CloseContent",r[r.Escape=92]="Escape";var o=(e,{defaultClassName:r="yfm-colorify",inline:n=!1,escape:o=!1}={})=>{e.inline.ruler.before("emphasis","color",(e,s)=>{const a=e.posMax;if(e.src.charCodeAt(e.pos)!==t.OpenColorName)return!1;if(o&&i(e.src,e.pos))return!1;const l=e.pos+1,c=((e,r,n,o=!1)=>{let s,a=1,l=!1,c=-1;const u=e.posMax,d=e.pos;for(e.pos=r+1;e.pos<u;){const r=e.src.charCodeAt(e.pos);if(!(o&&i(e.src,e.pos)||r!==t.CloseColorName)&&(a--,0===a)){l=!0;break}if(s=e.pos,e.md.inline.skipToken(e),!(o&&i(e.src,e.pos)||r!==t.OpenColorName)){if(s!==e.pos-1)return e.pos=d,-1;a++}}return l&&(c=e.pos),e.pos=d,c})(e,e.pos,0,o);if(c<0)return!1;const u=e.src.substring(l,c),d=c+2,p=((e,r,n=!1)=>{let o=r;const{posMax:s,src:a}=e;if(o>=s||a.charCodeAt(o)!==t.OpenContent)return-1;o++;let l=1;for(;o<s;){const e=a.charCodeAt(o);if(n&&i(a,o))o++;else{if(e===t.CloseContent){if(l--,0===l)return o}else e===t.OpenContent&&l++;o++}}return-1})(e,c+1,o);if(p<0)return!1;if(!s){e.pos=d,e.posMax=p;const t=e.push("color_open","span",1);t.attrs=[["class",[`${r}`,`${r}--${u}`].join(" ")]],n&&t.attrs.push(["style",`color: ${u};`]),t.info=u,e.md.inline.tokenize(e),e.push("color_close","span",-1).info=u}return e.pos=p+1,e.posMax=a,!0})},s=o}(dist$1)),dist$1}var distExports=requireDist();const color=distExports.colorPlugin,colorMarkName="color",colorClassName="yfm-colorify",domColorAttr="data-color",colorType=markTypeFactory(colorMarkName);function getColorName(e){return e.match(/^(yfm|md)-colorify--(\w+)$/)?.[2]}const ColorSpecs=(e,t)=>{const{validateClassNameColorName:r,parseStyleColorValue:n}=t,i=e=>e.use(color,{escape:!0,defaultClassName:colorClassName});e.configureMd(e=>e.use(i,{defaultClassName:colorClassName,inline:!1})).addMark(colorMarkName,()=>({spec:{attrs:{[colorMarkName]:{}},parseDOM:[{tag:"span",preserveWhitespace:!1,getAttrs(e){if("string"==typeof e)return!1;for(const t of Array.from(e.classList)){const e=getColorName(t);if(e&&(r?.(e)??1))return{[colorMarkName]:e}}return!1}},{style:"color",preserveWhitespace:!1,getAttrs(e){if("string"!=typeof e)return!1;const t=n?.(e);return!!t&&{[colorMarkName]:t}}}],toDOM(e){const t=e.attrs[colorMarkName];return["span",{class:[colorClassName,`${colorClassName}--${t}`].join(" "),[domColorAttr]:t},0]}},fromMd:{tokenSpec:{name:colorMarkName,type:"mark",getAttrs:e=>({[colorMarkName]:e.info})}},toMd:{open:(e,t)=>(e.escapeCharacters=["(",")"],`{${t.attrs[colorMarkName]}}(`),close:e=>(e.escapeCharacters=void 0,")"),mixable:!0,expelEnclosingWhitespace:!0}}))},colorAction="colorify";var Colors,Colors2;Colors2=Colors||(Colors={}),Colors2.Gray="gray",Colors2.Yellow="yellow",Colors2.Orange="orange",Colors2.Red="red",Colors2.Green="green",Colors2.Blue="blue",Colors2.Violet="violet";const chainAND=(...e)=>(t,r,n)=>{let i=t.tr;for(const o of e)if(!o({...t,...i,tr:i},r?e=>{i=e}:void 0,n))return!1;return r?.(i),!0},COLORS=[Colors.Gray,Colors.Yellow,Colors.Orange,Colors.Red,Colors.Green,Colors.Blue,Colors.Violet],validateClassNameColorName=e=>COLORS.includes(e),parseStyleColorValue=e=>{switch(e){case"gray":case"grey":case"lightgray":case"lightgrey":case"darkgray":case"darkgrey":return Colors.Gray;case"yellow":case"lightyellow":return Colors.Yellow;case"orange":case"darkorange":return Colors.Orange;case"red":case"darkred":return Colors.Red;case"green":case"lightgreen":case"darkgreen":return Colors.Green;case"blue":case"lightblue":case"mediumblue":case"darkblue":return Colors.Blue;case"violet":case"darkviolet":case"purple":case"mediumpurple":return Colors.Violet;default:return null}},Color=e=>{e.use(ColorSpecs,{validateClassNameColorName:validateClassNameColorName,parseStyleColorValue:parseStyleColorValue}),e.addAction(colorAction,({schema:e})=>{const t=colorType(e);return{isActive:e=>Boolean(isMarkActive(e,t)),isEnable:toggleMark(t),run:(e,r,n,i)=>{const o=i,s=isMarkActive(e,t);return o&&o[colorMarkName]?s?chainAND(toggleMark(t),toggleMark(t,o))(e,r):toggleMark(t,o)(e,r):!s||toggleMark(t,o)(e,r)},meta:e=>t.isInSet(e.selection.$to.marks())?.attrs[colorMarkName]}})};var render$2,hasRequiredRender,replace$3,hasRequiredReplace,normalize_opts,hasRequiredNormalize_opts,bare,hasRequiredBare;function requireRender(){return hasRequiredRender?render$2:(hasRequiredRender=1,render$2=function(e,t){return e[t].content})}function requireReplace(){return hasRequiredReplace?replace$3:(hasRequiredReplace=1,replace$3=function(e,t,r,n,i){var o=e.utils.arrayReplaceAt,s=e.utils.lib.ucmicro,a=new RegExp([s.Z.source,s.P.source,s.Cc.source].join("|"));function l(e,n,o){var s,l=0,c=[];return e.replace(i,function(n,i,u){var d;if(r.hasOwnProperty(n)){if(d=r[n],i>0&&!a.test(u[i-1]))return;if(i+n.length<u.length&&!a.test(u[i+n.length]))return}else d=n.slice(1,-1);i>l&&((s=new o("text","",0)).content=e.slice(l,i),c.push(s)),(s=new o("emoji","",0)).markup=d,s.content=t[d],c.push(s),l=i+n.length}),l<e.length&&((s=new o("text","",0)).content=e.slice(l),c.push(s)),c}return function(e){var t,r,i,s,a,c=e.tokens,u=0;for(r=0,i=c.length;r<i;r++)if("inline"===c[r].type)for(t=(s=c[r].children).length-1;t>=0;t--)"link_open"!==(a=s[t]).type&&"link_close"!==a.type||"auto"===a.info&&(u-=a.nesting),"text"===a.type&&0===u&&n.test(a.content)&&(c[r].children=s=o(s,t,l(a.content,a.level,e.Token)))}})}function requireNormalize_opts(){return hasRequiredNormalize_opts?normalize_opts:(hasRequiredNormalize_opts=1,normalize_opts=function(e){var t,r=e.defs;e.enabled.length&&(r=Object.keys(r).reduce(function(t,n){return e.enabled.indexOf(n)>=0&&(t[n]=r[n]),t},{})),t=Object.keys(e.shortcuts).reduce(function(t,n){return r[n]?Array.isArray(e.shortcuts[n])?(e.shortcuts[n].forEach(function(e){t[e]=n}),t):(t[e.shortcuts[n]]=n,t):t},{});var n,i=Object.keys(r);n=0===i.length?"^$":i.map(function(e){return":"+e+":"}).concat(Object.keys(t)).sort().reverse().map(function(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}).join("|");var o=RegExp(n),s=RegExp(n,"g");return{defs:r,shortcuts:t,scanRE:o,replaceRE:s}})}function requireBare(){if(hasRequiredBare)return bare;hasRequiredBare=1;var e=requireRender(),t=requireReplace(),r=requireNormalize_opts();return bare=function(n,i){var o=r(n.utils.assign({},{defs:{},shortcuts:{},enabled:[]},i||{}));n.renderer.rules.emoji=e,n.core.ruler.after("linkify","emoji",t(n,o.defs,o.shortcuts,o.scanRE,o.replaceRE))}}var bareExports=requireBare();const emojiPlugin=getDefaultExportFromCjs(bareExports),emojiTokenName="emoji",emojiNodeName=emojiTokenName,emojiNodeType=nodeTypeFactory(emojiNodeName),EmojiNodeAttrs={Markup:"markup"},markupDataAttribute="data-emoji",EmojiConsts={NodeName:emojiNodeName,NodeAttrs:EmojiNodeAttrs,nodeType:emojiNodeType},EmojiSpecsExtension=(e,t)=>{e.configureMd(e=>e.use(emojiPlugin,t)),e.addNode(EmojiConsts.NodeName,()=>({spec:{attrs:{[EmojiConsts.NodeAttrs.Markup]:{}},atom:!0,inline:!0,content:"text*",group:"inline",selectable:!1,parseDOM:[{tag:`span[${markupDataAttribute}]`,priority:100,getAttrs:e=>{if(e instanceof HTMLElement){const t=e.getAttribute(markupDataAttribute);if(t)return{[EmojiConsts.NodeAttrs.Markup]:t}}return!1}}],toDOM:e=>{const t=e.attrs[EmojiConsts.NodeAttrs.Markup];return["span",{contentEditable:!1,[markupDataAttribute]:t},0]}},fromMd:{tokenName:emojiTokenName,tokenSpec:{name:EmojiConsts.NodeName,type:"block",noCloseToken:!0,getAttrs:e=>({[EmojiConsts.NodeAttrs.Markup]:e.markup})}},toMd:(e,t)=>{e.text(`:${t.attrs[EmojiConsts.NodeAttrs.Markup]}:`,!1)}}))},EmojiSpecs=Object.assign(EmojiSpecsExtension,EmojiConsts),EmojiInput=(e,t)=>{const{defs:r,shortcuts:n}=t;if(r&&n){const t=[],i={};for(const[e,r]of Object.entries(n)){if(!r)continue;const n=[].concat(r);for(const r of n)t.push(escapeRegExp(r)),i[r]=e}if(t.length){const n=new RegExp(`(?:^|\\s)(${t.join("|")})\\s$`,"g");e.addInputRules(()=>({rules:[new InputRule(n,(e,t,n,o)=>{if(hasCodeMark(e,t,n,o))return null;const s=t[1],a=i[s],l=r[a];if(l){const{tr:r,schema:i}=e,s=n+(/^\s/.test(t[0])?1:0),c=o;return r.replaceWith(s,c,[EmojiConsts.nodeType(i).create({[EmojiConsts.NodeAttrs.Markup]:a},i.text(l)),i.text(" ")])}return null})]}))}}},b$r=cn("emoji-suggest"),placement$6=["bottom-start","top-start","bottom-end","top-end"],ITEM_HEIGHT$1=28,VISIBLE_ITEMS_COUNT$1=10,MAX_LIST_HEIGHT$1=ITEM_HEIGHT$1*VISIBLE_ITEMS_COUNT$1;function calcListHeight$1(e){if(!(e<=0))return Math.min(MAX_LIST_HEIGHT$1,e*ITEM_HEIGHT$1)}const EmojiSuggestComponent=({anchorElement:e,currentIndex:t,items:r,onClick:n,onOpenChange:i})=>e?jsxRuntimeExports.jsx(Popup,{open:Boolean(r.length),anchorElement:e,placement:placement$6,onOpenChange:i,children:jsxRuntimeExports.jsx("div",{className:b$r(),children:jsxRuntimeExports.jsx(List,{virtualized:!0,items:r,sortable:!1,filterable:!1,itemHeight:ITEM_HEIGHT$1,itemsHeight:calcListHeight$1(r.length),renderItem:renderItem$1,deactivateOnLeave:!1,activeItemIndex:t,onItemClick:(e,t)=>n(t),className:b$r("list"),itemClassName:b$r("list-item")})})}):null;function renderItem$1({origName:e,symbol:t,origShortcuts:r}){return jsxRuntimeExports.jsxs("div",{className:b$r("item"),children:[jsxRuntimeExports.jsxs("div",{className:b$r("item-info"),children:[jsxRuntimeExports.jsx("div",{className:b$r("item-icon"),children:t}),jsxRuntimeExports.jsxs("div",{className:b$r("item-name"),children:[":",e,":"]})]}),void 0!==r&&jsxRuntimeExports.jsx("div",{className:b$r("item-shortcuts"),children:r.slice(0,4).map(t=>jsxRuntimeExports.jsx("span",{className:b$r("item-shortcut"),children:t},`${e}_${t}`))})]},e)}function render$1(e){return jsxRuntimeExports.jsx(ErrorLoggerBoundary,{children:jsxRuntimeExports.jsx(EmojiSuggestComponent,{...e})})}const DecoClassName$1="pm-emoji-input";function findDecoElem$1(e){const t=e??document;return t.getElementsByClassName(DecoClassName$1).item(0)??t.getElementsByClassName(AutocompleteDecoClassName).item(0)}const emptyArray=new Array(0);class EmojiHandler{_emojis;_emojiCarousel;_view;_anchor=null;_popupCloser;_suggestProps;_suggestRenderItem;constructor({defs:e,shortcuts:t={}}){this._emojis=Object.entries(e).map(([e,r])=>{const n={symbol:r,origName:e,name:e.toLowerCase()},i=t[e];return i&&(n.origShortcuts=emptyArray.concat(i),n.shortcuts=n.origShortcuts.map(e=>e.startsWith(":")?e.slice(1):e)),n})}onOpen(e){return this.findAnchor(),this._anchor?(this._popupCloser=new AutocompletePopupCloser(e.view),this.updateState(e),this.filterActions(),this.render(),!0):(this.closeAutocomplete(e.view),!0)}onFilter(e){if(e.filter?.endsWith("  "))return this.closeAutocomplete(e.view),!0;this.updateState(e);const t=this.filterActions(e.filter?.trim());return this.render(),t&&this.closeAutocomplete(e.view),!0}onArrow(e){if(this.updateState(e),!this._emojiCarousel)return!1;switch(e.kind){case ActionKind.up:this._emojiCarousel.prev();break;case ActionKind.down:this._emojiCarousel.next();break;default:return!1}return this.render(),!0}onEnter(e){return this.updateState(e),this.select(),!0}onClose(e){return this.updateState(e),this.clear(),!0}onDestroy(){this.clear()}closeAutocomplete(e){setTimeout(()=>{closeAutocomplete(e)})}select(){const{_view:e}=this;if(!e)return;const t=this._emojiCarousel?.currentItem;if(!t)return;const r=getAutocompleteState(e.state);if(!r||!r.active)return;const{range:n}=r,{tr:i,schema:o}=e.state;e.dispatch(i.replaceWith(n.from,n.to,createEmoji(o,t)).scrollIntoView()),e.focus()}filterActions(e){const t=this._emojiCarousel?.currentItem;let r=this._emojis,n=!1;if(e&&(r=filterEmojis(r,e),n=!r.length&&needToHide$1(this._emojis,e)),this._emojiCarousel=new ArrayCarousel(r),t){const e=this._emojiCarousel.array.findIndex(e=>e===t);-1!==e&&(this._emojiCarousel.currentIndex=e)}return n}render(){this.findAnchor();const e=this._emojiCarousel?.array??[];this._suggestProps={anchorElement:this._anchor,currentIndex:this._emojiCarousel?.currentIndex,items:e,onClick:this.onItemClick,onOpenChange:this._popupCloser?.popupOpenChangeHandler},this._suggestRenderItem=this._suggestRenderItem??this.createMenuRenderItem(),this._suggestRenderItem.rerender()}onItemClick=e=>{this._emojiCarousel&&(this._emojiCarousel.currentIndex=e,this.select()),this._view?.focus()};updateState({view:e}){this._view=e}clear(){this._view=void 0,this._anchor=null,this._emojiCarousel=void 0,this._popupCloser?.cancelTimer(),this._popupCloser=void 0,this._suggestProps=void 0,this._suggestRenderItem?.remove(),this._suggestRenderItem=void 0}createMenuRenderItem(){return getReactRendererFromState(this._view.state).createItem("emoji_suggest",()=>this._suggestProps?render$1(this._suggestProps):null)}findAnchor(){this._anchor=findDecoElem$1(this._view?.dom)}}function createEmoji(e,t){return EmojiConsts.nodeType(e).create({[EmojiConsts.NodeAttrs.Markup]:t.name},e.text(t.symbol))}function filterEmojis(e,t){if(!t)return e;const r=t.toLowerCase(),n=[],i=[];for(const o of e)o.shortcuts?.some(e=>e.startsWith(t))?n.push(o):o.name.startsWith(r)&&i.push(o);return n.concat(i)}const CHARS_TO_HIDE$1=4;function needToHide$1(e,t){let r=1;do{if(filterEmojis(e,t.slice(0,t.length-r)).length)break;r++}while(r<t.length&&r<CHARS_TO_HIDE$1);return r>=CHARS_TO_HIDE$1}const emojiSuggestActionName="openEmojiSuggest",EmojiSuggest=(e,{defs:t,shortcuts:r})=>{if(!t)return;e.context.has("autocomplete")||e.use(Autocomplete);const n={trigger:{name:"emoji",trigger:/(?:^|\s)(:)$/,allArrowKeys:!1,cancelOnFirstSpace:!0,decorationAttrs:{class:DecoClassName$1}},handler:new EmojiHandler({defs:t,shortcuts:r})};e.context.get("autocomplete").add(n),e.addAction(emojiSuggestActionName,()=>({isEnable:e=>e.selection.empty,run:(e,t,r,n)=>openAutocomplete(r,":",n?.text)}))},EmojiExtension=(e,t)=>{e.use(EmojiSpecs,t),e.use(EmojiInput,t),e.use(EmojiSuggest,t)},Emoji$1=Object.assign(EmojiExtension,EmojiConsts);for(var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;var decode=function(e){var t,r,n,i,o,s=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),u=new Uint8Array(c);for(t=0;t<a;t+=4)r=lookup[e.charCodeAt(t)],n=lookup[e.charCodeAt(t+1)],i=lookup[e.charCodeAt(t+2)],o=lookup[e.charCodeAt(t+3)],u[l++]=r<<2|n>>4,u[l++]=(15&n)<<4|i>>2,u[l++]=(3&i)<<6|63&o;return c},monospace_1,hasRequiredMonospace;function requireMonospace(){return hasRequiredMonospace?monospace_1:(hasRequiredMonospace=1,monospace_1=e=>{function t(e,t){let r;const n=[];for(let i=0;i<t.length;i++){const o=t[i];if(35!==o.marker)continue;if(-1===o.end)continue;const s=t[o.end];r=e.tokens[o.token],r.type="monospace_open",r.tag="samp",r.nesting=1,r.markup="##",r.content="",r=e.tokens[s.token],r.type="monospace_close",r.tag="samp",r.nesting=-1,r.markup="##",r.content="","text"===e.tokens[s.token-1].type&&"#"===e.tokens[s.token-1].content&&n.push(s.token-1)}for(;n.length;){const t=n.pop();if("number"==typeof t){let n=t+1;for(;n<e.tokens.length&&"monospace_close"===e.tokens[n].type;)n++;n--,t!==n&&(r=e.tokens[n],e.tokens[n]=e.tokens[t],e.tokens[t]=r)}}}e.inline.ruler.before("emphasis","monospace",(e,t)=>{let r;const n=e.pos,i=e.src.charCodeAt(n);if(t)return!1;if(35!==i)return!1;const o=e.scanDelims(e.pos,!0);let s=o.length;const a=String.fromCharCode(i);if(s<2)return!1;s%2&&(r=e.push("text","",0),r.content=a,s--);for(let l=0;l<s;l+=2)r=e.push("text","",0),r.content=a+a,(o.can_open||o.can_close)&&e.delimiters.push({marker:i,length:0,token:e.tokens.length-1,end:-1,open:o.can_open,close:o.can_close});return e.pos+=o.length,!0}),e.inline.ruler2.before("emphasis","monospace",e=>{const r=e.tokens_meta,n=(e.tokens_meta||[]).length;t(e,e.delimiters);for(let i=0;i<n;i++){const n=r[i];n&&n.delimiters&&t(e,n.delimiters)}return!0})})}var monospaceExports=requireMonospace();const yfmPlugin$1=getDefaultExportFromCjs(monospaceExports),monospaceMarkName="monospace",monospaceType=markTypeFactory(monospaceMarkName),MonospaceSpecs=e=>{e.configureMd(e=>e.use(yfmPlugin$1,{log:logExports.log})).addMark(monospaceMarkName,()=>({spec:{parseDOM:[{tag:"samp"}],toDOM:()=>["samp"]},fromMd:{tokenSpec:{name:monospaceMarkName,type:"mark"}},toMd:{open:"##",close:"##",mixable:!0,expelEnclosingWhitespace:!0}}))},videoNodeName="video";var VideoAttr,VideoAttr2;VideoAttr2=VideoAttr||(VideoAttr={}),VideoAttr2.Service="service",VideoAttr2.VideoID="videoid";var utils$2={},browser$1={exports:{}},hasRequiredBrowser,hasRequiredUtils$2;function requireBrowser(){if(hasRequiredBrowser)return browser$1.exports;hasRequiredBrowser=1;var e,t,r=browser$1.exports={};function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(e===setTimeout)return setTimeout(t,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(i){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:n}catch(r){e=n}try{t="function"==typeof clearTimeout?clearTimeout:i}catch(r){t=i}}();var s,a=[],l=!1,c=-1;function u(){l&&s&&(l=!1,s.length?a=s.concat(a):c=-1,a.length&&d())}function d(){if(!l){var e=o(u);l=!0;for(var r=a.length;r;){for(s=a,a=[];++c<r;)s&&s[c].run();c=-1,r=a.length}s=null,l=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===i||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{return t(e)}catch(r){try{return t.call(null,e)}catch(n){return t.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}return r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];a.push(new p(e,t)),1!==a.length||l||o(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0},browser$1.exports}function requireUtils$2(){return hasRequiredUtils$2||(hasRequiredUtils$2=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.append=e.generateID=e.arriage=e.nestedCloseTokenIdxFactory=void 0;const t=requireSource(),r=requireBrowser();e.nestedCloseTokenIdxFactory=(e,r,n)=>(i,o,s,a)=>{let l=0,c=o;for(;c<i.length;){if(r(i,c))l++;else if(n(i,c)){if(0===l)return c;l--}c++}return a.error(`${e} must be closed${s?` in ${(0,t.bold)(s)}`:""}`),null},e.arriage="win32"===r.platform?"\r\n":"\n",e.generateID=function(){return Math.random().toString(36).substr(2,8)},e.append=function(e,t,...r){if(e[t])return r.forEach(r=>e[t].push(r)),e;e[t]=r}}(utils$2)),utils$2}var parsers={},hasRequiredParsers;function requireParsers(){if(hasRequiredParsers)return parsers;hasRequiredParsers=1,Object.defineProperty(parsers,"__esModule",{value:!0}),parsers.parseVideoUrl=parsers.rutubeParser=parsers.vkParser=parsers.yandexParser=parsers.mfrParser=parsers.preziParser=parsers.vineParser=parsers.vimeoParser=parsers.youtubeParser=void 0;const e=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;function t(t){const r=t.match(e);return r&&11===r[7].length?r[7]:t}parsers.youtubeParser=t;const r=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/;function n(e){const t=e.match(r);return t&&"string"==typeof t[3]?t[3]:e}parsers.vimeoParser=n;const i=/^http(?:s?):\/\/(?:www\.)?vine\.co\/v\/([a-zA-Z0-9]{1,13}).*/;function o(e){const t=e.match(i);return t&&11===t[1].length?t[1]:e}parsers.vineParser=o;const s=/^https:\/\/prezi.com\/(.[^/]+)/;function a(e){const t=e.match(s);return t?t[1]:e}parsers.preziParser=a;const l=/^http(?:s?):\/\/(?:www\.)?mfr\.osf\.io\/render\?url=http(?:s?):\/\/osf\.io\/([a-zA-Z0-9]{1,5})\/\?action=download/;function c(e){const t=e.match(l);return t?t[1]:e}parsers.mfrParser=c;const u=/^https:\/\/runtime.video.cloud.yandex.net\/player\/video\/([a-zA-Z0-9]+)/;function d(e){const t=e.match(u);return t?t[1]:e}parsers.yandexParser=d;const p=/^https:\/\/vk\.com\/video_ext\.php\?(.*)/;function h(e){const t=e.match(p);if(t){const e=new URLSearchParams(t[1]),r=[];return e.forEach((e,t)=>{r.push(`${t}=${encodeURIComponent(e)}`)}),r.join("&")}return e}parsers.vkParser=h;const f=/^https:\/\/rutube\.ru\/video\/([a-zA-Z0-9]+)\/?/;function m(e){const t=e.match(f);return t?t[1]:e}parsers.rutubeParser=m;const g={osf:{extract:c},prezi:{extract:a},vimeo:{extract:n},vine:{extract:o},yandex:{extract:d},youtube:{extract:t},vk:{extract:h,csp:{"frame-src":["https://vk.com/","https://login.vk.com/"]}},rutube:{extract:m,csp:{"frame-src":["https://rutube.ru/play/embed/"]}},url:{extract:e=>e}};return parsers.parseVideoUrl=function(e,t){let r="";const n=e.toLowerCase(),i=g[n];if(!i)return!1;const{extract:o,csp:s}=i;return r=o(t),")"===r&&(r=""),[r,s]},parsers}var _const={},utils$1={},hasRequiredUtils$1,hasRequired_const,video_1,hasRequiredVideo;function requireUtils$1(){return hasRequiredUtils$1||(hasRequiredUtils$1=1,Object.defineProperty(utils$1,"__esModule",{value:!0}),utils$1.videoUrl=void 0,utils$1.videoUrl=(e,t,r)=>{switch(e){case"youtube":return`https://www.youtube.com/embed/${t}`;case"vimeo":return`https://player.vimeo.com/video/${t}`;case"vine":return`https://vine.co/v/${t}/embed/${r.vine.embed}`;case"prezi":return`https://prezi.com/embed/${t}/?bgcolor=ffffff&amp;lock_to_path=0&amp;autoplay=0&amp;autohide_ctrls=0&amp;landing_data=bHVZZmNaNDBIWnNjdEVENDRhZDFNZGNIUE43MHdLNWpsdFJLb2ZHanI5N1lQVHkxSHFxazZ0UUNCRHloSXZROHh3PT0&amp;landing_sign=1kD6c0N6aYpMUS0wxnQjxzSqZlEB8qNFdxtdjYhwSuI`;case"osf":return`https://mfr.osf.io/render?url=https://osf.io/${t}/?action=download`;case"yandex":return`https://runtime.video.cloud.yandex.net/player/video/${t}`;case"vk":return`https://vk.com/video_ext.php?${t}`;case"rutube":return`https://rutube.ru/play/embed/${t}`;case"url":return t;default:return e}}),utils$1}function require_const(){return hasRequired_const||(hasRequired_const=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaults=e.VideoService=void 0;const t=requireUtils$1();var r;(r=e.VideoService||(e.VideoService={})).YouTube="youtube",r.Vimeo="vimeo",r.Vine="vine",r.Prezi="prezi",r.Osf="osf",r.Yandex="yandex",r.Vk="vk",r.Rutube="rutube",r.url="url",e.defaults={videoUrl:t.videoUrl,youtube:{width:640,height:390},vimeo:{width:500,height:281},vine:{width:600,height:600,embed:"simple"},prezi:{width:550,height:400},osf:{width:"100%",height:"100%"},yandex:{width:640,height:390},vk:{width:640,height:390},rutube:{width:640,height:390},url:{width:640,height:390}}}(_const)),_const}function requireVideo(){if(hasRequiredVideo)return video_1;hasRequiredVideo=1;const e=requireUtils$2(),t=requireParsers(),r=require_const(),n=/@\[([a-zA-Z]*?)]\([\s]*(.*?)[\s]*[)]/im;return video_1=(i,o)=>{const s=Object.assign(Object.assign({},r.defaults),o),a=i;a.renderer.rules.video=function(e,t){return(n,i)=>{const o=e.utils.escapeHtml(n[i].videoID),s=e.utils.escapeHtml(n[i].service).toLowerCase();let a;if(s===r.VideoService.Osf&&o)return a=65536*Math.random(),o.match(/http(?:s?):\/\/(?:www\.)?[a-zA-Z0-9-:.]{1,}\/render(?:\/)?[a-zA-Z0-9.&;?=:%]{1,}url=http(?:s?):\/\/[a-zA-Z0-9 -:.]{1,}\/[a-zA-Z0-9]{1,5}\/\?[a-zA-Z0-9.=:%]{1,}/)?'<div id="'+a+'" class="mfr mfr-file"></div><script>$(document).ready(function () {new mfr.Render("'+a+'", "'+o+'");    }); <\/script>':'<div id="'+a+'" class="mfr mfr-file"></div><script>$(document).ready(function () {new mfr.Render("'+a+'", "https://mfr.osf.io/render?url=https://osf.io/'+o+'/?action=download%26mode=render");    }); <\/script>';const{width:l,height:c}=t[s];return""===o?"":`<div class="embed-responsive embed-responsive-16by9"><iframe class="embed-responsive-item ${s}-player" type="text/html" width="${l}" height="${c}" src="${t.videoUrl(s,o,t)}" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`}}(a,s),a.inline.ruler.before("emphasis","video",function(r){return(i,o)=>{var s,a;const l=i,c=i.pos;if(64!==i.src.charCodeAt(c)||91!==i.src.charCodeAt(c+1))return!1;const u=n.exec(i.src.slice(i.pos,i.src.length));if(!u||u.length<3)return!1;const d=u[1]||"url",p=(0,t.parseVideoUrl)(d,u[2]);if(!1===p)return!1;const[h,f]=p,m=c+2,g=r.helpers.parseLinkLabel(i,c+1,!1);if(!o){l.pos=m,l.service=l.src.slice(m,g);const e=new l.md.inline.State(d,l.md,l.env,[]);e.md.inline.tokenize(e);const t=l.push("video","",0);t.videoID=h,t.service=d,t.level=l.level}return"url"===d?l.pos=l.src.indexOf(")",l.pos)+1:l.pos+=l.src.indexOf(")",l.pos),f&&(null!==(s=(a=i.env).meta)&&void 0!==s||(a.meta={}),(0,e.append)(i.env.meta,"csp",f)),!0}}(a))}}var videoExports=requireVideo();const video=getDefaultExportFromCjs(videoExports);var _constExports=require_const(),parsersExports=requireParsers();const videoPlugin=video,videoType=nodeTypeFactory(videoNodeName);function serializeNodeToString(e){return`@[${e.attrs[VideoAttr.Service]}](${e.attrs[VideoAttr.VideoID]})`}function createViewStub(e){const t=document.createElement("span");return t.setAttribute(VideoAttr.Service,e.attrs[VideoAttr.Service]),t.setAttribute(VideoAttr.VideoID,e.attrs[VideoAttr.VideoID]),t.contentEditable="false",t.textContent=serializeNodeToString(e),t}const availableServices=new Set([_constExports.VideoService.YouTube,_constExports.VideoService.Vimeo,_constExports.VideoService.Vine,_constExports.VideoService.Prezi]),VideoSpecs=(e,t)=>{const r={..._constExports.defaults,...t,log:logExports.log};e.configureMd(e=>e.use(videoPlugin,r)),e.addNode(videoNodeName,()=>({spec:{inline:!0,atom:!0,group:"inline",attrs:{[VideoAttr.Service]:{},[VideoAttr.VideoID]:{}},parseDOM:[{tag:`span[${VideoAttr.Service}][${VideoAttr.VideoID}]`,getAttrs(e){const t=e;return{[VideoAttr.Service]:t.getAttribute(VideoAttr.Service),[VideoAttr.VideoID]:t.getAttribute(VideoAttr.VideoID)}}},{tag:`iframe[${VideoAttr.Service}][${VideoAttr.VideoID}]`,getAttrs(e){const t=e;return{[VideoAttr.Service]:t.getAttribute(VideoAttr.Service),[VideoAttr.VideoID]:t.getAttribute(VideoAttr.VideoID)}},priority:100}],toDOM(e){const t=e.attrs[VideoAttr.Service],n=e.attrs[VideoAttr.VideoID];if(availableServices.has(t)||!n){let e="";return"function"==typeof r.videoUrl&&(e=r.videoUrl(t,n,r)),["div",{class:"embed-responsive embed-responsive-16by9"},["iframe",{class:`embed-responsive-item ${t}-player`,type:"text/html",width:String(r[t].width),height:String(r[t].height),src:e,frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:"",[VideoAttr.Service]:t,[VideoAttr.VideoID]:n}]]}return createViewStub(e)}},fromMd:{tokenSpec:{name:videoNodeName,type:"node",getAttrs:e=>({[VideoAttr.Service]:e.service,[VideoAttr.VideoID]:e.videoID})}},toMd:(e,t)=>{e.write(serializeNodeToString(t))}}))};var utils={},hasRequiredUtils,patterns,hasRequiredPatterns,markdownItAttrs,hasRequiredMarkdownItAttrs;function requireUtils(){if(hasRequiredUtils)return utils;function e(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}hasRequiredUtils=1,utils.getAttrs=function(e,t,r){const n=/[^\t\n\f />"'=]/,i=[];let o="",s="",a=!0,l=!1;for(let c=t+r.leftDelimiter.length;c<e.length;c++){if(e.slice(c,c+r.rightDelimiter.length)===r.rightDelimiter){""!==o&&i.push([o,s]);break}const t=e.charAt(c);if("="===t&&a)a=!1;else if("."!==t||""!==o)if("#"!==t||""!==o)if('"'!==t||""!==s||l)if('"'===t&&l)l=!1;else if(" "!==t||l)a&&-1===t.search(n)||(a?o+=t:s+=t);else{if(""===o)continue;i.push([o,s]),o="",s="",a=!0}else l=!0;else o="id",a=!1;else"."===e.charAt(c+1)?(o="css-module",c+=1):o="class",a=!1}if(r.allowedAttributes&&r.allowedAttributes.length){const e=r.allowedAttributes;return i.filter(function(t){const r=t[0];return e.some(function(e){return r===e||e instanceof RegExp&&e.test(r)})})}return i},utils.addAttrs=function(e,t){for(let r=0,n=e.length;r<n;++r){const n=e[r][0];"class"===n?t.attrJoin("class",e[r][1]):"css-module"===n?t.attrJoin("css-module",e[r][1]):t.attrPush(e[r])}return t},utils.hasDelimiters=function(e,t){if(!e)throw new Error('Parameter `where` not passed. Should be "start", "end" or "only".');return function(r){const n=t.leftDelimiter.length+1+t.rightDelimiter.length;if(!r||"string"!=typeof r||r.length<n)return!1;let i,o,s,a;const l=n-t.rightDelimiter.length;switch(e){case"start":s=r.slice(0,t.leftDelimiter.length),i=s===t.leftDelimiter?0:-1,o=-1===i?-1:r.indexOf(t.rightDelimiter,l),a=r.charAt(o+t.rightDelimiter.length),a&&-1!==t.rightDelimiter.indexOf(a)&&(o=-1);break;case"end":i=r.lastIndexOf(t.leftDelimiter),o=-1===i?-1:r.indexOf(t.rightDelimiter,i+l),o=o===r.length-t.rightDelimiter.length?o:-1;break;case"only":s=r.slice(0,t.leftDelimiter.length),i=s===t.leftDelimiter?0:-1,s=r.slice(r.length-t.rightDelimiter.length),o=s===t.rightDelimiter?r.length-t.rightDelimiter.length:-1;break;default:throw new Error(`Unexpected case ${e}, expected 'start', 'end' or 'only'`)}return-1!==i&&-1!==o&&function(e){const r="."===e.charAt(t.leftDelimiter.length),i="#"===e.charAt(t.leftDelimiter.length);return r||i?e.length>=n+1:e.length>=n}(r.substring(i,o+t.rightDelimiter.length))}},utils.removeDelimiter=function(t,r){const n=e(r.leftDelimiter),i=e(r.rightDelimiter),o=new RegExp("[ \\n]?"+n+"[^"+n+i+"]+"+i+"$"),s=t.search(o);return-1!==s?t.slice(0,s):t},utils.escapeRegExp=e,utils.getMatchingOpeningToken=function(e,t){if("softbreak"===e[t].type)return!1;if(0===e[t].nesting)return e[t];const r=e[t].level,n=e[t].type.replace("_close","_open");for(;t>=0;--t)if(e[t].type===n&&e[t].level===r)return e[t];return!1};const t=/[&<>"]/,r=/[&<>"]/g,n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function i(e){return n[e]}return utils.escapeHtml=function(e){return t.test(e)?e.replace(r,i):e},utils}function requirePatterns(){if(hasRequiredPatterns)return patterns;hasRequiredPatterns=1;const e=requireUtils();function t(e){return e.slice(-1)[0]}function r(e){e.hidden=!0,e.children&&e.children.forEach(e=>(e.content="",void r(e)))}return patterns=n=>{const i=new RegExp("^ {0,3}[-*_]{3,} ?"+e.escapeRegExp(n.leftDelimiter)+"[^"+e.escapeRegExp(n.rightDelimiter)+"]");return[{name:"fenced code blocks",tests:[{shift:0,block:!0,info:e.hasDelimiters("end",n)}],transform:(t,r)=>{const i=t[r],o=i.info.lastIndexOf(n.leftDelimiter),s=e.getAttrs(i.info,o,n);e.addAttrs(s,i),i.info=e.removeDelimiter(i.info,n)}},{name:"inline nesting 0",tests:[{shift:0,type:"inline",children:[{shift:-1,type:e=>"image"===e||"code_inline"===e},{shift:0,type:"text",content:e.hasDelimiters("start",n)}]}],transform:(t,r,i)=>{const o=t[r].children[i],s=o.content.indexOf(n.rightDelimiter),a=t[r].children[i-1],l=e.getAttrs(o.content,0,n);e.addAttrs(l,a),o.content.length===s+n.rightDelimiter.length?t[r].children.splice(i,1):o.content=o.content.slice(s+n.rightDelimiter.length)}},{name:"tables",tests:[{shift:0,type:"table_close"},{shift:1,type:"paragraph_open"},{shift:2,type:"inline",content:e.hasDelimiters("only",n)}],transform:(t,r)=>{const i=t[r+2],o=e.getMatchingOpeningToken(t,r),s=e.getAttrs(i.content,0,n);e.addAttrs(s,o),t.splice(r+1,3)}},{name:"tables thead metadata",tests:[{shift:0,type:"tr_close"},{shift:1,type:"thead_close"},{shift:2,type:"tbody_open"}],transform:(t,r)=>{const n=e.getMatchingOpeningToken(t,r),i=t[r-1];let o=0,s=r;for(;--s;){if(t[s]===n){t[s-1].meta=Object.assign({},t[s+2].meta,{colsnum:o});break}o+=0|(t[s].level===i.level&&t[s].type===i.type)}t[r+2].meta=Object.assign({},t[r+2].meta,{colsnum:o})}},{name:"tables tbody calculate",tests:[{shift:0,type:"tbody_close",hidden:!1}],transform:(e,t)=>{let n=t-2;for(;n>0&&"tbody_open"!==e[--n].type;);const i=0|e[n].meta.colsnum;if(i<2)return;const o=e[t].level+2;for(let s=n;s<t;s++){if(e[s].level>o)continue;const a=e[s],l=a.hidden?0:0|a.attrGet("rowspan"),c=a.hidden?0:0|a.attrGet("colspan");if(l>1){let t=i-(c>0?c:1);for(let r=s,n=l;n>1;r++)"tr_open"==e[r].type&&(e[r].meta=Object.assign({},e[r].meta),e[r].meta&&e[r].meta.colsnum&&(t-=1),e[r].meta.colsnum=t,n--)}if("tr_open"==a.type&&a.meta&&a.meta.colsnum){const n=a.meta.colsnum;for(let i=s,o=0;i<t;i++){if("td_open"==e[i].type)o+=1;else if("tr_close"==e[i].type)break;o>n&&(e[i].hidden||r(e[i]))}}if(c>1){const o=[];let l=s+3,u=i;for(let t=s;t>n;t--){if("tr_open"==e[t].type){u=e[t].meta&&e[t].meta.colsnum||u;break}"td_open"===e[t].type&&o.unshift(t)}for(let r=s+2;r<t;r++){if("tr_close"==e[r].type){l=r;break}"td_open"==e[r].type&&o.push(r)}let d=u-o.indexOf(s);d=d>c?c:d,c>d&&a.attrSet("colspan",d+"");for(let t=o.slice(u+1-i-d)[0];t<l;t++)e[t].hidden||r(e[t])}}}},{name:"inline attributes",tests:[{shift:0,type:"inline",children:[{shift:-1,nesting:-1},{shift:0,type:"text",content:e.hasDelimiters("start",n)}]}],transform:(t,r,i)=>{const o=t[r].children[i],s=o.content,a=e.getAttrs(s,0,n),l=e.getMatchingOpeningToken(t[r].children,i-1);e.addAttrs(a,l),o.content=s.slice(s.indexOf(n.rightDelimiter)+n.rightDelimiter.length)}},{name:"list softbreak",tests:[{shift:-2,type:"list_item_open"},{shift:0,type:"inline",children:[{position:-2,type:"softbreak"},{position:-1,type:"text",content:e.hasDelimiters("only",n)}]}],transform:(t,r,i)=>{const o=t[r].children[i].content,s=e.getAttrs(o,0,n);let a=r-2;for(;t[a-1]&&"ordered_list_open"!==t[a-1].type&&"bullet_list_open"!==t[a-1].type;)a--;e.addAttrs(s,t[a-1]),t[r].children=t[r].children.slice(0,-2)}},{name:"list double softbreak",tests:[{shift:0,type:e=>"bullet_list_close"===e||"ordered_list_close"===e},{shift:1,type:"paragraph_open"},{shift:2,type:"inline",content:e.hasDelimiters("only",n),children:e=>1===e.length},{shift:3,type:"paragraph_close"}],transform:(t,r)=>{const i=t[r+2].content,o=e.getAttrs(i,0,n),s=e.getMatchingOpeningToken(t,r);e.addAttrs(o,s),t.splice(r+1,3)}},{name:"list item end",tests:[{shift:-2,type:"list_item_open"},{shift:0,type:"inline",children:[{position:-1,type:"text",content:e.hasDelimiters("end",n)}]}],transform:(r,i,o)=>{const s=r[i].children[o],a=s.content,l=e.getAttrs(a,a.lastIndexOf(n.leftDelimiter),n);e.addAttrs(l,r[i-2]);const c=a.slice(0,a.lastIndexOf(n.leftDelimiter));s.content=" "!==t(c)?c:c.slice(0,-1)}},{name:"\n{.a} softbreak then curly in start",tests:[{shift:0,type:"inline",children:[{position:-2,type:"softbreak"},{position:-1,type:"text",content:e.hasDelimiters("only",n)}]}],transform:(t,r,i)=>{const o=t[r].children[i],s=e.getAttrs(o.content,0,n);let a=r+1;for(;t[a+1]&&-1===t[a+1].nesting;)a++;const l=e.getMatchingOpeningToken(t,a);e.addAttrs(s,l),t[r].children=t[r].children.slice(0,-2)}},{name:"horizontal rule",tests:[{shift:0,type:"paragraph_open"},{shift:1,type:"inline",children:e=>1===e.length,content:e=>null!==e.match(i)},{shift:2,type:"paragraph_close"}],transform:(t,r)=>{const i=t[r];i.type="hr",i.tag="hr",i.nesting=0;const o=t[r+1].content,s=o.lastIndexOf(n.leftDelimiter),a=e.getAttrs(o,s,n);e.addAttrs(a,i),i.markup=o,t.splice(r+1,2)}},{name:"end of block",tests:[{shift:0,type:"inline",children:[{position:-1,content:e.hasDelimiters("end",n),type:e=>"code_inline"!==e&&"math_inline"!==e}]}],transform:(r,i,o)=>{const s=r[i].children[o],a=s.content,l=e.getAttrs(a,a.lastIndexOf(n.leftDelimiter),n);let c=i+1;do{if(r[c]&&-1===r[c].nesting)break}while(c++<r.length);const u=e.getMatchingOpeningToken(r,c);e.addAttrs(l,u);const d=a.slice(0,a.lastIndexOf(n.leftDelimiter));s.content=" "!==t(d)?d:d.slice(0,-1)}}]}}function requireMarkdownItAttrs(){if(hasRequiredMarkdownItAttrs)return markdownItAttrs;hasRequiredMarkdownItAttrs=1;const e=requirePatterns(),t={leftDelimiter:"{",rightDelimiter:"}",allowedAttributes:[]};function r(e,t,s){const a={match:!1,j:null},l=void 0!==s.shift?t+s.shift:s.position;if(void 0!==s.shift&&l<0)return a;const c=(u=e,(d=l)>=0?u[d]:u[u.length+d]);var u,d;if(void 0===c)return a;for(const p of Object.keys(s))if("shift"!==p&&"position"!==p){if(void 0===c[p])return a;if("children"===p&&n(s.children)){if(0===c.children.length)return a;let e;const t=s.children,n=c.children;if(t.every(e=>void 0!==e.position)){if(e=t.every(e=>r(n,e.position,e).match),e){const e=o(t).position;a.j=e>=0?e:n.length+e}}else for(let i=0;i<n.length;i++)if(e=t.every(e=>r(n,i,e).match),e){a.j=i;break}if(!1===e)return a;continue}switch(typeof s[p]){case"boolean":case"number":case"string":if(c[p]!==s[p])return a;break;case"function":if(!s[p](c[p]))return a;break;case"object":if(i(s[p])){if(!1===s[p].every(e=>e(c[p])))return a;break}default:throw new Error(`Unknown type of pattern test (key: ${p}). Test should be of type boolean, number, string, function or array of functions.`)}}return a.match=!0,a}function n(e){return Array.isArray(e)&&e.length&&e.every(e=>"object"==typeof e)}function i(e){return Array.isArray(e)&&e.length&&e.every(e=>"function"==typeof e)}function o(e){return e.slice(-1)[0]||{}}return markdownItAttrs=function(n,i){let o=Object.assign({},t);o=Object.assign(o,i);const s=e(o);n.core.ruler.before("linkify","curly_attributes",function(e){const t=e.tokens;for(let i=0;i<t.length;i++)for(let e=0;e<s.length;e++){const o=s[e];let a=null;if(o.tests.every(e=>{const n=r(t,i,e);return null!==n.j&&(a=n.j),n.match}))try{o.transform(t,i,a),"inline attributes"!==o.name&&"inline nesting 0"!==o.name||e--}catch(n){}}})}}var markdownItAttrsExports=requireMarkdownItAttrs();const attrsPlugin=getDefaultExportFromCjs(markdownItAttrsExports),defaultAttrsOpts={allowedAttributes:["id"]},YfmConfigsSpecs=(e,t)=>{const r={...defaultAttrsOpts,...t.attrs};t.disableAttrs||e.configureMd(e=>e.use(attrsPlugin,r),{text:!1}),e.addNode("__yfm_lint",()=>({spec:{},fromMd:{tokenSpec:{name:"__yfm_lint",type:"node",ignore:!0}},toMd:noop$8}))};var common,hasRequiredCommon,markdownItDirective,hasRequiredMarkdownItDirective,build,hasRequiredBuild,plugin$2,hasRequiredPlugin$2;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;var e,t,r,n,i,o,s,a,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},m=(e,t,r)=>(f(e,t,"read from private field"),t.get(e)),g=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},b=(e,t,r,n)=>(f(e,t,"write to private field"),t.set(e,r),r),y={};((e,t)=>{for(var r in t)l(e,r,{get:t[r],enumerable:!0})})(y,{AttrsParser:()=>T,createLoadQueue:()=>R,getQueueStore:()=>D,getScriptStore:()=>w,isBrowser:()=>_,parseMdAttrs:()=>E}),e=y,common=((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of u(t))p.call(e,i)||undefined===i||l(e,i,{get:()=>t[i],enumerable:!(n=c(t,i))||n.enumerable});return e})(l({},"__esModule",{value:!0}),e);var T=class{constructor(e){this.DELIMITER="=",this.SEPARATOR=" ",this.QUOTATION='"',this.ALLOWED_CHARS=/[a-zA-Z0-9_\- {}.|/]/,this.VALIDATION_CHARS=/[a-zA-Z0-9_\- {}.#="|/]/,this.state={},g(this,t,""),g(this,r,""),g(this,n,!1),g(this,i,!1),g(this,o,void 0),g(this,s,{id:/#/,class:/\./,attr:/[a-zA-Z-_]/}),g(this,a,Object.entries(m(this,s))),e&&this.parse(e)}parse(e){const t=this.extract(e.trim());if(!t)return{};this.clear(),this.state={};for(const r of t)this.next(r);return this.next(this.SEPARATOR),this.clear(),this.state}apply(e){const t=this.state,{attr:r=[]}=t,n=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r})(t,["attr"]);for(const[i,o]of Object.entries(n))e.attrJoin(i,o.join(" "));for(const i of r)e.attrJoin(i,"true")}extract(e){if(!e.startsWith("{"))return!1;let t=1;for(let r=1;r<e.length;r++){const n=e[r];if("}"===n&&t--,"{"===n&&t++,0===t)return e.slice(1,r).trim();if(t<0)return!1;if(!this.VALIDATION_CHARS.test(n))return!1}return!1}next(e){if(!m(this,o))return b(this,o,this.type(e)),void("attr"===m(this,o)&&b(this,r,e));if(this.isSeparator(e))return m(this,r)||m(this,n)?!m(this,t)&&m(this,r)?(this.append(),void this.clear()):m(this,n)&&!m(this,i)?void b(this,r,m(this,r)+e):(m(this,n)&&m(this,i)&&this.append(m(this,t),m(this,r)),m(this,n)||m(this,i)||this.append(m(this,t),m(this,r)),void this.clear()):(this.append(m(this,t)," "),void this.clear());if(this.isAllowedChar(e))b(this,r,m(this,r)+e);else if(this.isQuotation(e)&&(m(this,n)?b(this,i,!0):b(this,n,!0)),this.isDelimiter(e)){if(m(this,t))return void b(this,r,m(this,r)+e);b(this,t,m(this,r)),b(this,r,"")}}type(e){var t;return null==(t=m(this,a).find(([t,r])=>r.test(e)))?void 0:t[0]}append(e=m(this,o),t=m(this,r)){e&&(this.state[e]||(this.state[e]=[]),this.state[e].push(t))}clear(){b(this,t,""),b(this,r,""),b(this,n,!1),b(this,i,!1),b(this,o,void 0)}isDelimiter(e){return e===this.DELIMITER}isSeparator(e){return e===this.SEPARATOR}isQuotation(e){return e===this.QUOTATION}isAllowedChar(e){return this.ALLOWED_CHARS.test(e)}};function E(e,t,r,n){if(r>=n)return null;if(123!==t.charCodeAt(r))return null;const i={};for(r=s(t,++r,n);r<n;r=s(t,r,n)){if(125===t.charCodeAt(r))return{pos:++r,attrs:i};const a=t.charCodeAt(r);if(35===a){const e=v(t,++r,n);if(null===e)return null;r=e.pos;const o="id",s=e.name;void 0===i[o]?i[o]=[s]:i[o].push(s)}else if(46===a){const e=v(t,++r,n);if(null===e)return null;r=e.pos;const o="class",s=e.name;void 0===i[o]?i[o]=[s]:i[o].push(s)}else{let a=S(t,r,n);if(null===a)return null;const l=a.name;if((r=s(t,r=a.pos,n))>=n)return null;let c;if(61===t.charCodeAt(r)){if((r=s(t,++r,n))>=n)return null;const i=t.charCodeAt(r);if(34===i||39===i){const i=e.helpers.parseLinkTitle(t,r,n);if(!i.ok)return null;c=i.str,r=i.pos}else{if(a=v(t,r,n),null===a)return null;c=a.name,r=a.pos}}else o(t.charCodeAt(r-1))&&--r,c="";void 0!==c&&(void 0===i[l]?i[l]=[c]:i[l].push(c))}if(r>=n)return null;const l=t.charCodeAt(r);if(!o(l)&&125!==l)return null}return null;function o(t){return e.utils.isSpace(t)||10===t}function s(e,t,r){for(;t<r&&o(e.charCodeAt(t));t++);return t}}t=new WeakMap,r=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,s=new WeakMap,a=new WeakMap;var O=/^[a-z][a-z0-9\-_]*/;function S(e,t,r){const n=t,i=e.slice(t,r).match(O);return null===i?null:{pos:t+=i[0].length,name:e.slice(n,t)}}var x=/^[a-z0-9\-_]+/i;function v(e,t,r){const n=t,i=e.slice(t,r).match(x);return null===i?null:{pos:t+=i[0].length,name:e.slice(n,t)}}var _=()=>"undefined"!=typeof window&&void 0!==window.document,A=Symbol.for("extension-load-queues"),C=Symbol.for("single-queue"),w=e=>{if(_()){if(window[e]){if(!Array.isArray(window[e]))throw new Error(`Expected window[${String(e)}] to be an array`)}else window[e]=[];return window[e]}throw new Error("Cannot initialize QueueStore in a non-browser environment.")},k=()=>{if(!_())throw new Error("Cannot initialize QueueStore in a non-browser environment.");"object"==typeof window[A]&&null!==window[A]||(window[A]={})},D=e=>{var t;return k(),(null==(t=window[A])?void 0:t[e])||!1},I=e=>(k(),t=>{window[A][e]=t}),R=({store:e,createController:t,queueKey:r=C,isQueueCreated:n=D(r),onQueueCreated:i=I(r)})=>{if(!e||n)return;i(!0);const o=t(),s=e.splice(0,e.length);e.push=function(...e){return e.forEach(e=>{s.push(e),l()}),s.length};let a=!1;function l(){a||c()}function c(){return e=this,t=function*(){a=!0;const e=s.shift();if(e)return yield e(o),c();a=!1},new Promise((r,n)=>{var i=e=>{try{s(t.next(e))}catch(r){n(r)}},o=e=>{try{s(t.throw(e))}catch(r){n(r)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,o);s((t=t.apply(e,null)).next())});var e,t}l()};return common}function requireMarkdownItDirective(){if(hasRequiredMarkdownItDirective)return markdownItDirective;function e(e){switch(e){case 9:case 32:case 10:return!0}return!1}function t(t,r,n){for(;r<n&&e(t.charCodeAt(r));++r);return r}function r(t,r,n){for(;n<r&&e(t.charCodeAt(r-1));--r);return r}hasRequiredMarkdownItDirective=1;const n=/^[a-z][a-z0-9\-_]*/i,i=/^[a-z][a-z0-9\-_]*/;function o(e,t,r){const n=t,o=e.slice(t,r).match(i);return null===o?null:{pos:t+=o[0].length,name:e.slice(n,t)}}const s=/^[a-z0-9\-_]+/i;function a(e,t,r){const n=t,i=e.slice(t,r).match(s);return null===i?null:{pos:t+=i[0].length,name:e.slice(n,t)}}function l(r,i,s,l,c){const u=r.md,d=function(e,t,r){const i=t,o=e.slice(t,r).match(n);return null===o?null:{pos:t+=o[0].length,name:(s=e.slice(i,t),s.toLowerCase().replace("_","-"))};var s}(i,s,l);if(null===d)return null;const p=d.name;s=d.pos,c&&(s=t(i,s,l));const h=s,f=u.helpers.parseLinkLabel(r,h);let m,g,b;f>=0&&(m=i.slice(s+1,f),s=f+1,g=h+1,b=f),c&&(s=t(i,s,l));const y=s,T=function(r,n,i,o){if(i>=o)return null;if(40!==n.charCodeAt(i))return null;const s=[];for(i=t(n,++i,o);i<o;i=t(n,i,o)){if(41===n.charCodeAt(i))return{pos:++i,dests:s};const t=n.charCodeAt(i);if(34===t||39===t||40===t){const e=r.helpers.parseLinkTitle(n,i,o);if(!e.ok)return null;i=e.pos,s.push(["string",e.str])}else{const e=r.helpers.parseLinkDestination(n,i,o);if(!e.ok)return null;i=e.pos,s.push(["link",e.str])}if(i>=o)return null;const a=n.charCodeAt(i);if(!e(a)&&41!==a)return null}return null}(u,i,y,l);let E;if(null!==T)E=T.dests,s=T.pos;else if(void 0!==r.env.references){const e=u.helpers.parseLinkLabel(r,y);if(e>=0){const t=i.slice(y+1,e),n=r.env.references[u.utils.normalizeReference(t)];n&&(E=[["link",n.href],["string",n.title]],s=e+1)}else if(void 0!==m){const e=r.env.references[u.utils.normalizeReference(m)];e&&(E=[["link",e.href],["string",e.title]])}}c&&(s=t(i,s,l));const O=function(r,n,i,s){if(i>=s)return null;if(123!==n.charCodeAt(i))return null;const l={};for(i=t(n,++i,s);i<s;i=t(n,i,s)){if(125===n.charCodeAt(i)){++i;for(const e in l)1===l[e].length&&(l[e]=l[e][0]);return{pos:i,attrs:l}}const c=n.charCodeAt(i);if(35===c){const e=a(n,++i,s);if(null===e)return null;i=e.pos;const t="id",r=e.name;void 0===l[t]?l[t]=[r]:l[t].push(r)}else if(46===c){const e=a(n,++i,s);if(null===e)return null;i=e.pos;const t="class",r=e.name;void 0===l[t]?l[t]=[r]:l[t].push(r)}else{let e=o(n,i,s);if(null===e)return null;const c=e.name;if((i=t(n,i=e.pos,s))>=s)return null;if(61!==n.charCodeAt(i))return null;if((i=t(n,++i,s))>=s)return null;let u;const d=n.charCodeAt(i);if(34===d||39===d){if(e=r.helpers.parseLinkTitle(n,i,s),!e.ok)return null;u=e.str,i=e.pos}else{if(e=a(n,i,s),null===e)return null;u=e.name,i=e.pos}void 0===l[c]?l[c]=[u]:l[c].push(u)}if(i>=s)return null;const u=n.charCodeAt(i);if(!e(u)&&125!==u)return null}return null}(u,i,s,l);let S;return null!==O&&(S=O.attrs,s=O.pos),c&&(s=t(i,s,l)),{directiveName:p,content:m,dests:E,attrs:S,contentStart:g,contentEnd:b,pos:s}}function c(e,t){const r=e.md,n=e.src,i=e.posMax;let o=e.pos;if(58!==n.charCodeAt(o))return!1;++o;const s=l(e,n,o,i,!1);if(null===s)return!1;const{directiveName:a,content:c,dests:u,attrs:d,contentStart:p,contentEnd:h}=s,f=r.inlineDirectives[a];return void 0!==f&&(o=s.pos,!(!t&&!1===f({state:e,content:c,dests:u,attrs:d,contentStart:p,contentEnd:h,directiveStart:e.pos,directiveEnd:o}))&&(e.pos=o,!0))}function u(e,n,i,o){const s=e.md,a=e.src,c=e.eMarks[n];let u=e.bMarks[n]+e.tShift[n];if(u+3>c||58!==a.charCodeAt(u)||58!==a.charCodeAt(u+1))return!1;u+=2;let d=!1;58!==a.charCodeAt(u)?d=!0:u=e.skipChars(u,58),u=t(a,u,c);const p=l(new s.inline.State(a,s,e.env,[]),a,u,c,!0);if(null===p)return!1;const{directiveName:h,content:f,dests:m,attrs:g,contentStart:b,contentEnd:y}=p,T=s.blockDirectives[h];if(void 0===T)return!1;u=p.pos;const E=u;let O=r(a,c,u),S=e.skipCharsBack(O,58,u);O-S>1&&(O=S);const x=r(a,O,u),v=a.slice(E,x);if(d)return!(!o&&!1===T({state:e,contentTitle:v,inlineContent:f,dests:m,attrs:g,contentTitleStart:E,contentTitleEnd:x,inlineContentStart:b,inlineContentEnd:y,directiveStartLine:n,directiveEndLine:n+1}))&&(e.line=n+1,!0);const _=function(e,r,n,i){let o=r+1,s=1;for(;o<n&&0!==s;++o){const r=i.eMarks[o];let n=i.bMarks[o]+i.tShift[o],a=i.skipChars(n,58),l=a-n;l>=3&&(a=t(e,a,r),a===r)?--s:l>=3&&a<r&&++s}return 0!==s?-1:o}(a,n,i,e);if(-1===_)return!1;const A=e.getLines(n+1,_-1,e.sCount[n],!0);return!(!o&&!1===T({state:e,content:A,contentTitle:v,inlineContent:f,dests:m,attrs:g,contentStartLine:n+1,contentEndLine:_-1,contentTitleStart:E,contentTitleEnd:x,inlineContentStart:b,inlineContentEnd:y,directiveStartLine:n,directiveEndLine:_}))&&(e.line=_,!0)}return markdownItDirective=function(e){e.inlineDirectives||(e.inlineDirectives={},e.blockDirectives={},e.inline.ruler.push("inline_directive",c),e.block.ruler.before("heading","block_directive",u))}}function requireBuild(){if(hasRequiredBuild)return build;hasRequiredBuild=1;var e,t=Object.create,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,o=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,a=(e,t,o,a)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))s.call(e,l)||l===o||r(e,l,{get:()=>t[l],enumerable:!(a=n(t,l))||a.enumerable});return e},l={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(l,{createBlockInlineToken:()=>O,directiveParser:()=>D,disableBlockDirectives:()=>g,disableInlineDirectives:()=>f,enableBlockDirectives:()=>m,enableInlineDirectives:()=>h,registerContainerDirective:()=>v,registerInlineDirective:()=>S,registerLeafBlockDirective:()=>x,tokenizeBlockContent:()=>E,tokenizeInlineContent:()=>T}),e=l,build=a(r({},"__esModule",{value:!0}),e);var c=((e,n,i)=>(i=null!=e?t(o(e)):{},a(e&&e.__esModule?i:r(i,"default",{value:e,enumerable:!0}),e)))(requireMarkdownItDirective()),u={Inline:"inline_directive",Block:"block_directive"},d=Symbol(),p=Symbol();function h(e){e.inline.ruler.enable(u.Inline,!0)}function f(e){e.inline.ruler.disable(u.Inline,!0)}function m(e){e.block.ruler.enable(u.Block,!0)}function g(e){e.block.ruler.disable(u.Block,!0)}function b(e){return"function"==typeof e}function y(e){return"string"==typeof e}function T(e,t){const r=e.pos,n=e.posMax;e.pos=t.startPos,e.posMax=t.endPos,e.md.inline.tokenize(e),e.pos=r,e.posMax=n}function E(e,t,r){const n=e.parentType,i=e.lineMax;e.parentType=r??"directive",e.line=t.startLine,e.lineMax=t.endLine,e.md.block.tokenize(e,t.startLine,t.endLine),e.lineMax=i,e.parentType=n}function O(e,{inlineContent:t,startLine:r}){const n=e.push("inline","",0);return n.children=[],n.content=t?.raw||"",n.map=[r,r+1],n}function S(e,t,r){e.inlineDirectives[t]=e=>{const t=function(e){const t={startPos:e.directiveStart,endPos:e.directiveEnd};return void 0!==e.attrs&&(t.attrs=e.attrs),void 0!==e.dests&&(t.dests=w(e.dests)),void 0!==e.content&&(t.content={raw:e.content,startPos:e.contentStart,endPos:e.contentEnd}),t}(e);return r(e.state,t)}}function x(e,t,r){const[n,i]=y(t)?[t,r]:[t.name,(o=t,(e,t)=>{if(!o.match(t,e))return!1;const{container:r}=o,n=e.push(r.token,r.tag,0);return n.map=[t.startLine,t.endLine],n.markup="::"+o.name,k(n,r,t,e.env),!0})];var o;e[p]||={},e[p][n]=i,e.blockDirectives[n]=_(e,n)}function v(e,t,r){const[n,i]=y(t)?[t,r]:[t.name,"code_block"===t.type?(o=t,(e,t)=>{if(!t.content)return!1;if(!o.match(t,e))return!1;const{name:r,container:n}=o,i=e.push(n.token,n.tag,0);return i.map=[t.startLine,t.endLine],i.content=t.content.raw,i.markup=":::",i.info=r,k(i,n,t,e.env),!0}):A(t)];var o;e[d]||={},e[d][n]=i,e.blockDirectives[n]=_(e,n)}function _(e,t){return r=>{const n=e[d]?.[t],i=e[p]?.[t];if(y(r.content)){if(n)return n(r.state,function(e){return{...C(e),content:{raw:e.content,startLine:e.contentStartLine,endLine:e.contentEndLine}}}(r))}else if(i)return i(r.state,C(r));return!1}}function A(e){return(t,r)=>{if(!r.content)return!1;if(e.inlineContent&&!r.inlineContent&&!1!==e.inlineContent.required)return!1;if(!e.match(r,t))return!1;const{container:n,inlineContent:i,content:o,contentTokenizer:s}=e;let a=t.push(n.token+"_open",n.tag,1);return a.map=[r.startLine,r.endLine],a.markup=":::"+e.name,k(a,n,r,t.env),i&&(a=t.push(i.token+"_open",i.tag,1),k(a,i,r,t.env),a=O(t,r),a=t.push(i.token+"_close",i.tag,-1)),o&&(a=t.push(o.token+"_open",o.tag,1),a.map=[r.startLine+1,r.endLine-1],k(a,o,r,t.env)),s?s(t,r.content,r):E(t,r.content,e.name+"-directive"),o&&(a=t.push(o.token+"_close",o.tag,-1)),a=t.push(n.token+"_close",n.tag,-1),!0}}function C(e){const t={startLine:e.directiveStartLine,endLine:e.directiveEndLine};return void 0!==e.attrs&&(t.attrs=e.attrs),void 0!==e.dests&&(t.dests=w(e.dests)),void 0!==e.inlineContent&&(t.inlineContent={raw:e.inlineContent,startPos:e.inlineContentStart,endPos:e.inlineContentEnd}),t}function w(e){const t={_original_dests:e},r=e.find(e=>"link"===e[0])?.[1],n=e.find(e=>"string"===e[0])?.[1];return void 0!==r&&(t.link=r),void 0!==n&&(t.string=n),t}function k(e,{attrs:t,meta:r},n,i){if(void 0!==t){const r=b(t)?t(n,i):t;e.attrs=Object.entries(r)}if(void 0!==r){const t=b(r)?r(n,i):r;e.meta=t}}var D=()=>e=>{(0,c.default)(e)};return build}function requirePlugin$2(){if(hasRequiredPlugin$2)return plugin$2;hasRequiredPlugin$2=1;var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(e,t)=>{for(var r in t)__defProp(e,r,{get:t[r],enumerable:!0})},__copyProps=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of __getOwnPropNames(t))__hasOwnProp.call(e,i)||i===r||__defProp(e,i,{get:()=>t[i],enumerable:!(n=__getOwnPropDesc(t,i))||n.enumerable});return e},__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),plugin_exports={};__export(plugin_exports,{TokenType:()=>TokenType,transform:()=>transform}),plugin$2=__toCommonJS(plugin_exports);var import_utils=requireCommon(),ENV_FLAG_NAME="has-yfm-cut",TokenType={Cut:"yfm_cut",CutOpen:"yfm_cut_open",CutClose:"yfm_cut_close",Title:"yfm_cut_title",TitleOpen:"yfm_cut_title_open",TitleClose:"yfm_cut_title_close",Content:"yfm_cut_content",ContentOpen:"yfm_cut_content_open",ContentClose:"yfm_cut_content_close"},ClassNames={Cut:"yfm-cut",Title:"yfm-cut-title",Content:"yfm-cut-content"},CUT_REGEXP=/^{%\s*cut\s*["|'](.*)["|']\s*%}(.*)?$/;function matchOpenToken(e,t){return"paragraph_open"===e[t].type&&"inline"===e[t+1].type&&e[t+1].content.match(CUT_REGEXP)}function matchCloseToken(e,t){return"paragraph_open"===e[t].type&&"inline"===e[t+1].type&&"{% endcut %}"===e[t+1].content.trim()}function findCloseTokenIdx(e,t){let r=0,n=t;for(;n<e.length;){if(matchOpenToken(e,n))r++;else if(matchCloseToken(e,n)){if(0===r)return n;r--}n++}return null}var cutPlugin=e=>{const t=e=>{const t=e.tokens;let r=0;for(;r<t.length;){const n=matchOpenToken(t,r);if(n){const i=findCloseTokenIdx(t,r+4);if(!i){r+=3;continue}const o=n[1],s=n[2]||"";if(void 0===o)throw new Error(`No title provided for cut ${n[0]}`);const a=new import_utils.AttrsParser(s),l=new e.Token(TokenType.CutOpen,"details",1);l.attrSet("class",ClassNames.Cut),l.map=t[r].map,l.markup="{%",a.apply(l);const c=new e.Token(TokenType.TitleOpen,"summary",1);c.attrSet("class",ClassNames.Title);const u=l.attrGet("id");u&&(c.attrSet("id",u),l.attrSet("id",""));const d=e.md.parseInline(o,e.env)[0],p=new e.Token(TokenType.TitleClose,"summary",-1),h=new e.Token(TokenType.ContentOpen,"div",1);if(h.attrSet("class",ClassNames.Content),l.map){const e=l.map[0]+1,t=l.map[0]+2;h.map=[e,t]}const f=new e.Token(TokenType.ContentClose,"div",-1),m=new e.Token(TokenType.CutClose,"details",-1);m.map=t[i].map;const g=[l,c,d,p,h,...t.slice(r+3,i),f,m];t.splice(r,i-r+3,...g),e.env??={},e.env[ENV_FLAG_NAME]=!0,r++}else r++}};try{e.core.ruler.before("curly_attributes","cut",t)}catch(r){e.core.ruler.push("cut",t)}};function hidden(e,t,r){return t in e||Object.defineProperty(e,t,{enumerable:!1,value:r}),e}function getRuntime(e){return"string"==typeof e?{script:e,style:e}:void 0===e?{script:"_assets/cut-extension.js",style:"_assets/cut-extension.css"}:e}function copyRuntime({runtime:e,output:t},r){if(!e)return;const{join:n,resolve:i}=dynrequire("node:path"),o={"index.js":e.script,"index.css":e.style};for(const[s,a]of Object.entries(o)){const e=n("../runtime",s);r.has(e)||(r.add(e),copy(i(__dirname,e),n(t,a)))}}function copy(e,t){const{mkdirSync:r,copyFileSync:n}=dynrequire("node:fs"),{dirname:i}=dynrequire("node:path");r(i(t),{recursive:!0}),n(e,t)}function dynrequire(module){return eval(`require('${module}')`)}var import_directive=requireBuild(),cutDirective=e=>{e.use((0,import_directive.directiveParser)()),(0,import_directive.registerContainerDirective)(e,{name:"cut",match:(e,t)=>(t.env??={},t.env[ENV_FLAG_NAME]=!0,!0),container:{tag:"details",token:TokenType.Cut,attrs:{class:ClassNames.Cut}},inlineContent:{required:!1,tag:"summary",token:TokenType.Title,attrs:{class:ClassNames.Title}},content:{tag:"div",token:TokenType.Content,attrs:{class:ClassNames.Content}}})},registerTransform=(e,{runtime:t,bundle:r,output:n,directiveSyntax:i})=>{"disabled"!==i&&"enabled"!==i||e.use(cutPlugin),"enabled"!==i&&"only"!==i||e.use(cutDirective),e.core.ruler.push("yfm_cut_after",({env:e})=>{hidden(e,"bundled",new Set),e?.[ENV_FLAG_NAME]&&t&&(e.meta=e.meta||{},e.meta.script=e.meta.script||[],e.meta.script.push(t.script),e.meta.style=e.meta.style||[],e.meta.style.push(t.style),r&&copyRuntime({runtime:t,output:n},e.bundled))})};function transform(e={}){const{bundle:t=!0}=e;if(t&&"string"==typeof e.runtime)throw new TypeError("Option `runtime` should be record when `bundle` is enabled.");const r=e.directiveSyntax||"disabled",n=getRuntime(e.runtime),i=function(e,{output:i="."}={}){registerTransform(e,{directiveSyntax:r,runtime:n,bundle:t,output:i})};return Object.assign(i,{collect(e,{destRoot:i="."}){(new(dynrequire("markdown-it"))).use(e=>{registerTransform(e,{directiveSyntax:r,runtime:n,bundle:t,output:i})}).parse(e,{})}}),i}return plugin$2}var pluginExports$2=requirePlugin$2(),CutNode,CutNode2,CutAttr,CutAttr2;CutNode2=CutNode||(CutNode={}),CutNode2.Cut="yfm_cut",CutNode2.CutTitle="yfm_cut_title",CutNode2.CutContent="yfm_cut_content",CutAttr2=CutAttr||(CutAttr={}),CutAttr2.Class="class",CutAttr2.Markup="data-markup";const cutType=nodeTypeFactory(CutNode.Cut),cutTitleType=nodeTypeFactory(CutNode.CutTitle),cutContentType=nodeTypeFactory(CutNode.CutContent),YfmCutClassName$1={Cut:"yfm-cut",Title:"yfm-cut-title",Content:"yfm-cut-content"},getAttrs$2=e=>{const t=e.attrs?Object.fromEntries(e.attrs):{};return t[CutAttr.Markup]=e.markup,t},parserTokens$3={[CutNode.Cut]:{name:CutNode.Cut,type:"block",getAttrs:getAttrs$2},[CutNode.CutTitle]:{name:CutNode.CutTitle,type:"block"},[CutNode.CutContent]:{name:CutNode.CutContent,type:"block"}},DEFAULT_PLACEHOLDERS$1={Title:"Cut title",Content:"Cut content"},getSchemaSpecs$3=(e,t)=>({[CutNode.Cut]:{attrs:{class:{default:YfmCutClassName$1.Cut},[CutAttr.Markup]:{default:null}},content:`${CutNode.CutTitle} ${CutNode.CutContent}`,group:"block yfm-cut",parseDOM:[{tag:`.${YfmCutClassName$1.Cut}`,getAttrs:e=>({[CutAttr.Markup]:e.getAttribute(CutAttr.Markup)})}],toDOM:e=>["div",e.attrs,0],selectable:!0,allowSelection:!0,defining:!0,complex:"root"},[CutNode.CutTitle]:{attrs:{class:{default:YfmCutClassName$1.Title}},content:"inline*",group:"block yfm-cut",parseDOM:[{tag:`.${YfmCutClassName$1.Title}`}],toDOM:e=>["div",e.attrs,0],placeholder:{content:t?.[CutNode.CutTitle]??e?.yfmCutTitlePlaceholder??DEFAULT_PLACEHOLDERS$1.Title,alwaysVisible:!0},definingAsContext:!0,selectable:!1,allowSelection:!1,complex:"leaf"},[CutNode.CutContent]:{attrs:{class:{default:YfmCutClassName$1.Content}},content:"(block | paragraph)+",group:"block yfm-cut",parseDOM:[{tag:`.${YfmCutClassName$1.Content}`}],toDOM:e=>["div",e.attrs,0],placeholder:{content:t?.[CutNode.CutContent]??e?.yfmCutContentPlaceholder??DEFAULT_PLACEHOLDERS$1.Content,alwaysVisible:!0},definingAsContext:!0,selectable:!1,allowSelection:!1,complex:"leaf"}});function getSerializerTokens({directiveSyntax:e}){const t=t=>e?.shouldSerializeToDirective("yfmCut",t.attrs[CutAttr.Markup]);return{[CutNode.Cut]:(e,r)=>{e.renderContent(r),e.write(t(r)?":::":"{% endcut %}"),e.closeBlock(r)},[CutNode.CutTitle]:(e,r,n)=>{if(t(n))return e.write(":::cut ["),e.renderInline(r),e.write("]"),e.ensureNewLine(),void e.closeBlock();e.write('{% cut "'),r.nodeSize>2?e.renderInline(r):e.write(getPlaceholderContent(r)),e.write('" %}\n'),e.write("\n"),e.closeBlock()},[CutNode.CutContent]:(e,r,n)=>{t(n)?e.renderContent(r):isNodeEmpty(r)?e.write(getPlaceholderContent(r)+"\n\n"):e.renderInline(r)}}}const YfmCutSpecs=(e,t)=>{const r=getSchemaSpecs$3(t,e.context.get("placeholder")),n=e.context.get("directiveSyntax"),i=getSerializerTokens({directiveSyntax:n});e.configureMd(e=>e.use(pluginExports$2.transform({bundle:!1,directiveSyntax:n?.mdPluginValueFor("yfmCut")}))).addNode(CutNode.Cut,()=>({spec:r[CutNode.Cut],toMd:i[CutNode.Cut],fromMd:{tokenSpec:parserTokens$3[CutNode.Cut]},view:t.cutView})).addNode(CutNode.CutTitle,()=>({spec:r[CutNode.CutTitle],toMd:i[CutNode.CutTitle],fromMd:{tokenSpec:parserTokens$3[CutNode.CutTitle]},view:t.cutTitleView})).addNode(CutNode.CutContent,()=>({spec:r[CutNode.CutContent],toMd:i[CutNode.CutContent],fromMd:{tokenSpec:parserTokens$3[CutNode.CutContent]},view:t.cutContentView}))};var index_cjs$3={},hasRequiredIndex_cjs$3;function requireIndex_cjs$3(){if(hasRequiredIndex_cjs$3)return index_cjs$3;hasRequiredIndex_cjs$3=1;const e={};function t(r,n){"string"!=typeof n&&(n=t.defaultChars);const i=function(t){let r=e[t];if(r)return r;r=e[t]=[];for(let e=0;e<128;e++){const t=String.fromCharCode(e);r.push(t)}for(let e=0;e<t.length;e++){const n=t.charCodeAt(e);r[n]="%"+("0"+n.toString(16).toUpperCase()).slice(-2)}return r}(n);return r.replace(/(%[a-f0-9]{2})+/gi,function(e){let t="";for(let r=0,n=e.length;r<n;r+=3){const o=parseInt(e.slice(r+1,r+3),16);if(o<128)t+=i[o];else{if(192==(224&o)&&r+3<n){const n=parseInt(e.slice(r+4,r+6),16);if(128==(192&n)){const e=o<<6&1984|63&n;t+=e<128?"":String.fromCharCode(e),r+=3;continue}}if(224==(240&o)&&r+6<n){const n=parseInt(e.slice(r+4,r+6),16),i=parseInt(e.slice(r+7,r+9),16);if(128==(192&n)&&128==(192&i)){const e=o<<12&61440|n<<6&4032|63&i;t+=e<2048||e>=55296&&e<=57343?"":String.fromCharCode(e),r+=6;continue}}if(240==(248&o)&&r+9<n){const n=parseInt(e.slice(r+4,r+6),16),i=parseInt(e.slice(r+7,r+9),16),s=parseInt(e.slice(r+10,r+12),16);if(128==(192&n)&&128==(192&i)&&128==(192&s)){let e=o<<18&1835008|n<<12&258048|i<<6&4032|63&s;e<65536||e>1114111?t+="":(e-=65536,t+=String.fromCharCode(55296+(e>>10),56320+(1023&e))),r+=9;continue}}t+=""}}return t})}t.defaultChars=";/?:@&=+$,#",t.componentChars="";const r={};function n(e,t,i){"string"!=typeof t&&(i=t,t=n.defaultChars),void 0===i&&(i=!0);const o=function(e){let t=r[e];if(t)return t;t=r[e]=[];for(let r=0;r<128;r++){const e=String.fromCharCode(r);/^[0-9a-z]$/i.test(e)?t.push(e):t.push("%"+("0"+r.toString(16).toUpperCase()).slice(-2))}for(let r=0;r<e.length;r++)t[e.charCodeAt(r)]=e[r];return t}(t);let s="";for(let r=0,n=e.length;r<n;r++){const t=e.charCodeAt(r);if(i&&37===t&&r+2<n&&/^[0-9a-f]{2}$/i.test(e.slice(r+1,r+3)))s+=e.slice(r,r+3),r+=2;else if(t<128)s+=o[t];else if(t>=55296&&t<=57343){if(t>=55296&&t<=56319&&r+1<n){const t=e.charCodeAt(r+1);if(t>=56320&&t<=57343){s+=encodeURIComponent(e[r]+e[r+1]),r++;continue}}s+="%EF%BF%BD"}else s+=encodeURIComponent(e[r])}return s}function i(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}n.defaultChars=";/?:@&=+$,-_.!~*'()#",n.componentChars="-_.!~*'()";const o=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(l),u=["%","/","?",";","#"].concat(c),d=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};return i.prototype.parse=function(e,t){let r,n,i,s=e;if(s=s.trim(),!t&&1===e.split("#").length){const e=a.exec(s);if(e)return this.pathname=e[1],e[2]&&(this.search=e[2]),this}let l=o.exec(s);if(l&&(l=l[0],r=l.toLowerCase(),this.protocol=l,s=s.substr(l.length)),(t||l||s.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i="//"===s.substr(0,2),!i||l&&f[l]||(s=s.substr(2),this.slashes=!0)),!f[l]&&(i||l&&!m[l])){let e,t,r=-1;for(let a=0;a<d.length;a++)n=s.indexOf(d[a]),-1!==n&&(-1===r||n<r)&&(r=n);t=-1===r?s.lastIndexOf("@"):s.lastIndexOf("@",r),-1!==t&&(e=s.slice(0,t),s=s.slice(t+1),this.auth=e),r=-1;for(let a=0;a<u.length;a++)n=s.indexOf(u[a]),-1!==n&&(-1===r||n<r)&&(r=n);-1===r&&(r=s.length),":"===s[r-1]&&r--;const i=s.slice(0,r);s=s.slice(r),this.parseHost(i),this.hostname=this.hostname||"";const o="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!o){const e=this.hostname.split(/\./);for(let t=0,r=e.length;t<r;t++){const r=e[t];if(r&&!r.match(p)){let n="";for(let e=0,t=r.length;e<t;e++)r.charCodeAt(e)>127?n+="x":n+=r[e];if(!n.match(p)){const n=e.slice(0,t),i=e.slice(t+1),o=r.match(h);o&&(n.push(o[1]),i.unshift(o[2])),i.length&&(s=i.join(".")+s),this.hostname=n.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),o&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const c=s.indexOf("#");-1!==c&&(this.hash=s.substr(c),s=s.slice(0,c));const g=s.indexOf("?");return-1!==g&&(this.search=s.substr(g),s=s.slice(0,g)),s&&(this.pathname=s),m[r]&&this.hostname&&!this.pathname&&(this.pathname=""),this},i.prototype.parseHost=function(e){let t=s.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},index_cjs$3.decode=t,index_cjs$3.encode=n,index_cjs$3.format=function(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&-1!==e.hostname.indexOf(":")?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t},index_cjs$3.parse=function(e,t){if(e&&e instanceof i)return e;const r=new i;return r.parse(e,t),r},index_cjs$3}var index_cjs$2={},hasRequiredIndex_cjs$2;function requireIndex_cjs$2(){return hasRequiredIndex_cjs$2||(hasRequiredIndex_cjs$2=1,index_cjs$2.Any=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,index_cjs$2.Cc=/[\0-\x1F\x7F-\x9F]/,index_cjs$2.Cf=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,index_cjs$2.P=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,index_cjs$2.S=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,index_cjs$2.Z=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/),index_cjs$2}var lib={},encode={},encodeHtml={},hasRequiredEncodeHtml;function requireEncodeHtml(){if(hasRequiredEncodeHtml)return encodeHtml;function e(e){for(var t=1;t<e.length;t++)e[t][0]+=e[t-1][0]+1;return e}return hasRequiredEncodeHtml=1,Object.defineProperty(encodeHtml,"__esModule",{value:!0}),encodeHtml.default=new Map(e([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(e([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(e([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(e([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]])),encodeHtml}var _escape={},hasRequired_escape,hasRequiredEncode,hasRequiredLib,index_cjs$1,hasRequiredIndex_cjs$1;function require_escape(){return hasRequired_escape||(hasRequired_escape=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.getCodePoint=e.xmlReplacer=void 0,e.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var t=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);function r(r){for(var n,i="",o=0;null!==(n=e.xmlReplacer.exec(r));){var s=n.index,a=r.charCodeAt(s),l=t.get(a);void 0!==l?(i+=r.substring(o,s)+l,o=s+1):(i+="".concat(r.substring(o,s),"&#x").concat((0,e.getCodePoint)(r,s).toString(16),";"),o=e.xmlReplacer.lastIndex+=Number(55296==(64512&a)))}return i+r.substr(o)}function n(e,t){return function(r){for(var n,i=0,o="";n=e.exec(r);)i!==n.index&&(o+=r.substring(i,n.index)),o+=t.get(n[0].charCodeAt(0)),i=n.index+1;return o+r.substring(i)}}e.getCodePoint=null!=String.prototype.codePointAt?function(e,t){return e.codePointAt(t)}:function(e,t){return 55296==(64512&e.charCodeAt(t))?1024*(e.charCodeAt(t)-55296)+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t)},e.encodeXML=r,e.escape=r,e.escapeUTF8=n(/[&<>'"]/g,t),e.escapeAttribute=n(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),e.escapeText=n(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))}(_escape)),_escape}function requireEncode(){if(hasRequiredEncode)return encode;hasRequiredEncode=1;var e=encode&&encode.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(encode,"__esModule",{value:!0}),encode.encodeNonAsciiHTML=encode.encodeHTML=void 0;var t=e(requireEncodeHtml()),r=require_escape(),n=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function i(e,n){for(var i,o="",s=0;null!==(i=e.exec(n));){var a=i.index;o+=n.substring(s,a);var l=n.charCodeAt(a),c=t.default.get(l);if("object"==typeof c){if(a+1<n.length){var u=n.charCodeAt(a+1),d="number"==typeof c.n?c.n===u?c.o:void 0:c.n.get(u);if(void 0!==d){o+=d,s=e.lastIndex+=1;continue}}c=c.v}if(void 0!==c)o+=c,s=a+1;else{var p=(0,r.getCodePoint)(n,a);o+="&#x".concat(p.toString(16),";"),s=e.lastIndex+=Number(p!==l)}}return o+n.substr(s)}return encode.encodeHTML=function(e){return i(n,e)},encode.encodeNonAsciiHTML=function(e){return i(r.xmlReplacer,e)},encode}function requireLib(){return hasRequiredLib||(hasRequiredLib=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXMLStrict=e.decodeHTML5Strict=e.decodeHTML4Strict=e.decodeHTML5=e.decodeHTML4=e.decodeHTMLAttribute=e.decodeHTMLStrict=e.decodeHTML=e.decodeXML=e.DecodingMode=e.EntityDecoder=e.encodeHTML5=e.encodeHTML4=e.encodeNonAsciiHTML=e.encodeHTML=e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.encode=e.decodeStrict=e.decode=e.EncodingMode=e.EntityLevel=void 0;var t,r,n,i,o=requireDecode$1(),s=requireEncode(),a=require_escape();function l(e,r){if(void 0===r&&(r=t.XML),("number"==typeof r?r:r.level)===t.HTML){var n="object"==typeof r?r.mode:void 0;return(0,o.decodeHTML)(e,n)}return(0,o.decodeXML)(e)}(r=t=e.EntityLevel||(e.EntityLevel={}))[r.XML=0]="XML",r[r.HTML=1]="HTML",(i=n=e.EncodingMode||(e.EncodingMode={}))[i.UTF8=0]="UTF8",i[i.ASCII=1]="ASCII",i[i.Extensive=2]="Extensive",i[i.Attribute=3]="Attribute",i[i.Text=4]="Text",e.decode=l,e.decodeStrict=function(e,r){var n;void 0===r&&(r=t.XML);var i="number"==typeof r?{level:r}:r;return null!==(n=i.mode)&&void 0!==n||(i.mode=o.DecodingMode.Strict),l(e,i)},e.encode=function(e,r){void 0===r&&(r=t.XML);var i="number"==typeof r?{level:r}:r;return i.mode===n.UTF8?(0,a.escapeUTF8)(e):i.mode===n.Attribute?(0,a.escapeAttribute)(e):i.mode===n.Text?(0,a.escapeText)(e):i.level===t.HTML?i.mode===n.ASCII?(0,s.encodeNonAsciiHTML)(e):(0,s.encodeHTML)(e):(0,a.encodeXML)(e)};var c=require_escape();Object.defineProperty(e,"encodeXML",{enumerable:!0,get:function(){return c.encodeXML}}),Object.defineProperty(e,"escape",{enumerable:!0,get:function(){return c.escape}}),Object.defineProperty(e,"escapeUTF8",{enumerable:!0,get:function(){return c.escapeUTF8}}),Object.defineProperty(e,"escapeAttribute",{enumerable:!0,get:function(){return c.escapeAttribute}}),Object.defineProperty(e,"escapeText",{enumerable:!0,get:function(){return c.escapeText}});var u=requireEncode();Object.defineProperty(e,"encodeHTML",{enumerable:!0,get:function(){return u.encodeHTML}}),Object.defineProperty(e,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return u.encodeNonAsciiHTML}}),Object.defineProperty(e,"encodeHTML4",{enumerable:!0,get:function(){return u.encodeHTML}}),Object.defineProperty(e,"encodeHTML5",{enumerable:!0,get:function(){return u.encodeHTML}});var d=requireDecode$1();Object.defineProperty(e,"EntityDecoder",{enumerable:!0,get:function(){return d.EntityDecoder}}),Object.defineProperty(e,"DecodingMode",{enumerable:!0,get:function(){return d.DecodingMode}}),Object.defineProperty(e,"decodeXML",{enumerable:!0,get:function(){return d.decodeXML}}),Object.defineProperty(e,"decodeHTML",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(e,"decodeHTMLStrict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTMLAttribute",{enumerable:!0,get:function(){return d.decodeHTMLAttribute}}),Object.defineProperty(e,"decodeHTML4",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(e,"decodeHTML5",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(e,"decodeHTML4Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML5Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(e,"decodeXMLStrict",{enumerable:!0,get:function(){return d.decodeXML}})}(lib)),lib}function requireIndex_cjs$1(){if(hasRequiredIndex_cjs$1)return index_cjs$1;hasRequiredIndex_cjs$1=1;var e=requireIndex_cjs$2();function t(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(r){e[r]=t[r]})}),e}function r(e){return Object.prototype.toString.call(e)}function n(e){return"[object Function]"===r(e)}function i(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const o={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1},s={"http:":{validate:function(e,t,r){const n=e.slice(t);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,r){const n=e.slice(t);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,r){const n=e.slice(t);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},a="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function l(t){const o=t.re=function(t){const r={};t=t||{},r.src_Any=e.Any.source,r.src_Cc=e.Cc.source,r.src_Z=e.Z.source,r.src_P=e.P.source,r.src_ZPCc=[r.src_Z,r.src_P,r.src_Cc].join("|"),r.src_ZCc=[r.src_Z,r.src_Cc].join("|");return r.src_pseudo_letter="(?:(?![><]|"+r.src_ZPCc+")"+r.src_Any+")",r.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",r.src_auth="(?:(?:(?!"+r.src_ZCc+"|[@/\\[\\]()]).)+@)?",r.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",r.src_host_terminator="(?=$|[><]|"+r.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+r.src_ZPCc+"))",r.src_path="(?:[/?#](?:(?!"+r.src_ZCc+"|[><]|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+r.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+r.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+r.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+r.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+r.src_ZCc+"|[']).)+\\'|\\'(?="+r.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+r.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+r.src_ZCc+"|$)|;(?!"+r.src_ZCc+"|$)|\\!+(?!"+r.src_ZCc+"|[!]|$)|\\?(?!"+r.src_ZCc+"|[?]|$))+|\\/)?",r.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',r.src_xn="xn--[a-z0-9\\-]{1,59}",r.src_domain_root="(?:"+r.src_xn+"|"+r.src_pseudo_letter+"{1,63})",r.src_domain="(?:"+r.src_xn+"|(?:"+r.src_pseudo_letter+")|(?:"+r.src_pseudo_letter+"(?:-|"+r.src_pseudo_letter+"){0,61}"+r.src_pseudo_letter+"))",r.src_host="(?:(?:(?:(?:"+r.src_domain+")\\.)*"+r.src_domain+"))",r.tpl_host_fuzzy="(?:"+r.src_ip4+"|(?:(?:(?:"+r.src_domain+")\\.)+(?:%TLDS%)))",r.tpl_host_no_ip_fuzzy="(?:(?:(?:"+r.src_domain+")\\.)+(?:%TLDS%))",r.src_host_strict=r.src_host+r.src_host_terminator,r.tpl_host_fuzzy_strict=r.tpl_host_fuzzy+r.src_host_terminator,r.src_host_port_strict=r.src_host+r.src_port+r.src_host_terminator,r.tpl_host_port_fuzzy_strict=r.tpl_host_fuzzy+r.src_port+r.src_host_terminator,r.tpl_host_port_no_ip_fuzzy_strict=r.tpl_host_no_ip_fuzzy+r.src_port+r.src_host_terminator,r.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+r.src_ZPCc+"|>|$))",r.tpl_email_fuzzy='(^|[><]|"|\\(|'+r.src_ZCc+")("+r.src_email_name+"@"+r.tpl_host_fuzzy_strict+")",r.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+r.src_ZPCc+"))((?![$+<=>^`|])"+r.tpl_host_port_fuzzy_strict+r.src_path+")",r.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+r.src_ZPCc+"))((?![$+<=>^`|])"+r.tpl_host_port_no_ip_fuzzy_strict+r.src_path+")",r}(t.__opts__),s=t.__tlds__.slice();function a(e){return e.replace("%TLDS%",o.src_tlds)}t.onCompile(),t.__tlds_replaced__||s.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),s.push(o.src_xn),o.src_tlds=s.join("|"),o.email_fuzzy=RegExp(a(o.tpl_email_fuzzy),"i"),o.link_fuzzy=RegExp(a(o.tpl_link_fuzzy),"i"),o.link_no_ip_fuzzy=RegExp(a(o.tpl_link_no_ip_fuzzy),"i"),o.host_fuzzy_test=RegExp(a(o.tpl_host_fuzzy_test),"i");const l=[];function c(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}t.__compiled__={},Object.keys(t.__schemas__).forEach(function(e){const i=t.__schemas__[e];if(null===i)return;const o={validate:null,link:null};if(t.__compiled__[e]=o,"[object Object]"===r(i))return"[object RegExp]"!==r(i.validate)?n(i.validate)?o.validate=i.validate:c(e,i):o.validate=function(e){return function(t,r){const n=t.slice(r);return e.test(n)?n.match(e)[0].length:0}}(i.validate),void(n(i.normalize)?o.normalize=i.normalize:i.normalize?c(e,i):o.normalize=function(e,t){t.normalize(e)});!function(e){return"[object String]"===r(e)}(i)?c(e,i):l.push(e)}),l.forEach(function(e){t.__compiled__[t.__schemas__[e]]&&(t.__compiled__[e].validate=t.__compiled__[t.__schemas__[e]].validate,t.__compiled__[e].normalize=t.__compiled__[t.__schemas__[e]].normalize)}),t.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};const u=Object.keys(t.__compiled__).filter(function(e){return e.length>0&&t.__compiled__[e]}).map(i).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+o.src_ZPCc+"))("+u+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+o.src_ZPCc+"))("+u+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(t)}function c(e,t){const r=e.__index__,n=e.__last_index__,i=e.__text_cache__.slice(r,n);this.schema=e.__schema__.toLowerCase(),this.index=r+t,this.lastIndex=n+t,this.raw=i,this.text=i,this.url=i}function u(e,t){const r=new c(e,t);return e.__compiled__[r.schema].normalize(r,e),r}function d(e,r){if(!(this instanceof d))return new d(e,r);var n;r||(n=e,Object.keys(n||{}).reduce(function(e,t){return e||o.hasOwnProperty(t)},!1)&&(r=e,e={})),this.__opts__=t({},o,r),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=t({},s,e),this.__compiled__={},this.__tlds__=a,this.__tlds_replaced__=!1,this.re={},l(this)}return d.prototype.add=function(e,t){return this.__schemas__[e]=t,l(this),this},d.prototype.set=function(e){return this.__opts__=t(this.__opts__,e),this},d.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let t,r,n,i,o,s,a,l,c;if(this.re.schema_test.test(e))for(a=this.re.schema_search,a.lastIndex=0;null!==(t=a.exec(e));)if(i=this.testSchemaAt(e,t[2],a.lastIndex),i){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+i;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test),l>=0&&(this.__index__<0||l<this.__index__)&&null!==(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=e.indexOf("@"),c>=0&&null!==(n=e.match(this.re.email_fuzzy))&&(o=n.index+n[1].length,s=n.index+n[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=s))),this.__index__>=0},d.prototype.pretest=function(e){return this.re.pretest.test(e)},d.prototype.testSchemaAt=function(e,t,r){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,r,this):0},d.prototype.match=function(e){const t=[];let r=0;this.__index__>=0&&this.__text_cache__===e&&(t.push(u(this,r)),r=this.__last_index__);let n=r?e.slice(r):e;for(;this.test(n);)t.push(u(this,r)),n=n.slice(this.__last_index__),r+=this.__last_index__;return t.length?t:null},d.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const t=this.re.schema_at_start.exec(e);if(!t)return null;const r=this.testSchemaAt(e,t[2],t[0].length);return r?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+r,u(this,0)):null},d.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(e,t,r){return e!==r[t-1]}).reverse(),l(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,l(this),this)},d.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},d.prototype.onCompile=function(){},index_cjs$1=d}const require$$4=getAugmentedNamespace(punycode_es6);var index_cjs,hasRequiredIndex_cjs,plugin$1,hasRequiredPlugin$1;function requireIndex_cjs(){if(hasRequiredIndex_cjs)return index_cjs;hasRequiredIndex_cjs=1;var e=requireIndex_cjs$3(),t=requireIndex_cjs$2(),r=requireLib(),n=requireIndex_cjs$1(),i=require$$4;function o(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var s=o(e),a=o(t);function l(e){return"[object String]"===function(e){return Object.prototype.toString.call(e)}(e)}const c=Object.prototype.hasOwnProperty;function u(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t){if("object"!=typeof t)throw new TypeError(t+"must be object");Object.keys(t).forEach(function(r){e[r]=t[r]})}}),e}function d(e,t,r){return[].concat(e.slice(0,t),r,e.slice(t+1))}function p(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||!(65535&~e&&65534!=(65535&e))||e>=0&&e<=8||11===e||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function h(e){if(e>65535){const t=55296+((e-=65536)>>10),r=56320+(1023&e);return String.fromCharCode(t,r)}return String.fromCharCode(e)}const f=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,m=new RegExp(f.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),g=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function b(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(m,function(e,t,n){return t||function(e,t){if(35===t.charCodeAt(0)&&g.test(t)){const r="x"===t[1].toLowerCase()?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return p(r)?h(r):e}const n=r.decodeHTML(e);return n!==e?n:e}(e,n)})}const y=/[&<>"]/,T=/[&<>"]/g,E={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function O(e){return E[e]}function S(e){return y.test(e)?e.replace(T,O):e}const x=/[.?*+^$[\]\\(){}|-]/g;function v(e){switch(e){case 9:case 32:return!0}return!1}function _(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function A(e){return a.P.test(e)||a.S.test(e)}function C(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function w(e){return e=e.trim().replace(/\s+/g," "),""==="".toLowerCase()&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const k={mdurl:s,ucmicro:a};var D=Object.freeze({__proto__:null,arrayReplaceAt:d,assign:u,escapeHtml:S,escapeRE:function(e){return e.replace(x,"\\$&")},fromCodePoint:h,has:function(e,t){return c.call(e,t)},isMdAsciiPunct:C,isPunctChar:A,isSpace:v,isString:l,isValidEntityCode:p,isWhiteSpace:_,lib:k,normalizeReference:w,unescapeAll:b,unescapeMd:function(e){return e.indexOf("\\")<0?e:e.replace(f,"$1")}}),I=Object.freeze({__proto__:null,parseLinkDestination:function(e,t,r){let n,i=t;const o={ok:!1,pos:0,str:""};if(60===e.charCodeAt(i)){for(i++;i<r;){if(n=e.charCodeAt(i),10===n)return o;if(60===n)return o;if(62===n)return o.pos=i+1,o.str=b(e.slice(t+1,i)),o.ok=!0,o;92===n&&i+1<r?i+=2:i++}return o}let s=0;for(;i<r&&(n=e.charCodeAt(i),32!==n)&&!(n<32||127===n);)if(92===n&&i+1<r){if(32===e.charCodeAt(i+1))break;i+=2}else{if(40===n&&(s++,s>32))return o;if(41===n){if(0===s)break;s--}i++}return t===i||0!==s||(o.str=b(e.slice(t,i)),o.pos=i,o.ok=!0),o},parseLinkLabel:function(e,t,r){let n,i,o,s;const a=e.posMax,l=e.pos;for(e.pos=t+1,n=1;e.pos<a;){if(o=e.src.charCodeAt(e.pos),93===o&&(n--,0===n)){i=!0;break}if(s=e.pos,e.md.inline.skipToken(e),91===o)if(s===e.pos-1)n++;else if(r)return e.pos=l,-1}let c=-1;return i&&(c=e.pos),e.pos=l,c},parseLinkTitle:function(e,t,r,n){let i,o=t;const s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(n)s.str=n.str,s.marker=n.marker;else{if(o>=r)return s;let n=e.charCodeAt(o);if(34!==n&&39!==n&&40!==n)return s;t++,o++,40===n&&(n=41),s.marker=n}for(;o<r;){if(i=e.charCodeAt(o),i===s.marker)return s.pos=o+1,s.str+=b(e.slice(t,o)),s.ok=!0,s;if(40===i&&41===s.marker)return s;92===i&&o+1<r&&o++,o++}return s.can_continue=!0,s.str+=b(e.slice(t,o)),s}});const R={};function N(){this.rules=u({},R)}function P(){this.__rules__=[],this.__cache__=null}function M(e,t,r){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}function $(e,t,r){this.src=e,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=t}R.code_inline=function(e,t,r,n,i){const o=e[t];return"<code"+i.renderAttrs(o)+">"+S(o.content)+"</code>"},R.code_block=function(e,t,r,n,i){const o=e[t];return"<pre"+i.renderAttrs(o)+"><code>"+S(e[t].content)+"</code></pre>\n"},R.fence=function(e,t,r,n,i){const o=e[t],s=o.info?b(o.info).trim():"";let a,l="",c="";if(s){const e=s.split(/(\s+)/g);l=e[0],c=e.slice(2).join("")}if(a=r.highlight&&r.highlight(o.content,l,c)||S(o.content),0===a.indexOf("<pre"))return a+"\n";if(s){const e=o.attrIndex("class"),t=o.attrs?o.attrs.slice():[];e<0?t.push(["class",r.langPrefix+l]):(t[e]=t[e].slice(),t[e][1]+=" "+r.langPrefix+l);const n={attrs:t};return`<pre><code${i.renderAttrs(n)}>${a}</code></pre>\n`}return`<pre><code${i.renderAttrs(o)}>${a}</code></pre>\n`},R.image=function(e,t,r,n,i){const o=e[t];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,r,n),i.renderToken(e,t,r)},R.hardbreak=function(e,t,r){return r.xhtmlOut?"<br />\n":"<br>\n"},R.softbreak=function(e,t,r){return r.breaks?r.xhtmlOut?"<br />\n":"<br>\n":"\n"},R.text=function(e,t){return S(e[t].content)},R.html_block=function(e,t){return e[t].content},R.html_inline=function(e,t){return e[t].content},N.prototype.renderAttrs=function(e){let t,r,n;if(!e.attrs)return"";for(n="",t=0,r=e.attrs.length;t<r;t++)n+=" "+S(e.attrs[t][0])+'="'+S(e.attrs[t][1])+'"';return n},N.prototype.renderToken=function(e,t,r){const n=e[t];let i="";if(n.hidden)return"";n.block&&-1!==n.nesting&&t&&e[t-1].hidden&&(i+="\n"),i+=(-1===n.nesting?"</":"<")+n.tag,i+=this.renderAttrs(n),0===n.nesting&&r.xhtmlOut&&(i+=" /");let o=!1;if(n.block&&(o=!0,1===n.nesting&&t+1<e.length)){const r=e[t+1];("inline"===r.type||r.hidden||-1===r.nesting&&r.tag===n.tag)&&(o=!1)}return i+=o?">\n":">",i},N.prototype.renderInline=function(e,t,r){let n="";const i=this.rules;for(let o=0,s=e.length;o<s;o++){const s=e[o].type;void 0!==i[s]?n+=i[s](e,o,t,r,this):n+=this.renderToken(e,o,t)}return n},N.prototype.renderInlineAsText=function(e,t,r){let n="";for(let i=0,o=e.length;i<o;i++)switch(e[i].type){case"text":case"html_inline":case"html_block":n+=e[i].content;break;case"image":n+=this.renderInlineAsText(e[i].children,t,r);break;case"softbreak":case"hardbreak":n+="\n"}return n},N.prototype.render=function(e,t,r){let n="";const i=this.rules;for(let o=0,s=e.length;o<s;o++){const s=e[o].type;"inline"===s?n+=this.renderInline(e[o].children,t,r):void 0!==i[s]?n+=i[s](e,o,t,r,this):n+=this.renderToken(e,o,t,r)}return n},P.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1},P.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(e){e.enabled&&e.alt.forEach(function(e){t.indexOf(e)<0&&t.push(e)})}),e.__cache__={},t.forEach(function(t){e.__cache__[t]=[],e.__rules__.forEach(function(r){r.enabled&&(t&&r.alt.indexOf(t)<0||e.__cache__[t].push(r.fn))})})},P.prototype.at=function(e,t,r){const n=this.__find__(e),i=r||{};if(-1===n)throw new Error("Parser rule not found: "+e);this.__rules__[n].fn=t,this.__rules__[n].alt=i.alt||[],this.__cache__=null},P.prototype.before=function(e,t,r,n){const i=this.__find__(e),o=n||{};if(-1===i)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null},P.prototype.after=function(e,t,r,n){const i=this.__find__(e),o=n||{};if(-1===i)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null},P.prototype.push=function(e,t,r){const n=r||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:n.alt||[]}),this.__cache__=null},P.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const r=[];return e.forEach(function(e){const n=this.__find__(e);if(n<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[n].enabled=!0,r.push(e)},this),this.__cache__=null,r},P.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(e){e.enabled=!1}),this.enable(e,t)},P.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const r=[];return e.forEach(function(e){const n=this.__find__(e);if(n<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[n].enabled=!1,r.push(e)},this),this.__cache__=null,r},P.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]},M.prototype.attrIndex=function(e){if(!this.attrs)return-1;const t=this.attrs;for(let r=0,n=t.length;r<n;r++)if(t[r][0]===e)return r;return-1},M.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]},M.prototype.attrSet=function(e,t){const r=this.attrIndex(e),n=[e,t];r<0?this.attrPush(n):this.attrs[r]=n},M.prototype.attrGet=function(e){const t=this.attrIndex(e);let r=null;return t>=0&&(r=this.attrs[t][1]),r},M.prototype.attrJoin=function(e,t){const r=this.attrIndex(e);r<0?this.attrPush([e,t]):this.attrs[r][1]=this.attrs[r][1]+" "+t},$.prototype.Token=M;const L=/\r\n?|\n/g,B=/\0/g;function F(e){return/^<a[>\s]/i.test(e)}function q(e){return/^<\/a\s*>/i.test(e)}const j=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,G=/\((c|tm|r)\)/i,H=/\((c|tm|r)\)/gi,Q={c:"",r:"",tm:""};function z(e,t){return Q[t.toLowerCase()]}function V(e){let t=0;for(let r=e.length-1;r>=0;r--){const n=e[r];"text"!==n.type||t||(n.content=n.content.replace(H,z)),"link_open"===n.type&&"auto"===n.info&&t--,"link_close"===n.type&&"auto"===n.info&&t++}}function U(e){let t=0;for(let r=e.length-1;r>=0;r--){const n=e[r];"text"!==n.type||t||j.test(n.content)&&(n.content=n.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/gm,"$1").replace(/(^|\s)--(?=\s|$)/gm,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/gm,"$1")),"link_open"===n.type&&"auto"===n.info&&t--,"link_close"===n.type&&"auto"===n.info&&t++}}const W=/['"]/,Y=/['"]/g;function X(e,t,r){return e.slice(0,t)+r+e.slice(t+1)}function Z(e,t){let r;const n=[];for(let i=0;i<e.length;i++){const o=e[i],s=e[i].level;for(r=n.length-1;r>=0&&!(n[r].level<=s);r--);if(n.length=r+1,"text"!==o.type)continue;let a=o.content,l=0,c=a.length;e:for(;l<c;){Y.lastIndex=l;const u=Y.exec(a);if(!u)break;let d=!0,p=!0;l=u.index+1;const h="'"===u[0];let f=32;if(u.index-1>=0)f=a.charCodeAt(u.index-1);else for(r=i-1;r>=0&&"softbreak"!==e[r].type&&"hardbreak"!==e[r].type;r--)if(e[r].content){f=e[r].content.charCodeAt(e[r].content.length-1);break}let m=32;if(l<c)m=a.charCodeAt(l);else for(r=i+1;r<e.length&&"softbreak"!==e[r].type&&"hardbreak"!==e[r].type;r++)if(e[r].content){m=e[r].content.charCodeAt(0);break}const g=C(f)||A(String.fromCharCode(f)),b=C(m)||A(String.fromCharCode(m)),y=_(f),T=_(m);if(T?d=!1:b&&(y||g||(d=!1)),y?p=!1:g&&(T||b||(p=!1)),34===m&&'"'===u[0]&&f>=48&&f<=57&&(p=d=!1),d&&p&&(d=g,p=b),d||p){if(p)for(r=n.length-1;r>=0;r--){let d=n[r];if(n[r].level<s)break;if(d.single===h&&n[r].level===s){let s,p;d=n[r],h?(s=t.md.options.quotes[2],p=t.md.options.quotes[3]):(s=t.md.options.quotes[0],p=t.md.options.quotes[1]),o.content=X(o.content,u.index,p),e[d.token].content=X(e[d.token].content,d.pos,s),l+=p.length-1,d.token===i&&(l+=s.length-1),a=o.content,c=a.length,n.length=r;continue e}}d?n.push({token:i,pos:u.index,single:h,level:s}):p&&h&&(o.content=X(o.content,u.index,""))}else h&&(o.content=X(o.content,u.index,""))}}}const K=[["normalize",function(e){let t;t=e.src.replace(L,"\n"),t=t.replace(B,""),e.src=t}],["block",function(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}],["inline",function(e){const t=e.tokens;for(let r=0,n=t.length;r<n;r++){const n=t[r];"inline"===n.type&&e.md.inline.parse(n.content,e.md,e.env,n.children)}}],["linkify",function(e){const t=e.tokens;if(e.md.options.linkify)for(let r=0,n=t.length;r<n;r++){if("inline"!==t[r].type||!e.md.linkify.pretest(t[r].content))continue;let n=t[r].children,i=0;for(let o=n.length-1;o>=0;o--){const s=n[o];if("link_close"!==s.type){if("html_inline"===s.type&&(F(s.content)&&i>0&&i--,q(s.content)&&i++),!(i>0)&&"text"===s.type&&e.md.linkify.test(s.content)){const i=s.content;let a=e.md.linkify.match(i);const l=[];let c=s.level,u=0;a.length>0&&0===a[0].index&&o>0&&"text_special"===n[o-1].type&&(a=a.slice(1));for(let t=0;t<a.length;t++){const r=a[t].url,n=e.md.normalizeLink(r);if(!e.md.validateLink(n))continue;let o=a[t].text;o=a[t].schema?"mailto:"!==a[t].schema||/^mailto:/i.test(o)?e.md.normalizeLinkText(o):e.md.normalizeLinkText("mailto:"+o).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+o).replace(/^http:\/\//,"");const s=a[t].index;if(s>u){const t=new e.Token("text","",0);t.content=i.slice(u,s),t.level=c,l.push(t)}const d=new e.Token("link_open","a",1);d.attrs=[["href",n]],d.level=c++,d.markup="linkify",d.info="auto",l.push(d);const p=new e.Token("text","",0);p.content=o,p.level=c,l.push(p);const h=new e.Token("link_close","a",-1);h.level=--c,h.markup="linkify",h.info="auto",l.push(h),u=a[t].lastIndex}if(u<i.length){const t=new e.Token("text","",0);t.content=i.slice(u),t.level=c,l.push(t)}t[r].children=n=d(n,o,l)}}else for(o--;n[o].level!==s.level&&"link_open"!==n[o].type;)o--}}}],["replacements",function(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&(G.test(e.tokens[t].content)&&V(e.tokens[t].children),j.test(e.tokens[t].content)&&U(e.tokens[t].children))}],["smartquotes",function(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&W.test(e.tokens[t].content)&&Z(e.tokens[t].children,e)}],["text_join",function(e){let t,r;const n=e.tokens,i=n.length;for(let o=0;o<i;o++){if("inline"!==n[o].type)continue;const e=n[o].children,i=e.length;for(t=0;t<i;t++)"text_special"===e[t].type&&(e[t].type="text");for(t=r=0;t<i;t++)"text"===e[t].type&&t+1<i&&"text"===e[t+1].type?e[t+1].content=e[t].content+e[t+1].content:(t!==r&&(e[r]=e[t]),r++);t!==r&&(e.length=r)}}]];function J(){this.ruler=new P;for(let e=0;e<K.length;e++)this.ruler.push(K[e][0],K[e][1])}function ee(e,t,r,n){this.src=e,this.md=t,this.env=r,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let o=0,s=0,a=0,l=0,c=i.length,u=!1;s<c;s++){const e=i.charCodeAt(s);if(!u){if(v(e)){a++,9===e?l+=4-l%4:l++;continue}u=!0}10!==e&&s!==c-1||(10!==e&&s++,this.bMarks.push(o),this.eMarks.push(s),this.tShift.push(a),this.sCount.push(l),this.bsCount.push(0),u=!1,a=0,l=0,o=s+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}function te(e,t){const r=e.bMarks[t]+e.tShift[t],n=e.eMarks[t];return e.src.slice(r,n)}function re(e){const t=[],r=e.length;let n=0,i=e.charCodeAt(n),o=!1,s=0,a="";for(;n<r;)124===i&&(o?(a+=e.substring(s,n-1),s=n):(t.push(a+e.substring(s,n)),a="",s=n+1)),o=92===i,n++,i=e.charCodeAt(n);return t.push(a+e.substring(s)),t}function ne(e,t){const r=e.eMarks[t];let n=e.bMarks[t]+e.tShift[t];const i=e.src.charCodeAt(n++);return 42!==i&&45!==i&&43!==i||n<r&&!v(e.src.charCodeAt(n))?-1:n}function ie(e,t){const r=e.bMarks[t]+e.tShift[t],n=e.eMarks[t];let i=r;if(i+1>=n)return-1;let o=e.src.charCodeAt(i++);if(o<48||o>57)return-1;for(;;){if(i>=n)return-1;if(o=e.src.charCodeAt(i++),!(o>=48&&o<=57)){if(41===o||46===o)break;return-1}if(i-r>=10)return-1}return i<n&&(o=e.src.charCodeAt(i),!v(o))?-1:i}J.prototype.process=function(e){const t=this.ruler.getRules("");for(let r=0,n=t.length;r<n;r++)t[r](e)},J.prototype.State=$,ee.prototype.push=function(e,t,r){const n=new M(e,t,r);return n.block=!0,r<0&&this.level--,n.level=this.level,r>0&&this.level++,this.tokens.push(n),n},ee.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},ee.prototype.skipEmptyLines=function(e){for(let t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},ee.prototype.skipSpaces=function(e){for(let t=this.src.length;e<t&&v(this.src.charCodeAt(e));e++);return e},ee.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!v(this.src.charCodeAt(--e)))return e+1;return e},ee.prototype.skipChars=function(e,t){for(let r=this.src.length;e<r&&this.src.charCodeAt(e)===t;e++);return e},ee.prototype.skipCharsBack=function(e,t,r){if(e<=r)return e;for(;e>r;)if(t!==this.src.charCodeAt(--e))return e+1;return e},ee.prototype.getLines=function(e,t,r,n){if(e>=t)return"";const i=new Array(t-e);for(let o=0,s=e;s<t;s++,o++){let e=0;const a=this.bMarks[s];let l,c=a;for(l=s+1<t||n?this.eMarks[s]+1:this.eMarks[s];c<l&&e<r;){const t=this.src.charCodeAt(c);if(v(t))9===t?e+=4-(e+this.bsCount[s])%4:e++;else{if(!(c-a<this.tShift[s]))break;e++}c++}i[o]=e>r?new Array(e-r+1).join(" ")+this.src.slice(c,l):this.src.slice(c,l)}return i.join("")},ee.prototype.Token=M;const oe="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",se="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",ae=new RegExp("^(?:"+oe+"|"+se+"|\x3c!---?>|\x3c!--(?:[^-]|-[^-]|--[^>])*--\x3e|<[?][\\s\\S]*?[?]>|<![A-Za-z][^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),le=new RegExp("^(?:"+oe+"|"+se+")"),ce=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"].join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(le.source+"\\s*$"),/^$/,!1]],ue=[["table",function(e,t,r,n){if(t+2>r)return!1;let i=t+1;if(e.sCount[i]<e.blkIndent)return!1;if(e.sCount[i]-e.blkIndent>=4)return!1;let o=e.bMarks[i]+e.tShift[i];if(o>=e.eMarks[i])return!1;const s=e.src.charCodeAt(o++);if(124!==s&&45!==s&&58!==s)return!1;if(o>=e.eMarks[i])return!1;const a=e.src.charCodeAt(o++);if(124!==a&&45!==a&&58!==a&&!v(a))return!1;if(45===s&&v(a))return!1;for(;o<e.eMarks[i];){const t=e.src.charCodeAt(o);if(124!==t&&45!==t&&58!==t&&!v(t))return!1;o++}let l=te(e,t+1),c=l.split("|");const u=[];for(let b=0;b<c.length;b++){const e=c[b].trim();if(!e){if(0===b||b===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(e))return!1;58===e.charCodeAt(e.length-1)?u.push(58===e.charCodeAt(0)?"center":"right"):58===e.charCodeAt(0)?u.push("left"):u.push("")}if(l=te(e,t).trim(),-1===l.indexOf("|"))return!1;if(e.sCount[t]-e.blkIndent>=4)return!1;c=re(l),c.length&&""===c[0]&&c.shift(),c.length&&""===c[c.length-1]&&c.pop();const d=c.length;if(0===d||d!==u.length)return!1;if(n)return!0;const p=e.parentType;e.parentType="table";const h=e.md.block.ruler.getRules("blockquote"),f=[t,0];e.push("table_open","table",1).map=f,e.push("thead_open","thead",1).map=[t,t+1],e.push("tr_open","tr",1).map=[t,t+1];for(let b=0;b<c.length;b++){const t=e.push("th_open","th",1);u[b]&&(t.attrs=[["style","text-align:"+u[b]]]);const r=e.push("inline","",0);r.content=c[b].trim(),r.children=[],e.push("th_close","th",-1)}let m;e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let g=0;for(i=t+2;i<r&&!(e.sCount[i]<e.blkIndent);i++){let n=!1;for(let t=0,o=h.length;t<o;t++)if(h[t](e,i,r,!0)){n=!0;break}if(n)break;if(l=te(e,i).trim(),!l)break;if(e.sCount[i]-e.blkIndent>=4)break;if(c=re(l),c.length&&""===c[0]&&c.shift(),c.length&&""===c[c.length-1]&&c.pop(),g+=d-c.length,g>65536)break;i===t+2&&(e.push("tbody_open","tbody",1).map=m=[t+2,0]),e.push("tr_open","tr",1).map=[i,i+1];for(let t=0;t<d;t++){const r=e.push("td_open","td",1);u[t]&&(r.attrs=[["style","text-align:"+u[t]]]);const n=e.push("inline","",0);n.content=c[t]?c[t].trim():"",n.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return m&&(e.push("tbody_close","tbody",-1),m[1]=i),e.push("table_close","table",-1),f[1]=i,e.parentType=p,e.line=i,!0},["paragraph","reference"]],["code",function(e,t,r){if(e.sCount[t]-e.blkIndent<4)return!1;let n=t+1,i=n;for(;n<r;)if(e.isEmpty(n))n++;else{if(!(e.sCount[n]-e.blkIndent>=4))break;n++,i=n}e.line=i;const o=e.push("code_block","code",0);return o.content=e.getLines(t,i,4+e.blkIndent,!1)+"\n",o.map=[t,e.line],!0}],["fence",function(e,t,r,n){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(i+3>o)return!1;const s=e.src.charCodeAt(i);if(126!==s&&96!==s)return!1;let a=i;i=e.skipChars(i,s);let l=i-a;if(l<3)return!1;const c=e.src.slice(a,i),u=e.src.slice(i,o);if(96===s&&u.indexOf(String.fromCharCode(s))>=0)return!1;if(n)return!0;let d=t,p=!1;for(;!(d++,d>=r||(i=a=e.bMarks[d]+e.tShift[d],o=e.eMarks[d],i<o&&e.sCount[d]<e.blkIndent));)if(e.src.charCodeAt(i)===s&&!(e.sCount[d]-e.blkIndent>=4||(i=e.skipChars(i,s),i-a<l||(i=e.skipSpaces(i),i<o)))){p=!0;break}l=e.sCount[t],e.line=d+(p?1:0);const h=e.push("fence","code",0);return h.info=u,h.content=e.getLines(t+1,d,l,!0),h.markup=c,h.map=[t,e.line],!0},["paragraph","reference","blockquote","list"]],["blockquote",function(e,t,r,n){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];const s=e.lineMax;if(e.sCount[t]-e.blkIndent>=4)return!1;if(62!==e.src.charCodeAt(i))return!1;if(n)return!0;const a=[],l=[],c=[],u=[],d=e.md.block.ruler.getRules("blockquote"),p=e.parentType;e.parentType="blockquote";let h,f=!1;for(h=t;h<r;h++){const t=e.sCount[h]<e.blkIndent;if(i=e.bMarks[h]+e.tShift[h],o=e.eMarks[h],i>=o)break;if(62===e.src.charCodeAt(i++)&&!t){let t,r,n=e.sCount[h]+1;32===e.src.charCodeAt(i)?(i++,n++,r=!1,t=!0):9===e.src.charCodeAt(i)?(t=!0,(e.bsCount[h]+n)%4==3?(i++,n++,r=!1):r=!0):t=!1;let s=n;for(a.push(e.bMarks[h]),e.bMarks[h]=i;i<o;){const t=e.src.charCodeAt(i);if(!v(t))break;9===t?s+=4-(s+e.bsCount[h]+(r?1:0))%4:s++,i++}f=i>=o,l.push(e.bsCount[h]),e.bsCount[h]=e.sCount[h]+1+(t?1:0),c.push(e.sCount[h]),e.sCount[h]=s-n,u.push(e.tShift[h]),e.tShift[h]=i-e.bMarks[h];continue}if(f)break;let n=!1;for(let i=0,o=d.length;i<o;i++)if(d[i](e,h,r,!0)){n=!0;break}if(n){e.lineMax=h,0!==e.blkIndent&&(a.push(e.bMarks[h]),l.push(e.bsCount[h]),u.push(e.tShift[h]),c.push(e.sCount[h]),e.sCount[h]-=e.blkIndent);break}a.push(e.bMarks[h]),l.push(e.bsCount[h]),u.push(e.tShift[h]),c.push(e.sCount[h]),e.sCount[h]=-1}const m=e.blkIndent;e.blkIndent=0;const g=e.push("blockquote_open","blockquote",1);g.markup=">";const b=[t,0];g.map=b,e.md.block.tokenize(e,t,h),e.push("blockquote_close","blockquote",-1).markup=">",e.lineMax=s,e.parentType=p,b[1]=e.line;for(let y=0;y<u.length;y++)e.bMarks[y+t]=a[y],e.tShift[y+t]=u[y],e.sCount[y+t]=c[y],e.bsCount[y+t]=l[y];return e.blkIndent=m,!0},["paragraph","reference","blockquote","list"]],["hr",function(e,t,r,n){const i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.bMarks[t]+e.tShift[t];const s=e.src.charCodeAt(o++);if(42!==s&&45!==s&&95!==s)return!1;let a=1;for(;o<i;){const t=e.src.charCodeAt(o++);if(t!==s&&!v(t))return!1;t===s&&a++}if(a<3)return!1;if(n)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(a+1).join(String.fromCharCode(s)),!0},["paragraph","reference","blockquote","list"]],["list",function(e,t,r,n){let i,o,s,a,l=t,c=!0;if(e.sCount[l]-e.blkIndent>=4)return!1;if(e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let u,d,p,h=!1;if(n&&"paragraph"===e.parentType&&e.sCount[l]>=e.blkIndent&&(h=!0),(p=ie(e,l))>=0){if(u=!0,s=e.bMarks[l]+e.tShift[l],d=Number(e.src.slice(s,p-1)),h&&1!==d)return!1}else{if(!((p=ne(e,l))>=0))return!1;u=!1}if(h&&e.skipSpaces(p)>=e.eMarks[l])return!1;if(n)return!0;const f=e.src.charCodeAt(p-1),m=e.tokens.length;u?(a=e.push("ordered_list_open","ol",1),1!==d&&(a.attrs=[["start",d]])):a=e.push("bullet_list_open","ul",1);const g=[l,0];a.map=g,a.markup=String.fromCharCode(f);let b=!1;const y=e.md.block.ruler.getRules("list"),T=e.parentType;for(e.parentType="list";l<r;){o=p,i=e.eMarks[l];const t=e.sCount[l]+p-(e.bMarks[l]+e.tShift[l]);let n=t;for(;o<i;){const t=e.src.charCodeAt(o);if(9===t)n+=4-(n+e.bsCount[l])%4;else{if(32!==t)break;n++}o++}const d=o;let h;h=d>=i?1:n-t,h>4&&(h=1);const m=t+h;a=e.push("list_item_open","li",1),a.markup=String.fromCharCode(f);const g=[l,0];a.map=g,u&&(a.info=e.src.slice(s,p-1));const T=e.tight,E=e.tShift[l],O=e.sCount[l],S=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=m,e.tight=!0,e.tShift[l]=d-e.bMarks[l],e.sCount[l]=n,d>=i&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,r):e.md.block.tokenize(e,l,r,!0),e.tight&&!b||(c=!1),b=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=S,e.tShift[l]=E,e.sCount[l]=O,e.tight=T,a=e.push("list_item_close","li",-1),a.markup=String.fromCharCode(f),l=e.line,g[1]=l,l>=r)break;if(e.sCount[l]<e.blkIndent)break;if(e.sCount[l]-e.blkIndent>=4)break;let x=!1;for(let i=0,o=y.length;i<o;i++)if(y[i](e,l,r,!0)){x=!0;break}if(x)break;if(u){if(p=ie(e,l),p<0)break;s=e.bMarks[l]+e.tShift[l]}else if(p=ne(e,l),p<0)break;if(f!==e.src.charCodeAt(p-1))break}return a=u?e.push("ordered_list_close","ol",-1):e.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(f),g[1]=l,e.line=l,e.parentType=T,c&&function(e,t){const r=e.level+2;for(let n=t+2,i=e.tokens.length-2;n<i;n++)e.tokens[n].level===r&&"paragraph_open"===e.tokens[n].type&&(e.tokens[n+2].hidden=!0,e.tokens[n].hidden=!0,n+=2)}(e,m),!0},["paragraph","reference","blockquote"]],["reference",function(e,t,r,n){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t],s=t+1;if(e.sCount[t]-e.blkIndent>=4)return!1;if(91!==e.src.charCodeAt(i))return!1;function a(t){const r=e.lineMax;if(t>=r||e.isEmpty(t))return null;let n=!1;if(e.sCount[t]-e.blkIndent>3&&(n=!0),e.sCount[t]<0&&(n=!0),!n){const n=e.md.block.ruler.getRules("reference"),i=e.parentType;e.parentType="reference";let o=!1;for(let s=0,a=n.length;s<a;s++)if(n[s](e,t,r,!0)){o=!0;break}if(e.parentType=i,o)return null}const i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];return e.src.slice(i,o+1)}let l=e.src.slice(i,o+1);o=l.length;let c=-1;for(i=1;i<o;i++){const e=l.charCodeAt(i);if(91===e)return!1;if(93===e){c=i;break}if(10===e){const e=a(s);null!==e&&(l+=e,o=l.length,s++)}else if(92===e&&(i++,i<o&&10===l.charCodeAt(i))){const e=a(s);null!==e&&(l+=e,o=l.length,s++)}}if(c<0||58!==l.charCodeAt(c+1))return!1;for(i=c+2;i<o;i++){const e=l.charCodeAt(i);if(10===e){const e=a(s);null!==e&&(l+=e,o=l.length,s++)}else if(!v(e))break}const u=e.md.helpers.parseLinkDestination(l,i,o);if(!u.ok)return!1;const d=e.md.normalizeLink(u.str);if(!e.md.validateLink(d))return!1;i=u.pos;const p=i,h=s,f=i;for(;i<o;i++){const e=l.charCodeAt(i);if(10===e){const e=a(s);null!==e&&(l+=e,o=l.length,s++)}else if(!v(e))break}let m,g=e.md.helpers.parseLinkTitle(l,i,o);for(;g.can_continue;){const t=a(s);if(null===t)break;l+=t,i=o,o=l.length,s++,g=e.md.helpers.parseLinkTitle(l,i,o,g)}for(i<o&&f!==i&&g.ok?(m=g.str,i=g.pos):(m="",i=p,s=h);i<o&&v(l.charCodeAt(i));)i++;if(i<o&&10!==l.charCodeAt(i)&&m)for(m="",i=p,s=h;i<o&&v(l.charCodeAt(i));)i++;if(i<o&&10!==l.charCodeAt(i))return!1;const b=w(l.slice(1,c));return!!b&&(n||(void 0===e.env.references&&(e.env.references={}),void 0===e.env.references[b]&&(e.env.references[b]={title:m,href:d}),e.line=s),!0)}],["html_block",function(e,t,r,n){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(i))return!1;let s=e.src.slice(i,o),a=0;for(;a<ce.length&&!ce[a][0].test(s);a++);if(a===ce.length)return!1;if(n)return ce[a][2];let l=t+1;if(!ce[a][1].test(s))for(;l<r&&!(e.sCount[l]<e.blkIndent);l++)if(i=e.bMarks[l]+e.tShift[l],o=e.eMarks[l],s=e.src.slice(i,o),ce[a][1].test(s)){0!==s.length&&l++;break}e.line=l;const c=e.push("html_block","",0);return c.map=[t,l],c.content=e.getLines(t,l,e.blkIndent,!0),!0},["paragraph","reference","blockquote"]],["heading",function(e,t,r,n){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let s=e.src.charCodeAt(i);if(35!==s||i>=o)return!1;let a=1;for(s=e.src.charCodeAt(++i);35===s&&i<o&&a<=6;)a++,s=e.src.charCodeAt(++i);if(a>6||i<o&&!v(s))return!1;if(n)return!0;o=e.skipSpacesBack(o,i);const l=e.skipCharsBack(o,35,i);l>i&&v(e.src.charCodeAt(l-1))&&(o=l),e.line=t+1;const c=e.push("heading_open","h"+String(a),1);c.markup="########".slice(0,a),c.map=[t,e.line];const u=e.push("inline","",0);return u.content=e.src.slice(i,o).trim(),u.map=[t,e.line],u.children=[],e.push("heading_close","h"+String(a),-1).markup="########".slice(0,a),!0},["paragraph","reference","blockquote"]],["lheading",function(e,t,r){const n=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const i=e.parentType;e.parentType="paragraph";let o,s=0,a=t+1;for(;a<r&&!e.isEmpty(a);a++){if(e.sCount[a]-e.blkIndent>3)continue;if(e.sCount[a]>=e.blkIndent){let t=e.bMarks[a]+e.tShift[a];const r=e.eMarks[a];if(t<r&&(o=e.src.charCodeAt(t),(45===o||61===o)&&(t=e.skipChars(t,o),t=e.skipSpaces(t),t>=r))){s=61===o?1:2;break}}if(e.sCount[a]<0)continue;let t=!1;for(let i=0,o=n.length;i<o;i++)if(n[i](e,a,r,!0)){t=!0;break}if(t)break}if(!s)return!1;const l=e.getLines(t,a,e.blkIndent,!1).trim();e.line=a+1;const c=e.push("heading_open","h"+String(s),1);c.markup=String.fromCharCode(o),c.map=[t,e.line];const u=e.push("inline","",0);return u.content=l,u.map=[t,e.line-1],u.children=[],e.push("heading_close","h"+String(s),-1).markup=String.fromCharCode(o),e.parentType=i,!0}],["paragraph",function(e,t,r){const n=e.md.block.ruler.getRules("paragraph"),i=e.parentType;let o=t+1;for(e.parentType="paragraph";o<r&&!e.isEmpty(o);o++){if(e.sCount[o]-e.blkIndent>3)continue;if(e.sCount[o]<0)continue;let t=!1;for(let i=0,s=n.length;i<s;i++)if(n[i](e,o,r,!0)){t=!0;break}if(t)break}const s=e.getLines(t,o,e.blkIndent,!1).trim();e.line=o,e.push("paragraph_open","p",1).map=[t,e.line];const a=e.push("inline","",0);return a.content=s,a.map=[t,e.line],a.children=[],e.push("paragraph_close","p",-1),e.parentType=i,!0}]];function de(){this.ruler=new P;for(let e=0;e<ue.length;e++)this.ruler.push(ue[e][0],ue[e][1],{alt:(ue[e][2]||[]).slice()})}function pe(e,t,r,n){this.src=e,this.env=r,this.md=t,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}function he(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}de.prototype.tokenize=function(e,t,r){const n=this.ruler.getRules(""),i=n.length,o=e.md.options.maxNesting;let s=t,a=!1;for(;s<r&&(e.line=s=e.skipEmptyLines(s),!(s>=r))&&!(e.sCount[s]<e.blkIndent);){if(e.level>=o){e.line=r;break}const t=e.line;let l=!1;for(let o=0;o<i;o++)if(l=n[o](e,s,r,!1),l){if(t>=e.line)throw new Error("block rule didn't increment state.line");break}if(!l)throw new Error("none of the block rules matched");e.tight=!a,e.isEmpty(e.line-1)&&(a=!0),s=e.line,s<r&&e.isEmpty(s)&&(a=!0,s++,e.line=s)}},de.prototype.parse=function(e,t,r,n){if(!e)return;const i=new this.State(e,t,r,n);this.tokenize(i,i.line,i.lineMax)},de.prototype.State=ee,pe.prototype.pushPending=function(){const e=new M("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e},pe.prototype.push=function(e,t,r){this.pending&&this.pushPending();const n=new M(e,t,r);let i=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(i),n},pe.prototype.scanDelims=function(e,t){const r=this.posMax,n=this.src.charCodeAt(e),i=e>0?this.src.charCodeAt(e-1):32;let o=e;for(;o<r&&this.src.charCodeAt(o)===n;)o++;const s=o-e,a=o<r?this.src.charCodeAt(o):32,l=C(i)||A(String.fromCharCode(i)),c=C(a)||A(String.fromCharCode(a)),u=_(i),d=_(a),p=!d&&(!c||u||l),h=!u&&(!l||d||c);return{can_open:p&&(t||!h||l),can_close:h&&(t||!p||c),length:s}},pe.prototype.Token=M;const fe=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i,me=[];for(let $e=0;$e<256;$e++)me.push(0);function ge(e,t){let r;const n=[],i=t.length;for(let o=0;o<i;o++){const i=t[o];if(126!==i.marker)continue;if(-1===i.end)continue;const s=t[i.end];r=e.tokens[i.token],r.type="s_open",r.tag="s",r.nesting=1,r.markup="~~",r.content="",r=e.tokens[s.token],r.type="s_close",r.tag="s",r.nesting=-1,r.markup="~~",r.content="","text"===e.tokens[s.token-1].type&&"~"===e.tokens[s.token-1].content&&n.push(s.token-1)}for(;n.length;){const t=n.pop();let i=t+1;for(;i<e.tokens.length&&"s_close"===e.tokens[i].type;)i++;i--,t!==i&&(r=e.tokens[i],e.tokens[i]=e.tokens[t],e.tokens[t]=r)}}"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){me[e.charCodeAt(0)]=1});var be={tokenize:function(e,t){const r=e.pos,n=e.src.charCodeAt(r);if(t)return!1;if(126!==n)return!1;const i=e.scanDelims(e.pos,!0);let o=i.length;const s=String.fromCharCode(n);if(o<2)return!1;let a;o%2&&(a=e.push("text","",0),a.content=s,o--);for(let l=0;l<o;l+=2)a=e.push("text","",0),a.content=s+s,e.delimiters.push({marker:n,length:0,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0},postProcess:function(e){const t=e.tokens_meta,r=e.tokens_meta.length;ge(e,e.delimiters);for(let n=0;n<r;n++)t[n]&&t[n].delimiters&&ge(e,t[n].delimiters)}};function ye(e,t){for(let r=t.length-1;r>=0;r--){const n=t[r];if(95!==n.marker&&42!==n.marker)continue;if(-1===n.end)continue;const i=t[n.end],o=r>0&&t[r-1].end===n.end+1&&t[r-1].marker===n.marker&&t[r-1].token===n.token-1&&t[n.end+1].token===i.token+1,s=String.fromCharCode(n.marker),a=e.tokens[n.token];a.type=o?"strong_open":"em_open",a.tag=o?"strong":"em",a.nesting=1,a.markup=o?s+s:s,a.content="";const l=e.tokens[i.token];l.type=o?"strong_close":"em_close",l.tag=o?"strong":"em",l.nesting=-1,l.markup=o?s+s:s,l.content="",o&&(e.tokens[t[r-1].token].content="",e.tokens[t[n.end+1].token].content="",r--)}}var Te={tokenize:function(e,t){const r=e.pos,n=e.src.charCodeAt(r);if(t)return!1;if(95!==n&&42!==n)return!1;const i=e.scanDelims(e.pos,42===n);for(let o=0;o<i.length;o++)e.push("text","",0).content=String.fromCharCode(n),e.delimiters.push({marker:n,length:i.length,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0},postProcess:function(e){const t=e.tokens_meta,r=e.tokens_meta.length;ye(e,e.delimiters);for(let n=0;n<r;n++)t[n]&&t[n].delimiters&&ye(e,t[n].delimiters)}};const Ee=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Oe=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/,Se=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,xe=/^&([a-z][a-z0-9]{1,31});/i;function ve(e){const t={},r=e.length;if(!r)return;let n=0,i=-2;const o=[];for(let s=0;s<r;s++){const r=e[s];if(o.push(0),e[n].marker===r.marker&&i===r.token-1||(n=s),i=r.token,r.length=r.length||0,!r.close)continue;t.hasOwnProperty(r.marker)||(t[r.marker]=[-1,-1,-1,-1,-1,-1]);const a=t[r.marker][(r.open?3:0)+r.length%3];let l=n-o[n]-1,c=l;for(;l>a;l-=o[l]+1){const t=e[l];if(t.marker===r.marker&&t.open&&t.end<0){let n=!1;if((t.close||r.open)&&(t.length+r.length)%3==0&&(t.length%3==0&&r.length%3==0||(n=!0)),!n){const n=l>0&&!e[l-1].open?o[l-1]+1:0;o[s]=s-l+n,o[l]=n,r.open=!1,t.end=s,t.close=!1,c=-1,i=-2;break}}}-1!==c&&(t[r.marker][(r.open?3:0)+(r.length||0)%3]=c)}}const _e=[["text",function(e,t){let r=e.pos;for(;r<e.posMax&&!he(e.src.charCodeAt(r));)r++;return r!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,r)),e.pos=r,!0)}],["linkify",function(e,t){if(!e.md.options.linkify)return!1;if(e.linkLevel>0)return!1;const r=e.pos;if(r+3>e.posMax)return!1;if(58!==e.src.charCodeAt(r))return!1;if(47!==e.src.charCodeAt(r+1))return!1;if(47!==e.src.charCodeAt(r+2))return!1;const n=e.pending.match(fe);if(!n)return!1;const i=n[1],o=e.md.linkify.matchAtStart(e.src.slice(r-i.length));if(!o)return!1;let s=o.url;if(s.length<=i.length)return!1;s=s.replace(/\*+$/,"");const a=e.md.normalizeLink(s);if(!e.md.validateLink(a))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const t=e.push("link_open","a",1);t.attrs=[["href",a]],t.markup="linkify",t.info="auto",e.push("text","",0).content=e.md.normalizeLinkText(s);const r=e.push("link_close","a",-1);r.markup="linkify",r.info="auto"}return e.pos+=s.length-i.length,!0}],["newline",function(e,t){let r=e.pos;if(10!==e.src.charCodeAt(r))return!1;const n=e.pending.length-1,i=e.posMax;if(!t)if(n>=0&&32===e.pending.charCodeAt(n))if(n>=1&&32===e.pending.charCodeAt(n-1)){let t=n-1;for(;t>=1&&32===e.pending.charCodeAt(t-1);)t--;e.pending=e.pending.slice(0,t),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(r++;r<i&&v(e.src.charCodeAt(r));)r++;return e.pos=r,!0}],["escape",function(e,t){let r=e.pos;const n=e.posMax;if(92!==e.src.charCodeAt(r))return!1;if(r++,r>=n)return!1;let i=e.src.charCodeAt(r);if(10===i){for(t||e.push("hardbreak","br",0),r++;r<n&&(i=e.src.charCodeAt(r),v(i));)r++;return e.pos=r,!0}let o=e.src[r];if(i>=55296&&i<=56319&&r+1<n){const t=e.src.charCodeAt(r+1);t>=56320&&t<=57343&&(o+=e.src[r+1],r++)}const s="\\"+o;if(!t){const t=e.push("text_special","",0);i<256&&0!==me[i]?t.content=o:t.content=s,t.markup=s,t.info="escape"}return e.pos=r+1,!0}],["backticks",function(e,t){let r=e.pos;if(96!==e.src.charCodeAt(r))return!1;const n=r;r++;const i=e.posMax;for(;r<i&&96===e.src.charCodeAt(r);)r++;const o=e.src.slice(n,r),s=o.length;if(e.backticksScanned&&(e.backticks[s]||0)<=n)return t||(e.pending+=o),e.pos+=s,!0;let a,l=r;for(;-1!==(a=e.src.indexOf("`",l));){for(l=a+1;l<i&&96===e.src.charCodeAt(l);)l++;const n=l-a;if(n===s){if(!t){const t=e.push("code_inline","code",0);t.markup=o,t.content=e.src.slice(r,a).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[n]=a}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=s,!0}],["strikethrough",be.tokenize],["emphasis",Te.tokenize],["link",function(e,t){let r,n,i,o,s="",a="",l=e.pos,c=!0;if(91!==e.src.charCodeAt(e.pos))return!1;const u=e.pos,d=e.posMax,p=e.pos+1,h=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(h<0)return!1;let f=h+1;if(f<d&&40===e.src.charCodeAt(f)){for(c=!1,f++;f<d&&(r=e.src.charCodeAt(f),v(r)||10===r);f++);if(f>=d)return!1;if(l=f,i=e.md.helpers.parseLinkDestination(e.src,f,e.posMax),i.ok){for(s=e.md.normalizeLink(i.str),e.md.validateLink(s)?f=i.pos:s="",l=f;f<d&&(r=e.src.charCodeAt(f),v(r)||10===r);f++);if(i=e.md.helpers.parseLinkTitle(e.src,f,e.posMax),f<d&&l!==f&&i.ok)for(a=i.str,f=i.pos;f<d&&(r=e.src.charCodeAt(f),v(r)||10===r);f++);}(f>=d||41!==e.src.charCodeAt(f))&&(c=!0),f++}if(c){if(void 0===e.env.references)return!1;if(f<d&&91===e.src.charCodeAt(f)?(l=f+1,f=e.md.helpers.parseLinkLabel(e,f),f>=0?n=e.src.slice(l,f++):f=h+1):f=h+1,n||(n=e.src.slice(p,h)),o=e.env.references[w(n)],!o)return e.pos=u,!1;s=o.href,a=o.title}if(!t){e.pos=p,e.posMax=h;const t=[["href",s]];e.push("link_open","a",1).attrs=t,a&&t.push(["title",a]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=f,e.posMax=d,!0}],["image",function(e,t){let r,n,i,o,s,a,l,c,u="";const d=e.pos,p=e.posMax;if(33!==e.src.charCodeAt(e.pos))return!1;if(91!==e.src.charCodeAt(e.pos+1))return!1;const h=e.pos+2,f=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(f<0)return!1;if(o=f+1,o<p&&40===e.src.charCodeAt(o)){for(o++;o<p&&(r=e.src.charCodeAt(o),v(r)||10===r);o++);if(o>=p)return!1;for(c=o,a=e.md.helpers.parseLinkDestination(e.src,o,e.posMax),a.ok&&(u=e.md.normalizeLink(a.str),e.md.validateLink(u)?o=a.pos:u=""),c=o;o<p&&(r=e.src.charCodeAt(o),v(r)||10===r);o++);if(a=e.md.helpers.parseLinkTitle(e.src,o,e.posMax),o<p&&c!==o&&a.ok)for(l=a.str,o=a.pos;o<p&&(r=e.src.charCodeAt(o),v(r)||10===r);o++);else l="";if(o>=p||41!==e.src.charCodeAt(o))return e.pos=d,!1;o++}else{if(void 0===e.env.references)return!1;if(o<p&&91===e.src.charCodeAt(o)?(c=o+1,o=e.md.helpers.parseLinkLabel(e,o),o>=0?i=e.src.slice(c,o++):o=f+1):o=f+1,i||(i=e.src.slice(h,f)),s=e.env.references[w(i)],!s)return e.pos=d,!1;u=s.href,l=s.title}if(!t){n=e.src.slice(h,f);const t=[];e.md.inline.parse(n,e.md,e.env,t);const r=e.push("image","img",0),i=[["src",u],["alt",""]];r.attrs=i,r.children=t,r.content=n,l&&i.push(["title",l])}return e.pos=o,e.posMax=p,!0}],["autolink",function(e,t){let r=e.pos;if(60!==e.src.charCodeAt(r))return!1;const n=e.pos,i=e.posMax;for(;;){if(++r>=i)return!1;const t=e.src.charCodeAt(r);if(60===t)return!1;if(62===t)break}const o=e.src.slice(n+1,r);if(Oe.test(o)){const r=e.md.normalizeLink(o);if(!e.md.validateLink(r))return!1;if(!t){const t=e.push("link_open","a",1);t.attrs=[["href",r]],t.markup="autolink",t.info="auto",e.push("text","",0).content=e.md.normalizeLinkText(o);const n=e.push("link_close","a",-1);n.markup="autolink",n.info="auto"}return e.pos+=o.length+2,!0}if(Ee.test(o)){const r=e.md.normalizeLink("mailto:"+o);if(!e.md.validateLink(r))return!1;if(!t){const t=e.push("link_open","a",1);t.attrs=[["href",r]],t.markup="autolink",t.info="auto",e.push("text","",0).content=e.md.normalizeLinkText(o);const n=e.push("link_close","a",-1);n.markup="autolink",n.info="auto"}return e.pos+=o.length+2,!0}return!1}],["html_inline",function(e,t){if(!e.md.options.html)return!1;const r=e.posMax,n=e.pos;if(60!==e.src.charCodeAt(n)||n+2>=r)return!1;const i=e.src.charCodeAt(n+1);if(33!==i&&63!==i&&47!==i&&!function(e){const t=32|e;return t>=97&&t<=122}(i))return!1;const o=e.src.slice(n).match(ae);if(!o)return!1;if(!t){const t=e.push("html_inline","",0);t.content=o[0],s=t.content,/^<a[>\s]/i.test(s)&&e.linkLevel++,function(e){return/^<\/a\s*>/i.test(e)}(t.content)&&e.linkLevel--}var s;return e.pos+=o[0].length,!0}],["entity",function(e,t){const n=e.pos,i=e.posMax;if(38!==e.src.charCodeAt(n))return!1;if(n+1>=i)return!1;if(35===e.src.charCodeAt(n+1)){const r=e.src.slice(n).match(Se);if(r){if(!t){const t="x"===r[1][0].toLowerCase()?parseInt(r[1].slice(1),16):parseInt(r[1],10),n=e.push("text_special","",0);n.content=p(t)?h(t):h(65533),n.markup=r[0],n.info="entity"}return e.pos+=r[0].length,!0}}else{const i=e.src.slice(n).match(xe);if(i){const n=r.decodeHTML(i[0]);if(n!==i[0]){if(!t){const t=e.push("text_special","",0);t.content=n,t.markup=i[0],t.info="entity"}return e.pos+=i[0].length,!0}}}return!1}]],Ae=[["balance_pairs",function(e){const t=e.tokens_meta,r=e.tokens_meta.length;ve(e.delimiters);for(let n=0;n<r;n++)t[n]&&t[n].delimiters&&ve(t[n].delimiters)}],["strikethrough",be.postProcess],["emphasis",Te.postProcess],["fragments_join",function(e){let t,r,n=0;const i=e.tokens,o=e.tokens.length;for(t=r=0;t<o;t++)i[t].nesting<0&&n--,i[t].level=n,i[t].nesting>0&&n++,"text"===i[t].type&&t+1<o&&"text"===i[t+1].type?i[t+1].content=i[t].content+i[t+1].content:(t!==r&&(i[r]=i[t]),r++);t!==r&&(i.length=r)}]];function Ce(){this.ruler=new P;for(let e=0;e<_e.length;e++)this.ruler.push(_e[e][0],_e[e][1]);this.ruler2=new P;for(let e=0;e<Ae.length;e++)this.ruler2.push(Ae[e][0],Ae[e][1])}Ce.prototype.skipToken=function(e){const t=e.pos,r=this.ruler.getRules(""),n=r.length,i=e.md.options.maxNesting,o=e.cache;if(void 0!==o[t])return void(e.pos=o[t]);let s=!1;if(e.level<i){for(let a=0;a<n;a++)if(e.level++,s=r[a](e,!0),e.level--,s){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;s||e.pos++,o[t]=e.pos},Ce.prototype.tokenize=function(e){const t=this.ruler.getRules(""),r=t.length,n=e.posMax,i=e.md.options.maxNesting;for(;e.pos<n;){const o=e.pos;let s=!1;if(e.level<i)for(let n=0;n<r;n++)if(s=t[n](e,!1),s){if(o>=e.pos)throw new Error("inline rule didn't increment state.pos");break}if(s){if(e.pos>=n)break}else e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},Ce.prototype.parse=function(e,t,r,n){const i=new this.State(e,t,r,n);this.tokenize(i);const o=this.ruler2.getRules(""),s=o.length;for(let a=0;a<s;a++)o[a](i)},Ce.prototype.State=pe;const we={default:{options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},zero:{options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},commonmark:{options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}}},ke=/^(vbscript|javascript|file|data):/,De=/^data:image\/(gif|png|jpeg|webp);/;function Ie(e){const t=e.trim().toLowerCase();return!ke.test(t)||De.test(t)}const Re=["http:","https:","mailto:"];function Ne(e){const t=s.parse(e,!0);if(t.hostname&&(!t.protocol||Re.indexOf(t.protocol)>=0))try{t.hostname=i.toASCII(t.hostname)}catch(r){}return s.encode(s.format(t))}function Pe(e){const t=s.parse(e,!0);if(t.hostname&&(!t.protocol||Re.indexOf(t.protocol)>=0))try{t.hostname=i.toUnicode(t.hostname)}catch(r){}return s.decode(s.format(t),s.decode.defaultChars+"%")}function Me(e,t){if(!(this instanceof Me))return new Me(e,t);t||l(e)||(t=e||{},e="default"),this.inline=new Ce,this.block=new de,this.core=new J,this.renderer=new N,this.linkify=new n,this.validateLink=Ie,this.normalizeLink=Ne,this.normalizeLinkText=Pe,this.utils=D,this.helpers=u({},I),this.options={},this.configure(e),t&&this.set(t)}return Me.prototype.set=function(e){return u(this.options,e),this},Me.prototype.configure=function(e){const t=this;if(l(e)){const t=e;if(!(e=we[t]))throw new Error('Wrong `markdown-it` preset "'+t+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(r){e.components[r].rules&&t[r].ruler.enableOnly(e.components[r].rules),e.components[r].rules2&&t[r].ruler2.enableOnly(e.components[r].rules2)}),this},Me.prototype.enable=function(e,t){let r=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(t){r=r.concat(this[t].ruler.enable(e,!0))},this),r=r.concat(this.inline.ruler2.enable(e,!0));const n=e.filter(function(e){return r.indexOf(e)<0});if(n.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this},Me.prototype.disable=function(e,t){let r=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(t){r=r.concat(this[t].ruler.disable(e,!0))},this),r=r.concat(this.inline.ruler2.disable(e,!0));const n=e.filter(function(e){return r.indexOf(e)<0});if(n.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this},Me.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},Me.prototype.parse=function(e,t){if("string"!=typeof e)throw new Error("Input data should be a String");const r=new this.core.State(e,this,t);return this.core.process(r),r.tokens},Me.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},Me.prototype.parseInline=function(e,t){const r=new this.core.State(e,this,t);return r.inlineMode=!0,this.core.process(r),r.tokens},Me.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)},index_cjs=Me}function requirePlugin$1(){if(hasRequiredPlugin$1)return plugin$1;hasRequiredPlugin$1=1;var e,t=Object.create,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,o=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,a=(e,t,o,a)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))s.call(e,l)||l===o||r(e,l,{get:()=>t[l],enumerable:!(a=n(t,l))||a.enumerable});return e},l={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(l,{FILE_KNOWN_ATTRS:()=>f,FILE_MARKUP_PREFIX:()=>b,FILE_REQUIRED_ATTRS:()=>m,FILE_RULE_NAME:()=>h,FILE_TOKEN:()=>g,FILE_TO_LINK_ATTRS_MAP:()=>p,FileClassName:()=>T,FileHtmlAttr:()=>d,FileSpecialAttr:()=>u,transform:()=>_}),e=l,plugin$1=a(r({},"__esModule",{value:!0}),e);var c=((e,n,i)=>(i=null!=e?t(o(e)):{},a(e&&e.__esModule?i:r(i,"default",{value:e,enumerable:!0}),e)))(requireIndex_cjs()),u=(e=>(e.Src="src",e.Name="name",e.Lang="lang",e))(u||{}),d=(e=>(e.Download="download",e.Href="href",e.HrefLang="hreflang",e.Media="media",e.Ping="ping",e.ReferrerPolicy="referrerpolicy",e.Rel="rel",e.Target="target",e.Type="type",e))(d||{}),p={src:"href",name:"download",lang:"hreflang"},h="yfm_file_inline",f=["src","name","lang","referrerpolicy","rel","target","type"],m=["src","name"],g="yfm_file",b="{% file ",y=b.length,T=(e=>(e.Link="yfm-file",e.Icon="yfm-file__icon",e))(T||{}),E="has-yfm-file",O=e=>{e.renderer.rules[g]=(t,r,n,i,o)=>{const s=t[r],a=`<span class="${e.utils.escapeHtml("yfm-file__icon")}"></span>`;return`<a${o.renderAttrs(s)}>${a}${e.utils.escapeHtml(s.content)}</a>`}},S=requireBuild(),x=["referrerpolicy","rel","target","type","hreflang"],v=(e,{extraAttrs:t,bundle:r,onBundle:n,runtime:i,output:o,directiveSyntax:s})=>{"disabled"!==s&&"enabled"!==s||((e,t)=>{O(e),e.inline.ruler.push(h,(e,r)=>{if(e.src.substring(e.pos,e.pos+y)!==b)return!1;const n=e.src.slice(e.pos+y,e.posMax).match(/^((?:\s*\w+=(?:"[^"]+"|'[^']+')\s)+)\s*%}/);if(!n)return!1;const i=n[0].length,o=n[1].match(/\w+=(?:"[^"]+"|'[^']+')/g);if(!o)return!1;const s={};if(o.forEach(e=>{const t=e.indexOf("="),r=e.slice(0,t),n=e.slice(t+2,-1);f.includes(r)&&n&&(s[r]=n)}),!m.every(e=>e in s))return!1;if(!r){const r=e.push(g,"",0);r.block=!1,r.markup=b,r.content=s.name,r.attrs=Object.entries(s),r.attrSet("class","yfm-file");for(const e of r.attrs)e[0]in p&&(e[0]=p[e[0]]);Array.isArray(t?.fileExtraAttrs)&&r.attrs.push(...t.fileExtraAttrs)}return e.pos=e.pos+y+i,e.env??={},e.env[E]=!0,!0})})(e,{fileExtraAttrs:t}),"enabled"!==s&&"only"!==s||((e,t={})=>{const{fileExtraAttrs:r}=t;O(e),e.use((0,S.directiveParser)()),(0,S.registerInlineDirective)(e,"file",(e,t)=>{if(!t.content||!t.dests)return!1;const n=t.content.raw,i=t.dests.link||"",o=e.push(g,"",0);if(o.block=!1,o.markup=":file",o.content=t.content.raw,o.attrSet("class","yfm-file"),o.attrSet("href",i),o.attrSet("download",n),t.attrs)for(const r of x)t.attrs[r]&&o.attrSet(r,t.attrs[r]);if(Array.isArray(r))for(const[s,a]of r)o.attrSet(s,a);return e.env??={},e.env[E]=!0,!0})})(e,{fileExtraAttrs:t}),e.core.ruler.push("yfm_file_after",({env:e})=>{var t,s,a;e?.[E]&&(e.meta||={},e.meta.style||=[],e.meta.style.push(i.style),r&&n&&(t=e,s="bundled",a=new Set,s in t||Object.defineProperty(t,s,{enumerable:!1,value:a}),n(e,o,i)))})},_=(e={})=>{const{bundle:t=!0,directiveSyntax:r="disabled"}=e;if(t&&"string"==typeof e.runtime)throw new TypeError("Option `runtime` should be record when `bundle` is enabled.");const n="object"==typeof e?.runtime?e.runtime:{style:e?.runtime??"_assets/file-extension.css"},i=(i,{output:o=".",fileExtraAttrs:s}={})=>{v(i,{bundle:t,runtime:n,output:o,directiveSyntax:r,onBundle:e.onBundle,extraAttrs:s??e.extraAttrs})};return Object.assign(i,{collect(i,{destRoot:o="."}){(new c.default).use(i=>{v(i,{bundle:t,runtime:n,directiveSyntax:r,output:o,onBundle:e.onBundle,extraAttrs:e.extraAttrs})}).parse(i,{})}}),i};return plugin$1}var pluginExports$1=requirePlugin$1();const yfmFileNodeName=pluginExports$1.FILE_TOKEN,YfmFileAttr={Markup:"data-markup",Name:pluginExports$1.FileHtmlAttr.Download,Link:pluginExports$1.FileHtmlAttr.Href,ReferrerPolicy:pluginExports$1.FileHtmlAttr.ReferrerPolicy,Rel:pluginExports$1.FileHtmlAttr.Rel,Target:pluginExports$1.FileHtmlAttr.Target,Type:pluginExports$1.FileHtmlAttr.Type,Lang:pluginExports$1.FileHtmlAttr.HrefLang},YFM_FILE_DIRECTIVE_ATTRS=[YfmFileAttr.ReferrerPolicy,YfmFileAttr.Rel,YfmFileAttr.Target,YfmFileAttr.Type,YfmFileAttr.Lang],KNOWN_ATTRS=pluginExports$1.FILE_KNOWN_ATTRS.map(e=>e in pluginExports$1.FILE_TO_LINK_ATTRS_MAP?pluginExports$1.FILE_TO_LINK_ATTRS_MAP[e]:e),REQUIRED_ATTRS=pluginExports$1.FILE_REQUIRED_ATTRS.map(e=>e in pluginExports$1.FILE_TO_LINK_ATTRS_MAP?pluginExports$1.FILE_TO_LINK_ATTRS_MAP[e]:e),fileNodeAttrsSpec={[YfmFileAttr.Markup]:{default:null}};for(const e of KNOWN_ATTRS){const t=fileNodeAttrsSpec[e]={};REQUIRED_ATTRS.includes(e)||(t.default=null)}const LINK_TO_FILE_ATTRS_MAP={};for(const[e,r]of Object.entries(pluginExports$1.FILE_TO_LINK_ATTRS_MAP))LINK_TO_FILE_ATTRS_MAP[r]=e;const fileType=nodeTypeFactory(yfmFileNodeName),YfmFileSpecs=e=>{const t=e.context.get("directiveSyntax");e.configureMd(e=>e.use(pluginExports$1.transform({bundle:!1,directiveSyntax:t?.mdPluginValueFor("yfmFile")}))),e.addNode(yfmFileNodeName,()=>({spec:{group:"inline",inline:!0,attrs:fileNodeAttrsSpec,parseDOM:[{tag:`a[class="${pluginExports$1.FileClassName.Link}"]`,getAttrs(e){const t=e,r={};for(const n of KNOWN_ATTRS){const e=t.getAttribute(n);e&&(r[n]=e)}return r},priority:101}],toDOM(e){const t=document.createElement("a");t.contentEditable="false",t.classList.add(pluginExports$1.FileClassName.Link);for(const[n,i]of Object.entries(e.attrs))i&&t.setAttribute(n,i);const r=document.createElement("span");return r.classList.add(pluginExports$1.FileClassName.Icon),t.appendChild(r),t.append(e.attrs[pluginExports$1.FileHtmlAttr.Download]),t}},fromMd:{tokenName:yfmFileNodeName,tokenSpec:{name:yfmFileNodeName,type:"node",getAttrs:e=>{const t=Object.fromEntries(e.attrs||[]);return t[YfmFileAttr.Markup]=e.markup,t}}},toMd:(e,r)=>{if(t?.shouldSerializeToDirective("yfmFile",r.attrs[YfmFileAttr.Markup]))return void e.write(serializeToDirective(r));const n=Object.entries(r.attrs).reduce((e,[t,r])=>(t!==YfmFileAttr.Markup&&r&&(t in LINK_TO_FILE_ATTRS_MAP&&(t=LINK_TO_FILE_ATTRS_MAP[t]),e.push(`${t}="${r.replace(/"/g,"")}"`)),e),[]).join(" ");e.write(`${pluginExports$1.FILE_MARKUP_PREFIX}${n} %}`)}}))};function serializeToDirective(e){let t=`:file[${e.attrs[YfmFileAttr.Name]||""}](${e.attrs[YfmFileAttr.Link]||""})`;const r=YFM_FILE_DIRECTIVE_ATTRS.reduce((t,r)=>{const n=e.attrs[r];return n&&t.push(`${r}="${n}"`),t},[]);return r.length&&(t+=`{${r.join(" ")}}`),t}const YfmHeadingAttr={Level:headingLevelAttr,Id:"id",DataLine:"data-line",Folding:"folded"};function parseMdAttrs(e,t,r,n){if(r>=n)return null;if(123!==t.charCodeAt(r))return null;const i={};for(r=s(t,++r,n);r<n;r=s(t,r,n)){if(125===t.charCodeAt(r))return{pos:++r,attrs:i};const a=t.charCodeAt(r);if(35===a){const e=parseUnsurroundedName(t,++r,n);if(null===e)return null;r=e.pos;const o="id",s=e.name;void 0===i[o]?i[o]=[s]:i[o].push(s)}else if(46===a){const e=parseUnsurroundedName(t,++r,n);if(null===e)return null;r=e.pos;const o="class",s=e.name;void 0===i[o]?i[o]=[s]:i[o].push(s)}else{let a=parseAttrName(t,r,n);if(null===a)return null;const l=a.name;if((r=s(t,r=a.pos,n))>=n)return null;let c;if(61===t.charCodeAt(r)){if((r=s(t,++r,n))>=n)return null;const i=t.charCodeAt(r);if(34===i||39===i){const i=e.helpers.parseLinkTitle(t,r,n);if(!i.ok)return null;c=i.str,r=i.pos}else{if(a=parseUnsurroundedName(t,r,n),null===a)return null;c=a.name,r=a.pos}}else o(t.charCodeAt(r-1))&&--r,c="";void 0!==c&&(void 0===i[l]?i[l]=[c]:i[l].push(c))}if(r>=n)return null;const l=t.charCodeAt(r);if(!o(l)&&125!==l)return null}return null;function o(t){return e.utils.isSpace(t)||10===t}function s(e,t,r){for(;t<r&&o(e.charCodeAt(t));t++);return t}}var ATTR_NAME_RE=/^[a-z][a-z0-9\-_]*/;function parseAttrName(e,t,r){const n=t,i=e.slice(t,r).match(ATTR_NAME_RE);return null===i?null:{pos:t+=i[0].length,name:e.slice(n,t)}}var UNSURROUNDED_STRING_RE=/^[a-z0-9\-_]+/i;function parseUnsurroundedName(e,t,r){const n=t,i=e.slice(t,r).match(UNSURROUNDED_STRING_RE);return null===i?null:{pos:t+=i[0].length,name:e.slice(n,t)}}const defaultAllowedAttributes=["id"],headingAttrsPlugin=(e,t)=>{const r=t?.allowedAttributes||defaultAllowedAttributes;e.core.ruler.push("heading-attrs",t=>{const{tokens:n}=t;for(let i=0;i<n.length;i++){const t=n[i];if("heading_open"!==t.type)continue;const o=n[i+1]?.children?.at(-1);if("text"!==o?.type)continue;const{content:s}=o;if(!s.endsWith("}"))continue;const a=s.lastIndexOf("{");if(-1===a)continue;const l=parseMdAttrs(e,s,a,s.length);if(l){o.content=s.slice(0,a).trimEnd();for(const e of r)if(l.attrs[e])if("class"===e)l.attrs[e].forEach(r=>t.attrJoin(e,r));else{const r=l.attrs[e][0];t.attrSet(e,r)}}}})},getNodeAttrs=e=>t=>({[YfmHeadingAttr.Level]:e,[YfmHeadingAttr.Id]:t.getAttribute("id")||"",[YfmHeadingAttr.Folding]:getFoldingAttr(t)});function getFoldingAttr(e){const t=e.getAttribute(`data-${YfmHeadingAttr.Folding}`);return"true"===t||"false"!==t&&null}const DEFAULT_PLACEHOLDER=e=>"Heading "+e.attrs[YfmHeadingAttr.Level],YfmHeadingSpecs=(e,t)=>{e.configureMd(e=>e.use(headingAttrsPlugin)),e.addNode(headingNodeName,()=>({spec:{attrs:{[YfmHeadingAttr.Id]:{default:""},[YfmHeadingAttr.Level]:{default:1},[YfmHeadingAttr.DataLine]:{default:null},[YfmHeadingAttr.Folding]:{default:null}},content:"(text | inline)*",group:"block",defining:!0,selectable:!0,parseDOM:[{tag:"h1",getAttrs:getNodeAttrs(1),priority:100,consuming:!0},{tag:"h2",getAttrs:getNodeAttrs(2),priority:100,consuming:!0},{tag:"h3",getAttrs:getNodeAttrs(3),priority:100,consuming:!0},{tag:"h4",getAttrs:getNodeAttrs(4),priority:100,consuming:!0},{tag:"h5",getAttrs:getNodeAttrs(5),priority:100,consuming:!0},{tag:"h6",getAttrs:getNodeAttrs(6),priority:100,consuming:!0},{tag:"a.yfm-anchor",context:`${headingNodeName}/`,skip:!0,ignore:!0,priority:1e3}],toDOM(e){const t=e.attrs[YfmHeadingAttr.Id],r=e.attrs[YfmHeadingAttr.DataLine],n=e.attrs[YfmHeadingAttr.Folding];return["h"+e.attrs[YfmHeadingAttr.Level],{id:t||null,[YfmHeadingAttr.DataLine]:r,[`data-${YfmHeadingAttr.Folding}`]:n},0]},placeholder:{content:e.context.get("placeholder")?.heading??t.headingPlaceholder??DEFAULT_PLACEHOLDER,alwaysVisible:!0}},fromMd:{tokenSpec:{name:headingNodeName,type:"block",getAttrs:e=>{if(e.type.endsWith("_close"))return{};const t=Object.fromEntries(e.attrs||[]);return{[YfmHeadingAttr.Level]:Number(e.tag.slice(1)),[YfmHeadingAttr.Folding]:!0===e.meta?.folding||null,...t}}}},toMd:(e,t)=>{const r=t.attrs[YfmHeadingAttr.Folding],n=t.attrs[YfmHeadingAttr.Level];e.write(e.repeat("#",n)+("boolean"==typeof r?"+":"")+" "),e.renderInline(t);const i=t.attrs[YfmHeadingAttr.Id];i&&e.write(` {#${i}}`),e.closeBlock(t)}}))};var constants$1={},hasRequiredConstants$1;function requireConstants$1(){return hasRequiredConstants$1||(hasRequiredConstants$1=1,Object.defineProperty(constants$1,"__esModule",{value:!0}),constants$1.DEFAULT_LANG=void 0,constants$1.DEFAULT_LANG="ru"),constants$1}var constants={},hasRequiredConstants,notes,hasRequiredNotes;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,Object.defineProperty(constants,"__esModule",{value:!0}),constants.TITLES=void 0,constants.TITLES={ru:{info:"",tip:"",alert:"",warning:""},en:{info:"Note",tip:"Tip",alert:"Alert",warning:"Warning"},ar:{info:"",tip:"",alert:"",warning:""},cs:{info:"Poznmka",tip:"Tip",alert:"Upozornn",warning:"Varovn"},fr:{info:"Remarque",tip:"Astuce",alert:"Alerte",warning:"Avertissement"},es:{info:"Nota",tip:"Consejo",alert:"Alerta",warning:"Aviso"},he:{info:"",tip:"",alert:"",warning:""},bg:{info:"",tip:"",alert:"",warning:""},et:{info:"Mrkus",tip:"Nuanne",alert:"Thelepanu",warning:"Thtis"},el:{info:"",tip:"",alert:"",warning:""},pt:{info:"Observao",tip:"Sugesto",alert:"Ateno",warning:"Importante"},zh:{info:"",tip:"",alert:"",warning:""},"zh-tw":{info:"",tip:"",alert:"",warning:""},kk:{info:"",tip:"",alert:" ",warning:""},tr:{info:"Not",tip:"neri",alert:"Dikkat",warning:"nemli"},uz:{info:"Sharh",tip:"Maslahat",alert:"Diqqat",warning:"Bu muhim"}}),constants}function requireNotes(){if(hasRequiredNotes)return notes;hasRequiredNotes=1;const e=requireSource(),t=requireUtils$2(),r=requireConstants$1(),n=requireConstants(),i=/^{% note (alert|info|tip|warning)\s*(?:"(.*?)")? %}$/,o=/^{% note (.*)%}/;function s(e,t){let i=t;return i&&Object.keys(n.TITLES).includes(i)||(i=r.DEFAULT_LANG),n.TITLES[i][e]}function a(e,t){return"paragraph_open"===e[t].type&&"inline"===e[t+1].type&&e[t+1].content.match(i)}function l(e,t){return"paragraph_open"===e[t].type&&"inline"===e[t+1].type&&e[t+1].content.match(o)}const c=(0,t.nestedCloseTokenIdxFactory)("Note",a,(e,t)=>"paragraph_open"===e[t].type&&"inline"===e[t+1].type&&"{% endnote %}"===e[t+1].content.trim());return notes=(t,{lang:n=r.DEFAULT_LANG,notesAutotitle:i,path:o,log:u})=>{i="boolean"!=typeof i||i;const d=t=>{const{tokens:r,env:d}=t,p=d.path||o;let h=0;for(;h<r.length;){const o=a(r,h);if(o){const e=c(r,h+2,p,u);if(!e){h+=3;continue}const a=o[1].toLowerCase(),l=new t.Token("yfm_note_open","div",1);l.attrSet("class",`yfm-note yfm-accent-${a}`),l.attrSet("note-type",a),l.map=r[h].map;const d=r[e].map;d&&l.map&&(l.map[1]=d[1]);const f=new t.Token("yfm_note_close","div",-1);f.map=r[e].map;const m=new t.Token("yfm_note_title_open","p",1);m.attrSet("class","yfm-note-title");const g=i?s(a,n):"",b=void 0===o[2]?g:o[2],y=t.md.parseInline(b,t.env)[0];y.map=null;const T=new t.Token("yfm_note_title_close","p",-1);m.block=!0,T.block=!0;const E=new t.Token("yfm_note_content_open","div",1);E.attrSet("class","yfm-note-content");const O=new t.Token("yfm_note_content_close","div",-1);l.map&&(E.map=[l.map[0]+2,l.map[1]-2]);const S=[l];y.content&&S.push(m,y,T),S.push(E,...r.slice(h+3,e),O,f),r.splice(h,e-h+3,...S),h++}else l(r,h)&&"{% endnote %}"!==r[h+1].content?(u.warn("Incorrect syntax for notes"+(p?`, file ${(0,e.bold)(p)}`:"")),h+=3):h++}};try{t.core.ruler.before("curly_attributes","notes",d)}catch(p){t.core.ruler.push("notes",d)}}}var notesExports=requireNotes();const yfmPlugin=getDefaultExportFromCjs(notesExports);var NoteNode,NoteNode2,NoteAttrs,NoteAttrs2;NoteNode2=NoteNode||(NoteNode={}),NoteNode2.Note="yfm_note",NoteNode2.NoteTitle="yfm_note_title",NoteNode2.NoteContent="yfm_note_content",NoteAttrs2=NoteAttrs||(NoteAttrs={}),NoteAttrs2.Class="class",NoteAttrs2.Type="note-type";const parserTokens$2={[NoteNode.Note]:{name:NoteNode.Note,type:"block",getAttrs:e=>e.attrs?Object.fromEntries(e.attrs):{}},[NoteNode.NoteTitle]:{name:NoteNode.NoteTitle,type:"block"},[NoteNode.NoteContent]:{name:NoteNode.NoteContent,type:"block"}},DEFAULT_TITLE_PLACEHOLDER="Note",DEFAULT_CONTENT_PLACEHOLDER="Note content",getSchemaSpecs$2=(e,t)=>({[NoteNode.Note]:{attrs:{[NoteAttrs.Class]:{default:"yfm-note yfm-accent-info"},[NoteAttrs.Type]:{default:"info"}},content:`${NoteNode.NoteTitle} ${NoteNode.NoteContent}`,group:"block yfm-note",parseDOM:[{tag:"div.yfm-note",priority:100,getAttrs:e=>({[NoteAttrs.Class]:e.getAttribute(NoteAttrs.Class)||"",[NoteAttrs.Type]:e.getAttribute(NoteAttrs.Type)||"info"})}],toDOM:e=>["div",e.attrs,0],selectable:!0,allowSelection:!0,complex:"root"},[NoteNode.NoteTitle]:{content:"inline*",group:"block yfm-note",parseDOM:[{tag:"p.yfm-note-title",priority:100}],toDOM:()=>["p",{class:"yfm-note-title"},0],selectable:!1,allowSelection:!1,placeholder:{content:t?.[NoteNode.NoteTitle]??e?.yfmNoteTitlePlaceholder??DEFAULT_TITLE_PLACEHOLDER,alwaysVisible:!0},complex:"leaf"},[NoteNode.NoteContent]:{content:"(block | paragraph)+",group:"block yfm-note",parseDOM:[{tag:"div.yfm-note-content",priority:100}],toDOM:()=>["div",{class:"yfm-note-content"},0],selectable:!1,allowSelection:!1,placeholder:{content:t?.[NoteNode.NoteContent]??DEFAULT_CONTENT_PLACEHOLDER,alwaysVisible:!0},complex:"leaf"}}),serializerTokens$2={[NoteNode.Note]:(e,t)=>{e.renderContent(t),e.write("{% endnote %}"),e.closeBlock(t)},[NoteNode.NoteTitle]:(e,t,r)=>{if(e.write(`{% note ${r.attrs[NoteAttrs.Type]} `),t.nodeSize>2)e.write('"'),e.renderInline(t),e.write('"');else{const r=getPlaceholderContent(t);r&&e.write(`"${r}"`)}e.write(" %}\n"),e.write("\n"),e.closeBlock()},[NoteNode.NoteContent]:(e,t)=>{isNodeEmpty(t)?e.write(getPlaceholderContent(t)+"\n\n"):e.renderInline(t)}},noteType=nodeTypeFactory(NoteNode.Note),noteTitleType=nodeTypeFactory(NoteNode.NoteTitle),noteContentType=nodeTypeFactory(NoteNode.NoteContent),YfmNoteSpecs=(e,t)=>{const r=getSchemaSpecs$2(t,e.context.get("placeholder"));e.configureMd(e=>e.use(yfmPlugin,{log:logExports.log,lang:getConfig$1().lang||"en"})).addNode(NoteNode.Note,()=>({spec:r[NoteNode.Note],toMd:serializerTokens$2[NoteNode.Note],fromMd:{tokenSpec:parserTokens$2[NoteNode.Note]}})).addNode(NoteNode.NoteTitle,()=>({spec:r[NoteNode.NoteTitle],toMd:serializerTokens$2[NoteNode.NoteTitle],fromMd:{tokenSpec:parserTokens$2[NoteNode.NoteTitle]}})).addNode(NoteNode.NoteContent,()=>({spec:r[NoteNode.NoteContent],toMd:serializerTokens$2[NoteNode.NoteContent],fromMd:{tokenSpec:parserTokens$2[NoteNode.NoteContent]}}))};var table$2,hasRequiredTable;function requireTable(){if(hasRequiredTable)return table$2;hasRequiredTable=1;var e=table$2&&table$2.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const t=requireCommon(),r=124,n=96,i=(e,t,r)=>{const n=[...e],i=t.slice(r);for(let o=0;o<n.length;o++)if(i.charCodeAt(o)!==n[o])return!1;return!0},o=[123,123],s=(e,t)=>i(o,e,t),a=[125,125],l=(e,t)=>i(a,e,t),c=[n,n,n],u=(e,t)=>i(c,e,t),d=[36,36],p=(e,t)=>i(d,e,t),h=[35,r],f=(e,t)=>i(h,e,t),m=(e,t)=>{const r=t;for(t--;92===e.charCodeAt(t);)t--;return(r-t)%2==0},g=(e,t)=>!m(e,t),b=[r,r],y=(e,t)=>i(b,e,t)&&g(e,t),T=[r],E=(e,t)=>i(T,e,t)&&g(e,t)&&!y(e,t),O=[r,35],S=(e,t)=>i(O,e,t),x=(e,t,r)=>{if(e.charCodeAt(t)!==n)return!1;if(t>0&&m(e,t))return!1;const i=t;for(;t<r&&e.charCodeAt(t)===n;)t++;const o=e.slice(i,t).length;let s,a=t;for(;-1!==(s=e.indexOf("`",a));){for(a=s+1;a<r&&e.charCodeAt(a)===n;)a++;if(a-s===o)return{end:a,steps:a-i}}return!1},v=(e,t,r)=>{if(36!==e.charCodeAt(t))return!1;if(t>0&&!g(e,t))return!1;{const n=t+1<=r?e.charCodeAt(t+1):-1;if(32===n||9===n)return!1;if(36===n)return{end:t+2,steps:2}}const n=t+1;let i=n;for(;i=e.indexOf("$",i);){if(-1===i||i>r)return!1;if(m(e,i)){i++;continue}const t=e.charCodeAt(i-1),o=i+1<=r?e.charCodeAt(i+1):-1;return!(32===t||9===t||o>=48&&o<=57)&&{end:i+1,steps:i+1-n}}return!1};class _{constructor(e,t,r){this.state=e,this._line=r,this._pos=t,this._lineEnds=this.state.eMarks[this._line]}get pos(){return this._pos}get line(){return this._line}get lineEnds(){return this._lineEnds}stats(){return{line:this._line,pos:this._pos}}get symbol(){return this.state.src[this._pos]}next(e=1){for(let t=0;t<e;t++)this._pos++,this._pos>this._lineEnds&&(this._line++,this._pos=this.state.bMarks[this._line]+this.state.tShift[this._line],this._lineEnds=this.state.eMarks[this._line])}}function A(e,r){var n;const i=e.content.match(/\s*\{[^}]*}$/);if(!i)return;const o=(new t.AttrsParser).parse(i[0].trim()),s=null===(n=null==o?void 0:o.class)||void 0===n?void 0:n.join(" ");if(s){r.attrSet("class",s);let t=i[0].replace(`.${s}`,"");"{}"===t.trim()&&(t=""),e.content=e.content.replace(i[0],t)}}return table$2=(r,n)=>{r.block.ruler.before("code","yfm_table",(r,i,m,g)=>{let C;const w=r.bMarks[i]+r.tShift[i],k=r.eMarks[m];if(k-w<2)return!1;if(!f(r.src,w))return!1;if(g)return!0;const{rows:D,endOfTable:I,pos:R}=function(e,t,r,n,i={}){let m=null,g=0,A=[],C=null,w=null;const k=new _(e,t+h.length,n),D=[];let I=!1,R=!1,N=!1;const P=new Map,M=()=>{C&&A.push([C,k.stats()]),A.length&&w&&D.push([w,k.line,A]),A=[],C=null,w=null};for(;k.pos<=r&&void 0!==k.symbol;)if(!1!==i.table_ignoreSplittersInBlockCode&&!R&&u(e.src,k.pos)&&(I=!I,k.next(c.length)),i.table_ignoreSplittersInBlockMath&&!I&&p(e.src,k.pos)&&(R=!R,k.next(d.length)),I||R)k.next();else if(!N&&s(e.src,k.pos)&&(N=!0,k.next(o.length)),N&&l(e.src,k.pos)&&(N=!1,k.next(a.length)),N)k.next();else{if(i.table_ignoreSplittersInInlineCode){const t=x(e.src,k.pos,k.lineEnds);if(!1!==t){k.next(t.steps);continue}}if(i.table_ignoreSplittersInInlineMath){const t=v(e.src,k.pos,k.lineEnds);if(!1!==t){k.next(t.steps);continue}}if(f(e.src,k.pos))g++,k.next(h.length);else if(S(e.src,k.pos)){if(0===g){M(),k.next(O.length),m=k.line+2;break}g--,k.next(O.length)}else{if(g>0){k.next();continue}if(y(e.src,k.pos)){const e=P.get(g);e?(M(),k.next(b.length)):(k.next(b.length),w=k.line,C=k.stats()),P.set(g,!e);continue}E(e.src,k.pos)?(C&&A.push([C,k.stats()]),k.next(T.length),C=k.stats()):k.next()}}const{pos:$}=k;return{rows:D,endOfTable:m,pos:$}}(r,w,k,i,n),N=function(e,r){const n=e.skipSpaces(r),i=e.src.slice(n);return(new t.AttrsParser).parse(i)}(r,R);if(!I)return C=r.push("__yfm_lint","",0),C.hidden=!0,C.map=[i,m],C.attrSet("YFM004","true"),!1;const P=r.lineMax;r.lineMax=I,r.line=i;const M=r.tokens.length;C=r.push("yfm_table_open","table",1);const{attr:$=[]}=N,L=e(N,["attr"]);for(const[e,t]of Object.entries(L))C.attrJoin(e,t.join(" "));for(const e of $)C.attrJoin(e,"true");C.map=[i,I],C=r.push("yfm_tbody_open","tbody",1),C.map=[i+1,I-1];const B=Math.max(...D.map(([,,e])=>e.length)),F=[],q=[];for(let e=0;e<D.length;e++){const[t,n,i]=D[e];F.push([]),q.push([]);const o=i.length;C=r.push("yfm_tr_open","tr",1),C.map=[t,n];for(let s=0;s<i.length;s++){const[t,n]=i[s];C=r.push("yfm_td_open","td",1),F[e].push(C),C.map=[t.line,n.line];const o=r.tShift[t.line],a=r.eMarks[n.line],l=r.bMarks[t.line],c=r.lineMax;r.tShift[t.line]=0,r.bMarks[t.line]=t.pos,r.eMarks[n.line]=n.pos,r.lineMax=n.line+1,r.md.block.tokenize(r,t.line,n.line+1);const u=r.tokens[r.tokens.length-2],d=u.content.trim()||u.markup.trim();q[e].push(d),C=r.push("yfm_td_close","td",-1),r.tokens[r.tokens.length-1].map=[n.line,n.line+1],r.lineMax=c,r.tShift[t.line]=o,r.bMarks[t.line]=l,r.eMarks[n.line]=a;const p=F[F.length-1];A(u,p[p.length-1])}if(o<B){const e=B-o;for(let t=0;t<e;t++)C=r.push("yfm_td_open","td",1),C=r.push("yfm_td_close","td",-1)}C=r.push("yfm_tr_close","tr",-1)}return((e,t)=>{for(let r=0;r<e.length;r++)for(let n=0;n<e[0].length;n++){if(">"===e[r][n]){if(0===n)continue;t[r][n].meta={markForDeletion:!0};let i=2;for(let o=n-1;o>=0;o--){if(">"!==e[r][o]){if("^"===e[r][o])break;t[r][o].attrSet("colspan",i.toString());break}i++,t[r][o].meta={markForDeletion:!0}}}if("^"===e[r][n]){if(0===r)continue;t[r][n].meta={markForDeletion:!0};let i=2;for(let o=r-1;o>=0;o--){if("^"!==e[o][n]){if(">"===e[o][n])break;t[o][n].attrSet("rowspan",i.toString());break}i++,t[o][n].meta={markForDeletion:!0}}}}})(q,F),((e,t)=>{var r;const n=[];for(let i=e;i<t.length;i++)if(null===(r=t[i].meta)||void 0===r?void 0:r.markForDeletion){n.unshift([i]);const e=t[i].level;for(let r=i+1;r<t.length;r++)if("yfm_td_close"===t[r].type&&t[r].level===e){n[0].push(r);break}}n.forEach(([e,r])=>{e&&r&&t.splice(e,r-e+1)})})(M,r.tokens),C=r.push("yfm_tbody_close","tbody",-1),C=r.push("yfm_table_close","table",-1),r.tokens[r.tokens.length-1].map=[I,I+1],r.lineMax=P,r.line=I,!0})}}var tableExports=requireTable();const yfmTable=getDefaultExportFromCjs(tableExports),parserTokens$1={[YfmTableNode.Table]:{name:YfmTableNode.Table,type:"block"},[YfmTableNode.Body]:{name:YfmTableNode.Body,type:"block"},[YfmTableNode.Row]:{name:YfmTableNode.Row,type:"block"},[YfmTableNode.Cell]:{name:YfmTableNode.Cell,type:"block",getAttrs:e=>{const t=Object.fromEntries(e.attrs||[]),r=e.attrGet("class")?.match(/cell-align-[a-z-]*/)?.[0];return r&&(t[YfmTableAttr.CellAlign]=r),t}}},DEFAULT_CELL_PLACEHOLDER="Table cell",getSchemaSpecs$1=(e,t)=>({[YfmTableNode.Table]:{group:"block yfm-table",content:`${YfmTableNode.Body}`,isolating:!0,definingAsContext:!0,parseDOM:[{tag:"table",priority:200}],toDOM:()=>["table",0],selectable:!0,allowSelection:!0,tableRole:TableRole.Table,complex:"root"},[YfmTableNode.Body]:{group:"block yfm-table",content:`${YfmTableNode.Row}+`,isolating:!0,definingAsContext:!0,parseDOM:[{tag:"tbody",priority:200},{tag:"thead",priority:200}],toDOM:()=>["tbody",0],tableRole:TableRole.Body,selectable:!1,allowSelection:!1,complex:"inner"},[YfmTableNode.Row]:{group:"block yfm-table",content:`${YfmTableNode.Cell}+`,isolating:!0,definingAsContext:!0,parseDOM:[{tag:"tr",priority:200}],toDOM:()=>["tr",0],tableRole:TableRole.Row,selectable:!1,allowSelection:!1,complex:"inner"},[YfmTableNode.Cell]:{group:"block yfm-table",content:"block+",isolating:!0,definingAsContext:!0,attrs:{[YfmTableAttr.Colspan]:{default:null},[YfmTableAttr.Rowspan]:{default:null},[YfmTableAttr.CellAlign]:{default:null}},parseDOM:[{tag:"td",priority:200},{tag:"th",priority:200}],toDOM:e=>["td",e.attrs,0],placeholder:{content:t?.[YfmTableNode.Cell]??e?.yfmTableCellPlaceholder??DEFAULT_CELL_PLACEHOLDER,alwaysVisible:!0},tableRole:TableRole.Cell,selectable:!1,allowSelection:!1,complex:"leaf"}}),serializerTokens$1={[YfmTableNode.Table]:(e,t)=>{e.ensureNewLine(),e.write("#|"),e.ensureNewLine(),e.renderContent(t),e.write("|#"),e.ensureNewLine(),e.closeBlock(),e.write("\n")},[YfmTableNode.Body]:(e,t)=>{const r={};t.forEach(t=>{e.write("||"),e.ensureNewLine(),e.write("\n");let n=0;t.forEach(i=>{for(;n in r&&r[n]>0;)e.write(0===n?"^":"|^"),r[n]--,n++;let o=-1;if(isNumber(i.attrs[YfmTableAttr.Rowspan])&&(o=Math.max(0,Number.parseInt(i.attrs[YfmTableAttr.Rowspan],10)),r[n]=o-1),n>0&&(e.write("|"),e.ensureNewLine(),e.write("\n")),e.renderContent(i),i.attrs[YfmTableAttr.CellAlign]&&(e.write(`{.${i.attrs[YfmTableAttr.CellAlign]}}`),e.ensureNewLine()),n++,isNumber(i.attrs[YfmTableAttr.Colspan])){let t=Math.max(0,Number.parseInt(i.attrs[YfmTableAttr.Colspan],10));for(;--t>0;)e.write("|>"),o>0&&(r[n]=o-1),n++}if(t.lastChild===i)for(;n in r&&r[n]>0;)e.write("|^"),r[n]--,n++}),e.ensureNewLine(),e.write("||"),e.ensureNewLine()})},[YfmTableNode.Row]:(e,t)=>{e.write("||"),e.ensureNewLine(),e.write("\n"),e.renderContent(t),e.write("||"),e.ensureNewLine()},[YfmTableNode.Cell]:(e,t,r)=>{e.renderContent(t),r.lastChild===t||(e.write("|"),e.ensureNewLine(),e.write("\n"))}},YfmTableSpecs=(e,t)=>{const r=getSchemaSpecs$1(t,e.context.get("placeholder")),{table_ignoreSplittersInBlockCode:n,table_ignoreSplittersInBlockMath:i,table_ignoreSplittersInInlineCode:o,table_ignoreSplittersInInlineMath:s}=t;e.configureMd(e=>e.use(yfmTable,{log:logExports.log,table_ignoreSplittersInBlockCode:n,table_ignoreSplittersInBlockMath:i,table_ignoreSplittersInInlineCode:o,table_ignoreSplittersInInlineMath:s})).addNode(YfmTableNode.Table,()=>({spec:r[YfmTableNode.Table],toMd:serializerTokens$1[YfmTableNode.Table],fromMd:{tokenSpec:parserTokens$1[YfmTableNode.Table]}})).addNode(YfmTableNode.Body,()=>({spec:r[YfmTableNode.Body],toMd:serializerTokens$1[YfmTableNode.Body],fromMd:{tokenSpec:parserTokens$1[YfmTableNode.Body]}})).addNode(YfmTableNode.Row,()=>({spec:r[YfmTableNode.Row],toMd:serializerTokens$1[YfmTableNode.Row],fromMd:{tokenSpec:parserTokens$1[YfmTableNode.Row]}})).addNode(YfmTableNode.Cell,()=>({spec:r[YfmTableNode.Cell],toMd:serializerTokens$1[YfmTableNode.Cell],fromMd:{tokenSpec:parserTokens$1[YfmTableNode.Cell]}}))},require$$0=getAugmentedNamespace(token);var plugin,hasRequiredPlugin;function requirePlugin(){if(hasRequiredPlugin)return plugin;hasRequiredPlugin=1;var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__commonJS=(e,t)=>function(){return t||(0,e[__getOwnPropNames(e)[0]])((t={exports:{}}).exports,t),t.exports},__export=(e,t)=>{for(var r in t)__defProp(e,r,{get:t[r],enumerable:!0})},__copyProps=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of __getOwnPropNames(t))__hasOwnProp.call(e,i)||i===r||__defProp(e,i,{get:()=>t[i],enumerable:!(n=__getOwnPropDesc(t,i))||n.enumerable});return e},__toESM=(e,t,r)=>(r=null!=e?__create(__getProtoOf(e)):{},__copyProps(e&&e.__esModule?r:__defProp(r,"default",{value:e,enumerable:!0}),e)),__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),require_regex=__commonJS({"node_modules/github-slugger/regex.js"(e,t){t.exports=/[\0-\x1F!-,\.\/:-@\[-\^`\{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482\u0530\u0557\u0558\u055A-\u055F\u0589-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05EB-\u05EE\u05F3-\u060F\u061B-\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070F\u074B\u074C\u07B2-\u07BF\u07F6-\u07F9\u07FB\u07FC\u07FE\u07FF\u082E-\u083F\u085C-\u085F\u086B-\u089F\u08B5\u08C8-\u08D2\u08E2\u0964\u0965\u0970\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09F2-\u09FB\u09FD\u09FF\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF0-\u0AF8\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B54\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B70\u0B72-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BF0-\u0BFF\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5B-\u0C5F\u0C64\u0C65\u0C70-\u0C7F\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0CFF\u0D0D\u0D11\u0D45\u0D49\u0D4F-\u0D53\u0D58-\u0D5E\u0D64\u0D65\u0D70-\u0D79\u0D80\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DE5\u0DF0\u0DF1\u0DF4-\u0E00\u0E3B-\u0E3F\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F17\u0F1A-\u0F1F\u0F2A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F48\u0F6D-\u0F70\u0F85\u0F98\u0FBD-\u0FC5\u0FC7-\u0FFF\u104A-\u104F\u109E\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u1360-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u170D\u1715-\u171F\u1735-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17D4-\u17D6\u17D8-\u17DB\u17DE\u17DF\u17EA-\u180A\u180E\u180F\u181A-\u181F\u1879-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191F\u192C-\u192F\u193C-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DA-\u19FF\u1A1C-\u1A1F\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1AAF\u1AC1-\u1AFF\u1B4C-\u1B4F\u1B5A-\u1B6A\u1B74-\u1B7F\u1BF4-\u1BFF\u1C38-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C89-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CCF\u1CD3\u1CFB-\u1CFF\u1DFA\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u203E\u2041-\u2053\u2055-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u20CF\u20F1-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u215F\u2189-\u24B5\u24EA-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E00-\u2E2E\u2E30-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u3040\u3097\u3098\u309B\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31C0-\u31EF\u3200-\u33FF\u4DC0-\u4DFF\u9FFD-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA673\uA67E\uA6F2-\uA716\uA720\uA721\uA789\uA78A\uA7C0\uA7C1\uA7CB-\uA7F4\uA828-\uA82B\uA82D-\uA83F\uA874-\uA87F\uA8C6-\uA8CF\uA8DA-\uA8DF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA954-\uA95F\uA97D-\uA97F\uA9C1-\uA9CE\uA9DA-\uA9DF\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAAC3-\uAADA\uAADE\uAADF\uAAF0\uAAF1\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABEB\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFDFF\uFE10-\uFE1F\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF3E\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD3F\uDD75-\uDDFC\uDDFE-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEDF\uDEE1-\uDEFF\uDF20-\uDF2C\uDF4B-\uDF4F\uDF7B-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE04\uDE07-\uDE0B\uDE14\uDE18\uDE36\uDE37\uDE3B-\uDE3E\uDE40-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE7-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCFF\uDD28-\uDD2F\uDD3A-\uDE7F\uDEAA\uDEAD-\uDEAF\uDEB2-\uDEFF\uDF1D-\uDF26\uDF28-\uDF2F\uDF51-\uDFAF\uDFC5-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC47-\uDC65\uDC70-\uDC7E\uDCBB-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDCFF\uDD35\uDD40-\uDD43\uDD48-\uDD4F\uDD74\uDD75\uDD77-\uDD7F\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDFF\uDE12\uDE38-\uDE3D\uDE3F-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEEB-\uDEEF\uDEFA-\uDEFF\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A\uDF45\uDF46\uDF49\uDF4A\uDF4E\uDF4F\uDF51-\uDF56\uDF58-\uDF5C\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDFFF]|\uD805[\uDC4B-\uDC4F\uDC5A-\uDC5D\uDC62-\uDC7F\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDB6\uDDB7\uDDC1-\uDDD7\uDDDE-\uDDFF\uDE41-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEB9-\uDEBF\uDECA-\uDEFF\uDF1B\uDF1C\uDF2C-\uDF2F\uDF3A-\uDFFF]|\uD806[\uDC3B-\uDC9F\uDCEA-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD36\uDD39\uDD3A\uDD44-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD8\uDDD9\uDDE2\uDDE5-\uDDFF\uDE3F-\uDE46\uDE48-\uDE4F\uDE9A-\uDE9C\uDE9E-\uDEBF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC37\uDC41-\uDC4F\uDC5A-\uDC71\uDC90\uDC91\uDCA8\uDCB7-\uDCFF\uDD07\uDD0A\uDD37-\uDD39\uDD3B\uDD3E\uDD48-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8F\uDD92\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF7-\uDFAF\uDFB1-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80B\uD80E-\uD810\uD812-\uD819\uD824-\uD82B\uD82D\uD82E\uD830-\uD833\uD837\uD839\uD83D\uD83F\uD87B-\uD87D\uD87F\uD885-\uDB3F\uDB41-\uDBFF][\uDC00-\uDFFF]|\uD80D[\uDC2F-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDECF\uDEEE\uDEEF\uDEF5-\uDEFF\uDF37-\uDF3F\uDF44-\uDF4F\uDF5A-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDE3F\uDE80-\uDEFF\uDF4B-\uDF4E\uDF88-\uDF8E\uDFA0-\uDFDF\uDFE2\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFF\uDD09-\uDFFF]|\uD82C[\uDD1F-\uDD4F\uDD53-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDC9C\uDC9F-\uDFFF]|\uD834[\uDC00-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDE41\uDE45-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDCFF\uDD2D-\uDD2F\uDD3E\uDD3F\uDD4A-\uDD4D\uDD4F-\uDEBF\uDEFA-\uDFFF]|\uD83A[\uDCC5-\uDCCF\uDCD7-\uDCFF\uDD4C-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83C[\uDC00-\uDD2F\uDD4A-\uDD4F\uDD6A-\uDD6F\uDD8A-\uDFFF]|\uD83E[\uDC00-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEDE-\uDEFF]|\uD86D[\uDF35-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDFFF]|\uDB40[\uDC00-\uDCFF\uDDF0-\uDFFF]/g}}),require_github_slugger=__commonJS({"node_modules/github-slugger/index.js"(e,t){var r=require_regex();t.exports=i;var n=Object.hasOwnProperty;function i(){if(!(this instanceof i))return new i;this.reset()}function o(e,t){return"string"!=typeof e?"":(t||(e=e.toLowerCase()),e.replace(r,"").replace(/ /g,"-"))}i.prototype.slug=function(e,t){const r=this;let i=o(e,!0===t);const s=i;for(;n.call(r.occurrences,i);)r.occurrences[s]++,i=s+"-"+r.occurrences[s];return r.occurrences[i]=0,i},i.prototype.reset=function(){this.occurrences=Object.create(null)},i.slug=o}}),plugin_exports={};__export(plugin_exports,{transform:()=>transform}),plugin=__toCommonJS(plugin_exports);var TAB_RE=/`?{% list tabs .*?%}`?/,TABS_CLASSNAME="yfm-tabs",TAB_CLASSNAME="yfm-tab",TAB_PANEL_CLASSNAME="yfm-tab-panel",TABS_LIST_CLASSNAME="yfm-tab-list",ACTIVE_CLASSNAME="active",TAB_GROUP_CLASSNAME="yfm-tab-group",TAB_ACTIVE_KEY="data-diplodoc-is-active",GROUP_DATA_KEY="data-diplodoc-group",TAB_DATA_KEY="data-diplodoc-key",TAB_DATA_VARIANT="data-diplodoc-variant",TAB_DATA_ID="data-diplodoc-id",DEFAULT_TABS_GROUP_PREFIX="defaultTabsGroup-",ACTIVE_TAB_TEXT="{selected}",TAB_FORCED_OPEN="data-diplodoc-forced",TABS_DROPDOWN_CLASSNAME="yfm-tabs-dropdown",TABS_DROPDOWN_MENU_CLASSNAME="yfm-tabs-dropdown-menu",TABS_DROPDOWN_SELECT="yfm-tabs-dropdown-select",TABS_ACCORDION_CLASSNAME="yfm-tabs-accordion",TABS_RADIO_CLASSNAME="yfm-tabs-vertical",VERTICAL_TAB_CLASSNAME="yfm-vertical-tab",TAB_DATA_VERTICAL_TAB="data-diplodoc-vertical-tab";function generateID(){const e=Math.random().toString(36).substr(2,8);return e.substring(e.length-8)}function trim(e){return e.trim()}function unquote(e){return e.match(/^(["']).*\1$/)?e.slice(1,-1):e}var import_github_slugger=__toESM(require_github_slugger()),CUSTOM_ID_REGEXP=/\[?{ ?#(\S+) ?}]?/,sluggersStorage=new Map;function parseName(e){const t=e.match(CUSTOM_ID_REGEXP);let r=null,n=e;return t?(n=e.replace(t[0],""),r=t[1]):(n=e,r=null),n.includes(ACTIVE_TAB_TEXT)&&(n=n.replace(ACTIVE_TAB_TEXT,"")),{name:n.trim(),customAnchor:r}}function getTabId(e,{runId:t}){let r=sluggersStorage.get(t);return r||(r=new import_github_slugger.default,sluggersStorage.set(t,r)),r.slug(getRawId(e))}function isTabSelected(e){const{name:t}=e;return t.includes(ACTIVE_TAB_TEXT)}function getTabKey(e){return encodeURIComponent(getRawId(e)).toLocaleLowerCase()}function getName(e){return parseName(e.name).name}function getRawId(e){const{customAnchor:t,name:r}=parseName(e.name);return t||r}var PATH_TO_RUNTIME="../runtime";function copyRuntimeFiles({runtimeJsPath:e,runtimeCssPath:t,output:r},n){const{join:i,resolve:o}=dynrequire("node:path"),s={"index.js":e,"index.css":t};for(const[a,l]of Object.entries(s)){const e=i(PATH_TO_RUNTIME,a);n.has(e)||(n.add(e),copyFile(o(__dirname,e),i(r,l)))}}function copyFile(e,t){const{mkdirSync:r,copyFileSync:n}=dynrequire("node:fs"),{dirname:i}=dynrequire("node:path");r(i(t),{recursive:!0}),n(e,t)}function dynrequire(module){return eval(`require('${module}')`)}function addHiddenProperty(e,t,r){return t in e||Object.defineProperty(e,t,{enumerable:!1,value:r}),e}var regular=(e,t,{containerClasses:r,tabsGroup:n,runId:i,variant:o})=>{var s,a;const l=[],c=[],u=[],d=new t.Token("tabs_open","div",1),p=new t.Token("tabs_close","div",-1),h=new t.Token("tab-list_open","div",1),f=new t.Token("tab-list_close","div",-1);if(e.length){const[t]=null!=(s=e[0].listItem.map)?s:[null];if(null==t)throw new Error("failed to parse line mapping");const[r,n]=null!=(a=e[e.length-1].listItem.map)?a:[null,null];if(null==n)throw new Error("failed to parse line mapping");h.map=[t,n]}d.block=!0,p.block=!0,h.block=!0,f.block=!0;const m=e.filter(isTabSelected).length;if(m>1)throw new Error("Unable to render tabs with more than 1 active element");const g=0!==m;d.attrSet("class",[TABS_CLASSNAME,r].filter(Boolean).join(" ")),d.attrSet(GROUP_DATA_KEY,n),d.attrSet(TAB_DATA_VARIANT,"regular"),h.attrSet("class",TABS_LIST_CLASSNAME),h.attrSet("role","tablist"),"radio"===o&&l.push(d);for(let b=0;b<e.length;b++){const r=new t.Token("tab_open","div",1),n=new t.Token("inline","",0),s=new t.Token("text","",0),a=new t.Token("tab_close","div",-1),d=new t.Token("tab-panel_open","div",1),p=new t.Token("tab-panel_close","div",-1),h=new t.Token("tab-input","input",0),f=new t.Token("tab-label_open","label",1),m=new t.Token("tab-label_close","label",-1);r.map=e[b].listItem.map,r.markup=e[b].listItem.markup;const y=e[b],T=getTabId(y,{runId:i}),E=getTabKey(y),O=isTabSelected(y),S=g?O:0===b;y.name=getName(y);const x=generateID();h.block=!0,h.attrJoin("class","radio"),h.attrSet("type","radio"),r.map=e[b].listItem.map,r.markup=e[b].listItem.markup,s.content=e[b].name,n.children=[s],r.block=!0,a.block=!0,d.block=!0,p.block=!0,r.attrSet(TAB_DATA_ID,T),r.attrSet(TAB_DATA_KEY,E),r.attrSet("class",TAB_CLASSNAME),r.attrJoin("class","yfm-tab-group"),r.attrSet("role","tab"),r.attrSet("aria-controls",x),r.attrSet("aria-selected","false"),r.attrSet("tabindex",0===b?"0":"-1"),r.attrSet(TAB_ACTIVE_KEY,"false"),d.attrSet("id",x),d.attrSet("class",TAB_PANEL_CLASSNAME),d.attrSet("role","tabpanel"),d.attrSet("aria-labelledby",T),d.attrSet("data-title",y.name),"radio"===o&&(r.attrSet(TAB_DATA_VERTICAL_TAB,"true"),r.attrJoin("class",VERTICAL_TAB_CLASSNAME)),S&&("radio"===o?(r.attrSet(TAB_FORCED_OPEN,"true"),h.attrSet("checked","true"),d.attrJoin("class",ACTIVE_CLASSNAME)):(r.attrSet(TAB_ACTIVE_KEY,0===b?"true":"false"),r.attrJoin("class",ACTIVE_CLASSNAME),r.attrSet("aria-selected","true"),d.attrJoin("class",ACTIVE_CLASSNAME))),"radio"===o?(l.push(r,h,f,n,m,a),l.push(d,...e[b].tokens,p)):(c.push(r,n,a),u.push(d,...e[b].tokens,p))}return l.push(d),l.push(h),l.push(...c),l.push(f),l.push(...u),l.push(p),l},radio=(e,t,{containerClasses:r,tabsGroup:n,runId:i})=>{var o,s;const a=[],l=new t.Token("tabs_open","div",1),c=new t.Token("tabs_close","div",-1);if(e.length){const[t]=null!=(o=e[0].listItem.map)?o:[null];if(null==t)throw new Error("failed to parse line mapping");const[r,n]=null!=(s=e[e.length-1].listItem.map)?s:[null,null];if(null==n)throw new Error("failed to parse line mapping")}if(l.block=!0,c.block=!0,e.filter(isTabSelected).length>1)throw new Error("Unable to render tabs with more than 1 active element");l.attrSet("class",[TABS_CLASSNAME,r,TABS_RADIO_CLASSNAME].filter(Boolean).join(" ")),l.attrSet(GROUP_DATA_KEY,n),l.attrSet(TAB_DATA_VARIANT,"radio"),a.push(l);for(let u=0;u<e.length;u++){const r=new t.Token("tab_open","div",1),n=new t.Token("inline","",0),o=new t.Token("text","",0),s=new t.Token("tab_close","div",-1),l=new t.Token("tab-panel_open","div",1),c=new t.Token("tab-panel_close","div",-1),d=new t.Token("tab-input","input",0),p=new t.Token("tab-label_open","label",1),h=new t.Token("tab-label_close","label",-1);r.map=e[u].listItem.map,r.markup=e[u].listItem.markup;const f=e[u],m=getTabId(f,{runId:i}),g=getTabKey(f),b=isTabSelected(f);f.name=getName(f);const y=generateID();d.block=!0,d.attrJoin("class","radio"),d.attrSet("type","radio"),r.map=e[u].listItem.map,r.markup=e[u].listItem.markup,o.content=e[u].name,n.children=[o],r.block=!0,s.block=!0,l.block=!0,c.block=!0,r.attrSet(TAB_DATA_ID,m),r.attrSet(TAB_DATA_KEY,g),r.attrSet("class",[TAB_CLASSNAME,TAB_GROUP_CLASSNAME,VERTICAL_TAB_CLASSNAME].join(" ")),r.attrSet("role","tab"),r.attrSet("aria-controls",y),r.attrSet("aria-selected","false"),r.attrSet("tabindex",0===u?"0":"-1"),r.attrSet(TAB_ACTIVE_KEY,"false"),l.attrSet("id",y),l.attrSet("class",TAB_PANEL_CLASSNAME),l.attrSet("role","tabpanel"),l.attrSet("aria-labelledby",m),l.attrSet("data-title",f.name),r.attrSet(TAB_DATA_VERTICAL_TAB,"true"),b&&(r.attrSet(TAB_FORCED_OPEN,"true"),d.attrSet("checked","true"),l.attrJoin("class",ACTIVE_CLASSNAME)),a.push(r,d,p,n,h,s),a.push(l,...e[u].tokens,c)}return a.push(c),a},dropdown=(e,t,{containerClasses:r,tabsGroup:n,runId:i})=>{var o,s;const a=[],l=new t.Token("dropdown_open","div",1),c=new t.Token("dropdown_close","div",-1),u=new t.Token("dropdown-select_open","div",1),d=new t.Token("inline","",0),p=new t.Token("text","",0),h=new t.Token("dropdown-select_open","div",-1);if(e.length){const[t]=null!=(o=e[0].listItem.map)?o:[null];if(null==t)throw new Error("failed to parse line mapping");const[r,n]=null!=(s=e[e.length-1].listItem.map)?s:[null,null];if(null==n)throw new Error("failed to parse line mapping")}l.block=!0,c.block=!0,u.block=!0,h.block=!0;const[f,...m]=e.filter(isTabSelected);if(m.length)throw new Error("Unable to dropdown tabs with more than 1 active element");l.attrSet("class",[TABS_CLASSNAME,r,TABS_DROPDOWN_CLASSNAME].filter(Boolean).join(" ")),l.attrSet(GROUP_DATA_KEY,n),l.attrSet(TAB_DATA_VARIANT,"dropdown"),u.attrSet("role","tablist"),u.attrSet("class",TABS_DROPDOWN_SELECT),f&&u.attrJoin("class","filled"),p.content=f?f.name:"-",d.children=[p],a.push(l,u,d,h);const g=new t.Token("dropdown-menu_open","ul",1),b=new t.Token("dropdown-menu_close","ul",-1);g.attrSet("class",TABS_DROPDOWN_MENU_CLASSNAME);const y=e.flatMap(e=>{const r=new t.Token("dropdown-menu-item_open","li",1),n=new t.Token("dropdown-menu-item_close","li",-1),o=new t.Token("text","",0),s=new t.Token("inline","",0),a=getTabId(e,{runId:i}),l=getTabKey(e),c=e===f;return r.attrSet("class",[TAB_CLASSNAME,c&&ACTIVE_CLASSNAME].filter(Boolean).join(" ")),r.attrSet(TAB_DATA_ID,a),r.attrSet(TAB_DATA_KEY,l),r.attrSet("aria-selected",String(c)),o.content=e.name,s.children=[o],[r,s,n]});a.push(g,...y,b);for(let T=0;T<e.length;T++){const r=new t.Token("tab-panel_open","div",1),n=new t.Token("tab-panel_close","div",-1),o=e[T],s=getTabId(o,{runId:i}),l=isTabSelected(o);o.name=getName(o);const c=generateID();r.block=!0,n.block=!0,r.attrSet("id",c),r.attrSet("class",TAB_PANEL_CLASSNAME),r.attrSet("role","tabpanel"),r.attrSet("aria-labelledby",s),r.attrSet("data-title",o.name),l&&r.attrJoin("class",ACTIVE_CLASSNAME),a.push(r,...e[T].tokens,n)}return a.push(c),a},accordion=(e,t,{containerClasses:r,tabsGroup:n,runId:i})=>{var o,s;const a=[],l=new t.Token("tabs_open","div",1),c=new t.Token("tabs_close","div",-1);if(e.length){const[t]=null!=(o=e[0].listItem.map)?o:[null];if(null==t)throw new Error("failed to parse line mapping");const[r,n]=null!=(s=e[e.length-1].listItem.map)?s:[null,null];if(null==n)throw new Error("failed to parse line mapping")}if(l.block=!0,c.block=!0,e.filter(isTabSelected).length>1)throw new Error("Unable to render tabs with more than 1 active element");l.attrSet("class",[TABS_CLASSNAME,r,TABS_ACCORDION_CLASSNAME].filter(Boolean).join(" ")),l.attrSet(GROUP_DATA_KEY,n),l.attrSet(TAB_DATA_VARIANT,"accordion"),a.push(l);for(let u=0;u<e.length;u++){const r=new t.Token("tab_open","div",1),n=new t.Token("inline","",0),o=new t.Token("text","",0),s=new t.Token("tab_close","div",-1),l=new t.Token("tab-panel_open","div",1),c=new t.Token("tab-panel_close","div",-1);r.map=e[u].listItem.map,r.markup=e[u].listItem.markup;const d=e[u],p=getTabId(d,{runId:i}),h=getTabKey(d),f=isTabSelected(d);d.name=getName(d);const m=generateID();r.map=e[u].listItem.map,r.markup=e[u].listItem.markup,o.content=e[u].name,n.children=[o],r.block=!0,s.block=!0,l.block=!0,c.block=!0,r.attrSet(TAB_DATA_ID,p),r.attrSet(TAB_DATA_KEY,h),r.attrSet("class",[TAB_CLASSNAME,TAB_GROUP_CLASSNAME].join(" ")),r.attrSet("role","tab"),r.attrSet("aria-controls",m),r.attrSet("aria-selected","false"),r.attrSet("tabindex",0===u?"0":"-1"),r.attrSet(TAB_ACTIVE_KEY,"false"),l.attrSet("id",m),l.attrSet("class",TAB_PANEL_CLASSNAME),l.attrSet("role","tabpanel"),l.attrSet("aria-labelledby",p),l.attrSet("data-title",d.name),f&&(l.attrSet(TAB_FORCED_OPEN,"true"),l.attrJoin("class",ACTIVE_CLASSNAME),r.attrJoin("class",ACTIVE_CLASSNAME)),a.push(r,n,s),a.push(l,...e[u].tokens,c)}return a.push(c),a},generateByType={regular:regular,radio:radio,dropdown:dropdown,accordion:accordion},generateTokensByType=e=>generateByType[e];function generateTabsTokens(e,t,r){return generateTokensByType(r.variant)(e,t,r)}var import_token=__toESM(require$$0);function findCloseTokenIndex(e,t){let r=0,n=t;for(;n<e.length;){if(matchOpenToken(e,n))r++;else if(matchCloseToken(e,n)){if(0===r)return n;r--}n++}return null}function matchCloseToken(e,t){return"paragraph_open"===e[t].type&&"inline"===e[t+1].type&&"{% endlist %}"===e[t+1].content.trim()}function matchOpenToken(e,t){return"paragraph_open"===e[t].type&&"inline"===e[t+1].type&&e[t+1].content.match(TAB_RE)}function props(e){const t=trim(e.replace("list tabs","")),r=t.split(" "),n={content:t,variant:"regular",group:`${DEFAULT_TABS_GROUP_PREFIX}${generateID()}`};for(const i of r){const[e,t]=i.split("=").map(trim);switch(e){case"horizontal":case"radio":case"dropdown":case"accordion":n.variant=e;break;case"group":n.group=unquote(t)}}return n}function tryToFindTabs(e,t){const r=matchOpenToken(e,t),n=r&&r[0],i=n&&!(n.startsWith("`")&&n.endsWith("`"));if(!r||!i)return{step:1};const o=findCloseTokenIndex(e,t+3);return o?{content:n,closeTokenIndex:o}:(e[t].attrSet("YFM005","true"),{step:3})}function findTabs(e,t,r){const n=[];let i=t,o=-1,s={name:"",tokens:[],listItem:new import_token.default("list_item_open","",0)};for(;i<e.length;){const t=e[i];switch(t.type){case"ordered_list_open":case"bullet_list_open":o>-1&&s.tokens.push(t),o++;break;case"list_item_open":o?s.tokens.push(t):s={name:"",tokens:[],listItem:t};break;case"list_item_close":o?s.tokens.push(t):n.push(s);break;case"ordered_list_close":case"bullet_list_close":if(!o)return n;o--,s.tokens.push(t);break;case"paragraph_open":if(i===r&&e[i+1].content&&"{% endlist %}"===e[i+1].content.trim())return s&&!o&&n.push(s),n;s.name||"inline"!==e[i+1].type?s.tokens.push(t):(s.name=e[i+1].content,i+=2);break;default:s.tokens.push(t)}i++}return n}var defaultFeatures={enabledVariants:{regular:!0,radio:!0}},runsCounter=0;function transform({runtimeJsPath:e="_assets/tabs-extension.js",runtimeCssPath:t="_assets/tabs-extension.css",containerClasses:r="",bundle:n=!0,features:i=defaultFeatures}={}){return function(o,s){const{output:a="."}=s||{},l=o=>{const{env:s,tokens:l}=o,c=String(++runsCounter);addHiddenProperty(s,"bundled",new Set);let u=0,d=!1;for(;u<l.length;){const e=tryToFindTabs(l,u);if("step"in e){u+=e.step;continue}const{content:t,closeTokenIndex:n}=e,s=props(t);i.enabledVariants[s.variant]||(s.variant="regular");const a=findTabs(o.tokens,u+3,n);if(a.length>0){const e=generateTabsTokens(a,o,{containerClasses:r,tabsGroup:s.group,variant:s.variant,runId:c});o.tokens.splice(u,n-u+3,...e),u++,d=!0}else o.tokens.splice(u,n-u+3)}d&&(s.meta=s.meta||{},s.meta.script=s.meta.script||[],s.meta.style=s.meta.style||[],s.meta.script.push(e),s.meta.style.push(t),n&&copyRuntimeFiles({runtimeJsPath:e,runtimeCssPath:t,output:a},s.bundled))};try{o.core.ruler.before("curly_attributes","tabs",l)}catch(c){o.core.ruler.push("tabs",l)}}}return plugin}var pluginExports=requirePlugin(),TabsNode,TabsNode2,TabsAttrs,TabsAttrs2,TabsListAttrs,TabsListAttrs2,TabAttrs,TabAttrs2,TabPanelAttrs,TabPanelAttrs2;TabsNode2=TabsNode||(TabsNode={}),TabsNode2.TabPanel="yfm_tab_panel",TabsNode2.Tab="yfm_tab",TabsNode2.TabsList="yfm_tabs_list",TabsNode2.Tabs="yfm_tabs",TabsNode2.RadioTabs="yfm_radio_tabs",TabsNode2.RadioTab="yfm_radio_tab",TabsNode2.RadioTabInput="yfm_radio_tab_input",TabsNode2.RadioTabLabel="yfm_radio_tab_label",TabsAttrs2=TabsAttrs||(TabsAttrs={}),TabsAttrs2.class="class",TabsAttrs2.dataDiplodocGroup="data-diplodoc-group",TabsAttrs2.dataDiplodocVariant="data-diplodoc-variant",TabsListAttrs2=TabsListAttrs||(TabsListAttrs={}),TabsListAttrs2.class="class",TabsListAttrs2.role="role",TabAttrs2=TabAttrs||(TabAttrs={}),TabAttrs2.id="id",TabAttrs2.class="class",TabAttrs2.role="role",TabAttrs2.ariaControls="aria-controls",TabAttrs2.ariaSelected="aria-selected",TabAttrs2.tabindex="tabindex",TabAttrs2.dataDiplodocKey="data-diplodoc-key",TabAttrs2.dataDiplodocid="data-diplodoc-id",TabAttrs2.dataDiplodocIsActive="data-diplodoc-is-active",TabAttrs2.dataDiplodocVerticalTab="data-diplodoc-vertical-tab",TabPanelAttrs2=TabPanelAttrs||(TabPanelAttrs={}),TabPanelAttrs2.id="id",TabPanelAttrs2.class="class",TabPanelAttrs2.role="role",TabPanelAttrs2.dataTitle="data-title",TabPanelAttrs2.ariaLabelledby="aria-labelledby";const prefix="r-",tabsPostPlugin=e=>{e.core.ruler.push("me_tabs_after",e=>{const t=[];for(const r of e.tokens)switch(r.type){case"tabs_open":{const e=r.attrGet("class")?.includes("yfm-tabs-vertical");t.push({vertical:e}),e&&(r.type=prefix+r.type);break}case"tabs_close":{const e=t.pop();e?.vertical&&(r.type=prefix+r.type);break}case"tab_open":{const e=t.at(-1);e?.vertical&&(r.type=prefix+r.type);break}case"tab_close":{const e=t.at(-1);e?.vertical&&(r.type=prefix+r.type);break}case"tab-input":case"tab-label_open":case"tab-label_close":{const e=t.at(-1);e?.vertical&&(r.type=prefix+r.type);break}}})},attrsFromEntries=e=>e.attrs?Object.fromEntries(e.attrs):{},parserTokens={[TabsNode.TabPanel]:{name:TabsNode.TabPanel,type:"block",getAttrs:attrsFromEntries},[TabsNode.Tab]:{name:TabsNode.Tab,type:"block",getAttrs:attrsFromEntries},[TabsNode.Tabs]:{name:TabsNode.Tabs,type:"block",getAttrs:attrsFromEntries},[TabsNode.TabsList]:{name:TabsNode.TabsList,type:"block",getAttrs:attrsFromEntries},[TabsNode.RadioTabs]:{name:TabsNode.RadioTabs,type:"block",getAttrs:attrsFromEntries},[TabsNode.RadioTab]:{name:TabsNode.RadioTab,type:"block",getAttrs:attrsFromEntries},[TabsNode.RadioTabInput]:{name:TabsNode.RadioTabInput,type:"node",getAttrs:attrsFromEntries},[TabsNode.RadioTabLabel]:{name:TabsNode.RadioTabLabel,type:"block",getAttrs:attrsFromEntries}},DEFAULT_PLACEHOLDERS={TabTitle:"Tab title",RadioTabLabelTitle:"Radio title"},getSchemaSpecs=(e,t)=>({[TabsNode.Tab]:{attrs:{[TabAttrs.id]:{default:"unknown"},[TabAttrs.class]:{default:"yfm-tab"},[TabAttrs.role]:{default:"unknown"},[TabAttrs.ariaControls]:{default:"unknown"},[TabAttrs.ariaSelected]:{default:"unknown"},[TabAttrs.tabindex]:{default:"unknown"},[TabAttrs.dataDiplodocKey]:{default:"unknown"},[TabAttrs.dataDiplodocid]:{default:"unknown"},[TabAttrs.dataDiplodocIsActive]:{default:"unknown"}},marks:"",content:"text*",group:"block",parseDOM:[{tag:"div.yfm-tab"}],toDOM:e=>["div",{draggable:"false",...e.attrs},0],placeholder:{content:e?.tabPlaceholder??DEFAULT_PLACEHOLDERS.TabTitle,alwaysVisible:!0},selectionContext:!1,selectable:!1,allowSelection:!1,complex:"leaf"},[TabsNode.TabPanel]:{attrs:{[TabPanelAttrs.id]:{default:"unknown"},[TabPanelAttrs.class]:{default:"yfm-tab-panel"},[TabPanelAttrs.role]:{default:"unknown"},[TabPanelAttrs.dataTitle]:{default:"unknown"},[TabPanelAttrs.ariaLabelledby]:{default:"unknown"}},content:"(block | paragraph)+",group:"block",parseDOM:[{tag:"div.yfm-tab-panel"}],toDOM:e=>["div",e.attrs,0],selectable:!1,allowSelection:!1,complex:"leaf",isolating:!0},[TabsNode.Tabs]:{attrs:{[TabsAttrs.class]:{default:"yfm-tabs"},[TabsAttrs.dataDiplodocGroup]:{default:"unknown"},[TabsAttrs.dataDiplodocVariant]:{default:"regular"}},content:`${TabsNode.TabsList} ${TabsNode.TabPanel}+`,group:"block",parseDOM:[{tag:"div.yfm-tabs"}],toDOM:e=>["div",e.attrs,0],selectable:!0,complex:"root"},[TabsNode.TabsList]:{attrs:{[TabsListAttrs.class]:{default:"yfm-tab-list"},[TabsListAttrs.role]:{default:"unknown"}},content:`${TabsNode.Tab}*`,group:"block",parseDOM:[{tag:"div.yfm-tab-list"}],toDOM:e=>["div",e.attrs,0],selectable:!1,allowSelection:!1,complex:"inner"},[TabsNode.RadioTabs]:{attrs:{[TabsAttrs.class]:{default:"yfm-tabs yfm-tabs-vertical"},[TabsAttrs.dataDiplodocGroup]:{default:"unknown"},[TabsAttrs.dataDiplodocVariant]:{default:"radio"}},content:`(${TabsNode.RadioTab} ${TabsNode.TabPanel})+`,group:"block",toDOM:e=>["div",e.attrs,0],complex:"root"},[TabsNode.RadioTab]:{attrs:{[TabAttrs.id]:{default:null},[TabAttrs.class]:{default:"yfm-tab yfm-vertical-tab"},[TabAttrs.role]:{default:"unknown"},[TabAttrs.ariaControls]:{default:"unknown"},[TabAttrs.ariaSelected]:{default:"unknown"},[TabAttrs.tabindex]:{default:"unknown"},[TabAttrs.dataDiplodocKey]:{default:"unknown"},[TabAttrs.dataDiplodocid]:{default:"unknown"},[TabAttrs.dataDiplodocIsActive]:{default:"false"},[TabAttrs.dataDiplodocVerticalTab]:{default:"true"}},content:`${TabsNode.RadioTabInput} ${TabsNode.RadioTabLabel}`,group:"block",toDOM:e=>["div",e.attrs,0],selectable:!1,allowSelection:!1,complex:"inner"},[TabsNode.RadioTabInput]:{attrs:{[TabAttrs.class]:{default:"radio"},type:{default:"radio"},checked:{default:null}},group:"block",toDOM:e=>["input",e.attrs],selectable:!1,allowSelection:!1,complex:"leaf"},[TabsNode.RadioTabLabel]:{attrs:{},marks:"",content:"text*",group:"block",toDOM:e=>["label",e.attrs,0],placeholder:{content:DEFAULT_PLACEHOLDERS.RadioTabLabelTitle,alwaysVisible:!0},selectionContext:!1,selectable:!1,allowSelection:!1,complex:"leaf"}}),serializerTokens={[TabsNode.Tab]:(e,t)=>{e.renderInline(t)},[TabsNode.TabPanel]:(e,t)=>{e.renderContent(t)},[TabsNode.Tabs]:(e,t)=>{e.write("{% list tabs %}"),e.write("\n"),e.write("\n");const r=[];t.content.forEach(e=>{r.push(e)}),r[0].content.forEach((t,n,i)=>{e.write("- "+(t.textContent||getPlaceholderContent(t))),e.write("\n"),e.write("\n"),r[i+1]&&e.renderList(r[i+1],"  ",()=>"  ")}),e.write("{% endlist %}"),e.closeBlock(t)},[TabsNode.TabsList]:(e,t)=>{e.renderList(t,"  ",()=>(t.attrs.bullet||"-")+" ")},[TabsNode.RadioTabs]:(e,t)=>{e.write("{% list tabs radio %}"),e.write("\n"),e.write("\n");const r=getChildrenOfNode(t);for(let n=0;n<r.length;n++){const t=r[n];if(t.node.type.name!==TabsNode.RadioTab)continue;e.write("- "+(t.node.textContent||getPlaceholderContent(t.node.lastChild))),e.write("\n"),e.write("\n");const i=r[n+1];i.node.type.name===TabsNode.TabPanel&&e.renderList(i.node,"  ",()=>"  ")}e.write("{% endlist %}"),e.closeBlock(t)},[TabsNode.RadioTab]:(e,t)=>{e.renderInline(t)},[TabsNode.RadioTabInput]:()=>{},[TabsNode.RadioTabLabel]:(e,t)=>{e.renderInline(t)}},tabPanelType=nodeTypeFactory(TabsNode.TabPanel),tabType=nodeTypeFactory(TabsNode.Tab),tabsType=nodeTypeFactory(TabsNode.Tabs),tabsListType=nodeTypeFactory(TabsNode.TabsList),YfmTabsSpecs=(e,t)=>{const r=getSchemaSpecs(t);e.configureMd(e=>e.use(pluginExports.transform({bundle:!1,features:{enabledVariants:{regular:!0,radio:!0,dropdown:!1,accordion:!1}}})).use(tabsPostPlugin)).addNode(TabsNode.Tab,()=>({spec:r[TabsNode.Tab],toMd:serializerTokens[TabsNode.Tab],fromMd:{tokenSpec:parserTokens[TabsNode.Tab],tokenName:"tab"},view:t.tabView})).addNode(TabsNode.TabsList,()=>({spec:r[TabsNode.TabsList],toMd:serializerTokens[TabsNode.TabsList],fromMd:{tokenSpec:parserTokens[TabsNode.TabsList],tokenName:"tab-list"},view:t.tabsListView})).addNode(TabsNode.TabPanel,()=>({spec:r[TabsNode.TabPanel],toMd:serializerTokens[TabsNode.TabPanel],fromMd:{tokenSpec:parserTokens[TabsNode.TabPanel],tokenName:"tab-panel"},view:t.tabPanelView})).addNode(TabsNode.Tabs,()=>({spec:r[TabsNode.Tabs],toMd:serializerTokens[TabsNode.Tabs],fromMd:{tokenSpec:parserTokens[TabsNode.Tabs],tokenName:"tabs"},view:t.tabsView})),e.addNode(TabsNode.RadioTabs,()=>({spec:r[TabsNode.RadioTabs],toMd:serializerTokens[TabsNode.RadioTabs],fromMd:{tokenSpec:parserTokens[TabsNode.RadioTabs],tokenName:"r-tabs"}})).addNode(TabsNode.RadioTab,()=>({spec:r[TabsNode.RadioTab],toMd:serializerTokens[TabsNode.RadioTab],fromMd:{tokenSpec:parserTokens[TabsNode.RadioTab],tokenName:"r-tab"},view:t.vtabView})).addNode(TabsNode.RadioTabInput,()=>({spec:r[TabsNode.RadioTabInput],toMd:serializerTokens[TabsNode.RadioTabInput],fromMd:{tokenSpec:parserTokens[TabsNode.RadioTabInput],tokenName:"r-tab-input"},view:t.vtabInputView})).addNode(TabsNode.RadioTabLabel,()=>({spec:r[TabsNode.RadioTabLabel],toMd:serializerTokens[TabsNode.RadioTabLabel],fromMd:{tokenSpec:parserTokens[TabsNode.RadioTabLabel],tokenName:"r-tab-label"}}))};function isImageNode(e){return e.type.name===imageNodeName}const createImageNode=(e,t,r)=>async({result:n,file:i})=>{const o={[ImgSizeAttr.Src]:n.url,[ImgSizeAttr.Alt]:n.name??i.name};if(t.needDimensions)try{const e=await loadImage$1(i).then(t.enableNewImageSizeCalculation?getImageSizeNew:getImageSize);Object.assign(o,e)}catch(s){globalLogger.error(s),r.error({error:s})}return e.create(o)};async function loadImage$1(e){return new Promise((t,r)=>{const n=document.createElement("img");n.src=URL.createObjectURL(e),n.onload=()=>{URL.revokeObjectURL(n.src),t(n)},n.onerror=(e,t,n,i,o)=>r(o)})}async function loadImageFromUrl(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>t(n),n.onerror=(e,t,n,i,o)=>r(o),n.src=e})}function getImageSize(e){return{height:String(Math.min(IMG_MAX_HEIGHT$1,e.height))}}function getImageSizeNew({width:e,height:t}){const r=getProportionalSize({width:e,height:t,imgMaxHeight:IMG_MAX_HEIGHT$1});return{width:String(r.width),height:String(r.height)}}function checkSvg(e){return e&&(/\.svg($|\?|#)/i.test(e)||e.startsWith("data:image/svg"))}function findImageNode(e,t){let r=null;return e.descendants((e,n)=>!isImageNode(e)||e.attrs.id!==t||(r={node:e,pos:n},!1)),r}class FilesBatchUploadProcess{view;files;uploadHandler;logger;skeletonDescriptor;constructor(e,t,r){this.view=e,this.files=t,this.uploadHandler=r,this.logger=getLoggerFromState(e.state)}async run(){await this.insertSkeleton(),await this.batchUpload(),this.removeSkeleton()}async insertSkeleton(){const{view:e}=this,{state:t}=e;this.skeletonDescriptor=await this.createSkeleton();let r=t.tr;t.selection.empty||(r=r.deleteSelection()),r=this.skeletonDescriptor.applyTo(r),e.dispatch(r)}async batchUpload(){const e=[];await batchUploadFiles(this.files,this.uploadHandler,t=>{e.push((async()=>{const e=await this.createPMNode(t),{view:r}=this,{schema:n}=r.state;r.dispatch(r.state.tr.insert(this.skeletonDescriptor.pos,[n.text(" "),e,n.text(" ")]))})().catch(console.error))}),await Promise.allSettled(e)}removeSkeleton(){const{view:e}=this;e.dispatch(this.skeletonDescriptor.rmDeco(e.state.tr))}}const b$q=cn("image-skeleton");class ImageSkeletonDescriptor extends ReactWidgetDescriptor{#B;get pos(){return this.getPos?.()??this.initPos}constructor(e,t){super(e,"image_skeleton"),this.#B=document.createElement("span"),this.#B.classList.add(b$q()),t&&(this.#B.style.setProperty("--img-skeleton-width",t.width),this.#B.style.setProperty("--img-skeleton-height",t.height))}getDomElem(){return this.#B}renderReactElement(){return jsxRuntimeExports.jsx(Skeleton,{className:b$q("skeleton")})}}class ImagesUploadProcess extends FilesBatchUploadProcess{createImage;initPosition;enableNewImageSizeCalculation;constructor(e,t,r,n,i){super(e,t,r),this.initPosition=n,this.createImage=createImageNode(imageType(this.view.state.schema),i,this.logger),this.enableNewImageSizeCalculation=i.enableNewImageSizeCalculation}async createSkeleton(){return new ImageSkeletonDescriptor(this.initPosition,await getSkeletonSize(this.files,{enableNewImageSizeCalculation:this.enableNewImageSizeCalculation},this.logger))}async createPMNode(e){return this.createImage(e)}}async function getSkeletonSize(e,t,r){const n={width:"300",height:"200"};if(1===e.length)try{const r=await loadImage$1(e[0]).then(t.enableNewImageSizeCalculation?calcSkeletonSizeNew:calcSkeletonSize);n.width=String(r.width),n.height=String(r.height)}catch(i){globalLogger.error(i),r.error({error:i})}return n}function calcSkeletonSize({width:e,height:t}){return t<=IMG_MAX_HEIGHT$1?{width:e,height:t}:{height:IMG_MAX_HEIGHT$1,width:e*(IMG_MAX_HEIGHT$1/t)}}function calcSkeletonSizeNew({width:e,height:t}){return getProportionalSize({width:e,height:t,imgMaxHeight:IMG_MAX_HEIGHT$1})}const{isFilesFromHtml:isFilesFromHtml$1,isFilesOnly:isFilesOnly$1,isImageFile:isImageFile$1}=clipboardUtils,ImagePaste=(e,t)=>{const{parseInsertedUrlAsImage:r,imageUploadHandler:n}=t??{};if(!isFunction$1(n??r))throw new Error(`ImagePaste extension: ${t.imageUploadHandler?"imageUploadHandler":"parseInsertedUrlAsImage"} is not a function`);const i=new InputState$1;e.addPlugin(()=>new Plugin({props:{handleDOMEvents:{keydown(e,t){i.keydown(t)},keyup(e,t){i.keyup(t)},paste(e,o){const s=getLoggerFromState(e.state).nested({plugin:"image-paste",domEvent:"paste"}),a=getPastedImages(o.clipboardData);if(n&&a)return o.preventDefault(),s.event({event:"paste-images"}),new ImagesUploadProcess(e,a,n,e.state.tr.selection.from,t).run(),!0;if(!i.shiftKey&&r){const{imageUrl:n,title:i}=r(o.clipboardData?.getData(DataTransferType.Text)??"")||{};if(!n)return!1;o.preventDefault();const a=checkSvg(n),l=`img-${Math.random().toString(36).slice(2)}`,c=imageType(e.state.schema).create({src:n,alt:i,id:l}),u=e.state.tr.replaceSelectionWith(c);return e.dispatch(u.scrollIntoView()),s.event({event:"paste-url-as-image"}),loadImageFromUrl(n).then(e=>t?.enableNewImageSizeCalculation||a?getImageSizeNew(e):getImageSize(e)).then(t=>{const r=e.state,n=findImageNode(r.doc,l);if(null===n)return void s.error({event:"img-node-not-found",trackingId:l});const{pos:i}=n,o=r.tr.setNodeAttribute(i,ImgSizeAttr.Height,t.height).setNodeAttribute(i,ImgSizeAttr.Width,t.width).setNodeAttribute(i,"id",null);e.dispatch(o),s.event({event:"img-dimensions-updated",position:i,sizes:t})}).catch(e=>{s.error({event:"img-dimensions-load-failed",error:e.message})}),!0}return!1},drop(e,r){if(!n)return!1;if(e.dragging)return!1;const i=getPastedImages(r.dataTransfer);if(!i)return!1;const o=e.posAtCoords({left:r.clientX,top:r.clientY})?.pos??-1;if(-1===o)return!1;const s=dropPoint(e.state.doc,o,createFakeImageSlice(e.state.schema));return getLoggerFromState(e.state).event({event:"drop-image",plugin:"image-paste",domEvent:"drop",runProcess:null!==s}),null!==s&&new ImagesUploadProcess(e,i,n,s,t).run(),r.preventDefault(),!0}},handlePaste(e,r,i){if(!n)return!1;const o=sliceSingleNode(i);if(o&&isImageNode(o)){const r=dataUrlToFile(o.attrs[ImgSizeAttr.Src],"image");if(r)return new ImagesUploadProcess(e,[r],n,e.state.tr.selection.from,t).run(),!0}return!1}}}),e.Priority.VeryHigh)};function getPastedImages(e){if(!e||0===e.files.length)return null;if(!isFilesOnly$1(e)&&!isFilesFromHtml$1(e))return null;const t=Array.from(e.files);return t.every(isImageFile$1)?t:null}function createFakeImageSlice(e){return new Slice(Fragment.from(imageType(e).create({[ImageAttr.Src]:"fake",[ImageAttr.Title]:"image"})),0,0)}function sliceSingleNode(e){return 0===e.openStart&&0===e.openEnd&&1===e.content.childCount?e.content.firstChild:null}function dataUrlToFile(e,t){const[r,n]=e.split(",");if(!r||!n)return null;const i=r.match(/^data:(.+);base64/)?.[1];return i?new File([decode(n)],t,{type:i}):null}const ButtonAttach=({onUpdate:e,onChange:t,multiple:r,buttonProps:n,accept:i,children:o})=>{const{controlProps:s,triggerProps:a}=useFileInput({onUpdate:e,onChange:t});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{type:"file",multiple:r,accept:i,...s}),jsxRuntimeExports.jsx(Button,{...n,...a,children:o})]})},NumberInput=e=>{const{value:t,onUpdate:r,min:n,max:i,...o}=e;return jsxRuntimeExports.jsx(TextInput,{value:isNumber(t)?String(t):"",onUpdate:e=>{isNumber(e)?r(parseInt(e,10)):r()},controlProps:{min:n,max:i},type:"number",...o})},b$p=cn("image-form");var ImageTabId,ImageTabId2;ImageTabId2=ImageTabId||(ImageTabId={}),ImageTabId2.Attach="attach",ImageTabId2.Link="link";const ImageForm$1=({className:e,autoFocus:t,onCancel:r,onSubmit:n,onAttach:i,loading:o,imageTitle:s,uploadHint:a})=>{const[l,c]=reactExports.useState(()=>isFunction$1(i)?ImageTabId.Attach:ImageTabId.Link),[u,d]=reactExports.useState(""),[p,h]=reactExports.useState(s??""),[f,m]=reactExports.useState(""),[g,b]=reactExports.useState(),[y,T]=reactExports.useState(),E=isFunction$1(i);reactExports.useLayoutEffect(()=>{E||l!==ImageTabId.Attach||c(ImageTabId.Link)},[E,l]);const O=()=>{const e={url:u.trim(),name:p.trim(),alt:f.trim()};"number"==typeof g&&g>=0&&(e.width=g),"number"==typeof y&&y>=0&&(e.height=y),n(e)},S=enterKeyHandler(O);return jsxRuntimeExports.jsxs(Form.Form,{className:b$p(null,[e]),children:[E&&jsxRuntimeExports.jsx(Tabs,{activeTab:l,onSelectTab:c,items:[{id:ImageTabId.Attach,title:i18n$c("common_tab_attach")},{id:ImageTabId.Link,title:i18n$c("common_tab_link")}]}),l===ImageTabId.Attach&&i&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Form.Layout,{children:a??i18n$c("image_upload_help")}),jsxRuntimeExports.jsx(Form.Footer,{onCancel:r,children:jsxRuntimeExports.jsx(ButtonAttach,{multiple:!0,accept:"image/*",onUpdate:i,buttonProps:{size:"s",view:"action",loading:o},children:i18n$c("common_action_upload")})})]}),l===ImageTabId.Link&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Form.Layout,{children:[jsxRuntimeExports.jsx(Form.Row,{label:i18n$c("common_link"),control:jsxRuntimeExports.jsx(TextInputFixed,{size:"s",view:"normal",value:u,onUpdate:d,placeholder:"https://",autoFocus:t,className:b$p("input",{type:"link"}),onKeyPress:S})}),jsxRuntimeExports.jsx(Form.Row,{label:i18n$c("image_name"),control:jsxRuntimeExports.jsx(TextInput,{size:"s",view:"normal",value:p,onUpdate:h,className:b$p("input",{type:"name"}),onKeyPress:S})}),jsxRuntimeExports.jsx(Form.Row,{label:i18n$c("image_alt"),help:i18n$c("image_alt_help"),control:jsxRuntimeExports.jsx(TextInput,{size:"s",view:"normal",value:f,onUpdate:m,className:b$p("input",{type:"alt"}),onKeyPress:S})}),jsxRuntimeExports.jsx(Form.Row,{label:i18n$c("common_sizes"),control:jsxRuntimeExports.jsxs("div",{className:b$p("size-controls"),children:[jsxRuntimeExports.jsx(NumberInput,{min:0,size:"s",view:"normal",value:g,onUpdate:b,placeholder:i18n$c("image_size_width"),className:b$p("input",{type:"width"}),onKeyDown:S}),"x",jsxRuntimeExports.jsx(NumberInput,{min:0,size:"s",view:"normal",value:y,onUpdate:T,placeholder:i18n$c("image_size_height"),className:b$p("input",{type:"height"}),onKeyDown:S})]})})]}),jsxRuntimeExports.jsx(Form.Footer,{onCancel:r,onSubmit:O})]})]})},b$o=cn("image-placeholder"),placement$5=["bottom-start","top-start","bottom-end","top-end"],defaultFormRenderer=e=>jsxRuntimeExports.jsx(ImageForm$1,{autoFocus:!0,loading:e.uploading,onCancel:e.onCancel,onSubmit:e.onSubmit,onAttach:e.onAttach}),ImagePlaceholder=({onCancel:e,onSubmit:t,onAttach:r,renderForm:n})=>{const i=useMountedState(),[o,s,a]=useBooleanState(!1),[l,c]=useElementState(),u=reactExports.useCallback(e=>{r&&i()&&(s(),r(e).finally(()=>{i()&&a()}))},[i,r,s,a]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{ref:c,className:b$o(),children:[jsxRuntimeExports.jsx(Icon,{data:Picture,size:24}),i18n$b("image")]}),jsxRuntimeExports.jsx(Popup,{open:!0,modal:!0,onOpenChange:e,anchorElement:l,placement:placement$5,children:(n||defaultFormRenderer)({onCancel:e,onSubmit:t,uploading:o,onAttach:r&&u})})]})},addWidget$1=(e,t,r)=>new ImageWidgetDescriptor(e.selection.from,t,r).applyTo(e),removeWidget$1=removeDecoration;class ImageWidgetDescriptor extends ReactWidgetDescriptor{domElem;deps;uploadImages;needToSetDimensionsForUploadedImages;enableNewImageSizeCalculation;renderImageForm;widgetHandler=null;constructor(e,t,r){super(e,"image_placeholder"),this.domElem=document.createElement("span"),this.deps=t,this.uploadImages=r.uploadImages,this.renderImageForm=r.renderImageForm,this.needToSetDimensionsForUploadedImages=r.needToSetDimensionsForUploadedImages,this.enableNewImageSizeCalculation=r.enableNewImageSizeCalculation}getWidgetHandler(e,t){return this.widgetHandler||(this.widgetHandler=new ImageWidgetHandler({view:e,getPos:t,decoId:this.id,uploadImages:this.uploadImages,renderImageForm:this.renderImageForm,needToSetDimensionsForUploadedImages:this.needToSetDimensionsForUploadedImages,enableNewImageSizeCalculation:this.enableNewImageSizeCalculation},this.deps)),this.widgetHandler}getDomElem(){return this.domElem}renderReactElement(e,t){return this.getWidgetHandler(e,t).renderWidgetView(e,t)}remove(){super.remove(),this.widgetHandler?.destruct(),this.widgetHandler=null}}class ImageWidgetHandler{view;getPos;decoId;uploadImages;normalizeUrl;needToSetDimensionsForUploadedImages;enableNewImageSizeCalculation;renderImageForm;cancelled=!1;constructor({decoId:e,view:t,getPos:r,uploadImages:n,renderImageForm:i,needToSetDimensionsForUploadedImages:o,enableNewImageSizeCalculation:s},a){this.decoId=e,this.view=t,this.getPos=r,this.uploadImages=n,this.normalizeUrl=normalizeUrlFactory(a),this.renderImageForm=i,this.needToSetDimensionsForUploadedImages=o,this.enableNewImageSizeCalculation=s}destruct(){this.cancelled=!0}renderWidgetView(e,t){return this.view=e,this.getPos=t,jsxRuntimeExports.jsx(ImagePlaceholder,{onCancel:this.onCancel,onSubmit:this.onSubmit,onAttach:this.uploadImages&&this.onAttach,renderForm:this.renderImageForm})}onCancel=()=>{this.cancelled=!0,this.view.dispatch(removeDecoration(this.view.state.tr,this.decoId)),this.view.focus()};onSubmit=e=>{if(this.cancelled)return;const t=this.normalizeUrl(e.url)?.url;if(!t)return;const r={[ImgSizeAttr.Src]:t,[ImgSizeAttr.Title]:e.name,[ImgSizeAttr.Alt]:e.alt,[ImgSizeAttr.Width]:isNumber(e.width)?String(e.width):null,[ImgSizeAttr.Height]:isNumber(e.height)?String(e.height):null},n=imageType(this.view.state.schema).create(r);this.insertNodes([n])};onAttach=async e=>{if(this.cancelled||!this.uploadImages)return;const{view:t}=this;new ImagesUploadProcess(t,e,this.uploadImages,this.getPos(),{needDimensions:this.needToSetDimensionsForUploadedImages,enableNewImageSizeCalculation:this.enableNewImageSizeCalculation}).run(),t.dispatch(removeWidget$1(t.state.tr,this.decoId)),t.focus()};insertNodes(e){if(this.cancelled)return;let t=this.view.state.tr;t=t.insert(t.mapping.map(this.getPos()),e),t=removeWidget$1(t,this.decoId),this.view.dispatch(t),this.view.focus()}}const addImageWidget=(e,t)=>({isEnable:e=>e.selection.empty,run(r,n){n(addWidget$1(r.tr,e,t))}}),addImageWidgetAction="addImageWidget",ImageWidget=(e,t)=>{e.addAction(addImageWidgetAction,e=>addImageWidget(e,{uploadImages:t.imageUploadHandler,renderImageForm:t.renderImageWidgetForm,needToSetDimensionsForUploadedImages:t.needToSetDimensionsForUploadedImages,enableNewImageSizeCalculation:t.enableNewImageSizeCalculation}))},addImage=e=>({isEnable:e=>e.selection.empty,run(t,r,n,i){const o=i;if(o?.src){const{src:n,title:i,alt:s,width:a,height:l}=o,c={[ImgSizeAttr.Src]:n,[ImgSizeAttr.Title]:i??"",[ImgSizeAttr.Alt]:s??""};isNumber(a)&&(c[ImgSizeAttr.Width]=String(a)),isNumber(l)&&(c[ImgSizeAttr.Height]=String(l)),r(t.tr.insert(t.selection.from,imageType(e).create(c)))}}}),RESIZE_DELAY=50,MIN_WIDTH=40,THRESHOLD=4,useNodeResizing=({width:e,height:t,onResize:r,ref:n,delay:i=RESIZE_DELAY,threshold:o=THRESHOLD,minWidth:s=MIN_WIDTH})=>{const a=useBooleanState(!1),[l,,,c]=a,[u,d]=reactExports.useState(e),[p,h]=reactExports.useState(t),[f,m]=reactExports.useState(e),[g,b]=reactExports.useState(t);return reactExports.useEffect(()=>{e!==u&&(m(e),d(e)),t!==p&&(b(t),h(t))},[e,t,u,p]),{startResizing:(e,t)=>{e.preventDefault();const a=n?.current;if(!a)throw new Error("Reference element not found!");const l=e.pageX,d=a.getBoundingClientRect().width||0,h=a.getBoundingClientRect().height||0;let f;const g=throttle(e=>{f&&cancelAnimationFrame(f),f=requestAnimationFrame(()=>{const n=e.pageX-l,i="right"===t?d+n:d-n;if(Math.abs(i-d)>=o){const e=i>=s?i:s,t=h/d*e;m(e),b(t);const n=!(u||0===u||null===u&&null===p),o=!p&&0!==p;r?.({width:n?void 0:e,height:o?void 0:t})}})},i),y=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",y),c(),f&&cancelAnimationFrame(f)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",y),c()},state:{resizing:l,width:u||0===u?f:void 0,height:p||0===p?g:void 0}}},b$n=cn("resizable"),Resizer=({onMouseDown:e,direction:t})=>jsxRuntimeExports.jsx("div",{className:b$n("resizer-wrapper",{[t]:!0}),role:"button",tabIndex:0,onMouseDown:e,children:jsxRuntimeExports.jsx("div",{className:b$n("resizer")})}),Resizable=({hover:e,resizing:t,children:r,onResizeLeft:n,onResizeRight:i})=>jsxRuntimeExports.jsxs("div",{className:b$n({hover:e,resizing:t}),children:[r,jsxRuntimeExports.jsx(Resizer,{onMouseDown:n,direction:"left"}),jsxRuntimeExports.jsx(Resizer,{onMouseDown:i,direction:"right"})]}),useAutoFocus=(e,t=[])=>{reactExports.useEffect(()=>{const{current:t}=e,r=setTimeout(()=>{t?.focus()});return()=>{clearTimeout(r)}},[e.current,...t])},b$m=cn("image-tooltip-form"),ImageForm=({node:e,updateAttributes:t,view:r,unsetEdit:n,anchorElement:i})=>{const{attrs:o,marks:s}=e,a=s.find(e=>e.type.name===linkType(r.state.schema).name),[l,c]=reactExports.useState(o[ImgSizeAttr.Title]||""),[u,d]=reactExports.useState(o[ImgSizeAttr.Alt]||""),[p,h]=reactExports.useState(o[ImgSizeAttr.Width]||""),[f,m]=reactExports.useState(o[ImgSizeAttr.Height]||""),[g,b]=reactExports.useState(a?.attrs.href||""),y=()=>{t({title:l.trim(),alt:u.trim(),width:isNumber(p)&&Number(p)>=0?String(p):"",height:isNumber(f)&&Number(f)>=0?String(f):""},a?[linkType(r.state.schema).create({...a.attrs,[LinkAttr.Href]:g})]:[]),n()},T=reactExports.useRef(null),E=reactExports.useRef(null);useAutoFocus(a?T:E);const O=enterKeyHandler(y);return jsxRuntimeExports.jsx(Popup,{open:!0,modal:!0,anchorElement:i,placement:["bottom-start","top-start","bottom-end","top-end"],onOpenChange:(e,t,r)=>{"escape-key"!==r&&n()},children:jsxRuntimeExports.jsxs(Form.Form,{className:b$m(),children:[jsxRuntimeExports.jsxs(Form.Layout,{children:[a&&jsxRuntimeExports.jsx(Form.Row,{label:i18n$c("image_link_href"),help:i18n$c("image_link_href_help"),control:jsxRuntimeExports.jsx(TextInput,{controlRef:T,size:"s",view:"normal",value:g,onUpdate:b,className:b$m("input",{type:"link"}),onKeyPress:O})}),jsxRuntimeExports.jsx(Form.Row,{label:i18n$c("image_name"),control:jsxRuntimeExports.jsx(TextInput,{controlRef:E,size:"s",view:"normal",value:l,onUpdate:c,className:b$m("input",{type:"name"}),onKeyPress:O})}),jsxRuntimeExports.jsx(Form.Row,{label:i18n$c("image_alt"),help:i18n$c("image_alt_help"),control:jsxRuntimeExports.jsx(TextInput,{size:"s",view:"normal",value:u,onUpdate:d,className:b$m("input",{type:"alt"}),onKeyPress:O})}),jsxRuntimeExports.jsx(Form.Row,{label:i18n$c("common_sizes"),control:jsxRuntimeExports.jsxs("div",{className:b$m("size-controls"),children:[jsxRuntimeExports.jsx(NumberInput,{min:0,size:"s",view:"normal",value:p,onUpdate:h,placeholder:i18n$c("image_size_width"),className:b$m("input",{type:"width"}),onKeyPress:O}),"x",jsxRuntimeExports.jsx(NumberInput,{min:0,size:"s",view:"normal",value:f,onUpdate:m,placeholder:i18n$c("image_size_height"),className:b$m("input",{type:"height"}),onKeyPress:O})]})})]}),jsxRuntimeExports.jsx(Form.Footer,{onSubmit:y})]})})},b$l=cn("img-settings-button"),ImgSettingsButton=function({node:e,view:t,updateAttributes:r,visible:n,edit:i,toggleEdit:o,nodeElement:s,unsetEdit:a,onDelete:l}){const[c,u]=useElementState(),[d,p,h,f]=useBooleanState(!1),m=i,g=!i&&(n||d),b=!i&&d;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[m&&jsxRuntimeExports.jsx(ImageForm,{node:e,view:t,updateAttributes:r,anchorElement:s,unsetEdit:a}),g&&jsxRuntimeExports.jsx(Button,{qa:"g-md-image-settings-button",onClick:f,ref:u,size:"s",view:"raised",className:b$l(null,ReactNodeStopEventCn),children:jsxRuntimeExports.jsx(Icon,{data:Ellipsis,className:ReactNodeStopEventCn})}),jsxRuntimeExports.jsx(Popup,{open:b,anchorElement:c,onOpenChange:h,placement:["bottom-end","bottom-start"],children:jsxRuntimeExports.jsxs(Menu,{qa:"g-md-image-settings-menu",children:[jsxRuntimeExports.jsx(Menu.Item,{extraProps:{"aria-label":i18n$d("edit")},onClick:()=>{o(),h()},children:i18n$d("edit")}),jsxRuntimeExports.jsx(Menu.Item,{extraProps:{"aria-label":i18n$d("delete")},onClick:l,children:i18n$d("delete")})]})})]})},cnImgSizeNodeView=cn("img-size-node-view"),ImageNodeView=({node:e,view:t,getPos:r,updateAttributes:n})=>{const i=reactExports.useRef(null),o=reactExports.useRef(null),[s,a]=useElementState(),l=e.attrs[ImgSizeAttr.Alt]||"",c=e.attrs[ImgSizeAttr.Height],u=e.attrs[ImgSizeAttr.Width],d=e.attrs[ImgSizeAttr.Src]||"",p=e.attrs[ImgSizeAttr.Title]||"",h=useNodeHovered(i),[f,m,g,b]=useNodeEditing({nodeRef:i,view:t}),y=reactExports.useCallback(({width:e,height:t})=>{n({width:void 0===e?void 0:String(Math.round(e)),height:void 0===t?void 0:String(Math.round(t)),name:p,alt:l})},[l,p,n]),{state:T,startResizing:E}=useNodeResizing({width:u,height:c,ref:o,onResize:y}),O={transition:"width 0.15s ease-out, height 0.15s ease-out"};T.width?(O.width=`${T.width}px`,T.height&&(O.aspectRatio=T.width/T.height,O.height="auto;")):T.height&&(O.height=`${T.height}px`);const S=reactExports.useCallback(()=>{const n=r();void 0!==n&&(removeNode({node:e,pos:n,tr:t.state.tr,dispatch:t.dispatch}),t.focus())},[r,e,t]),x=e=>t=>{E(t,e)};reactExports.useEffect(()=>{imageRendererKey.getState(t.state)?.linkAdded&&m()},[t,m]);const v=reactExports.useCallback(e=>{setRef(o,e),a(e)},[a]);return jsxRuntimeExports.jsx("div",{ref:i,"data-qa":"g-md-image",children:jsxRuntimeExports.jsxs(Resizable,{hover:h,resizing:T.resizing,onResizeLeft:x("left"),onResizeRight:x("right"),children:[jsxRuntimeExports.jsx(ImgSettingsButton,{node:e,view:t,getPos:r,updateAttributes:n,visible:h&&!f&&!T.resizing,edit:f,toggleEdit:b,nodeElement:s,onDelete:S,unsetEdit:g}),jsxRuntimeExports.jsx("img",{ref:v,src:d,alt:l,style:O})]})})},imgSizeNodeViewPlugin=e=>new Plugin({key:imageRendererKey,state:{init:()=>{},apply:e=>e.getMeta(imageRendererKey)},props:{nodeViews:{[imageNodeName]:reactNodeViewFactory(ImageNodeView,{isInline:!0,reactNodeWrapperCn:cnImgSizeNodeView("wrapper")})(e)}}}),ImgSize=(e,t)=>{e.use(ImgSizeSpecs,t),e.use(ImageWidget,{imageUploadHandler:t.imageUploadHandler,renderImageWidgetForm:t.renderImageWidgetForm,needToSetDimensionsForUploadedImages:Boolean(t.needToSetDimensionsForUploadedImages),enableNewImageSizeCalculation:Boolean(t.enableNewImageSizeCalculation)}),(t.imageUploadHandler||t.parseInsertedUrlAsImage)&&e.use(ImagePaste,{imageUploadHandler:t.imageUploadHandler,needDimensions:Boolean(t.needToSetDimensionsForUploadedImages),parseInsertedUrlAsImage:t.parseInsertedUrlAsImage,enableNewImageSizeCalculation:t.enableNewImageSizeCalculation}),e.addAction(addImageAction,({schema:e})=>addImage(e)),e.addPlugin(imgSizeNodeViewPlugin)},monoAction="mono",Monospace=e=>{e.use(MonospaceSpecs),e.addAction(monoAction,({schema:e})=>createToggleMarkAction(monospaceType(e))).addInputRules(({schema:e})=>({rules:[markInputRule({open:"##",close:"##",ignoreBetween:"#"},monospaceType(e))]}))},addVideo={isEnable:e=>e.selection.empty,run(e,t,r,n){if(!n||!n.service||!n.url)return;const{service:i}=n,o=parsersExports.parseVideoUrl(i,n.url);t(e.tr.insert(e.selection.from,videoType(e.schema).create({[VideoAttr.Service]:i,[VideoAttr.VideoID]:o})))}},vAction="video",Video=(e,t)=>{e.use(VideoSpecs,t),e.addAction(vAction,()=>addVideo)};var base={},hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,(()=>{var e,t,r=Object.create,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,l=((e,t,l)=>(l=null!=e?r(s(e)):{},((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of o(t))a.call(e,l)||undefined===l||n(e,l,{get:()=>t[l],enumerable:!(s=i(t,l))||s.enumerable});return e})(e&&e.__esModule?l:n(l,"default",{value:e,enumerable:!0}),e)))((e={"node_modules/get-root-node-polyfill/index.js"(e,t){function r(e){var t=n(e);return function(e){return"#document-fragment"===e.nodeName&&"ShadowRoot"===e.constructor.name}(t)?r(t.host):t}function n(e){return null!=e.parentNode?n(e.parentNode):e}"object"==typeof t&&t.exports&&(t.exports=function(e){return"object"==typeof e&&Boolean(e.composed)?r(this):n(this)})}},function(){return t||(0,e[o(e)[0]])((t={exports:{}}).exports,t),t.exports})());"undefined"!=typeof document&&function(e){const t=e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector;e.matches=e.matchesSelector=t||function(t){const r=(e.getRootNode?e.getRootNode():l.default.call(e)).querySelectorAll(t),n=this;return Array.prototype.some.call(r,e=>e===n)}}(Element.prototype);var c=e=>{const t=e.composedPath();return Array.isArray(t)&&t.length>0?t[0]:e.target},u=e=>{const t=c(e);return!t||!t.matches},d=e=>{return t=function*(){if(!e)return;if(navigator.clipboard&&(navigator.clipboard.writeText,1))return navigator.clipboard.writeText(e);const t=document.createElement("textarea");t.setAttribute("style","position: absolute; left: 1000%"),t.textContent=e,document.body.append(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},new Promise((e,r)=>{var n=e=>{try{o(t.next(e))}catch(n){r(n)}},i=e=>{try{o(t.throw(e))}catch(n){r(n)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,i);o((t=t.apply(undefined,null)).next())});var t};"undefined"!=typeof document&&document.addEventListener("click",e=>{const t=c(e),r=t.matches(".yfm-clipboard-button");!u(e)&&r&&function(e){const t=e.parentNode;if(!t)return;const r=t.querySelector("pre code");if(!r)return;const n=Array.from(r.childNodes).filter(e=>!(e instanceof HTMLElement&&e.classList.contains("yfm-line-number"))).map(e=>e.textContent).join("");d(n.trim()).then(()=>{!function(e){if(!e)return;const t=e.getAttribute("data-animation"),r=e.getRootNode().getElementById(`visibileAnimation-${t}`);r&&r.beginElement()}(t.querySelector(".yfm-clipboard-icon")),setTimeout(()=>e.blur(),1500)})}(t)}),"undefined"!=typeof document&&document.addEventListener("click",e=>{const t=c(e);if(u(e)||!t.matches(".yfm-clipboard-anchor"))return;const r=t.getAttribute("data-href")||"",n=new URL(r,window.location.href).toString();d(n)});var p=".yfm-clipboard-inline-code",h="tooltip_inline_clipboard_dialog",f="open",m={ru:"",en:"Copied",ar:" ",cs:"Zkoprovno",fr:"Copi",es:"Copiado",he:"",bg:"",et:"Kopeeritud",el:"",pt:"Copiado",zh:"","zh-tw":"",kk:"",tr:"Kopyaland",uz:"Nusxalandi"};function g(e){const t=e.getBoundingClientRect(),r=document.body,n=document.documentElement,i=window.pageYOffset||n.scrollTop||r.scrollTop,o=window.pageXOffset||n.scrollLeft||r.scrollLeft,s=n.clientTop||r.clientTop||0,a=n.clientLeft||r.clientLeft||0,l=t.top+i-s,c=t.left+o-a;return{top:Math.round(l),left:Math.round(c)}}var b=null,y=!0;function T(){return document.getElementById(h)}function E(){b&&(clearTimeout(b),b=null)}function O(e){return e?e.closest("table")||e.closest("code")||e.parentElement:null}function S(){const e=T();if(!e)return;const t=e.getAttribute("inline-id")||"",r=document.getElementById(t);r&&x(e,r)}function x(e,t){const{x:r,y:n,right:i,left:o,width:s,height:a}=t.getBoundingClientRect(),l=O(t);if(!l)return;const{right:c,left:u}=l.getBoundingClientRect();if((c<o||u>i)&&!y)return void _(e);y&&l&&(l.addEventListener("scroll",S),y=!1);const d=Number(e.getAttribute("relativeX")),p=Number(e.getAttribute("relativeY"));if(d===r&&p===n)return;e.setAttribute("relativeX",String(r)),e.setAttribute("relativeY",String(n));const h=a+5,f=e.parentElement;if(!f)return;const{width:m}=e.getBoundingClientRect(),{left:b}=f.getBoundingClientRect(),T=Number(g(t).left),E=m+T,x=T-m<0,v=E>document.body.clientWidth,A=!v&&"rtl"!==document.dir||x?0:m-s,C=g(f).top-f.offsetTop,w=v?E-document.body.clientWidth+5:0,k=g(t).left-b+f.offsetLeft-A,D=k+m>=document.body.clientWidth;e.style.top=Number(g(t).top+h-C)+"px",e.style.left=Number(k-(D?w:0))+"px"}function v(e){const t=e.getAttribute("inline-id");return t?document.getElementById(t):null}function _(e){E(),function(e){e.classList.remove(f);const t=O(v(e)),r=O(e);e.removeAttribute("inline-id"),t&&r&&(r.removeChild(e),t.removeEventListener("scroll",S),y=!0)}(e)}function A(e){const t=function(e){const t=function(){var e;let t=T();if(!t){const r=document.querySelector(".dc-doc-page__content")||document.body,n=document.documentElement.lang||"en",i=null!=(e=m[n])?e:m.en,o=document.createElement("div");o.innerHTML=`\n            <div id="${h}" class="yfm inline_code_tooltip"\n                role="dialog" aria-live="polite" aria-modal="true">\n                ${i}\n            </div>\n        `,t=o.firstElementChild,r.appendChild(t)}return t}();if(e.matches(p)&&t)return t.setAttribute("inline-id",e.getAttribute("id")||""),function(e,t){const r=t.getAttribute("aria-live")||"polite";null==e||e.setAttribute("aria-live",r),null==e||e.setAttribute("aria-modal","true")}(t,e),x(t,e),t.classList.contains(f)?(t.classList.remove(f),requestAnimationFrame(()=>{t.classList.add(f)})):t.classList.add(f),t}(e);t&&(E(),b=setTimeout(()=>{_(t),b=null},1e3))}"undefined"!=typeof document&&(document.addEventListener("click",e=>{const t=c(e),r=t.matches(p);!u(e)&&r&&function(e){const t=e.innerText;t&&d(t).then(()=>{A(e)})}(t)}),document.addEventListener("keydown",e=>{var t;if("Enter"===e.key&&document.activeElement){const e=document.activeElement,t=p.replace(".","");if(!e.classList.contains(t))return;const r=e.innerText;if(!r)return;d(r).then(()=>{A(e)})}const r=T();"Escape"===e.key&&r&&(_(r),null==(t=v(r))||t.focus())}),window.addEventListener("resize",()=>{const e=T();if(!e)return;const t=e.getAttribute("inline-id")||"",r=document.getElementById(t);r?x(e,r):e.classList.toggle(f)}))})()),base}requireBase(),(()=>{var e=e=>{const t=e.composedPath();return Array.isArray(t)&&t.length>0?t[0]:e.target},t={TITLE:".yfm .yfm-term_title",CONTENT:".yfm .yfm-term_dfn"},r="open",n=t.CONTENT.replace(/\./g,"")+" "+r,i=!0;function o(e,t){const{x:r,y:n,right:o,left:l,width:d,height:p}=t.getBoundingClientRect(),h=a(t);if(!h)return;const{right:f,left:m}=h.getBoundingClientRect();if((f<l||m>o)&&!i)return void c(e);i&&h&&(h.addEventListener("scroll",s),i=!1);const g=Number(e.getAttribute("relativeX")),b=Number(e.getAttribute("relativeY"));if(g===r&&b===n)return;e.setAttribute("relativeX",String(r)),e.setAttribute("relativeY",String(n));const y=p+5,T=e.parentElement;if(!T)return;const{width:E}=e.getBoundingClientRect(),{left:O}=T.getBoundingClientRect(),S=Number(u(t).left),x=E+S,v=S-E<0,_=x>document.body.clientWidth,A=!_&&"rtl"!==document.dir||v?0:E-d,C=u(T).top-T.offsetTop,w=_?x-document.body.clientWidth+5:0,k=u(t).left-O+T.offsetLeft-A,D=k+E>=document.body.clientWidth;e.style.top=Number(u(t).top+y-C)+"px",e.style.left=Number(k-(D?w:0))+"px"}function s(){const e=document.getElementsByClassName(n)[0];if(!e)return;const t=e.getAttribute("term-id")||"",r=document.getElementById(t);r&&o(e,r)}function a(e){return e?e.closest("table")||e.closest("code")||e.parentElement:null}function l(e){const i=document.getElementsByClassName(n)[0],s=e.getAttribute("id"),a=e.getAttribute("term-key"),l=document.getElementById(a+"_element");if(i&&s===i.getAttribute("term-id"))return void c(i);const u=e.closest([t.CONTENT.replace(" ",""),r].join("."));i&&!u&&c(i),e.matches(t.TITLE)&&l&&(function(e,t){const r=t.getAttribute("id")||Math.random().toString(36).substr(2,8);null==e||e.setAttribute("term-id",r)}(l,e),function(e,t){const r=t.getAttribute("aria-live")||"polite";null==e||e.setAttribute("aria-live",r),null==e||e.setAttribute("aria-modal","true")}(l,e),o(l,e),l.classList.toggle(r),function(e){const t=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),r=t[0],n=t[t.length-1];r&&r.focus(),e.addEventListener("keydown",function(e){("Tab"===e.key||9===e.keyCode)&&(e.shiftKey?document.activeElement===r&&(n.focus(),e.preventDefault()):document.activeElement===n&&(r.focus(),e.preventDefault()))})}(l))}function c(e){e.classList.remove(r);const t=a(d(e));t&&(t.removeEventListener("scroll",s),i=!0)}function u(e){const t=e.getBoundingClientRect(),r=document.body,n=document.documentElement,i=window.pageYOffset||n.scrollTop||r.scrollTop,o=window.pageXOffset||n.scrollLeft||r.scrollLeft,s=n.clientTop||r.clientTop||0,a=n.clientLeft||r.clientLeft||0,l=t.top+i-s,c=t.left+o-a;return{top:Math.round(l),left:Math.round(c)}}function d(e){const t=e.getAttribute("term-id");return t?document.getElementById(t):null}"undefined"!=typeof document&&(document.addEventListener("click",t=>{!e(t)&&(t=>{const r=e(t);return!r||!r.matches})(t)||l(e(t))}),document.addEventListener("keydown",e=>{var t;const r=document.getElementsByClassName(n)[0];"Enter"===e.key&&document.activeElement&&l(document.activeElement),"Escape"===e.key&&r&&(c(r),null==(t=d(r))||t.focus())}),window.addEventListener("resize",()=>{const e=document.getElementsByClassName(n)[0];if(!e)return;const t=e.getAttribute("term-id")||"",i=document.getElementById(t);i?o(e,i):e.classList.toggle(r)}))})();const b$k=cn$1("yfm");reactExports.forwardRef(function(e,t){const{html:r,className:n,qa:i}=e,o={...e.mods};return e.linksVisited&&(o["links-visited"]=!0),e.noListReset&&(o["no-list-reset"]=!0),jsxRuntimeExports.jsx("div",{ref:t,dangerouslySetInnerHTML:{__html:r},className:b$k(o,n),"data-qa":i})});const YfmConfigs=(e,t)=>{e.use(YfmConfigsSpecs,t);const{mix:r}=t,n={...t.mods};!1!==n["no-list-reset"]&&(n["no-list-reset"]=!0),e.addPlugin(()=>new Plugin({props:{attributes:{class:`${b$k(n,r)} yfm-editor`}}}))};var i2,o_Cut,o_Title,o_Highlight;i2="yfm_cut",o_Cut="yfm-cut",o_Title="yfm-cut-title",o_Highlight="yfm-cut-highlight",typeof window<"u"&&!window[i2]&&(window[i2]=new class{disposers=[];constructor(){this.disposers.push(this.init())}init(){let e=!1,t=()=>{e=!0},r=()=>{e=!1},n=t=>{var r;r=t.target,"summary"===r?.tagName?.toLowerCase()&&r?.classList.contains(o_Title)&&!e&&this.focusActiveCut(t.target)};return document.addEventListener("mousedown",t),document.addEventListener("mouseup",r),document.addEventListener("focus",n,!0),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("mouseup",r),document.removeEventListener("focus",n,!0)}}dispose(){for(let e of this.disposers)e()}focusActiveCut(e){let t=e.parentNode;var r;r=t,"details"===r?.tagName?.toLowerCase()&&r?.classList.contains(o_Cut)&&(setTimeout(()=>{t.classList.add(o_Highlight)},70),setTimeout(()=>{t.classList.remove(o_Highlight)},1e3))}});const YfmCutClassName={...YfmCutClassName$1,TitleInner:"g-md-yfm-cut-title-inner",Open:"yfm-cut-open",Active:"yfm-cut-active"},createYfmCutNode=e=>t=>{const r=`${YfmCutClassName.Cut} ${YfmCutClassName.Open}`;return cutType(e).create({class:r},[cutTitleType(e).create(null),cutContentType(e).create(null,t)])},createYfmCut=(e,t)=>{const{schema:r,selection:n}=e,i=findParentNodeClosestToPos(n.$from,e=>e.isTextblock&&!e.type.spec.complex);if(!i)return!1;if(t){const o=i.pos;let s=o+i.node.nodeSize;const a=n.$from.index(i.depth-1),l=n.$from.node(i.depth-1),c=n.$from.start(i.depth-1);let u=!1;l.forEach((e,t,r)=>{if(r<a||u)return;if(e.type.spec.complex&&"root"!==e.type.spec.complex)return void(u=!0);const i=c+t+e.nodeSize;s=i,n.to<s&&(u=!0)});const d=e.tr;d.replaceWith(o,s,createYfmCutNode(r)(d.doc.slice(o,s,!1).content)),d.setSelection(TextSelection.create(d.doc,o+2)),t(d.scrollIntoView())}return!0},toYfmCut={isEnable:e=>createYfmCut(e),run(e,t){createYfmCut(e,t)}},liftEmptyBlockFromCut=(e,t)=>{const{selection:r,schema:n}=e;if(!isTextSelection(r))return!1;const{$cursor:i}=r;return!(!i||i.parent.content.size||!(i.depth>2&&isSameNodeType(i.node(-1),cutContentType(n))&&isSameNodeType(i.node(-2),cutType(n))&&i.node(-1).childCount>1&&i.after()===i.end(-1))||(t&&t(e.tr.lift(i.blockRange(),i.depth-3).scrollIntoView()),0))},exitFromCutTitle=(e,t)=>{const{selection:r,schema:n}=e;if(!isTextSelection(r))return!1;const{$cursor:i}=r;if(!i)return!1;if(!isSameNodeType(i.parent,cutTitleType(n))||!isSameNodeType(i.node(-1),cutType(n)))return!1;const o=i.node(-1),s=findFirstTextblockChild(o.lastChild);if(!s)return!1;const a=i.start(-1)+o.firstChild.nodeSize+1+s.offset;return t?.(e.tr.setSelection(TextSelection.create(e.doc,a))),!0},removeCut=(e,t,r)=>{const{selection:n,schema:i}=e;if(!isTextSelection(n))return!1;const{$cursor:o}=n;if(!o)return!1;if(!isSameNodeType(o.parent,cutTitleType(i))||!isSameNodeType(o.node(-1),cutType(i)))return!1;if(r?.endOfTextblock("backward",e)){if(t){const r=o.parent,n=o.node(-1),s=n.lastChild,a=Fragment.from(pType(i).create(null,r.content)).append(s.content),l=o.before(-1),c=l+n.nodeSize,u=e.tr.replaceWith(l,c,a);t(u.setSelection(TextSelection.create(u.doc,l+1)))}return!0}return!1},backToCutTitle=(e,t,r)=>{const{selection:n,schema:i}=e;if(!isTextSelection(n))return!1;const{$cursor:o}=n;if(!o)return!1;if(!isSameNodeType(o.parent,pType(i))||!isSameNodeType(o.node(-1),cutContentType(i))||!isSameNodeType(o.node(-2),cutType(i)))return!1;const s=o.node(-2),a=o.node(-1);if(o.parent!==a.firstChild)return!1;if(r?.endOfTextblock("backward",e)){if(t){const r=s.firstChild;t(e.tr.setSelection(TextSelection.create(e.doc,o.before(-2)+r.nodeSize)))}return!0}return!1};class YfmCutTitleNodeView{dom;contentDOM;node;constructor(e){this.node=e,this.dom=document.createElement("div"),this.dom.classList.add(YfmCutClassName.Title),this.dom.addEventListener("click",this._onTitleClick),this.contentDOM=this.dom.appendChild(document.createElement("div")),this.contentDOM.classList.add(YfmCutClassName.TitleInner),this.contentDOM.addEventListener("click",this._onTitleInnerClick)}update(e){return this.node.type===e.type&&(this.node=e,!0)}destroy(){this.dom.removeEventListener("click",this._onTitleClick),this.contentDOM.removeEventListener("click",this._onTitleInnerClick)}_onTitleClick=e=>{const{currentTarget:t}=e;if(t instanceof HTMLElement){const e=t.parentElement;e?.classList.contains(YfmCutClassName.Cut)&&e.classList.toggle(YfmCutClassName.Open)}};_onTitleInnerClick=e=>{e.stopPropagation(),e.preventDefault()}}const cutActivePlugin=()=>new Plugin({props:{decorations(e){const t=[],r=e.selection,n=cutType(e.schema),i=({pos:e,node:r})=>{t.push(Decoration$1.node(e,e+r.nodeSize,{class:YfmCutClassName.Active}))};return isNodeSelection(r)?(r.node.type===n&&i({pos:r.from,node:r.node}),findParentNodesOfType(n,r.$from).forEach(i)):isTextSelection(r)?(findParentNodesOfType(n,r.$from).forEach(i),r.$from.sameParent(r.$to)||(findParentNodesOfType(n,r.$to).forEach(i),e.doc.nodesBetween(r.from,r.to,(e,t)=>(e.type===n&&i({pos:t,node:e}),!e.isTextblock)))):findParentNodesOfType(n,r.$from).forEach(i),t.length?DecorationSet.create(e.doc,t):DecorationSet.empty}}});function findParentNodesOfType(e,t){let{depth:r}=t;const n=[];for(;r>=0;){const i=t.node(r);i.type===e&&n.push({depth:r,node:i,pos:t.before(r)}),r--}return n}const key$2=new PluginKey("yfm-cut-auto-open"),cutAutoOpenPlugin=()=>new Plugin({key:key$2,view(e){update(e);const t=new CutAutoOpenOnDragOver(e);return{update:e=>update(e),destroy:()=>t.destroy()}}});function update(e){const t=e.state.selection,r=e.domAtPos.bind(e);isTextSelection(t)&&(t.$cursor?openParentYfmCuts(t.$cursor,r):(openParentYfmCuts(t.$head,r),openParentYfmCuts(t.$anchor,r)))}function openParentYfmCuts(e,t){let{depth:r}=e;const{schema:n}=e.parent.type;for(;r>0;){if(e.node(r).type===cutContentType(n)&&e.node(r-1).type===cutType(n)){const{node:n}=t(e.start(r-1),0);n.classList.add(YfmCutClassName.Open),r--}r--}}class CutAutoOpenOnDragOver{static YFM_CUT_SELECTOR=`.${YfmCutClassName.Cut}:not(.${YfmCutClassName.Open})`;static OPEN_TIMEOUT=500;static THROTTLE_WAIT=50;_cutElem=null;_editorView;_timeout=null;_docListener;constructor(e){this._editorView=e,this._docListener=throttle(this._onDocEvent.bind(this),CutAutoOpenOnDragOver.THROTTLE_WAIT),document.addEventListener("mousemove",this._docListener),document.addEventListener("dragover",this._docListener)}destroy(){this._clear(),this._docListener.cancel(),document.removeEventListener("mousemove",this._docListener),document.removeEventListener("dragover",this._docListener)}_onDocEvent(e){const t=this._editorView;if(!t.dragging)return;const r=t.posAtCoords({left:e.clientX,top:e.clientY});if(!r)return;const n=findDomRefAtPos(r.pos,t.domAtPos.bind(t)).closest(CutAutoOpenOnDragOver.YFM_CUT_SELECTOR);n!==this._cutElem&&(this._clear(),n&&this._setCutElem(n))}_clear(){null!==this._timeout&&clearTimeout(this._timeout),this._timeout=null,this._cutElem=null}_setCutElem(e){this._cutElem=e,this._timeout=setTimeout(this._openCut.bind(this),CutAutoOpenOnDragOver.OPEN_TIMEOUT)}_openCut(){this._editorView.dragging&&this._cutElem?.classList.add(YfmCutClassName.Open),this._clear()}}const cutAction="toYfmCut",YfmCut=(e,t)=>{if(e.use(YfmCutSpecs,{...t,cutView:()=>()=>({ignoreMutation:e=>e instanceof MutationRecord&&"attributes"===e.type}),cutTitleView:()=>e=>new YfmCutTitleNodeView(e)}),e.addPlugin(cutActivePlugin).addPlugin(cutAutoOpenPlugin).addAction(cutAction,()=>toYfmCut).addKeymap(()=>({Backspace:chainCommands(backToCutTitle,removeCut),Enter:chainCommands(exitFromCutTitle,liftEmptyBlockFromCut)})).addInputRules(({schema:e})=>({rules:[nodeInputRule(/(?:^)({% cut)\s$/,cutType(e).createAndFill(),1)]})),t?.yfmCutKey){const{yfmCutKey:r}=t;e.addKeymap(()=>({[r]:withLogAction("yfm_cut",createYfmCut)}))}},createFileNode=e=>({result:t,file:r})=>e.create({href:t.url,download:t.name??r.name,type:t.type??r.type}),b$j=cn("file-skeleton");class FileSkeletonDescriptor extends ReactWidgetDescriptor{#B;constructor(e){super(e,"yfm_file_skeleton"),this.#B=document.createElement("span"),this.#B.classList.add(b$j(),"yfm-file")}getDomElem(){return this.#B}renderReactElement(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"yfm-file__icon"}),jsxRuntimeExports.jsx(Skeleton,{className:b$j("skeleton")})]})}}class YfmFilesUploadProcessBase extends FilesBatchUploadProcess{createFile;constructor(e,t,r){super(e,t,r),this.createFile=createFileNode(fileType(this.view.state.schema))}createSkeleton(){return new FileSkeletonDescriptor(this.getSkeletonInitPos())}async createPMNode(e){return this.createFile(e)}}const{isFilesOnly:isFilesOnly,isFilesFromHtml:isFilesFromHtml,isImageFile:isImageFile}=clipboardUtils,YfmFilePaste=(e,t)=>{if(!t||!isFunction$1(t.fileUploadHandler))throw new Error("YfmFilePaste extension: fileUploadHandler is not a function");e.addPlugin(()=>new Plugin({props:{handleDOMEvents:{paste(e,r){const n=getLoggerFromState(e.state),i=getPastedFiles(r.clipboardData);return!!i&&(r.preventDefault(),n.event({event:"paste-files",plugin:"yfm-file-paste",domEvent:"paste"}),new YfmFilesPasteUploadProcess(e,i,{uploadHandler:t.fileUploadHandler,needToSetDimensionsForUploadedImages:t.needToSetDimensionsForUploadedImages}).run(),!0)},drop(e,r){if(e.dragging)return!1;const n=getPastedFiles(r.dataTransfer);if(!n)return!1;const i=e.posAtCoords({left:r.clientX,top:r.clientY})?.pos??-1;if(-1===i)return!1;const o=dropPoint(e.state.doc,i,createFakeFileSlice(e.state.schema));return getLoggerFromState(e.state).event({event:"drop-files",plugin:"yfm-file-paste",domEvent:"drop",runProcess:null!==o}),null!==o&&new YfmFilesPasteUploadProcess(e,n,{pos:o,uploadHandler:t.fileUploadHandler,needToSetDimensionsForUploadedImages:t.needToSetDimensionsForUploadedImages}).run(),r.preventDefault(),!0}}}}),e.Priority.Low)};function getPastedFiles(e){return e&&(isFilesOnly(e)||isFilesFromHtml(e))?Array.from(e.files):null}function createFakeFileSlice(e){return new Slice(Fragment.from(fileType(e).create({href:"fake",download:"file"})),0,0)}class YfmFilesPasteUploadProcess extends YfmFilesUploadProcessBase{pos;createImage;constructor(e,t,r){super(e,t,r.uploadHandler),this.pos=r.pos;const{schema:n}=this.view.state;imageType(n)&&(this.createImage=createImageNode(imageType(n),{needDimensions:r.needToSetDimensionsForUploadedImages},this.logger))}getSkeletonInitPos(){return this.pos??this.view.state.tr.selection.from}async createPMNode(e){return isImageFile(e.file)&&this.createImage?this.createImage(e):this.createFile(e)}}const b$i=cn("file-form");var TabId,TabId2;TabId2=TabId||(TabId={}),TabId2.Attach="attach",TabId2.Link="link";const FileForm=({className:e,autoFocus:t,onCancel:r,onSubmit:n,onAttach:i,loading:o,uploadHint:s})=>{const[a,l]=reactExports.useState(()=>isFunction$1(i)?TabId.Attach:TabId.Link),[c,u]=reactExports.useState(""),[d,p]=reactExports.useState(""),h=isFunction$1(i);reactExports.useLayoutEffect(()=>{h||a!==TabId.Attach||l(TabId.Link)},[h,a]);const f=()=>{n({src:c.trim(),name:d.trim()})},m=enterKeyHandler(f);return jsxRuntimeExports.jsxs(Form.Form,{className:b$i(null,[e]),children:[h&&jsxRuntimeExports.jsx(Tabs,{activeTab:a,onSelectTab:l,items:[{id:TabId.Attach,title:i18n$c("common_tab_attach")},{id:TabId.Link,title:i18n$c("common_tab_link")}]}),a===TabId.Attach&&i&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Form.Layout,{children:s??i18n$c("file_upload_help")}),jsxRuntimeExports.jsx(Form.Footer,{onCancel:r,children:jsxRuntimeExports.jsx(ButtonAttach,{multiple:!0,buttonProps:{size:"s",view:"action",loading:o},onUpdate:i,children:i18n$c("common_action_upload")})})]}),a===TabId.Link&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Form.Layout,{children:[jsxRuntimeExports.jsx(Form.Row,{label:i18n$c("common_link"),help:i18n$c("file_link_help"),control:jsxRuntimeExports.jsx(TextInputFixed,{size:"s",view:"normal",value:c,onUpdate:u,placeholder:"https://",autoFocus:t,className:b$i("input",{type:"link"}),onKeyPress:m})}),jsxRuntimeExports.jsx(Form.Row,{label:i18n$c("file_name"),control:jsxRuntimeExports.jsx(TextInput,{size:"s",view:"normal",value:d,onUpdate:p,className:b$i("input",{type:"name"}),onKeyPress:m})})]}),jsxRuntimeExports.jsx(Form.Footer,{onCancel:r,onSubmit:f})]})]})},b$h=cn("file-placeholder"),placement$4=["bottom-start","top-start","bottom-end","top-end"],FilePlaceholder=({onCancel:e,onSubmit:t,onAttach:r})=>{const n=useMountedState(),[i,o,s]=useBooleanState(!1),[a,l]=useElementState(),c=reactExports.useCallback(e=>{r&&n()&&(o(),r(e).finally(()=>{n()&&s()}))},[n,r,o,s]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{ref:l,className:b$h(),children:jsxRuntimeExports.jsxs("a",{href:"#",className:"yfm-file",children:[jsxRuntimeExports.jsx("span",{className:"yfm-file__icon"}),i18n$b("file")]})}),jsxRuntimeExports.jsx(Popup,{open:!0,modal:!0,onOpenChange:e,anchorElement:a,placement:placement$4,children:jsxRuntimeExports.jsx(FileForm,{autoFocus:!0,loading:i,onCancel:e,onSubmit:t,onAttach:r&&c})})]})},addWidget=(e,t,r)=>new FileWidgetDescriptor(e.selection.from,t,r).applyTo(e),removeWidget=removeDecoration;class FileWidgetDescriptor extends ReactWidgetDescriptor{domElem;deps;uploadFiles;widgetHandler=null;constructor(e,t,r){super(e,"file_placeholder"),this.uploadFiles=r,this.domElem=document.createElement("span"),this.deps=t}getWidgetHandler(e,t){return this.widgetHandler||(this.widgetHandler=new FileWidgetHandler({view:e,getPos:t,decoId:this.id,uploadFiles:this.uploadFiles},this.deps)),this.widgetHandler}getDomElem(){return this.domElem}renderReactElement(e,t){return this.getWidgetHandler(e,t).renderWidgetView(e,t)}remove(){super.remove(),this.widgetHandler=null}}class FileWidgetHandler{view;getPos;decoId;uploadFiles;normalizeUrl;constructor({decoId:e,view:t,getPos:r,uploadFiles:n},i){this.decoId=e,this.view=t,this.getPos=r,this.uploadFiles=n,this.normalizeUrl=normalizeUrlFactory(i)}renderWidgetView(e,t){return this.view=e,this.getPos=t,jsxRuntimeExports.jsx(FilePlaceholder,{onCancel:this.onCancel,onSubmit:this.onSubmit,onAttach:this.uploadFiles&&this.onAttach})}onCancel=()=>{this.view.dispatch(removeDecoration(this.view.state.tr,this.decoId)),this.view.focus()};onSubmit=e=>{if(!e.src||!e.name)return;const t=this.normalizeUrl(e.src)?.url,r=e.name;if(!t)return;const n=fileType(this.view.state.schema).create({href:t,download:r});this.insertNodes([n])};onAttach=async e=>{if(!this.uploadFiles)return;const{view:t}=this;new YfmFileWidgetUploadProcess(t,e,this.uploadFiles,this.getPos()).run(),t.dispatch(removeWidget(t.state.tr,this.decoId)),t.focus()};insertNodes(e){let t=this.view.state.tr;t=t.insert(t.mapping.map(this.getPos()),e),t=removeWidget(t,this.decoId),this.view.dispatch(t),this.view.focus()}}class YfmFileWidgetUploadProcess extends YfmFilesUploadProcessBase{skeletonInitPos;constructor(e,t,r,n){super(e,t,r),this.skeletonInitPos=n}getSkeletonInitPos(){return this.skeletonInitPos}}const addFileWidget=(e,t)=>({isEnable:e=>e.selection.empty,run(r,n){n(addWidget(r.tr,e,t))}}),addFileAction="addFile",YfmFileWidget=(e,t)=>{e.addAction(addFileAction,e=>addFileWidget(e,t.fileUploadHandler))},YfmFile=(e,t={})=>{e.use(YfmFileSpecs,t),e.use(YfmFileWidget,t),t.fileUploadHandler&&e.use(YfmFilePaste,{fileUploadHandler:t.fileUploadHandler,needToSetDimensionsForUploadedImages:Boolean(t.needToSetDimensionsForUploadedImages)})},toHeading$1=e=>(t,r,n)=>{const i={},o=findParentNodeOfType(headingType(t.schema))(t.selection);if(o){if(o.node.attrs[headingLevelAttr]===e)return toParagraph(t,r);Object.assign(i,o.node.attrs)}return i[YfmHeadingAttr.Level]=e,setBlockType(headingType(t.schema),i)(t,r)},headingAction=e=>{const t=toHeading$1(e);return{isActive:hasParentHeading(e),isEnable:t,run:t}},YfmHeading=(e,t)=>{e.use(YfmHeadingSpecs,t),e.addKeymap(()=>{const{h1Key:e,h2Key:r,h3Key:n,h4Key:i,h5Key:o,h6Key:s}=t??{},a={Backspace:resetHeading};return e&&(a[e]=withLogAction("heading1",toHeading$1(1))),r&&(a[r]=withLogAction("heading2",toHeading$1(2))),n&&(a[n]=withLogAction("heading3",toHeading$1(3))),i&&(a[i]=withLogAction("heading4",toHeading$1(4))),o&&(a[o]=withLogAction("heading5",toHeading$1(5))),s&&(a[s]=withLogAction("heading6",toHeading$1(6))),a}).addInputRules(({schema:e})=>({rules:[headingRule(headingType(e),6)]})),e.addAction(HeadingAction.ToH1,()=>headingAction(1)).addAction(HeadingAction.ToH2,()=>headingAction(2)).addAction(HeadingAction.ToH3,()=>headingAction(3)).addAction(HeadingAction.ToH4,()=>headingAction(4)).addAction(HeadingAction.ToH5,()=>headingAction(5)).addAction(HeadingAction.ToH6,()=>headingAction(6))},createYfmNoteNode=e=>(t,r)=>noteType(e).create({[NoteAttrs.Class]:`yfm-note yfm-accent-${t}`,[NoteAttrs.Type]:t},[noteTitleType(e).createAndFill(),noteContentType(e).createAndFill({},r)]),createYfmNote=(e,t)=>{const r=findParentNodeOfType(e.schema.nodes.paragraph)(e.selection);if(r){const n=createYfmNoteNode(e.schema)("info",r.node);return t?.(e.tr.replaceWith(r.pos,r.pos+r.node.nodeSize,n)),!0}return!1},toYfmNote={isEnable:e=>createYfmNote(e),run(e,t){createYfmNote(e,t)}},exitFromNoteTitle=(e,t)=>{const{selection:r,schema:n}=e;if(!isTextSelection(r))return!1;const{$cursor:i}=r;if(!i)return!1;if(!isSameNodeType(i.parent,noteTitleType(n))||!isSameNodeType(i.node(-1),noteType(n)))return!1;const o=i.node(-1),s=findFirstTextblockChild(getNoteContent(o));if(!s)return!1;const a=i.start(-1)+o.firstChild.nodeSize+s.offset;return t?.(e.tr.setSelection(TextSelection.create(e.doc,a))),!0},liftEmptyBlockFromNote=(e,t)=>{const{selection:r,schema:n}=e;if(!isTextSelection(r))return!1;const{$cursor:i}=r;return!(!i||i.parent.content.size||!(i.depth>2&&isSameNodeType(i.node(-1),noteContentType(n))&&isSameNodeType(i.node(-2),noteType(n))&&i.node(-1).childCount>1&&i.after()===i.end(-1))||(t&&t(e.tr.lift(i.blockRange(),i.depth-3).scrollIntoView()),0))};function getNoteContent(e){const t=[];return e.forEach(e=>t.push(e)),Fragment.from(t.slice(1))}const removeNote=(e,t,r)=>{const{selection:n,schema:i}=e;if(!isTextSelection(n))return!1;const{$cursor:o}=n;if(!o)return!1;if(!isSameNodeType(o.parent,noteTitleType(i))||!isSameNodeType(o.node(-1),noteType(i)))return!1;if(r?.endOfTextblock("backward",e)){if(t){const r=o.parent,n=o.node(-1),s=n.lastChild,a=Fragment.from(pType(i).create(null,r.content)).append(s.content),l=o.before(-1),c=l+n.nodeSize,u=e.tr.replaceWith(l,c,a);t(u.setSelection(TextSelection.create(u.doc,l+1)))}return!0}return!1},backToNoteTitle=(e,t,r)=>{const{selection:n,schema:i}=e;if(!isTextSelection(n))return!1;const{$cursor:o}=n;if(!o)return!1;if(!isSameNodeType(o.parent,pType(i))||!isSameNodeType(o.node(-1),noteContentType(i))||!isSameNodeType(o.node(-2),noteType(i)))return!1;const s=o.node(-2),a=o.node(-1);if(o.parent!==a.firstChild)return!1;if(r?.endOfTextblock("backward",e)){if(t){const r=s.firstChild;t(e.tr.setSelection(TextSelection.create(e.doc,o.before(-2)+r.nodeSize)))}return!0}return!1},info$1="Note",tip$1="Tip",warning$1="Warning",alert$1="Alert",remove$2="Remove",en$c={info:info$1,tip:tip$1,warning:warning$1,alert:alert$1,remove:remove$2},info="",tip="",warning="",alert="",remove$1="",ru$c={info:info,tip:tip,warning:warning,alert:alert,remove:remove$1},KEYSET$8="yfm-note",i18n$7=registerKeyset(KEYSET$8,{en:en$c,ru:ru$c});var YfmNoteType,YfmNoteType2;YfmNoteType2=YfmNoteType||(YfmNoteType={}),YfmNoteType2.tip="tip",YfmNoteType2.info="info",YfmNoteType2.warning="warning",YfmNoteType2.alert="alert";const isEnable=()=>!0,isActive=()=>!1,changeType=e=>({node:t,pos:r,dispatch:n,tr:i})=>{n(i.setNodeMarkup(r,null,{...t.attrs,class:`yfm-note yfm-accent-${e}`,"note-type":e}))},yfmNoteTooltipPlugin=({actions:e,schema:t})=>new Plugin({view:r=>new BaseTooltipPluginView(r,{idPrefix:"yfm-note-tooltip",nodeType:noteType(r.state.schema),popupPlacement:["bottom","top"],content:(r,{node:n,pos:i})=>jsxRuntimeExports.jsx(Toolbar,{editor:e,focus:()=>r.focus(),className:"yfm g-md-yfm-note-toolbar",qa:"g-md-toolbar-yfm-note",data:[[YfmNoteType.info,YfmNoteType.tip,YfmNoteType.warning,YfmNoteType.alert].map(e=>({id:`note-type-${e}`,icon:{data:CircleInfo},title:i18n$7(e),type:ToolbarDataType.SingleButton,isActive:isActive,isEnable:isEnable,exec:()=>changeType(e)({schema:t,pos:i,node:n,tr:r.state.tr,dispatch:r.dispatch.bind(r)})})),[{id:"note-remove",icon:{data:TrashBin},title:i18n$7("remove"),type:ToolbarDataType.SingleButton,isActive:isActive,isEnable:isEnable,exec:()=>removeNode({pos:i,node:n,tr:r.state.tr,dispatch:r.dispatch.bind(r)})}]]})})}),noteAction="toYfmNote",YfmNote=(e,t)=>{if(e.use(YfmNoteSpecs,t),e.addKeymap(()=>({Enter:chainCommands(exitFromNoteTitle,liftEmptyBlockFromNote),Backspace:chainCommands(backToNoteTitle,removeNote)})).addAction(noteAction,()=>toYfmNote).addInputRules(({schema:e})=>({rules:[nodeInputRule(/(?:^)({% note)\s$/,noteType(e).createAndFill(),1)]})),t?.yfmNoteKey){const{yfmNoteKey:r}=t;e.addKeymap(()=>({[r]:withLogAction("yfm_note",createYfmNote)}))}e.addPlugin(yfmNoteTooltipPlugin)},createYfmTableCommand=(e,t)=>{if(t){const{schema:r}=e,n=yfmTableType(r),i=yfmTableRowType(r),o=yfmTableBodyType(r),s=yfmTableCellType(r),a=n.create(null,o.create(null,[i.create(null,[s.create(null,pType(r).create()),s.create(null,pType(r).create())]),i.create(null,[s.create(null,pType(r).create()),s.create(null,pType(r).create())])]));t(e.tr.replaceSelectionWith(a).scrollIntoView())}return!0},createYfmTable={isEnable:createYfmTableCommand,run:createYfmTableCommand},removeCellNodeContent=(e,t)=>{const r=e.selection;if(!isNodeSelection(r))return!1;const n=r.node;if(isTableRowNode(n))return t?.(e.tr.deleteSelection()),!0;if(isTableCellNode(n)){if(t){const n=r.from+1,i=r.to-1;let o=e.tr.delete(n,i);o=o.setSelection(TextSelection.create(o.doc,n)),t(o)}return!0}return!1},clearSelectedCells=(e,t)=>{const r=e.selection;if(!isTextSelection(r))return!1;const{$from:n,$to:i}=r,o=n.sharedDepth(i.pos),s=n.node(o),{schema:a}=s.type;if(!isAnyOfTypes(s,[yfmTableType(a),yfmTableBodyType(a),yfmTableRowType(a)]))return!1;const l=findTablePos(n,o);if("number"!=typeof l)return!1;const c=n.doc.nodeAt(l);if(!c)return!1;const u=TableDesc.create(c)?.bind(l);if(!u)return!1;if(t){const r=e.tr,o=range$1(0,u.rows).flatMap(e=>u.getPosForRowCells(e)).filter(e=>"real"===e.type);if(n.pos<=o[0].from+2&&i.pos>=o[o.length-1].to-2)r.replaceWith(l,l+c.nodeSize,pType(a).create()),r.setSelection(TextSelection.create(r.doc,l+1));else for(const e of o){if(n.pos>e.to)continue;if(i.pos<e.from)break;const t=Math.max(n.pos,e.from+1),o=Math.min(i.pos,e.to-1);r.delete(r.mapping.map(t),r.mapping.map(o)),r.setSelection(TextSelection.near(r.doc.resolve(r.mapping.map(o)),-1))}t(r.scrollIntoView())}return!0},backspaceCommand=chainCommands(removeCellNodeContent,clearSelectedCells);function isAnyOfTypes(e,t){return t.some(t=>t===e.type)}function findTablePos(e,t){let r=t;for(;r>=0&&t-r<=5;){const t=e.node(r);if(isTableNode(t))return e.before(r);r--}return null}function isGapCursorSelection(e){return e instanceof GapCursorSelection}class GapCursorSelection extends Selection$1{#G;meta;selectionName="GapCursorSelection";get $pos(){return this.#G}get pos(){return this.#G.pos}constructor(e,t){super(e,e),this.#G=e,this.meta=t?.meta}eq(e){return isGapCursorSelection(e)&&this.pos===e.pos&&this.$pos.doc.eq(e.$pos.doc)}map(e,t){const r=e.resolve(t.map(this.head));return Selection$1.near(r)}}const isUp=e=>"left"===e||"up"===e;function isTextblock(e){return e.isTextblock&&!isCodeBlock(e)}function isEdgeTextblock(e,t){const r=e.index(e.depth-1);return"before"===t?0===r:"after"===t&&r===e.node(e.depth-1).childCount-1}const findNextFakeParaPosForGapCursorSelection=({$pos:e},t)=>e.pos!==e.start()&&e.pos!==e.end()?null:findFakeParaPosClosestToPos(e,e.depth,t),findFakeParaPosForNodeSelection=(e,t)=>{const r=e.node;if(r.isInline||isTextblock(r))return null;const{$from:n}=e,i=n.index(),o=n.parent;if("before"===t){if(o.firstChild===r||!isTextblock(o.child(i-1)))return n}else if("after"===t&&(o.lastChild===r||!isTextblock(o.child(i+1))))return e.$to;return null},findFakeParaPosForCodeBlock=(e,t)=>{if(!isCodeBlock(e.parent))return null;let r=-1;const n=e.index(e.depth-1),i=e.node(e.depth-1);return"before"===t?0!==n&&isTextblock(i.child(n-1))||(r=e.before()):"after"===t&&(n!==i.childCount-1&&isTextblock(i.child(n+1))||(r=e.after())),-1!==r?e.doc.resolve(r):null},findFakeParaPosForTextSelection=(e,t)=>{const r="before"===t?e.$from:e.$to;if(r.parent.isInline)return null;return findFakeParaPosForCodeBlock(r,t)||(isEdgeTextblock(r,t)?findFakeParaPosClosestToPos(r,r.depth-1,t):null)};function findFakeParaPosClosestToPos(e,t,r){for(t++;--t>0;){const n=e.node(t),i=e.index(t-1),o=e.node(t-1),s=0===i,a=i===o.childCount-1,l="inner"===n.type.spec.complex||"leaf"===n.type.spec.complex,c=!1===o.type.spec.gapcursor;if(l||c){if("before"===r&&s)continue;if("after"===r&&a)continue;return null}if("before"===r){if(s||!isTextblock(o.child(i-1)))return e.doc.resolve(e.before(t))}else if("after"===r&&(a||!isTextblock(o.child(i+1))))return e.doc.resolve(e.after(t));return null}return null}const arrow=e=>(t,r,n)=>{const{selection:i}=t,o=isUp(e)?"before":"after";let s=null;if(isGapCursorSelection(i)){if(i.meta?.direction!==o)return!1;if("up"===e&&0===i.pos)return!0;if("down"===e&&i.pos===t.doc.nodeSize-2)return!0;s=findNextFakeParaPosForGapCursorSelection(i,o)}return isNodeSelection(i)&&(s=findFakeParaPosForNodeSelection(i,o)),isTextSelection(i)&&n?.endOfTextblock(e)&&(s=findFakeParaPosForTextSelection(i,o)),!!s&&(r?.(createFakeParagraph(t.tr,s,o).scrollIntoView()),!0)};function createFakeParagraph(e,t,r){return e.setSelection(new GapCursorSelection(t,{meta:{direction:r}}))}const arrowLeft=arrow("left"),arrowDown=arrow("down"),arrowUp=arrow("up"),arrowRight=arrow("right"),backspace=(e,t)=>{const r=e.selection;if(isGapCursorSelection(r)){const n=Selection$1.findFrom(r.$pos,-1);if(n)return t?.(e.tr.setSelection(n).scrollIntoView()),!0}return!1},selection=()=>new Plugin({props:{handleKeyDown:keydownHandler({ArrowLeft:arrowLeft,ArrowRight:arrowRight,ArrowUp:arrowUp,ArrowDown:arrowDown,Backspace:backspace}),decorations:e=>getDecorations(e.tr),handleClickOn:(e,t,r,n,i,o)=>!(!o||!r.type.spec.allowSelection)&&selectNode(n)(e.state,e.dispatch)},view:e=>(reselect(e),{update(e){reselect(e)}})}),reselect=e=>{const{selection:t}=e.state;return!(t.empty||!isNodeSelection(t)||isSelectableNode(t.node))&&selectParentNode(e.state,e.dispatch)},selectNode=e=>(t,r)=>(r&&r(t.tr.setSelection(new NodeSelection(t.doc.resolve(e)))),!0),getDecorations=e=>{if(e.selection instanceof NodeSelection)return DecorationSet.create(e.doc,[Decoration$1.node(e.selection.from,e.selection.to,{class:"pm-node-selected"})]);if(e.selection instanceof TextSelection||e.selection instanceof AllSelection){const t=getTopLevelNodesFromSelection(e.selection,e.doc).map(({node:e,pos:t})=>Decoration$1.node(t,t+e.nodeSize,{class:"pm-node-selected"}));return DecorationSet.create(e.doc,t)}return DecorationSet.empty},getTopLevelNodesFromSelection=(e,t)=>{const r=[];if(e.from!==e.to){const{from:n,to:i}=e;t.nodesBetween(n,i,(e,t)=>{const o=n<=t&&t+e.nodeSize<=i;return!(e&&!e.isText&&!1!==e.type.spec.selectable&&o&&(r.push({node:e,pos:t}),1))})}return r},Selection=e=>{e.addPlugin(selection)};function goToNextRow(e){return(t,r,n)=>{const i=findParentTable$1(t.selection),o=findParentTableRow(t.selection),s=findParentTableCell(t.selection);if(!n||!atEndOfCell(n,"up"===e?-1:1))return!1;if(!i||!o||!s)return!1;const a=findChildTableRows(i.node),l=a.findIndex(e=>e.node===o.node);let c;for(let e=0;e<o.node.childCount;e++)o.node.child(e)===s.node&&(c=e);if(void 0===c)return!1;const u=l+("up"===e?-1:1);if(u<0||u>=a.length){const i=t.selection;if(isTextSelection(i)&&n.endOfTextblock(e)){const[n,o]="up"===e?["before",i.$from]:["after",i.$to],s=findFakeParaPosForTextSelection(i,n)??findFakeParaPosClosestToPos(o,o.depth-2,n);if(s)return r?.(createFakeParagraph(t.tr,s,n).scrollIntoView()),!0}return!1}const d=a[u],p=findChildTableCells(d.node)[c],h=i.start+d.pos+p.pos+3;return r?.(t.tr.setSelection(new TextSelection(t.doc.resolve(h))).scrollIntoView()),!0}}const YfmTableDecorationTypeKey="__yfm-table-deco-type",YfmTableDecorationUniqKey="__yfm-table-deco-uniq-key";var YfmTableDecorationType,YfmTableDecorationType2;YfmTableDecorationType2=YfmTableDecorationType||(YfmTableDecorationType={}),YfmTableDecorationType2.FocusTable="table--focus",YfmTableDecorationType2.ShowRowControl="cell--show-row-control",YfmTableDecorationType2.ShowColumnControl="cell--show-column-control",YfmTableDecorationType2.OpenRowMenu="cell--open-row-menu",YfmTableDecorationType2.OpenColumnMenu="cell--open-column-menu",YfmTableDecorationType2.ActivateRowCells="cell--active-row",YfmTableDecorationType2.ActivateColumnCells="cell--active-column",YfmTableDecorationType2.ActivateDangerRowCells="cell--danger-row",YfmTableDecorationType2.ActivateDangerColumnCells="cell--danger-column";const b$g=cn("yfm-table-selected-cell"),key$1=new PluginKey("yfm-table-dnd-decos");function activateRows(e,t){const r={action:"row-control-active",...t};return e.setMeta(key$1,r),e}function deactivateRow(e,t){const r={action:"row-control-non-active",uniqKey:t};return e.setMeta(key$1,r),e}function activateColumns(e,t){const r={action:"column-control-active",...t};return e.setMeta(key$1,r),e}function deactivateColumn(e,t){const r={action:"column-control-non-active",uniqKey:t};return e.setMeta(key$1,r),e}function selectDraggedRow(e,t){const r={action:"drag-rows",cells:t};return e.setMeta(key$1,r),e}function selectDraggedColumn(e,t){const r={action:"drag-columns",cells:t};return e.setMeta(key$1,r),e}function clearAllSelections(e){return e.setMeta(key$1,{action:"hide"}),e}const yfmTableDndPlugin=()=>new Plugin({key:key$1,state:{init:()=>DecorationSet.empty,apply(e,t){const r=e.getMeta(key$1);if("hide"===r?.action)return DecorationSet.empty;if("row-control-active"===r?.action){const{controlCell:t,cells:n,uniqKey:i}=r;return DecorationSet.create(e.doc,[Decoration$1.node(t.from,t.to,{},{[YfmTableDecorationUniqKey]:i,[YfmTableDecorationTypeKey]:YfmTableDecorationType.OpenRowMenu}),...n.map(e=>Decoration$1.node(e.from,e.to,{class:b$g(e.mods)},{[YfmTableDecorationUniqKey]:i,[YfmTableDecorationTypeKey]:YfmTableDecorationType.ActivateRowCells}))])}if("row-control-non-active"===r?.action){const{uniqKey:n}=r,i=t.find(void 0,void 0,e=>e[YfmTableDecorationUniqKey]===n);return t.remove(i).map(e.mapping,e.doc)}if("column-control-active"===r?.action){const{controlCell:t,cells:n,uniqKey:i}=r;return DecorationSet.create(e.doc,[Decoration$1.node(t.from,t.to,{},{[YfmTableDecorationUniqKey]:i,[YfmTableDecorationTypeKey]:YfmTableDecorationType.OpenColumnMenu}),...n.map(e=>Decoration$1.node(e.from,e.to,{class:b$g(e.mods)},{[YfmTableDecorationUniqKey]:i,[YfmTableDecorationTypeKey]:YfmTableDecorationType.ActivateColumnCells}))])}if("column-control-non-active"===r?.action){const{uniqKey:n}=r,i=t.find(void 0,void 0,e=>e[YfmTableDecorationUniqKey]===n);return t.remove(i).map(e.mapping,e.doc)}return"drag-rows"===r?.action||"drag-columns"===r?.action?DecorationSet.create(e.doc,r.cells.map(e=>Decoration$1.node(e.from,e.to,{class:b$g(e.mods,"dragged-cell")}))):t.map(e.mapping,e.doc)}},props:{decorations(e){return this.getState(e)}}}),removeYfmTable=(e,t,r,n)=>{if(!n)return!1;const{tablePos:i,tableNode:o}=n;return t&&removeNode({node:o,pos:i,tr:e.tr,dispatch:t}),!0},clearCells=e=>(t,r)=>{const n=t.doc.nodeAt(e.tablePos),i=n&&TableDesc.create(n)?.bind(e.tablePos);if(!i)return!1;if(!r)return!0;const{tr:o}=t,s=pType(t.schema),a=e=>{for(const t of e)"real"===t.type&&o.replaceWith(o.mapping.map(t.from+1),o.mapping.map(t.to-1),s.create())};if(e.rows)for(const l of e.rows)a(i.getPosForRowCells(l));if(e.cols)for(const l of e.cols)a(i.getPosForColumn(l));return o.docChanged&&r(o),!0},insertEmptyColumn=e=>(t,r)=>{const n=t.doc.nodeAt(e.tablePos),i=n&&TableDesc.create(n)?.bind(e.tablePos);if(!i)return!1;const o=Math.min(Math.max(e.colIndex,0),i.cols);if(r){const e=[],n=[];if(0===o)e.push(...i.getPosForColumn(0).map(e=>getCellPos$2(e,"start")));else if(o===i.cols)e.push(...i.getPosForColumn(i.cols-1).map(e=>getCellPos$2(e,"end")));else for(let t=0;t<i.rows;t++){const r=i.base.rowsDesc[t].cells[o];"virtual"===r.type&&r.colspan&&r.colspan[1]!==o?n.push(r.colspan):e.push(getCellPos$2(i.getPosForCell(t,o),"start"))}const{tr:s}=t,a=yfmTableCellType(t.schema);for(const[t,r]of uniqWith(n,isEqual$4)){const e=i.base.rowsDesc[t].cells[r],n=i.getPosForCell(t,r);s.setNodeAttribute(n.from,"colspan",e.colspan+1)}for(const t of e)s.insert(s.mapping.map(t),a.createAndFill());s.setSelection(TextSelection.near(s.doc.resolve(e[0]),1)),r(s.scrollIntoView())}return!0};function getCellPos$2(e,t){return"virtual"===e.type?e.closestPos:"start"===t?e.from:e.to}const insertEmptyRow$1=e=>(t,r)=>{const n=t.doc.nodeAt(e.tablePos),i=n&&TableDesc.create(n)?.bind(e.tablePos);if(!i)return!1;const o=Math.min(Math.max(e.rowIndex,0),i.rows);if(r){let e,n=i.cols;const s=[];if(0===o||o===i.rows)e=0===o?i.getPosForRow(0).from:i.getPosForRow(i.rows-1).to;else{e=i.getPosForRow(o).from;for(let e=0;e<i.cols;e++){const t=i.base.rowsDesc[o].cells[e];"virtual"===t.type&&t.rowspan&&(n--,s.push(t.rowspan))}}const{tr:a}=t;for(const[t,r]of uniqWith(s,isEqual$4)){const e=i.base.rowsDesc[t].cells[r],n=i.getPosForCell(t,r);a.setNodeAttribute(n.from,"rowspan",e.rowspan+1)}a.insert(e,createSimpleRow(t.schema,n)),a.setSelection(TextSelection.near(a.doc.resolve(e),1)),r(a.scrollIntoView())}return!0},createSimpleRow=(e,t)=>{const r=yfmTableRowType(e),n=yfmTableCellType(e);return r.create(null,range$1(0,t).map(()=>n.createAndFill()))},removeColumnRange=e=>(t,r)=>{const n=t.doc.nodeAt(e.tablePos),i=n&&TableDesc.create(n)?.bind(e.tablePos);if(!i||i.cols<2)return!1;const o=i.base.getColumnRanges()[e.rangeIdx];if(!o)return!1;if(r){const{tr:e}=t,n={};for(let r=0;r<i.rows;r++){for(let e=o.startIdx;e<=o.endIdx;e++){const t=i.base.rowsDesc[r].cells[e];"virtual"===t.type&&t.colspan?.[0]===r&&t.colspan[1]<o.startIdx&&(n[`${t.colspan[0]},${t.colspan[1]}`]??=0,n[`${t.colspan[0]},${t.colspan[1]}`]--)}const s=getCellPos$1(i.getPosForCell(r,o.startIdx),"start"),a=getCellPos$1(i.getPosForCell(r,o.endIdx),"end");if(e.replaceWith(e.mapping.map(s),e.mapping.map(a),Fragment.empty),o.endIdx+1<i.cols){const n=i.base.rowsDesc[r].cells[o.endIdx+1];if("virtual"===n.type&&n.colspan?.[0]===r&&n.colspan[1]>=o.startIdx){const s=i.getPosForCell(r,o.endIdx+1).closestPos,a=i.base.rowsDesc[n.colspan[0]].cells[n.colspan[1]],l=a.colspan-(o.endIdx+1-n.colspan[1]);e.insert(e.mapping.map(s),yfmTableCellType(t.schema).createAndFill({colspan:l>1?l:null,rowspan:a.rowspan?a.rowspan:null}))}}}updateColspan(e,i,n),r(e)}return!0};function getCellPos$1(e,t){return"virtual"===e.type?e.closestPos:"start"===t?e.from:e.to}function updateColspan(e,t,r){for(const n of keys$1(r)){const[i,o]=n.split(","),s=Number.parseInt(i,10),a=Number.parseInt(o,10),l=t.base.rowsDesc[s].cells[a];if("real"===l.type&&l.colspan){const i=t.getPosForCell(s,a),o=l.colspan+r[n];e.setNodeAttribute(e.mapping.map(i.from),"colspan",o>1?o:null)}}}function keys$1(e){return Object.keys(e)}const removeRowRange=e=>(t,r)=>{const n=t.doc.nodeAt(e.tablePos),i=n&&TableDesc.create(n)?.bind(e.tablePos);if(!i||i.rows<2)return!1;const o=i.base.getRowRanges()[e.rangeIdx];if(!o)return!1;if(r){const{tr:e}=t;{const t=i.getPosForRow(o.startIdx).from,r=i.getPosForRow(o.endIdx).to;e.replaceWith(t,r,Fragment.empty)}const n={};for(let r=0;r<i.cols;r++){for(let e=o.startIdx;e<=o.endIdx;e++){const t=i.base.rowsDesc[e].cells[r];"virtual"===t.type&&t.rowspan?.[1]===r&&t.rowspan[0]<o.startIdx&&(n[`${t.rowspan[0]},${t.rowspan[1]}`]??=0,n[`${t.rowspan[0]},${t.rowspan[1]}`]--)}if(o.endIdx+1<i.rows){const n=i.base.rowsDesc[o.endIdx+1].cells[r];if("virtual"===n.type&&n.rowspan?.[1]===r&&n.rowspan[0]>=o.startIdx){const s=i.getPosForCell(o.endIdx+1,r).closestPos,a=i.base.rowsDesc[n.rowspan[0]].cells[n.rowspan[1]],l=a.rowspan-(o.endIdx+1-n.rowspan[0]);e.insert(e.mapping.map(s),yfmTableCellType(t.schema).createAndFill({rowspan:l>1?l:null,colspan:a.colspan?a.colspan:null}))}}}updateRowspan(e,i,n),r(e)}return!0};function updateRowspan(e,t,r){for(const n of keys(r)){const[i,o]=n.split(","),s=Number.parseInt(i,10),a=Number.parseInt(o,10),l=t.base.rowsDesc[s].cells[a];if("real"===l.type&&l.rowspan){const i=t.getPosForCell(s,a),o=l.rowspan+r[n];e.setNodeAttribute(e.mapping.map(i.from),"rowspan",o>1?o:null)}}}function keys(e){return Object.keys(e)}const b$f=cn("yfm-table-floating-popup"),FloatingPopup=function(e){const{anchorElement:t,zIndex:r=1e3,style:n,className:i,qa:o,children:s,floatingStyles:a}=e,l=useFloatingNodeId(),c=useFloatingParentNodeId(),u=reactExports.useMemo(()=>[offset$1(e.offset)],[e.offset]),{refs:d,elements:p,floatingStyles:h,placement:f,context:{open:m},update:g}=useFloating({nodeId:l,open:e.open,placement:e.placement,middleware:u}),{getFloatingProps:b}=useInteractions();return reactExports.useEffect(()=>{void 0!==t&&t!==d.reference.current&&d.setReference(t)},[t,d]),reactExports.useEffect(()=>{if(p.reference&&p.floating)return autoUpdate(p.reference,p.floating,g)},[p,g]),y=jsxRuntimeExports.jsx(FloatingNode,{id:l,children:m?jsxRuntimeExports.jsx(Portal$2,{children:jsxRuntimeExports.jsx("div",{ref:d.setFloating,style:{position:"absolute",top:0,left:0,zIndex:r,width:"max-content",pointerEvents:"auto",outline:"none",...a,...h},"data-floating-ui-placement":f,...b(),children:jsxRuntimeExports.jsx("div",{className:b$f(null,i),style:n,"data-qa":o,children:s})})}):null}),null===c?jsxRuntimeExports.jsx(FloatingTree,{children:y}):y;var y},popupOffset={mainAxis:-9.5},FloatingMenu=function(e){const{dirtype:t,canDrag:r,anchorElement:n,dropdownItems:i,switcherMouseProps:o,onOpenToggle:s}=e,[a,l]=reactExports.useState(!1),[c,u,d]=useBooleanState(!1),p=a||c,h="row"===t;return jsxRuntimeExports.jsx(FloatingPopup,{open:!0,offset:popupOffset,anchorElement:n,placement:h?"left":"top",floatingStyles:{lineHeight:"initial"},style:{backgroundColor:"transparent"},children:jsxRuntimeExports.jsx(DropdownMenuExport,{onOpenToggle:(...e)=>{l(...e),s(...e)},renderSwitcher:e=>jsxRuntimeExports.jsx(Flex,{centerContent:!0,width:20,height:20,style:{borderRadius:"var(--g-border-radius-xs)",backgroundColor:p?"var(--g-color-base-background)":void 0},onMouseEnter:u,onMouseLeave:d,children:jsxRuntimeExports.jsx(Button,{style:{cursor:r?"grab":void 0,transform:h?"rotate(90deg)":void 0,"--g-button-height":p?void 0:"5px","--_--background-color":p?void 0:"var(--g-color-base-background)"},view:a?"outlined-action":"outlined",pin:p?"round-round":"circle-circle",size:"xs",qa:h?"g-md-yfm-table-row-btn":"g-md-yfm-table-column-btn",...e,...o,children:p?jsxRuntimeExports.jsx(Icon,{data:r?GripHorizontal:Ellipsis}):String.fromCharCode(8194)})}),popupProps:{zIndex:1010,placement:h?"right-start":"bottom-start"},menuProps:{qa:`g-md-yfm-table-${t}-menu`},items:i})})},FloatingMenuControl=function({type:e,multiple:t,dndHandler:r,acnhorElement:n,onMenuOpenToggle:i,onClearCellsClick:o,onInsertBeforeClick:s,onInsertAfterClick:a,onRemoveRangeClick:l,onRemoveTableClick:c}){const u=reactExports.useMemo(()=>[[{text:i18n$8(`${e}.add.before`),qa:`g-md-yfm-table-action-add-${e}-before`,action:s,iconStart:jsxRuntimeExports.jsx(Icon,{data:"row"===e?ArrowUp:ArrowLeft})},{text:i18n$8(`${e}.add.after`),qa:`g-md-yfm-table-action-add-${e}-after`,action:a,iconStart:jsxRuntimeExports.jsx(Icon,{data:"row"===e?ArrowDown:ArrowRight})}],[{text:i18n$8("cells.clear"),qa:`g-md-yfm-table-${e}-clear-cells`,action:o,iconStart:jsxRuntimeExports.jsx(Icon,{data:BroomMotion})}],[{text:i18n$8(`${e}.remove${t?".multiple":""}`),qa:`g-md-yfm-table-action-remove-${e}`,action:l,iconStart:jsxRuntimeExports.jsx(Icon,{data:Xmark})},{theme:"danger",text:i18n$8("table.remove"),qa:"g-md-yfm-table-action-remove-table",action:c,iconStart:jsxRuntimeExports.jsx(Icon,{data:TrashBin})}]],[e,t,o,a,s,l,c]);return jsxRuntimeExports.jsx(FloatingMenu,{dirtype:e,canDrag:!!r&&r.canDrag(),onOpenToggle:i,anchorElement:n,switcherMouseProps:r?{onMouseLeave:r.control_handleMouseLeave,onMouseDown:r.control_handleMouseDown,onMouseMove:r.control_handleMouseMove,onMouseUp:r.control_handleMouseUp}:void 0,dropdownItems:u})};function getSelectedCellsForRows(e,t){const r=[];for(let n=t.startIdx;n<=t.endIdx;n++)for(let t=0;t<e.cols;t++){const i=getSelectedCellPos(e,n,t);i&&r.push(i)}return r}function getSelectedCellsForColumns(e,t){const r=[];for(let n=0;n<e.rows;n++)for(let i=t.startIdx;i<=t.endIdx;i++){const t=getSelectedCellPos(e,n,i);t&&r.push(t)}return r}function getSelectedCellPos(e,t,r){const n=e.getPosForCell(t,r);if("virtual"===n.type)return null;const i={from:n.from,to:n.to,mods:{"first-row":0===t,"last-row":t===e.rows-1,"first-column":0===r,"last-column":r===e.cols-1}},{rowspan:o,colspan:s}=e.base.rowsDesc[t].cells[r];return o&&o>0&&t+o>=e.rows&&(i.mods["last-row"]=!0),s&&s>0&&r+s>=e.cols&&(i.mods["last-column"]=!0),i}class DropCursor{editorView;width;color;class;cursorElem=null;cursorPos=null;constructor(e,t={}){this.editorView=e,this.width=t.width??1,this.color=!1===t.color?void 0:t.color||"black",this.class=t.class}getPos(){return this.cursorPos}setPos(e){if("number"!=typeof e||isNaN(e))throw new Error('"val" is not a number');this.cursorPos!==e&&(this.cursorPos=e,this.update())}clear(){this.cursorPos=null,this.cursorElem?.remove(),this.cursorElem=null}update(){const{cursorPos:e}=this;if(null===e)return;const t=this.editorView.state.doc.resolve(e),r=!t.parent.inlineContent;let n;if(r){const r=t.nodeBefore,i=t.nodeAfter;if(r||i){const t=this.editorView.nodeDOM(e-(r?r.nodeSize:0));if(t){const o=t.getBoundingClientRect();let s=r?o.bottom:o.top;r&&i&&(s=(s+this.editorView.nodeDOM(e).getBoundingClientRect().top)/2),n={left:o.left,right:o.right,top:s-this.width/2,bottom:s+this.width/2}}}}if(!n){const t=this.editorView.coordsAtPos(e);n={left:t.left-this.width/2,right:t.left+this.width/2,top:t.top,bottom:t.bottom}}this.render(n,{isBlock:r})}render(e,{isBlock:t}){const r=this.editorView.dom.offsetParent;let n,i;if(this.cursorElem||(this.cursorElem=r.appendChild(document.createElement("div")),this.class&&(this.cursorElem.className=this.class),this.cursorElem.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.cursorElem.style.backgroundColor=this.color)),this.cursorElem.classList.toggle("prosemirror-dropcursor-block",t),this.cursorElem.classList.toggle("prosemirror-dropcursor-inline",!t),!r||r===document.body&&"static"===getComputedStyle(r).position)n=-pageXOffset,i=-pageYOffset;else{const e=r.getBoundingClientRect();n=e.left-r.scrollLeft,i=e.top-r.scrollTop}this.cursorElem.style.left=e.left-n+"px",this.cursorElem.style.top=e.top-i+"px",this.cursorElem.style.width=e.right-e.left+"px",this.cursorElem.style.height=e.bottom-e.top+"px"}}class TableColumnDropCursor extends DropCursor{update(){const e=this.getPos();if(null===e)return;const t=this.editorView.state.doc.resolve(e),r=findParentNodeClosestToPos(t,isTableNode);if(!r)return;let n,i;if(t.nodeAfter&&isTableCellNode(t.nodeAfter))n="left",i=e;else{if(!t.nodeBefore||!isTableCellNode(t.nodeBefore))return this.cursorElem?.remove(),void(this.cursorElem=null);n="right",i=e-t.nodeBefore.nodeSize}const o=this.editorView.nodeDOM(i),s=this.editorView.nodeDOM(r.pos),a=o.getBoundingClientRect(),l=s.getBoundingClientRect(),c={left:a[n]-this.width/2,right:a[n]+this.width/2,top:l.top,bottom:l.bottom};this.render(c,{isBlock:!0})}}class YfmTableDnDGhost{_x;_y;_dndBackgroundElem;_ghostTable;_ghostButton=null;_tblShiftX;_tblShiftY;_btnShiftX=0;_btnShiftY=0;_rafId;constructor(e,t){this._x=t.initial.clientX,this._y=t.initial.clientY;const r=e.dom.ownerDocument;this._dndBackgroundElem=r.createElement("div"),this._dndBackgroundElem.classList.add("g-md-yfm-table-dnd-cursor-background");{const e=this._buildGhostButton(t);e&&(this._ghostButton=e.domElement,this._btnShiftX=e.shiftX,this._btnShiftY=e.shiftY,this._dndBackgroundElem.appendChild(this._ghostButton))}{const{domElement:r,shiftX:n,shiftY:i}="row"===t.type?this._buildRowGhost(e,t):this._buildColumnGhost(e,t);this._ghostTable=r,this._tblShiftX=n,this._tblShiftY=i,this._dndBackgroundElem.appendChild(this._ghostTable)}this._updatePositions(),this._rafId=requestAnimationFrame(()=>{r.body.append(this._dndBackgroundElem),this._startAnimation()})}move(e){this._x=e.clientX,this._y=e.clientY}destroy(){cancelAnimationFrame(this._rafId),this._dndBackgroundElem.remove()}_startAnimation(){const e=this;let t={x:e._x,y:e._y};e._rafId=requestAnimationFrame(function r(){e._x===t.x&&e._y===t.y||(t={x:e._x,y:e._y},e._updatePositions()),e._rafId=requestAnimationFrame(r)})}_updatePositions(){{const e=this._x+this._tblShiftX,t=this._y+this._tblShiftY;this._ghostTable.style.transform=`translate(${e}px, ${t}px)`}if(this._ghostButton){const e=this._x+this._btnShiftX,t=this._y+this._btnShiftY;this._ghostButton.style.transform=`translate(${e}px, ${t}px)`}}_buildRowGhost(e,{tableDesc:t,rangeIdx:r}){let n=0,i=0;const o=e.dom.ownerDocument,s=this._buildGhostContainer(e),a=s.appendChild(o.createElement("table")),l=a.appendChild(o.createElement("tbody"));{const r=t.pos,n=e.domAtPos(r+1).node.getBoundingClientRect();a.style.width=n.width+"px"}const c=t.base.getRowRanges()[r];for(let u=c.startIdx;u<=c.endIdx;u++){const r=l.appendChild(o.createElement("tr"));for(let o=0;o<t.cols;o++){const s=t.getPosForCell(u,o);if("real"===s.type){const t=e.domAtPos(s.from+1).node,a=r.appendChild(t.cloneNode(!0)),l=t.getBoundingClientRect();a.style.width=l.width+"px",a.style.height=l.height+"px",u===c.startIdx&&0===o&&(n=l.left-this._x,i=l.top-this._y)}}}return removeIdAttributes(a),{domElement:s,shiftX:n,shiftY:i}}_buildColumnGhost(e,{tableDesc:t,rangeIdx:r}){let n=0,i=0;const o=e.dom.ownerDocument,s=this._buildGhostContainer(e);{const r=t.pos,n=e.domAtPos(r+1).node.getBoundingClientRect();s.style.height=n.height+"px"}const a=s.appendChild(o.createElement("table")),l=a.appendChild(o.createElement("tbody")),c=t.base.getColumnRanges()[r];for(let u=0;u<t.rows;u++){const r=l.appendChild(o.createElement("tr"));for(let o=c.startIdx;o<=c.endIdx;o++){const a=t.getPosForCell(u,o);if("real"===a.type){const t=e.domAtPos(a.from+1).node,l=r.appendChild(t.cloneNode(!0)),d=t.getBoundingClientRect();l.style.width=d.width+"px",l.style.height=d.height+"px",0===u&&o===c.startIdx&&(s.style.minWidth=d.width+"px",n=d.left-this._x,i=d.top-this._y)}}}return removeIdAttributes(a),{domElement:s,shiftX:n,shiftY:i}}_buildGhostButton({initial:{target:e}}){if(!(e instanceof Element))return null;const t=e.closest(".g-button");if(!t)return null;const r=t.ownerDocument.createElement("div");r.classList.add("g-md-yfm-table-dnd-ghost-button");const n=t.getBoundingClientRect(),i=r.appendChild(t.cloneNode(!0));return removeIdAttributes(i),i.style.cursor="",i.style.pointerEvents="none",{domElement:r,shiftX:n.left-this._x,shiftY:n.top-this._y}}_buildGhostContainer(e){const t=e.dom.ownerDocument.createElement("div");t.setAttribute("aria-hidden","true");const r=Array.from(e.dom.classList).filter(e=>e.startsWith("yfm_"));return t.classList.add("g-md-yfm-table-dnd-ghost","yfm",...r),t}}function removeIdAttributes(e){e.removeAttribute("id"),e.querySelectorAll("[id]").forEach(e=>e.removeAttribute("id"))}const MOUSE_MOVE_DEBOUNCE=100,DRAG_START_THRESHOLD=4;class YfmTableDnDHandler{_rowHandler;_columnHandler;get row(){return this._rowHandler}get column(){return this._columnHandler}constructor(e,t){this._rowHandler=new YfmTableRowDnDHandler(e,t),this._columnHandler=new YfmTableColumnDnDHandler(e,t)}update(e){this._rowHandler.update(e),this._columnHandler.update(e)}destroy(){this._rowHandler.destroy(),this._columnHandler.destroy()}}class YfmTableDnDAbstractHandler{_cellGetPos;_editorView;_logger;_dropCursor;__cellNode;__dragging=!1;__destroyed=!1;__dragMouseDown=!1;constructor(e,t){this._editorView=e,this.__cellNode=t.cellNode,this._cellGetPos=t.cellGetPos,this._logger=t.logger,this._dropCursor=t.dropCursor}update(e){this.__cellNode=e}destroy(){this.__destroyed=!0,this._clearDragging(!1)}control_handleMouseDown=e=>{this.__dragMouseDown={pageX:e.pageX,pageY:e.pageY},this._dropCursor.clear()};control_handleMouseUp=()=>{this.__dragMouseDown=!1};control_handleMouseLeave=()=>{this.__dragMouseDown=!1};control_handleMouseMove=e=>{this._dragMouseDown&&isDragThresholdPassed(this._dragMouseDown,e)&&(this._editorView.dragging||this._dragging||this._startDragging(e))};get _cellNode(){return this.__cellNode}get _dragging(){return this.__dragging}set _dragging(e){this.__dragging=e}get _destroyed(){return this.__destroyed}get _dragMouseDown(){return this.__dragMouseDown}_getTableDescAndCellInfo(){const e=this._cellGetPos(),t=void 0===e?void 0:findParentNodeClosestToPos(this._editorView.state.doc.resolve(e),isTableNode),r=t&&TableDesc.create(t.node)?.bind(t.pos),n=r?.base.getCellInfo(this._cellNode);return n?{cellPos:e,table:t,tableDesc:r,cellInfo:n}:null}_clearDragging(e){this.__dragging=!1,this.__dragMouseDown=!1,this._dropCursor.clear(),this._editorView.dragging=null,!1!==e&&this._editorView.dispatch(clearAllSelections(this._editorView.state.tr))}}class YfmTableRowDnDHandler extends YfmTableDnDAbstractHandler{constructor(e,t){super(e,{...t,logger:t.logger.nested({component:"row-dnd-handler"}),dropCursor:new DropCursor(e,t.dropCursor)})}canDrag(){const e=this._getTableDescAndCellInfo();if(!e)return!1;const t=e.tableDesc.base.getRowRangeByRowIdx(e.cellInfo.row);return t.safeTopBoundary&&t.safeBottomBoundary}_startDragging=e=>{const t=this._getTableDescAndCellInfo();if(!t)return;const{tableDesc:r,cellInfo:n}=t,i=r.base.getRowRanges(),o=r.base.getRowRangeByRowIdx(n.row);if(!o.safeTopBoundary||!o.safeBottomBoundary)return;this._dragging=!0,this._logger.event({event:"row-drag-start"});{const{tr:e}=this._editorView.state;hideHoverDecos(e),selectDraggedRow(e,getSelectedCellsForRows(t.tableDesc,o)),this._editorView.dispatch(e)}{const e=r.getPosForRow(o.startIdx).from,t=r.getPosForRow(o.endIdx).to;this._editorView.dragging={move:!0,slice:this._editorView.state.doc.slice(e,t,!1)}}const s=i.indexOf(o),a=new YfmTableDnDGhost(this._editorView,{type:"row",initial:e,rangeIdx:s,tableDesc:r}),l=debounce(e=>{this._moveDragging(e,{rangeIdx:s,tableDesc:r})},MOUSE_MOVE_DEBOUNCE,{maxWait:MOUSE_MOVE_DEBOUNCE}),c=e=>{a.move(e),l(e)};document.addEventListener("mousemove",c),document.addEventListener("mouseup",()=>{l.flush(),a.destroy(),document.removeEventListener("mousemove",c),this._endDragging(o,r)},{once:!0})};_moveDragging(e,{rangeIdx:t,tableDesc:r}){if(this._destroyed||!this._dragging)return;const n=this._getTableDescAndCellInfo();if(!n||n.tableDesc.base!==r.base)return void this._clearDragging();const{tableDesc:i}=n,o=i.base.getRowRanges().map(e=>{const t=i.getPosForRow(e.startIdx).from,r=i.getPosForRow(e.endIdx),n=r.from,o=r.to,s=this._editorView.domAtPos(t+1).node.getBoundingClientRect(),a=this._editorView.domAtPos(n+1).node.getBoundingClientRect();return{pos:{from:t,to:o},rect:{top:s.top,bottom:a.bottom},safeTopBoundary:e.safeTopBoundary,safeBottomBoundary:e.safeBottomBoundary}}),s=(()=>{const{clientY:r}=e,n=o[t],i=0===t,s=t===o.length-1;if(!i&&r<n.rect.top){for(const e of o.slice(0,t).reverse())if(!(r<e.rect.top)&&e.safeTopBoundary)return e.pos.from;return o[0].pos.from}if(!s&&r>n.rect.bottom){for(const e of o.slice(t+1))if(!(r>e.rect.bottom)&&e.safeBottomBoundary)return e.pos.to;return o.at(-1).pos.to}return null})();"number"==typeof s?this._dropCursor.setPos(s):this._dropCursor.clear()}_endDragging(e,t){if(this._destroyed||!this._dragging)return;const r=this._dropCursor.getPos();if(this._clearDragging(),this._logger.event({event:"row-drag-end"}),null===r)return void this._editorView.focus();const n=this._getTableDescAndCellInfo();if(!n||n.tableDesc.base!==t.base)return void this._editorView.focus();const i=n.tableDesc.getPosForRow(e.startIdx).from,o=n.tableDesc.getPosForRow(e.endIdx).to;if(r===i||r===o)return void this._editorView.focus();const{tr:s}=this._editorView.state,a=s.doc.slice(i,o,!1).content;r>i?(s.insert(r,a),s.delete(i,o)):(s.delete(i,o),s.insert(r,a)),s.setSelection(TextSelection.near(s.doc.resolve(s.mapping.map(r+1)),1)),s.scrollIntoView(),this._editorView.dispatch(s),this._editorView.focus()}}class YfmTableColumnDnDHandler extends YfmTableDnDAbstractHandler{constructor(e,t){super(e,{...t,logger:t.logger.nested({component:"column-dnd-handler"}),dropCursor:new TableColumnDropCursor(e,t.dropCursor)})}canDrag(){const e=this._getTableDescAndCellInfo();if(!e)return!1;const t=e.tableDesc.base.getColumnRangeByColumnIdx(e.cellInfo.column);return t.safeLeftBoundary&&t.safeRightBoundary}_startDragging(e){const t=this._getTableDescAndCellInfo();if(!t)return;const{tableDesc:r,cellInfo:n}=t,i=r.base.getColumnRanges(),o=r.base.getColumnRangeByColumnIdx(n.column);if(!o.safeLeftBoundary||!o.safeRightBoundary)return;this._dragging=!0,this._logger.event({event:"column-drag-start"});{const{tr:e}=this._editorView.state;hideHoverDecos(e),selectDraggedColumn(e,getSelectedCellsForColumns(r,o)),this._editorView.dispatch(e)}this._editorView.dragging={move:!0,slice:Slice.empty};const s=i.indexOf(o),a=new YfmTableDnDGhost(this._editorView,{type:"column",initial:e,rangeIdx:s,tableDesc:r}),l=debounce(e=>{this._moveDragging(e,{rangeIdx:s,tableDesc:r})},MOUSE_MOVE_DEBOUNCE,{maxWait:MOUSE_MOVE_DEBOUNCE}),c=e=>{a.move(e),l(e)};document.addEventListener("mousemove",c),document.addEventListener("mouseup",()=>{l.flush(),a.destroy(),document.removeEventListener("mousemove",c),this._endDragging(o,r)},{once:!0})}_moveDragging(e,{rangeIdx:t,tableDesc:r}){if(this._destroyed||!this._dragging)return;const n=this._getTableDescAndCellInfo();if(!n||n.tableDesc.base!==r.base)return void this._clearDragging();const{tableDesc:i}=n,o=i.base.getColumnRanges().map(e=>{const t=getCellPos(i.getPosForCell(0,e.startIdx),"start"),r=i.getPosForCell(0,e.startIdx),n=getCellPos(r,"start"),o=getCellPos(r,"end"),s=this._editorView.domAtPos(t+1).node.getBoundingClientRect(),a=this._editorView.domAtPos(n+1).node.getBoundingClientRect();return{pos:{from:t,to:o},rect:{left:s.left,right:a.right},safeLeftBoundary:e.safeLeftBoundary,safeRightBoundary:e.safeRightBoundary}}),s=(()=>{const{clientX:r}=e,n=o[t],i=0===t,s=t===o.length-1;if(!i&&r<n.rect.left){for(const e of o.slice(0,t).reverse())if(!(r<e.rect.left)&&e.safeLeftBoundary)return e.pos.from;return o[0].pos.from}if(!s&&r>n.rect.right){for(const e of o.slice(t+1))if(!(r>e.rect.right)&&e.safeRightBoundary)return e.pos.to;return o.at(-1).pos.to}return null})();"number"==typeof s?this._dropCursor.setPos(s):this._dropCursor.clear()}_endDragging(e,t){if(this._destroyed||!this._dragging)return;const r=this._dropCursor.getPos();if(this._clearDragging(),this._logger.event({event:"column-drag-end"}),null===r)return void this._editorView.focus();const n=this._getTableDescAndCellInfo();if(!n||n.tableDesc.base!==t.base)return void this._editorView.focus();const i=n.tableDesc.getPosForCell(0,e.startIdx).from,o=n.tableDesc.getPosForCell(0,e.endIdx).to;if(r===i||r===o)return;const s=(()=>{if(r===n.tableDesc.getPosForRow(0).to-1)return n.tableDesc.cols;const e=this._editorView.state.doc.nodeAt(r);if(!e||e.type.name!==YfmTableNode.Cell)return null;const t=n.tableDesc.base.getCellInfo(e);return t?t.column:null})();if(null===s||s===n.cellInfo.column||s===n.cellInfo.column+1)return void this._editorView.focus();const{tr:a}=this._editorView.state;for(let l=0;l<n.tableDesc.rows;l++){const t=getCellPos(n.tableDesc.getPosForCell(l,e.startIdx),"start"),r=getCellPos(n.tableDesc.getPosForCell(l,e.endIdx),"end");if(t===r)continue;let i;if(i=s===n.tableDesc.cols?n.tableDesc.getPosForRow(l).to-1:0===s?n.tableDesc.getPosForRow(l).from+1:getCellPos(n.tableDesc.getPosForCell(l,s),"start"),i!==t&&i!==r){const e=a.doc.slice(t,r,!1).content;a.insert(a.mapping.map(i),e),a.delete(a.mapping.map(t),a.mapping.map(r))}}this._editorView.dispatch(a.scrollIntoView()),this._editorView.focus()}}function getCellPos(e,t){return"virtual"===e.type?e.closestPos:"start"===t?e.from:e.to}function isDragThresholdPassed(e,t){return Math.abs(e.pageX-t.pageX)>=DRAG_START_THRESHOLD||Math.abs(e.pageY-t.pageY)>=DRAG_START_THRESHOLD}const dropCursorParams={color:"var(--g-color-line-brand)",width:2},yfmTableCellView=e=>(t,r,n,i)=>new YfmTableCellView(t,r,n,i,e);class YfmTableCellView{dom;contentDOM;_node;_view;_getPos;_renderer;_logger;_dndEnabled;_decoRowUniqKey=null;_decoColumnUniqKey=null;_cellInfo;_dndHandler;constructor(e,t,r,n,i){this._node=e,this._view=t,this._getPos=r,this._logger=getLoggerFromState(t.state).nested({node:"yfm-table"}),this._dndEnabled=i.dndEnabled,this.dom=document.createElement("td"),this._updateDom(),this.contentDOM=this.dom,this._cellInfo=null,this._dndHandler=null,this._renderer=getReactRendererFromState(t.state).createItem("yfm-table-cell-view",()=>{if(!this._cellInfo)return null;const{showRowControl:e,showColumnControl:t,rowRange:r,columnRange:n}=this._cellInfo;return jsxRuntimeExports.jsxs(ErrorLoggerBoundary,{children:[e&&jsxRuntimeExports.jsx(FloatingMenuControl,{type:"row",acnhorElement:this.dom,dndHandler:this._dndHandler?.row,multiple:r.rowsCount>1,onMenuOpenToggle:this._onRowControlOpenToggle,onClearCellsClick:this._onRowClearCellsClick,onInsertBeforeClick:this._onRowInsertBeforeClick,onInsertAfterClick:this._onRowInsertAfterClick,onRemoveRangeClick:this._onRowRemoveRangeClick,onRemoveTableClick:this._onRemoveTableClick}),t&&jsxRuntimeExports.jsx(FloatingMenuControl,{type:"column",acnhorElement:this.dom,dndHandler:this._dndHandler?.column,multiple:n.columnsCount>1,onMenuOpenToggle:this._onColumnControlOpenToggle,onClearCellsClick:this._onColumnClearCellsClick,onInsertBeforeClick:this._onColumnInsertBeforeClick,onInsertAfterClick:this._onColumnInsertAfterClick,onRemoveRangeClick:this._onColumnRemoveRangeClick,onRemoveTableClick:this._onRemoveTableClick})]})}),this.update(e,n)}update(e,t){{const t=this._node;this._node=e,this._updateDom(t)}const r=this._getCellInfo();if(!r||0!==r.cell.row&&0!==r.cell.column)this._cellInfo=null,this._dndHandler?.destroy(),this._dndHandler=null;else{const n=this._cellInfo={rowIndex:r.cell.row,columnIndex:r.cell.column,showRowControl:!1,showColumnControl:!1,rowRange:r.tableDesc.base.getRowRangeByRowIdx(r.cell.row),columnRange:r.tableDesc.base.getColumnRangeByColumnIdx(r.cell.column)};for(const e of t){const t=e.spec[YfmTableDecorationTypeKey];n.showRowControl||=t===YfmTableDecorationType.ShowRowControl,n.showRowControl||=t===YfmTableDecorationType.OpenRowMenu,n.showColumnControl||=t===YfmTableDecorationType.ShowColumnControl,n.showColumnControl||=t===YfmTableDecorationType.OpenColumnMenu}this._dndEnabled&&!this._dndHandler&&(this._dndHandler=new YfmTableDnDHandler(this._view,{cellNode:e,cellGetPos:this._getPos,logger:this._logger,dropCursor:dropCursorParams})),this._dndHandler?.update(e)}return this._renderer.rerender(),!0}destroy(){this._dndHandler?.destroy(),this._dndHandler=null,this._renderer.remove(),this._onRowControlOpenToggle(!1),this._onColumnControlOpenToggle(!1)}_updateDom(e){e?.attrs[YfmTableAttr.CellAlign]&&this.dom.classList.remove(e.attrs[YfmTableAttr.CellAlign]),this._node.attrs[YfmTableAttr.Colspan]?this.dom.setAttribute("colspan",this._node.attrs[YfmTableAttr.Colspan]):this.dom.removeAttribute("colspan"),this._node.attrs[YfmTableAttr.Rowspan]?this.dom.setAttribute("rowspan",this._node.attrs[YfmTableAttr.Rowspan]):this.dom.removeAttribute("rowspan"),this._node.attrs[YfmTableAttr.CellAlign]?(this.dom.classList.add(this._node.attrs[YfmTableAttr.CellAlign]),this.dom.setAttribute(YfmTableAttr.CellAlign,this._node.attrs[YfmTableAttr.Rowspan])):this.dom.removeAttribute(YfmTableAttr.CellAlign)}_onRowControlOpenToggle=e=>{if(!1===e)return void(this._decoRowUniqKey&&(this._view.dispatch(deactivateRow(this._view.state.tr,this._decoRowUniqKey)),this._decoRowUniqKey=null));this._logger.event({event:"open-row-menu"});const t=this._getCellInfo();if(!t)return;this._decoRowUniqKey=Date.now();const r=t.tableDesc.base.getRowRangeByRowIdx(t.cell.row),n=activateRows(this._view.state.tr,{controlCell:{from:t.pos,to:t.pos+this._node.nodeSize},cells:getSelectedCellsForRows(t.tableDesc,r),uniqKey:this._decoRowUniqKey});this._view.dispatch(n)};_onColumnControlOpenToggle=e=>{if(!1===e)return void(this._decoColumnUniqKey&&(this._view.dispatch(deactivateColumn(this._view.state.tr,this._decoColumnUniqKey)),this._decoColumnUniqKey=null));this._logger.event({event:"open-column-menu"});const t=this._getCellInfo();if(!t)return;this._decoColumnUniqKey=Date.now();const r=t.tableDesc.base.getColumnRangeByColumnIdx(t.cell.column),n=activateColumns(this._view.state.tr,{controlCell:{from:t.pos,to:t.pos+this._node.nodeSize},cells:getSelectedCellsForColumns(t.tableDesc,r),uniqKey:this._decoColumnUniqKey});this._view.dispatch(n)};_onRowClearCellsClick=()=>{this._logger.event({event:"row-clear-cells",source:"row-menu"});const e=this._getCellInfo();if(e){const t=e.tableDesc.base.getRowRangeByRowIdx(e.cell.row);clearCells({tablePos:e.table.pos,rows:range$1(t.startIdx,t.endIdx+1)})(this._view.state,this._view.dispatch)}this._view.focus()};_onColumnClearCellsClick=()=>{this._logger.event({event:"column-clear-cells",source:"column-menu"});const e=this._getCellInfo();if(e){const t=e.tableDesc.base.getColumnRangeByColumnIdx(e.cell.column);clearCells({tablePos:e.table.pos,cols:range$1(t.startIdx,t.endIdx+1)})(this._view.state,this._view.dispatch)}this._view.focus()};_onRowInsertBeforeClick=()=>{this._logger.event({event:"row-insert-before",source:"row-menu"});const e=this._getCellInfo();if(e){const t=e.tableDesc.base.getRowRangeByRowIdx(e.cell.row);this._insertRow(e.tableDesc,t.startIdx)}this._view.focus()};_onRowInsertAfterClick=()=>{this._logger.event({event:"row-insert-after",source:"column-menu"});const e=this._getCellInfo();if(e){const t=e.tableDesc.base.getRowRangeByRowIdx(e.cell.row);this._insertRow(e.tableDesc,t.endIdx+1)}this._view.focus()};_insertRow(e,t){insertEmptyRow$1({tablePos:e.pos,rowIndex:t})(this._view.state,this._view.dispatch,this._view)}_onColumnInsertBeforeClick=()=>{this._logger.event({event:"column-insert-before",source:"column-menu"});const e=this._getCellInfo();if(e){const t=e.tableDesc.base.getColumnRangeByColumnIdx(e.cell.column);this._insertColumn(e.tableDesc,t.startIdx)}this._view.focus()};_onColumnInsertAfterClick=()=>{this._logger.event({event:"column-insert-after",source:"column-menu"});const e=this._getCellInfo();if(e){const t=e.tableDesc.base.getColumnRangeByColumnIdx(e.cell.column);this._insertColumn(e.tableDesc,t.endIdx+1)}this._view.focus()};_insertColumn(e,t){insertEmptyColumn({tablePos:e.pos,colIndex:t})(this._view.state,this._view.dispatch,this._view)}_onRowRemoveRangeClick=()=>{this._logger.event({event:"row-remove",source:"row-menu"});const e=this._getCellInfo();if(e){const t=e.tableDesc.base.getRowRangeIdxByRowIdx(e.cell.row);removeRowRange({tablePos:e.tableDesc.pos,rangeIdx:t})(this._view.state,this._view.dispatch,this._view)}this._view.focus()};_onColumnRemoveRangeClick=()=>{this._logger.event({event:"column-remove",source:"column-menu"});const e=this._getCellInfo();if(e){const t=e.tableDesc.base.getColumnRangeIdxByColumnIdx(e.cell.column);removeColumnRange({tablePos:e.tableDesc.pos,rangeIdx:t})(this._view.state,this._view.dispatch,this._view)}this._view.focus()};_onRemoveTableClick=()=>{this._logger.event({event:"table-remove"});const e=this._getCellInfo();e&&removeYfmTable(this._view.state,this._view.dispatch,this._view,{tablePos:e.table.pos,tableNode:e.table.node}),this._view.focus()};_getCellInfo(){const e=this._getParentTable(),t=e?TableDesc.create(e.node)?.bind(e.pos):void 0,r=t?.base.getCellInfo(this._node);return r?{pos:this._getPos(),table:e,tableDesc:t,cell:r}:void 0}_getParentTable=()=>{const e=this._getPos();return void 0!==e?findParentNodeClosestToPos(this._view.state.doc.resolve(e),isTableNode):void 0}}const placementByType$1={row:"bottom-start",column:"right-start"},InsertCursor=function({type:e,anchor:t}){const[r,n]=useElementState(),{width:i,height:o,updateRect:s}=useSize(e,()=>t.getBoundingClientRect()),a=useLatest(i),[l,c]=reactExports.useState({top:-9999,left:-9999});return reactExports.useEffect(()=>{if(t&&r)return autoUpdate(t,r,()=>{s(t.getBoundingClientRect()),computePosition(t,r,{placement:placementByType$1[e]}).then(({x:t,y:r})=>{c("row"===e?{left:t,top:r-1}:{left:t-1,top:r})})})},[t,r,a,e,s]),jsxRuntimeExports.jsx(Portal$2,{children:jsxRuntimeExports.jsx("div",{ref:n,style:{position:"absolute",zIndex:1005,width:i,height:o,pointerEvents:"auto",outline:"none",backgroundColor:"var(--g-color-line-brand)",...l}})})};function useSize(e,t){const[r,n]=reactExports.useState(()=>getSize(e,t())),i=useLatest(r);return{width:r.width,height:r.height,updateRect:reactExports.useCallback(t=>{const r=getSize(e,t);"row"===e&&r.width!==i.current.width&&n(r),"column"===e&&r.height!==i.current.height&&n(r)},[i,e])}}function getSize(e,t){return"row"===e?{height:2,width:t.width}:{width:2,height:t.height}}const PlusButton=function({qa:e,onClick:t,onHoverChange:r}){const[n,i,o]=useBooleanState(!1);return reactExports.useEffect(()=>{r(n)},[n,r]),jsxRuntimeExports.jsx(Flex,{centerContent:!0,width:20,height:20,onMouseEnter:i,onMouseLeave:o,style:{borderRadius:"100px",backgroundColor:n?"var(--g-color-base-background)":void 0},children:jsxRuntimeExports.jsx(Button,{qa:e,size:"xs",pin:"circle-circle",view:n?"outlined-action":"normal",onClick:t,style:n?{"--g-button-background-color-hover":"var(--g-color-base-background)"}:{color:"transparent","--g-button-height":"4px","--g-button-background-color":"var(--g-color-line-generic-accent)","--g-button-border-color":"var(--g-color-line-generic-accent)"},children:jsxRuntimeExports.jsx(Icon,{data:Plus})})})},styles={borderRadius:"100px",background:"transparent"},placementByType={row:"left-end",column:"top-end"},offsetByType={row:{alignmentAxis:-10},column:{alignmentAxis:-10}},FloatingPlusButton=function({anchor:e,type:t,...r}){const[n,i]=reactExports.useState(!1);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FloatingPopup,{open:!0,anchorElement:e,placement:placementByType[t],offset:offsetByType[t],style:styles,children:jsxRuntimeExports.jsx(PlusButton,{...r,onHoverChange:i,qa:`g-md-yfm-table-plus-${t}`})}),n&&jsxRuntimeExports.jsx(InsertCursor,{anchor:e,type:t})]})},FloatingPlusControl=reactExports.memo(function({type:e,index:t,cellElem:r,tableElem:n,onClick:i}){const o=reactExports.useMemo(()=>({contextElement:n,getBoundingClientRect(){const t=r.getBoundingClientRect(),i=n.getBoundingClientRect();return"row"===e?{x:i.x,y:t.y,width:i.width,height:t.height,top:t.top,left:i.left,right:i.right,bottom:t.top}:{x:t.x,y:i.y,width:t.width,height:i.height,top:i.top,left:t.left,right:t.right,bottom:i.top}}}),[r,n,e]);return jsxRuntimeExports.jsx(FloatingPlusButton,{anchor:o,type:e,onClick:()=>i(t)})}),yfmTableView=(e,t,r,n)=>new YfmTableNewView(e,t,r,n);class YfmTableNewView{dom;contentDOM;_node;_view;_getPos;_renderer;_logger;_isFocused=!1;constructor(e,t,r,n){this._node=e,this._view=t,this._getPos=r,this._logger=getLoggerFromState(t.state).nested({node:"yfm-table"}),this.dom=this.contentDOM=t.dom.ownerDocument.createElement("table"),this.dom.classList.add("g-md-yfm-table-view"),this._updateFocusedState(n),this._renderer=getReactRendererFromState(t.state).createItem("yfm-table-view",()=>{if(!this._isFocused)return null;const e=this._getTableDesc();if(!e)return null;const t=this._view.domAtPos(e.pos+1).node,r=[];for(let n=0;n<e.rows;n++){const i=e.base.rowsDesc[n].cells.findIndex(e=>"real"===e.type);if(i>=0){const o=e.getPosForCell(n,i),s=this._view.domAtPos(o.from+1).node;r.push(jsxRuntimeExports.jsx(FloatingPlusControl,{type:"row",index:n,cellElem:s,tableElem:t,onClick:this._onRowPlusClick},`row-${n}-${i}`))}}for(let n=0;n<e.cols;n++){const i=range$1(0,e.rows).findIndex(t=>"real"===e.base.rowsDesc[t].cells[n].type);if(i>=0){const o=e.getPosForCell(i,n),s=this._view.domAtPos(o.from+1).node;r.push(jsxRuntimeExports.jsx(FloatingPlusControl,{type:"column",index:n,cellElem:s,tableElem:t,onClick:this._onColumnPlusClick},`col-${i}-${n}`))}}return jsxRuntimeExports.jsx(ErrorLoggerBoundary,{children:r})})}update(e,t){return this._node=e,this._updateFocusedState(t),this._renderer.rerender(),!0}destroy(){this._renderer.remove()}_updateFocusedState(e){this._isFocused=e.some(e=>e.spec?.[YfmTableDecorationTypeKey]===YfmTableDecorationType.FocusTable)}_getTableDesc(){const e=this._getPos();return"number"!=typeof e?null:TableDesc.create(this._node)?.bind(e)}_onRowPlusClick=e=>{this._logger.event({event:"row-insert",source:"floating-plus-button"});const t=this._getTableDesc();t&&(insertEmptyRow$1({tablePos:t.pos,rowIndex:e+1})(this._view.state,this._view.dispatch),this._view.focus())};_onColumnPlusClick=e=>{this._logger.event({event:"column-insert",source:"floating-plus-button"});const t=this._getTableDesc();t&&(insertEmptyColumn({tablePos:t.pos,colIndex:e+1})(this._view.state,this._view.dispatch),this._view.focus())}}const pluginKey$2=new PluginKey("TableControlsPlugin"),FOCUSED_CLASSNAME="yfm-table-focused";function shouldUpdateState(e,t){return!(null===e&&null===t||null!==e&&null!==t&&e.rowIdx===t.rowIdx&&e.columnIdx===t.columnIdx&&e.tablePos===t.tablePos)}function hideHoverDecos(e){return e.setMeta(pluginKey$2,{newState:null})}const yfmTableFocusPlugin=e=>new Plugin({key:pluginKey$2,state:{init:(e,t)=>updateAfterChanges(t),apply:(e,t)=>{if(e.selectionSet||e.docChanged)return updateAfterChanges(e,t);const r=e.getMeta(pluginKey$2);if(r){const n={...t};n.decorations=n.decorations.map(e.mapping,e.doc);{const e=n.decorations.find(void 0,void 0,e=>e[YfmTableDecorationTypeKey]===YfmTableDecorationType.ShowRowControl||e[YfmTableDecorationTypeKey]===YfmTableDecorationType.ShowColumnControl);n.decorations=n.decorations.remove(e)}if(n.hover=r.newState,n.hover&&n.activeTablePos===n.hover.tablePos){const t=e.doc.nodeAt(n.activeTablePos),r=TableDesc.create(t),i=r.getRelativePosForCell(n.hover.rowIdx,0),o=r.getRelativePosForCell(0,n.hover.columnIdx);"real"===i.type&&(n.decorations=n.decorations.add(e.doc,[Decoration$1.node(n.activeTablePos+i.from,n.activeTablePos+i.to,{},{[YfmTableDecorationTypeKey]:YfmTableDecorationType.ShowRowControl})])),"real"===o.type&&(n.decorations=n.decorations.add(e.doc,[Decoration$1.node(n.activeTablePos+o.from,n.activeTablePos+o.to,{},{[YfmTableDecorationTypeKey]:YfmTableDecorationType.ShowColumnControl})]))}return n}return{...t,decorations:t.decorations.map(e.mapping,e.doc)}}},props:{nodeViews:{[YfmTableNode.Table]:yfmTableView,[YfmTableNode.Cell]:yfmTableCellView(e)},decorations:e=>pluginKey$2.getState(e)?.decorations,handleDOMEvents:{mousemove:throttle((e,t)=>{let r=null;if(t.target instanceof Element&&t.target.closest("td")&&t.target.closest(`.${FOCUSED_CLASSNAME}`)){const n=(()=>{const r=t.target.closest("td"),n=r&&e.posAtDOM(r,0);return null===n?null:e.state.doc.resolve(n)})()??(()=>{const r=e.posAtCoords({left:t.x,top:t.y});return r&&e.state.doc.resolve(r.pos)})(),i=n&&findParentNodeClosestToPos(n,isTableCellNode),o=n&&findParentNodeClosestToPos(n,isTableNode),s=o&&TableDesc.create(o.node),a=i&&s?.getCellInfo(i.node);if(a){r={tablePos:o.pos,rowIdx:a.row,columnIdx:a.column};{const e=s.rowsDesc[r.rowIdx].cells[0];"virtual"===e.type&&(r.rowIdx=e.rowspan[0])}{const e=s.rowsDesc[0].cells[r.columnIdx];"virtual"===e.type&&(r.columnIdx=e.colspan[1])}}}if(shouldUpdateState(pluginKey$2.getState(e.state)?.hover||null,r)){const t={newState:r};e.dispatch(e.state.tr.setMeta(pluginKey$2,t))}},100)}}});function updateAfterChanges(e,t){const r=findParentNode(isTableNode)(e.selection)||findSelectedNodeOfType(yfmTableType(e.doc.type.schema))(e.selection);if(r){const n=r.pos,i=n+r.node.nodeSize,o=t?t.decorations.map(e.mapping,e.doc).find(n,i,e=>e[YfmTableDecorationTypeKey]===YfmTableDecorationType.ShowRowControl||e[YfmTableDecorationTypeKey]===YfmTableDecorationType.ShowColumnControl):[];return{hover:null,activeTablePos:r.pos,decorations:DecorationSet.create(e.doc,[...o,Decoration$1.node(r.pos,r.pos+r.node.nodeSize,{class:FOCUSED_CLASSNAME},{[YfmTableDecorationTypeKey]:YfmTableDecorationType.FocusTable})])}}return{hover:null,activeTablePos:null,decorations:DecorationSet.empty}}const yfmTableControlsPlugins=e=>t=>[yfmTableFocusPlugin(e),yfmTableDndPlugin()];function fixPastedTableBodies(e,t){if(e.content.firstChild?.type===yfmTableBodyType(t)){const r=[];let n=0;for(const{node:o,offset:s}of getChildrenOfNode(e.content)){if(o.type!==yfmTableBodyType(t))break;r.push(...getChildrenOfNode(o).map(e=>e.node)),n=s+o.nodeSize}const i=yfmTableType(t).create(null,yfmTableBodyType(t).create(null,r));e=new Slice(Fragment.from(i).append(e.content.cut(n)),0,0)}return e}const yfmTableTransformPastedPlugin=({schema:e})=>new Plugin({props:{transformPasted:t=>fixPastedTableBodies(t,e)}}),action="createYfmTable",YfmTable=(e,t)=>{e.use(YfmTableSpecs,t),e.addKeymap(()=>({Tab:goToNextCell("next"),"Shift-Tab":goToNextCell("prev"),ArrowDown:goToNextRow("down"),ArrowUp:goToNextRow("up"),Backspace:backspaceCommand})),e.addAction(action,()=>createYfmTable),e.addPlugin(yfmTableTransformPastedPlugin),!1!==t.controls&&e.addPlugin(yfmTableControlsPlugins({dndEnabled:!1!==t.dnd}))};var g,x,l,B2,G2,y,F,v,X2,h,R,Q,Z2,n;x="yfm-tabs",l="active",B2="data-diplodoc-group",G2="data-diplodoc-key",y="data-diplodoc-variant",F="data-diplodoc-forced",(g=v||{}).Regular="regular",g.Radio="radio",g.Dropdown="dropdown",g.Accordion="accordion",v=g,X2=Symbol.for("diplodocTabs"),h=e=>{let t=e.composedPath();return Array.isArray(t)&&t.length>0?t[0]:e.target},R=e=>{let t=h(e);return!t||!t.matches},Q=e=>Math.abs(e.scrollHeight-e.clientHeight)>1?e:e.parentElement?Q(e.parentElement):void 0,Z2=(e,t)=>{let r=e.getBoundingClientRect(),n=t.getBoundingClientRect();return{top:r.top-n.top,left:r.left-n.left,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}},n={TABS:`.${x}`,TAB_LIST:".yfm-tab-list",TAB:".yfm-tab"},"undefined"!=typeof window&&"undefined"!=typeof document&&!window[X2]&&(window[X2]=new class{constructor(e,t={}){this._onSelectTabHandlers=new Set,this._currentPageTabGroups=[],this._isRestoringTabs=!1,this._document=e,this._options=Object.assign({saveTabsToLocalStorage:!1,saveTabsToQueryStateMode:"none"},t),this._document.addEventListener("click",e=>{let t=h(e);if(e.target&&this.hideAllDropdown(e.target),R(e))return;if(this.isElementDropdownSelect(t))return void t.classList.toggle(l);if(!this.isValidTabElement(t))return;let r=this.getTabDataFromHTMLElement(t);r&&this._selectTab(r,t)}),this._document.addEventListener("keydown",e=>{let t=null;switch(e.key){case"ArrowLeft":case"ArrowUp":t="left";break;case"ArrowRight":case"ArrowDown":t="right"}if(!t)return;let r=h(e);if(R(e)||!this.isValidTabElement(r))return;let{tabs:n,nodes:i}=this.getTabs(r),o=this.getTabDataFromHTMLElement(r),s=n.findIndex(({key:e})=>(null==o?void 0:o.key)&&e===o.key);if(!o||n.length<=1||-1===s)return;let a=(s+("left"===t?-1:1)+n.length)%n.length;this.selectTab(n[a]),i[a].focus()})}configure(e){this._options=Object.assign(this._options,e)}onSelectTab(e){return this._onSelectTabHandlers.add(e),()=>{this._onSelectTabHandlers.delete(e)}}selectTabById(e,t){let r=this._document.querySelector(`${n.TAB}[data-diplodoc-id="${e}"]`);if(!r||!this.isValidTabElement(r))return;let i=this.getTabDataFromHTMLElement(r);i&&this._selectTab(i,r),null!=t&&t.scrollToElement&&r.scrollIntoView()}selectTab(e){this._selectTab(e)}restoreTabs(e){this._isRestoringTabs=!0;try{for(let[t,r]of Object.entries(e))if(t){let e={group:t,...r};this.selectTab(e)}}finally{this._isRestoringTabs=!1}}getTabsFromLocalStorage(){return JSON.parse(localStorage.getItem("tabsHistory")||"{}")}getTabsFromSearchQuery(){let e={},t=new URLSearchParams(window.location.search);return t.has("tabs")&&(t.get("tabs")||"").split(",").forEach(t=>{let r=t.split("_"),[n,i]=r,o="regular";if(3===r.length&&(o=r[2]),n&&i&&Object.values(v).includes(o)){let t=i;e[n]={key:t,variant:o}}}),e}updateLocalStorageWithTabs(e){this._options.saveTabsToLocalStorage&&(this._isRestoringTabs||localStorage.setItem("tabsHistory",JSON.stringify(e)))}updateQueryParamWithTabs(e){if(this._isRestoringTabs)return;let t=new URLSearchParams(window.location.search),r=Object.entries(e).map(([e,{key:t,variant:r}])=>"regular"===r?`${e}_${t}`:`${e}_${t}_${r}`);r.length>0?t.set("tabs",r.join(",")):t.delete("tabs");let n=history.state||{},i=new URL(window.location.href);i.search=t.toString(),window.history.replaceState({...n},document.title,i.href)}getCurrentPageTabHistory(e){return Object.fromEntries(Object.entries(e).filter(([e])=>this._currentPageTabGroups.includes(e)))}onPageChanged(){this._currentPageTabGroups=this.getCurrentPageTabGroups()}getCurrentPageTabGroups(){let e=this._document.getElementsByClassName(x),t=new Set;return Array.from(e).forEach(e=>{let r=e.getAttribute(B2);r&&t.add(r)}),Array.from(t)}clearTabsPreferred(){localStorage.removeItem("tabsHistory"),this.updateQueryParamWithTabs({})}_selectTab(e,t){let{group:r,key:n,variant:i}=e;if(!r)return;this.saveTabPreferred({group:r,key:n,variant:i});let o=t&&Q(t),s=o&&Z2(t,o);this.updateHTML({group:r,key:n,variant:i},t,i)>0&&(this.fireSelectTabEvent({group:r,key:n,variant:i},null==t?void 0:t.dataset.diplodocId),s&&this.resetScroll(t,o,s))}updateHTML(e,t,r){switch(r){case"radio":return this.updateHTMLRadio(e,t);case"accordion":return this.updateHTMLAccordion(e,t);case"regular":return this.updateHTMLRegular(e);case"dropdown":return this.updateHTMLDropdown(e);default:return 0}}saveTabPreferred(e){let t={};switch(this._options.saveTabsToLocalStorage&&(t=JSON.parse(localStorage.getItem("tabsHistory")||"{}")),t[e.group]={key:e.key,variant:e.variant},this._options.saveTabsToLocalStorage&&this.updateLocalStorageWithTabs(t),this._options.saveTabsToQueryStateMode){case"all":this.updateQueryParamWithTabs(t);break;case"page":this.updateQueryParamWithTabs(this.getCurrentPageTabHistory(t))}}updateHTMLRadio(e,t){let{group:r,key:i}=e,{isForced:o,root:s}=this.didTabOpenForce(t),a=o?`.yfm-vertical-tab[${F}="true"]`:"",l=this._document.querySelectorAll(`${n.TABS}[${B2}="${r}"] ${n.TAB}[${G2}="${i}"]${a}`);o&&(null==s||s.removeAttribute(F));let c=0;return l.forEach(e=>{let t=e.parentNode.children;for(let r=0;r<t.length;r+=2){let[n,i]=[t.item(r),t.item(r+1)],o=n.children.item(0);n!==e?(o.hasAttribute("checked")&&(n.classList.remove("active"),null==i||i.classList.remove("active"),o.removeAttribute("checked")),c++):o.checked?(n.classList.remove("active"),null==i||i.classList.remove("active"),o.removeAttribute("checked")):(n.classList.add("active"),null==i||i.classList.add("active"),o.setAttribute("checked","true"))}}),c}updateHTMLRegular(e){let{group:t,key:r}=e,i=this._document.querySelectorAll(`${n.TABS}[${B2}="${t}"] ${n.TAB}[${G2}="${r}"]`),o=0;return i.forEach(e=>{let t=e;if(!this.isValidTabElement(t)||"true"===t.dataset.diplodocIsActive)return;o++;let r=e,i=r.parentNode,s=null==i?void 0:i.parentNode,a=Array.from((null==i?void 0:i.querySelectorAll(n.TAB))||[]),c=Array.from((null==s?void 0:s.children)||[]).filter(e=>e.classList.contains("yfm-tab-panel")),u=a.indexOf(r);a.forEach((e,t)=>{let r=c[t],n=t===u;e.dataset.diplodocIsActive=n?"true":"false",e.classList.toggle(l,n),e.setAttribute("aria-selected",n.toString()),e.setAttribute("tabindex",n?"0":"-1"),r.classList.toggle(l,n)})}),o}updateHTMLDropdown(e){let{group:t,key:r}=e,i=this._document.querySelectorAll(`${n.TABS}[${B2}="${t}"] ${n.TAB}[${G2}="${r}"]`),o=0;return i.forEach(e=>{let t=e.closest(`[${y}=dropdown]`);if(null==t||!t.children)return;let r=t.children.item(0),n=t.children.item(1);null==r||r.classList.remove(l);let i=Array.from((null==n?void 0:n.children)||[]).indexOf(e)+2;for(let s=2;s<t.children.length;s++){let a=t.children.item(s),c=null==n?void 0:n.children.item(s-2);o++,i!==s?(c.classList.remove(l),a.classList.remove(l)):(null==a||a.classList.add(l),c.classList.add(l),r.innerHTML=e.innerHTML,r.classList.add("filled"))}}),o}updateHTMLAccordion(e,t){let{group:r,key:i}=e,o=this._document.querySelectorAll(`${n.TABS}[${B2}="${r}"] ${n.TAB}[${G2}="${i}"]`),s=0;return o.forEach(e=>{let t=e.closest(`[${y}=accordion]`);if(null!=t&&t.children)for(let r=0;r<t.children.length;r+=2){let n=t.children.item(r),i=t.children.item(r+1);s++,e!==n?(null==n||n.classList.remove(l),null==i||i.classList.remove(l)):(null==n||n.classList.toggle(l),null==i||i.classList.toggle(l))}}),t&&!this.checkVisible(t)&&setTimeout(()=>{t.scrollIntoView({block:"nearest"})}),s}checkVisible(e){let t=e.getBoundingClientRect(),r=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(t.bottom<0||t.top-r>=0)}hideAllDropdown(e){this._document.querySelectorAll(".yfm-tabs-dropdown-select.active").forEach(t=>{t.contains(e)||t.classList.remove(l)})}resetScroll(e,t,r){let n=Z2(e,t),i=n.top-r.top,o=n.left-r.left,s=n.scrollTop-r.scrollTop,a=n.scrollLeft-r.scrollLeft;t.scrollTo(t.scrollLeft+o-a,t.scrollTop+i-s)}didTabOpenForce(e){if(!e)return{};if(e.dataset.diplodocForced)return{root:e,isForced:!0};let t=e.dataset.diplodocVerticalTab?e:e.parentElement;return{root:t,isForced:void 0!==(null==t?void 0:t.dataset.diplodocForced)}}fireSelectTabEvent(e,t){let{group:r,key:n,variant:i}=e,o=r.startsWith("defaultTabsGroup-")?{key:n,variant:i}:e;this._onSelectTabHandlers.forEach(e=>{e({tab:o,currentTabId:t})})}getTabsType(e){let t=e.closest(`[${y}]`);if(t)return t.dataset.diplodocVariant}isValidTabElement(e){return!!this.getTabsType(e)}isElementDropdownSelect(e){return e.classList.contains("yfm-tabs-dropdown-select")}getTabDataFromHTMLElement(e){var t,r,i;let o=this.getTabsType(e);if("radio"===o){let r=e.dataset.diplodocVerticalTab?e:e.parentElement,i=r.dataset.diplodocKey,o=null==(t=r.closest(n.TABS))?void 0:t.dataset.diplodocGroup;return i&&o?{group:o,key:i,variant:"radio"}:null}if("dropdown"===o||"accordion"===o){let t=e.dataset.diplodocKey,i=null==(r=e.closest(n.TABS))?void 0:r.dataset.diplodocGroup;return t&&i?{group:i,key:t,variant:o}:null}let s=e.dataset.diplodocKey,a=null==(i=e.closest(n.TABS))?void 0:i.dataset.diplodocGroup;return s&&a?{group:a,key:s,variant:"regular"}:null}getTabs(e){var t,r;let i=null==(t=e.closest(n.TABS))?void 0:t.dataset.diplodocGroup,o=null==(r=e.closest(n.TAB_LIST))?void 0:r.querySelectorAll(n.TAB),s=[];return o.forEach(e=>{let t=null==e?void 0:e.dataset.diplodocKey;t&&s.push({group:i,key:t,variant:"regular"})}),{tabs:s,nodes:o}}}(document));var utilsExports=requireUtils$2();const YFM_TAB_CLASSNAME="yfm-tab",DIPLODOC_ID_ATTR="data-diplodoc-id",tabActiveClassname=`${YFM_TAB_CLASSNAME} active`,tabInactiveClassname=YFM_TAB_CLASSNAME,tabPanelActiveClassname="yfm-tab-panel active",tabPanelInactiveClassname="yfm-tab-panel",createYfmTabsCommand=(e,t)=>{if(t){const{schema:r}=e,n=utilsExports.generateID(),i=utilsExports.generateID(),o=tabsListType(r),s=tabsType(r),a=tabPanelType(e.schema).create({[TabPanelAttrs.ariaLabelledby]:n,[TabPanelAttrs.id]:i,[TabPanelAttrs.class]:tabPanelActiveClassname},pType(e.schema).createAndFill()),l=tabType(e.schema).create({[TabAttrs.id]:n,[TabAttrs.class]:tabActiveClassname,[TabAttrs.ariaControls]:i,[TabAttrs.dataDiplodocIsActive]:"true",[TabAttrs.dataDiplodocid]:n,[TabAttrs.dataDiplodocKey]:n}),c=s.create({[TabsAttrs.dataDiplodocGroup]:utilsExports.generateID()},[o.create(null,[l]),a]);t(e.tr.replaceSelectionWith(c).scrollIntoView())}return!0},createYfmTabs={isEnable:createYfmTabsCommand,run:createYfmTabsCommand},execAfterPaint=e=>{requestAnimationFrame(()=>{requestAnimationFrame(e)})},atEndOfPanel=e=>{if(!e)return null;const{$head:t}=e.state.selection;for(let r=t.depth;r>=0;r--){const n=t.node(r);if(t.indexAfter(r)!==n.childCount)return!1;if(n.type===tabPanelType(e.state.schema)){const n=t.before(r);return e?.endOfTextblock("down")?n:null}}return null},switchTabByElem=e=>{e.classList.contains(YFM_TAB_CLASSNAME)&&e.click()},switchTabById=(e,t)=>{const r=`.${YFM_TAB_CLASSNAME}[${DIPLODOC_ID_ATTR}="${t}"]`,n=e.querySelector(r);n&&switchTabByElem(n)},dragAutoSwitch=()=>new Plugin({view:TabsAutoSwitchOnDragOver.view});class TabsAutoSwitchOnDragOver{static TAB_SELECTOR=".yfm-tab:not([data-diplodoc-is-active=true])";static OPEN_TIMEOUT=500;static THROTTLE_WAIT=50;static view=e=>new this(e);_tabElem=null;_editorView;_timeout=null;_docListener;constructor(e){this._editorView=e,this._docListener=throttle(this._onDocEvent.bind(this),TabsAutoSwitchOnDragOver.THROTTLE_WAIT),document.addEventListener("mousemove",this._docListener),document.addEventListener("dragover",this._docListener)}destroy(){this._clear(),this._docListener.cancel(),document.removeEventListener("mousemove",this._docListener),document.removeEventListener("dragover",this._docListener)}_onDocEvent(e){const t=this._editorView;if(!t.dragging)return;const r=t.posAtCoords({left:e.clientX,top:e.clientY});if(r){const e=findDomRefAtPos(r.pos,t.domAtPos.bind(t)).closest(TabsAutoSwitchOnDragOver.TAB_SELECTOR);if(e===this._tabElem)return;this._clear(),e&&this._setTabElem(e)}}_clear(){null!==this._timeout&&clearTimeout(this._timeout),this._timeout=null,this._tabElem=null}_setTabElem(e){this._tabElem=e,this._timeout=setTimeout(this._switchTab.bind(this),TabsAutoSwitchOnDragOver.OPEN_TIMEOUT)}_switchTab(){this._editorView.dragging&&this._tabElem&&switchTabByElem(this._tabElem),this._clear()}}const tabPanelArrowDown=(e,t,r)=>{const{selection:n}=e,i=findParentNodeOfType(tabsType(e.schema))(e.selection);if(atEndOfPanel(r)&&r?.endOfTextblock("down")){const[r,o]=["after",n.$to];let s;if(isTextSelection(n)&&(s=findFakeParaPosForTextSelection(n,r)??findFakeParaPosClosestToPos(o,o.depth-2,r)),isGapCursorSelection(n)&&i&&(s=e.doc.resolve(i.pos+i.node.nodeSize)),s)return t?.(createFakeParagraph(e.tr,s,r).scrollIntoView()),!0}return!1},tabEnter=e=>{const t=get$Cursor(e.selection);return t?.node(t.depth).type===tabType(e.schema)},liftEmptyBlockFromTabPanel=(e,t)=>{const{selection:r,schema:n}=e;if(!isTextSelection(r))return!1;const{$cursor:i}=r;if(!i||i.parent.content.size)return!1;if(i.depth>2&&isSameNodeType(i.node(-1),tabPanelType(n))&&isSameNodeType(i.node(-2),tabsType(n))&&i.after()===i.end(-1)){if(t){const r=i.parent.copy(),n=i.after(-2),{tr:o}=e;o.insert(n,r).delete(i.before(),i.after()).setSelection(TextSelection.create(o.doc,o.mapping.map(n))),t(o.scrollIntoView())}return!0}return!1},createTab=(e,t)=>(r,n,i)=>{const o=findChildren(t.node,e=>e.type.name===tabType(r.schema).name),s=findChildren(t.node,e=>e.type.name===tabPanelType(r.schema).name),a=s.filter(t=>t.node.attrs[TabPanelAttrs.ariaLabelledby]===e.node.attrs[TabAttrs.dataDiplodocid])[0],l=utilsExports.generateID(),c=utilsExports.generateID(),u=tabPanelType(r.schema).create({[TabPanelAttrs.ariaLabelledby]:l,[TabPanelAttrs.id]:c,[TabPanelAttrs.class]:tabPanelInactiveClassname},pType(r.schema).createAndFill()),d=tabType(r.schema).create({[TabAttrs.id]:l,[TabAttrs.dataDiplodocid]:l,[TabAttrs.dataDiplodocKey]:l,[TabAttrs.dataDiplodocIsActive]:"false",[TabAttrs.class]:tabInactiveClassname,[TabAttrs.role]:"tab",[TabAttrs.ariaControls]:c}),{tr:p}=r;return o.forEach(e=>{e.pos=e.pos+t.pos+1}),s.forEach(e=>{e.pos=e.pos+t.pos+1}),n?.(p.insert(a.pos+a.node.nodeSize,u).insert(e.pos+e.node.nodeSize,d).setSelection(TextSelection.create(p.doc,e.pos+e.node.nodeSize+1))),i?.focus(),i&&execAfterPaint(()=>switchTabById(i.dom,l)),!0},removeTab=(e,t)=>(r,n,i)=>{const o=findChildren(t.node,e=>e.type.name===tabsListType(r.schema).name)[0],s=findChildIndex(o.node,e.node),a=findChildren(o.node,e=>e.type.name===tabType(r.schema).name),l=findChildren(t.node,e=>e.type.name===tabPanelType(r.schema).name),c=l.filter(t=>t.node.attrs[TabPanelAttrs.ariaLabelledby]===e.node.attrs[TabAttrs.dataDiplodocid])[0];if(c&&n){const{tr:o}=r;if(a.length<=1)o.delete(t.pos,t.pos+t.node.nodeSize);else{const r=s-1<0?1:s-1;a.forEach(e=>{e.pos=e.pos+t.pos+2}),l.forEach(e=>{e.pos=e.pos+t.pos+1});const n=a[r],u=n.node.attrs[TabAttrs.dataDiplodocid];o.delete(c.pos,c.pos+c.node.nodeSize).delete(e.pos,e.pos+e.node.nodeSize).setSelection(TextSelection.create(o.doc,o.mapping.map(n.pos+n.node.nodeSize-1))),i&&execAfterPaint(()=>switchTabById(i.dom,u))}return n(o),i?.focus(),!0}return!1},removeTabWhenCursorAtTheStartOfTab=(e,t)=>{const r=findParentNodeOfType(tabType(e.schema))(e.selection),n=findParentNodeOfType(tabsType(e.schema))(e.selection);return!(!n||!r||e.selection.from!==r.pos+1||e.selection.from!==e.selection.to)&&removeTab(r,n)(e,t)},joinBackwardToOpenTab=(e,t)=>{const r=get$Cursor(e.selection);if(!r||0!==r.parentOffset)return!1;const n=r.index(r.depth-1);if(n<=0)return!1;if(r.node(r.depth-1).child(n-1).type!==tabsType(e.schema))return!1;const i=findParentNodeOfTypeClosestToPos(e.doc.resolve(r.pos-2),tabsType(e.schema));if(!i)return!1;const o=findChildren(i.node,e=>e.attrs.class===tabPanelActiveClassname)[0];if(t){const n=o.pos+i.pos+o.node.nodeSize,s=e.tr;s.delete(r.before(),r.after()),s.insert(n,r.parent),s.setSelection(TextSelection.create(s.doc,n+1)),t(s.scrollIntoView())}return!0},crossSvg='<svg width="10" height="10" viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg">\n<path fill="currentColor" d="M9.75592 8.57741C10.0814 8.90285 10.0814 9.43049 9.75592 9.75592C9.43049 10.0814 8.90285 10.0814 8.57741 9.75592L5 6.17851L1.42259 9.75592C1.09715 10.0814 0.569515 10.0814 0.244078 9.75592C-0.0813592 9.43049 -0.0813592 8.90285 0.244078 8.57741L3.82149 5L0.244078 1.42259C-0.0813592 1.09715 -0.0813592 0.569515 0.244078 0.244078C0.569515 -0.0813592 1.09715 -0.0813592 1.42259 0.244078L5 3.82149L8.57741 0.244078C8.90285 -0.0813592 9.43049 -0.0813592 9.75592 0.244078C10.0814 0.569515 10.0814 1.09715 9.75592 1.42259L6.17851 5L9.75592 8.57741Z"/>\n</svg>',plusSvg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">\n<path fill="currentColor" d="M9 7h4a1 1 0 1 1 0 2H9v4a1 1 0 1 1-2 0V9H3a1 1 0 1 1 0-2h4V3a1 1 0 1 1 2 0v4z"/>\n</svg>',cnYfmTab=cn("yfm-tab"),ignoreMutation=(e,t,r)=>e=>!!(e instanceof MutationRecord&&"attributes"===e.type&&e.attributeName),getTabNodes=(e,t)=>({currentTab:findParentNodeOfTypeClosestToPos(e.tr.doc.resolve(t()+1),tabType(e.schema)),tabsParentNode:findParentNodeOfTypeClosestToPos(e.tr.doc.resolve(t()),tabsType(e.schema))}),tabView=(e,t,r)=>{const n=document.createElement("div"),i=document.createElement("div");i.setAttribute("class",cnYfmTab("wrapper"));const o=document.createElement("div");o.setAttribute("class",cnYfmTab("view")),i.addEventListener("click",()=>{n.click(),t.focus(),e.nodeSize<3&&execAfterPaint(()=>{const e=r();if(void 0!==e){const{tr:r}=t.state;t.dispatch(r.setSelection(TextSelection.create(r.doc,e+1)).scrollIntoView())}})});const s=document.createElement("div");s.setAttribute("class",cnYfmTab("remove-button")),s.innerHTML=crossSvg,s.contentEditable="false",s.addEventListener("click",()=>{const{state:e,dispatch:n}=t,{currentTab:i,tabsParentNode:o}=getTabNodes(e,r);i&&o&&removeTab(i,o)(e,n,t)});const a=document.createElement("div");a.setAttribute("class",cnYfmTab("create-button")),a.innerHTML=plusSvg,a.contentEditable="false",a.addEventListener("click",()=>{const{state:e,dispatch:n}=t,{currentTab:i,tabsParentNode:o}=getTabNodes(e,r);i&&o&&createTab(i,o)(e,n,t)}),n.draggable=!1;for(const l in e.attrs)Object.prototype.hasOwnProperty.call(e.attrs,l)&&n.setAttribute(l,e.attrs[l]);return i.appendChild(o),i.appendChild(s),n.appendChild(i),n.appendChild(a),{dom:n,contentDOM:o,destroy(){n.remove()},ignoreMutation:ignoreMutation()}},tabPanelView=(e,t,r)=>({ignoreMutation:ignoreMutation()}),vtabView=(e,t,r)=>({ignoreMutation:ignoreMutation()}),vtabInputView=(e,t,r)=>({ignoreMutation:ignoreMutation()}),actionName="toYfmTabs",YfmTabs=e=>{e.use(YfmTabsSpecs,{tabView:()=>tabView,tabPanelView:()=>tabPanelView,vtabView:()=>vtabView,vtabInputView:()=>vtabInputView}),e.addKeymap(()=>({Backspace:chainCommands(removeTabWhenCursorAtTheStartOfTab,joinBackwardToOpenTab),ArrowDown:tabPanelArrowDown,Enter:chainCommands(tabEnter,liftEmptyBlockFromTabPanel),"Shift-Enter":tabEnter}),e.Priority.High),e.addAction(actionName,()=>createYfmTabs),e.addPlugin(dragAutoSwitch)},en$b={"confirm-cancel":"Cancel","confirm-ok":"Close","confirm-title":"Do you want to close the GPT editor?","help-with-text":"Help with text"},ru$b={"confirm-cancel":"","confirm-ok":"","confirm-title":"   GPT?","help-with-text":"  "};registerKeyset("gpt",{en:en$b,ru:ru$b});const cnGptButton=cn$1("gpt-button");ToolbarDataType.SingleButton,cnGptButton();const dislike$1="Bad response",error$1="An error occurred",like$1="Good response",more$1="More",refetch$1="Try again",replace$2="Replace the selected text",en$a={"answer-title":"What do you want to do with the response?","close-button":"Close",dislike:dislike$1,error:error$1,"feedback-message":"Thanks for your feedback!","fresh-start-button":"Start again",like:like$1,more:more$1,"only-presets-title":"Help with text",refetch:refetch$1,replace:replace$2,"replace-disabled":"Insert text","try-again":"Try again","alert-gpt-presets-info":"Highlight text to see GPT presets"},dislike=" ",error=" ",like=" ",more="",refetch=" ",replace$1="  ",ru$a={"answer-title":"     ?","close-button":"",dislike:dislike,error:error,"feedback-message":"  !","fresh-start-button":" ",like:like,more:more,"only-presets-title":"  ",refetch:refetch,replace:replace$1,"replace-disabled":" ","try-again":"","alert-gpt-presets-info":" ,    GPT"};registerKeyset("gpt-dialog",{en:en$a,ru:ru$a});const en$9={"error-text":"An error occurred while generating a reply, please retry the request","retry-button":"Try again","start-again-button":"To the beginning"},ru$9={"error-text":"   ,   ","retry-button":"","start-again-button":" "};registerKeyset("gpt-dialog-error-screen",{en:en$9,ru:ru$9});var reservedModifierKeywords=["shift","alt","meta","mod","ctrl"],mappedKeys={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function mapKey(e){return(e&&mappedKeys[e]||e||"").trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function isHotkeyModifier(e){return reservedModifierKeywords.includes(e)}"undefined"!=typeof document&&(document.addEventListener("keydown",function(e){void 0!==e.key&&pushToCurrentlyPressedKeys([mapKey(e.key),mapKey(e.code)])}),document.addEventListener("keyup",function(e){void 0!==e.key&&removeFromCurrentlyPressedKeys([mapKey(e.key),mapKey(e.code)])})),"undefined"!=typeof window&&window.addEventListener("blur",function(){currentlyPressedKeys.clear()});var currentlyPressedKeys=new Set;function pushToCurrentlyPressedKeys(e){var t=Array.isArray(e)?e:[e];currentlyPressedKeys.has("meta")&&currentlyPressedKeys.forEach(function(e){return!isHotkeyModifier(e)&&currentlyPressedKeys.delete(e.toLowerCase())}),t.forEach(function(e){return currentlyPressedKeys.add(e.toLowerCase())})}function removeFromCurrentlyPressedKeys(e){var t=Array.isArray(e)?e:[e];"meta"===e?currentlyPressedKeys.clear():t.forEach(function(e){return currentlyPressedKeys.delete(e.toLowerCase())})}const en$8={"loading-text":"GPT is generating a response..."},ru$8={"loading-text":"GPT  ..."};registerKeyset("gpt-dialog-loading-screen",{en:en$8,ru:ru$8}),new PluginKey("gpt-widget");let rangeFrom=[],rangeTo=[];function isExtendingChar(e){if(e<768)return!1;for(let t=0,r=rangeFrom.length;;){let n=t+r>>1;if(e<rangeFrom[n])r=n;else{if(!(e>=rangeTo[n]))return!0;t=n+1}if(t==r)return!1}}function isRegionalIndicator(e){return e>=127462&&e<=127487}(()=>{let e="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let t=0,r=0;t<e.length;t++)(t%2?rangeTo:rangeFrom).push(r+=e[t])})();const ZWJ=8205;function findClusterBreak$1(e,t,r=!0,n=!0){return(r?nextClusterBreak:prevClusterBreak)(e,t,n)}function nextClusterBreak(e,t,r){if(t==e.length)return t;t&&surrogateLow$1(e.charCodeAt(t))&&surrogateHigh$1(e.charCodeAt(t-1))&&t--;let n=codePointAt$1(e,t);for(t+=codePointSize$1(n);t<e.length;){let i=codePointAt$1(e,t);if(n==ZWJ||i==ZWJ||r&&isExtendingChar(i))t+=codePointSize$1(i),n=i;else{if(!isRegionalIndicator(i))break;{let r=0,n=t-2;for(;n>=0&&isRegionalIndicator(codePointAt$1(e,n));)r++,n-=2;if(r%2==0)break;t+=2}}}return t}function prevClusterBreak(e,t,r){for(;t>0;){let n=nextClusterBreak(e,t-2,r);if(n<t)return n;t--}return 0}function codePointAt$1(e,t){let r=e.charCodeAt(t);if(!surrogateHigh$1(r)||t+1==e.length)return r;let n=e.charCodeAt(t+1);return surrogateLow$1(n)?n-56320+(r-55296<<10)+65536:r}function surrogateLow$1(e){return e>=56320&&e<57344}function surrogateHigh$1(e){return e>=55296&&e<56320}function codePointSize$1(e){return e<65536?1:2}class Text{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=clip(this,e,t);let n=[];return this.decompose(0,e,n,2),r.length&&r.decompose(0,r.length,n,3),this.decompose(t,this.length,n,1),TextNode.from(n,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=clip(this,e,t);let r=[];return this.decompose(e,t,r,0),TextNode.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),n=new RawTextCursor(this),i=new RawTextCursor(e);for(let o=t,s=t;;){if(n.next(o),i.next(o),o=0,n.lineBreak!=i.lineBreak||n.done!=i.done||n.value!=i.value)return!1;if(s+=n.value.length,n.done||s>=r)return!0}}iter(e=1){return new RawTextCursor(this,e)}iterRange(e,t=this.length){return new PartialTextCursor(this,e,t)}iterLines(e,t){let r;if(null==e)r=this.iter();else{null==t&&(t=this.lines+1);let n=this.line(e).from;r=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new LineCursor(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new TextLeaf(e):TextNode.from(TextLeaf.split(e,[])):Text.empty}}class TextLeaf extends Text{constructor(e,t=textLength(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,n){for(let i=0;;i++){let o=this.text[i],s=n+o.length;if((t?r:s)>=e)return new Line$1(n,s,r,o);n=s+1,r++}}decompose(e,t,r,n){let i=e<=0&&t>=this.length?this:new TextLeaf(sliceText(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&n){let e=r.pop(),t=appendText(i.text,e.text.slice(),0,i.length);if(t.length<=32)r.push(new TextLeaf(t,e.length+i.length));else{let e=t.length>>1;r.push(new TextLeaf(t.slice(0,e)),new TextLeaf(t.slice(e)))}}else r.push(i)}replace(e,t,r){if(!(r instanceof TextLeaf))return super.replace(e,t,r);[e,t]=clip(this,e,t);let n=appendText(this.text,appendText(r.text,sliceText(this.text,0,e)),t),i=this.length+r.length-(t-e);return n.length<=32?new TextLeaf(n,i):TextNode.from(TextLeaf.split(n,[]),i)}sliceString(e,t=this.length,r="\n"){[e,t]=clip(this,e,t);let n="";for(let i=0,o=0;i<=t&&o<this.text.length;o++){let s=this.text[o],a=i+s.length;i>e&&o&&(n+=r),e<a&&t>i&&(n+=s.slice(Math.max(0,e-i),t-i)),i=a+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],n=-1;for(let i of e)r.push(i),n+=i.length+1,32==r.length&&(t.push(new TextLeaf(r,n)),r=[],n=-1);return n>-1&&t.push(new TextLeaf(r,n)),t}}class TextNode extends Text{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,n){for(let i=0;;i++){let o=this.children[i],s=n+o.length,a=r+o.lines-1;if((t?a:s)>=e)return o.lineInner(e,t,r,n);n=s+1,r=a+1}}decompose(e,t,r,n){for(let i=0,o=0;o<=t&&i<this.children.length;i++){let s=this.children[i],a=o+s.length;if(e<=a&&t>=o){let i=n&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!i?r.push(s):s.decompose(e-o,t-o,r,i)}o=a+1}}replace(e,t,r){if([e,t]=clip(this,e,t),r.lines<this.lines)for(let n=0,i=0;n<this.children.length;n++){let o=this.children[n],s=i+o.length;if(e>=i&&t<=s){let a=o.replace(e-i,t-i,r),l=this.lines-o.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let i=this.children.slice();return i[n]=a,new TextNode(i,this.length-(t-e)+r.length)}return super.replace(i,s,a)}i=s+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r="\n"){[e,t]=clip(this,e,t);let n="";for(let i=0,o=0;i<this.children.length&&o<=t;i++){let s=this.children[i],a=o+s.length;o>e&&i&&(n+=r),e<a&&t>o&&(n+=s.sliceString(e-o,t-o,r)),o=a+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof TextNode))return 0;let r=0,[n,i,o,s]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=t,i+=t){if(n==o||i==s)return r;let a=this.children[n],l=e.children[i];if(a!=l)return r+a.scanIdentical(l,t);r+=a.length+1}}static from(e,t=e.reduce((e,t)=>e+t.length+1,-1)){let r=0;for(let p of e)r+=p.lines;if(r<32){let r=[];for(let t of e)t.flatten(r);return new TextLeaf(r,t)}let n=Math.max(32,r>>5),i=n<<1,o=n>>1,s=[],a=0,l=-1,c=[];function u(e){let t;if(e.lines>i&&e instanceof TextNode)for(let r of e.children)u(r);else e.lines>o&&(a>o||!a)?(d(),s.push(e)):e instanceof TextLeaf&&a&&(t=c[c.length-1])instanceof TextLeaf&&e.lines+t.lines<=32?(a+=e.lines,l+=e.length+1,c[c.length-1]=new TextLeaf(t.text.concat(e.text),t.length+1+e.length)):(a+e.lines>n&&d(),a+=e.lines,l+=e.length+1,c.push(e))}function d(){0!=a&&(s.push(1==c.length?c[0]:TextNode.from(c,l)),l=-1,a=c.length=0)}for(let p of e)u(p);return d(),1==s.length?s[0]:new TextNode(s,t)}}function textLength(e){let t=-1;for(let r of e)t+=r.length+1;return t}function appendText(e,t,r=0,n=1e9){for(let i=0,o=0,s=!0;o<e.length&&i<=n;o++){let a=e[o],l=i+a.length;l>=r&&(l>n&&(a=a.slice(0,n-i)),i<r&&(a=a.slice(r-i)),s?(t[t.length-1]+=a,s=!1):t.push(a)),i=l+1}return t}function sliceText(e,t,r){return appendText(e,[""],t,r)}Text.empty=new TextLeaf([""],0);class RawTextCursor{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof TextLeaf?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,n=this.nodes[r],i=this.offsets[r],o=i>>1,s=n instanceof TextLeaf?n.text.length:n.children.length;if(o==(t>0?s:0)){if(0==r)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(t>0?0:1)){if(this.offsets[r]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(n instanceof TextLeaf){let i=n.text[o+(t<0?-1:0)];if(this.offsets[r]+=t,i.length>Math.max(0,e))return this.value=0==e?i:t>0?i.slice(e):i.slice(0,i.length-e),this;e-=i.length}else{let i=n.children[o+(t<0?-1:0)];e>i.length?(e-=i.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(i),this.offsets.push(t>0?1:(i instanceof TextLeaf?i.text.length:i.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class PartialTextCursor{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new RawTextCursor(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=r?n:t<0?n.slice(n.length-r):n.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class LineCursor{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:n}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});let Line$1=class{constructor(e,t,r,n){this.from=e,this.to=t,this.number=r,this.text=n}get length(){return this.to-this.from}};function clip(e,t,r){return[t=Math.max(0,Math.min(e.length,t)),Math.max(t,Math.min(e.length,r))]}function findClusterBreak(e,t,r=!0,n=!0){return findClusterBreak$1(e,t,r,n)}function surrogateLow(e){return e>=56320&&e<57344}function surrogateHigh(e){return e>=55296&&e<56320}function codePointAt(e,t){let r=e.charCodeAt(t);if(!surrogateHigh(r)||t+1==e.length)return r;let n=e.charCodeAt(t+1);return surrogateLow(n)?n-56320+(r-55296<<10)+65536:r}function fromCodePoint(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function codePointSize(e){return e<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(MapMode||(MapMode={}));class ChangeDesc{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,n=0;t<this.sections.length;){let i=this.sections[t++],o=this.sections[t++];o<0?(e(r,n,i),n+=i):n+=o,r+=i}}iterChangedRanges(e,t=!1){iterChanges(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],n=this.sections[t++];n<0?e.push(r,n):e.push(n,r)}return new ChangeDesc(e)}composeDesc(e){return this.empty?e:e.empty?this:composeSets(this,e)}mapDesc(e,t=!1){return e.empty?this:mapSet(this,e,t)}mapPos(e,t=-1,r=MapMode.Simple){let n=0,i=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],a=this.sections[o++],l=n+s;if(a<0){if(l>e)return i+(e-n);i+=s}else{if(r!=MapMode.Simple&&l>=e&&(r==MapMode.TrackDel&&n<e&&l>e||r==MapMode.TrackBefore&&n<e||r==MapMode.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!s)return e==n||t<0?i:i+a;i+=a}n=l}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return i}touchesRange(e,t=e){for(let r=0,n=0;r<this.sections.length&&n<=t;){let i=n+this.sections[r++];if(this.sections[r++]>=0&&n<=t&&i>=e)return!(n<e&&i>t)||"cover";n=i}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+r+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(e=>"number"!=typeof e))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(e)}static create(e){return new ChangeDesc(e)}}class ChangeSet extends ChangeDesc{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(t,r,n,i,o)=>e=e.replace(n,n+(r-t),o),!1),e}mapDesc(e,t=!1){return mapSet(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let n=0,i=0;n<t.length;n+=2){let o=t[n],s=t[n+1];if(s>=0){t[n]=s,t[n+1]=o;let a=n>>1;for(;r.length<a;)r.push(Text.empty);r.push(o?e.slice(i,i+o):Text.empty)}i+=o}return new ChangeSet(t,r)}compose(e){return this.empty?e:e.empty?this:composeSets(this,e,!0)}map(e,t=!1){return e.empty?this:mapSet(this,e,t,!0)}iterChanges(e,t=!1){iterChanges(this,e,t)}get desc(){return ChangeDesc.create(this.sections)}filter(e){let t=[],r=[],n=[],i=new SectionIter(this);e:for(let o=0,s=0;;){let a=o==e.length?1e9:e[o++];for(;s<a||s==a&&0==i.len;){if(i.done)break e;let e=Math.min(i.len,a-s);addSection(n,e,-1);let o=-1==i.ins?-1:0==i.off?i.ins:0;addSection(t,e,o),o>0&&addInsert(r,t,i.text),i.forward(e),s+=e}let l=e[o++];for(;s<l;){if(i.done)break e;let e=Math.min(i.len,l-s);addSection(t,e,-1),addSection(n,e,-1==i.ins?-1:0==i.off?i.ins:0),i.forward(e),s+=e}}return{changes:new ChangeSet(t,r),filtered:ChangeDesc.create(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],n=this.sections[t+1];n<0?e.push(r):0==n?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let n=[],i=[],o=0,s=null;function a(e=!1){if(!e&&!n.length)return;o<t&&addSection(n,t-o,-1);let r=new ChangeSet(n,i);s=s?s.compose(r.map(s)):r,n=[],i=[],o=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof ChangeSet){if(l.length!=t)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${t})`);a(),s=s?s.compose(l.map(s)):l}else{let{from:e,to:s=e,insert:c}=l;if(e>s||e<0||s>t)throw new RangeError(`Invalid change range ${e} to ${s} (in doc of length ${t})`);let u=c?"string"==typeof c?Text.of(c.split(r||DefaultSplit)):c:Text.empty,d=u.length;if(e==s&&0==d)return;e<o&&a(),e>o&&addSection(n,e-o,-1),addSection(n,s-e,d),addInsert(i,n,u),o=s}}(e),a(!s),s}static empty(e){return new ChangeSet(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let n=0;n<e.length;n++){let i=e[n];if("number"==typeof i)t.push(i,-1);else{if(!Array.isArray(i)||"number"!=typeof i[0]||i.some((e,t)=>t&&"string"!=typeof e))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==i.length)t.push(i[0],0);else{for(;r.length<n;)r.push(Text.empty);r[n]=Text.of(i.slice(1)),t.push(i[0],r[n].length)}}}return new ChangeSet(t,r)}static createSet(e,t){return new ChangeSet(e,t)}}function addSection(e,t,r,n=!1){if(0==t&&r<=0)return;let i=e.length-2;i>=0&&r<=0&&r==e[i+1]?e[i]+=t:i>=0&&0==t&&0==e[i]?e[i+1]+=r:n?(e[i]+=t,e[i+1]+=r):e.push(t,r)}function addInsert(e,t,r){if(0==r.length)return;let n=t.length-2>>1;if(n<e.length)e[e.length-1]=e[e.length-1].append(r);else{for(;e.length<n;)e.push(Text.empty);e.push(r)}}function iterChanges(e,t,r){let n=e.inserted;for(let i=0,o=0,s=0;s<e.sections.length;){let a=e.sections[s++],l=e.sections[s++];if(l<0)i+=a,o+=a;else{let c=i,u=o,d=Text.empty;for(;c+=a,u+=l,l&&n&&(d=d.append(n[s-2>>1])),!(r||s==e.sections.length||e.sections[s+1]<0);)a=e.sections[s++],l=e.sections[s++];t(i,c,o,u,d),i=c,o=u}}}function mapSet(e,t,r,n=!1){let i=[],o=n?[]:null,s=new SectionIter(e),a=new SectionIter(t);for(let l=-1;;){if(s.done&&a.len||a.done&&s.len)throw new Error("Mismatched change set lengths");if(-1==s.ins&&-1==a.ins){let e=Math.min(s.len,a.len);addSection(i,e,-1),s.forward(e),a.forward(e)}else if(a.ins>=0&&(s.ins<0||l==s.i||0==s.off&&(a.len<s.len||a.len==s.len&&!r))){let e=a.len;for(addSection(i,a.ins,-1);e;){let t=Math.min(s.len,e);s.ins>=0&&l<s.i&&s.len<=t&&(addSection(i,0,s.ins),o&&addInsert(o,i,s.text),l=s.i),s.forward(t),e-=t}a.next()}else{if(!(s.ins>=0)){if(s.done&&a.done)return o?ChangeSet.createSet(i,o):ChangeDesc.create(i);throw new Error("Mismatched change set lengths")}{let e=0,t=s.len;for(;t;)if(-1==a.ins){let r=Math.min(t,a.len);e+=r,t-=r,a.forward(r)}else{if(!(0==a.ins&&a.len<t))break;t-=a.len,a.next()}addSection(i,e,l<s.i?s.ins:0),o&&l<s.i&&addInsert(o,i,s.text),l=s.i,s.forward(s.len-t)}}}}function composeSets(e,t,r=!1){let n=[],i=r?[]:null,o=new SectionIter(e),s=new SectionIter(t);for(let a=!1;;){if(o.done&&s.done)return i?ChangeSet.createSet(n,i):ChangeDesc.create(n);if(0==o.ins)addSection(n,o.len,0,a),o.next();else if(0!=s.len||s.done){if(o.done||s.done)throw new Error("Mismatched change set lengths");{let e=Math.min(o.len2,s.len),t=n.length;if(-1==o.ins){let t=-1==s.ins?-1:s.off?0:s.ins;addSection(n,e,t,a),i&&t&&addInsert(i,n,s.text)}else-1==s.ins?(addSection(n,o.off?0:o.len,e,a),i&&addInsert(i,n,o.textBit(e))):(addSection(n,o.off?0:o.len,s.off?0:s.ins,a),i&&!s.off&&addInsert(i,n,s.text));a=(o.ins>e||s.ins>=0&&s.len>e)&&(a||n.length>t),o.forward2(e),s.forward(e)}}else addSection(n,0,s.ins,a),i&&addInsert(i,n,s.text),s.next()}}class SectionIter{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Text.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?Text.empty:t[r].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class SelectionRange{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let e=7&this.flags;return 7==e?null:e}get goalColumn(){let e=this.flags>>6;return 16777215==e?void 0:e}map(e,t=-1){let r,n;return this.empty?r=n=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),r==this.from&&n==this.to?this:new SelectionRange(r,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return EditorSelection.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return EditorSelection.range(this.anchor,r)}eq(e,t=!1){return!(this.anchor!=e.anchor||this.head!=e.head||t&&this.empty&&this.assoc!=e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(e.anchor,e.head)}static create(e,t,r){return new SelectionRange(e,t,r)}}class EditorSelection{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:EditorSelection.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new EditorSelection([this.main],0)}addRange(e,t=!0){return EditorSelection.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,EditorSelection.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(e.ranges.map(e=>SelectionRange.fromJSON(e)),e.main)}static single(e,t=e){return new EditorSelection([EditorSelection.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let r=0,n=0;n<e.length;n++){let i=e[n];if(i.empty?i.from<=r:i.from<r)return EditorSelection.normalized(e.slice(),t);r=i.to}return new EditorSelection(e,t)}static cursor(e,t=0,r,n){return SelectionRange.create(e,e,(0==t?0:t<0?8:16)|(null==r?7:Math.min(6,r))|(null!=n?n:16777215)<<6)}static range(e,t,r,n){let i=(null!=r?r:16777215)<<6|(null==n?7:Math.min(6,n));return t<e?SelectionRange.create(t,e,48|i):SelectionRange.create(e,t,(t>e?8:0)|i)}static normalized(e,t=0){let r=e[t];e.sort((e,t)=>e.from-t.from),t=e.indexOf(r);for(let n=1;n<e.length;n++){let r=e[n],i=e[n-1];if(r.empty?r.from<=i.to:r.from<i.to){let o=i.from,s=Math.max(r.to,i.to);n<=t&&t--,e.splice(--n,2,r.anchor>r.head?EditorSelection.range(s,o):EditorSelection.range(o,s))}}return new EditorSelection(e,t)}}function checkSelection(e,t){for(let r of e.ranges)if(r.to>t)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(e,t,r,n,i){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=n,this.id=nextID++,this.default=e([]),this.extensions="function"==typeof i?i(this):i}get reader(){return this}static define(e={}){return new Facet(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:sameArray$1),!!e.static,e.enables)}of(e){return new FacetProvider([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],r=>t(r.field(e)))}}function sameArray$1(e,t){return e==t||e.length==t.length&&e.every((e,r)=>e===t[r])}class FacetProvider{constructor(e,t,r,n){this.dependencies=e,this.facet=t,this.type=r,this.value=n,this.id=nextID++}dynamicSlot(e){var t;let r=this.value,n=this.facet.compareInput,i=this.id,o=e[i]>>1,s=2==this.type,a=!1,l=!1,c=[];for(let u of this.dependencies)"doc"==u?a=!0:"selection"==u?l=!0:1&(null!==(t=e[u.id])&&void 0!==t?t:1)||c.push(e[u.id]);return{create:e=>(e.values[o]=r(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||ensureAll(e,c)){let t=r(e);if(s?!compareArray(t,e.values[o],n):!n(t,e.values[o]))return e.values[o]=t,1}return 0},reconfigure:(e,t)=>{let a,l=t.config.address[i];if(null!=l){let i=getAddr(t,l);if(this.dependencies.every(r=>r instanceof Facet?t.facet(r)===e.facet(r):!(r instanceof StateField)||t.field(r,!1)==e.field(r,!1))||(s?compareArray(a=r(e),i,n):n(a=r(e),i)))return e.values[o]=i,0}else a=r(e);return e.values[o]=a,1}}}}function compareArray(e,t,r){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1;return!0}function ensureAll(e,t){let r=!1;for(let n of t)1&ensureAddr(e,n)&&(r=!0);return r}function dynamicFacetSlot(e,t,r){let n=r.map(t=>e[t.id]),i=r.map(e=>e.type),o=n.filter(e=>!(1&e)),s=e[t.id]>>1;function a(e){let r=[];for(let t=0;t<n.length;t++){let o=getAddr(e,n[t]);if(2==i[t])for(let e of o)r.push(e);else r.push(o)}return t.combine(r)}return{create(e){for(let t of n)ensureAddr(e,t);return e.values[s]=a(e),1},update(e,r){if(!ensureAll(e,o))return 0;let n=a(e);return t.compare(n,e.values[s])?0:(e.values[s]=n,1)},reconfigure(e,i){let o=ensureAll(e,n),l=i.config.facets[t.id],c=i.facet(t);if(l&&!o&&sameArray$1(r,l))return e.values[s]=c,0;let u=a(e);return t.compare(u,c)?(e.values[s]=c,0):(e.values[s]=u,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(e,t,r,n,i){this.id=e,this.createF=t,this.updateF=r,this.compareF=n,this.spec=i,this.provides=void 0}static define(e){let t=new StateField(nextID++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(initField).find(e=>e.field==this);return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,r)=>{let n=e.values[t],i=this.updateF(n,r);return this.compareF(n,i)?0:(e.values[t]=i,1)},reconfigure:(e,r)=>{let n,i=e.facet(initField),o=r.facet(initField);return(n=i.find(e=>e.field==this))&&n!=o.find(e=>e.field==this)?(e.values[t]=n.create(e),1):null!=r.config.address[this.id]?(e.values[t]=r.field(this),0):(e.values[t]=this.create(e),1)}}}init(e){return[this,initField.of({field:this,create:e})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(e){return t=>new PrecExtension(t,e)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(e,t){this.inner=e,this.prec=t}}class Compartment{of(e){return new CompartmentInstance(this,e)}reconfigure(e){return Compartment.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class CompartmentInstance{constructor(e,t){this.compartment=e,this.inner=t}}class Configuration{constructor(e,t,r,n,i,o){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=n,this.staticValues=i,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let n=[],i=Object.create(null),o=new Map;for(let d of flatten(e,t,o))d instanceof StateField?n.push(d):(i[d.facet.id]||(i[d.facet.id]=[])).push(d);let s=Object.create(null),a=[],l=[];for(let d of n)s[d.id]=l.length<<1,l.push(e=>d.slot(e));let c=null==r?void 0:r.config.facets;for(let d in i){let e=i[d],t=e[0].facet,n=c&&c[d]||[];if(e.every(e=>0==e.type))if(s[t.id]=a.length<<1|1,sameArray$1(n,e))a.push(r.facet(t));else{let n=t.combine(e.map(e=>e.value));a.push(r&&t.compare(n,r.facet(t))?r.facet(t):n)}else{for(let t of e)0==t.type?(s[t.id]=a.length<<1|1,a.push(t.value)):(s[t.id]=l.length<<1,l.push(e=>t.dynamicSlot(e)));s[t.id]=l.length<<1,l.push(r=>dynamicFacetSlot(r,t,e))}}let u=l.map(e=>e(s));return new Configuration(e,o,u,s,a,i)}}function flatten(e,t,r){let n=[[],[],[],[],[]],i=new Map;return function e(o,s){let a=i.get(o);if(null!=a){if(a<=s)return;let e=n[a].indexOf(o);e>-1&&n[a].splice(e,1),o instanceof CompartmentInstance&&r.delete(o.compartment)}if(i.set(o,s),Array.isArray(o))for(let t of o)e(t,s);else if(o instanceof CompartmentInstance){if(r.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let n=t.get(o.compartment)||o.inner;r.set(o.compartment,n),e(n,s)}else if(o instanceof PrecExtension)e(o.inner,o.prec);else if(o instanceof StateField)n[s].push(o),o.provides&&e(o.provides,s);else if(o instanceof FacetProvider)n[s].push(o),o.facet.extensions&&e(o.facet.extensions,Prec_.default);else{let t=o.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);e(t,s)}}(e,Prec_.default),n.reduce((e,t)=>e.concat(t))}function ensureAddr(e,t){if(1&t)return 2;let r=t>>1,n=e.status[r];if(4==n)throw new Error("Cyclic dependency between fields and/or facets");if(2&n)return n;e.status[r]=4;let i=e.computeSlot(e,e.config.dynamicSlots[r]);return e.status[r]=2|i}function getAddr(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:e=>e.some(e=>e),static:!0}),lineSeparator=Facet.define({combine:e=>e.length?e[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:e=>!!e.length&&e[0]});class Annotation{constructor(e,t){this.type=e,this.value=t}static define(){return new AnnotationType}}class AnnotationType{of(e){return new Annotation(this,e)}}class StateEffectType{constructor(e){this.map=e}of(e){return new StateEffect(this,e)}}class StateEffect{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new StateEffect(this.type,t)}is(e){return this.type==e}static define(e={}){return new StateEffectType(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let n of e){let e=n.map(t);e&&r.push(e)}return r}}StateEffect.reconfigure=StateEffect.define(),StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(e,t,r,n,i,o){this.startState=e,this.changes=t,this.selection=r,this.effects=n,this.annotations=i,this.scrollIntoView=o,this._doc=null,this._state=null,r&&checkSelection(r,t.newLength),i.some(e=>e.type==Transaction.time)||(this.annotations=i.concat(Transaction.time.of(Date.now())))}static create(e,t,r,n,i,o){return new Transaction(e,t,r,n,i,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Transaction.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function joinRanges(e,t){let r=[];for(let n=0,i=0;;){let o,s;if(n<e.length&&(i==t.length||t[i]>=e[n]))o=e[n++],s=e[n++];else{if(!(i<t.length))return r;o=t[i++],s=t[i++]}!r.length||r[r.length-1]<o?r.push(o,s):r[r.length-1]<s&&(r[r.length-1]=s)}}function mergeTransaction(e,t,r){var n;let i,o,s;return r?(i=t.changes,o=ChangeSet.empty(t.changes.length),s=e.changes.compose(t.changes)):(i=t.changes.map(e.changes),o=e.changes.mapDesc(t.changes,!0),s=e.changes.compose(i)),{changes:s,selection:t.selection?t.selection.map(o):null===(n=e.selection)||void 0===n?void 0:n.map(i),effects:StateEffect.mapEffects(e.effects,i).concat(StateEffect.mapEffects(t.effects,o)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function resolveTransactionInner(e,t,r){let n=t.selection,i=asArray(t.annotations);return t.userEvent&&(i=i.concat(Transaction.userEvent.of(t.userEvent))),{changes:t.changes instanceof ChangeSet?t.changes:ChangeSet.of(t.changes||[],r,e.facet(lineSeparator)),selection:n&&(n instanceof EditorSelection?n:EditorSelection.single(n.anchor,n.head)),effects:asArray(t.effects),annotations:i,scrollIntoView:!!t.scrollIntoView}}function resolveTransaction(e,t,r){let n=resolveTransactionInner(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(r=!1);for(let o=1;o<t.length;o++){!1===t[o].filter&&(r=!1);let i=!!t[o].sequential;n=mergeTransaction(n,resolveTransactionInner(e,t[o],i?n.changes.newLength:e.doc.length),i)}let i=Transaction.create(e,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return extendTransaction(r?filterTransaction(i):i)}function filterTransaction(e){let t=e.startState,r=!0;for(let i of t.facet(changeFilter)){let t=i(e);if(!1===t){r=!1;break}Array.isArray(t)&&(r=!0===r?t:joinRanges(r,t))}if(!0!==r){let n,i;if(!1===r)i=e.changes.invertedDesc,n=ChangeSet.empty(t.doc.length);else{let t=e.changes.filter(r);n=t.changes,i=t.filtered.mapDesc(t.changes).invertedDesc}e=Transaction.create(t,n,e.selection&&e.selection.map(i),StateEffect.mapEffects(e.effects,i),e.annotations,e.scrollIntoView)}let n=t.facet(transactionFilter);for(let i=n.length-1;i>=0;i--){let r=n[i](e);e=r instanceof Transaction?r:Array.isArray(r)&&1==r.length&&r[0]instanceof Transaction?r[0]:resolveTransaction(t,asArray(r),!1)}return e}function extendTransaction(e){let t=e.startState,r=t.facet(transactionExtender),n=e;for(let i=r.length-1;i>=0;i--){let o=r[i](e);o&&Object.keys(o).length&&(n=mergeTransaction(n,resolveTransactionInner(t,o,e.changes.newLength),!0))}return n==e?e:Transaction.create(t,e.changes,e.selection,n.effects,n.annotations,n.scrollIntoView)}Transaction.time=Annotation.define(),Transaction.userEvent=Annotation.define(),Transaction.addToHistory=Annotation.define(),Transaction.remote=Annotation.define();const none$3=[];function asArray(e){return null==e?none$3:Array.isArray(e)?e:[e]}var CharCategory=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(_){}function hasWordChar(e){if(wordChar)return wordChar.test(e);for(let t=0;t<e.length;t++){let r=e[t];if(/\w/.test(r)||r>""&&(r.toUpperCase()!=r.toLowerCase()||nonASCIISingleCaseWordChar.test(r)))return!0}return!1}function makeCategorizer(e){return t=>{if(!/\S/.test(t))return CharCategory.Space;if(hasWordChar(t))return CharCategory.Word;for(let r=0;r<e.length;r++)if(t.indexOf(e[r])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(e,t,r,n,i,o){this.config=e,this.doc=t,this.selection=r,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=i,o&&(o._state=this);for(let s=0;s<this.config.dynamicSlots.length;s++)ensureAddr(this,s<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(null!=r)return ensureAddr(this,r),getAddr(this,r);if(t)throw new RangeError("Field is not present in this state")}update(...e){return resolveTransaction(this,e,!0)}applyTransaction(e){let t,r=this.config,{base:n,compartments:i}=r;for(let s of e.effects)s.is(Compartment.reconfigure)?(r&&(i=new Map,r.compartments.forEach((e,t)=>i.set(t,e)),r=null),i.set(s.value.compartment,s.value.extension)):s.is(StateEffect.reconfigure)?(r=null,n=s.value):s.is(StateEffect.appendConfig)&&(r=null,n=asArray(n).concat(s.value));r?t=e.startState.values.slice():(r=Configuration.resolve(n,i,this),t=new EditorState(r,this.doc,this.selection,r.dynamicSlots.map(()=>null),(e,t)=>t.reconfigure(e,this),null).values);let o=e.startState.facet(allowMultipleSelections)?e.newSelection:e.newSelection.asSingle();new EditorState(r,e.newDoc,o,t,(t,r)=>r.update(t,e),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:EditorSelection.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),n=this.changes(r.changes),i=[r.range],o=asArray(r.effects);for(let s=1;s<t.ranges.length;s++){let r=e(t.ranges[s]),a=this.changes(r.changes),l=a.map(n);for(let e=0;e<s;e++)i[e]=i[e].map(l);let c=n.mapDesc(a,!0);i.push(r.range.map(c)),n=n.compose(l),o=StateEffect.mapEffects(o,l).concat(StateEffect.mapEffects(asArray(r.effects),c))}return{changes:n,selection:EditorSelection.create(i,t.mainIndex),effects:o}}changes(e=[]){return e instanceof ChangeSet?e:ChangeSet.of(e,this.doc.length,this.facet(EditorState.lineSeparator))}toText(e){return Text.of(e.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(ensureAddr(this,t),getAddr(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let n=e[r];n instanceof StateField&&null!=this.config.address[n.id]&&(t[r]=n.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(r)for(let i in r)if(Object.prototype.hasOwnProperty.call(e,i)){let t=r[i],o=e[i];n.push(t.init(e=>t.spec.fromJSON(o,e)))}return EditorState.create({doc:e.doc,selection:EditorSelection.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=Configuration.resolve(e.extensions||[],new Map),r=e.doc instanceof Text?e.doc:Text.of((e.doc||"").split(t.staticFacet(EditorState.lineSeparator)||DefaultSplit)),n=e.selection?e.selection instanceof EditorSelection?e.selection:EditorSelection.single(e.selection.anchor,e.selection.head):EditorSelection.single(0);return checkSelection(n,r.length),t.staticFacet(allowMultipleSelections)||(n=n.asSingle()),new EditorState(t,r,n,t.dynamicSlots.map(()=>null),(e,t)=>t.create(e),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||"\n"}get readOnly(){return this.facet(readOnly)}phrase(e,...t){for(let r of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(e,r)=>{if("$"==r)return"$";let n=+(r||1);return!n||n>t.length?e:t[n-1]})),e}languageDataAt(e,t,r=-1){let n=[];for(let i of this.facet(languageData))for(let o of i(this,t,r))Object.prototype.hasOwnProperty.call(o,e)&&n.push(o[e]);return n}charCategorizer(e){return makeCategorizer(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:n}=this.doc.lineAt(e),i=this.charCategorizer(e),o=e-r,s=e-r;for(;o>0;){let e=findClusterBreak(t,o,!1);if(i(t.slice(e,o))!=CharCategory.Word)break;o=e}for(;s<n;){let e=findClusterBreak(t,s);if(i(t.slice(s,e))!=CharCategory.Word)break;s=e}return o==s?null:EditorSelection.range(o+r,s+r)}}function combineConfig(e,t,r={}){let n={};for(let i of e)for(let e of Object.keys(i)){let t=i[e],o=n[e];if(void 0===o)n[e]=t;else if(o===t||void 0===t);else{if(!Object.hasOwnProperty.call(r,e))throw new Error("Config merge conflict for field "+e);n[e]=r[e](o,t)}}for(let i in t)void 0===n[i]&&(n[i]=t[i]);return n}EditorState.allowMultipleSelections=allowMultipleSelections,EditorState.tabSize=Facet.define({combine:e=>e.length?e[0]:4}),EditorState.lineSeparator=lineSeparator,EditorState.readOnly=readOnly,EditorState.phrases=Facet.define({compare(e,t){let r=Object.keys(e),n=Object.keys(t);return r.length==n.length&&r.every(r=>e[r]==t[r])}}),EditorState.languageData=languageData,EditorState.changeFilter=changeFilter,EditorState.transactionFilter=transactionFilter,EditorState.transactionExtender=transactionExtender,Compartment.reconfigure=StateEffect.define();class RangeValue{eq(e){return this==e}range(e,t=e){return Range$1.create(e,t,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0,RangeValue.prototype.point=!1,RangeValue.prototype.mapMode=MapMode.TrackDel;let Range$1=class e{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(t,r,n){return new e(t,r,n)}};function cmpRange(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class Chunk{constructor(e,t,r,n){this.from=e,this.to=t,this.value=r,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,n=0){let i=r?this.to:this.from;for(let o=n,s=i.length;;){if(o==s)return o;let n=o+s>>1,a=i[n]-e||(r?this.value[n].endSide:this.value[n].startSide)-t;if(n==o)return a>=0?o:s;a>=0?s=n:o=n+1}}between(e,t,r,n){for(let i=this.findIndex(t,-1e9,!0),o=this.findIndex(r,1e9,!1,i);i<o;i++)if(!1===n(this.from[i]+e,this.to[i]+e,this.value[i]))return!1}map(e,t){let r=[],n=[],i=[],o=-1,s=-1;for(let a=0;a<this.value.length;a++){let l,c,u=this.value[a],d=this.from[a]+e,p=this.to[a]+e;if(d==p){let e=t.mapPos(d,u.startSide,u.mapMode);if(null==e)continue;if(l=c=e,u.startSide!=u.endSide&&(c=t.mapPos(d,u.endSide),c<l))continue}else if(l=t.mapPos(d,u.startSide),c=t.mapPos(p,u.endSide),l>c||l==c&&u.startSide>0&&u.endSide<=0)continue;(c-l||u.endSide-u.startSide)<0||(o<0&&(o=l),u.point&&(s=Math.max(s,c-l)),r.push(u),n.push(l-o),i.push(c-o))}return{mapped:r.length?new Chunk(n,i,r,s):null,pos:o}}}class RangeSet{constructor(e,t,r,n){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=n}static create(e,t,r,n){return new RangeSet(e,t,r,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:n=0,filterTo:i=this.length}=e,o=e.filter;if(0==t.length&&!o)return this;if(r&&(t=t.slice().sort(cmpRange)),this.isEmpty)return t.length?RangeSet.of(t):this;let s=new LayerCursor(this,null,-1).goto(0),a=0,l=[],c=new RangeSetBuilder;for(;s.value||a<t.length;)if(a<t.length&&(s.from-t[a].from||s.startSide-t[a].value.startSide)>=0){let e=t[a++];c.addInner(e.from,e.to,e.value)||l.push(e)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(s.chunkIndex)<t[a].from)&&(!o||n>this.chunkEnd(s.chunkIndex)||i<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||n>s.to||i<s.from||o(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||l.push(Range$1.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?RangeSet.empty:this.nextLayer.update({add:l,filter:o,filterFrom:n,filterTo:i}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],n=-1;for(let o=0;o<this.chunk.length;o++){let i=this.chunkPos[o],s=this.chunk[o],a=e.touchesRange(i,i+s.length);if(!1===a)n=Math.max(n,s.maxPoint),t.push(s),r.push(e.mapPos(i));else if(!0===a){let{mapped:o,pos:a}=s.map(i,e);o&&(n=Math.max(n,o.maxPoint),t.push(o),r.push(a))}}let i=this.nextLayer.map(e);return 0==t.length?i:new RangeSet(r,t,i||RangeSet.empty,n)}between(e,t,r){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let i=this.chunkPos[n],o=this.chunk[n];if(t>=i&&e<=i+o.length&&!1===o.between(i,e-i,t-i,r))return}this.nextLayer.between(e,t,r)}}iter(e=0){return HeapCursor.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return HeapCursor.from(e).goto(t)}static compare(e,t,r,n,i=-1){let o=e.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i),s=t.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i),a=findSharedChunks(o,s,r),l=new SpanCursor(o,a,i),c=new SpanCursor(s,a,i);r.iterGaps((e,t,r)=>compare(l,e,c,t,r,n)),r.empty&&0==r.length&&compare(l,0,c,0,0,n)}static eq(e,t,r=0,n){null==n&&(n=999999999);let i=e.filter(e=>!e.isEmpty&&t.indexOf(e)<0),o=t.filter(t=>!t.isEmpty&&e.indexOf(t)<0);if(i.length!=o.length)return!1;if(!i.length)return!0;let s=findSharedChunks(i,o),a=new SpanCursor(i,s,0).goto(r),l=new SpanCursor(o,s,0).goto(r);for(;;){if(a.to!=l.to||!sameValues(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>n)return!0;a.next(),l.next()}}static spans(e,t,r,n,i=-1){let o=new SpanCursor(e,null,i).goto(t),s=t,a=o.openStart;for(;;){let e=Math.min(o.to,r);if(o.point){let r=o.activeForPoint(o.to),i=o.pointFrom<t?r.length+1:o.point.startSide<0?r.length:Math.min(r.length,a);n.point(s,e,o.point,r,i,o.pointRank),a=Math.min(o.openEnd(e),r.length)}else e>s&&(n.span(s,e,o.active,a),a=o.openEnd(e));if(o.to>r)return a+(o.point&&o.to>r?1:0);s=o.to,o.next()}}static of(e,t=!1){let r=new RangeSetBuilder;for(let n of e instanceof Range$1?[e]:t?lazySort(e):e)r.add(n.from,n.to,n.value);return r.finish()}static join(e){if(!e.length)return RangeSet.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let n=e[r];n!=RangeSet.empty;n=n.nextLayer)t=new RangeSet(n.chunkPos,n.chunk,t,Math.max(n.maxPoint,t.maxPoint));return t}}function lazySort(e){if(e.length>1)for(let t=e[0],r=1;r<e.length;r++){let n=e[r];if(cmpRange(t,n)>0)return e.slice().sort(cmpRange);t=n}return e}RangeSet.empty=new RangeSet([],[],null,-1),RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(e){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(e,t,r)}addInner(e,t,r){let n=e-this.lastTo||r.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(n<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),0))}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function findSharedChunks(e,t,r){let n=new Map;for(let o of e)for(let e=0;e<o.chunk.length;e++)o.chunk[e].maxPoint<=0&&n.set(o.chunk[e],o.chunkPos[e]);let i=new Set;for(let o of t)for(let e=0;e<o.chunk.length;e++){let t=n.get(o.chunk[e]);null==t||(r?r.mapPos(t):t)!=o.chunkPos[e]||(null==r?void 0:r.touchesRange(t,t+o.chunk[e].length))||i.add(o.chunk[e])}return i}class LayerCursor{constructor(e,t,r,n=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class HeapCursor{constructor(e){this.heap=e}static from(e,t=null,r=-1){let n=[];for(let i=0;i<e.length;i++)for(let o=e[i];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&n.push(new LayerCursor(o,t,r,i));return 1==n.length?n[0]:new HeapCursor(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)heapBubble(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)heapBubble(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),heapBubble(this.heap,0)}}}function heapBubble(e,t){for(let r=e[t];;){let n=1+(t<<1);if(n>=e.length)break;let i=e[n];if(n+1<e.length&&i.compare(e[n+1])>=0&&(i=e[n+1],n++),r.compare(i)<0)break;e[n]=r,e[t]=i,t=n}}class SpanCursor{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){remove(this.active,e),remove(this.activeTo,e),remove(this.activeRank,e),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:n,rank:i}=this.cursor;for(;t<this.activeRank.length&&(i-this.activeRank[t]||n-this.activeTo[t])>0;)t++;insert(this.active,t,r),insert(this.activeTo,t,n),insert(this.activeRank,t,i),e&&insert(e,t,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),r&&remove(r,n)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(r),this.cursor.next()}}}if(r){this.openStart=0;for(let t=r.length-1;t>=0&&r[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function compare(e,t,r,n,i,o){e.goto(t),r.goto(n);let s=n+i,a=n,l=n-t;for(;;){let t=e.to+l-r.to,n=t||e.endSide-r.endSide,i=n<0?e.to+l:r.to,c=Math.min(i,s);if(e.point||r.point?e.point&&r.point&&(e.point==r.point||e.point.eq(r.point))&&sameValues(e.activeForPoint(e.to),r.activeForPoint(r.to))||o.comparePoint(a,c,e.point,r.point):c>a&&!sameValues(e.active,r.active)&&o.compareRange(a,c,e.active,r.active),i>s)break;(t||e.openEnd!=r.openEnd)&&o.boundChange&&o.boundChange(i),a=i,n<=0&&e.next(),n>=0&&r.next()}}function sameValues(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!=t[r]&&!e[r].eq(t[r]))return!1;return!0}function remove(e,t){for(let r=t,n=e.length-1;r<n;r++)e[r]=e[r+1];e.pop()}function insert(e,t,r){for(let n=e.length-1;n>=t;n--)e[n+1]=e[n];e[t]=r}function findMinIndex(e,t){let r=-1,n=1e9;for(let i=0;i<t.length;i++)(t[i]-n||e[i].endSide-e[r].endSide)<0&&(r=i,n=t[i]);return r}function countColumn(e,t,r=e.length){let n=0;for(let i=0;i<r&&i<e.length;)9==e.charCodeAt(i)?(n+=t-n%t,i++):(n++,i=findClusterBreak(e,i));return n}function findColumn(e,t,r,n){for(let i=0,o=0;;){if(o>=t)return i;if(i==e.length)break;o+=9==e.charCodeAt(i)?r-o%r:1,i=findClusterBreak(e,i)}return e.length}const C="",COUNT="undefined"==typeof Symbol?"__"+C:Symbol.for(C),SET="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),top="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class StyleModule{constructor(e,t){this.rules=[];let{finish:r}=t||{};function n(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function i(e,t,o,s){let a=[],l=/^@(\w+)\b/.exec(e[0]),c=l&&"keyframes"==l[1];if(l&&null==t)return o.push(e[0]+";");for(let r in t){let s=t[r];if(/&/.test(r))i(r.split(/,\s*/).map(t=>e.map(e=>t.replace(/&/,e))).reduce((e,t)=>e.concat(t)),s,o);else if(s&&"object"==typeof s){if(!l)throw new RangeError("The value of a property ("+r+") should be a primitive value.");i(n(r),s,a,c)}else null!=s&&a.push(r.replace(/_.*/,"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())+": "+s+";")}(a.length||c)&&o.push((!r||l||s?e:e.map(r)).join(", ")+" {"+a.join(" ")+"}")}for(let o in e)i(n(o),e[o],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=top[COUNT]||1;return top[COUNT]=e+1,C+e.toString(36)}static mount(e,t,r){let n=e[SET],i=r&&r.nonce;n?i&&n.setNonce(i):n=new StyleSet(e,i),n.mount(Array.isArray(t)?t:[t],e)}}let adoptedSet=new Map;class StyleSet{constructor(e,t){let r=e.ownerDocument||e,n=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let t=adoptedSet.get(r);if(t)return e[SET]=t;this.sheet=new n.CSSStyleSheet,adoptedSet.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[SET]=this}mount(e,t){let r=this.sheet,n=0,i=0;for(let o=0;o<e.length;o++){let t=e[o],s=this.modules.indexOf(t);if(s<i&&s>-1&&(this.modules.splice(s,1),i--,s=-1),-1==s){if(this.modules.splice(i++,0,t),r)for(let e=0;e<t.rules.length;e++)r.insertRule(t.rules[e],n++)}else{for(;i<s;)n+=this.modules[i++].rules.length;n+=t.rules.length,i++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e;let r=t.head||t;this.styleTag.parentNode!=r&&r.insertBefore(this.styleTag,r.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}function crelt(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,r=arguments[1];if(r&&"object"==typeof r&&null==r.nodeType&&!Array.isArray(r)){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var i=r[n];"string"==typeof i?e.setAttribute(n,i):null!=i&&(e[n]=i)}t++}for(;t<arguments.length;t++)add(e,arguments[t]);return e}function add(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var r=0;r<t.length;r++)add(e,t[r])}}let nav="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},doc="undefined"!=typeof document?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie:ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko:gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios:ios,android:/Android\b/.test(nav.userAgent),webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,safari:safari,safari_version:safari?+(/\bVersion\/(\d+(\.\d+)?)/.exec(nav.userAgent)||[0,0])[1]:0,tabSize:null!=doc.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};function getSelection$1(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function contains(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function hasSelection(e,t){if(!t.anchorNode)return!1;try{return contains(e,t.anchorNode)}catch(_){return!1}}function clientRectsFor(e){return 3==e.nodeType?textRange(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function isEquivalentPosition(e,t,r,n){return!!r&&(scanFor(e,t,r,n,-1)||scanFor(e,t,r,n,1))}function domIndex(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function isBlockElement(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}function scanFor(e,t,r,n,i){for(;;){if(e==r&&t==n)return!0;if(t==(i<0?0:maxOffset(e))){if("DIV"==e.nodeName)return!1;let r=e.parentNode;if(!r||1!=r.nodeType)return!1;t=domIndex(e)+(i<0?0:1),e=r}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(i<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=i<0?maxOffset(e):0}}}function maxOffset(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function flattenRect(e,t){let r=t?e.left:e.right;return{left:r,right:r,top:e.top,bottom:e.bottom}}function windowRect(e){let t=e.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function getScale(e,t){let r=t.width/e.offsetWidth,n=t.height/e.offsetHeight;return(r>.995&&r<1.005||!isFinite(r)||Math.abs(t.width-e.offsetWidth)<1)&&(r=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(t.height-e.offsetHeight)<1)&&(n=1),{scaleX:r,scaleY:n}}function scrollRectIntoView(e,t,r,n,i,o,s,a){let l=e.ownerDocument,c=l.defaultView||window;for(let u=e,d=!1;u&&!d;)if(1==u.nodeType){let e,p=u==l.body,h=1,f=1;if(p)e=windowRect(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let t=u.getBoundingClientRect();({scaleX:h,scaleY:f}=getScale(u,t)),e={left:t.left,right:t.left+u.clientWidth*h,top:t.top,bottom:t.top+u.clientHeight*f}}let m=0,g=0;if("nearest"==i)t.top<e.top?(g=t.top-(e.top+s),r>0&&t.bottom>e.bottom+g&&(g=t.bottom-e.bottom+s)):t.bottom>e.bottom&&(g=t.bottom-e.bottom+s,r<0&&t.top-g<e.top&&(g=t.top-(e.top+s)));else{let n=t.bottom-t.top,o=e.bottom-e.top;g=("center"==i&&n<=o?t.top+n/2-o/2:"start"==i||"center"==i&&r<0?t.top-s:t.bottom-o+s)-e.top}if("nearest"==n?t.left<e.left?(m=t.left-(e.left+o),r>0&&t.right>e.right+m&&(m=t.right-e.right+o)):t.right>e.right&&(m=t.right-e.right+o,r<0&&t.left<e.left+m&&(m=t.left-(e.left+o))):m=("center"==n?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==n==a?t.left-o:t.right-(e.right-e.left)+o)-e.left,m||g)if(p)c.scrollBy(m,g);else{let e=0,r=0;if(g){let e=u.scrollTop;u.scrollTop+=g/f,r=(u.scrollTop-e)*f}if(m){let t=u.scrollLeft;u.scrollLeft+=m/h,e=(u.scrollLeft-t)*h}t={left:t.left-e,top:t.top-r,right:t.right-e,bottom:t.bottom-r},e&&Math.abs(e-m)<1&&(n="nearest"),r&&Math.abs(r-g)<1&&(i="nearest")}if(p)break;(t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)&&(t={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)}),u=u.assignedSlot||u.parentNode}else{if(11!=u.nodeType)break;u=u.host}}function scrollableParents(e){let t,r,n=e.ownerDocument;for(let i=e.parentNode;i&&!(i==n.body||t&&r);)if(1==i.nodeType)!r&&i.scrollHeight>i.clientHeight&&(r=i),!t&&i.scrollWidth>i.clientWidth&&(t=i),i=i.assignedSlot||i.parentNode;else{if(11!=i.nodeType)break;i=i.host}return{x:t,y:r}}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?maxOffset(t):0),r,Math.min(e.focusOffset,r?maxOffset(r):0))}set(e,t,r,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=n}}let preventScrollSupported=null,scratchRange;function focusPreventScroll(e){if(e.setActive)return e.setActive();if(preventScrollSupported)return e.focus(preventScrollSupported);let t=[];for(let r=e;r&&(t.push(r,r.scrollTop,r.scrollLeft),r!=r.ownerDocument);r=r.parentNode);if(e.focus(null==preventScrollSupported?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let e=0;e<t.length;){let r=t[e++],n=t[e++],i=t[e++];r.scrollTop!=n&&(r.scrollTop=n),r.scrollLeft!=i&&(r.scrollLeft=i)}}}function textRange(e,t,r=t){let n=scratchRange||(scratchRange=document.createRange());return n.setEnd(e,r),n.setStart(e,t),n}function dispatchKey(e,t,r,n){let i={key:t,code:t,keyCode:r,which:r,cancelable:!0};n&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=n);let o=new KeyboardEvent("keydown",i);o.synthetic=!0,e.dispatchEvent(o);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,e.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function getRoot(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}function clearAttributes(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function atElementStart(e,t){let r=t.focusNode,n=t.focusOffset;if(!r||t.anchorNode!=r||t.anchorOffset!=n)return!1;for(n=Math.min(n,maxOffset(r));;)if(n){if(1!=r.nodeType)return!1;let e=r.childNodes[n-1];"false"==e.contentEditable?n--:(r=e,n=maxOffset(r))}else{if(r==e)return!0;n=domIndex(r),r=r.parentNode}}function isScrolledToBottom(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function textNodeBefore(e,t){for(let r=e,n=t;;){if(3==r.nodeType&&n>0)return{node:r,offset:n};if(1==r.nodeType&&n>0){if("false"==r.contentEditable)return null;r=r.childNodes[n-1],n=maxOffset(r)}else{if(!r.parentNode||isBlockElement(r))return null;n=domIndex(r),r=r.parentNode}}}function textNodeAfter(e,t){for(let r=e,n=t;;){if(3==r.nodeType&&n<r.nodeValue.length)return{node:r,offset:n};if(1==r.nodeType&&n<r.childNodes.length){if("false"==r.contentEditable)return null;r=r.childNodes[n],n=0}else{if(!r.parentNode||isBlockElement(r))return null;n=domIndex(r)+1,r=r.parentNode}}}browser.safari&&browser.safari_version>=26&&(preventScrollSupported=!1);class DOMPos{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new DOMPos(e.parentNode,domIndex(e),t)}static after(e,t){return new DOMPos(e.parentNode,domIndex(e)+1,t)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(2&this.flags){let r,n=this.dom,i=null;for(let o of this.children){if(7&o.flags){if(!o.dom&&(r=i?i.nextSibling:n.firstChild)){let e=ContentView.get(r);(!e||!e.parent&&e.canReuseDOM(o))&&o.reuseDOM(r)}o.sync(e,t),o.flags&=-8}if(r=i?i.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&r!=o.dom&&(t.written=!0),o.dom.parentNode==n)for(;r&&r!=o.dom;)r=rm$1(r);else n.insertBefore(o.dom,r);i=o.dom}for(r=i?i.nextSibling:n.firstChild,r&&t&&t.node==n&&(t.written=!0);r;)r=rm$1(r)}else if(1&this.flags)for(let r of this.children)7&r.flags&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let n=0==maxOffset(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==n&&t.firstChild!=t.lastChild&&(n=e==t.firstChild?-1:1),e=t}r=n<0?e:e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!ContentView.get(r);)r=r.nextSibling;if(!r)return this.length;for(let n=0,i=0;;n++){let e=this.children[n];if(e.dom==r)return i;i+=e.length+e.breakAfter}}domBoundsAround(e,t,r=0){let n=-1,i=-1,o=-1,s=-1;for(let a=0,l=r,c=r;a<this.children.length;a++){let r=this.children[a],u=l+r.length;if(l<e&&u>t)return r.domBoundsAround(e,t,l);if(u>=e&&-1==n&&(n=a,i=l),l>t&&r.dom.parentNode==this.dom){o=a,s=c;break}c=u,l=u+r.breakAfter}return{from:i,to:s<0?r+this.length:s,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),1&t.flags)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,7&this.flags&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=noChildren){this.markDirty();for(let n=e;n<t;n++){let e=this.children[n];e.parent==this&&r.indexOf(e)<0&&e.destroy()}r.length<250?this.children.splice(e,t-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(t));for(let n=0;n<r.length;n++)r[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ChildCursor(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,n,i,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!(8&(this.flags|e.flags))}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}function rm$1(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}ContentView.prototype.breakAfter=0;class ChildCursor{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function replaceRange(e,t,r,n,i,o,s,a,l){let{children:c}=e,u=c.length?c[t]:null,d=o.length?o[o.length-1]:null,p=d?d.breakAfter:s;if(!(t==n&&u&&!s&&!p&&o.length<2&&u.merge(r,i,o.length?d:null,0==r,a,l))){if(n<c.length){let e=c[n];e&&(i<e.length||e.breakAfter&&(null==d?void 0:d.breakAfter))?(t==n&&(e=e.split(i),i=0),!p&&d&&e.merge(0,i,d,!0,0,l)?o[o.length-1]=e:((i||e.children.length&&!e.children[0].length)&&e.merge(0,i,null,!1,0,l),o.push(e))):(null==e?void 0:e.breakAfter)&&(d?d.breakAfter=1:s=1),n++}for(u&&(u.breakAfter=s,r>0&&(!s&&o.length&&u.merge(r,u.length,o[0],!1,a,0)?u.breakAfter=o.shift().breakAfter:(r<u.length||u.children.length&&0==u.children[u.children.length-1].length)&&u.merge(r,u.length,null,!1,a,0),t++));t<n&&o.length;)if(c[n-1].become(o[o.length-1]))n--,o.pop(),l=o.length?0:a;else{if(!c[t].become(o[0]))break;t++,o.shift(),a=o.length?0:l}!o.length&&t&&n<c.length&&!c[t-1].breakAfter&&c[n].merge(0,0,c[t-1],!1,a,l)&&t--,(t<n||o.length)&&e.replaceChildren(t,n,o)}}function mergeChildrenInto(e,t,r,n,i,o){let s=e.childCursor(),{i:a,off:l}=s.findPos(r,1),{i:c,off:u}=s.findPos(t,-1),d=t-r;for(let p of n)d+=p.length;e.length+=d,replaceRange(e,c,u,a,l,n,0,i,o)}const MaxJoinLen=256;class TextView extends ContentView{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,r){return!(8&this.flags||r&&(!(r instanceof TextView)||this.length-(t-e)+r.length>MaxJoinLen||8&r.flags)||(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),0))}split(e){let t=new TextView(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=8&this.flags,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new DOMPos(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return textCoords(this.dom,e,t)}}class MarkView extends ContentView{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let n of t)n.setParent(this)}setAttrs(e){if(clearAttributes(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!(8&(this.flags|e.flags))}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,n,i,o){return!(r&&(!(r instanceof MarkView&&r.mark.eq(this.mark))||e&&i<=0||t<this.length&&o<=0)||(mergeChildrenInto(this,e,t,r?r.children.slice():[],i-1,o-1),this.markDirty(),0))}split(e){let t=[],r=0,n=-1,i=0;for(let s of this.children){let o=r+s.length;o>e&&t.push(r<e?s.split(e-r):s),n<0&&r>=e&&(n=i),r=o,i++}let o=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new MarkView(this.mark,t,o)}domAtPos(e){return inlineDOMAtPos(this,e)}coordsAt(e,t){return coordsInChildren(this,e,t)}}function textCoords(e,t,r){let n=e.nodeValue.length;t>n&&(t=n);let i=t,o=t,s=0;0==t&&r<0||t==n&&r>=0?browser.chrome||browser.gecko||(t?(i--,s=1):o<n&&(o++,s=-1)):r<0?i--:o<n&&o++;let a=textRange(e,i,o).getClientRects();if(!a.length)return null;let l=a[(s?s<0:r>=0)?0:a.length-1];return browser.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,e=>e.width)||l),s?flattenRect(l,s<0):l||null}class WidgetView extends ContentView{static create(e,t,r){return new WidgetView(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=WidgetView.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,r,n,i,o){return!(r&&(!(r instanceof WidgetView&&this.widget.compare(r.widget))||e>0&&i<=0||t<this.length&&o<=0)||(this.length=e+(r?r.length:0)+(this.length-t),0))}become(e){return e instanceof WidgetView&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return Text.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,n=this.posAtStart;return r?r.slice(n,n+this.length):Text.empty}domAtPos(e){return(this.length?0==e:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let n=this.dom.getClientRects(),i=null;if(!n.length)return null;let o=this.side?this.side<0:e>0;for(let s=o?n.length-1:0;i=n[s],!(e>0?0==s:s==n.length-1||i.top<i.bottom);s+=o?-1:1);return flattenRect(i,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof WidgetBufferView&&e.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text.empty}get isHidden(){return!0}}function inlineDOMAtPos(e,t){let r=e.dom,{children:n}=e,i=0;for(let o=0;i<n.length;i++){let e=n[i],s=o+e.length;if(!(s==o&&e.getSide()<=0)){if(t>o&&t<s&&e.dom.parentNode==r)return e.domAtPos(t-o);if(t<=o)break;o=s}}for(let o=i;o>0;o--){let e=n[o-1];if(e.dom.parentNode==r)return e.domAtPos(e.length)}for(let o=i;o<n.length;o++){let e=n[o];if(e.dom.parentNode==r)return e.domAtPos(0)}return new DOMPos(r,0)}function joinInlineInto(e,t,r){let n,{children:i}=e;r>0&&t instanceof MarkView&&i.length&&(n=i[i.length-1])instanceof MarkView&&n.mark.eq(t.mark)?joinInlineInto(n,t.children[0],r-1):(i.push(t),t.setParent(e)),e.length+=t.length}function coordsInChildren(e,t,r){let n=null,i=-1,o=null,s=-1;!function e(t,a){for(let l=0,c=0;l<t.children.length&&c<=a;l++){let u=t.children[l],d=c+u.length;d>=a&&(u.children.length?e(u,a-c):(!o||o.isHidden&&(r>0||onSameLine(o,u)))&&(d>a||c==d&&u.getSide()>0)?(o=u,s=a-c):(c<a||c==d&&u.getSide()<0&&!u.isHidden)&&(n=u,i=a-c)),c=d}}(e,t);let a=(r<0?n:o)||n||o;return a?a.coordsAt(Math.max(0,a==n?i:s),r):fallbackRect(e)}function fallbackRect(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let r=clientRectsFor(t);return r[r.length-1]||null}function onSameLine(e,t){let r=e.coordsAt(0,1),n=t.coordsAt(0,1);return r&&n&&n.top<r.bottom}function combineAttrs(e,t){for(let r in e)"class"==r&&t.class?t.class+=" "+e.class:"style"==r&&t.style?t.style+=";"+e.style:t[r]=e[r];return t}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;const noAttrs$1=Object.create(null);function attrsEq(e,t,r){if(e==t)return!0;e||(e=noAttrs$1),t||(t=noAttrs$1);let n=Object.keys(e),i=Object.keys(t);if(n.length-(r&&n.indexOf(r)>-1?1:0)!=i.length-(r&&i.indexOf(r)>-1?1:0))return!1;for(let o of n)if(o!=r&&(-1==i.indexOf(o)||e[o]!==t[o]))return!1;return!0}function updateAttrs(e,t,r){let n=!1;if(t)for(let i in t)r&&i in r||(n=!0,"style"==i?e.style.cssText="":e.removeAttribute(i));if(r)for(let i in r)t&&t[i]==r[i]||(n=!0,"style"==i?e.style.cssText=r[i]:e.setAttribute(i,r[i]));return n}function getAttrs$1(e){let t=Object.create(null);for(let r=0;r<e.attributes.length;r++){let n=e.attributes[r];t[n.name]=n.value}return t}class WidgetType{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var BlockType=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(e,t,r,n){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=n}get heightRelevant(){return!1}static mark(e){return new MarkDecoration(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new PointDecoration(e,t,t,r,e.widget||null,!1)}static replace(e){let t,r,n=!!e.block;if(e.isBlockGap)t=-5e8,r=4e8;else{let{start:i,end:o}=getInclusive(e,n);t=(i?n?-3e8:-1:5e8)-1,r=1+(o?n?2e8:1:-6e8)}return new PointDecoration(e,t,r,n,e.widget||null,!0)}static line(e){return new LineDecoration(e)}static set(e,t=!1){return RangeSet.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(e){let{start:t,end:r}=getInclusive(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof MarkDecoration&&this.tagName==e.tagName&&(this.class||(null===(t=this.attrs)||void 0===t?void 0:t.class))==(e.class||(null===(r=e.attrs)||void 0===r?void 0:r.class))&&attrsEq(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof LineDecoration&&this.spec.class==e.spec.class&&attrsEq(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore,LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(e,t,r,n,i,o){super(t,r,i,e),this.block=n,this.isReplace=o,this.mapMode=n?t<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof PointDecoration&&widgetsEq(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function getInclusive(e,t=!1){let{inclusiveStart:r,inclusiveEnd:n}=e;return null==r&&(r=e.inclusive),null==n&&(n=e.inclusive),{start:null!=r?r:t,end:null!=n?n:t}}function widgetsEq(e,t){return e==t||!!(e&&t&&e.compare(t))}function addRange(e,t,r,n=0){let i=r.length-1;i>=0&&r[i]+n>=e?r[i]=Math.max(r[i],t):r.push(e,t)}PointDecoration.prototype.point=!0;class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,n,i,o){if(r){if(!(r instanceof LineView))return!1;this.dom||r.transferDOM(this)}return n&&this.setDeco(r?r.attrs:null),mergeChildrenInto(this,e,t,r?r.children.slice():[],i,o),!0}split(e){let t=new LineView;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:r,off:n}=this.childPos(e);n&&(t.append(this.children[r].split(n),0),this.children[r].merge(n,this.children[r].length,null,!1,0,0),r++);for(let i=r;i<this.children.length;i++)t.append(this.children[i],0);for(;r>0&&0==this.children[r-1].length;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){attrsEq(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){joinInlineInto(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=combineAttrs(t,this.attrs||{})),r&&(this.attrs=combineAttrs({class:r},this.attrs||{}))}domAtPos(e){return inlineDOMAtPos(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?4&this.flags&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let n=this.dom.lastChild;for(;n&&ContentView.get(n)instanceof MarkView;)n=n.lastChild;if(!(n&&this.length&&("BR"==n.nodeName||0!=(null===(r=ContentView.get(n))||void 0===r?void 0:r.isEditable)||browser.ios&&this.children.some(e=>e instanceof TextView)))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e,t=0;for(let r of this.children){if(!(r instanceof TextView)||/[^ -~]/.test(r.text))return null;let n=clientRectsFor(r.dom);if(1!=n.length)return null;t+=n[0].width,e=n[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null}coordsAt(e,t){let r=coordsInChildren(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:e}=this.parent.view.viewState,t=r.bottom-r.top;if(Math.abs(t-e.lineHeight)<2&&e.textHeight<t){let n=(t-e.textHeight)/2;return{top:r.top+n,bottom:r.bottom-n,left:r.left,right:r.left}}}return r}become(e){return e instanceof LineView&&0==this.children.length&&0==e.children.length&&attrsEq(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let r=0,n=0;r<e.children.length;r++){let i=e.children[r],o=n+i.length;if(o>=t){if(i instanceof LineView)return i;if(o>t)break}n=o+i.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(e,t,r){super(),this.widget=e,this.length=t,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,n,i,o){return!(r&&(!(r instanceof BlockWidgetView&&this.widget.compare(r.widget))||e>0&&i<=0||t<this.length&&o<=0)||(this.length=e+(r?r.length:0)+(this.length-t),0))}domAtPos(e){return 0==e?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new BlockWidgetView(this.widget,t,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return noChildren}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(e){return e instanceof BlockWidgetView&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)||(this.widget instanceof BlockGapWidget?null:flattenRect(this.dom.getBoundingClientRect(),this.length?0==e:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:r}=this.deco;return t!=r&&(e<0?t<0:r>0)}}class BlockGapWidget extends WidgetType{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ContentBuilder{constructor(e,t,r,n){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof BlockWidgetView&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||e&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView||this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:r,done:n}=this.cursor.next(this.skip);if(this.skip=0,n)throw new Error("Ran out of text content when drawing inline views");if(r){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=t,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e),i=Math.min(n,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=n<=i?0:t.length}}span(e,t,r,n){this.buildText(t-e,r,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,r,n,i,o){if(this.disallowBlockEffectsFor[o]&&r instanceof PointDecoration){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=t-e;if(r instanceof PointDecoration)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(r.widget||NullWidget.block,s,r));else{let o=WidgetView.create(r.widget||NullWidget.inline,s,s?0:r.startSide),a=this.atCursorPos&&!o.isEditable&&i<=n.length&&(e<t||r.startSide>0),l=!o.isEditable&&(e<t||i>n.length||r.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||o.isEditable||(this.pendingBuffer=0),this.flushBuffer(n),a&&(c.append(wrapMarks(new WidgetBufferView(1),n),i),i=n.length+Math.max(0,i-n.length)),c.append(wrapMarks(o,n),i),this.atCursorPos=l,this.pendingBuffer=l?e<t||i>n.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=n.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=i)}static build(e,t,r,n,i){let o=new ContentBuilder(e,t,r,i);return o.openEnd=RangeSet.spans(n,t,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function wrapMarks(e,t){for(let r of t)e=new MarkView(r,[e],e.length);return e}class NullWidget extends WidgetType{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}NullWidget.inline=new NullWidget("span"),NullWidget.block=new NullWidget("div");var Direction=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(e){let t=[];for(let r=0;r<e.length;r++)t.push(1<<+e[r]);return t}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),r=e.charCodeAt(1);Brackets[t]=r,Brackets[r]=-t}function charType(e){return e<=247?LowTypes[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?ArabicTypes[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,n){let i=-1;for(let o=0;o<e.length;o++){let s=e[o];if(s.from<=t&&s.to>=t){if(s.level==r)return o;(i<0||(0!=n?n<0?s.from<t:s.to>t:e[i].level>s.level))&&(i=o)}}if(i<0)throw new RangeError("Index out of range");return i}}function isolatesEq(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let n=e[r],i=t[r];if(n.from!=i.from||n.to!=i.to||n.direction!=i.direction||!isolatesEq(n.inner,i.inner))return!1}return!0}const types=[];function computeCharTypes(e,t,r,n,i){for(let o=0;o<=n.length;o++){let s=o?n[o-1].to:t,a=o<n.length?n[o].from:r,l=o?256:i;for(let t=s,r=l,n=l;t<a;t++){let i=charType(e.charCodeAt(t));512==i?i=r:8==i&&4==n&&(i=16),types[t]=4==i?2:i,7&i&&(n=i),r=i}for(let e=s,t=l,n=l;e<a;e++){let i=types[e];if(128==i)e<a-1&&t==types[e+1]&&24&t?i=types[e]=t:types[e]=256;else if(64==i){let i=e+1;for(;i<a&&64==types[i];)i++;let o=e&&8==t||i<r&&8==types[i]?1==n?1:8:256;for(let t=e;t<i;t++)types[t]=o;e=i-1}else 8==i&&1==n&&(types[e]=1);t=i,7&i&&(n=i)}}}function processBracketPairs(e,t,r,n,i){let o=1==i?2:1;for(let s=0,a=0,l=0;s<=n.length;s++){let c=s?n[s-1].to:t,u=s<n.length?n[s].from:r;for(let t,r,n,s=c;s<u;s++)if(r=Brackets[t=e.charCodeAt(s)])if(r<0){for(let e=a-3;e>=0;e-=3)if(BracketStack[e+1]==-r){let t=BracketStack[e+2],r=2&t?i:4&t?1&t?o:i:0;r&&(types[s]=types[BracketStack[e]]=r),a=e;break}}else{if(189==BracketStack.length)break;BracketStack[a++]=s,BracketStack[a++]=t,BracketStack[a++]=l}else if(2==(n=types[s])||1==n){let e=n==i;l=e?0:1;for(let t=a-3;t>=0;t-=3){let r=BracketStack[t+2];if(2&r)break;if(e)BracketStack[t+2]|=2;else{if(4&r)break;BracketStack[t+2]|=4}}}}}function processNeutrals(e,t,r,n){for(let i=0,o=n;i<=r.length;i++){let s=i?r[i-1].to:e,a=i<r.length?r[i].from:t;for(let l=s;l<a;){let s=types[l];if(256==s){let s=l+1;for(;;)if(s==a){if(i==r.length)break;s=r[i++].to,a=i<r.length?r[i].from:t}else{if(256!=types[s])break;s++}let c=1==o,u=c==(1==(s<t?types[s]:n))?c?1:2:n;for(let t=s,n=i,o=n?r[n-1].to:e;t>l;)t==o&&(t=r[--n].from,o=n?r[n-1].to:e),types[--t]=u;l=s}else o=s,l++}}}function emitSpans(e,t,r,n,i,o,s){let a=n%2?2:1;if(n%2==i%2)for(let l=t,c=0;l<r;){let t=!0,u=!1;if(c==o.length||l<o[c].from){let e=types[l];e!=a&&(t=!1,u=16==e)}let d=t||1!=a?null:[],p=t?n:n+1,h=l;e:for(;;)if(c<o.length&&h==o[c].from){if(u)break e;let f=o[c];if(!t)for(let e=f.to,t=c+1;;){if(e==r)break e;if(!(t<o.length&&o[t].from==e)){if(types[e]==a)break e;break}e=o[t++].to}c++,d?d.push(f):(f.from>l&&s.push(new BidiSpan(l,f.from,p)),computeSectionOrder(e,f.direction==LTR!=!(p%2)?n+1:n,i,f.inner,f.from,f.to,s),l=f.to),h=f.to}else{if(h==r||(t?types[h]!=a:types[h]==a))break;h++}d?emitSpans(e,l,h,n+1,i,d,s):l<h&&s.push(new BidiSpan(l,h,p)),l=h}else for(let l=r,c=o.length;l>t;){let r=!0,u=!1;if(!c||l>o[c-1].to){let e=types[l-1];e!=a&&(r=!1,u=16==e)}let d=r||1!=a?null:[],p=r?n:n+1,h=l;e:for(;;)if(c&&h==o[c-1].to){if(u)break e;let f=o[--c];if(!r)for(let e=f.from,r=c;;){if(e==t)break e;if(!r||o[r-1].to!=e){if(types[e-1]==a)break e;break}e=o[--r].from}d?d.push(f):(f.to<l&&s.push(new BidiSpan(f.to,l,p)),computeSectionOrder(e,f.direction==LTR!=!(p%2)?n+1:n,i,f.inner,f.from,f.to,s),l=f.from),h=f.from}else{if(h==t||(r?types[h-1]!=a:types[h-1]==a))break;h--}d?emitSpans(e,h,l,n+1,i,d,s):h<l&&s.push(new BidiSpan(h,l,p)),l=h}}function computeSectionOrder(e,t,r,n,i,o,s){let a=t%2?2:1;computeCharTypes(e,i,o,n,a),processBracketPairs(e,i,o,n,a),processNeutrals(i,o,n,a),emitSpans(e,i,o,t,r,n,s)}function computeOrder(e,t,r){if(!e)return[new BidiSpan(0,0,t==RTL?1:0)];if(t==LTR&&!r.length&&!BidiRE.test(e))return trivialOrder(e.length);if(r.length)for(;e.length>types.length;)types[types.length]=256;let n=[],i=t==LTR?0:1;return computeSectionOrder(e,i,i,r,0,e.length,n),n}function trivialOrder(e){return[new BidiSpan(0,e,0)]}let movedOver="";function moveVisually(e,t,r,n,i){var o;let s=n.head-e.from,a=BidiSpan.find(t,s,null!==(o=n.bidiLevel)&&void 0!==o?o:-1,n.assoc),l=t[a],c=l.side(i,r);if(s==c){let e=a+=i?1:-1;if(e<0||e>=t.length)return null;l=t[a=e],s=l.side(!i,r),c=l.side(i,r)}let u=findClusterBreak(e.text,s,l.forward(i,r));(u<l.from||u>l.to)&&(u=c),movedOver=e.text.slice(Math.min(s,u),Math.max(s,u));let d=a==(i?t.length-1:0)?null:t[a+(i?1:-1)];return d&&u==c&&d.level+(i?0:1)<l.level?EditorSelection.cursor(d.side(!i,r)+e.from,d.forward(i,r)?1:-1,d.level):EditorSelection.cursor(u+e.from,l.forward(i,r)?-1:1,l.level)}function autoDirection(e,t,r){for(let n=t;n<r;n++){let t=charType(e.charCodeAt(n));if(1==t)return LTR;if(2==t||4==t)return RTL}return LTR}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler=Facet.define(),focusChangeEffect=Facet.define(),clipboardInputFilter=Facet.define(),clipboardOutputFilter=Facet.define(),perLineTextDirection=Facet.define({combine:e=>e.some(e=>e)}),nativeSelectionHidden=Facet.define({combine:e=>e.some(e=>e)}),scrollHandler=Facet.define();class ScrollTarget{constructor(e,t="nearest",r="nearest",n=5,i=5,o=!1){this.range=e,this.y=t,this.x=r,this.yMargin=n,this.xMargin=i,this.isSnapshot=o}map(e){return e.empty?this:new ScrollTarget(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ScrollTarget(EditorSelection.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView$1=StateEffect.define({map:(e,t)=>e.map(t)}),setEditContextFormatting=StateEffect.define();function logException(e,t,r){let n=e.facet(exceptionSink);n.length?n[0](t):window.onerror&&window.onerror(String(t),r,void 0,void 0,t)}const editable=Facet.define({combine:e=>!e.length||e[0]});let nextPluginID=0;const viewPlugin=Facet.define({combine:e=>e.filter((t,r)=>{for(let n=0;n<r;n++)if(e[n].plugin==t.plugin)return!1;return!0})});class ViewPlugin{constructor(e,t,r,n,i){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=n,this.baseExtensions=i(this),this.extension=this.baseExtensions.concat(viewPlugin.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(viewPlugin.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:r,eventObservers:n,provide:i,decorations:o}=t||{};return new ViewPlugin(nextPluginID++,e,r,n,e=>{let t=[];return o&&t.push(decorations.of(t=>{let r=t.plugin(e);return r?o(r):Decoration.none})),i&&t.push(i(e)),t})}static fromClass(e,t){return ViewPlugin.define((t,r)=>new e(t,r),t)}}class PluginInstance{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(logException(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(_){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){logException(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(r){logException(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),outerDecorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(e,t){let r=e.state.facet(bidiIsolatedRanges);if(!r.length)return r;let n=r.map(t=>t instanceof Function?t(e):t),i=[];return RangeSet.spans(n,t.from,t.to,{point(){},span(e,r,n,o){let s=e-t.from,a=r-t.from,l=i;for(let i=n.length-1;i>=0;i--,o--){let e,r=n[i].spec.bidiIsolate;if(null==r&&(r=autoDirection(t.text,s,a)),o>0&&l.length&&(e=l[l.length-1]).to==s&&e.direction==r)e.to=a,l=e.inner;else{let e={from:s,to:a,direction:r,inner:[]};l.push(e),l=e.inner}}}}),i}const scrollMargins=Facet.define();function getScrollMargins(e){let t=0,r=0,n=0,i=0;for(let o of e.state.facet(scrollMargins)){let s=o(e);s&&(null!=s.left&&(t=Math.max(t,s.left)),null!=s.right&&(r=Math.max(r,s.right)),null!=s.top&&(n=Math.max(n,s.top)),null!=s.bottom&&(i=Math.max(i,s.bottom)))}return{left:t,right:r,top:n,bottom:i}}const styleModule=Facet.define();class ChangedRange{constructor(e,t,r,n){this.fromA=e,this.toA=t,this.fromB=r,this.toB=n}join(e){return new ChangedRange(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>r.toA)){if(n.toA<r.fromA)break;r=r.join(n),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(0==t.length)return e;let r=[];for(let n=0,i=0,o=0,s=0;;n++){let a=n==e.length?null:e[n],l=o-s,c=a?a.fromB:1e9;for(;i<t.length&&t[i]<c;){let e=t[i],n=t[i+1],o=Math.max(s,e),a=Math.min(c,n);if(o<=a&&new ChangedRange(o+l,a+l,o,a).addToSet(r),n>c)break;i+=2}if(!a)return r;new ChangedRange(a.fromA,a.toA,a.fromB,a.toB).addToSet(r),o=a.toA,s=a.toB}}}class ViewUpdate{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let i of r)this.changes=this.changes.compose(i.changes);let n=[];this.changes.iterChangedRanges((e,t,r,i)=>n.push(new ChangedRange(e,t,r,i))),this.changedRanges=n}static create(e,t,r){return new ViewUpdate(e,t,r)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Decoration.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let n=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(t=this.domChanged)||void 0===t?void 0:t.newSel)?n=this.domChanged.newSel.head:touchesComposition(e.changes,this.hasComposition)||e.selectionSet||(n=e.state.selection.main.head));let i=n>-1?findCompositionRange(this.view,e.changes,n):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:t,to:n}=this.hasComposition;r=new ChangedRange(t,n,e.changes.mapPos(t,-1),e.changes.mapPos(n,1)).addToSet(r.slice())}this.hasComposition=i?{from:i.range.fromB,to:i.range.toB}:null,(browser.ie||browser.chrome)&&!i&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=findChangedDeco(this.decorations,this.updateDeco(),e.changes);return r=ChangedRange.extendWithRanges(r,o),!!(7&this.flags||0!=r.length)&&(this.updateInner(r,e.startState.doc.length,i),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=browser.chrome||browser.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e),this.flags&=-8,e&&(e.written||n.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(e=>e.flags&=-9);let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof BlockWidgetView&&o.widget instanceof BlockGapWidget&&i.push(o.dom);n.updateGaps(i)}updateChildren(e,t,r){let n=r?r.range.addToSet(e.slice()):e,i=this.childCursor(t);for(let o=n.length-1;;o--){let e=o>=0?n[o]:null;if(!e)break;let t,s,a,l,{fromA:c,toA:u,fromB:d,toB:p}=e;if(r&&r.range.fromB<p&&r.range.toB>d){let e=ContentBuilder.build(this.view.state.doc,d,r.range.fromB,this.decorations,this.dynamicDecorationMap),n=ContentBuilder.build(this.view.state.doc,r.range.toB,p,this.decorations,this.dynamicDecorationMap);s=e.breakAtStart,a=e.openStart,l=n.openEnd;let i=this.compositionView(r);n.breakAtStart?i.breakAfter=1:n.content.length&&i.merge(i.length,i.length,n.content[0],!1,n.openStart,0)&&(i.breakAfter=n.content[0].breakAfter,n.content.shift()),e.content.length&&i.merge(0,0,e.content[e.content.length-1],!0,0,e.openEnd)&&e.content.pop(),t=e.content.concat(i).concat(n.content)}else({content:t,breakAtStart:s,openStart:a,openEnd:l}=ContentBuilder.build(this.view.state.doc,d,p,this.decorations,this.dynamicDecorationMap));let{i:h,off:f}=i.findPos(u,1),{i:m,off:g}=i.findPos(c,-1);replaceRange(this,m,g,h,f,t,s,a,l)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let e of t.effects)e.is(setEditContextFormatting)&&(this.editContextFormatting=e.value)}compositionView(e){let t=new TextView(e.text.nodeValue);t.flags|=8;for(let{deco:n}of e.marks)t=new MarkView(n,[t],t.length);let r=new LineView;return r.append(t,0),r}fixCompositionDOM(e){let t=(e,t)=>{t.flags|=8|(t.children.some(e=>7&e.flags)?1:0),this.markedForComposition.add(t);let r=ContentView.get(e);r&&r!=t&&(r.dom=null),t.setDOM(e)},r=this.childPos(e.range.fromB,1),n=this.children[r.i];t(e.line,n);for(let i=e.marks.length-1;i>=-1;i--)r=n.childPos(r.off,1),n=n.children[r.i],t(i>=0?e.marks[i].node:e.text,n)}updateSelection(e=!1,t=!1){!e&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let r=this.view.root.activeElement,n=r==this.dom,i=!n&&!(this.view.state.facet(editable)||this.dom.tabIndex>-1)&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(n||t||i))return;let o=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(s.anchor)),l=s.empty?a:this.moveToLine(this.domAtPos(s.head));if(browser.gecko&&s.empty&&!this.hasComposition&&betweenUneditable(a)){let e=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(e,a.node.childNodes[a.offset]||null)),a=l=new DOMPos(e,0),o=!0}let c=this.view.observer.selectionRange;!o&&c.focusNode&&(isEquivalentPosition(a.node,a.offset,c.anchorNode,c.anchorOffset)&&isEquivalentPosition(l.node,l.offset,c.focusNode,c.focusOffset)||this.suppressWidgetCursorChange(c,s))||(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(c.focusNode)&&inUneditable(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=getSelection$1(this.view.root);if(e)if(s.empty){if(browser.gecko){let e=nextToUneditable(a.node,a.offset);if(e&&3!=e){let t=(1==e?textNodeBefore:textNodeAfter)(a.node,a.offset);t&&(a=new DOMPos(t.node,t.offset))}}e.collapse(a.node,a.offset),null!=s.bidiLevel&&void 0!==e.caretBidiLevel&&(e.caretBidiLevel=s.bidiLevel)}else if(e.extend){e.collapse(a.node,a.offset);try{e.extend(l.node,l.offset)}catch(_){}}else{let t=document.createRange();s.anchor>s.head&&([a,l]=[l,a]),t.setEnd(l.node,l.offset),t.setStart(a.node,a.offset),e.removeAllRanges(),e.addRange(t)}i&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(a,l)),this.impreciseAnchor=a.precise?null:new DOMPos(c.anchorNode,c.anchorOffset),this.impreciseHead=l.precise?null:new DOMPos(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&isEquivalentPosition(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=getSelection$1(e.root),{anchorNode:n,anchorOffset:i}=e.observer.selectionRange;if(!(r&&t.empty&&t.assoc&&r.modify))return;let o=LineView.find(this,t.head);if(!o)return;let s=o.posAtStart;if(t.head==s||t.head==s+o.length)return;let a=this.coordsAt(t.head,-1),l=this.coordsAt(t.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(t.head+t.assoc);r.collapse(c.node,c.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&r.collapse(n,i)}moveToLine(e){let t,r=this.dom;if(e.node!=r)return e;for(let n=e.offset;!t&&n<r.childNodes.length;n++){let e=ContentView.get(r.childNodes[n]);e instanceof LineView&&(t=e.domAtPos(0))}for(let n=e.offset-1;!t&&n>=0;n--){let e=ContentView.get(r.childNodes[n]);e instanceof LineView&&(t=e.domAtPos(e.length))}return t?new DOMPos(t.node,t.offset,!0):e}nearest(e){for(let t=e;t;){let e=ContentView.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(r<e.length||e instanceof LineView)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){let r=null,n=0;for(let i=this.length,o=this.children.length-1;o>=0;o--){let s=this.children[o],a=i-s.breakAfter,l=a-s.length;if(a<e)break;if(l<=e&&(l<e||s.covers(-1))&&(a>e||s.covers(1))&&(!r||s instanceof LineView&&!(r instanceof LineView&&t>=0)))r=s,n=l;else if(r&&l==e&&a==e&&s instanceof BlockWidgetView&&Math.abs(t)<2){if(s.deco.startSide<0)break;o&&(r=null)}i=l}return r?r.coordsAt(e-n,t):null}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),n=this.children[t];if(!(n instanceof LineView))return null;for(;n.children.length;){let{i:e,off:t}=n.childPos(r,1);for(;;e++){if(e==n.children.length)return null;if((n=n.children[e]).length)break}r=t}if(!(n instanceof TextView))return null;let i=findClusterBreak(n.text,r);if(i==r)return null;let o=textRange(n.dom,r,i).getClientRects();for(let s=0;s<o.length;s++){let e=o[s];if(s==o.length-1||e.top<e.bottom&&e.left<e.right)return e}return null}measureVisibleLineHeights(e){let t=[],{from:r,to:n}=e,i=this.view.contentDOM.clientWidth,o=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==Direction.LTR;for(let l=0,c=0;c<this.children.length;c++){let e=this.children[c],u=l+e.length;if(u>n)break;if(l>=r){let r=e.dom.getBoundingClientRect();if(t.push(r.height),o){let t=e.dom.lastChild,n=t?clientRectsFor(t):[];if(n.length){let e=n[n.length-1],t=a?e.right-r.left:r.right-e.left;t>s&&(s=t,this.minWidth=i,this.minWidthFrom=l,this.minWidthTo=u)}}}l=u+e.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?Direction.RTL:Direction.LTR}measureTextSize(){for(let i of this.children)if(i instanceof LineView){let e=i.measureTextSize();if(e)return e}let e,t,r,n=document.createElement("div");return n.className="cm-line",n.style.width="99999px",n.style.position="absolute",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(n);let i=clientRectsFor(n.firstChild)[0];e=n.getBoundingClientRect().height,t=i?i.width/27:7,r=i?i.height:e,n.remove()}),{lineHeight:e,charWidth:t,textHeight:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new ChildCursor(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,n=0;;n++){let i=n==t.viewports.length?null:t.viewports[n],o=i?i.from-1:this.length;if(o>r){let n=(t.lineBlockAt(o).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(Decoration.replace({widget:new BlockGapWidget(n),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!i)break;r=i.to+1}return Decoration.set(e)}updateDeco(){let e=1,t=this.view.state.facet(decorations).map(t=>(this.dynamicDecorationMap[e++]="function"==typeof t)?t(this.view):t),r=!1,n=this.view.state.facet(outerDecorations).map((e,t)=>{let n="function"==typeof e;return n&&(r=!0),n?e(this.view):e});for(n.length&&(this.dynamicDecorationMap[e++]=r,t.push(RangeSet.join(n))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let t=this.view.viewState.lineBlockAt(e.range.head);return this.view.scrollDOM.scrollTop=t.top-e.yMargin,void(this.view.scrollDOM.scrollLeft=e.xMargin)}for(let c of this.view.state.facet(scrollHandler))try{if(c(this.view,e.range,e))return!0}catch(l){logException(this.view.state,l,"scroll handler")}let t,{range:r}=e,n=this.coordsAt(r.head,r.empty?r.assoc:r.head>r.anchor?-1:1);if(!n)return;!r.empty&&(t=this.coordsAt(r.anchor,r.anchor>r.head?-1:1))&&(n={left:Math.min(n.left,t.left),top:Math.min(n.top,t.top),right:Math.max(n.right,t.right),bottom:Math.max(n.bottom,t.bottom)});let i=getScrollMargins(this.view),o={left:n.left-i.left,top:n.top-i.top,right:n.right+i.right,bottom:n.bottom+i.bottom},{offsetWidth:s,offsetHeight:a}=this.view.scrollDOM;scrollRectIntoView(this.view.scrollDOM,o,r.head<r.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,s),-s),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Direction.LTR)}}function betweenUneditable(e){return 1==e.node.nodeType&&e.node.firstChild&&(0==e.offset||"false"==e.node.childNodes[e.offset-1].contentEditable)&&(e.offset==e.node.childNodes.length||"false"==e.node.childNodes[e.offset].contentEditable)}function findCompositionNode(e,t){let r=e.observer.selectionRange;if(!r.focusNode)return null;let n=textNodeBefore(r.focusNode,r.focusOffset),i=textNodeAfter(r.focusNode,r.focusOffset),o=n||i;if(i&&n&&i.node!=n.node){let t=ContentView.get(i.node);if(!t||t instanceof TextView&&t.text!=i.node.nodeValue)o=i;else if(e.docView.lastCompositionAfterCursor){let e=ContentView.get(n.node);!e||e instanceof TextView&&e.text!=n.node.nodeValue||(o=i)}}if(e.docView.lastCompositionAfterCursor=o!=n,!o)return null;let s=t-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}function findCompositionRange(e,t,r){let n=findCompositionNode(e,r);if(!n)return null;let{node:i,from:o,to:s}=n,a=i.nodeValue;if(/[\n\r]/.test(a))return null;if(e.state.doc.sliceString(n.from,n.to)!=a)return null;let l=t.invertedDesc,c=new ChangedRange(l.mapPos(o),l.mapPos(s),o,s),u=[];for(let d=i.parentNode;;d=d.parentNode){let t=ContentView.get(d);if(t instanceof MarkView)u.push({node:d,deco:t.mark});else{if(t instanceof LineView||"DIV"==d.nodeName&&d.parentNode==e.contentDOM)return{range:c,text:i,marks:u,line:d};if(d==e.contentDOM)return null;u.push({node:d,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs$1(d),tagName:d.tagName.toLowerCase()})})}}}function nextToUneditable(e,t){return 1!=e.nodeType?0:(t&&"false"==e.childNodes[t-1].contentEditable?1:0)|(t<e.childNodes.length&&"false"==e.childNodes[t].contentEditable?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange(e,t){addRange(e,t,this.changes)}comparePoint(e,t){addRange(e,t,this.changes)}boundChange(e){addRange(e,e,this.changes)}};function findChangedDeco(e,t,r){let n=new DecorationComparator$1;return RangeSet.compare(e,t,r,n),n.changes}function inUneditable(e,t){for(let r=e;r&&r!=t;r=r.assignedSlot||r.parentNode)if(1==r.nodeType&&"false"==r.contentEditable)return!0;return!1}function touchesComposition(e,t){let r=!1;return t&&e.iterChangedRanges((e,n)=>{e<t.to&&n>t.from&&(r=!0)}),r}function groupAt(e,t,r=1){let n=e.charCategorizer(t),i=e.doc.lineAt(t),o=t-i.from;if(0==i.length)return EditorSelection.cursor(t);0==o?r=1:o==i.length&&(r=-1);let s=o,a=o;r<0?s=findClusterBreak(i.text,o,!1):a=findClusterBreak(i.text,o);let l=n(i.text.slice(s,a));for(;s>0;){let e=findClusterBreak(i.text,s,!1);if(n(i.text.slice(e,s))!=l)break;s=e}for(;a<i.length;){let e=findClusterBreak(i.text,a);if(n(i.text.slice(a,e))!=l)break;a=e}return EditorSelection.range(s+i.from,a+i.from)}function getdx(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function getdy(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function yOverlap(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function upTop(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function upBot(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function domPosAtCoords(e,t,r){let n,i,o,s,a,l,c,u,d=!1;for(let h=e.firstChild;h;h=h.nextSibling){let e=clientRectsFor(h);for(let p=0;p<e.length;p++){let f=e[p];i&&yOverlap(i,f)&&(f=upTop(upBot(f,i.bottom),i.top));let m=getdx(t,f),g=getdy(r,f);if(0==m&&0==g)return 3==h.nodeType?domPosInText(h,t,r):domPosAtCoords(h,t,r);(!n||s>g||s==g&&o>m)&&(n=h,i=f,o=m,s=g,d=!m||(t<f.left?p>0:p<e.length-1)),0==m?r>f.bottom&&(!c||c.bottom<f.bottom)?(a=h,c=f):r<f.top&&(!u||u.top>f.top)&&(l=h,u=f):c&&yOverlap(c,f)?c=upBot(c,f.bottom):u&&yOverlap(u,f)&&(u=upTop(u,f.top))}}if(c&&c.bottom>=r?(n=a,i=c):u&&u.top<=r&&(n=l,i=u),!n)return{node:e,offset:0};let p=Math.max(i.left,Math.min(i.right,t));return 3==n.nodeType?domPosInText(n,p,r):d&&"false"!=n.contentEditable?domPosAtCoords(n,p,r):{node:e,offset:Array.prototype.indexOf.call(e.childNodes,n)+(t>=(i.left+i.right)/2?1:0)}}function domPosInText(e,t,r){let n=e.nodeValue.length,i=-1,o=1e9,s=0;for(let a=0;a<n;a++){let n=textRange(e,a,a+1).getClientRects();for(let l=0;l<n.length;l++){let c=n[l];if(c.top==c.bottom)continue;s||(s=t-c.left);let u=(c.top>r?c.top-r:r-c.bottom)-1;if(c.left-1<=t&&c.right+1>=t&&u<o){let r=t>=(c.left+c.right)/2,n=r;if((browser.chrome||browser.gecko)&&textRange(e,a).getBoundingClientRect().left==c.right&&(n=!r),u<=0)return{node:e,offset:a+(n?1:0)};i=a+(n?1:0),o=u}}}return{node:e,offset:i>-1?i:s>0?e.nodeValue.length:0}}function posAtCoords(e,t,r,n=-1){var i,o;let s,a=e.contentDOM.getBoundingClientRect(),l=a.top+e.viewState.paddingTop,{docHeight:c}=e.viewState,{x:u,y:d}=t,p=d-l;if(p<0)return 0;if(p>c)return e.state.doc.length;for(let E=e.viewState.heightOracle.textHeight/2,O=!1;s=e.elementAtHeight(p),s.type!=BlockType.Text;)for(;p=n>0?s.bottom+E:s.top-E,!(p>=0&&p<=c);){if(O)return r?null:0;O=!0,n=-n}d=l+p;let h=s.from;if(h<e.viewport.from)return 0==e.viewport.from?0:r?null:posAtCoordsImprecise(e,a,s,u,d);if(h>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:r?null:posAtCoordsImprecise(e,a,s,u,d);let f=e.dom.ownerDocument,m=e.root.elementFromPoint?e.root:f,g=m.elementFromPoint(u,d);g&&!e.contentDOM.contains(g)&&(g=null),g||(u=Math.max(a.left+1,Math.min(a.right-1,u)),g=m.elementFromPoint(u,d),g&&!e.contentDOM.contains(g)&&(g=null));let b,y=-1;if(g&&0!=(null===(i=e.docView.nearest(g))||void 0===i?void 0:i.isEditable)){if(f.caretPositionFromPoint){let e=f.caretPositionFromPoint(u,d);e&&({offsetNode:b,offset:y}=e)}else if(f.caretRangeFromPoint){let e=f.caretRangeFromPoint(u,d);e&&({startContainer:b,startOffset:y}=e)}b&&(!e.contentDOM.contains(b)||browser.safari&&isSuspiciousSafariCaretResult(b,y,u)||browser.chrome&&isSuspiciousChromeCaretResult(b,y,u))&&(b=void 0),b&&(y=Math.min(maxOffset(b),y))}if(!b||!e.docView.dom.contains(b)){let t=LineView.find(e.docView,h);if(!t)return p>s.top+s.height/2?s.to:s.from;({node:b,offset:y}=domPosAtCoords(t.dom,u,d))}let T=e.docView.nearest(b);if(!T)return null;if(T.isWidget&&1==(null===(o=T.dom)||void 0===o?void 0:o.nodeType)){let e=T.dom.getBoundingClientRect();return t.y<e.top||t.y<=e.bottom&&t.x<=(e.left+e.right)/2?T.posAtStart:T.posAtEnd}return T.localPosFromDOM(b,y)+T.posAtStart}function posAtCoordsImprecise(e,t,r,n,i){let o=Math.round((n-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&r.height>1.5*e.defaultLineHeight){let t=e.viewState.heightOracle.textHeight;o+=Math.floor((i-r.top-.5*(e.defaultLineHeight-t))/t)*e.viewState.heightOracle.lineLength}let s=e.state.sliceDoc(r.from,r.to);return r.from+findColumn(s,o,e.state.tabSize)}function isEndOfLineBefore(e,t,r){let n,i=e;if(3!=e.nodeType||t!=(n=e.nodeValue.length))return!1;for(;;){let e=i.nextSibling;if(e){if("BR"==e.nodeName)break;return!1}{let e=i.parentNode;if(!e||"DIV"==e.nodeName)break;i=e}}return textRange(e,n-1,n).getBoundingClientRect().right>r}function isSuspiciousSafariCaretResult(e,t,r){return isEndOfLineBefore(e,t,r)}function isSuspiciousChromeCaretResult(e,t,r){if(0!=t)return isEndOfLineBefore(e,t,r);for(let n=e;;){let e=n.parentNode;if(!e||1!=e.nodeType||e.firstChild!=n)return!1;if(e.classList.contains("cm-line"))break;n=e}return r-(1==e.nodeType?e.getBoundingClientRect():textRange(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect()).left>5}function blockAt(e,t,r){let n=e.lineBlockAt(t);if(Array.isArray(n.type)){let e;for(let i of n.type){if(i.from>t)break;if(!(i.to<t)){if(i.from<t&&i.to>t)return i;e&&(i.type!=BlockType.Text||e.type==i.type&&!(r<0?i.from<t:i.to>t))||(e=i)}}return e||n}return n}function moveToLineBoundary(e,t,r,n){let i=blockAt(e,t.head,t.assoc||-1),o=n&&i.type==BlockType.Text&&(e.lineWrapping||i.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>i.from?t.head-1:t.head):null;if(o){let t=e.dom.getBoundingClientRect(),n=e.textDirectionAt(i.from),s=e.posAtCoords({x:r==(n==Direction.LTR)?t.right-1:t.left+1,y:(o.top+o.bottom)/2});if(null!=s)return EditorSelection.cursor(s,r?-1:1)}return EditorSelection.cursor(r?i.to:i.from,r?-1:1)}function moveByChar(e,t,r,n){let i=e.state.doc.lineAt(t.head),o=e.bidiSpans(i),s=e.textDirectionAt(i.from);for(let a=t,l=null;;){let t=moveVisually(i,o,s,a,r),c=movedOver;if(!t){if(i.number==(r?e.state.doc.lines:1))return a;c="\n",i=e.state.doc.line(i.number+(r?1:-1)),o=e.bidiSpans(i),t=e.visualLineSide(i,!r)}if(l){if(!l(c))return a}else{if(!n)return t;l=n(c)}a=t}}function byGroup(e,t,r){let n=e.state.charCategorizer(t),i=n(r);return e=>{let t=n(e);return i==CharCategory.Space&&(i=t),i==t}}function moveVertically(e,t,r,n){let i=t.head,o=r?1:-1;if(i==(r?e.state.doc.length:0))return EditorSelection.cursor(i,t.assoc);let s,a=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(i,t.assoc||-1),u=e.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let t=e.viewState.lineBlockAt(i);null==a&&(a=Math.min(l.right-l.left,e.defaultCharacterWidth*(i-t.from))),s=(o<0?t.top:t.bottom)+u}let d=l.left+a,p=null!=n?n:e.viewState.heightOracle.textHeight>>1;for(let h=0;;h+=10){let t=s+(p+h)*o,r=posAtCoords(e,{x:d,y:t},!1,o);if(t<l.top||t>l.bottom||(o<0?r<i:r>i)){let n=e.docView.coordsForChar(r),i=!n||t<n.top?-1:1;return EditorSelection.cursor(r,i,void 0,a)}}}function skipAtomicRanges(e,t,r){for(;;){let n=0;for(let i of e)i.between(t-1,t+1,(e,i,o)=>{if(t>e&&t<i){let o=n||r||(t-e<i-t?-1:1);t=o<0?e:i,n=o}});if(!n)return t}}function skipAtomsForSelection(e,t){let r=null;for(let n=0;n<t.ranges.length;n++){let i=t.ranges[n],o=null;if(i.empty){let t=skipAtomicRanges(e,i.from,0);t!=i.from&&(o=EditorSelection.cursor(t,-1))}else{let t=skipAtomicRanges(e,i.from,-1),r=skipAtomicRanges(e,i.to,1);t==i.from&&r==i.to||(o=EditorSelection.range(i.from==i.anchor?t:r,i.from==i.head?t:r))}o&&(r||(r=t.ranges.slice()),r[n]=o)}return r?EditorSelection.create(r,t.mainIndex):t}function skipAtoms(e,t,r){let n=skipAtomicRanges(e.state.facet(atomicRanges).map(t=>t(e)),r.from,t.head>r.from?-1:1);return n==r.from?r:EditorSelection.cursor(n,n<r.from?1:-1)}const LineBreakPlaceholder="";class DOMReader{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(EditorState.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=LineBreakPlaceholder}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let n=e;;){this.findPointBefore(r,n);let e=this.text.length;this.readNode(n);let i=n.nextSibling;if(i==t)break;let o=ContentView.get(n),s=ContentView.get(i);(o&&s?o.breakAfter:(o?o.breakAfter:isBlockElement(n))||isBlockElement(i)&&("BR"!=n.nodeName||n.cmIgnore)&&this.text.length>e)&&!isEmptyToEnd(i,t)&&this.lineBreak(),n=i}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let i,o=-1,s=1;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,r),s=this.lineSeparator.length):(i=n.exec(t))&&(o=i.index,s=i[0].length),this.append(t.slice(r,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=s-1);r=o+s}}readNode(e){if(e.cmIgnore)return;let t=ContentView.get(e),r=t&&t.overrideDOMText;if(null!=r){this.findPointInside(e,r.length);for(let e=r.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(3==e.nodeType?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(isAtEnd(e,r.node,r.offset)?t:0))}}function isAtEnd(e,t,r){for(;;){if(!t||r<maxOffset(t))return!1;if(t==e)return!0;r=domIndex(t)+1,t=t.parentNode}}function isEmptyToEnd(e,t){let r;for(;e!=t&&e;e=e.nextSibling){let t=ContentView.get(e);if(!(null==t?void 0:t.isWidget)&&!e.cmIgnore)return!1;t&&(r||(r=[])).push(t)}if(r)for(let n of r){let e=n.overrideDOMText;if(null==e?void 0:e.length)return!1}return!0}class DOMPoint{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class DOMChange{constructor(e,t,r,n){this.typeOver=n,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:i,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let t=i||o?[]:selectionPoints(e),r=new DOMReader(t,e.state);r.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=r.text,this.newSel=selectionFromPoints(t,this.bounds.from)}else{let t=e.observer.selectionRange,r=i&&i.node==t.focusNode&&i.offset==t.focusOffset||!contains(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),n=o&&o.node==t.anchorNode&&o.offset==t.anchorOffset||!contains(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset),s=e.viewport;if((browser.ios||browser.chrome)&&e.state.selection.main.empty&&r!=n&&(s.from>0||s.to<e.state.doc.length)){let t=Math.min(r,n),i=Math.max(r,n),o=s.from-t,a=s.to-i;0!=o&&1!=o&&0!=t||0!=a&&-1!=a&&i!=e.state.doc.length||(r=0,n=e.state.doc.length)}this.newSel=EditorSelection.single(n,r)}}}function applyDOMChange(e,t){let r,{newSel:n}=t,i=e.state.selection.main,o=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:n,to:s}=t.bounds,a=i.from,l=null;(8===o||browser.android&&t.text.length<s-n)&&(a=i.to,l="end");let c=findDiff(e.state.doc.sliceString(n,s,LineBreakPlaceholder),t.text,a-n,l);c&&(browser.chrome&&13==o&&c.toB==c.from+2&&t.text.slice(c.from,c.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&c.toB--,r={from:n+c.from,to:n+c.toA,insert:Text.of(t.text.slice(c.from,c.toB).split(LineBreakPlaceholder))})}else n&&(!e.hasFocus&&e.state.facet(editable)||n.main.eq(i))&&(n=null);if(!r&&!n)return!1;if(!r&&t.typeOver&&!i.empty&&n&&n.main.empty?r={from:i.from,to:i.to,insert:e.state.doc.slice(i.from,i.to)}:(browser.mac||browser.android)&&r&&r.from==r.to&&r.from==i.head-1&&/^\. ?$/.test(r.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(n&&2==r.insert.length&&(n=EditorSelection.single(n.main.anchor-1,n.main.head-1)),r={from:r.from,to:r.to,insert:Text.of([r.insert.toString().replace("."," ")])}):r&&r.from>=i.from&&r.to<=i.to&&(r.from!=i.from||r.to!=i.to)&&i.to-i.from-(r.to-r.from)<=4?r={from:i.from,to:i.to,insert:e.state.doc.slice(i.from,r.from).append(r.insert).append(e.state.doc.slice(r.to,i.to))}:browser.chrome&&r&&r.from==r.to&&r.from==i.head&&"\n "==r.insert.toString()&&e.lineWrapping&&(n&&(n=EditorSelection.single(n.main.anchor-1,n.main.head-1)),r={from:i.from,to:i.to,insert:Text.of([" "])}),r)return applyDOMChangeInner(e,r,n,o);if(n&&!n.main.eq(i)){let t=!1,r="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),r=e.inputState.lastSelectionOrigin,"select.pointer"==r&&(n=skipAtomsForSelection(e.state.facet(atomicRanges).map(t=>t(e)),n))),e.dispatch({selection:n,scrollIntoView:t,userEvent:r}),!0}return!1}function applyDOMChangeInner(e,t,r,n=-1){if(browser.ios&&e.inputState.flushIOSKey(t))return!0;let i=e.state.selection.main;if(browser.android&&(t.to==i.to&&(t.from==i.from||t.from==i.from-1&&" "==e.state.sliceDoc(t.from,i.from))&&1==t.insert.length&&2==t.insert.lines&&dispatchKey(e.contentDOM,"Enter",13)||(t.from==i.from-1&&t.to==i.to&&0==t.insert.length||8==n&&t.insert.length<t.to-t.from&&t.to>i.head)&&dispatchKey(e.contentDOM,"Backspace",8)||t.from==i.from&&t.to==i.to+1&&0==t.insert.length&&dispatchKey(e.contentDOM,"Delete",46)))return!0;let o,s=t.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let a=()=>o||(o=applyDefaultInsert(e,t,r));return e.state.facet(inputHandler).some(r=>r(e,t.from,t.to,s,a))||e.dispatch(a()),!0}function applyDefaultInsert(e,t,r){let n,i=e.state,o=i.selection.main,s=-1;if(t.from==t.to&&t.from<o.from||t.from>o.to){let r=t.from<o.from?-1:1,n=r<0?o.from:o.to,a=skipAtomicRanges(i.facet(atomicRanges).map(t=>t(e)),n,r);t.from==a&&(s=a)}if(s>-1)n={changes:t,selection:EditorSelection.cursor(t.from+t.insert.length,-1)};else if(t.from>=o.from&&t.to<=o.to&&t.to-t.from>=(o.to-o.from)/3&&(!r||r.main.empty&&r.main.from==t.from+t.insert.length)&&e.inputState.composing<0){let r=o.from<t.from?i.sliceDoc(o.from,t.from):"",s=o.to>t.to?i.sliceDoc(t.to,o.to):"";n=i.replaceSelection(e.state.toText(r+t.insert.sliceString(0,void 0,e.state.lineBreak)+s))}else{let s=i.changes(t),a=r&&r.main.to<=s.newLength?r.main:void 0;if(i.selection.ranges.length>1&&e.inputState.composing>=0&&t.to<=o.to&&t.to>=o.to-10){let l,c=e.state.sliceDoc(t.from,t.to),u=r&&findCompositionNode(e,r.main.head);if(u){let e=t.insert.length-(t.to-t.from);l={from:u.from,to:u.to-e}}else l=e.state.doc.lineAt(o.head);let d=o.to-t.to,p=o.to-o.from;n=i.changeByRange(r=>{if(r.from==o.from&&r.to==o.to)return{changes:s,range:a||r.map(s)};let n=r.to-d,u=n-c.length;if(r.to-r.from!=p||e.state.sliceDoc(u,n)!=c||r.to>=l.from&&r.from<=l.to)return{range:r};let h=i.changes({from:u,to:n,insert:t.insert}),f=r.to-o.to;return{changes:h,range:a?EditorSelection.range(Math.max(0,a.anchor+f),Math.max(0,a.head+f)):r.map(h)}})}else n={changes:s,selection:a&&i.selection.replaceRange(a)}}let a="input.type";return(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,a+=".compose",e.inputState.compositionFirstChange&&(a+=".start",e.inputState.compositionFirstChange=!1)),i.update(n,{userEvent:a,scrollIntoView:!0})}function findDiff(e,t,r,n){let i=Math.min(e.length,t.length),o=0;for(;o<i&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==i&&e.length==t.length)return null;let s=e.length,a=t.length;for(;s>0&&a>0&&e.charCodeAt(s-1)==t.charCodeAt(a-1);)s--,a--;return"end"==n&&(r-=s+Math.max(0,o-Math.min(s,a))-o),s<o&&e.length<t.length?(o-=r<=o&&r>=s?o-r:0,a=o+(a-s),s=o):a<o&&(o-=r<=o&&r>=a?o-r:0,s=o+(s-a),a=o),{from:o,toA:s,toB:a}}function selectionPoints(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:o}=e.observer.selectionRange;return r&&(t.push(new DOMPoint(r,n)),i==r&&o==n||t.push(new DOMPoint(i,o))),t}function selectionFromPoints(e,t){if(0==e.length)return null;let r=e[0].pos,n=2==e.length?e[1].pos:r;return r>-1&&n>-1?EditorSelection.single(r+t,n+t):null}class InputState{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,browser.safari&&e.contentDOM.addEventListener("input",()=>null),browser.gecko&&firefoxCopyCutHack(e.contentDOM.ownerDocument)}handleEvent(e){eventBelongsToEditor(this.view,e)&&!this.ignoreDuringComposition(e)&&("keydown"==e.type&&this.keydown(e)||(0!=this.view.updateState?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e)))}runHandlers(e,t){let r=this.handlers[e];if(r){for(let e of r.observers)e(this.view,t);for(let e of r.handlers){if(t.defaultPrevented)break;if(e(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=computeHandlers(e),r=this.handlers,n=this.view.contentDOM;for(let i in t)if("scroll"!=i){let e=!t[i].handlers.length,o=r[i];o&&e!=!o.handlers.length&&(n.removeEventListener(i,this.handleEvent),o=null),o||n.addEventListener(i,this.handleEvent,{passive:e})}for(let i in r)"scroll"==i||t[i]||n.removeEventListener(i,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),9==e.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&27!=e.keyCode&&modifierCodes.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),browser.android&&browser.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return!browser.ios||e.synthetic||e.altKey||e.metaKey||!((t=PendingKeys.find(t=>t.keyCode==e.keyCode))&&!e.ctrlKey||EmacsyPendingKeys.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(229!=e.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0)}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&!("Enter"==t.key&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString()))&&(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!(!/^key/.test(e.type)||e.synthetic)&&(this.composing>0||!!(browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(e,t){return(r,n)=>{try{return t.call(e,n,r)}catch(i){logException(r.state,i)}}}function computeHandlers(e){let t=Object.create(null);function r(e){return t[e]||(t[e]={observers:[],handlers:[]})}for(let n of e){let e=n.spec,t=e&&e.plugin.domEventHandlers,i=e&&e.plugin.domEventObservers;if(t)for(let o in t){let e=t[o];e&&r(o).handlers.push(bindHandler(n.value,e))}if(i)for(let o in i){let e=i[o];e&&r(o).observers.push(bindHandler(n.value,e))}}for(let n in handlers)r(n).handlers.push(handlers[n]);for(let n in observers)r(n).observers.push(observers[n]);return t}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(e){return.7*Math.max(0,e)+8}function dist(e,t){return Math.max(Math.abs(e.clientX-t.clientX),Math.abs(e.clientY-t.clientY))}class MouseSelection{constructor(e,t,r,n){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=n,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=scrollableParents(e.contentDOM),this.atoms=e.state.facet(atomicRanges).map(t=>t(e));let i=e.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(e,t),this.dragging=!(!isInPrimarySelection(e,t)||1!=getClickType(t))&&null}start(e){!1===this.dragging&&this.select(e)}move(e){if(0==e.buttons)return this.destroy();if(this.dragging||null==this.dragging&&dist(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,r=0,n=0,i=0,o=this.view.win.innerWidth,s=this.view.win.innerHeight;this.scrollParents.x&&({left:n,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:i,bottom:s}=this.scrollParents.y.getBoundingClientRect());let a=getScrollMargins(this.view);e.clientX-a.left<=n+dragScrollMargin?t=-dragScrollSpeed(n-e.clientX):e.clientX+a.right>=o-dragScrollMargin&&(t=dragScrollSpeed(e.clientX-o)),e.clientY-a.top<=i+dragScrollMargin?r=-dragScrollSpeed(i-e.clientY):e.clientY+a.bottom>=s-dragScrollMargin&&(r=dragScrollSpeed(e.clientY-s)),this.setScrollSpeed(t,r)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),!1===this.dragging&&this.select(this.lastEvent)}select(e){let{view:t}=this,r=skipAtomsForSelection(this.atoms,this.style.get(e,this.extend,this.multiple));!this.mustSelect&&r.eq(t.state.selection,!1===this.dragging)||this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(e=>e.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(e,t){let r=e.state.facet(clickAddsSelectionRange);return r.length?r[0](t):browser.mac?t.metaKey:t.ctrlKey}function dragMovesSelection(e,t){let r=e.state.facet(dragMovesSelection$1);return r.length?r[0](t):browser.mac?!t.altKey:!t.ctrlKey}function isInPrimarySelection(e,t){let{main:r}=e.state.selection;if(r.empty)return!1;let n=getSelection$1(e.root);if(!n||0==n.rangeCount)return!0;let i=n.getRangeAt(0).getClientRects();for(let o=0;o<i.length;o++){let e=i[o];if(e.left<=t.clientX&&e.right>=t.clientX&&e.top<=t.clientY&&e.bottom>=t.clientY)return!0}return!1}function eventBelongsToEditor(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let r,n=t.target;n!=e.contentDOM;n=n.parentNode)if(!n||11==n.nodeType||(r=ContentView.get(n))&&r.ignoreEvent(t))return!1;return!0}const handlers=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(e){let t=e.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{e.focus(),r.remove(),doPaste(e,r.value)},50)}function textFilter(e,t,r){for(let n of e.facet(t))r=n(r,e);return r}function doPaste(e,t){t=textFilter(e.state,clipboardInputFilter,t);let r,{state:n}=e,i=1,o=n.toText(t),s=o.lines==n.selection.ranges.length;if(null!=lastLinewiseCopy&&n.selection.ranges.every(e=>e.empty)&&lastLinewiseCopy==o.toString()){let e=-1;r=n.changeByRange(r=>{let a=n.doc.lineAt(r.from);if(a.from==e)return{range:r};e=a.from;let l=n.toText((s?o.line(i++).text:t)+n.lineBreak);return{changes:{from:a.from,insert:l},range:EditorSelection.cursor(r.from+l.length)}})}else r=s?n.changeByRange(e=>{let t=o.line(i++);return{changes:{from:e.from,to:e.to,insert:t.text},range:EditorSelection.cursor(e.from+t.length)}}):n.replaceSelection(o);e.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}function rangeForClick(e,t,r,n){if(1==n)return EditorSelection.cursor(t,r);if(2==n)return groupAt(e.state,t,r);{let r=LineView.find(e.docView,t),n=e.state.doc.lineAt(r?r.posAtEnd:t),i=r?r.posAtStart:n.from,o=r?r.posAtEnd:n.to;return o<e.state.doc.length&&o==n.to&&o++,EditorSelection.range(i,o)}}observers.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft},handlers.keydown=(e,t)=>(e.inputState.setSelectionOrigin("select"),27==t.keyCode&&0!=e.inputState.tabFocusMode&&(e.inputState.tabFocusMode=Date.now()+2e3),!1),observers.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},observers.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},handlers.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let r=null;for(let n of e.state.facet(mouseSelectionStyle))if(r=n(e,t),r)break;if(r||0!=t.button||(r=basicMouseSelection(e,t)),r){let n=!e.hasFocus;e.inputState.startMouseSelection(new MouseSelection(e,t,r,n)),n&&e.observer.ignore(()=>{focusPreventScroll(e.contentDOM);let t=e.root.activeElement;t&&!t.contains(e.contentDOM)&&t.blur()});let i=e.inputState.mouseSelection;if(i)return i.start(t),!1===i.dragging}else e.inputState.setSelectionOrigin("select.pointer");return!1};let inside=(e,t,r)=>t>=r.top&&t<=r.bottom&&e>=r.left&&e<=r.right;function findPositionSide(e,t,r,n){let i=LineView.find(e.docView,t);if(!i)return 1;let o=t-i.posAtStart;if(0==o)return 1;if(o==i.length)return-1;let s=i.coordsAt(o,-1);if(s&&inside(r,n,s))return-1;let a=i.coordsAt(o,1);return a&&inside(r,n,a)?1:s&&s.bottom>=n?-1:1}function queryPos(e,t){let r=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:r,bias:findPositionSide(e,r,t.clientX,t.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(e){if(!BadMouseDetail)return e.detail;let t=lastMouseDown,r=lastMouseDownTime;return lastMouseDown=e,lastMouseDownTime=Date.now(),lastMouseDownCount=!t||r>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(e,t){let r=queryPos(e,t),n=getClickType(t),i=e.state.selection;return{update(e){e.docChanged&&(r.pos=e.changes.mapPos(r.pos),i=i.map(e.changes))},get(t,o,s){let a,l=queryPos(e,t),c=rangeForClick(e,l.pos,l.bias,n);if(r.pos!=l.pos&&!o){let t=rangeForClick(e,r.pos,r.bias,n),i=Math.min(t.from,c.from),o=Math.max(t.to,c.to);c=i<c.from?EditorSelection.range(i,o):EditorSelection.range(o,i)}return o?i.replaceRange(i.main.extend(c.from,c.to)):s&&1==n&&i.ranges.length>1&&(a=removeRangeAround(i,l.pos))?a:s?i.addRange(c):EditorSelection.create([c])}}}function removeRangeAround(e,t){for(let r=0;r<e.ranges.length;r++){let{from:n,to:i}=e.ranges[r];if(n<=t&&i>=t)return EditorSelection.create(e.ranges.slice(0,r).concat(e.ranges.slice(r+1)),e.mainIndex==r?0:e.mainIndex-(e.mainIndex>r?1:0))}return null}function dropText(e,t,r,n){if(!(r=textFilter(e.state,clipboardInputFilter,r)))return;let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:o}=e.inputState,s=n&&o&&dragMovesSelection(e,t)?{from:o.from,to:o.to}:null,a={from:i,insert:r},l=e.state.changes(s?[s,a]:a);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"}),e.inputState.draggedContent=null}function captureCopy(e,t){let r=e.dom.parentNode;if(!r)return;let n=r.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=t,n.focus(),n.selectionEnd=t.length,n.selectionStart=0,setTimeout(()=>{n.remove(),e.focus()},50)}function copiedRange(e){let t=[],r=[],n=!1;for(let i of e.selection.ranges)i.empty||(t.push(e.sliceDoc(i.from,i.to)),r.push(i));if(!t.length){let i=-1;for(let{from:n}of e.selection.ranges){let o=e.doc.lineAt(n);o.number>i&&(t.push(o.text),r.push({from:o.from,to:Math.min(e.doc.length,o.to+1)})),i=o.number}n=!0}return{text:textFilter(e,clipboardOutputFilter,t.join(e.lineBreak)),ranges:r,linewise:n}}handlers.dragstart=(e,t)=>{let{selection:{main:r}}=e.state;if(t.target.draggable){let n=e.docView.nearest(t.target);if(n&&n.isWidget){let e=n.posAtStart,t=e+n.length;(e>=r.to||t<=r.from)&&(r=EditorSelection.range(e,t))}}let{inputState:n}=e;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=r,t.dataTransfer&&(t.dataTransfer.setData("Text",textFilter(e.state,clipboardOutputFilter,e.state.sliceDoc(r.from,r.to))),t.dataTransfer.effectAllowed="copyMove"),!1},handlers.dragend=e=>(e.inputState.draggedContent=null,!1),handlers.drop=(e,t)=>{if(!t.dataTransfer)return!1;if(e.state.readOnly)return!0;let r=t.dataTransfer.files;if(r&&r.length){let n=Array(r.length),i=0,o=()=>{++i==r.length&&dropText(e,t,n.filter(e=>null!=e).join(e.state.lineBreak),!1)};for(let e=0;e<r.length;e++){let t=new FileReader;t.onerror=o,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(n[e]=t.result),o()},t.readAsText(r[e])}return!0}{let r=t.dataTransfer.getData("Text");if(r)return dropText(e,t,r,!0),!0}return!1},handlers.paste=(e,t)=>{if(e.state.readOnly)return!0;e.observer.flush();let r=brokenClipboardAPI?null:t.clipboardData;return r?(doPaste(e,r.getData("text/plain")||r.getData("text/uri-list")),!0):(capturePaste(e),!1)};let lastLinewiseCopy=null;handlers.copy=handlers.cut=(e,t)=>{let{text:r,ranges:n,linewise:i}=copiedRange(e.state);if(!r&&!i)return!1;lastLinewiseCopy=i?r:null,"cut"!=t.type||e.state.readOnly||e.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let o=brokenClipboardAPI?null:t.clipboardData;return o?(o.clearData(),o.setData("text/plain",r),!0):(captureCopy(e,r),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(e,t){let r=[];for(let n of e.facet(focusChangeEffect)){let i=n(e,t);i&&r.push(i)}return r.length?e.update({effects:r,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(e){setTimeout(()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let r=focusChangeTransaction(e.state,t);r?e.dispatch(r):e.update([])}},10)}observers.focus=e=>{e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),updateForFocusChange(e)},observers.blur=e=>{e.observer.clearSelectionRange(),updateForFocusChange(e)},observers.compositionstart=observers.compositionupdate=e=>{e.observer.editContext||(null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))},observers.compositionend=e=>{e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,browser.chrome&&browser.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then(()=>e.observer.flush()):setTimeout(()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])},50))},observers.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},handlers.beforeinput=(e,t)=>{var r,n;if("insertReplacementText"==t.inputType&&e.observer.editContext){let n=null===(r=t.dataTransfer)||void 0===r?void 0:r.getData("text/plain"),i=t.getTargetRanges();if(n&&i.length){let t=i[0],r=e.posAtDOM(t.startContainer,t.startOffset),o=e.posAtDOM(t.endContainer,t.endOffset);return applyDOMChangeInner(e,{from:r,to:o,insert:e.state.toText(n)},null),!0}}let i;if(browser.chrome&&browser.android&&(i=PendingKeys.find(e=>e.inputType==t.inputType))&&(e.observer.delayAndroidKey(i.key,i.keyCode),"Backspace"==i.key||"Delete"==i.key)){let t=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout(()=>{var r;((null===(r=window.visualViewport)||void 0===r?void 0:r.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())},100)}return browser.ios&&"deleteContentForward"==t.inputType&&e.observer.flushSoon(),browser.safari&&"insertText"==t.inputType&&e.inputState.composing>=0&&setTimeout(()=>observers.compositionend(e,t),20),!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack(e){appliedFirefoxHack.has(e)||(appliedFirefoxHack.add(e),e.addEventListener("copy",()=>{}),e.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];let heightChangeFlag=!1;function clearHeightChangeFlag(){heightChangeFlag=!1}class HeightOracle{constructor(e){this.lineWrapping=e,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return wrappingWhiteSpace.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let n=e[r];n<0?r++:this.heightSamples[Math.floor(10*n)]||(t=!0,this.heightSamples[Math.floor(10*n)]=!0)}return t}refresh(e,t,r,n,i,o){let s=wrappingWhiteSpace.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=t,this.charWidth=r,this.textHeight=n,this.lineLength=i,a){this.heightSamples={};for(let e=0;e<o.length;e++){let t=o[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return a}}class MeasuredHeights{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(e,t,r,n,i){this.from=e,this.length=t,this.top=r,this.height=n,this._content=i}get type(){return"number"==typeof this._content?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new BlockInfo(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var QueryType$1=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Epsilon&&(heightChangeFlag=!0),this.height=e)}replace(e,t,r){return HeightMap.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,n){let i=this,o=r.doc;for(let s=n.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:c,toB:u}=n[s],d=i.lineAt(a,QueryType$1.ByPosNoHeight,r.setDoc(t),0,0),p=d.to>=l?d:i.lineAt(l,QueryType$1.ByPosNoHeight,r,0,0);for(u+=p.to-l,l=p.to;s>0&&d.from<=n[s-1].toA;)a=n[s-1].fromA,c=n[s-1].fromB,s--,a<d.from&&(d=i.lineAt(a,QueryType$1.ByPosNoHeight,r,0,0));c+=d.from-a,a=d.from;let h=NodeBuilder.build(r.setDoc(o),e,c,u);i=replace(i,i.replace(a,l,h))}return i.updateHeight(r,0)}static empty(){return new HeightMapText(0,0)}static of(e){if(1==e.length)return e[0];let t=0,r=e.length,n=0,i=0;for(;;)if(t==r)if(n>2*i){let i=e[t-1];i.break?e.splice(--t,1,i.left,null,i.right):e.splice(--t,1,i.left,i.right),r+=1+i.break,n-=i.size}else{if(!(i>2*n))break;{let t=e[r];t.break?e.splice(r,1,t.left,null,t.right):e.splice(r,1,t.left,t.right),r+=2+t.break,i-=t.size}}else if(n<i){let r=e[t++];r&&(n+=r.size)}else{let t=e[--r];t&&(i+=t.size)}let o=0;return null==e[t-1]?(o=1,t--):null==e[t]&&(o=1,r++),new HeightMapBranch(HeightMap.of(e.slice(0,t)),o,HeightMap.of(e.slice(r)))}}function replace(e,t){return e==t?e:(e.constructor!=t.constructor&&(heightChangeFlag=!0),t)}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,n){return new BlockInfo(n,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,n,i){return this.blockAt(0,r,n,i)}forEachLine(e,t,r,n,i,o){e<=i+this.length&&t>=i&&o(this.blockAt(0,r,n,i))}updateHeight(e,t=0,r=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,n){return new BlockInfo(n,this.length,r,this.height,this.breaks)}replace(e,t,r){let n=r[0];return 1==r.length&&(n instanceof HeightMapText||n instanceof HeightMapGap&&4&n.flags)&&Math.abs(this.length-n.length)<10?(n instanceof HeightMapGap?n=new HeightMapText(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):HeightMap.of(r)}updateHeight(e,t=0,r=!1,n){return n&&n.from<=t&&n.more?this.setHeight(n.heights[n.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(e){super(e,0)}heightMetrics(e,t){let r,n=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,o=i-n+1,s=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*o);r=t/o,this.length>o+1&&(s=(this.height-t)/(this.length-o-1))}else r=this.height/o;return{firstLine:n,lastLine:i,perLine:r,perChar:s}}blockAt(e,t,r,n){let{firstLine:i,lastLine:o,perLine:s,perChar:a}=this.heightMetrics(t,n);if(t.lineWrapping){let i=n+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),o=t.doc.lineAt(i),l=s+o.length*a,c=Math.max(r,e-l/2);return new BlockInfo(o.from,o.length,c,l,0)}{let n=Math.max(0,Math.min(o-i,Math.floor((e-r)/s))),{from:a,length:l}=t.doc.line(i+n);return new BlockInfo(a,l,r+s*n,s,0)}}lineAt(e,t,r,n,i){if(t==QueryType$1.ByHeight)return this.blockAt(e,r,n,i);if(t==QueryType$1.ByPosNoHeight){let{from:t,to:n}=r.doc.lineAt(e);return new BlockInfo(t,n-t,0,0,0)}let{firstLine:o,perLine:s,perChar:a}=this.heightMetrics(r,i),l=r.doc.lineAt(e),c=s+l.length*a,u=l.number-o,d=n+s*u+a*(l.from-i-u);return new BlockInfo(l.from,l.length,Math.max(n,Math.min(d,n+this.height-c)),c,0)}forEachLine(e,t,r,n,i,o){e=Math.max(e,i),t=Math.min(t,i+this.length);let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(r,i);for(let c=e,u=n;c<=t;){let t=r.doc.lineAt(c);if(c==e){let r=t.number-s;u+=a*r+l*(e-i-r)}let n=a+l*t.length;o(new BlockInfo(t.from,t.length,u,n,0)),u+=n,c=t.to+1}}replace(e,t,r){let n=this.length-t;if(n>0){let e=r[r.length-1];e instanceof HeightMapGap?r[r.length-1]=new HeightMapGap(e.length+n):r.push(null,new HeightMapGap(n-1))}if(e>0){let t=r[0];t instanceof HeightMapGap?r[0]=new HeightMapGap(e+t.length):r.unshift(new HeightMapGap(e-1),null)}return HeightMap.of(r)}decomposeLeft(e,t){t.push(new HeightMapGap(e-1),null)}decomposeRight(e,t){t.push(null,new HeightMapGap(this.length-e-1))}updateHeight(e,t=0,r=!1,n){let i=t+this.length;if(n&&n.from<=t+this.length&&n.more){let r=[],o=Math.max(t,n.from),s=-1;for(n.from>t&&r.push(new HeightMapGap(n.from-t-1).updateHeight(e,t));o<=i&&n.more;){let t=e.doc.lineAt(o).length;r.length&&r.push(null);let i=n.heights[n.index++];-1==s?s=i:Math.abs(i-s)>=Epsilon&&(s=-2);let a=new HeightMapText(t,i);a.outdated=!1,r.push(a),o+=t+1}o<=i&&r.push(null,new HeightMapGap(i-o).updateHeight(e,o));let a=HeightMap.of(r);return(s<0||Math.abs(a.height-this.height)>=Epsilon||Math.abs(s-this.heightMetrics(e,t).perLine)>=Epsilon)&&(heightChangeFlag=!0),replace(this,a)}return(r||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return 1&this.flags}blockAt(e,t,r,n){let i=r+this.left.height;return e<i?this.left.blockAt(e,t,r,n):this.right.blockAt(e,t,i,n+this.left.length+this.break)}lineAt(e,t,r,n,i){let o=n+this.left.height,s=i+this.left.length+this.break,a=t==QueryType$1.ByHeight?e<o:e<s,l=a?this.left.lineAt(e,t,r,n,i):this.right.lineAt(e,t,r,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=t==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return a?l.join(this.right.lineAt(s,c,r,o,s)):this.left.lineAt(s,c,r,n,i).join(l)}forEachLine(e,t,r,n,i,o){let s=n+this.left.height,a=i+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,r,n,i,o),t>=a&&this.right.forEachLine(e,t,r,s,a,o);else{let l=this.lineAt(a,QueryType$1.ByPos,r,n,i);e<l.from&&this.left.forEachLine(e,l.from-1,r,n,i,o),l.to>=e&&l.from<=t&&o(l),t>l.to&&this.right.forEachLine(l.to+1,t,r,s,a,o)}}replace(e,t,r){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,r));let i=[];e>0&&this.decomposeLeft(e,i);let o=i.length;for(let s of r)i.push(s);if(e>0&&mergeGaps(i,o-1),t<this.length){let e=i.length;this.decomposeRight(t,i),mergeGaps(i,e)}return HeightMap.of(i)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,n=r+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?HeightMap.of(this.break?[e,null,t]:[e,t]):(this.left=replace(this.left,e),this.right=replace(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,n){let{left:i,right:o}=this,s=t+i.length+this.break,a=null;return n&&n.from<=t+i.length&&n.more?a=i=i.updateHeight(e,t,r,n):i.updateHeight(e,t,r),n&&n.from<=s+o.length&&n.more?a=o=o.updateHeight(e,s,r,n):o.updateHeight(e,s,r),a?this.balanced(i,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(e,t){let r,n;null==e[t]&&(r=e[t-1])instanceof HeightMapGap&&(n=e[t+1])instanceof HeightMapGap&&e.splice(t-1,3,new HeightMapGap(r.length+1+n.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof HeightMapText?r.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let n=r.widget?r.widget.estimatedHeight:0,i=r.widget?r.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let o=t-e;r.block?this.addBlock(new HeightMapBlock(o,n,r)):(o||i||n>=relevantWidgetHeight)&&this.addLineDeco(n,i,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new HeightMapText(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new HeightMapGap(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof HeightMapText)return e;let t=new HeightMapText(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let n=this.ensureLine();n.length+=r,n.collapsed+=r,n.widgetHeight=Math.max(n.widgetHeight,e),n.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof HeightMapText||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new HeightMapText(0,-1));let r=e;for(let n of this.nodes)n instanceof HeightMapText&&n.updateHeight(this.oracle,r),r+=n?n.length:1;return this.nodes}static build(e,t,r,n){let i=new NodeBuilder(r,e);return RangeSet.spans(t,r,n,i,0),i.finish(r)}}function heightRelevantDecoChanges(e,t,r){let n=new DecorationComparator;return RangeSet.compare(e,t,r,n,0),n.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,n){(e<t||r&&r.heightRelevant||n&&n.heightRelevant)&&addRange(e,t,this.changes,5)}}function visiblePixelRange(e,t){let r=e.getBoundingClientRect(),n=e.ownerDocument,i=n.defaultView||window,o=Math.max(0,r.left),s=Math.min(i.innerWidth,r.right),a=Math.max(0,r.top),l=Math.min(i.innerHeight,r.bottom);for(let c=e.parentNode;c&&c!=n.body;)if(1==c.nodeType){let t=c,r=window.getComputedStyle(t);if((t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)&&"visible"!=r.overflow){let r=t.getBoundingClientRect();o=Math.max(o,r.left),s=Math.min(s,r.right),a=Math.max(a,r.top),l=Math.min(c==e.parentNode?i.innerHeight:l,r.bottom)}c="absolute"==r.position||"fixed"==r.position?t.offsetParent:t.parentNode}else{if(11!=c.nodeType)break;c=c.host}return{left:o-r.left,right:Math.max(o,s)-r.left,top:a-(r.top+t),bottom:Math.max(a,l)-(r.top+t)}}function inWindow(e){let t=e.getBoundingClientRect(),r=e.ownerDocument.defaultView||window;return t.left<r.innerWidth&&t.right>0&&t.top<r.innerHeight&&t.bottom>0}function fullPixelRange(e,t){let r=e.getBoundingClientRect();return{left:0,right:r.right-r.left,top:t,bottom:r.bottom-(r.top+t)}}class LineGap{constructor(e,t,r,n){this.from=e,this.to=t,this.size=r,this.displaySize=n}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let n=e[r],i=t[r];if(n.from!=i.from||n.to!=i.to||n.size!=i.size)return!1}return!0}draw(e,t){return Decoration.replace({widget:new LineGapWidget(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(contentAttributes).some(e=>"function"!=typeof e&&"cm-lineWrapping"==e.class);this.heightOracle=new HeightOracle(t),this.stateDeco=e.facet(decorations).filter(e=>"function"!=typeof e),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(e.doc),[new ChangedRange(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(e=>e.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let n=r?t.head:t.anchor;if(!e.some(({from:e,to:t})=>n>=e&&n<=t)){let{from:t,to:r}=this.lineBlockAt(n);e.push(new Viewport(t,r))}}return this.viewports=e.sort((e,t)=>e.from-t.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(scaleBlock(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(e=>"function"!=typeof e);let n=e.changedRanges,i=ChangedRange.extendWithRanges(n,heightRelevantDecoChanges(r,this.stateDeco,e?e.changes:ChangeSet.empty(this.state.doc.length))),o=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);clearHeightChangeFlag(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),i),(this.heightMap.height!=o||heightChangeFlag)&&(e.flags|=2),s?(this.scrollAnchorPos=e.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=i.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let l=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(l||!e.changes.empty||2&e.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),n=this.heightOracle,i=r.whiteSpace;this.defaultTextDirection="rtl"==r.direction?Direction.RTL:Direction.LTR;let o=this.heightOracle.mustRefreshForWrapping(i),s=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let l=0,c=0;if(s.width&&s.height){let{scaleX:e,scaleY:r}=getScale(t,s);(e>.005&&Math.abs(this.scaleX-e)>.005||r>.005&&Math.abs(this.scaleY-r)>.005)&&(this.scaleX=e,this.scaleY=r,l|=16,o=a=!0)}let u=(parseInt(r.paddingTop)||0)*this.scaleY,d=(parseInt(r.paddingBottom)||0)*this.scaleY;this.paddingTop==u&&this.paddingBottom==d||(this.paddingTop=u,this.paddingBottom=d,l|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=isScrolledToBottom(e.scrollDOM);let h=(this.printing?fullPixelRange:visiblePixelRange)(t,this.paddingTop),f=h.top-this.pixelViewport.top,m=h.bottom-this.pixelViewport.bottom;this.pixelViewport=h;let g=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(g!=this.inView&&(this.inView=g,g&&(a=!0)),!this.inView&&!this.scrollTarget&&!inWindow(e.dom))return 0;let b=s.width;if(this.contentDOMWidth==b&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=s.width,this.editorHeight=e.scrollDOM.clientHeight,l|=16),a){let t=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(t)&&(o=!0),o||n.lineWrapping&&Math.abs(b-this.contentDOMWidth)>n.charWidth){let{lineHeight:r,charWidth:s,textHeight:a}=e.docView.measureTextSize();o=r>0&&n.refresh(i,r,s,a,Math.max(5,b/s),t),o&&(e.docView.minWidth=0,l|=16)}f>0&&m>0?c=Math.max(f,m):f<0&&m<0&&(c=Math.min(f,m)),clearHeightChangeFlag();for(let r of this.viewports){let i=r.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(r);this.heightMap=(o?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(n,0,o,new MeasuredHeights(r.from,i))}heightChangeFlag&&(l|=2)}let y=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(2&l&&(l|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),l|=this.updateForViewport()),(2&l||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,i=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,a=new Viewport(n.lineAt(o-1e3*r,QueryType$1.ByHeight,i,0,0).from,n.lineAt(s+1e3*(1-r),QueryType$1.ByHeight,i,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let r,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=n.lineAt(e,QueryType$1.ByPos,i,0,0);r="center"==t.y?(s.top+s.bottom)/2-o/2:"start"==t.y||"nearest"==t.y&&e<a.from?s.top:s.bottom-o,a=new Viewport(n.lineAt(r-500,QueryType$1.ByHeight,i,0,0).from,n.lineAt(r+o+500,QueryType$1.ByHeight,i,0,0).to)}}return a}mapViewport(e,t){let r=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new Viewport(this.heightMap.lineAt(r,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(n,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:i}=this.heightMap.lineAt(t,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==e||n<=o-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||i>=s+Math.max(10,Math.min(r,250)))&&n>o-2e3&&i<s+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let n of e)t.touchesRange(n.from,n.to)||r.push(new LineGap(t.mapPos(n.from),t.mapPos(n.to),n.size,n.displaySize));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,n=r?1e4:2e3,i=n>>1,o=n<<1;if(this.defaultTextDirection!=Direction.LTR&&!r)return[];let s=[],a=(n,o,l,c)=>{if(o-n<i)return;let u=this.state.selection.main,d=[u.from];u.empty||d.push(u.to);for(let e of d)if(e>n&&e<o)return a(n,e-10,l,c),void a(e+10,o,l,c);let p=find(e,e=>e.from>=l.from&&e.to<=l.to&&Math.abs(e.from-n)<i&&Math.abs(e.to-o)<i&&!d.some(t=>e.from<t&&e.to>t));if(!p){if(o<l.to&&t&&r&&t.visibleRanges.some(e=>e.from<=o&&e.to>=o)){let e=t.moveToLineBoundary(EditorSelection.cursor(o),!1,!0).head;e>n&&(o=e)}let e=this.gapSize(l,n,o,c);p=new LineGap(n,o,e,r||e<2e6?e:2e6)}s.push(p)},l=t=>{if(t.length<o||t.type!=BlockType.Text)return;let i=lineStructure(t.from,t.to,this.stateDeco);if(i.total<o)return;let s,l,c=this.scrollTarget?this.scrollTarget.range.head:null;if(r){let e,r,o=n/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=c){let n=findFraction(i,c),s=((this.visibleBottom-this.visibleTop)/2+o)/t.height;e=n-s,r=n+s}else e=(this.visibleTop-t.top-o)/t.height,r=(this.visibleBottom-t.top+o)/t.height;s=findPosition(i,e),l=findPosition(i,r)}else{let r=i.total*this.heightOracle.charWidth,o=n*this.heightOracle.charWidth,a=0;if(r>2e6)for(let n of e)n.from>=t.from&&n.from<t.to&&n.size!=n.displaySize&&n.from*this.heightOracle.charWidth+a<this.pixelViewport.left&&(a=n.size-n.displaySize);let u,d,p=this.pixelViewport.left+a,h=this.pixelViewport.right+a;if(null!=c){let e=findFraction(i,c),t=((h-p)/2+o)/r;u=e-t,d=e+t}else u=(p-o)/r,d=(h+o)/r;s=findPosition(i,u),l=findPosition(i,d)}s>t.from&&a(t.from,s,t,i),l<t.to&&a(l,t.to,t,i)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(l):l(c);return s}gapSize(e,t,r,n){let i=findFraction(n,r)-findFraction(n,t);return this.heightOracle.lineWrapping?e.height*i:n.total*this.heightOracle.charWidth*i}updateLineGaps(e){LineGap.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Decoration.set(e.map(e=>e.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let r=[];RangeSet.spans(t,this.viewport.from,this.viewport.to,{span(e,t){r.push({from:e,to:t})},point(){}},20);let n=0;if(r.length!=this.visibleRanges.length)n=12;else for(let i=0;i<r.length&&!(8&n);i++){let t=this.visibleRanges[i],o=r[i];t.from==o.from&&t.to==o.to||(n|=4,e&&e.mapPos(t.from,-1)==o.from&&e.mapPos(t.to,1)==o.to||(n|=8))}return this.visibleRanges=r,n}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||scaleBlock(this.heightMap.lineAt(e,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(e),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(e,t){this.from=e,this.to=t}}function lineStructure(e,t,r){let n=[],i=e,o=0;return RangeSet.spans(r,e,t,{span(){},point(e,t){e>i&&(n.push({from:i,to:e}),o+=e-i),i=t}},20),i<t&&(n.push({from:i,to:t}),o+=t-i),{total:o,ranges:n}}function findPosition({total:e,ranges:t},r){if(r<=0)return t[0].from;if(r>=1)return t[t.length-1].to;let n=Math.floor(e*r);for(let i=0;;i++){let{from:e,to:r}=t[i],o=r-e;if(n<=o)return e+n;n-=o}}function findFraction(e,t){let r=0;for(let{from:n,to:i}of e.ranges){if(t<=i){r+=t-n;break}r+=i-n}return r/e.total}function find(e,t){for(let r of e)if(t(r))return r}const IdScaler={toDOM:e=>e,fromDOM:e=>e,scale:1,eq(e){return e==this}};class BigScaler{constructor(e,t,r){let n=0,i=0,o=0;this.viewports=r.map(({from:r,to:i})=>{let o=t.lineAt(r,QueryType$1.ByPos,e,0,0).top,s=t.lineAt(i,QueryType$1.ByPos,e,0,0).bottom;return n+=s-o,{from:r,to:i,top:o,bottom:s,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let s of this.viewports)s.domTop=o+(s.top-i)*this.scale,o=s.domBottom=s.domTop+(s.bottom-s.top),i=s.bottom}toDOM(e){for(let t=0,r=0,n=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.top)return n+(e-r)*this.scale;if(e<=i.bottom)return i.domTop+(e-i.top);r=i.bottom,n=i.domBottom}}fromDOM(e){for(let t=0,r=0,n=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.domTop)return r+(e-n)/this.scale;if(e<=i.domBottom)return i.top+(e-i.domTop);r=i.bottom,n=i.domBottom}}eq(e){return e instanceof BigScaler&&this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to)}}function scaleBlock(e,t){if(1==t.scale)return e;let r=t.toDOM(e.top),n=t.toDOM(e.bottom);return new BlockInfo(e.from,e.length,r,n-r,Array.isArray(e._content)?e._content.map(e=>scaleBlock(e,t)):e._content)}const theme=Facet.define({combine:e=>e.join(" ")}),darkTheme=Facet.define({combine:e=>e.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(e,t,r){return new StyleModule(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,t=>{if("&"==t)return e;if(!r||!r[t])throw new RangeError(`Unsupported selector: ${t}`);return r[t]}):e+" "+t})}const baseTheme$1$1=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let e of t)this.queue.push(e);(browser.ie&&browser.ie_version<=11||browser.ios&&e.composing)&&t.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),!window.EditContext||!browser.android||!1===e.constructor.EDIT_CONTEXT||browser.chrome&&browser.chrome_version<126||(this.editContext=new EditContextManager(e),e.state.facet(editable)&&(e.contentDOM.editContext=this.editContext.editContext)),useCharData&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver(()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){("change"!=e.type&&e.type||e.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,n=this.selectionRange;if(r.state.facet(editable)?r.root.activeElement!=this.dom:!hasSelection(this.dom,n))return;let i=n.anchorNode&&r.docView.nearest(n.anchorNode);i&&i.ignoreEvent(e)?t||(this.selectionChanged=!1):(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!r.state.selection.main.empty&&n.focusNode&&isEquivalentPosition(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=getSelection$1(e.root);if(!t)return!1;let r=browser.safari&&11==e.root.nodeType&&e.root.activeElement==this.dom&&safariSelectionRangeHack(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let n=hasSelection(this.dom,r);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(1==r.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else{if(11!=r.nodeType)break;r=r.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let e=()=>{let e=this.delayedAndroidKey;e&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&dispatchKey(this.dom,e.key,e.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(e)}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(r=this.delayedAndroidKey)||void 0===r?void 0:r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,n=!1;for(let i of e){let e=this.readMutation(i);e&&(e.typeOver&&(n=!0),-1==t?({from:t,to:r}=e):(t=Math.min(e.from,t),r=Math.max(e.to,r)))}return{from:t,to:r,typeOver:n}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),n=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(e<0&&!n)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let i=new DOMChange(this.view,e,t,r);return this.view.docView.domChanged={newSel:i.newSel?i.newSel.main:null},i}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,n=applyDOMChange(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),n}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.flags|=4),"childList"==e.type){let r=findChild(t,e.previousSibling||e.target.previousSibling,-1),n=findChild(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(editable)!=e.state.facet(editable)&&(e.view.contentDOM.editContext=e.state.facet(editable)?this.editContext.editContext:null))}destroy(){var e,t,r;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(r=this.resizeScroll)||void 0===r||r.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function findChild(e,t,r){for(;t;){let n=ContentView.get(t);if(n&&n.parent==e)return n;let i=t.parentNode;t=i!=e.dom?i:r>0?t.nextSibling:t.previousSibling}return null}function buildSelectionRangeFromRange(e,t){let r=t.startContainer,n=t.startOffset,i=t.endContainer,o=t.endOffset,s=e.docView.domAtPos(e.state.selection.main.anchor);return isEquivalentPosition(s.node,s.offset,i,o)&&([r,n,i,o]=[i,o,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:o}}function safariSelectionRangeHack(e,t){if(t.getComposedRanges){let r=t.getComposedRanges(e.root)[0];if(r)return buildSelectionRangeFromRange(e,r)}let r=null;function n(e){e.preventDefault(),e.stopImmediatePropagation(),r=e.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",n,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",n,!0),r?buildSelectionRangeFromRange(e,r):null}class EditContextManager{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let n=e.state.selection.main,{anchor:i,head:o}=n,s=this.toEditorPos(r.updateRangeStart),a=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:s,drifted:!1});let l=a-s>r.text.length;s==this.from&&i<this.from?s=i:a==this.to&&i>this.to&&(a=i);let c=findDiff(e.state.sliceDoc(s,a),r.text,(l?n.from:n.to)-s,l?"end":null);if(!c){let t=EditorSelection.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));return void(t.main.eq(n)||e.dispatch({selection:t,userEvent:"select"}))}let u={from:c.from+s,to:c.toA+s,insert:Text.of(r.text.slice(c.from,c.toB).split("\n"))};if((browser.mac||browser.android)&&u.from==o-1&&/^\. ?$/.test(r.text)&&"off"==e.contentDOM.getAttribute("autocorrect")&&(u={from:s,to:a,insert:Text.of([r.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let t=this.to-this.from+(u.to-u.from+u.insert.length);applyDOMChangeInner(e,u,EditorSelection.single(this.toEditorPos(r.selectionStart,t),this.toEditorPos(r.selectionEnd,t)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),u.from<u.to&&!u.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(t.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let n=[],i=null;for(let t=this.toEditorPos(r.rangeStart),o=this.toEditorPos(r.rangeEnd);t<o;t++){let r=e.coordsForChar(t);i=r&&new DOMRect(r.left,r.top,r.right-r.left,r.bottom-r.top)||i||new DOMRect,n.push(i)}t.updateCharacterBounds(r.rangeStart,n)},this.handlers.textformatupdate=t=>{let r=[];for(let e of t.getTextFormats()){let t=e.underlineStyle,n=e.underlineThickness;if(!/none/i.test(t)&&!/none/i.test(n)){let i=this.toEditorPos(e.rangeStart),o=this.toEditorPos(e.rangeEnd);if(i<o){let e=`text-decoration: underline ${/^[a-z]/.test(t)?t+" ":"Dashed"==t?"dashed ":"Squiggle"==t?"wavy ":""}${/thin/i.test(n)?1:2}px`;r.push(Decoration.mark({attributes:{style:e}}).range(i,o))}}}e.dispatch({effects:setEditContextFormatting.of(Decoration.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:t}=this.composing;this.composing=null,t&&this.reset(e.state)}};for(let r in this.handlers)t.addEventListener(r,this.handlers[r]);this.measureReq={read:e=>{this.editContext.updateControlBounds(e.contentDOM.getBoundingClientRect());let t=getSelection$1(e.root);t&&t.rangeCount&&this.editContext.updateSelectionBounds(t.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,n=this.pendingContextChange;return e.changes.iterChanges((i,o,s,a,l)=>{if(r)return;let c=l.length-(o-i);if(n&&o>=n.to){if(n.from==i&&n.to==o&&n.insert.eq(l))return n=this.pendingContextChange=null,t+=c,void(this.to+=c);n=null,this.revertPending(e.state)}if(i+=t,(o+=t)<=this.from)this.from+=c,this.to+=c;else if(i<this.to){if(i<this.from||o>this.to||this.to-this.from+l.length>3e4)return void(r=!0);this.editContext.updateText(this.toContextPos(i),this.toContextPos(o),l.toString()),this.to+=c}t+=c}),n&&!r&&this.revertPending(e.state),!r}update(e){let t=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(e=>!e.isUserEvent("input.type")&&e.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):this.applyEdits(e)&&this.rangeIsValid(e.state)?(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state):(this.pendingContextChange=null,this.reset(e.state)),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),n=this.toContextPos(t.head);this.editContext.selectionStart==r&&this.editContext.selectionEnd==n||this.editContext.updateSelection(r,n)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>3e4)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(e=>e.forEach(e=>r(e,this)))||(e=>this.update(e)),this.dispatch=this.dispatch.bind(this),this._root=e.root||getRoot(e.parent)||document,this.viewState=new ViewState(e.state||EditorState.create(e)),e.scrollTo&&e.scrollTo.is(scrollIntoView$1)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(e=>new PluginInstance(e));for(let n of this.plugins)n.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(t=document.fonts)||void 0===t?void 0:t.ready)&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=1==e.length&&e[0]instanceof Transaction?e:1==e.length&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,r=!1,n=!1,i=this.state;for(let p of e){if(p.startState!=i)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");i=p.state}if(this.destroyed)return void(this.viewState.state=i);let o=this.hasFocus,s=0,a=null;e.some(e=>e.annotation(isFocusChange))?(this.inputState.notifiedFocused=o,s=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=focusChangeTransaction(i,o),a||(s=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(i.doc)||!this.state.selection.eq(i.selection))&&(c=null)):this.observer.clear(),i.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(i);t=ViewUpdate.create(this,i,e),t.flags|=s;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(u&&(u=u.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;u=new ScrollTarget(e.empty?e:EditorSelection.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(scrollIntoView$1)&&(u=e.value.clip(this.state))}this.viewState.update(t,u),this.bidiCache=CachedOrder.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),r=this.docView.update(t),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(r,e.some(e=>e.isUserEvent("select.pointer")))}finally{this.updateState=0}if(t.startState.facet(theme)!=t.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(r||n||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),r&&this.docViewUpdate(),!t.empty)for(let p of this.state.facet(updateListener))try{p(t)}catch(d){logException(this.state,d,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!applyDOMChange(this,c)&&l.force&&dispatchKey(this.contentDOM,l.key,l.keyCode)})}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new ViewState(e),this.plugins=e.facet(viewPlugin).map(e=>new PluginInstance(e)),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(viewPlugin),r=e.state.facet(viewPlugin);if(t!=r){let n=[];for(let i of r){let r=t.indexOf(i);if(r<0)n.push(new PluginInstance(i));else{let t=this.plugins[r];t.mustUpdate=e,n.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let r=t.value;if(r&&r.docViewUpdate)try{r.docViewUpdate(this)}catch(e){logException(this.state,e,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,n=r.scrollTop*this.scaleY,{scrollAnchorPos:i,scrollAnchorHeight:o}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let e=0;;e++){if(o<0)if(isScrolledToBottom(r))i=-1,o=this.viewState.heightMap.height;else{let e=this.viewState.scrollAnchorAt(n);i=e.from,o=e.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5)break;let l=[];4&a||([this.measureRequests,l]=[l,this.measureRequests]);let c=l.map(e=>{try{return e.read(this)}catch(t){return logException(this.state,t),BadMeasure}}),u=ViewUpdate.create(this,this.state,[]),d=!1;u.flags|=a,t?t.flags|=a:t=u,this.updateState=2,u.empty||(this.updatePlugins(u),this.inputState.update(u),this.updateAttrs(),d=this.docView.update(u),d&&this.docViewUpdate());for(let e=0;e<l.length;e++)if(c[e]!=BadMeasure)try{let t=l[e];t.write&&t.write(c[e],this)}catch(s){logException(this.state,s)}if(d&&this.docView.updateSelection(!0),!u.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}{let e=(i<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(i).top)-o;if(e>1||e<-1){n+=e,r.scrollTop=n/this.scaleY,o=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(updateListener))a(t)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let e=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,t);let r=this.observer.ignore(()=>{let r=updateAttrs(this.contentDOM,this.contentAttrs,t),n=updateAttrs(this.dom,this.editorAttrs,e);return r||n});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let e of r.effects)e.is(EditorView.announce)&&(t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value)}mountStyles(){this.styleModules=this.state.facet(styleModule);let e=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$1).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(t=>t.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return skipAtoms(this,e,moveByChar(this,e,t,r))}moveByGroup(e,t){return skipAtoms(this,e,moveByChar(this,e,t,t=>byGroup(this,e.head,t)))}visualLineSide(e,t){let r=this.bidiSpans(e),n=this.textDirectionAt(e.from),i=r[t?r.length-1:0];return EditorSelection.cursor(i.side(t,n)+e.from,i.forward(!t,n)?1:-1)}moveToLineBoundary(e,t,r=!0){return moveToLineBoundary(this,e,t,r)}moveVertically(e,t,r){return skipAtoms(this,e,moveVertically(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),posAtCoords(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let n=this.state.doc.lineAt(e),i=this.bidiSpans(n);return flattenRect(r,i[BidiSpan.find(i,e-n.from,-1,t)].dir==Direction.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(perLineTextDirection)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>MaxBidiLine)return trivialOrder(e.length);let t,r=this.textDirectionAt(e.from);for(let i of this.bidiCache)if(i.from==e.from&&i.dir==r&&(i.fresh||isolatesEq(i.isolates,t=getIsolatedRanges(this,e))))return i.order;t||(t=getIsolatedRanges(this,e));let n=computeOrder(e.text,r,t);return this.bidiCache.push(new CachedOrder(e.from,e.to,r,t,!0,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||browser.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return scrollIntoView$1.of(new ScrollTarget("number"==typeof e?EditorSelection.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return scrollIntoView$1.of(new ScrollTarget(EditorSelection.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){null==e?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof e?this.inputState.tabFocusMode=e?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ViewPlugin.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ViewPlugin.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=StyleModule.newName(),n=[theme.of(r),styleModule.of(buildTheme(`.${r}`,e))];return t&&t.dark&&n.push(darkTheme.of(!0)),n}static baseTheme(e){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,e,lightDarkIDs)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),n=r&&ContentView.get(r)||ContentView.get(e);return(null===(t=null==n?void 0:n.rootView)||void 0===t?void 0:t.view)||null}}EditorView.styleModule=styleModule,EditorView.inputHandler=inputHandler,EditorView.clipboardInputFilter=clipboardInputFilter,EditorView.clipboardOutputFilter=clipboardOutputFilter,EditorView.scrollHandler=scrollHandler,EditorView.focusChangeEffect=focusChangeEffect,EditorView.perLineTextDirection=perLineTextDirection,EditorView.exceptionSink=exceptionSink,EditorView.updateListener=updateListener,EditorView.editable=editable,EditorView.mouseSelectionStyle=mouseSelectionStyle,EditorView.dragMovesSelection=dragMovesSelection$1,EditorView.clickAddsSelectionRange=clickAddsSelectionRange,EditorView.decorations=decorations,EditorView.outerDecorations=outerDecorations,EditorView.atomicRanges=atomicRanges,EditorView.bidiIsolatedRanges=bidiIsolatedRanges,EditorView.scrollMargins=scrollMargins,EditorView.darkTheme=darkTheme,EditorView.cspNonce=Facet.define({combine:e=>e.length?e[0]:""}),EditorView.contentAttributes=contentAttributes,EditorView.editorAttributes=editorAttributes,EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"}),EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(e,t,r,n,i,o){this.from=e,this.to=t,this.dir=r,this.isolates=n,this.fresh=i,this.order=o}static update(e,t){if(t.empty&&!e.some(e=>e.fresh))return e;let r=[],n=e.length?e[e.length-1].dir:Direction.LTR;for(let i=Math.max(0,e.length-10);i<e.length;i++){let o=e[i];o.dir!=n||t.touchesRange(o.from,o.to)||r.push(new CachedOrder(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function attrsFromFacet(e,t,r){for(let n=e.state.facet(t),i=n.length-1;i>=0;i--){let t=n[i],o="function"==typeof t?t(e):t;o&&combineAttrs(o,r)}return r}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(e,t){const r=e.split(/-(?!$)/);let n,i,o,s,a=r[r.length-1];"Space"==a&&(a=" ");for(let l=0;l<r.length-1;++l){const e=r[l];if(/^(cmd|meta|m)$/i.test(e))s=!0;else if(/^a(lt)?$/i.test(e))n=!0;else if(/^(c|ctrl|control)$/i.test(e))i=!0;else if(/^s(hift)?$/i.test(e))o=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);"mac"==t?s=!0:i=!0}}return n&&(a="Alt-"+a),i&&(a="Ctrl-"+a),s&&(a="Meta-"+a),o&&(a="Shift-"+a),a}function modifiers(e,t,r){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==r&&t.shiftKey&&(e="Shift-"+e),e}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown:(e,t)=>runHandlers(getKeymap(t.state),e,t,"editor")})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(e){let t=e.facet(keymap),r=Keymaps.get(t);return r||Keymaps.set(t,r=buildKeymap(t.reduce((e,t)=>e.concat(t),[]))),r}function runScopeHandlers(e,t,r){return runHandlers(getKeymap(e.state),t,e,r)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(e,t=currentPlatform){let r=Object.create(null),n=Object.create(null),i=(e,t)=>{let r=n[e];if(null==r)n[e]=t;else if(r!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},o=(e,n,o,s,a)=>{var l,c;let u=r[e]||(r[e]=Object.create(null)),d=n.split(/ (?!$)/).map(e=>normalizeKeyName(e,t));for(let t=1;t<d.length;t++){let r=d.slice(0,t).join(" ");i(r,!0),u[r]||(u[r]={preventDefault:!0,stopPropagation:!1,run:[t=>{let n=storedPrefix={view:t,prefix:r,scope:e};return setTimeout(()=>{storedPrefix==n&&(storedPrefix=null)},PrefixTimeout),!0}]})}let p=d.join(" ");i(p,!1);let h=u[p]||(u[p]={preventDefault:!1,stopPropagation:!1,run:(null===(c=null===(l=u._any)||void 0===l?void 0:l.run)||void 0===c?void 0:c.slice())||[]});o&&h.run.push(o),s&&(h.preventDefault=!0),a&&(h.stopPropagation=!0)};for(let s of e){let e=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let t of e){let e=r[t]||(r[t]=Object.create(null));e._any||(e._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:n}=s;for(let t in e)e[t].run.push(e=>n(e,currentKeyEvent))}let n=s[t]||s.key;if(n)for(let t of e)o(t,n,s.run,s.preventDefault,s.stopPropagation),s.shift&&o(t,"Shift-"+n,s.shift,s.preventDefault,s.stopPropagation)}return r}let currentKeyEvent=null;function runHandlers(e,t,r,n){currentKeyEvent=t;let i=keyName(t),o=codePointSize(codePointAt(i,0))==i.length&&" "!=i,s="",a=!1,l=!1,c=!1;storedPrefix&&storedPrefix.view==r&&storedPrefix.scope==n&&(s=storedPrefix.prefix+" ",modifierCodes.indexOf(t.keyCode)<0&&(l=!0,storedPrefix=null));let u,d,p=new Set,h=e=>{if(e){for(let t of e.run)if(!p.has(t)&&(p.add(t),t(r)))return e.stopPropagation&&(c=!0),!0;e.preventDefault&&(e.stopPropagation&&(c=!0),l=!0)}return!1},f=e[n];return f&&(h(f[s+modifiers(i,t,!o)])?a=!0:!o||!(t.altKey||t.metaKey||t.ctrlKey)||browser.windows&&t.ctrlKey&&t.altKey||browser.mac&&t.altKey&&!t.ctrlKey&&!t.metaKey||!(u=base$1[t.keyCode])||u==i?o&&t.shiftKey&&h(f[s+modifiers(i,t,!0)])&&(a=!0):(h(f[s+modifiers(u,t,!0)])||t.shiftKey&&(d=shift$1[t.keyCode])!=i&&d!=u&&h(f[s+modifiers(d,t,!1)]))&&(a=!0),!a&&h(f._any)&&(a=!0)),l&&(a=!0),a&&c&&t.stopPropagation(),currentKeyEvent=null,a}let Placeholder$1=class extends WidgetType{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild("string"==typeof this.content?document.createTextNode(this.content):"function"==typeof this.content?this.content(e):this.content.cloneNode(!0)),t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?clientRectsFor(e.firstChild):[];if(!t.length)return null;let r=window.getComputedStyle(e.parentNode),n=flattenRect(t[0],"rtl"!=r.direction),i=parseInt(r.lineHeight);return n.bottom-n.top>1.5*i?{left:n.left,right:n.right,top:n.top,bottom:n.top+i}:n}ignoreEvent(){return!1}};function placeholder(e){let t=ViewPlugin.fromClass(class{constructor(t){this.view=t,this.placeholder=e?Decoration.set([Decoration.widget({widget:new Placeholder$1(e),side:1}).range(0)]):Decoration.none}get decorations(){return this.view.state.doc.length?Decoration.none:this.placeholder}},{decorations:e=>e.decorations});return"string"==typeof e?[t,EditorView.contentAttributes.of({"aria-placeholder":e})]:t}const Outside="-10000px";class TooltipViewManager{constructor(e,t,r,n){this.facet=t,this.createTooltipView=r,this.removeTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter(e=>e);let i=null;this.tooltipViews=this.tooltips.map(e=>i=r(e,i))}update(e,t){var r;let n=e.state.facet(this.facet),i=n.filter(e=>e);if(n===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let o=[],s=t?[]:null;for(let a=0;a<i.length;a++){let r=i[a],n=-1;if(r){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==r.create&&(n=e)}if(n<0)o[a]=this.createTooltipView(r,a?o[a-1]:null),s&&(s[a]=!!r.above);else{let r=o[a]=this.tooltipViews[n];s&&(s[a]=t[n]),r.update&&r.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),null===(r=a.destroy)||void 0===r||r.call(a));return t&&(s.forEach((e,r)=>t[r]=e),t.length=s.length),this.input=n,this.tooltips=i,this.tooltipViews=o,!0}}function windowSpace(e){let t=e.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:t.clientHeight,right:t.clientWidth}}const tooltipConfig=Facet.define({combine:e=>{var t,r,n;return{position:browser.ios?"absolute":(null===(t=e.find(e=>e.position))||void 0===t?void 0:t.position)||"fixed",parent:(null===(r=e.find(e=>e.parent))||void 0===r?void 0:r.parent)||null,tooltipSpace:(null===(n=e.find(e=>e.tooltipSpace))||void 0===n?void 0:n.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(tooltipConfig);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new TooltipViewManager(e,showTooltip,(e,t)=>this.createTooltip(e,t),e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()}),this.above=this.manager.tooltips.map(e=>!!e.above),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver(e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e,this.above);t&&this.observeIntersection();let r=t||e.geometryChanged,n=e.state.facet(tooltipConfig);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;r=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);r=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);r&&this.maybeMeasure()}createTooltip(e,t){let r=e.create(this.view),n=t?t.dom:null;if(r.dom.classList.add("cm-tooltip"),e.arrow&&!r.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",r.dom.appendChild(e)}return r.dom.style.position=this.position,r.dom.style.top=Outside,r.dom.style.left="0px",this.container.insertBefore(r.dom,n),r.mount&&r.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(r.dom),r}destroy(){var e,t,r;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),null===(e=n.destroy)||void 0===e||e.call(n);this.parent&&this.container.remove(),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),null===(r=this.intersectionObserver)||void 0===r||r.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=1,t=1,r=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:e}=this.manager.tooltipViews[0];if(browser.gecko)r=e.offsetParent!=this.container.ownerDocument.body;else if(e.style.top==Outside&&"0px"==e.style.left){let t=e.getBoundingClientRect();r=Math.abs(t.top+1e4)>1||Math.abs(t.left)>1}}if(r||"absolute"==this.position)if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(e=r.width/this.parent.offsetWidth,t=r.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);let n=this.view.scrollDOM.getBoundingClientRect(),i=getScrollMargins(this.view);return{visible:{left:n.left+i.left,top:n.top+i.top,right:n.right-i.right,bottom:n.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((e,t)=>{let r=this.manager.tooltipViews[t];return r.getCoords?r.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:r}}writeMeasure(e){var t;if(e.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let e of this.manager.tooltipViews)e.dom.style.position="absolute"}let{visible:r,space:n,scaleX:i,scaleY:o}=e,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,d=e.pos[a],p=e.size[a];if(!d||!1!==l.clip&&(d.bottom<=Math.max(r.top,n.top)||d.top>=Math.min(r.bottom,n.bottom)||d.right<Math.max(r.left,n.left)-.1||d.left>Math.min(r.right,n.right)+.1)){u.style.top=Outside;continue}let h=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,f=h?7:0,m=p.right-p.left,g=null!==(t=knownHeight.get(c))&&void 0!==t?t:p.bottom-p.top,b=c.offset||noOffset,y=this.view.textDirection==Direction.LTR,T=p.width>n.right-n.left?y?n.left:n.right-p.width:y?Math.max(n.left,Math.min(d.left-(h?14:0)+b.x,n.right-m)):Math.min(Math.max(n.left,d.left-m+(h?14:0)-b.x),n.right-m),E=this.above[a];!l.strictSide&&(E?d.top-g-f-b.y<n.top:d.bottom+g+f+b.y>n.bottom)&&E==n.bottom-d.bottom>d.top-n.top&&(E=this.above[a]=!E);let O=(E?d.top-n.top:n.bottom-d.bottom)-f;if(O<g&&!1!==c.resize){if(O<this.view.defaultLineHeight){u.style.top=Outside;continue}knownHeight.set(c,g),u.style.height=(g=O)/o+"px"}else u.style.height&&(u.style.height="");let S=E?d.top-g-f-b.y:d.bottom+f+b.y,x=T+m;if(!0!==c.overlap)for(let e of s)e.left<x&&e.right>T&&e.top<S+g&&e.bottom>S&&(S=E?e.top-g-2-f:e.bottom+f+2);if("absolute"==this.position?(u.style.top=(S-e.parent.top)/o+"px",setLeftStyle(u,(T-e.parent.left)/i)):(u.style.top=S/o+"px",setLeftStyle(u,T/i)),h){let e=d.left+(y?b.x:-b.x)-(T+14-7);h.style.left=e/i+"px"}!0!==c.overlap&&s.push({left:T,top:S,right:x,bottom:S+g}),u.classList.toggle("cm-tooltip-above",E),u.classList.toggle("cm-tooltip-below",!E),c.positioned&&c.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=Outside}},{eventObservers:{scroll(){this.maybeMeasure()}}});function setLeftStyle(e,t){let r=parseInt(e.style.left,10);(isNaN(r)||Math.abs(t-r)>1)&&(e.style.left=t+"px")}const baseTheme$3=EditorView.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$3]});function getTooltip(e,t){let r=e.plugin(tooltipPlugin);if(!r)return null;let n=r.manager.tooltips.indexOf(t);return n<0?null:r.manager.tooltipViews[n]}const panelConfig=Facet.define({combine(e){let t,r;for(let n of e)t=t||n.topContainer,r=r||n.bottomContainer;return{topContainer:t,bottomContainer:r}}});function getPanel(e,t){let r=e.plugin(panelPlugin),n=r?r.specs.indexOf(t):-1;return n>-1?r.panels[n]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(e){this.input=e.state.facet(showPanel),this.specs=this.input.filter(e=>e),this.panels=this.specs.map(t=>t(e));let t=e.state.facet(panelConfig);this.top=new PanelGroup(e,!0,t.topContainer),this.bottom=new PanelGroup(e,!1,t.bottomContainer),this.top.sync(this.panels.filter(e=>e.top)),this.bottom.sync(this.panels.filter(e=>!e.top));for(let r of this.panels)r.dom.classList.add("cm-panel"),r.mount&&r.mount()}update(e){let t=e.state.facet(panelConfig);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new PanelGroup(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let r=e.state.facet(showPanel);if(r!=this.input){let t=r.filter(e=>e),n=[],i=[],o=[],s=[];for(let r of t){let t,a=this.specs.indexOf(r);a<0?(t=r(e.view),s.push(t)):(t=this.panels[a],t.update&&t.update(e)),n.push(t),(t.top?i:o).push(t)}this.specs=t,this.panels=n,this.top.sync(i),this.bottom.sync(o);for(let e of s)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let n of this.panels)n.update&&n.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>EditorView.scrollMargins.of(t=>{let r=t.plugin(e);return r&&{top:r.top.scrollMargin(),bottom:r.bottom.scrollMargin()}})});class PanelGroup{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=rm(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=rm(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function rm(e){let t=e.nextSibling;return e.remove(),t}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}GutterMarker.prototype.elementClass="",GutterMarker.prototype.toDOM=void 0,GutterMarker.prototype.mapMode=MapMode.TrackBefore,GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1,GutterMarker.prototype.point=!0,StateEffect.define(),StateEffect.define();const DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(e,t){this.from=e,this.to=t}}class NodeProp{constructor(e={}){this.id=nextPropID++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=NodeType.match(e)),t=>{let r=e(t);return void 0===r?null:[this,r]}}}NodeProp.closedBy=new NodeProp({deserialize:e=>e.split(" ")}),NodeProp.openedBy=new NodeProp({deserialize:e=>e.split(" ")}),NodeProp.group=new NodeProp({deserialize:e=>e.split(" ")}),NodeProp.isolate=new NodeProp({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),NodeProp.contextHash=new NodeProp({perNode:!0}),NodeProp.lookAhead=new NodeProp({perNode:!0}),NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[NodeProp.mounted.id]}}const noProps=Object.create(null);class NodeType{constructor(e,t,r,n=0){this.name=e,this.props=t,this.id=r,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):noProps,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),n=new NodeType(e.name||"",t,e.id,r);if(e.props)for(let i of e.props)if(Array.isArray(i)||(i=i(n)),i){if(i[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[i[0].id]=i[1]}return n}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(NodeProp.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let n of r.split(" "))t[n]=e[r];return e=>{for(let r=e.prop(NodeProp.group),n=-1;n<(r?r.length:0);n++){let i=t[n<0?e.name:r[n]];if(i)return i}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let n=null;for(let t of e){let e=t(r);if(e){n||(n=Object.assign({},r.props));let t=e[1],i=e[0];i.combine&&i.id in n&&(t=i.combine(n[i.id],t)),n[i.id]=t}}t.push(n?new NodeType(r.name,n,r.id,r.flags):r)}return new NodeSet(t)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode,IterMode2;IterMode2=IterMode||(IterMode={}),IterMode2[IterMode2.ExcludeBuffers=1]="ExcludeBuffers",IterMode2[IterMode2.IncludeAnonymous=2]="IncludeAnonymous",IterMode2[IterMode2.IgnoreMounts=4]="IgnoreMounts",IterMode2[IterMode2.IgnoreOverlays=8]="IgnoreOverlays";class Tree{constructor(e,t,r,n,i){if(this.type=e,this.children=t,this.positions=r,this.length=n,this.props=null,i&&i.length){this.props=Object.create(null);for(let[e,t]of i)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=MountedTree.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let e=r.toString();e&&(t&&(t+=","),t+=e)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new TreeCursor(this.topNode,e)}cursorAt(e,t=0,r=0){let n=CachedNode.get(this)||this.topNode,i=new TreeCursor(n);return i.moveTo(e,t),CachedNode.set(this,i._tree),i}get topNode(){return new TreeNode(this,0,0,null)}resolve(e,t=0){let r=resolveNode(CachedNode.get(this)||this.topNode,e,t,!1);return CachedNode.set(this,r),r}resolveInner(e,t=0){let r=resolveNode(CachedInnerNode.get(this)||this.topNode,e,t,!0);return CachedInnerNode.set(this,r),r}resolveStack(e,t=0){return stackIterator(this,e,t)}iterate(e){let{enter:t,leave:r,from:n=0,to:i=this.length}=e,o=e.mode||0,s=(o&IterMode.IncludeAnonymous)>0;for(let a=this.cursor(o|IterMode.IncludeAnonymous);;){let e=!1;if(a.from<=i&&a.to>=n&&(!s&&a.type.isAnonymous||!1!==t(a))){if(a.firstChild())continue;e=!0}for(;e&&r&&(s||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(e,t,r)=>new Tree(this.type,e,t,r,this.propValues),e.makeTree||((e,t,r)=>new Tree(NodeType.none,e,t,r)))}static build(e){return buildTree(e)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return NodeType.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],n=this.set.types[t],i=n.name;if(/\W/.test(i)&&!n.isError&&(i=JSON.stringify(i)),r==(e+=4))return i;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return i+"("+o.join(",")+")"}findChild(e,t,r,n,i){let{buffer:o}=this,s=-1;for(let a=e;a!=t&&!(checkSide(i,n,o[a+1],o[a+2])&&(s=a,r>0));a=o[a+3]);return s}slice(e,t,r){let n=this.buffer,i=new Uint16Array(t-e),o=0;for(let s=e,a=0;s<t;){i[a++]=n[s++],i[a++]=n[s++]-r;let t=i[a++]=n[s++]-r;i[a++]=n[s++]-e,o=Math.max(o,t)}return new TreeBuffer(i,o,this.set)}}function checkSide(e,t,r,n){switch(e){case-2:return r<t;case-1:return n>=t&&r<t;case 0:return r<t&&n>t;case 1:return r<=t&&n>t;case 2:return n>t;case 4:return!0}}function resolveNode(e,t,r,n){for(var i;e.from==e.to||(r<1?e.from>=t:e.from>t)||(r>-1?e.to<=t:e.to<t);){let t=!n&&e instanceof TreeNode&&e.index<0?null:e.parent;if(!t)return e;e=t}let o=n?0:IterMode.IgnoreOverlays;if(n)for(let s=e,a=s.parent;a;s=a,a=s.parent)s instanceof TreeNode&&s.index<0&&(null===(i=a.enter(t,r,o))||void 0===i?void 0:i.from)!=s.from&&(e=a);for(;;){let n=e.enter(t,r,o);if(!n)return e;e=n}}class BaseNode{cursor(e=0){return new TreeCursor(this,e)}getChild(e,t=null,r=null){let n=getChildren(this,e,t,r);return n.length?n[0]:null}getChildren(e,t=null,r=null){return getChildren(this,e,t,r)}resolve(e,t=0){return resolveNode(this,e,t,!1)}resolveInner(e,t=0){return resolveNode(this,e,t,!0)}matchContext(e){return matchNodeContext(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(r=t,t=e.prevSibling):t=e}return r}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(e,t,r,n){super(),this._tree=e,this.from=t,this.index=r,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,n,i=0){for(let o=this;;){for(let{children:s,positions:a}=o._tree,l=t>0?s.length:-1;e!=l;e+=t){let l=s[e],c=a[e]+o.from;if(checkSide(n,r,c,c+l.length))if(l instanceof TreeBuffer){if(i&IterMode.ExcludeBuffers)continue;let s=l.findChild(0,l.buffer.length,t,r-c,n);if(s>-1)return new BufferNode(new BufferContext(o,l,e,c),null,s)}else if(i&IterMode.IncludeAnonymous||!l.type.isAnonymous||hasChild(l)){let s;if(!(i&IterMode.IgnoreMounts)&&(s=MountedTree.get(l))&&!s.overlay)return new TreeNode(s.tree,c,e,o);let a=new TreeNode(l,c,e,o);return i&IterMode.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,r,n)}}if(i&IterMode.IncludeAnonymous||!o.type.isAnonymous)return null;if(e=o.index>=0?o.index+t:t<0?-1:o._parent._tree.children.length,o=o._parent,!o)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let n;if(!(r&IterMode.IgnoreOverlays)&&(n=MountedTree.get(this._tree))&&n.overlay){let r=e-this.from;for(let{from:e,to:i}of n.overlay)if((t>0?e<=r:e<r)&&(t<0?i>=r:i>r))return new TreeNode(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(e,t,r,n){let i=e.cursor(),o=[];if(!i.firstChild())return o;if(null!=r)for(let s=!1;!s;)if(s=i.type.is(r),!i.nextSibling())return o;for(;;){if(null!=n&&i.type.is(n))return o;if(i.type.is(t)&&o.push(i.node),!i.nextSibling())return null==n?o:[]}}function matchNodeContext(e,t,r=t.length-1){for(let n=e;r>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(t[r]&&t[r]!=n.name)return!1;r--}}return!0}class BufferContext{constructor(e,t,r,n){this.parent=e,this.buffer=t,this.index=r,this.start=n}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:n}=this.context,i=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,r);return i<0?null:new BufferNode(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&IterMode.ExcludeBuffers)return null;let{buffer:n}=this.context,i=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new BufferNode(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new BufferNode(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new BufferNode(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,n=this.index+4,i=r.buffer[this.index+3];if(i>n){let o=r.buffer[this.index+1];e.push(r.slice(n,i,o)),t.push(0)}return new Tree(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(e){if(!e.length)return null;let t=0,r=e[0];for(let o=1;o<e.length;o++){let n=e[o];(n.from>r.from||n.to<r.to)&&(r=n,t=o)}let n=r instanceof TreeNode&&r.index<0?null:r.parent,i=e.slice();return n?i[t]=n:i.splice(t,1),new StackIterator(i,r)}class StackIterator{constructor(e,t){this.heads=e,this.node=t}get next(){return iterStack(this.heads)}}function stackIterator(e,t,r){let n=e.resolveInner(t,r),i=null;for(let o=n instanceof TreeNode?n:n.context.parent;o;o=o.parent)if(o.index<0){let e=o.parent;(i||(i=[n])).push(e.resolve(t,r)),o=e}else{let e=MountedTree.get(o.tree);if(e&&e.overlay&&e.overlay[0].from<=t&&e.overlay[e.overlay.length-1].to>=t){let s=new TreeNode(e.tree,e.overlay[0].from+o.from,-1,o);(i||(i=[n])).push(resolveNode(s,t,r,!1))}}return i?iterStack(i):n}class TreeCursor{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof TreeNode)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:r,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=r+n.buffer[e+1],this.to=r+n.buffer[e+2],!0}yield(e){return!!e&&(e instanceof TreeNode?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:n}=this.buffer,i=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,r);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?!(r&IterMode.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let e=r<0?0:this.stack[r]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(e)}return r<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(n.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:r}=n)}else({index:t,_parent:r}=this._tree);for(;r;({index:t,_parent:r}=r))if(t>-1)for(let n=t+e,i=e<0?-1:r._tree.children.length;n!=i;n+=e){let e=r._tree.children[n];if(this.mode&IterMode.IncludeAnonymous||e instanceof TreeBuffer||!e.type.isAnonymous||hasChild(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let n=this.index,i=this.stack.length;i>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,r=i+1;break e}n=this.stack[--i]}for(let n=r;n<this.stack.length;n++)t=new BufferNode(this.buffer,t,this.stack[n]);return this.bufferNode=new BufferNode(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let n=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){r++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&t&&t(this),n=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,n=!0}}}matchContext(e){if(!this.buffer)return matchNodeContext(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let n=e.length-1,i=this.stack.length-1;n>=0;i--){if(i<0)return matchNodeContext(this._tree,e,n);let o=r[t.buffer[this.stack[i]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function hasChild(e){return e.children.some(e=>e instanceof TreeBuffer||!e.type.isAnonymous||hasChild(e))}function buildTree(e){var t;let{buffer:r,nodeSet:n,maxBufferLength:i=DefaultBufferLength,reused:o=[],minRepeatType:s=n.types.length}=e,a=Array.isArray(r)?new FlatBufferCursor(r,r.length):r,l=n.types,c=0,u=0;function d(e,t,r,g,b,y){let{id:T,start:E,end:O,size:S}=a,x=u,v=c;if(S<0){if(a.next(),-1==S){let t=o[T];return r.push(t),void g.push(E-e)}if(-3==S)return void(c=T);if(-4==S)return void(u=T);throw new RangeError(`Unrecognized record size: ${S}`)}let _,A,C=l[T],w=E-e;if(O-E<=i&&(A=function(e,t){let r=a.fork(),n=0,o=0,l=0,c=r.end-i,u={size:0,start:0,skip:0};e:for(let i=r.pos-e;r.pos>i;){let e=r.size;if(r.id==t&&e>=0){u.size=n,u.start=o,u.skip=l,l+=4,n+=4,r.next();continue}let a=r.pos-e;if(e<0||a<i||r.start<c)break;let d=r.id>=s?4:0,p=r.start;for(r.next();r.pos>a;){if(r.size<0){if(-3!=r.size)break e;d+=4}else r.id>=s&&(d+=4);r.next()}o=p,n+=e,l+=d}return(t<0||n==e)&&(u.size=n,u.start=o,u.skip=l),u.size>4?u:void 0}(a.pos-t,b))){let t=new Uint16Array(A.size-A.skip),r=a.pos-A.size,i=t.length;for(;a.pos>r;)i=m(A.start,t,i);_=new TreeBuffer(t,O-A.start,n),w=A.start-e}else{let e=a.pos-S;a.next();let t=[],r=[],n=T>=s?T:-1,o=0,l=O;for(;a.pos>e;)n>=0&&a.id==n&&a.size>=0?(a.end<=l-i&&(h(t,r,E,o,a.end,l,n,x,v),o=t.length,l=a.end),a.next()):y>2500?p(E,e,t,r):d(E,e,t,r,n,y+1);if(n>=0&&o>0&&o<t.length&&h(t,r,E,o,E,l,n,x,v),t.reverse(),r.reverse(),n>-1&&o>0){let e=function(e,t){return(r,n,i)=>{let o,s,a=0,l=r.length-1;if(l>=0&&(o=r[l])instanceof Tree){if(!l&&o.type==e&&o.length==i)return o;(s=o.prop(NodeProp.lookAhead))&&(a=n[l]+o.length+s)}return f(e,r,n,i,a,t)}}(C,v);_=balanceRange(C,t,r,0,t.length,0,O-E,e,e)}else _=f(C,t,r,O-E,x-O,v)}r.push(_),g.push(w)}function p(e,t,r,o){let s=[],l=0,c=-1;for(;a.pos>t;){let{id:e,start:t,end:r,size:n}=a;if(n>4)a.next();else{if(c>-1&&t<c)break;c<0&&(c=r-i),s.push(e,t,r),l++,a.next()}}if(l){let t=new Uint16Array(4*l),i=s[s.length-2];for(let e=s.length-3,r=0;e>=0;e-=3)t[r++]=s[e],t[r++]=s[e+1]-i,t[r++]=s[e+2]-i,t[r++]=r;r.push(new TreeBuffer(t,s[2]-i,n)),o.push(i-e)}}function h(e,t,r,i,o,s,a,l,c){let u=[],d=[];for(;e.length>i;)u.push(e.pop()),d.push(t.pop()+r-o);e.push(f(n.types[a],u,d,s-o,l-s,c)),t.push(o-r)}function f(e,t,r,n,i,o,s){if(o){let e=[NodeProp.contextHash,o];s=s?[e].concat(s):[e]}if(i>25){let e=[NodeProp.lookAhead,i];s=s?[e].concat(s):[e]}return new Tree(e,t,r,n,s)}function m(e,t,r){let{id:n,start:i,end:o,size:l}=a;if(a.next(),l>=0&&n<s){let s=r;if(l>4){let n=a.pos-(l-4);for(;a.pos>n;)r=m(e,t,r)}t[--r]=s,t[--r]=o-e,t[--r]=i-e,t[--r]=n}else-3==l?c=n:-4==l&&(u=n);return r}let g=[],b=[];for(;a.pos>0;)d(e.start||0,e.bufferStart||0,g,b,-1,0);let y=null!==(t=e.length)&&void 0!==t?t:g.length?b[0]+g[0].length:0;return new Tree(l[e.topID],g.reverse(),b.reverse(),y)}const nodeSizeCache=new WeakMap;function nodeSize(e,t){if(!e.isAnonymous||t instanceof TreeBuffer||t.type!=e)return 1;let r=nodeSizeCache.get(t);if(null==r){r=1;for(let n of t.children){if(n.type!=e||!(n instanceof Tree)){r=1;break}r+=nodeSize(e,n)}nodeSizeCache.set(t,r)}return r}function balanceRange(e,t,r,n,i,o,s,a,l){let c=0;for(let h=n;h<i;h++)c+=nodeSize(e,t[h]);let u=Math.ceil(1.5*c/8),d=[],p=[];return function t(r,n,i,s,a){for(let c=i;c<s;){let i=c,h=n[c],f=nodeSize(e,r[c]);for(c++;c<s;c++){let t=nodeSize(e,r[c]);if(f+t>=u)break;f+=t}if(c==i+1){if(f>u){let e=r[i];t(e.children,e.positions,0,e.children.length,n[i]+a);continue}d.push(r[i])}else{let t=n[c-1]+r[c-1].length-h;d.push(balanceRange(e,r,n,i,c,h,t,null,l))}p.push(h+a-o)}}(t,r,n,i,0),(a||l)(d,p,s)}class NodeWeakMap{constructor(){this.map=new WeakMap}setBuffer(e,t,r){let n=this.map.get(e);n||this.map.set(e,n=new Map),n.set(t,r)}getBuffer(e,t){let r=this.map.get(e);return r&&r.get(t)}set(e,t){e instanceof BufferNode?this.setBuffer(e.context.buffer,e.index,t):e instanceof TreeNode&&this.map.set(e.tree,t)}get(e){return e instanceof BufferNode?this.getBuffer(e.context.buffer,e.index):e instanceof TreeNode?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class TreeFragment{constructor(e,t,r,n,i=!1,o=!1){this.from=e,this.to=t,this.tree=r,this.offset=n,this.open=(i?1:0)|(o?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],r=!1){let n=[new TreeFragment(0,e.length,e,0,!1,r)];for(let i of t)i.to>e.length&&n.push(i);return n}static applyChanges(e,t,r=128){if(!t.length)return e;let n=[],i=1,o=e.length?e[0]:null;for(let s=0,a=0,l=0;;s++){let c=s<t.length?t[s]:null,u=c?c.fromA:1e9;if(u-a>=r)for(;o&&o.from<u;){let t=o;if(a>=t.from||u<=t.to||l){let e=Math.max(t.from,a)-l,r=Math.min(t.to,u)-l;t=e>=r?null:new TreeFragment(e,r,t.tree,t.offset+l,s>0,!!c)}if(t&&n.push(t),o.to>u)break;o=i<e.length?e[i++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return n}}class Parser{startParse(e,t,r){return"string"==typeof e&&(e=new StringInput(e)),r=r?r.length?r.map(e=>new Range(e.from,e.to)):[new Range(0,0)]:[new Range(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let n=this.startParse(e,t,r);for(;;){let e=n.advance();if(e)return e}}}class StringInput{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function parseMixed(e){return(t,r,n,i)=>new MixedParse(t,e,r,n,i)}class InnerParse{constructor(e,t,r,n,i){this.parser=e,this.parse=t,this.overlay=r,this.target=n,this.from=i}}function checkRanges(e){if(!e.length||e.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(e))}class ActiveOverlay{constructor(e,t,r,n,i,o,s){this.parser=e,this.predicate=t,this.mounts=r,this.index=n,this.start=i,this.target=o,this.prev=s,this.depth=0,this.ranges=[]}}const stoppedInner=new NodeProp({perNode:!0});class MixedParse{constructor(e,t,r,n,i){this.nest=t,this.input=r,this.fragments=n,this.ranges=i,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let e=this.baseParse.advance();if(!e)return null;if(this.baseParse=null,this.baseTree=e,this.startInner(),null!=this.stoppedAt)for(let t of this.inner)t.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let e=this.baseTree;return null!=this.stoppedAt&&(e=new Tree(e.type,e.children,e.positions,e.length,e.propValues.concat([[stoppedInner,this.stoppedAt]]))),e}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[NodeProp.mounted.id]=new MountedTree(t,e.overlay,e.parser),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new FragmentCursor$2(this.fragments),t=null,r=null,n=new TreeCursor(new TreeNode(this.baseTree,this.ranges[0].from,0,null),IterMode.IncludeAnonymous|IterMode.IgnoreMounts);e:for(let i,o;;){let s,a=!0;if(null!=this.stoppedAt&&n.from>=this.stoppedAt)a=!1;else if(e.hasNode(n)){if(t){let e=t.mounts.find(e=>e.frag.from<=n.from&&e.frag.to>=n.to&&e.mount.overlay);if(e)for(let r of e.mount.overlay){let i=r.from+e.pos,o=r.to+e.pos;i>=n.from&&o<=n.to&&!t.ranges.some(e=>e.from<o&&e.to>i)&&t.ranges.push({from:i,to:o})}}a=!1}else if(r&&(o=checkCover(r.ranges,n.from,n.to)))a=2!=o;else if(!n.type.isAnonymous&&(i=this.nest(n,this.input))&&(n.from<n.to||!i.overlay)){n.tree||(materialize(n),t&&t.depth++,r&&r.depth++);let o=e.findMounts(n.from,i.parser);if("function"==typeof i.overlay)t=new ActiveOverlay(i.parser,i.overlay,o,this.inner.length,n.from,n.tree,t);else{let e=punchRanges(this.ranges,i.overlay||(n.from<n.to?[new Range(n.from,n.to)]:[]));e.length&&checkRanges(e),!e.length&&i.overlay||this.inner.push(new InnerParse(i.parser,e.length?i.parser.startParse(this.input,enterFragments(o,e),e):i.parser.startParse(""),i.overlay?i.overlay.map(e=>new Range(e.from-n.from,e.to-n.from)):null,n.tree,e.length?e[0].from:n.from)),i.overlay?e.length&&(r={ranges:e,depth:0,prev:r}):a=!1}}else if(t&&(s=t.predicate(n))&&(!0===s&&(s=new Range(n.from,n.to)),s.from<s.to)){let e=t.ranges.length-1;e>=0&&t.ranges[e].to==s.from?t.ranges[e]={from:t.ranges[e].from,to:s.to}:t.ranges.push(s)}if(a&&n.firstChild())t&&t.depth++,r&&r.depth++;else for(;!n.nextSibling();){if(!n.parent())break e;if(t&&! --t.depth){let e=punchRanges(this.ranges,t.ranges);e.length&&(checkRanges(e),this.inner.splice(t.index,0,new InnerParse(t.parser,t.parser.startParse(this.input,enterFragments(t.mounts,e),e),t.ranges.map(e=>new Range(e.from-t.start,e.to-t.start)),t.target,e[0].from))),t=t.prev}r&&! --r.depth&&(r=r.prev)}}}}function checkCover(e,t,r){for(let n of e){if(n.from>=r)break;if(n.to>t)return n.from<=t&&n.to>=r?2:1}return 0}function sliceBuf(e,t,r,n,i,o){if(t<r){let s=e.buffer[t+1];n.push(e.slice(t,r,s)),i.push(s-o)}}function materialize(e){let{node:t}=e,r=[],n=t.context.buffer;do{r.push(e.index),e.parent()}while(!e.tree);let i=e.tree,o=i.children.indexOf(n),s=i.children[o],a=s.buffer,l=[o];i.children[o]=function e(n,i,o,c,u,d){let p=r[d],h=[],f=[];sliceBuf(s,n,p,h,f,c);let m=a[p+1],g=a[p+2];l.push(h.length);let b=d?e(p+4,a[p+3],s.set.types[a[p]],m,g-m,d-1):t.toTree();return h.push(b),f.push(m-c),sliceBuf(s,a[p+3],i,h,f,c),new Tree(o,h,f,u)}(0,a.length,NodeType.none,0,s.length,r.length-1);for(let c of l){let t=e.tree.children[c],r=e.tree.positions[c];e.yield(new TreeNode(t,r+e.from,c,e._tree))}}class StructureCursor{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(IterMode.IncludeAnonymous|IterMode.IgnoreMounts)}moveTo(e){let{cursor:t}=this,r=e-this.offset;for(;!this.done&&t.from<r;)t.to>=e&&t.enter(r,1,IterMode.IgnoreOverlays|IterMode.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(!(t.children.length&&0==t.positions[0]&&t.children[0]instanceof Tree))break;t=t.children[0]}return!1}}let FragmentCursor$2=class{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=null!==(t=r.tree.prop(stoppedInner))&&void 0!==t?t:r.to,this.inner=new StructureCursor(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=null!==(e=t.tree.prop(stoppedInner))&&void 0!==e?e:t.to,this.inner=new StructureCursor(t.tree,-t.offset)}}findMounts(e,t){var r;let n=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let e=this.inner.cursor.node;e;e=e.parent){let i=null===(r=e.tree)||void 0===r?void 0:r.prop(NodeProp.mounted);if(i&&i.parser==t)for(let t=this.fragI;t<this.fragments.length;t++){let r=this.fragments[t];if(r.from>=e.to)break;r.tree==this.curFrag.tree&&n.push({frag:r,pos:e.from-r.offset,mount:i})}}}return n}};function punchRanges(e,t){let r=null,n=t;for(let i=1,o=0;i<e.length;i++){let s=e[i-1].to,a=e[i].from;for(;o<n.length;o++){let e=n[o];if(e.from>=a)break;e.to<=s||(r||(n=r=t.slice()),e.from<s?(r[o]=new Range(e.from,s),e.to>a&&r.splice(o+1,0,new Range(a,e.to))):e.to>a?r[o--]=new Range(a,e.to):r.splice(o--,1))}}return n}function findCoverChanges(e,t,r,n){let i=0,o=0,s=!1,a=!1,l=-1e9,c=[];for(;;){let u=i==e.length?1e9:s?e[i].to:e[i].from,d=o==t.length?1e9:a?t[o].to:t[o].from;if(s!=a){let e=Math.max(l,r),t=Math.min(u,d,n);e<t&&c.push(new Range(e,t))}if(l=Math.min(u,d),1e9==l)break;u==l&&(s?(s=!1,i++):s=!0),d==l&&(a?(a=!1,o++):a=!0)}return c}function enterFragments(e,t){let r=[];for(let{pos:n,mount:i,frag:o}of e){let e=n+(i.overlay?i.overlay[0].from:0),s=e+i.tree.length,a=Math.max(o.from,e),l=Math.min(o.to,s);if(i.overlay){let s=findCoverChanges(t,i.overlay.map(e=>new Range(e.from+n,e.to+n)),a,l);for(let t=0,n=a;;t++){let a=t==s.length,c=a?l:s[t].from;if(c>n&&r.push(new TreeFragment(n,c,i.tree,-e,o.from>=n||o.openStart,o.to<=c||o.openEnd)),a)break;n=s[t].to}}else r.push(new TreeFragment(a,l,i.tree,-e,o.from>=e||o.openStart,o.to<=s||o.openEnd))}return r}let nextTagID=0;class Tag{constructor(e,t,r,n){this.name=e,this.set=t,this.base=r,this.modified=n,this.id=nextTagID++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r="string"==typeof e?e:"?";if(e instanceof Tag&&(t=e),null==t?void 0:t.base)throw new Error("Can not derive from a modified tag");let n=new Tag(r,[],null,[]);if(n.set.push(n),t)for(let i of t.set)n.set.push(i);return n}static defineModifier(e){let t=new Modifier(e);return e=>e.modified.indexOf(t)>-1?e:Modifier.get(e.base||e,e.modified.concat(t).sort((e,t)=>e.id-t.id))}}let nextModifierID=0;class Modifier{constructor(e){this.name=e,this.instances=[],this.id=nextModifierID++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(r=>r.base==e&&sameArray(t,r.modified));if(r)return r;let n=[],i=new Tag(e.name,n,e,t);for(let s of t)s.instances.push(i);let o=powerSet(t);for(let s of e.set)if(!s.modified.length)for(let e of o)n.push(Modifier.get(s,e));return i}}function sameArray(e,t){return e.length==t.length&&e.every((e,r)=>e==t[r])}function powerSet(e){let t=[[]];for(let r=0;r<e.length;r++)for(let n=0,i=t.length;n<i;n++)t.push(t[n].concat(e[r]));return t.sort((e,t)=>t.length-e.length)}function styleTags(e){let t=Object.create(null);for(let r in e){let n=e[r];Array.isArray(n)||(n=[n]);for(let e of r.split(" "))if(e){let r=[],i=2,o=e;for(let t=0;;){if("..."==o&&t>0&&t+3==e.length){i=1;break}let n=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!n)throw new RangeError("Invalid path: "+e);if(r.push("*"==n[0]?"":'"'==n[0][0]?JSON.parse(n[0]):n[0]),t+=n[0].length,t==e.length)break;let s=e[t++];if(t==e.length&&"!"==s){i=0;break}if("/"!=s)throw new RangeError("Invalid path: "+e);o=e.slice(t)}let s=r.length-1,a=r[s];if(!a)throw new RangeError("Invalid path: "+e);let l=new Rule(n,i,s>0?r.slice(0,s):null);t[a]=l.sort(t[a])}}return ruleNodeProp.add(t)}const ruleNodeProp=new NodeProp({combine(e,t){let r,n,i;for(;e||t;){if(!e||t&&e.depth>=t.depth?(i=t,t=t.next):(i=e,e=e.next),r&&r.mode==i.mode&&!i.context&&!r.context)continue;let o=new Rule(i.tags,i.mode,i.context);r?r.next=o:n=o,r=o}return n}});class Rule{constructor(e,t,r,n){this.tags=e,this.mode=t,this.context=r,this.next=n}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function tagHighlighter(e,t){let r=Object.create(null);for(let o of e)if(Array.isArray(o.tag))for(let e of o.tag)r[e.id]=o.class;else r[o.tag.id]=o.class;let{scope:n,all:i=null}=t||{};return{style:e=>{let t=i;for(let n of e)for(let e of n.set){let n=r[e.id];if(n){t=t?t+" "+n:n;break}}return t},scope:n}}function highlightTags(e,t){let r=null;for(let n of e){let e=n.style(t);e&&(r=r?r+" "+e:e)}return r}function highlightTree(e,t,r,n=0,i=e.length){let o=new HighlightBuilder(n,Array.isArray(t)?t:[t],r);o.highlightRange(e.cursor(),n,i,"",o.highlighters),o.flush(i)}Rule.empty=new Rule([],2,null);class HighlightBuilder{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,n,i){let{type:o,from:s,to:a}=e;if(s>=r||a<=t)return;o.isTop&&(i=this.highlighters.filter(e=>!e.scope||e.scope(o)));let l=n,c=getStyleTags(e)||Rule.empty,u=highlightTags(i,c.tags);if(u&&(l&&(l+=" "),l+=u,1==c.mode&&(n+=(n?" ":"")+u)),this.startSpan(Math.max(t,s),l),c.opaque)return;let d=e.tree&&e.tree.prop(NodeProp.mounted);if(d&&d.overlay){let o=e.node.enter(d.overlay[0].from+s,1),c=this.highlighters.filter(e=>!e.scope||e.scope(d.tree.type)),u=e.firstChild();for(let p=0,h=s;;p++){let f=p<d.overlay.length?d.overlay[p]:null,m=f?f.from+s:a,g=Math.max(t,h),b=Math.min(r,m);if(g<b&&u)for(;e.from<b&&(this.highlightRange(e,g,b,n,i),this.startSpan(Math.min(b,e.to),l),!(e.to>=m)&&e.nextSibling()););if(!f||m>r)break;h=f.to+s,h>t&&(this.highlightRange(o.cursor(),Math.max(t,f.from+s),Math.min(r,h),"",c),this.startSpan(Math.min(r,h),l))}u&&e.parent()}else if(e.firstChild()){d&&(n="");do{if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,n,i),this.startSpan(Math.min(r,e.to),l)}}while(e.nextSibling());e.parent()}}}function getStyleTags(e){let t=e.type.prop(ruleNodeProp);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}const t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading$4=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags$1={comment:comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name:name,variableName:t(name),typeName:typeName,tagName:t(typeName),propertyName:propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal:literal,string:string,docString:t(string),character:t(string),attributeValue:t(string),number:number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword:keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator:operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation:punctuation,separator:t(punctuation),bracket:bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content:content,heading:heading$4,heading1:t(heading$4),heading2:t(heading$4),heading3:t(heading$4),heading4:t(heading$4),heading5:t(heading$4),heading6:t(heading$4),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta:meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier("definition"),constant:Tag.defineModifier("constant"),function:Tag.defineModifier("function"),standard:Tag.defineModifier("standard"),local:Tag.defineModifier("local"),special:Tag.defineModifier("special")};for(let e in tags$1){let t=tags$1[e];t instanceof Tag&&(t.name=e)}var _a;tagHighlighter([{tag:tags$1.link,class:"tok-link"},{tag:tags$1.heading,class:"tok-heading"},{tag:tags$1.emphasis,class:"tok-emphasis"},{tag:tags$1.strong,class:"tok-strong"},{tag:tags$1.keyword,class:"tok-keyword"},{tag:tags$1.atom,class:"tok-atom"},{tag:tags$1.bool,class:"tok-bool"},{tag:tags$1.url,class:"tok-url"},{tag:tags$1.labelName,class:"tok-labelName"},{tag:tags$1.inserted,class:"tok-inserted"},{tag:tags$1.deleted,class:"tok-deleted"},{tag:tags$1.literal,class:"tok-literal"},{tag:tags$1.string,class:"tok-string"},{tag:tags$1.number,class:"tok-number"},{tag:[tags$1.regexp,tags$1.escape,tags$1.special(tags$1.string)],class:"tok-string2"},{tag:tags$1.variableName,class:"tok-variableName"},{tag:tags$1.local(tags$1.variableName),class:"tok-variableName tok-local"},{tag:tags$1.definition(tags$1.variableName),class:"tok-variableName tok-definition"},{tag:tags$1.special(tags$1.variableName),class:"tok-variableName2"},{tag:tags$1.definition(tags$1.propertyName),class:"tok-propertyName tok-definition"},{tag:tags$1.typeName,class:"tok-typeName"},{tag:tags$1.namespace,class:"tok-namespace"},{tag:tags$1.className,class:"tok-className"},{tag:tags$1.macroName,class:"tok-macroName"},{tag:tags$1.propertyName,class:"tok-propertyName"},{tag:tags$1.operator,class:"tok-operator"},{tag:tags$1.comment,class:"tok-comment"},{tag:tags$1.meta,class:"tok-meta"},{tag:tags$1.invalid,class:"tok-invalid"},{tag:tags$1.punctuation,class:"tok-punctuation"}]);const languageDataProp=new NodeProp;function defineLanguageFacet(e){return Facet.define({combine:e?t=>t.concat(e):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(e,t,r=[],n=""){this.data=e,this.name=n,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=t,this.extension=[language.of(this),EditorState.languageData.of((e,t,r)=>{let n=topNodeAt(e,t,r),i=n.type.prop(languageDataProp);if(!i)return[];let o=e.facet(i),s=n.type.prop(sublanguageProp);if(s){let i=n.resolve(t-n.from,r);for(let t of s)if(t.test(i,e)){let r=e.facet(t.facet);return"replace"==t.type?r:r.concat(o)}}return o})].concat(r)}isActiveAt(e,t,r=-1){return topNodeAt(e,t,r).type.prop(languageDataProp)==this.data}findRegions(e){let t=e.facet(language);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],n=(e,t)=>{if(e.prop(languageDataProp)==this.data)return void r.push({from:t,to:t+e.length});let i=e.prop(NodeProp.mounted);if(i){if(i.tree.prop(languageDataProp)==this.data){if(i.overlay)for(let e of i.overlay)r.push({from:e.from+t,to:e.to+t});else r.push({from:t,to:t+e.length});return}if(i.overlay){let e=r.length;if(n(i.tree,i.overlay[0].from+t),r.length>e)return}}for(let r=0;r<e.children.length;r++){let i=e.children[r];i instanceof Tree&&n(i,e.positions[r]+t)}};return n(syntaxTree(e),0),r}get allowsNesting(){return!0}}function topNodeAt(e,t,r){let n=e.facet(language),i=syntaxTree(e).topNode;if(!n||n.allowsNesting)for(let o=i;o;o=o.enter(t,r,IterMode.ExcludeBuffers))o.type.isTop&&(i=o);return i}Language.setState=StateEffect.define();class LRLanguage extends Language{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=defineLanguageFacet(e.languageData);return new LRLanguage(t,e.parser.configure({props:[languageDataProp.add(e=>e.isTop?t:void 0)]}),e.name)}configure(e,t){return new LRLanguage(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(e){let t=e.field(Language.state,!1);return t?t.tree:Tree.empty}class DocInput{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let currentContext=null;class ParseContext{constructor(e,t,r=[],n,i,o,s,a){this.parser=e,this.state=t,this.fragments=r,this.tree=n,this.treeLen=i,this.viewport=o,this.skipped=s,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new ParseContext(e,t,[],Tree.empty,0,r,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=Tree.empty&&this.isDone(null!=t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n){if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(n,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(r=this.parse.stoppedAt)&&void 0!==r?r:this.state.doc.length,this.tree=n,this.parse=null,!(this.treeLen<(null!=t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=currentContext;currentContext=this;try{return e()}finally{currentContext=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=cutFragments(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:n,treeLen:i,viewport:o,skipped:s}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges((e,r,n,i)=>t.push({fromA:e,toA:r,fromB:n,toB:i})),r=TreeFragment.applyChanges(r,t),n=Tree.empty,i=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){s=[];for(let t of this.skipped){let r=e.mapPos(t.from,1),n=e.mapPos(t.to,-1);r<n&&s.push({from:r,to:n})}}}return new ParseContext(this.parser,t,r,n,i,o,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:t,to:n}=this.skipped[r];t<e.to&&n>e.from&&(this.fragments=cutFragments(this.fragments,t,n),this.skipped.splice(r--,1))}return!(this.skipped.length>=t||(this.reset(),0))}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Parser{createParse(t,r,n){let i=n[0].from,o=n[n.length-1].to;return{parsedPos:i,advance(){let t=currentContext;if(t){for(let e of n)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=o,new Tree(NodeType.none,[],[],o-i)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return currentContext}}function cutFragments(e,t,r){return TreeFragment.applyChanges(e,[{fromA:t,toA:r,fromB:t,toB:r}])}class LanguageState{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new LanguageState(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=ParseContext.create(e.facet(language).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new LanguageState(r)}}Language.state=StateField.define({create:LanguageState.init,update(e,t){for(let r of t.effects)if(r.is(Language.setState))return r.value;return t.startState.facet(language)!=t.state.facet(language)?LanguageState.init(t.state):e.apply(t)}});let requestIdle=e=>{let t=setTimeout(()=>e(),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(requestIdle=e=>{let t=-1,r=setTimeout(()=>{t=requestIdleCallback(e,{timeout:400})},100);return()=>t<0?clearTimeout(r):cancelIdleCallback(t)});const isInputPending="undefined"!=typeof navigator&&(null===(_a=navigator.scheduling)||void 0===_a?void 0:_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Language.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Language.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=requestIdle(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:n}}=this.view,i=r.field(Language.state);if(i.tree==i.context.tree&&i.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!isInputPending?Math.max(25,e.timeRemaining()-5):1e9),s=i.context.treeLen<n&&r.doc.length>n+1e3,a=i.context.work(()=>isInputPending&&isInputPending()||Date.now()>o,n+(s?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(i.context))})),this.chunkBudget>0&&(!a||s)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(e=>logException(this.view.state,e)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine:e=>e.length?e[0]:null,enables:e=>[Language.state,parseWorker,EditorView.contentAttributes.compute([e],t=>{let r=t.facet(e);return r&&r.name?{"data-language":r.name}:{}})]});class LanguageSupport{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}class LanguageDescription{constructor(e,t,r,n,i,o=void 0){this.name=e,this.alias=t,this.extensions=r,this.filename=n,this.loadFunc=i,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:t,support:r}=e;if(!t){if(!r)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");t=()=>Promise.resolve(r)}return new LanguageDescription(e.name,(e.alias||[]).concat(e.name).map(e=>e.toLowerCase()),e.extensions||[],e.filename,t,r)}static matchFilename(e,t){for(let n of e)if(n.filename&&n.filename.test(t))return n;let r=/\.([^.]+)$/.exec(t);if(r)for(let n of e)if(n.extensions.indexOf(r[1])>-1)return n;return null}static matchLanguageName(e,t,r=!0){t=t.toLowerCase();for(let n of e)if(n.alias.some(e=>e==t))return n;if(r)for(let n of e)for(let e of n.alias){let r=t.indexOf(e);if(r>-1&&(e.length>2||!/\w/.test(t[r-1])&&!/\w/.test(t[r+e.length])))return n}return null}}const indentService=Facet.define(),indentUnit=Facet.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some(e=>e!=t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function getIndentUnit(e){let t=e.facet(indentUnit);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function indentString(e,t){let r="",n=e.tabSize,i=e.facet(indentUnit)[0];if("\t"==i){for(;t>=n;)r+="\t",t-=n;i=" "}for(let o=0;o<t;o++)r+=i;return r}function getIndentation(e,t){e instanceof EditorState&&(e=new IndentContext(e));for(let n of e.state.facet(indentService)){let r=n(e,t);if(void 0!==r)return r}let r=syntaxTree(e.state);return r.length>=t?syntaxIndentation(e,r,t):null}class IndentContext{constructor(e,t={}){this.state=e,this.options=t,this.unit=getIndentUnit(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:i}=this.options;return null!=n&&n>=r.from&&n<=r.to?i&&n==e?{text:"",from:e}:(t<0?n<e:n<=e)?{text:r.text.slice(n-r.from),from:n}:{text:r.text.slice(0,n-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:n}=this.lineAt(e,t);return r.slice(e-n,Math.min(r.length,e+100-n))}column(e,t=1){let{text:r,from:n}=this.lineAt(e,t),i=this.countColumn(r,e-n),o=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return o>-1&&(i+=o-this.countColumn(r,r.search(/\S|$/))),i}countColumn(e,t=e.length){return countColumn(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:n}=this.lineAt(e,t),i=this.options.overrideIndentation;if(i){let e=i(n);if(e>-1)return e}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(e,t,r){let n=t.resolveStack(r),i=t.resolveInner(r,-1).resolve(r,0).enterUnfinishedNodesBefore(r);if(i!=n.node){let e=[];for(let t=i;t&&!(t.from<n.node.from||t.to>n.node.to||t.from==n.node.from&&t.type==n.node.type);t=t.parent)e.push(t);for(let t=e.length-1;t>=0;t--)n={node:e[t],next:n}}return indentFor(n,e,r)}function indentFor(e,t,r){for(let n=e;n;n=n.next){let e=indentStrategy(n.node);if(e)return e(TreeIndentContext.create(t,r,n))}return 0}function ignoreClosed(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}function indentStrategy(e){let t=e.type.prop(indentNodeProp);if(t)return t;let r,n=e.firstChild;if(n&&(r=n.type.prop(NodeProp.closedBy))){let t=e.lastChild,n=t&&r.indexOf(t.name)>-1;return e=>delimitedStrategy(e,!0,1,void 0,n&&!ignoreClosed(e)?t.from:void 0)}return null==e.parent?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new TreeIndentContext(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(isParent(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(e,t){for(let r=t;r;r=r.parent)if(e==r)return!0;return!1}function bracketedAligned(e){let t=e.node,r=t.childAfter(t.from),n=t.lastChild;if(!r)return null;let i=e.options.simulateBreak,o=e.state.doc.lineAt(r.from),s=null==i||i<=o.from?o.to:Math.min(o.to,i);for(let a=r.to;;){let e=t.childAfter(a);if(!e||e==n)return null;if(!e.type.isSkipped){if(e.from>=s)return null;let t=/^ */.exec(o.text.slice(r.to-o.from))[0].length;return{from:r.from,to:r.to+t}}a=e.to}}function delimitedIndent({closing:e,align:t=!0,units:r=1}){return n=>delimitedStrategy(n,t,r,e)}function delimitedStrategy(e,t,r,n,i){let o=e.textAfter,s=o.match(/^\s*/)[0].length,a=n&&o.slice(s,s+n.length)==n||i==e.pos+s,l=t?bracketedAligned(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*r)}const flatIndent=e=>e.baseIndent;function continuedIndent({except:e,units:t=1}={}){return r=>{let n=e&&e.test(r.textAfter);return r.baseIndent+(n?0:t*r.unit)}}const foldService=Facet.define(),foldNodeProp=new NodeProp;function foldInside(e){let t=e.firstChild,r=e.lastChild;return t&&t.to<r.from?{from:t.to,to:r.type.isError?e.to:r.from}:null}class HighlightStyle{constructor(e,t){let r;function n(e){let t=StyleModule.newName();return(r||(r=Object.create(null)))["."+t]=e,t}this.specs=e;const i="string"==typeof t.all?t.all:t.all?n(t.all):void 0,o=t.scope;this.scope=o instanceof Language?e=>e.prop(languageDataProp)==o.data:o?e=>e==o:void 0,this.style=tagHighlighter(e.map(e=>({tag:e.tag,class:e.class||n(Object.assign({},e,{tag:null}))})),{all:i}).style,this.module=r?new StyleModule(r):null,this.themeType=t.themeType}static define(e,t){return new HighlightStyle(e,t||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine:e=>e.length?[e[0]]:null});function getHighlighters(e){let t=e.facet(highlighterFacet);return t.length?t:e.facet(fallbackHighlighter)}function syntaxHighlighting(e,t){let r,n=[treeHighlighter];return e instanceof HighlightStyle&&(e.module&&n.push(EditorView.styleModule.of(e.module)),r=e.themeType),r?n.push(highlighterFacet.computeN([EditorView.darkTheme],t=>t.facet(EditorView.darkTheme)==("dark"==r)?[e]:[])):n.push(highlighterFacet.of(e)),n}class TreeHighlighter{constructor(e){this.markCache=Object.create(null),this.tree=syntaxTree(e.state),this.decorations=this.buildDeco(e,getHighlighters(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=syntaxTree(e.state),r=getHighlighters(e.state),n=r!=getHighlighters(e.startState),{viewport:i}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<i.to&&!n&&t.type==this.tree.type&&o>=i.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||n)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=i.to)}buildDeco(e,t){if(!t||!this.tree.length)return Decoration.none;let r=new RangeSetBuilder;for(let{from:n,to:i}of e.visibleRanges)highlightTree(this.tree,t,(e,t,n)=>{r.add(e,t,this.markCache[n]||(this.markCache[n]=Decoration.mark({class:n})))},n,i);return r.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:e=>e.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags$1.meta,color:"#404740"},{tag:tags$1.link,textDecoration:"underline"},{tag:tags$1.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags$1.emphasis,fontStyle:"italic"},{tag:tags$1.strong,fontWeight:"bold"},{tag:tags$1.strikethrough,textDecoration:"line-through"},{tag:tags$1.keyword,color:"#708"},{tag:[tags$1.atom,tags$1.bool,tags$1.url,tags$1.contentSeparator,tags$1.labelName],color:"#219"},{tag:[tags$1.literal,tags$1.inserted],color:"#164"},{tag:[tags$1.string,tags$1.deleted],color:"#a11"},{tag:[tags$1.regexp,tags$1.escape,tags$1.special(tags$1.string)],color:"#e40"},{tag:tags$1.definition(tags$1.variableName),color:"#00f"},{tag:tags$1.local(tags$1.variableName),color:"#30a"},{tag:[tags$1.typeName,tags$1.namespace],color:"#085"},{tag:tags$1.className,color:"#167"},{tag:[tags$1.special(tags$1.variableName),tags$1.macroName],color:"#256"},{tag:tags$1.definition(tags$1.propertyName),color:"#00c"},{tag:tags$1.comment,color:"#940"},{tag:tags$1.invalid,color:"#f00"}]),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingHandle=new NodeProp;function matchingNodes(e,t,r){let n=e.prop(t<0?NodeProp.openedBy:NodeProp.closedBy);if(n)return n;if(1==e.name.length){let n=r.indexOf(e.name);if(n>-1&&n%2==(t<0?1:0))return[r[n+t]]}return null}function findHandle(e){let t=e.type.prop(bracketMatchingHandle);return t?t(e.node):e}function matchBrackets(e,t,r,n={}){let i=n.maxScanDistance||DefaultScanDist,o=n.brackets||DefaultBrackets,s=syntaxTree(e),a=s.resolveInner(t,r);for(let l=a;l;l=l.parent){let n=matchingNodes(l.type,r,o);if(n&&l.from<l.to){let i=findHandle(l);if(i&&(r>0?t>=i.from&&t<i.to:t>i.from&&t<=i.to))return matchMarkedBrackets(e,t,r,l,i,n,o)}}return matchPlainBrackets(e,t,r,s,a.type,i,o)}function matchMarkedBrackets(e,t,r,n,i,o,s){let a=n.parent,l={from:i.from,to:i.to},c=0,u=null==a?void 0:a.cursor();if(u&&(r<0?u.childBefore(n.from):u.childAfter(n.to)))do{if(r<0?u.to<=n.from:u.from>=n.to){if(0==c&&o.indexOf(u.type.name)>-1&&u.from<u.to){let e=findHandle(u);return{start:l,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}if(matchingNodes(u.type,r,s))c++;else if(matchingNodes(u.type,-r,s)){if(0==c){let e=findHandle(u);return{start:l,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}c--}}}while(r<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function matchPlainBrackets(e,t,r,n,i,o,s){let a=r<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=s.indexOf(a);if(l<0||l%2==0!=r>0)return null;let c={from:r<0?t-1:t,to:r>0?t+1:t},u=e.doc.iterRange(t,r>0?e.doc.length:0),d=0;for(let p=0;!u.next().done&&p<=o;){let e=u.value;r<0&&(p+=e.length);let o=t+p*r;for(let t=r>0?0:e.length-1,a=r>0?e.length:-1;t!=a;t+=r){let a=s.indexOf(e[t]);if(!(a<0||n.resolveInner(o+t,1).type!=i))if(a%2==0==r>0)d++;else{if(1==d)return{start:c,end:{from:o+t,to:o+t+1},matched:a>>1==l>>1};d--}}r>0&&(p+=e.length)}return u.done?{start:c,matched:!1}:null}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[e,r]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[e]=createTokenType(noTokens,r);function warnForPart(e,t){warned.indexOf(e)>-1||warned.push(e)}function createTokenType(e,t){let r=[];for(let a of t.split(" ")){let t=[];for(let r of a.split(".")){let n=e[r]||tags$1[r];n?"function"==typeof n?t.length?t=t.map(n):warnForPart(r,`Modifier ${r} used at start of tag`):t.length?warnForPart(r,`Tag ${r} used as modifier`):t=Array.isArray(n)?n:[n]:warnForPart(r,`Unknown highlighting tag ${r}`)}for(let e of t)r.push(e)}if(!r.length)return 0;let n=t.replace(/ /g,"_"),i=n+" "+r.map(e=>e.id),o=byTag[i];if(o)return o.id;let s=byTag[i]=NodeType.define({id:typeArray.length,name:n,props:[styleTags({[n]:r})]});return typeArray.push(s),s.id}Direction.RTL,Direction.LTR;class CompletionContext{constructor(e,t,r,n){this.state=e,this.pos=t,this.explicit=r,this.view=n,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=syntaxTree(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),n=t.text.slice(r-t.from,this.pos-t.from),i=n.search(ensureAnchor(e,!1));return i<0?null:{from:r+i,to:this.pos,text:n.slice(i)}}get aborted(){return null==this.abortListeners}addEventListener(e,t,r){"abort"==e&&this.abortListeners&&(this.abortListeners.push(t),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function toSet(e){let t=Object.keys(e).join(""),r=/\w/.test(t);return r&&(t=t.replace(/\w/g,"")),`[${r?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(e){let t=Object.create(null),r=Object.create(null);for(let{label:i}of e){t[i[0]]=!0;for(let e=1;e<i.length;e++)r[i[e]]=!0}let n=toSet(t)+toSet(r)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function completeFromList(e){let t=e.map(e=>"string"==typeof e?{label:e}:e),[r,n]=t.every(e=>/^\w+$/.test(e.label))?[/\w*$/,/\w+$/]:prefixMatch(t);return e=>{let i=e.matchBefore(n);return i||e.explicit?{from:i?i.from:e.pos,options:t,validFor:r}:null}}function ifNotIn(e,t){return r=>{for(let t=syntaxTree(r.state).resolveInner(r.pos,-1);t;t=t.parent){if(e.indexOf(t.name)>-1)return null;if(t.type.isTop)break}return t(r)}}class Option{constructor(e,t,r,n){this.completion=e,this.source=t,this.match=r,this.score=n}}function cur(e){return e.selection.main.from}function ensureAnchor(e,t){var r;let{source:n}=e,i=t&&"^"!=n[0],o="$"!=n[n.length-1];return i||o?new RegExp(`${i?"^":""}(?:${n})${o?"$":""}`,null!==(r=e.flags)&&void 0!==r?r:e.ignoreCase?"i":""):e}const pickedCompletion=Annotation.define();function insertCompletionText(e,t,r,n){let{main:i}=e.selection,o=r-i.from,s=n-i.from;return{...e.changeByRange(a=>{if(a!=i&&r!=n&&e.sliceDoc(a.from+o,a.from+s)!=e.sliceDoc(r,n))return{range:a};let l=e.toText(t);return{changes:{from:a.from+o,to:n==i.from?a.to:a.from+s,insert:l},range:EditorSelection.cursor(a.from+o+l.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const SourceCache=new WeakMap;function asSource(e){if(!Array.isArray(e))return e;let t=SourceCache.get(e);return t||SourceCache.set(e,t=completeFromList(e)),t}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define();class FuzzyMatcher{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let r=codePointAt(e,t),n=codePointSize(r);this.chars.push(r);let i=e.slice(t,t+n),o=i.toUpperCase();this.folded.push(codePointAt(o==i?i.toLowerCase():o,0)),t+=n}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(0==this.pattern.length)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:n,precise:i,byWord:o}=this;if(1==t.length){let n=codePointAt(e,0),i=codePointSize(n),o=i==e.length?0:-100;if(n==t[0]);else{if(n!=r[0])return null;o+=-200}return this.ret(o,[0,i])}let s=e.indexOf(this.pattern);if(0==s)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,l=0;if(s<0){for(let i=0,o=Math.min(e.length,200);i<o&&l<a;){let o=codePointAt(e,i);o!=t[l]&&o!=r[l]||(n[l++]=i),i+=codePointSize(o)}if(l<a)return null}let c=0,u=0,d=!1,p=0,h=-1,f=-1,m=/[a-z]/.test(e),g=!0;for(let b=0,y=Math.min(e.length,200),T=0;b<y&&u<a;){let n=codePointAt(e,b);s<0&&(c<a&&n==t[c]&&(i[c++]=b),p<a&&(n==t[p]||n==r[p]?(0==p&&(h=b),f=b+1,p++):p=0));let l,y=n<255?n>=48&&n<=57||n>=97&&n<=122?2:n>=65&&n<=90?1:0:(l=fromCodePoint(n))!=l.toLowerCase()?1:l!=l.toUpperCase()?2:0;(!b||1==y&&m||0==T&&0!=y)&&(t[u]==n||r[u]==n&&(d=!0)?o[u++]=b:o.length&&(g=!1)),T=y,b+=codePointSize(n)}return u==a&&0==o[0]&&g?this.result((d?-200:0)-100,o,e):p==a&&0==h?this.ret(-200-e.length+(f==e.length?0:-100),[0,f]):s>-1?this.ret(-700-e.length,[s,s+this.pattern.length]):p==a?this.ret(-900-e.length,[h,f]):u==a?this.result((d?-200:0)-100-700+(g?0:-1100),o,e):2==t.length?null:this.result((n[0]?-700:0)-200-1100,n,e)}result(e,t,r){let n=[],i=0;for(let o of t){let e=o+(this.astral?codePointSize(codePointAt(r,o)):1);i&&n[i-1]==o?n[i-1]=e:(n[i++]=o,n[i++]=e)}return this.ret(e-r.length,n)}}class StrictMatcher{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),r=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return null==r?null:(this.matched=[0,t.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const completionConfig=Facet.define({combine:e=>combineConfig(e,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>joinClass(e(r),t(r)),optionClass:(e,t)=>r=>joinClass(e(r),t(r)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})});function joinClass(e,t){return e?t?e+" "+t:e:t}function defaultPositionInfo(e,t,r,n,i,o){let s,a,l=e.textDirection==Direction.RTL,c=l,u=!1,d="top",p=t.left-i.left,h=i.right-t.right,f=n.right-n.left,m=n.bottom-n.top;if(c&&p<Math.min(f,h)?c=!1:!c&&h<Math.min(f,p)&&(c=!0),f<=(c?p:h))s=Math.max(i.top,Math.min(r.top,i.bottom-m))-t.top,a=Math.min(400,c?p:h);else{u=!0,a=Math.min(400,(l?t.right:i.right-t.left)-30);let e=i.bottom-t.bottom;e>=m||e>t.top?s=r.bottom-t.top:(d="bottom",s=t.bottom-r.top)}return{style:`${d}: ${s/((t.bottom-t.top)/o.offsetHeight)}px; max-width: ${a/((t.right-t.left)/o.offsetWidth)}px`,class:"cm-completionInfo-"+(u?l?"left-narrow":"right-narrow":c?"left":"right")}}function optionContent(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map(e=>"cm-completionIcon-"+e)),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,r,n){let i=document.createElement("span");i.className="cm-completionLabel";let o=e.displayLabel||e.label,s=0;for(let a=0;a<n.length;){let e=n[a++],t=n[a++];e>s&&i.appendChild(document.createTextNode(o.slice(s,e)));let r=i.appendChild(document.createElement("span"));r.appendChild(document.createTextNode(o.slice(e,t))),r.className="cm-completionMatchedText",s=t}return s<o.length&&i.appendChild(document.createTextNode(o.slice(s))),i},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort((e,t)=>e.position-t.position).map(e=>e.render)}function rangeAroundSelected(e,t,r){if(e<=r)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let e=Math.floor(t/r);return{from:e*r,to:(e+1)*r}}let n=Math.floor((e-t)/r);return{from:e-(n+1)*r,to:e-n*r}}class CompletionTooltip{constructor(e,t,r){this.view=e,this.stateField=t,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:e=>this.placeInfo(e),key:this},this.space=null,this.currentClass="";let n=e.state.field(t),{options:i,selected:o}=n.open,s=e.state.facet(completionConfig);this.optionContent=optionContent(s),this.optionClass=s.optionClass,this.tooltipClass=s.tooltipClass,this.range=rangeAroundSelected(i.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",r=>{let{options:n}=e.state.field(t).open;for(let t,i=r.target;i&&i!=this.dom;i=i.parentNode)if("LI"==i.nodeName&&(t=/-(\d+)$/.exec(i.id))&&+t[1]<n.length)return this.applyCompletion(e,n[+t[1]]),void r.preventDefault()}),this.dom.addEventListener("focusout",t=>{let r=e.state.field(this.stateField,!1);r&&r.tooltip&&e.state.facet(completionConfig).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:closeCompletionEffect.of(null)})}),this.showOptions(i,n.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let r=e.state.field(this.stateField),n=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=n){let{options:i,selected:o,disabled:s}=r.open;n.open&&n.open.options==i||(this.range=rangeAroundSelected(i.length,o,e.state.facet(completionConfig).maxRenderedOptions),this.showOptions(i,r.id)),this.updateSel(),s!=(null===(t=n.open)||void 0===t?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let e of this.currentClass.split(" "))e&&this.dom.classList.remove(e);for(let e of t.split(" "))e&&this.dom.classList.add(e);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;(t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=rangeAroundSelected(t.options.length,t.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.showOptions(t.options,e.id));let r=this.updateSelectedOption(t.selected);if(r){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:i}=n;if(!i)return;let o="string"==typeof i?document.createTextNode(i):i(n);if(!o)return;"then"in o?o.then(t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t,n)}).catch(e=>logException(this.view.state,e,"completion info")):(this.addInfoPane(o,n),r.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,t){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",r.id="cm-completionInfo-"+Math.floor(65535*Math.random()).toString(16),null!=e.nodeType)r.appendChild(e),this.infoDestroy=null;else{let{dom:t,destroy:n}=e;r.appendChild(t),this.infoDestroy=n||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,n=this.range.from;r;r=r.nextSibling,n++)"LI"==r.nodeName&&r.id?n==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&(r.removeAttribute("aria-selected"),r.removeAttribute("aria-describedby")):n--;return t&&scrollIntoView(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),n=e.getBoundingClientRect(),i=this.space;if(!i){let e=this.dom.ownerDocument.documentElement;i={left:0,top:0,right:e.clientWidth,bottom:e.clientHeight}}return n.top>Math.min(i.bottom,t.bottom)-10||n.bottom<Math.max(i.top,t.top)+10?null:this.view.state.facet(completionConfig).positionInfo(this.view,t,n,r,i,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,r){const n=document.createElement("ul");n.id=t,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions")),n.addEventListener("mousedown",e=>{e.target==n&&e.preventDefault()});let i=null;for(let o=r.from;o<r.to;o++){let{completion:s,match:a}=e[o],{section:l}=s;if(l){let e="string"==typeof l?l:l.name;e!=i&&(o>r.from||0==r.from)&&(i=e,"string"!=typeof l&&l.header?n.appendChild(l.header(l)):n.appendChild(document.createElement("completion-section")).textContent=e)}const c=n.appendChild(document.createElement("li"));c.id=t+"-"+o,c.setAttribute("role","option");let u=this.optionClass(s);u&&(c.className=u);for(let e of this.optionContent){let t=e(s,this.view.state,this.view,a);t&&c.appendChild(t)}}return r.from&&n.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function completionTooltip(e,t){return r=>new CompletionTooltip(r,e,t)}function scrollIntoView(e,t){let r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),i=r.height/e.offsetHeight;n.top<r.top?e.scrollTop-=(r.top-n.top)/i:n.bottom>r.bottom&&(e.scrollTop+=(n.bottom-r.bottom)/i)}function score(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}function sortOptions(e,t){let r=[],n=null,i=null,o=e=>{r.push(e);let{section:t}=e.completion;if(t){n||(n=[]);let e="string"==typeof t?t:t.name;n.some(t=>t.name==e)||n.push("string"==typeof t?{name:e}:t)}},s=t.facet(completionConfig);for(let u of e)if(u.hasResult()){let e=u.result.getMatch;if(!1===u.result.filter)for(let t of u.result.options)o(new Option(t,u.source,e?e(t):[],1e9-r.length));else{let r,n=t.sliceDoc(u.from,u.to),a=s.filterStrict?new StrictMatcher(n):new FuzzyMatcher(n);for(let t of u.result.options)if(r=a.match(t.label)){let n=t.displayLabel?e?e(t,r.matched):[]:r.matched,s=r.score+(t.boost||0);if(o(new Option(t,u.source,n,s)),"object"==typeof t.section&&"dynamic"===t.section.rank){let{name:e}=t.section;i||(i=Object.create(null)),i[e]=Math.max(s,i[e]||-1e9)}}}}if(n){let e=Object.create(null),t=0,o=(e,t)=>("dynamic"===e.rank&&"dynamic"===t.rank?i[t.name]-i[e.name]:0)||("number"==typeof e.rank?e.rank:1e9)-("number"==typeof t.rank?t.rank:1e9)||(e.name<t.name?-1:1);for(let r of n.sort(o))t-=1e5,e[r.name]=t;for(let n of r){let{section:t}=n.completion;t&&(n.score+=e["string"==typeof t?t:t.name])}}let a=[],l=null,c=s.compareCompletions;for(let u of r.sort((e,t)=>t.score-e.score||c(e.completion,t.completion))){let e=u.completion;!l||l.label!=e.label||l.detail!=e.detail||null!=l.type&&null!=e.type&&l.type!=e.type||l.apply!=e.apply||l.boost!=e.boost?a.push(u):score(u.completion)>score(l)&&(a[a.length-1]=u),l=u.completion}return a}class CompletionDialog{constructor(e,t,r,n,i,o){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=n,this.selected=i,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,n,i,o){if(n&&!o&&e.some(e=>e.isPending))return n.setDisabled();let s=sortOptions(e,t);if(!s.length)return n&&e.some(e=>e.isPending)?n.setDisabled():null;let a=t.facet(completionConfig).selectOnOpen?0:-1;if(n&&n.selected!=a&&-1!=n.selected){let e=n.options[n.selected].completion;for(let t=0;t<s.length;t++)if(s[t].completion==e){a=t;break}}return new CompletionDialog(s,makeAttrs(r,a),{pos:e.reduce((e,t)=>t.hasResult()?Math.min(e,t.from):e,1e8),create:createTooltip,above:i.aboveCursor},n?n.timestamp:Date.now(),a,!1)}map(e){return new CompletionDialog(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new CompletionDialog(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class CompletionState{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new CompletionState(none$2,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,r=t.facet(completionConfig),n=(r.override||t.languageDataAt("autocomplete",cur(t)).map(asSource)).map(t=>(this.active.find(e=>e.source==t)||new ActiveSource(t,this.active.some(e=>0!=e.state)?1:0)).update(e,r));n.length==this.active.length&&n.every((e,t)=>e==this.active[t])&&(n=this.active);let i=this.open,o=e.effects.some(e=>e.is(setActiveEffect));i&&e.docChanged&&(i=i.map(e.changes)),e.selection||n.some(t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to))||!sameResults(n,this.active)||o?i=CompletionDialog.build(n,t,this.id,i,r,o):i&&i.disabled&&!n.some(e=>e.isPending)&&(i=null),!i&&n.every(e=>!e.isPending)&&n.some(e=>e.hasResult())&&(n=n.map(e=>e.hasResult()?new ActiveSource(e.source,0):e));for(let s of e.effects)s.is(setSelectedEffect)&&(i=i&&i.setSelected(s.value,this.id));return n==this.active&&i==this.open?this:new CompletionState(n,this.id,i)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?baseAttrs:noAttrs}}function sameResults(e,t){if(e==t)return!0;for(let r=0,n=0;;){for(;r<e.length&&!e[r].hasResult();)r++;for(;n<t.length&&!t[n].hasResult();)n++;let i=r==e.length,o=n==t.length;if(i||o)return i==o;if(e[r++].result!=t[n++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"},noAttrs={};function makeAttrs(e,t){let r={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(r["aria-activedescendant"]=e+"-"+t),r}const none$2=[];function getUpdateType(e,t){if(e.isUserEvent("input.complete")){let r=e.annotation(pickedCompletion);if(r&&t.activateOnCompletion(r))return 12}let r=e.isUserEvent("input.type");return r&&t.activateOnTyping?5:r?1:e.isUserEvent("delete.backward")?2:e.selection?8:e.docChanged?16:0}class ActiveSource{constructor(e,t,r=!1){this.source=e,this.state=t,this.explicit=r}hasResult(){return!1}get isPending(){return 1==this.state}update(e,t){let r=getUpdateType(e,t),n=this;(8&r||16&r&&this.touches(e))&&(n=new ActiveSource(n.source,0)),4&r&&0==n.state&&(n=new ActiveSource(this.source,1)),n=n.updateFor(e,r);for(let i of e.effects)if(i.is(startCompletionEffect))n=new ActiveSource(n.source,1,i.value);else if(i.is(closeCompletionEffect))n=new ActiveSource(n.source,0);else if(i.is(setActiveEffect))for(let e of i.value)e.source==n.source&&(n=e);return n}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(cur(e.state))}}class ActiveResult extends ActiveSource{constructor(e,t,r,n,i,o){super(e,3,t),this.limit=r,this.result=n,this.from=i,this.to=o}hasResult(){return!0}updateFor(e,t){var r;if(!(3&t))return this.map(e.changes);let n=this.result;n.map&&!e.changes.empty&&(n=n.map(n,e.changes));let i=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),s=cur(e.state);if(s>o||!n||2&t&&(cur(e.startState)==this.from||s<this.limit))return new ActiveSource(this.source,4&t?1:0);let a=e.changes.mapPos(this.limit);return checkValid(n.validFor,e.state,i,o)?new ActiveResult(this.source,this.explicit,a,n,i,o):n.update&&(n=n.update(n,i,o,new CompletionContext(e.state,s,!1)))?new ActiveResult(this.source,this.explicit,a,n,n.from,null!==(r=n.to)&&void 0!==r?r:cur(e.state)):new ActiveSource(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new ActiveResult(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ActiveSource(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function checkValid(e,t,r,n){if(!e)return!1;let i=t.sliceDoc(r,n);return"function"==typeof e?e(i,r,n,t):ensureAnchor(e,!0).test(i)}const setActiveEffect=StateEffect.define({map:(e,t)=>e.map(e=>e.map(t))}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create:()=>CompletionState.start(),update:(e,t)=>e.update(t),provide:e=>[showTooltip.from(e,e=>e.tooltip),EditorView.contentAttributes.from(e,e=>e.attrs)]});function applyCompletion(e,t){const r=t.completion.apply||t.completion.label;let n=e.state.field(completionState).active.find(e=>e.source==t.source);return n instanceof ActiveResult&&("string"==typeof r?e.dispatch({...insertCompletionText(e.state,r,n.from,n.to),annotations:pickedCompletion.of(t.completion)}):r(e,t.completion,n.from,n.to),!0)}const createTooltip=completionTooltip(completionState,applyCompletion);function moveCompletionSelection(e,t="option"){return r=>{let n=r.state.field(completionState,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<r.state.facet(completionConfig).interactionDelay)return!1;let i,o=1;"page"==t&&(i=getTooltip(r,n.open.tooltip))&&(o=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));let{length:s}=n.open.options,a=n.open.selected>-1?n.open.selected+o*(e?1:-1):e?0:s-1;return a<0?a="page"==t?0:s-1:a>=s&&(a="page"==t?s-1:0),r.dispatch({effects:setSelectedEffect.of(a)}),!0}}const acceptCompletion=e=>{let t=e.state.field(completionState,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<e.state.facet(completionConfig).interactionDelay)&&applyCompletion(e,t.open.options[t.open.selected])},startCompletion=e=>!!e.state.field(completionState,!1)&&(e.dispatch({effects:startCompletionEffect.of(!0)}),!0),closeCompletion=e=>{let t=e.state.field(completionState,!1);return!(!t||!t.active.some(e=>0!=e.state)||(e.dispatch({effects:closeCompletionEffect.of(null)}),0))};class RunningQuery{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let t of e.state.field(completionState).active)t.isPending&&this.startQuery(t)}update(e){let t=e.state.field(completionState),r=e.state.facet(completionConfig);if(!e.selectionSet&&!e.docChanged&&e.startState.field(completionState)==t)return;let n=e.transactions.some(e=>{let t=getUpdateType(e,r);return 8&t||(e.selection||e.docChanged)&&!(3&t)});for(let s=0;s<this.running.length;s++){let t=this.running[s];if(n||t.context.abortOnDocChange&&e.docChanged||t.updates.length+e.transactions.length>MaxUpdateCount&&Date.now()-t.time>MinAbortTime){for(let e of t.context.abortListeners)try{e()}catch(o){logException(this.view.state,o)}t.context.abortListeners=null,this.running.splice(s--,1)}else t.updates.push(...e.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),e.transactions.some(e=>e.effects.some(e=>e.is(startCompletionEffect)))&&(this.pendingStart=!0);let i=this.pendingStart?50:r.activateOnTypingDelay;if(this.debounceUpdate=t.active.some(e=>e.isPending&&!this.running.some(t=>t.active.source==e.source))?setTimeout(()=>this.startUpdate(),i):-1,0!=this.composing)for(let s of e.transactions)s.isUserEvent("input.type")?this.composing=2:2==this.composing&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:e}=this.view,t=e.field(completionState);for(let r of t.active)r.isPending&&!this.running.some(e=>e.active.source==r.source)&&this.startQuery(r);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}startQuery(e){let{state:t}=this.view,r=cur(t),n=new CompletionContext(t,r,e.explicit,this.view),i=new RunningQuery(e,n);this.running.push(i),Promise.resolve(e.source(n)).then(e=>{i.context.aborted||(i.done=e||null,this.scheduleAccept())},e=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,e)})}scheduleAccept(){this.running.every(e=>void 0!==e.done)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],r=this.view.state.facet(completionConfig),n=this.view.state.field(completionState);for(let i=0;i<this.running.length;i++){let o=this.running[i];if(void 0===o.done)continue;if(this.running.splice(i--,1),o.done){let n=cur(o.updates.length?o.updates[0].startState:this.view.state),i=Math.min(n,o.done.from+(o.active.explicit?0:1)),s=new ActiveResult(o.active.source,o.active.explicit,i,o.done,o.done.from,null!==(e=o.done.to)&&void 0!==e?e:n);for(let e of o.updates)s=s.update(e,r);if(s.hasResult()){t.push(s);continue}}let s=n.active.find(e=>e.source==o.active.source);if(s&&s.isPending)if(null==o.done){let e=new ActiveSource(o.active.source,0);for(let t of o.updates)e=e.update(t,r);e.isPending||t.push(e)}else this.startQuery(s)}(t.length||n.open&&n.open.disabled)&&this.view.dispatch({effects:setActiveEffect.of(t)})}},{eventHandlers:{blur(e){let t=this.view.state.field(completionState,!1);if(t&&t.tooltip&&this.view.state.facet(completionConfig).closeOnBlur){let r=t.open&&getTooltip(this.view,t.open.tooltip);r&&r.dom.contains(e.relatedTarget)||setTimeout(()=>this.view.dispatch({effects:closeCompletionEffect.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),windows="object"==typeof navigator&&/Win/.test(navigator.platform),commitCharacters=Prec.highest(EditorView.domEventHandlers({keydown(e,t){let r=t.state.field(completionState,!1);if(!r||!r.open||r.open.disabled||r.open.selected<0||e.key.length>1||e.ctrlKey&&(!windows||!e.altKey)||e.metaKey)return!1;let n=r.open.options[r.open.selected],i=r.active.find(e=>e.source==n.source),o=n.completion.commitCharacters||i.result.commitCharacters;return o&&o.indexOf(e.key)>-1&&applyCompletion(t,n),!1}})),baseTheme$2=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(e,t,r,n){this.field=e,this.line=t,this.from=r,this.to=n}}class FieldRange{constructor(e,t,r){this.field=e,this.from=t,this.to=r}map(e){let t=e.mapPos(this.from,-1,MapMode.TrackDel),r=e.mapPos(this.to,1,MapMode.TrackDel);return null==t||null==r?null:new FieldRange(this.field,t,r)}}class Snippet{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let r=[],n=[t],i=e.doc.lineAt(t),o=/^\s*/.exec(i.text)[0];for(let s of this.lines){if(r.length){let r=o,i=/^\t*/.exec(s)[0].length;for(let t=0;t<i;t++)r+=e.facet(indentUnit);n.push(t+r.length-i),s=r+s.slice(i)}r.push(s),t+=s.length+1}return{text:r,ranges:this.fieldPositions.map(e=>new FieldRange(e.field,n[e.line]+e.from,n[e.line]+e.to))}}static parse(e){let t,r=[],n=[],i=[];for(let o of e.split(/\r\n?|\n/)){for(;t=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(o);){let e=t[1]?+t[1]:null,s=t[2]||t[3]||"",a=-1,l=s.replace(/\\[{}]/g,e=>e[1]);for(let t=0;t<r.length;t++)(null!=e?r[t].seq==e:l&&r[t].name==l)&&(a=t);if(a<0){let t=0;for(;t<r.length&&(null==e||null!=r[t].seq&&r[t].seq<e);)t++;r.splice(t,0,{seq:e,name:l}),a=t;for(let e of i)e.field>=a&&e.field++}for(let r of i)if(r.line==n.length&&r.from>t.index){let e=t[2]?3+(t[1]||"").length:2;r.from-=e,r.to-=e}i.push(new FieldPos(a,n.length,t.index,t.index+l.length)),o=o.slice(0,t.index)+s+o.slice(t.index+t[0].length)}o=o.replace(/\\([{}])/g,(e,t,r)=>{for(let o of i)o.line==n.length&&o.from>r&&(o.from--,o.to--);return t}),n.push(o)}return new Snippet(n,i)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(e,t){this.ranges=e,this.active=t,this.deco=Decoration.set(e.map(e=>(e.from==e.to?fieldMarker:fieldRange).range(e.from,e.to)),!0)}map(e){let t=[];for(let r of this.ranges){let n=r.map(e);if(!n)return null;t.push(n)}return new ActiveSnippet(t,this.active)}selectionInsideField(e){return e.ranges.every(e=>this.ranges.some(t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))}}const setActive=StateEffect.define({map:(e,t)=>e&&e.map(t)}),moveToField=StateEffect.define(),snippetState=StateField.define({create:()=>null,update(e,t){for(let r of t.effects){if(r.is(setActive))return r.value;if(r.is(moveToField)&&e)return new ActiveSnippet(e.ranges,r.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>EditorView.decorations.from(e,e=>e?e.deco:Decoration.none)});function fieldSelection(e,t){return EditorSelection.create(e.filter(e=>e.field==t).map(e=>EditorSelection.range(e.from,e.to)))}function snippet(e){let t=Snippet.parse(e);return(e,r,n,i)=>{let{text:o,ranges:s}=t.instantiate(e.state,n),{main:a}=e.state.selection,l={changes:{from:n,to:i==a.from?a.to:i,insert:Text.of(o)},scrollIntoView:!0,annotations:r?[pickedCompletion.of(r),Transaction.userEvent.of("input.complete")]:void 0};if(s.length&&(l.selection=fieldSelection(s,0)),s.some(e=>e.field>0)){let t=new ActiveSnippet(s,0),r=l.effects=[setActive.of(t)];void 0===e.state.field(snippetState,!1)&&r.push(StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme$2]))}e.dispatch(e.state.update(l))}}function moveField(e){return({state:t,dispatch:r})=>{let n=t.field(snippetState,!1);if(!n||e<0&&0==n.active)return!1;let i=n.active+e,o=e>0&&!n.ranges.some(t=>t.field==i+e);return r(t.update({selection:fieldSelection(n.ranges,i),effects:setActive.of(o?null:new ActiveSnippet(n.ranges,i)),scrollIntoView:!0})),!0}}const clearSnippet=({state:e,dispatch:t})=>!!e.field(snippetState,!1)&&(t(e.update({effects:setActive.of(null)})),!0),nextSnippetField=moveField(1),prevSnippetField=moveField(-1),defaultSnippetKeymap=[{key:"Tab",run:nextSnippetField,shift:prevSnippetField},{key:"Escape",run:clearSnippet}],snippetKeymap=Facet.define({combine:e=>e.length?e[0]:defaultSnippetKeymap}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],e=>e.facet(snippetKeymap)));function snippetCompletion(e,t){return{...t,apply:snippet(e)}}const snippetPointerHandler=EditorView.domEventHandlers({mousedown(e,t){let r,n=t.state.field(snippetState,!1);if(!n||null==(r=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let i=n.ranges.find(e=>e.from<=r&&e.to>=r);return!(!i||i.field==n.active||(t.dispatch({selection:fieldSelection(n.ranges,i.field),effects:setActive.of(n.ranges.some(e=>e.field>i.field)?new ActiveSnippet(n.ranges,i.field):null),scrollIntoView:!0}),0))}}),closedBracket=new class extends RangeValue{};function autocompletion(e={}){return[commitCharacters,completionState,completionConfig.of(e),completionPlugin,completionKeymapExt,baseTheme$2]}closedBracket.startSide=1,closedBracket.endSide=-1;const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{mac:"Alt-`",run:startCompletion},{mac:"Alt-i",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],e=>e.facet(completionConfig).defaultKeymap?[completionKeymap]:[])),toggleComment=e=>{let{state:t}=e,r=t.doc.lineAt(t.selection.main.from),n=getConfig(e.state,r.from);return n.line?toggleLineComment(e):!!n.block&&toggleBlockCommentByLine(e)};function command(e,t){return({state:r,dispatch:n})=>{if(r.readOnly)return!1;let i=e(t,r);return!!i&&(n(r.update(i)),!0)}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((e,t)=>changeBlockComment(e,t,selectedLineRanges(t)),0);function getConfig(e,t){let r=e.languageDataAt("commentTokens",t,1);return r.length?r[0]:{}}const SearchMargin=50;function findBlockComment(e,{open:t,close:r},n,i){let o,s,a=e.sliceDoc(n-SearchMargin,n),l=e.sliceDoc(i,i+SearchMargin),c=/\s*$/.exec(a)[0].length,u=/^\s*/.exec(l)[0].length,d=a.length-c;if(a.slice(d-t.length,d)==t&&l.slice(u,u+r.length)==r)return{open:{pos:n-c,margin:c&&1},close:{pos:i+u,margin:u&&1}};i-n<=2*SearchMargin?o=s=e.sliceDoc(n,i):(o=e.sliceDoc(n,n+SearchMargin),s=e.sliceDoc(i-SearchMargin,i));let p=/^\s*/.exec(o)[0].length,h=/\s*$/.exec(s)[0].length,f=s.length-h-r.length;return o.slice(p,p+t.length)==t&&s.slice(f,f+r.length)==r?{open:{pos:n+p+t.length,margin:/\s/.test(o.charAt(p+t.length))?1:0},close:{pos:i-h-r.length,margin:/\s/.test(s.charAt(f-1))?1:0}}:null}function selectedLineRanges(e){let t=[];for(let r of e.selection.ranges){let n=e.doc.lineAt(r.from),i=r.to<=n.to?n:e.doc.lineAt(r.to);i.from>n.from&&i.from==r.to&&(i=r.to==n.to+1?n:e.doc.lineAt(r.to-1));let o=t.length-1;o>=0&&t[o].to>n.from?t[o].to=i.to:t.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:i.to})}return t}function changeBlockComment(e,t,r=t.selection.ranges){let n=r.map(e=>getConfig(t,e.from).block);if(!n.every(e=>e))return null;let i=r.map((e,r)=>findBlockComment(t,n[r],e.from,e.to));if(2!=e&&!i.every(e=>e))return{changes:t.changes(r.map((e,t)=>i[t]?[]:[{from:e.from,insert:n[t].open+" "},{from:e.to,insert:" "+n[t].close}]))};if(1!=e&&i.some(e=>e)){let e=[];for(let t,r=0;r<i.length;r++)if(t=i[r]){let i=n[r],{open:o,close:s}=t;e.push({from:o.pos-i.open.length,to:o.pos+o.margin},{from:s.pos-s.margin,to:s.pos+i.close.length})}return{changes:e}}return null}function changeLineComment(e,t,r=t.selection.ranges){let n=[],i=-1;for(let{from:o,to:s}of r){let e=n.length,r=1e9,a=getConfig(t,o).line;if(a){for(let e=o;e<=s;){let l=t.doc.lineAt(e);if(l.from>i&&(o==s||s>l.from)){i=l.from;let e=/^\s*/.exec(l.text)[0].length,t=e==l.length,o=l.text.slice(e,e+a.length)==a?e:-1;e<l.text.length&&e<r&&(r=e),n.push({line:l,comment:o,token:a,indent:e,empty:t,single:!1})}e=l.to+1}if(r<1e9)for(let t=e;t<n.length;t++)n[t].indent<n[t].line.text.length&&(n[t].indent=r);n.length==e+1&&(n[e].single=!0)}}if(2!=e&&n.some(e=>e.comment<0&&(!e.empty||e.single))){let e=[];for(let{line:t,token:i,indent:o,empty:s,single:a}of n)!a&&s||e.push({from:t.from+o,insert:i+" "});let r=t.changes(e);return{changes:r,selection:t.selection.map(r,1)}}if(1!=e&&n.some(e=>e.comment>=0)){let e=[];for(let{line:t,comment:r,token:i}of n)if(r>=0){let n=t.from+r,o=n+i.length;" "==t.text[o-t.from]&&o++,e.push({from:n,to:o})}return{changes:e}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine:e=>combineConfig(e,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,n)=>e(r,n)||t(r,n)})}),historyField_=StateField.define({create:()=>HistoryState$1.empty,update(e,t){let r=t.state.facet(historyConfig),n=t.annotation(fromHistory);if(n){let i=HistEvent.fromTransaction(t,n.selection),o=n.side,s=0==o?e.undone:e.done;return s=i?updateBranch(s,s.length,r.minDepth,i):addSelection(s,t.startState.selection),new HistoryState$1(0==o?n.rest:s,0==o?s:n.rest)}let i=t.annotation(isolateHistory);if("full"!=i&&"before"!=i||(e=e.isolate()),!1===t.annotation(Transaction.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let o=HistEvent.fromTransaction(t),s=t.annotation(Transaction.time),a=t.annotation(Transaction.userEvent);return o?e=e.addChanges(o,s,a,r,t):t.selection&&(e=e.addSelection(t.startState.selection,s,a,r.newGroupDelay)),"full"!=i&&"after"!=i||(e=e.isolate()),e},toJSON:e=>({done:e.done.map(e=>e.toJSON()),undone:e.undone.map(e=>e.toJSON())}),fromJSON:e=>new HistoryState$1(e.done.map(HistEvent.fromJSON),e.undone.map(HistEvent.fromJSON))});function history$2(e={}){return[historyField_,historyConfig.of(e),EditorView.domEventHandlers({beforeinput(e,t){let r="historyUndo"==e.inputType?undo$3:"historyRedo"==e.inputType?redo$3:null;return!!r&&(e.preventDefault(),r(t))}})]}function cmd(e,t){return function({state:r,dispatch:n}){if(!t&&r.readOnly)return!1;let i=r.field(historyField_,!1);if(!i)return!1;let o=i.pop(e,r,t);return!!o&&(n(o),!0)}}const undo$3=cmd(0,!1),redo$3=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);function depth(e){return function(t){let r=t.field(historyField_,!1);if(!r)return 0;let n=0==e?r.done:r.undone;return n.length-(n.length&&!n[0].changes?1:0)}}const undoDepth=depth(0),redoDepth=depth(1);class HistEvent{constructor(e,t,r,n,i){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=n,this.selectionsAfter=i}setSelAfter(e){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(r=this.startSelection)||void 0===r?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(e=>e.toJSON())}}static fromJSON(e){return new HistEvent(e.changes&&ChangeSet.fromJSON(e.changes),[],e.mapped&&ChangeDesc.fromJSON(e.mapped),e.startSelection&&EditorSelection.fromJSON(e.startSelection),e.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(e,t){let r=none$1;for(let n of e.startState.facet(invertedEffects)){let t=n(e);t.length&&(r=r.concat(t))}return!r.length&&e.changes.empty?null:new HistEvent(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,none$1)}static selection(e){return new HistEvent(void 0,none$1,void 0,void 0,e)}}function updateBranch(e,t,r,n){let i=t+1>r+20?t-r-1:0,o=e.slice(i,t);return o.push(n),o}function isAdjacent(e,t){let r=[],n=!1;return e.iterChangedRanges((e,t)=>r.push(e,t)),t.iterChangedRanges((e,t,i,o)=>{for(let s=0;s<r.length;){let e=r[s++],t=r[s++];o>=e&&i<=t&&(n=!0)}}),n}function eqSelectionShape(e,t){return e.ranges.length==t.ranges.length&&0===e.ranges.filter((e,r)=>e.empty!=t.ranges[r].empty).length}function conc(e,t){return e.length?t.length?e.concat(t):e:t}const none$1=[],MaxSelectionsPerEvent=200;function addSelection(e,t){if(e.length){let r=e[e.length-1],n=r.selectionsAfter.slice(Math.max(0,r.selectionsAfter.length-MaxSelectionsPerEvent));return n.length&&n[n.length-1].eq(t)?e:(n.push(t),updateBranch(e,e.length-1,1e9,r.setSelAfter(n)))}return[HistEvent.selection([t])]}function popSelection(e){let t=e[e.length-1],r=e.slice();return r[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),r}function addMappingToBranch(e,t){if(!e.length)return e;let r=e.length,n=none$1;for(;r;){let i=mapEvent(e[r-1],t,n);if(i.changes&&!i.changes.empty||i.effects.length){let t=e.slice(0,r);return t[r-1]=i,t}t=i.mapped,r--,n=i.selectionsAfter}return n.length?[HistEvent.selection(n)]:none$1}function mapEvent(e,t,r){let n=conc(e.selectionsAfter.length?e.selectionsAfter.map(e=>e.map(t)):none$1,r);if(!e.changes)return HistEvent.selection(n);let i=e.changes.map(t),o=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(o):o;return new HistEvent(i,StateEffect.mapEffects(e.effects,t),s,e.startSelection.map(o),n)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;let HistoryState$1=class e{constructor(e,t,r=0,n=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=n}isolate(){return this.prevTime?new e(this.done,this.undone):this}addChanges(t,r,n,i,o){let s=this.done,a=s[s.length-1];return s=a&&a.changes&&!a.changes.empty&&t.changes&&(!n||joinableUserEvent.test(n))&&(!a.selectionsAfter.length&&r-this.prevTime<i.newGroupDelay&&i.joinToEvent(o,isAdjacent(a.changes,t.changes))||"input.type.compose"==n)?updateBranch(s,s.length-1,i.minDepth,new HistEvent(t.changes.compose(a.changes),conc(StateEffect.mapEffects(t.effects,a.changes),a.effects),a.mapped,a.startSelection,none$1)):updateBranch(s,s.length,i.minDepth,t),new e(s,none$1,r,n)}addSelection(t,r,n,i){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:none$1;return o.length>0&&r-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&eqSelectionShape(o[o.length-1],t)?this:new e(addSelection(this.done,t),this.undone,r,n)}addMapping(t){return new e(addMappingToBranch(this.done,t),addMappingToBranch(this.undone,t),this.prevTime,this.prevUserEvent)}pop(e,t,r){let n=0==e?this.done:this.undone;if(0==n.length)return null;let i=n[n.length-1],o=i.selectionsAfter[0]||t.selection;if(r&&i.selectionsAfter.length)return t.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:fromHistory.of({side:e,rest:popSelection(n),selection:o}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){let r=1==n.length?none$1:n.slice(0,n.length-1);return i.mapped&&(r=addMappingToBranch(r,i.mapped)),t.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:fromHistory.of({side:e,rest:r,selection:o}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}};HistoryState$1.empty=new HistoryState$1(none$1,none$1);const historyKeymap=[{key:"Mod-z",run:undo$3,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo$3,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo$3,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(e,t){return EditorSelection.create(e.ranges.map(t),e.mainIndex)}function setSel(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:e,dispatch:t},r){let n=updateSel(e.selection,r);return!n.eq(e.selection,!0)&&(t(setSel(e,n)),!0)}function rangeEnd(e,t){return EditorSelection.cursor(t?e.to:e.from)}function cursorByChar(e,t){return moveSel(e,r=>r.empty?e.moveByChar(r,t):rangeEnd(r,t))}function ltrAtCursor(e){return e.textDirectionAt(e.state.selection.main.head)==Direction.LTR}const cursorCharLeft=e=>cursorByChar(e,!ltrAtCursor(e)),cursorCharRight=e=>cursorByChar(e,ltrAtCursor(e));function cursorByGroup(e,t){return moveSel(e,r=>r.empty?e.moveByGroup(r,t):rangeEnd(r,t))}const cursorGroupLeft=e=>cursorByGroup(e,!ltrAtCursor(e)),cursorGroupRight=e=>cursorByGroup(e,ltrAtCursor(e));function interestingNode(e,t,r){if(t.type.prop(r))return!0;let n=t.to-t.from;return n&&(n>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function moveBySyntax(e,t,r){let n,i,o=syntaxTree(e).resolveInner(t.head),s=r?NodeProp.closedBy:NodeProp.openedBy;for(let a=t.head;;){let t=r?o.childAfter(a):o.childBefore(a);if(!t)break;interestingNode(e,t,s)?o=t:a=r?t.to:t.from}return i=o.type.prop(s)&&(n=r?matchBrackets(e,o.from,1):matchBrackets(e,o.to,-1))&&n.matched?r?n.end.to:n.end.from:r?o.to:o.from,EditorSelection.cursor(i,r?-1:1)}const cursorSyntaxLeft=e=>moveSel(e,t=>moveBySyntax(e.state,t,!ltrAtCursor(e))),cursorSyntaxRight=e=>moveSel(e,t=>moveBySyntax(e.state,t,ltrAtCursor(e)));function cursorByLine(e,t){return moveSel(e,r=>{if(!r.empty)return rangeEnd(r,t);let n=e.moveVertically(r,t);return n.head!=r.head?n:e.moveToLineBoundary(r,t)})}const cursorLineUp=e=>cursorByLine(e,!1),cursorLineDown=e=>cursorByLine(e,!0);function pageInfo(e){let t,r=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,n=0,i=0;if(r){for(let t of e.state.facet(EditorView.scrollMargins)){let r=t(e);(null==r?void 0:r.top)&&(n=Math.max(null==r?void 0:r.top,n)),(null==r?void 0:r.bottom)&&(i=Math.max(null==r?void 0:r.bottom,i))}t=e.scrollDOM.clientHeight-n-i}else t=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:r,height:Math.max(e.defaultLineHeight,t-5)}}function cursorByPage(e,t){let r,n=pageInfo(e),{state:i}=e,o=updateSel(i.selection,r=>r.empty?e.moveVertically(r,t,n.height):rangeEnd(r,t));if(o.eq(i.selection))return!1;if(n.selfScroll){let t=e.coordsAtPos(i.selection.main.head),s=e.scrollDOM.getBoundingClientRect(),a=s.top+n.marginTop,l=s.bottom-n.marginBottom;t&&t.top>a&&t.bottom<l&&(r=EditorView.scrollIntoView(o.main.head,{y:"start",yMargin:t.top-a}))}return e.dispatch(setSel(i,o),{effects:r}),!0}const cursorPageUp=e=>cursorByPage(e,!1),cursorPageDown=e=>cursorByPage(e,!0);function moveByLineBoundary(e,t,r){let n=e.lineBlockAt(t.head),i=e.moveToLineBoundary(t,r);if(i.head==t.head&&i.head!=(r?n.to:n.from)&&(i=e.moveToLineBoundary(t,r,!1)),!r&&i.head==n.from&&n.length){let r=/^\s*/.exec(e.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;r&&t.head!=n.from+r&&(i=EditorSelection.cursor(n.from+r))}return i}const cursorLineBoundaryForward=e=>moveSel(e,t=>moveByLineBoundary(e,t,!0)),cursorLineBoundaryBackward=e=>moveSel(e,t=>moveByLineBoundary(e,t,!1)),cursorLineBoundaryLeft=e=>moveSel(e,t=>moveByLineBoundary(e,t,!ltrAtCursor(e))),cursorLineBoundaryRight=e=>moveSel(e,t=>moveByLineBoundary(e,t,ltrAtCursor(e))),cursorLineStart=e=>moveSel(e,t=>EditorSelection.cursor(e.lineBlockAt(t.head).from,1)),cursorLineEnd=e=>moveSel(e,t=>EditorSelection.cursor(e.lineBlockAt(t.head).to,-1));function toMatchingBracket(e,t,r){let n=!1,i=updateSel(e.selection,t=>{let r=matchBrackets(e,t.head,-1)||matchBrackets(e,t.head,1)||t.head>0&&matchBrackets(e,t.head-1,1)||t.head<e.doc.length&&matchBrackets(e,t.head+1,-1);if(!r||!r.end)return t;n=!0;let i=r.start.from==t.head?r.end.to:r.end.from;return EditorSelection.cursor(i)});return!!n&&(t(setSel(e,i)),!0)}const cursorMatchingBracket=({state:e,dispatch:t})=>toMatchingBracket(e,t);function extendSel(e,t){let r=updateSel(e.state.selection,e=>{let r=t(e);return EditorSelection.range(e.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return!r.eq(e.state.selection)&&(e.dispatch(setSel(e.state,r)),!0)}function selectByChar(e,t){return extendSel(e,r=>e.moveByChar(r,t))}const selectCharLeft=e=>selectByChar(e,!ltrAtCursor(e)),selectCharRight=e=>selectByChar(e,ltrAtCursor(e));function selectByGroup(e,t){return extendSel(e,r=>e.moveByGroup(r,t))}const selectGroupLeft=e=>selectByGroup(e,!ltrAtCursor(e)),selectGroupRight=e=>selectByGroup(e,ltrAtCursor(e)),selectSyntaxLeft=e=>extendSel(e,t=>moveBySyntax(e.state,t,!ltrAtCursor(e))),selectSyntaxRight=e=>extendSel(e,t=>moveBySyntax(e.state,t,ltrAtCursor(e)));function selectByLine(e,t){return extendSel(e,r=>e.moveVertically(r,t))}const selectLineUp=e=>selectByLine(e,!1),selectLineDown=e=>selectByLine(e,!0);function selectByPage(e,t){return extendSel(e,r=>e.moveVertically(r,t,pageInfo(e).height))}const selectPageUp=e=>selectByPage(e,!1),selectPageDown=e=>selectByPage(e,!0),selectLineBoundaryForward=e=>extendSel(e,t=>moveByLineBoundary(e,t,!0)),selectLineBoundaryBackward=e=>extendSel(e,t=>moveByLineBoundary(e,t,!1)),selectLineBoundaryLeft=e=>extendSel(e,t=>moveByLineBoundary(e,t,!ltrAtCursor(e))),selectLineBoundaryRight=e=>extendSel(e,t=>moveByLineBoundary(e,t,ltrAtCursor(e))),selectLineStart=e=>extendSel(e,t=>EditorSelection.cursor(e.lineBlockAt(t.head).from)),selectLineEnd=e=>extendSel(e,t=>EditorSelection.cursor(e.lineBlockAt(t.head).to)),cursorDocStart=({state:e,dispatch:t})=>(t(setSel(e,{anchor:0})),!0),cursorDocEnd=({state:e,dispatch:t})=>(t(setSel(e,{anchor:e.doc.length})),!0),selectDocStart=({state:e,dispatch:t})=>(t(setSel(e,{anchor:e.selection.main.anchor,head:0})),!0),selectDocEnd=({state:e,dispatch:t})=>(t(setSel(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0),selectAll=({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0),selectLine=({state:e,dispatch:t})=>{let r=selectedLineBlocks(e).map(({from:t,to:r})=>EditorSelection.range(t,Math.min(r+1,e.doc.length)));return t(e.update({selection:EditorSelection.create(r),userEvent:"select"})),!0},selectParentSyntax=({state:e,dispatch:t})=>{let r=updateSel(e.selection,t=>{let r=syntaxTree(e),n=r.resolveStack(t.from,1);if(t.empty){let e=r.resolveStack(t.from,-1);e.node.from>=n.node.from&&e.node.to<=n.node.to&&(n=e)}for(let e=n;e;e=e.next){let{node:r}=e;if((r.from<t.from&&r.to>=t.to||r.to>t.to&&r.from<=t.from)&&e.next)return EditorSelection.range(r.to,r.from)}return t});return!r.eq(e.selection)&&(t(setSel(e,r)),!0)};function addCursorVertically(e,t){let{state:r}=e,n=r.selection,i=r.selection.ranges.slice();for(let o of r.selection.ranges){let n=r.doc.lineAt(o.head);if(t?n.to<e.state.doc.length:n.from>0)for(let r=o;;){let o=e.moveVertically(r,t);if(o.head<n.from||o.head>n.to){i.some(e=>e.head==o.head)||i.push(o);break}if(o.head==r.head)break;r=o}}return i.length!=n.ranges.length&&(e.dispatch(setSel(r,EditorSelection.create(i,i.length-1))),!0)}const addCursorAbove=e=>addCursorVertically(e,!1),addCursorBelow=e=>addCursorVertically(e,!0),simplifySelection=({state:e,dispatch:t})=>{let r=e.selection,n=null;return r.ranges.length>1?n=EditorSelection.create([r.main]):r.main.empty||(n=EditorSelection.create([EditorSelection.cursor(r.main.head)])),!!n&&(t(setSel(e,n)),!0)};function deleteBy(e,t){if(e.state.readOnly)return!1;let r="delete.selection",{state:n}=e,i=n.changeByRange(n=>{let{from:i,to:o}=n;if(i==o){let s=t(n);s<i?(r="delete.backward",s=skipAtomic(e,s,!1)):s>i&&(r="delete.forward",s=skipAtomic(e,s,!0)),i=Math.min(i,s),o=Math.max(o,s)}else i=skipAtomic(e,i,!1),o=skipAtomic(e,o,!0);return i==o?{range:n}:{changes:{from:i,to:o},range:EditorSelection.cursor(i,i<n.head?-1:1)}});return!i.changes.empty&&(e.dispatch(n.update(i,{scrollIntoView:!0,userEvent:r,effects:"delete.selection"==r?EditorView.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(e,t,r){if(e instanceof EditorView)for(let n of e.state.facet(EditorView.atomicRanges).map(t=>t(e)))n.between(t,t,(e,n)=>{e<t&&n>t&&(t=r?n:e)});return t}const deleteByChar=(e,t,r)=>deleteBy(e,n=>{let i,o,s=n.from,{state:a}=e,l=a.doc.lineAt(s);if(r&&!t&&s>l.from&&s<l.from+200&&!/[^ \t]/.test(i=l.text.slice(0,s-l.from))){if("\t"==i[i.length-1])return s-1;let e=countColumn(i,a.tabSize)%getIndentUnit(a)||getIndentUnit(a);for(let t=0;t<e&&" "==i[i.length-1-t];t++)s--;o=s}else o=findClusterBreak(l.text,s-l.from,t,t)+l.from,o==s&&l.number!=(t?a.doc.lines:1)?o+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(l.text.slice(o-l.from,s-l.from))&&(o=findClusterBreak(l.text,o-l.from,!1,!1)+l.from);return o}),deleteCharBackward=e=>deleteByChar(e,!1,!0),deleteCharForward=e=>deleteByChar(e,!0,!1),deleteByGroup=(e,t)=>deleteBy(e,r=>{let n=r.head,{state:i}=e,o=i.doc.lineAt(n),s=i.charCategorizer(n);for(let e=null;;){if(n==(t?o.to:o.from)){n==r.head&&o.number!=(t?i.doc.lines:1)&&(n+=t?1:-1);break}let a=findClusterBreak(o.text,n-o.from,t)+o.from,l=o.text.slice(Math.min(n,a)-o.from,Math.max(n,a)-o.from),c=s(l);if(null!=e&&c!=e)break;" "==l&&n==r.head||(e=c),n=a}return n}),deleteGroupBackward=e=>deleteByGroup(e,!1),deleteGroupForward=e=>deleteByGroup(e,!0),deleteToLineEnd=e=>deleteBy(e,t=>{let r=e.lineBlockAt(t.head).to;return t.head<r?r:Math.min(e.state.doc.length,t.head+1)}),deleteLineBoundaryBackward=e=>deleteBy(e,t=>{let r=e.moveToLineBoundary(t,!1).head;return t.head>r?r:Math.max(0,t.head-1)}),deleteLineBoundaryForward=e=>deleteBy(e,t=>{let r=e.moveToLineBoundary(t,!0).head;return t.head<r?r:Math.min(e.state.doc.length,t.head+1)}),splitLine=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:Text.of(["",""])},range:EditorSelection.cursor(e.from)}));return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let r=t.from,n=e.doc.lineAt(r),i=r==n.from?r-1:findClusterBreak(n.text,r-n.from,!1)+n.from,o=r==n.to?r+1:findClusterBreak(n.text,r-n.from,!0)+n.from;return{changes:{from:i,to:o,insert:e.doc.slice(r,o).append(e.doc.slice(i,r))},range:EditorSelection.cursor(o)}});return!r.changes.empty&&(t(e.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(e){let t=[],r=-1;for(let n of e.selection.ranges){let i=e.doc.lineAt(n.from),o=e.doc.lineAt(n.to);if(n.empty||n.to!=o.from||(o=e.doc.lineAt(n.to-1)),r>=i.number){let e=t[t.length-1];e.to=o.to,e.ranges.push(n)}else t.push({from:i.from,to:o.to,ranges:[n]});r=o.number+1}return t}function moveLine(e,t,r){if(e.readOnly)return!1;let n=[],i=[];for(let o of selectedLineBlocks(e)){if(r?o.to==e.doc.length:0==o.from)continue;let t=e.doc.lineAt(r?o.to+1:o.from-1),s=t.length+1;if(r){n.push({from:o.to,to:t.to},{from:o.from,insert:t.text+e.lineBreak});for(let t of o.ranges)i.push(EditorSelection.range(Math.min(e.doc.length,t.anchor+s),Math.min(e.doc.length,t.head+s)))}else{n.push({from:t.from,to:o.from},{from:o.to,insert:e.lineBreak+t.text});for(let e of o.ranges)i.push(EditorSelection.range(e.anchor-s,e.head-s))}}return!!n.length&&(t(e.update({changes:n,scrollIntoView:!0,selection:EditorSelection.create(i,e.selection.mainIndex),userEvent:"move.line"})),!0)}const moveLineUp=({state:e,dispatch:t})=>moveLine(e,t,!1),moveLineDown=({state:e,dispatch:t})=>moveLine(e,t,!0);function copyLine(e,t,r){if(e.readOnly)return!1;let n=[];for(let i of selectedLineBlocks(e))r?n.push({from:i.from,insert:e.doc.slice(i.from,i.to)+e.lineBreak}):n.push({from:i.to,insert:e.lineBreak+e.doc.slice(i.from,i.to)});return t(e.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:e,dispatch:t})=>copyLine(e,t,!1),copyLineDown=({state:e,dispatch:t})=>copyLine(e,t,!0),deleteLine=e=>{if(e.state.readOnly)return!1;let{state:t}=e,r=t.changes(selectedLineBlocks(t).map(({from:e,to:r})=>(e>0?e--:r<t.doc.length&&r++,{from:e,to:r}))),n=updateSel(t.selection,t=>{let r;if(e.lineWrapping){let n=e.lineBlockAt(t.head),i=e.coordsAtPos(t.head,t.assoc||1);i&&(r=n.bottom+e.documentTop-i.bottom+e.defaultLineHeight/2)}return e.moveVertically(t,!0,r)}).map(r);return e.dispatch({changes:r,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0},insertNewlineKeepIndent=({state:e,dispatch:t})=>(t(e.update(e.changeByRange(t=>{let r=/^\s*/.exec(e.doc.lineAt(t.from).text)[0];return{changes:{from:t.from,to:t.to,insert:e.lineBreak+r},range:EditorSelection.cursor(t.from+r.length+1)}}),{scrollIntoView:!0,userEvent:"input"})),!0);function isBetweenBrackets(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let r,n=syntaxTree(e).resolveInner(t),i=n.childBefore(t),o=n.childAfter(t);return i&&o&&i.to<=t&&o.from>=t&&(r=i.type.prop(NodeProp.closedBy))&&r.indexOf(o.name)>-1&&e.doc.lineAt(i.to).from==e.doc.lineAt(o.from).from&&!/\S/.test(e.sliceDoc(i.to,o.from))?{from:i.to,to:o.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{let{from:n,to:i}=r,o=t.doc.lineAt(n),s=!e&&n==i&&isBetweenBrackets(t,n);e&&(n=i=(i<=o.to?o:t.doc.lineAt(i)).to);let a=new IndentContext(t,{simulateBreak:n,simulateDoubleBreak:!!s}),l=getIndentation(a,n);for(null==l&&(l=countColumn(/^\s*/.exec(t.doc.lineAt(n).text)[0],t.tabSize));i<o.to&&/\s/.test(o.text[i-o.from]);)i++;s?({from:n,to:i}=s):n>o.from&&n<o.from+100&&!/\S/.test(o.text.slice(0,n))&&(n=o.from);let c=["",indentString(t,l)];return s&&c.push(indentString(t,a.lineIndent(o.from,-1))),{changes:{from:n,to:i,insert:Text.of(c)},range:EditorSelection.cursor(n+1+c[1].length)}});return r(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(e,t){let r=-1;return e.changeByRange(n=>{let i=[];for(let s=n.from;s<=n.to;){let o=e.doc.lineAt(s);o.number>r&&(n.empty||n.to>o.from)&&(t(o,i,n),r=o.number),s=o.to+1}let o=e.changes(i);return{changes:i,range:EditorSelection.range(o.mapPos(n.anchor,1),o.mapPos(n.head,1))}})}const indentSelection=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=Object.create(null),n=new IndentContext(e,{overrideIndentation:e=>{let t=r[e];return null==t?-1:t}}),i=changeBySelectedLine(e,(t,i,o)=>{let s=getIndentation(n,t.from);if(null==s)return;/\S/.test(t.text)||(s=0);let a=/^\s*/.exec(t.text)[0],l=indentString(e,s);(a!=l||o.from<t.from+a.length)&&(r[t.from]=s,i.push({from:t.from,to:t.from+a.length,insert:l}))});return i.changes.empty||t(e.update(i,{userEvent:"indent"})),!0},indentMore=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(changeBySelectedLine(e,(t,r)=>{r.push({from:t.from,insert:e.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(changeBySelectedLine(e,(t,r)=>{let n=/^\s*/.exec(t.text)[0];if(!n)return;let i=countColumn(n,e.tabSize),o=0,s=indentString(e,Math.max(0,i-getIndentUnit(e)));for(;o<n.length&&o<s.length&&n.charCodeAt(o)==s.charCodeAt(o);)o++;r.push({from:t.from+o,to:t.from+n.length,insert:s.slice(o)})}),{userEvent:"delete.dedent"})),!0),toggleTabFocusMode=e=>(e.setTabFocusMode(),!0),insertTab=({state:e,dispatch:t})=>e.selection.ranges.some(e=>!e.empty)?indentMore({state:e,dispatch:t}):(t(e.update(e.replaceSelection("\t"),{scrollIntoView:!0,userEvent:"input"})),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent,shift:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward,preventDefault:!0},{key:"Delete",run:deleteCharForward,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward,preventDefault:!0},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward,preventDefault:!0},{mac:"Mod-Delete",run:deleteLineBoundaryForward,preventDefault:!0}].concat(emacsStyleKeymap.map(e=>({mac:e.key,run:e.run,shift:e.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Mod-Alt-ArrowUp",run:addCursorAbove},{key:"Mod-Alt-ArrowDown",run:addCursorBelow},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment},{key:"Ctrl-m",mac:"Shift-Alt-m",run:toggleTabFocusMode}].concat(standardKeymap),indentWithTab={key:"Tab",run:indentMore,shift:indentLess},names=["anchor","bold","bulletList","checkbox","code_block","codeBlock","code_inline","codeInline","colorify","emoji","file","filePopup","gpt","heading1","heading2","heading3","heading4","heading5","heading6","emptyRow","horizontalrule","horizontalRule","image","imagePopup","italic","liftListItem","link","mark","math_block","mathBlock","math_inline","mathInline","mermaid","mono","orderedList","paragraph","quote","quoteLink","redo","sinkListItem","strike","table","tabs","underline","undo","yfm_block","block","yfm_cut","cut","yfm_html_block","htmlBlock","yfm_layout","layout","yfm_note","note"],namesObj=names.reduce((e,t)=>(e[t]=t,e),{}),ActionName=namesObj;function getBlockExtraLineBreaks$1(e,{from:t,to:r}){let n=0;n=1===t.number||0===e.doc.line(t.number-1).length?0:1;let i=0;return i=r.number===e.doc.lines||0===e.doc.line(t.number+1).length?0:1,{before:n,after:i}}function replaceOrInsertAfter(e,t){const r=e.selection.main;if(isFullLinesSelection(e.doc,r)){const n=getBlockExtraLineBreaks$1(e,{from:e.doc.lineAt(r.from),to:e.doc.lineAt(r.to)});return e.replaceSelection(e.lineBreak.repeat(n.before)+t+e.lineBreak.repeat(n.after))}{const n=e.lineBreak.repeat(2)+t+e.lineBreak.repeat(2),i=e.doc.lineAt(r.to).to;return{changes:{from:i,insert:n},selection:{anchor:i+n.length-2}}}}function isFullLinesSelection(e,t){const r=e.lineAt(t.from),n=e.lineAt(t.to);return t.from<=r.from&&t.to>=n.to}const wrapToBlock=(e,t,r)=>({state:n,dispatch:i})=>{const o="function"==typeof e?e(n):e,s="function"==typeof t?t(n):t,a=n.selection.main,l=n.doc.lineAt(a.from),c=n.doc.lineAt(a.to),u=getBlockExtraLineBreaks$1(n,{from:l,to:c}),d=n.lineBreak.repeat(u.before)+o,p=s+n.lineBreak.repeat(u.after),h=[{from:l.from,insert:d}],f=l.number===c.number&&0===l.length;let m=a.head+d.length;if(r){const e="function"==typeof r.before?r.before(n):r.before,t="function"==typeof r.after?r.after(n):r.after;iterateOverRangeLines(n.doc,a,n=>{r.skipEmptyLine&&0===n.length||(e&&(h.push({from:n.from,insert:e}),f&&(m+=e.length)),t&&h.push({from:n.to,insert:t}))})}h.push({from:c.to,insert:p});const g=n.changes(h);return i(n.update({changes:g,selection:f?EditorSelection.single(m):n.selection.map(g)})),!0};function inlineWrapTo(e,t=e){return({state:r,dispatch:n})=>{const i=r.changeByRange(n=>{const i=r.changes([{from:n.from,insert:e},{from:n.to,insert:t}]);return{changes:i,range:n.empty?EditorSelection.range(n.anchor+e.length,n.head+e.length,n.goalColumn,n.bidiLevel??void 0):n.map(i)}});return n(r.update(i)),!0}}function toggleInlineMarkupFactory(e){const[t,r]="string"==typeof e?[e,e]:[e.before,e.after??e.before],n=t.length,i=r.length;return({state:e,dispatch:o})=>{const s=e.changeByRange(o=>{const s=e.sliceDoc(o.from-n,o.from)===t,a=e.sliceDoc(o.to,o.to+i)===r,l=[];s&&a?l.push({from:o.from-n,to:o.from,insert:""},{from:o.to,to:o.to+i,insert:""}):(s||l.push({from:o.from,insert:t}),a||l.push({from:o.to,insert:r}));const c=e.changes(l);return{changes:c,range:o.empty&&!s?EditorSelection.range(o.anchor+n,o.head+n,o.goalColumn,o.bidiLevel??void 0):o.map(c)}});return s.scrollIntoView=!0,o(e.update(s)),!0}}const wrapPerLine=({beforeText:e,skipEmptyLine:t=!0})=>({state:r,dispatch:n})=>{const i=r.changeByRange(n=>{const i=[];n.anchor===n.head&&0===r.doc.lineAt(n.head).length?i.push({from:n.head,insert:e}):iterateOverRangeLines(r.doc,n,r=>{t&&0===r.length||i.push({from:r.from,insert:e})});const o=r.changes(i);return{changes:o,range:n.map(o,1)}});return n(r.update(i)),!0};function iterateOverRangeLines(e,t,r){const n=e.lineAt(t.from).number,i=e.lineAt(t.to).number;for(let o=n;o<=i;o++)r(e.line(o))}const wrapToBlockquote=wrapPerLine({beforeText:"> ",skipEmptyLine:!1}),wrapToCheckbox=wrapPerLine({beforeText:"[ ] "}),insertHRule=({state:e,dispatch:t})=>{const r=replaceOrInsertAfter(e,"---");return t(e.update(r)),!0},wrapToCodeBlock=wrapToBlock(({lineBreak:e})=>"```"+e,({lineBreak:e})=>e+"```"),wrapToInlineCode=({state:e,dispatch:t})=>{const r=e.changeByRange(t=>{const r=e.sliceDoc(t.from,t.to),n=r.includes("`")?"``":"`",i=`${n}${r.startsWith("`")?" ":""}`,o=`${r.endsWith("`")?" ":""}${n}`,s=[{from:t.from,insert:i},{from:t.to,insert:o}],a=e.changes(s);return{changes:a,range:t.empty?EditorSelection.range(t.anchor+1,t.head+1,t.goalColumn,t.bidiLevel??void 0):t.map(a)}});return t(e.update(r)),!0},toH1=toHeading(1),toH2=toHeading(2),toH3=toHeading(3),toH4=toHeading(4),toH5=toHeading(5),toH6=toHeading(6);function toHeading(e){const t=/^\s*#*\s*/,r=Array(e).fill("#").join("")+" ";return({state:e,dispatch:n})=>{const i=e.changeByRange(n=>{const i=e.doc.lineAt(n.from),o=e.doc.lineAt(n.to);if(i.number===o.number&&0===i.length)return{changes:[{from:i.from,insert:r}],range:EditorSelection.range(n.anchor+r.length,n.head+r.length,n.goalColumn,n.bidiLevel??void 0)};const s=[];for(let l=i.number;l<=o.number;l++){const i=e.doc.line(l);if(0===i.length&&!n.empty)continue;const o=t.exec(i.text)?.[0].length??0;s.push({from:i.from,to:i.from+o,insert:r})}const a=e.changes(s);return{changes:a,range:n.map(a)}});return n(e.update(i)),!0}}const defaultLinkSnippet=snippet('[#{2:link}](#{1:url} "#{3:title}")'),insertLink=({state:e,dispatch:t})=>{const{from:r,to:n,empty:i}=e.selection.main;return(i?defaultLinkSnippet:snippet(`[#{2:${e.sliceDoc(r,n)}}](#{1:url} "#{3:title}")`))({state:e,dispatch:t},null,r,n),!0};function insertImages(e){return({state:t,dispatch:r})=>{const n=e.map(({title:e,url:t,alt:r,width:n,height:i})=>{let o=`![${r??""}](${t??""}`;return e&&(o+=` "${e}"`),(void 0!==n&&n.length>0||void 0!==i&&i.length>0)&&(o+=` =${n??""}x${i??""}`),o+=")",o}).join(" "),i=t.changeByRange(e=>{const r=t.changes({from:e.from,to:e.to,insert:n});return{changes:r,range:e.map(r)}});return r(t.update(i)),!0}}const fileToCurlySyntax=e=>`{% file ${Object.entries(e).map(([e,t])=>`${e}="${t.replace('"',"")}"`).join(" ")} %}`,fileToDirectiveSyntax=e=>{const{src:t,name:r,type:n}=e;let i=`:file[${r}](${t})`;return n&&(i+=`{type="${n}"}`),i},insertFiles=e=>({state:t,dispatch:r})=>{const n=t.facet(DirectiveSyntaxFacet).shouldInsertDirectiveMarkup("yfmFile")?fileToDirectiveSyntax:fileToCurlySyntax,i=e.map(n).join(" "),o=t.changeByRange(e=>{const r=t.changes({from:e.from,to:e.to,insert:i});return{changes:r,range:e.map(r)}});return r(t.update(o)),!0},toBulletList=wrapPerLine({beforeText:"- "}),toOrderedList=wrapPerLine({beforeText:"1. "}),sinkListItem=wrapPerLine({beforeText:"  ",skipEmptyLine:!1}),liftListItem=({state:e,dispatch:t})=>{const r=e.changeByRange(t=>{const r=[];iterateOverRangeLines(e.doc,t,e=>{e.text.startsWith("  ")?r.push({from:e.from,to:e.from+2,insert:""}):e.text.startsWith(" ")&&r.push({from:e.from,to:e.from+1,insert:""})});const n=e.changes(r);return{changes:n,range:t.map(n)}});return t(e.update(r)),!0},colorify$2=e=>inlineWrapTo(`{${e}}(`,")"),toggleBold=toggleInlineMarkupFactory("**"),toggleItalic=toggleInlineMarkupFactory("_"),toggleStrikethrough=toggleInlineMarkupFactory("~~"),toggleUnderline=toggleInlineMarkupFactory("++"),toggleMonospace=toggleInlineMarkupFactory("##"),toggleMarked=toggleInlineMarkupFactory("=="),DirectiveSyntaxFacet=Facet.define({combine:([e])=>e,static:!0}),wrapToYfmCutCurly=wrapToBlock(({lineBreak:e})=>'{% cut "title" %}'+e.repeat(2),({lineBreak:e})=>e.repeat(2)+"{% endcut %}"),wrapToYfmCutDirective=wrapToBlock(({lineBreak:e})=>":::cut [title]"+e,({lineBreak:e})=>e+":::"),wrapToYfmCut=e=>(e.state.facet(DirectiveSyntaxFacet).shouldInsertDirectiveMarkup("yfmCut")?wrapToYfmCutDirective:wrapToYfmCutCurly)(e),wrapToYfmNote=wrapToBlock(({lineBreak:e})=>"{% note info %}"+e.repeat(2),({lineBreak:e})=>e.repeat(2)+"{% endnote %}"),insertYfmTabs=wrapToBlock(({lineBreak:e})=>"{% list tabs %}"+e.repeat(2)+"- Tab name"+e.repeat(2),({lineBreak:e})=>e.repeat(2)+"{% endlist %}",{before:"  ",after:""}),insertYfmTable=wrapToBlock(({lineBreak:e})=>["#|","||"].join(e)+e,({lineBreak:e})=>e+["|","","||","||","","|","","||","|#",""].join(e)),insertEmptyRow=({state:e,dispatch:t})=>(t(e.update((()=>{const t=e.selection.main,{before:r,after:n,selection:i}=getBlockExtraLineBreaks(e,e.doc.lineAt(t.from)),o=e.lineBreak.repeat(r)+"&nbsp;"+e.lineBreak.repeat(n),s=e.doc.lineAt(t.to).to;return{changes:{from:s,insert:o},selection:{anchor:s+o.length+i}}})())),!0);function getBlockExtraLineBreaks(e,t){let r=0,n=0,i=2;return t.text?r=2:t.number>1&&e.doc.line(t.number-1).text&&(r=1),t.number+1<=e.doc.lines&&e.doc.line(t.number+1).text||t.number+1<=e.doc.lines&&!e.doc.line(t.number+1).text&&t.number+2>e.doc.lines?(n=1,i=1):t.number===e.doc.lines&&(n=2,i=0),{before:r,after:n,selection:i}}const LoggerFacet=Facet.define({combine:e=>e[0],static:!0}),ReactRendererFacet=Facet.define({combine:e=>e[0],static:!0}),IMG_MAX_HEIGHT=600,SUCCESS_UPLOAD_REMOVE_TIMEOUT=1e3,AddUploadWidgetEffect=StateEffect.define(),RemoveUploadWidgetEffect=StateEffect.define();async function getImageDimensions(e){const t=await loadImage(e);return{width:t.naturalWidth,height:t.naturalHeight}}async function loadImage(e){return new Promise((t,r)=>{const n=document.createElement("img");n.src=URL.createObjectURL(e),n.onload=()=>{URL.revokeObjectURL(n.src),t(n)},n.onerror=(e,t,n,i,o)=>r(o)})}function getTransferFiles(e){return e&&(isFilesOnly$3(e)||isFilesFromHtml$3(e))?Array.from(e.files):null}const icons={undo:{data:ArrowUturnCcwLeft},redo:{data:ArrowUturnCwRight},bold:{data:Bold$1},italic:{data:Italic$1},underline:{data:Underline$1},strikethrough:{data:Strikethrough$1},mono:{data:LetterM},mark:{data:FontCursor},textColor:{data:Font},text:{data:Text$4},headline:{data:Heading$1},h1:{data:Heading1},h2:{data:Heading2},h3:{data:Heading3},h4:{data:Heading4},h5:{data:Heading5},h6:{data:Heading6},bulletList:{data:ListUl},orderedList:{data:ListOl},sink:{data:TextIndent},lift:{data:TextOutdent},cut:{data:Scissors},note:{data:Sticker},code:{data:Code$1},codeBlock:{data:FileCode},link:{data:Link$2},image:{data:Picture},table:{data:LayoutList},quote:{data:QuoteClose},checklist:{data:SquareCheck},horizontalRule:{data:Minus},file:{data:Paperclip},emoji:{data:FaceSmile},tabs:{data:LayoutTabs},foldingHeading:{data:ArrowChevronRight}};function renderWidget(e,t){return jsxRuntimeExports.jsx(Portal$2,{container:e,children:jsxRuntimeExports.jsx(UploadLabel,{...t})})}const cnLabel=cn("upload-label");function UploadLabel({fileName:e,fileType:t,status:r,errorText:n,onReUploadClick:i}){const o="image"===t?icons.image:icons.file;return"uploading"===r?jsxRuntimeExports.jsx(Label$2,{size:"xs",theme:"info",icon:jsxRuntimeExports.jsx(Icon,{...o}),className:cnLabel({status:r}),children:jsxRuntimeExports.jsxs("div",{className:cnLabel("content"),children:[jsxRuntimeExports.jsx("span",{title:e,className:cnLabel("filename"),children:e}),jsxRuntimeExports.jsx(Spin,{size:"xs"})]})}):"success"===r?jsxRuntimeExports.jsx(Label$2,{size:"xs",theme:"success",icon:jsxRuntimeExports.jsx(Icon,{...o}),className:cnLabel({status:r}),children:jsxRuntimeExports.jsx("div",{className:cnLabel("content"),children:jsxRuntimeExports.jsx("span",{title:e,className:cnLabel("filename"),children:e})})}):"error"===r?jsxRuntimeExports.jsx(Tooltip,{content:n,children:jsxRuntimeExports.jsx(Label$2,{size:"xs",interactive:!0,theme:"danger",icon:jsxRuntimeExports.jsx(Icon,{...o}),onClick:i,className:cnLabel({status:r}),children:jsxRuntimeExports.jsxs("div",{className:cnLabel("content"),children:[jsxRuntimeExports.jsx("span",{className:cnLabel("filename"),children:e}),jsxRuntimeExports.jsx(Icon,{data:ArrowsRotateRight,size:16})]})})}):null}class FileUploadWidget extends WidgetType{selfId;presenter;renderer=null;props={};constructor(e){super(),this.selfId=e}toDOM(e){const t=document.createElement("div");return t.className="cm-file-upload-widget",t.style.display="inline-block",this.renderer?.remove(),this.createRenderItem(t,e),t}updateDOM(e,t){return this.renderer?.remove(),this.createRenderItem(e,t),!0}destroy(e){super.destroy(e),this.renderer?.remove(),this.presenter?.cancel(),this.presenter=void 0}setPresenter(e){this.presenter=e}render(e){Object.assign(this.props,e),this.renderer?.rerender()}createRenderItem(e,t){this.renderer=t.state.facet(ReactRendererFacet).createItem("cm-file-upload-widget",()=>renderWidget(e,{...this.props}))}}class FileUploadPresenter{widget;file;view;uploader;needDimensionsForImages;enableNewImageSizeCalculation;state="initial";constructor(e){this.file=e.file,this.view=e.view,this.widget=e.widget,this.uploader=e.uploader,this.needDimensionsForImages=e.needDimensionsForImages,this.enableNewImageSizeCalculation=e.enableNewImageSizeCalculation,this.widget.setPresenter(this),this.run()}cancel(){this.state="canceled"}run(){this.state="uploading",this.widget.render({status:"uploading",fileName:this.file.name,fileType:isImageFile$3(this.file)?"image":"file"}),this.uploader(this.file).then(this.onUploadSuccess,this.onUploadError)}onUploadSuccess=e=>{"canceled"!==this.state&&(this.state="success",this.widget.render({status:"success",fileName:this.file.name,fileType:isImageFile$3(this.file)?"image":"file"}),setTimeout(async()=>{const t=await this.formatFileMarkup(e);"canceled"!==this.state&&this.view.dispatch({effects:RemoveUploadWidgetEffect.of({id:this.widget.selfId,markup:t})})},SUCCESS_UPLOAD_REMOVE_TIMEOUT))};onUploadError=e=>{"canceled"!==this.state&&(this.state="error",this.widget.render({status:"error",fileName:this.file.name,fileType:isImageFile$3(this.file)?"image":"file",errorText:String(e),onReUploadClick:()=>{"error"===this.state&&this.run()}}))};async formatFileMarkup(e){const t=e.name??this.file.name??"";let r=`![${t}](${e.url}`;if(isImageFile$3(this.file)){if(this.needDimensionsForImages)try{const e=await getImageDimensions(this.file);if(this.enableNewImageSizeCalculation){const{width:t,height:n}=getProportionalSize({width:e.width,height:e.height,imgMaxHeight:IMG_MAX_HEIGHT});r+=` =${t}x${n}`}else r+=` =x${Math.min(e.height,IMG_MAX_HEIGHT)}`}catch(n){}r+=")"}else r=`{% file src="${e.url}" name="${t.replace('"',"")}" %}`;return r}}const FilesUploadPlugin=ViewPlugin.fromClass(class{decos=Decoration.none;view;constructor(e){this.view=e}update(e){this.decos=this.decos.map(e.changes);const t=this.view.state.facet(FileUploadHandlerFacet),r=[];for(const n of e.transactions)for(const e of n.effects)e.is(AddUploadWidgetEffect)&&(this.decos=this.decos.update({add:Array.from(e.value.files).map((r,n)=>{const{widget:i}=new FileUploadPresenter({file:r,view:this.view,uploader:t.fn,needDimensionsForImages:Boolean(t.imageWithDimensions),enableNewImageSizeCalculation:Boolean(t.enableNewImageSizeCalculation),widget:new FileUploadWidget(uniqueId("__file_widget_id"))});return Decoration.widget({widget:i,side:1,__file_widget_id:i.selfId}).range(e.value.pos+n)})})),e.is(RemoveUploadWidgetEffect)&&(this.decos=this.decos.update({filter:(t,n,i)=>i.spec.__file_widget_id!==e.value.id||(e.value.markup&&r.push({from:t,to:n,insert:e.value.markup}),!1)}));r.length&&setTimeout(()=>{this.view.dispatch({changes:r})})}},{decorations:e=>e.decos,eventHandlers:{paste(e,t){if(!e.clipboardData)return!1;const r=getTransferFiles(e.clipboardData);if(!r)return!1;const{from:n,to:i}=t.state.selection.main;return t.state.facet(LoggerFacet).event({domEvent:"paste",event:"paste-files",plugin:"files-upload",dataTypes:e.clipboardData.types}),t.dispatch({selection:{anchor:n},effects:AddUploadWidgetEffect.of({files:r,pos:n}),changes:{from:n,to:i,insert:" ".repeat(r.length)}}),e.preventDefault(),!0},drop(e,t){if(!e.dataTransfer)return!1;const r=getTransferFiles(e.dataTransfer);if(!r)return!1;t.state.facet(LoggerFacet).event({domEvent:"drop",event:"drop-files",plugin:"files-upload",dataTypes:e.dataTransfer.types});const n=this.view.posAtCoords(e,!1);return t.dispatch({selection:{anchor:n},effects:AddUploadWidgetEffect.of({files:r,pos:n}),changes:{from:n,insert:" ".repeat(r.length)}}),e.preventDefault(),!0}}}),FileUploadHandlerFacet=Facet.define({enables:FilesUploadPlugin.extension,combine:e=>e[0],static:!0});class CompositeBlock{static create(e,t,r,n,i){return new CompositeBlock(e,t,r,n+(n<<8)+e+(t<<4)|0,i,[],[])}constructor(e,t,r,n,i,o,s){this.type=e,this.value=t,this.from=r,this.hash=n,this.end=i,this.children=o,this.positions=s,this.hashProp=[[NodeProp.contextHash,n]]}addChild(e,t){e.prop(NodeProp.contextHash)!=this.hash&&(e=new Tree(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(t)}toTree(e,t=this.end){let r=this.children.length-1;return r>=0&&(t=Math.max(t,this.positions[r]+this.children[r].length+this.from)),new Tree(e.types[this.type],this.children,this.positions,t-this.from).balance({makeTree:(e,t,r)=>new Tree(NodeType.none,e,t,r,this.hashProp)})}}var Type,Type2;Type2=Type||(Type={}),Type2[Type2.Document=1]="Document",Type2[Type2.CodeBlock=2]="CodeBlock",Type2[Type2.FencedCode=3]="FencedCode",Type2[Type2.Blockquote=4]="Blockquote",Type2[Type2.HorizontalRule=5]="HorizontalRule",Type2[Type2.BulletList=6]="BulletList",Type2[Type2.OrderedList=7]="OrderedList",Type2[Type2.ListItem=8]="ListItem",Type2[Type2.ATXHeading1=9]="ATXHeading1",Type2[Type2.ATXHeading2=10]="ATXHeading2",Type2[Type2.ATXHeading3=11]="ATXHeading3",Type2[Type2.ATXHeading4=12]="ATXHeading4",Type2[Type2.ATXHeading5=13]="ATXHeading5",Type2[Type2.ATXHeading6=14]="ATXHeading6",Type2[Type2.SetextHeading1=15]="SetextHeading1",Type2[Type2.SetextHeading2=16]="SetextHeading2",Type2[Type2.HTMLBlock=17]="HTMLBlock",Type2[Type2.LinkReference=18]="LinkReference",Type2[Type2.Paragraph=19]="Paragraph",Type2[Type2.CommentBlock=20]="CommentBlock",Type2[Type2.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",Type2[Type2.Escape=22]="Escape",Type2[Type2.Entity=23]="Entity",Type2[Type2.HardBreak=24]="HardBreak",Type2[Type2.Emphasis=25]="Emphasis",Type2[Type2.StrongEmphasis=26]="StrongEmphasis",Type2[Type2.Link=27]="Link",Type2[Type2.Image=28]="Image",Type2[Type2.InlineCode=29]="InlineCode",Type2[Type2.HTMLTag=30]="HTMLTag",Type2[Type2.Comment=31]="Comment",Type2[Type2.ProcessingInstruction=32]="ProcessingInstruction",Type2[Type2.Autolink=33]="Autolink",Type2[Type2.HeaderMark=34]="HeaderMark",Type2[Type2.QuoteMark=35]="QuoteMark",Type2[Type2.ListMark=36]="ListMark",Type2[Type2.LinkMark=37]="LinkMark",Type2[Type2.EmphasisMark=38]="EmphasisMark",Type2[Type2.CodeMark=39]="CodeMark",Type2[Type2.CodeText=40]="CodeText",Type2[Type2.CodeInfo=41]="CodeInfo",Type2[Type2.LinkTitle=42]="LinkTitle",Type2[Type2.LinkLabel=43]="LinkLabel",Type2[Type2.URL=44]="URL";class LeafBlock{constructor(e,t){this.start=e,this.content=t,this.marks=[],this.parsers=[]}}class Line{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return skipSpace(this.text,e)}reset(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,t=0,r=0){for(let n=t;n<e;n++)r+=9==this.text.charCodeAt(n)?4-r%4:1;return r}findColumn(e){let t=0;for(let r=0;t<this.text.length&&r<e;t++)r+=9==this.text.charCodeAt(t)?4-r%4:1;return t}scrub(){if(!this.baseIndent)return this.text;let e="";for(let t=0;t<this.basePos;t++)e+=" ";return e+this.text.slice(this.basePos)}}function skipForList(e,t,r){if(r.pos==r.text.length||e!=t.block&&r.indent>=t.stack[r.depth+1].value+r.baseIndent)return!0;if(r.indent>=r.baseIndent+4)return!1;let n=(e.type==Type.OrderedList?isOrderedList:isBulletList)(r,t,!1);return n>0&&(e.type!=Type.BulletList||isHorizontalRule(r,t,!1)<0)&&r.text.charCodeAt(r.pos+n-1)==e.value}const DefaultSkipMarkup={[Type.Blockquote]:(e,t,r)=>62==r.next&&(r.markers.push(elt(Type.QuoteMark,t.lineStart+r.pos,t.lineStart+r.pos+1)),r.moveBase(r.pos+(space$2(r.text.charCodeAt(r.pos+1))?2:1)),e.end=t.lineStart+r.text.length,!0),[Type.ListItem]:(e,t,r)=>!(r.indent<r.baseIndent+e.value&&r.next>-1||(r.moveBaseColumn(r.baseIndent+e.value),0)),[Type.OrderedList]:skipForList,[Type.BulletList]:skipForList,[Type.Document]:()=>!0};function space$2(e){return 32==e||9==e||10==e||13==e}function skipSpace(e,t=0){for(;t<e.length&&space$2(e.charCodeAt(t));)t++;return t}function skipSpaceBack(e,t,r){for(;t>r&&space$2(e.charCodeAt(t-1));)t--;return t}function isFencedCode(e){if(96!=e.next&&126!=e.next)return-1;let t=e.pos+1;for(;t<e.text.length&&e.text.charCodeAt(t)==e.next;)t++;if(t<e.pos+3)return-1;if(96==e.next)for(let r=t;r<e.text.length;r++)if(96==e.text.charCodeAt(r))return-1;return t}function isBlockquote(e){return 62!=e.next?-1:32==e.text.charCodeAt(e.pos+1)?2:1}function isHorizontalRule(e,t,r){if(42!=e.next&&45!=e.next&&95!=e.next)return-1;let n=1;for(let i=e.pos+1;i<e.text.length;i++){let t=e.text.charCodeAt(i);if(t==e.next)n++;else if(!space$2(t))return-1}return r&&45==e.next&&isSetextUnderline(e)>-1&&e.depth==t.stack.length&&t.parser.leafBlockParsers.indexOf(DefaultLeafBlocks.SetextHeading)>-1||n<3?-1:1}function inList(e,t){for(let r=e.stack.length-1;r>=0;r--)if(e.stack[r].type==t)return!0;return!1}function isBulletList(e,t,r){return 45!=e.next&&43!=e.next&&42!=e.next||e.pos!=e.text.length-1&&!space$2(e.text.charCodeAt(e.pos+1))||!(!r||inList(t,Type.BulletList)||e.skipSpace(e.pos+2)<e.text.length)?-1:1}function isOrderedList(e,t,r){let n=e.pos,i=e.next;for(;i>=48&&i<=57;){if(n++,n==e.text.length)return-1;i=e.text.charCodeAt(n)}return n==e.pos||n>e.pos+9||46!=i&&41!=i||n<e.text.length-1&&!space$2(e.text.charCodeAt(n+1))||r&&!inList(t,Type.OrderedList)&&(e.skipSpace(n+1)==e.text.length||n>e.pos+1||49!=e.next)?-1:n+1-e.pos}function isAtxHeading(e){if(35!=e.next)return-1;let t=e.pos+1;for(;t<e.text.length&&35==e.text.charCodeAt(t);)t++;if(t<e.text.length&&32!=e.text.charCodeAt(t))return-1;let r=t-e.pos;return r>6?-1:r}function isSetextUnderline(e){if(45!=e.next&&61!=e.next||e.indent>=e.baseIndent+4)return-1;let t=e.pos+1;for(;t<e.text.length&&e.text.charCodeAt(t)==e.next;)t++;let r=t;for(;t<e.text.length&&space$2(e.text.charCodeAt(t));)t++;return t==e.text.length?r:-1}const EmptyLine=/^[ \t]*$/,CommentEnd=/-->/,ProcessingEnd=/\?>/,HTMLBlockStyle=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,CommentEnd],[/^\s*<\?/,ProcessingEnd],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,EmptyLine],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,EmptyLine]];function isHTMLBlock(e,t,r){if(60!=e.next)return-1;let n=e.text.slice(e.pos);for(let i=0,o=HTMLBlockStyle.length-(r?1:0);i<o;i++)if(HTMLBlockStyle[i][0].test(n))return i;return-1}function getListIndent(e,t){let r=e.countIndent(t,e.pos,e.indent),n=e.countIndent(e.skipSpace(t),t,r);return n>=r+5?r+1:n}function addCodeText(e,t,r){let n=e.length-1;n>=0&&e[n].to==t&&e[n].type==Type.CodeText?e[n].to=r:e.push(elt(Type.CodeText,t,r))}const DefaultBlockParsers={LinkReference:void 0,IndentedCode(e,t){let r=t.baseIndent+4;if(t.indent<r)return!1;let n=t.findColumn(r),i=e.lineStart+n,o=e.lineStart+t.text.length,s=[],a=[];for(addCodeText(s,i,o);e.nextLine()&&t.depth>=e.stack.length;)if(t.pos==t.text.length){addCodeText(a,e.lineStart-1,e.lineStart);for(let e of t.markers)a.push(e)}else{if(t.indent<r)break;{if(a.length){for(let e of a)e.type==Type.CodeText?addCodeText(s,e.from,e.to):s.push(e);a=[]}addCodeText(s,e.lineStart-1,e.lineStart);for(let e of t.markers)s.push(e);o=e.lineStart+t.text.length;let r=e.lineStart+t.findColumn(t.baseIndent+4);r<o&&addCodeText(s,r,o)}}return a.length&&(a=a.filter(e=>e.type!=Type.CodeText),a.length&&(t.markers=a.concat(t.markers))),e.addNode(e.buffer.writeElements(s,-i).finish(Type.CodeBlock,o-i),i),!0},FencedCode(e,t){let r=isFencedCode(t);if(r<0)return!1;let n=e.lineStart+t.pos,i=t.next,o=r-t.pos,s=t.skipSpace(r),a=skipSpaceBack(t.text,t.text.length,s),l=[elt(Type.CodeMark,n,n+o)];s<a&&l.push(elt(Type.CodeInfo,e.lineStart+s,e.lineStart+a));for(let c=!0;e.nextLine()&&t.depth>=e.stack.length;c=!1){let r=t.pos;if(t.indent-t.baseIndent<4)for(;r<t.text.length&&t.text.charCodeAt(r)==i;)r++;if(r-t.pos>=o&&t.skipSpace(r)==t.text.length){for(let e of t.markers)l.push(e);l.push(elt(Type.CodeMark,e.lineStart+t.pos,e.lineStart+r)),e.nextLine();break}{c||addCodeText(l,e.lineStart-1,e.lineStart);for(let e of t.markers)l.push(e);let r=e.lineStart+t.basePos,n=e.lineStart+t.text.length;r<n&&addCodeText(l,r,n)}}return e.addNode(e.buffer.writeElements(l,-n).finish(Type.FencedCode,e.prevLineEnd()-n),n),!0},Blockquote(e,t){let r=isBlockquote(t);return!(r<0)&&(e.startContext(Type.Blockquote,t.pos),e.addNode(Type.QuoteMark,e.lineStart+t.pos,e.lineStart+t.pos+1),t.moveBase(t.pos+r),null)},HorizontalRule(e,t){if(isHorizontalRule(t,e,!1)<0)return!1;let r=e.lineStart+t.pos;return e.nextLine(),e.addNode(Type.HorizontalRule,r),!0},BulletList(e,t){let r=isBulletList(t,e,!1);if(r<0)return!1;e.block.type!=Type.BulletList&&e.startContext(Type.BulletList,t.basePos,t.next);let n=getListIndent(t,t.pos+1);return e.startContext(Type.ListItem,t.basePos,n-t.baseIndent),e.addNode(Type.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+r),t.moveBaseColumn(n),null},OrderedList(e,t){let r=isOrderedList(t,e,!1);if(r<0)return!1;e.block.type!=Type.OrderedList&&e.startContext(Type.OrderedList,t.basePos,t.text.charCodeAt(t.pos+r-1));let n=getListIndent(t,t.pos+r);return e.startContext(Type.ListItem,t.basePos,n-t.baseIndent),e.addNode(Type.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+r),t.moveBaseColumn(n),null},ATXHeading(e,t){let r=isAtxHeading(t);if(r<0)return!1;let n=t.pos,i=e.lineStart+n,o=skipSpaceBack(t.text,t.text.length,n),s=o;for(;s>n&&t.text.charCodeAt(s-1)==t.next;)s--;s!=o&&s!=n&&space$2(t.text.charCodeAt(s-1))||(s=t.text.length);let a=e.buffer.write(Type.HeaderMark,0,r).writeElements(e.parser.parseInline(t.text.slice(n+r+1,s),i+r+1),-i);s<t.text.length&&a.write(Type.HeaderMark,s-n,o-n);let l=a.finish(Type.ATXHeading1-1+r,t.text.length-n);return e.nextLine(),e.addNode(l,i),!0},HTMLBlock(e,t){let r=isHTMLBlock(t,e,!1);if(r<0)return!1;let n=e.lineStart+t.pos,i=HTMLBlockStyle[r][1],o=[],s=i!=EmptyLine;for(;!i.test(t.text)&&e.nextLine();){if(t.depth<e.stack.length){s=!1;break}for(let e of t.markers)o.push(e)}s&&e.nextLine();let a=i==CommentEnd?Type.CommentBlock:i==ProcessingEnd?Type.ProcessingInstructionBlock:Type.HTMLBlock,l=e.prevLineEnd();return e.addNode(e.buffer.writeElements(o,-n).finish(a,l-n),n),!0},SetextHeading:void 0};class LinkReferenceParser{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,t,r){if(-1==this.stage)return!1;let n=r.content+"\n"+t.scrub(),i=this.advance(n);return i>-1&&i<n.length&&this.complete(e,r,i)}finish(e,t){return(2==this.stage||3==this.stage)&&skipSpace(t.content,this.pos)==t.content.length&&this.complete(e,t,t.content.length)}complete(e,t,r){return e.addLeafElement(t,elt(Type.LinkReference,this.start,this.start+r,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(!1===e&&(this.stage=-1),!1)}advance(e){for(;;){if(-1==this.stage)return-1;if(0==this.stage){if(!this.nextStage(parseLinkLabel(e,this.pos,this.start,!0)))return-1;if(58!=e.charCodeAt(this.pos))return this.stage=-1;this.elts.push(elt(Type.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else{if(1!=this.stage){if(2==this.stage){let t=skipSpace(e,this.pos),r=0;if(t>this.pos){let n=parseLinkTitle(e,t,this.start);if(n){let t=lineEnd(e,n.to-this.start);t>0&&(this.nextStage(n),r=t)}}return r||(r=lineEnd(e,this.pos)),r>0&&r<e.length?r:-1}return lineEnd(e,this.pos)}if(!this.nextStage(parseURL(e,skipSpace(e,this.pos),this.start)))return-1}}}}function lineEnd(e,t){for(;t<e.length;t++){let r=e.charCodeAt(t);if(10==r)break;if(!space$2(r))return-1}return t}class SetextHeadingParser{nextLine(e,t,r){let n=t.depth<e.stack.length?-1:isSetextUnderline(t),i=t.next;if(n<0)return!1;let o=elt(Type.HeaderMark,e.lineStart+t.pos,e.lineStart+n);return e.nextLine(),e.addLeafElement(r,elt(61==i?Type.SetextHeading1:Type.SetextHeading2,r.start,e.prevLineEnd(),[...e.parser.parseInline(r.content,r.start),o])),!0}finish(){return!1}}const DefaultLeafBlocks={LinkReference:(e,t)=>91==t.content.charCodeAt(0)?new LinkReferenceParser(t):null,SetextHeading:()=>new SetextHeadingParser},DefaultEndLeaf=[(e,t)=>isAtxHeading(t)>=0,(e,t)=>isFencedCode(t)>=0,(e,t)=>isBlockquote(t)>=0,(e,t)=>isBulletList(t,e,!0)>=0,(e,t)=>isOrderedList(t,e,!0)>=0,(e,t)=>isHorizontalRule(t,e,!0)>=0,(e,t)=>isHTMLBlock(t,e,!0)>=0],scanLineResult={text:"",end:0};class BlockContext{constructor(e,t,r,n){this.parser=e,this.input=t,this.ranges=n,this.line=new Line,this.atEnd=!1,this.reusePlaceholders=new Map,this.stoppedAt=null,this.rangeI=0,this.to=n[n.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=n[0].from,this.block=CompositeBlock.create(Type.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=r.length?new FragmentCursor$1(r,t):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(null!=this.stoppedAt&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:e}=this;for(;;){for(let t=0;;){let r=e.depth<this.stack.length?this.stack[this.stack.length-1]:null;for(;t<e.markers.length&&(!r||e.markers[t].from<r.end);){let r=e.markers[t++];this.addNode(r.type,r.from,r.to)}if(!r)break;this.finishContext()}if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;e:for(;;){for(let t of this.parser.blockParsers)if(t){let r=t(this,e);if(0!=r){if(1==r)return null;e.forward();continue e}}break}let t=new LeafBlock(this.lineStart+e.pos,e.text.slice(e.pos));for(let r of this.parser.leafBlockParsers)if(r){let e=r(this,t);e&&t.parsers.push(e)}e:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4)for(let r of this.parser.endLeafBlock)if(r(this,e,t))break e;for(let r of t.parsers)if(r.nextLine(this,e,t))return null;t.content+="\n"+e.scrub();for(let r of e.markers)t.marks.push(r)}return this.finishLeaf(t),null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}reuseFragment(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let t=this.fragments.takeNodes(this);return!!t&&(this.absoluteLineStart+=t,this.lineStart=toRelative(this.absoluteLineStart,this.ranges),this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0)}get depth(){return this.stack.length}parentType(e=this.depth-1){return this.parser.nodeSet.types[this.stack[e].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}peekLine(){return this.scanLine(this.absoluteLineEnd+1).text}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(e){let t=scanLineResult;if(t.end=e,e>=this.to)t.text="";else if(t.text=this.lineChunkAt(e),t.end+=t.text.length,this.ranges.length>1){let e=this.absoluteLineStart,r=this.rangeI;for(;this.ranges[r].to<t.end;){r++;let n=this.ranges[r].from,i=this.lineChunkAt(n);t.end=n+i.length,t.text=t.text.slice(0,this.ranges[r-1].to-e)+i,e=t.end-t.text.length}}return t}readLine(){let{line:e}=this,{text:t,end:r}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=r,e.reset(t);e.depth<this.stack.length;e.depth++){let t=this.stack[e.depth],r=this.parser.skipContextMarkup[t.type];if(!r)throw new Error("Unhandled block context "+Type[t.type]);if(!r(t,this,e))break;e.forward()}}lineChunkAt(e){let t,r=this.input.chunk(e);if(this.input.lineChunks)t="\n"==r?"":r;else{let e=r.indexOf("\n");t=e<0?r:r.slice(0,e)}return e+t.length>this.to?t.slice(0,this.to-e):t}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,t,r=0){this.block=CompositeBlock.create(e,r,this.lineStart+t,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,t,r=0){this.startContext(this.parser.getNodeType(e),t,r)}addNode(e,t,r){"number"==typeof e&&(e=new Tree(this.parser.nodeSet.types[e],none,none,(null!=r?r:this.prevLineEnd())-t)),this.block.addChild(e,t-this.block.from)}addElement(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}addLeafElement(e,t){this.addNode(this.buffer.writeElements(injectMarks(t.children,e.marks),-t.from).finish(t.type,t.to-t.from),t.from)}finishContext(){let e=this.stack.pop(),t=this.stack[this.stack.length-1];t.addChild(e.toTree(this.parser.nodeSet),e.from-t.from),this.block=t}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(e){return this.ranges.length>1?injectGaps(this.ranges,0,e.topNode,this.ranges[0].from,this.reusePlaceholders):e}finishLeaf(e){for(let r of e.parsers)if(r.finish(this,e))return;let t=injectMarks(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(t,-e.start).finish(Type.Paragraph,e.content.length),e.start)}elt(e,t,r,n){return"string"==typeof e?elt(this.parser.getNodeType(e),t,r,n):new TreeElement(e,t)}get buffer(){return new Buffer$1(this.parser.nodeSet)}}function injectGaps(e,t,r,n,i){let o=e[t].to,s=[],a=[],l=r.from+n;function c(r,i){for(;i?r>=o:r>o;){let i=e[t+1].from-o;n+=i,r+=i,t++,o=e[t].to}}for(let u=r.firstChild;u;u=u.nextSibling){c(u.from+n,!0);let r,d=u.from+n,p=i.get(u.tree);p?r=p:u.to+n>o?(r=injectGaps(e,t,u,n,i),c(u.to+n,!1)):r=u.toTree(),s.push(r),a.push(d-l)}return c(r.to+n,!1),new Tree(r.type,s,a,r.to+n-l,r.tree?r.tree.propValues:void 0)}class MarkdownParser extends Parser{constructor(e,t,r,n,i,o,s,a,l){super(),this.nodeSet=e,this.blockParsers=t,this.leafBlockParsers=r,this.blockNames=n,this.endLeafBlock=i,this.skipContextMarkup=o,this.inlineParsers=s,this.inlineNames=a,this.wrappers=l,this.nodeTypes=Object.create(null);for(let c of e.types)this.nodeTypes[c.name]=c.id}createParse(e,t,r){let n=new BlockContext(this,e,t,r);for(let i of this.wrappers)n=i(n,e,t,r);return n}configure(e){let t=resolveConfig(e);if(!t)return this;let{nodeSet:r,skipContextMarkup:n}=this,i=this.blockParsers.slice(),o=this.leafBlockParsers.slice(),s=this.blockNames.slice(),a=this.inlineParsers.slice(),l=this.inlineNames.slice(),c=this.endLeafBlock.slice(),u=this.wrappers;if(nonEmpty(t.defineNodes)){n=Object.assign({},n);let e,i=r.types.slice();for(let r of t.defineNodes){let{name:t,block:o,composite:s,style:a}="string"==typeof r?{name:r}:r;if(i.some(e=>e.name==t))continue;s&&(n[i.length]=(e,t,r)=>s(t,r,e.value));let l=i.length,c=s?["Block","BlockContext"]:o?l>=Type.ATXHeading1&&l<=Type.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;i.push(NodeType.define({id:l,name:t,props:c&&[[NodeProp.group,c]]})),a&&(e||(e={}),Array.isArray(a)||a instanceof Tag?e[t]=a:Object.assign(e,a))}r=new NodeSet(i),e&&(r=r.extend(styleTags(e)))}if(nonEmpty(t.props)&&(r=r.extend(...t.props)),nonEmpty(t.remove))for(let d of t.remove){let e=this.blockNames.indexOf(d),t=this.inlineNames.indexOf(d);e>-1&&(i[e]=o[e]=void 0),t>-1&&(a[t]=void 0)}if(nonEmpty(t.parseBlock))for(let d of t.parseBlock){let e=s.indexOf(d.name);if(e>-1)i[e]=d.parse,o[e]=d.leaf;else{let e=d.before?findName(s,d.before):d.after?findName(s,d.after)+1:s.length-1;i.splice(e,0,d.parse),o.splice(e,0,d.leaf),s.splice(e,0,d.name)}d.endLeaf&&c.push(d.endLeaf)}if(nonEmpty(t.parseInline))for(let d of t.parseInline){let e=l.indexOf(d.name);if(e>-1)a[e]=d.parse;else{let e=d.before?findName(l,d.before):d.after?findName(l,d.after)+1:l.length-1;a.splice(e,0,d.parse),l.splice(e,0,d.name)}}return t.wrap&&(u=u.concat(t.wrap)),new MarkdownParser(r,i,o,s,c,n,a,l,u)}getNodeType(e){let t=this.nodeTypes[e];if(null==t)throw new RangeError(`Unknown node type '${e}'`);return t}parseInline(e,t){let r=new InlineContext(this,e,t);e:for(let n=t;n<r.end;){let e=r.char(n);for(let t of this.inlineParsers)if(t){let i=t(r,e,n);if(i>=0){n=i;continue e}}n++}return r.resolveMarkers(0)}}function nonEmpty(e){return null!=e&&e.length>0}function resolveConfig(e){if(!Array.isArray(e))return e;if(0==e.length)return null;let t=resolveConfig(e[0]);if(1==e.length)return t;let r=resolveConfig(e.slice(1));if(!r||!t)return t||r;let n=(e,t)=>(e||none).concat(t||none),i=t.wrap,o=r.wrap;return{props:n(t.props,r.props),defineNodes:n(t.defineNodes,r.defineNodes),parseBlock:n(t.parseBlock,r.parseBlock),parseInline:n(t.parseInline,r.parseInline),remove:n(t.remove,r.remove),wrap:i?o?(e,t,r,n)=>i(o(e,t,r,n),t,r,n):i:o}}function findName(e,t){let r=e.indexOf(t);if(r<0)throw new RangeError(`Position specified relative to unknown parser ${t}`);return r}let nodeTypes=[NodeType.none];for(let e=1,r;r=Type[e];e++)nodeTypes[e]=NodeType.define({id:e,name:r,props:e>=Type.Escape?[]:[[NodeProp.group,e in DefaultSkipMarkup?["Block","BlockContext"]:["Block","LeafBlock"]]],top:"Document"==r});const none=[];let Buffer$1=class{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,t,r,n=0){return this.content.push(e,t,r,4+4*n),this}writeElements(e,t=0){for(let r of e)r.writeTo(this,t);return this}finish(e,t){return Tree.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:t})}},Element$2=class{constructor(e,t,r,n=none){this.type=e,this.from=t,this.to=r,this.children=n}writeTo(e,t){let r=e.content.length;e.writeElements(this.children,t),e.content.push(this.type,this.from+t,this.to+t,e.content.length+4-r)}toTree(e){return new Buffer$1(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}};class TreeElement{constructor(e,t){this.tree=e,this.from=t}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return none}writeTo(e,t){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+t,this.to+t,-1)}toTree(){return this.tree}}function elt(e,t,r,n){return new Element$2(e,t,r,n)}const EmphasisUnderscore={resolve:"Emphasis",mark:"EmphasisMark"},EmphasisAsterisk={resolve:"Emphasis",mark:"EmphasisMark"},LinkStart={},ImageStart={};class InlineDelimiter{constructor(e,t,r,n){this.type=e,this.from=t,this.to=r,this.side=n}}const Escapable="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let Punctuation=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{Punctuation=new RegExp("[\\p{S}|\\p{P}]","u")}catch(_){}const DefaultInline={Escape(e,t,r){if(92!=t||r==e.end-1)return-1;let n=e.char(r+1);for(let i=0;i<Escapable.length;i++)if(Escapable.charCodeAt(i)==n)return e.append(elt(Type.Escape,r,r+2));return-1},Entity(e,t,r){if(38!=t)return-1;let n=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(e.slice(r+1,r+31));return n?e.append(elt(Type.Entity,r,r+1+n[0].length)):-1},InlineCode(e,t,r){if(96!=t||r&&96==e.char(r-1))return-1;let n=r+1;for(;n<e.end&&96==e.char(n);)n++;let i=n-r,o=0;for(;n<e.end;n++)if(96==e.char(n)){if(o++,o==i&&96!=e.char(n+1))return e.append(elt(Type.InlineCode,r,n+1,[elt(Type.CodeMark,r,r+i),elt(Type.CodeMark,n+1-i,n+1)]))}else o=0;return-1},HTMLTag(e,t,r){if(60!=t||r==e.end-1)return-1;let n=e.slice(r+1,e.end),i=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(n);if(i)return e.append(elt(Type.Autolink,r,r+1+i[0].length,[elt(Type.LinkMark,r,r+1),elt(Type.URL,r+1,r+i[0].length),elt(Type.LinkMark,r+i[0].length,r+1+i[0].length)]));let o=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(n);if(o)return e.append(elt(Type.Comment,r,r+1+o[0].length));let s=/^\?[^]*?\?>/.exec(n);if(s)return e.append(elt(Type.ProcessingInstruction,r,r+1+s[0].length));let a=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(n);return a?e.append(elt(Type.HTMLTag,r,r+1+a[0].length)):-1},Emphasis(e,t,r){if(95!=t&&42!=t)return-1;let n=r+1;for(;e.char(n)==t;)n++;let i=e.slice(r-1,r),o=e.slice(n,n+1),s=Punctuation.test(i),a=Punctuation.test(o),l=/\s|^$/.test(i),c=/\s|^$/.test(o),u=!c&&(!a||l||s),d=!l&&(!s||c||a),p=u&&(42==t||!d||s),h=d&&(42==t||!u||a);return e.append(new InlineDelimiter(95==t?EmphasisUnderscore:EmphasisAsterisk,r,n,(p?1:0)|(h?2:0)))},HardBreak(e,t,r){if(92==t&&10==e.char(r+1))return e.append(elt(Type.HardBreak,r,r+2));if(32==t){let t=r+1;for(;32==e.char(t);)t++;if(10==e.char(t)&&t>=r+2)return e.append(elt(Type.HardBreak,r,t+1))}return-1},Link:(e,t,r)=>91==t?e.append(new InlineDelimiter(LinkStart,r,r+1,1)):-1,Image:(e,t,r)=>33==t&&91==e.char(r+1)?e.append(new InlineDelimiter(ImageStart,r,r+2,1)):-1,LinkEnd(e,t,r){if(93!=t)return-1;for(let n=e.parts.length-1;n>=0;n--){let t=e.parts[n];if(t instanceof InlineDelimiter&&(t.type==LinkStart||t.type==ImageStart)){if(!t.side||e.skipSpace(t.to)==r&&!/[(\[]/.test(e.slice(r+1,r+2)))return e.parts[n]=null,-1;let i=e.takeContent(n),o=e.parts[n]=finishLink(e,i,t.type==LinkStart?Type.Link:Type.Image,t.from,r+1);if(t.type==LinkStart)for(let t=0;t<n;t++){let r=e.parts[t];r instanceof InlineDelimiter&&r.type==LinkStart&&(r.side=0)}return o.to}}return-1}};function finishLink(e,t,r,n,i){let{text:o}=e,s=e.char(i),a=i;if(t.unshift(elt(Type.LinkMark,n,n+(r==Type.Image?2:1))),t.push(elt(Type.LinkMark,i-1,i)),40==s){let r,n=e.skipSpace(i+1),s=parseURL(o,n-e.offset,e.offset);s&&(n=e.skipSpace(s.to),n!=s.to&&(r=parseLinkTitle(o,n-e.offset,e.offset),r&&(n=e.skipSpace(r.to)))),41==e.char(n)&&(t.push(elt(Type.LinkMark,i,i+1)),a=n+1,s&&t.push(s),r&&t.push(r),t.push(elt(Type.LinkMark,n,a)))}else if(91==s){let r=parseLinkLabel(o,i-e.offset,e.offset,!1);r&&(t.push(r),a=r.to)}return elt(r,n,a,t)}function parseURL(e,t,r){if(60==e.charCodeAt(t)){for(let n=t+1;n<e.length;n++){let i=e.charCodeAt(n);if(62==i)return elt(Type.URL,t+r,n+1+r);if(60==i||10==i)return!1}return null}{let n=0,i=t;for(let t=!1;i<e.length;i++){let r=e.charCodeAt(i);if(space$2(r))break;if(t)t=!1;else if(40==r)n++;else if(41==r){if(!n)break;n--}else 92==r&&(t=!0)}return i>t?elt(Type.URL,t+r,i+r):i==e.length&&null}}function parseLinkTitle(e,t,r){let n=e.charCodeAt(t);if(39!=n&&34!=n&&40!=n)return!1;let i=40==n?41:n;for(let o=t+1,s=!1;o<e.length;o++){let n=e.charCodeAt(o);if(s)s=!1;else{if(n==i)return elt(Type.LinkTitle,t+r,o+1+r);92==n&&(s=!0)}}return null}function parseLinkLabel(e,t,r,n){for(let i=!1,o=t+1,s=Math.min(e.length,o+999);o<s;o++){let s=e.charCodeAt(o);if(i)i=!1;else{if(93==s)return!n&&elt(Type.LinkLabel,t+r,o+1+r);if(n&&!space$2(s)&&(n=!1),91==s)return!1;92==s&&(i=!0)}}return null}class InlineContext{constructor(e,t,r){this.parser=e,this.text=t,this.offset=r,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,t){return this.text.slice(e-this.offset,t-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,t,r,n,i){return this.append(new InlineDelimiter(e,t,r,(n?1:0)|(i?2:0)))}get hasOpenLink(){for(let e=this.parts.length-1;e>=0;e--){let t=this.parts[e];if(t instanceof InlineDelimiter&&(t.type==LinkStart||t.type==ImageStart))return!0}return!1}addElement(e){return this.append(e)}resolveMarkers(e){for(let r=e;r<this.parts.length;r++){let t=this.parts[r];if(!(t instanceof InlineDelimiter&&t.type.resolve&&2&t.side))continue;let n,i=t.type==EmphasisUnderscore||t.type==EmphasisAsterisk,o=t.to-t.from,s=r-1;for(;s>=e;s--){let e=this.parts[s];if(e instanceof InlineDelimiter&&1&e.side&&e.type==t.type&&!(i&&(1&t.side||2&e.side)&&(e.to-e.from+o)%3==0&&((e.to-e.from)%3||o%3))){n=e;break}}if(!n)continue;let a=t.type.resolve,l=[],c=n.from,u=t.to;if(i){let e=Math.min(2,n.to-n.from,o);c=n.to-e,u=t.from+e,a=1==e?"Emphasis":"StrongEmphasis"}n.type.mark&&l.push(this.elt(n.type.mark,c,n.to));for(let e=s+1;e<r;e++)this.parts[e]instanceof Element$2&&l.push(this.parts[e]),this.parts[e]=null;t.type.mark&&l.push(this.elt(t.type.mark,t.from,u));let d=this.elt(a,c,u,l);this.parts[s]=i&&n.from!=c?new InlineDelimiter(n.type,n.from,c,n.side):null,(this.parts[r]=i&&t.to!=u?new InlineDelimiter(t.type,u,t.to,t.side):null)?this.parts.splice(r,0,d):this.parts[r]=d}let t=[];for(let r=e;r<this.parts.length;r++){let e=this.parts[r];e instanceof Element$2&&t.push(e)}return t}findOpeningDelimiter(e){for(let t=this.parts.length-1;t>=0;t--){let r=this.parts[t];if(r instanceof InlineDelimiter&&r.type==e&&1&r.side)return t}return null}takeContent(e){let t=this.resolveMarkers(e);return this.parts.length=e,t}getDelimiterAt(e){let t=this.parts[e];return t instanceof InlineDelimiter?t:null}skipSpace(e){return skipSpace(this.text,e-this.offset)+this.offset}elt(e,t,r,n){return"string"==typeof e?elt(this.parser.getNodeType(e),t,r,n):new TreeElement(e,t)}}function injectMarks(e,t){if(!t.length)return e;if(!e.length)return t;let r=e.slice(),n=0;for(let i of t){for(;n<r.length&&r[n].to<i.to;)n++;if(n<r.length&&r[n].from<i.from){let e=r[n];e instanceof Element$2&&(r[n]=new Element$2(e.type,e.from,e.to,injectMarks(e.children,[i])))}else r.splice(n++,0,i)}return r}const NotLast=[Type.CodeBlock,Type.ListItem,Type.OrderedList,Type.BulletList];let FragmentCursor$1=class{constructor(e,t){this.fragments=e,this.input=t,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,t){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let e=this.fragment.to;for(;e>0&&"\n"!=this.input.read(e-1,e);)e--;this.fragmentEnd=e?e-1:0}let r=this.cursor;r||(r=this.cursor=this.fragment.tree.cursor(),r.firstChild());let n=e+this.fragment.offset;for(;r.to<=n;)if(!r.parent())return!1;for(;;){if(r.from>=n)return this.fragment.from<=t;if(!r.childAfter(n))return!1}}matches(e){let t=this.cursor.tree;return t&&t.prop(NodeProp.contextHash)==e}takeNodes(e){let t=this.cursor,r=this.fragment.offset,n=this.fragmentEnd-(this.fragment.openEnd?1:0),i=e.absoluteLineStart,o=i,s=e.block.children.length,a=o,l=s;for(;;){if(t.to-r>n){if(t.type.isAnonymous&&t.firstChild())continue;break}let i=toRelative(t.from-r,e.ranges);if(t.to-r<=e.ranges[e.rangeI].to)e.addNode(t.tree,i);else{let r=new Tree(e.parser.nodeSet.types[Type.Paragraph],[],[],0,e.block.hashProp);e.reusePlaceholders.set(r,t.tree),e.addNode(r,i)}if(t.type.is("Block")&&(NotLast.indexOf(t.type.id)<0?(o=t.to-r,s=e.block.children.length):(o=a,s=l,a=t.to-r,l=e.block.children.length)),!t.nextSibling())break}for(;e.block.children.length>s;)e.block.children.pop(),e.block.positions.pop();return o-i}};function toRelative(e,t){let r=e;for(let n=1;n<t.length;n++){let i=t[n-1].to,o=t[n].from;i<e&&(r-=o-i)}return r}const markdownHighlighting=styleTags({"Blockquote/...":tags$1.quote,HorizontalRule:tags$1.contentSeparator,"ATXHeading1/... SetextHeading1/...":tags$1.heading1,"ATXHeading2/... SetextHeading2/...":tags$1.heading2,"ATXHeading3/...":tags$1.heading3,"ATXHeading4/...":tags$1.heading4,"ATXHeading5/...":tags$1.heading5,"ATXHeading6/...":tags$1.heading6,"Comment CommentBlock":tags$1.comment,Escape:tags$1.escape,Entity:tags$1.character,"Emphasis/...":tags$1.emphasis,"StrongEmphasis/...":tags$1.strong,"Link/... Image/...":tags$1.link,"OrderedList/... BulletList/...":tags$1.list,"BlockQuote/...":tags$1.quote,"InlineCode CodeText":tags$1.monospace,"URL Autolink":tags$1.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":tags$1.processingInstruction,"CodeInfo LinkLabel":tags$1.labelName,LinkTitle:tags$1.string,Paragraph:tags$1.content}),parser$3=new MarkdownParser(new NodeSet(nodeTypes).extend(markdownHighlighting),Object.keys(DefaultBlockParsers).map(e=>DefaultBlockParsers[e]),Object.keys(DefaultBlockParsers).map(e=>DefaultLeafBlocks[e]),Object.keys(DefaultBlockParsers),DefaultEndLeaf,DefaultSkipMarkup,Object.keys(DefaultInline).map(e=>DefaultInline[e]),Object.keys(DefaultInline),[]);function leftOverSpace(e,t,r){let n=[];for(let i=e.firstChild,o=t;;i=i.nextSibling){let e=i?i.from:r;if(e>o&&n.push({from:o,to:e}),!i)break;o=i.to}return n}function parseCode(e){let{codeParser:t,htmlParser:r}=e;return{wrap:parseMixed((e,n)=>{let i=e.type.id;if(!t||i!=Type.CodeBlock&&i!=Type.FencedCode){if(r&&(i==Type.HTMLBlock||i==Type.HTMLTag||i==Type.CommentBlock))return{parser:r,overlay:leftOverSpace(e.node,e.from,e.to)}}else{let r="";if(i==Type.FencedCode){let t=e.node.getChild(Type.CodeInfo);t&&(r=n.read(t.from,t.to))}let o=t(r);if(o)return{parser:o,overlay:e=>e.type.id==Type.CodeText}}return null})}}const StrikethroughDelim={resolve:"Strikethrough",mark:"StrikethroughMark"},Strikethrough={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":tags$1.strikethrough}},{name:"StrikethroughMark",style:tags$1.processingInstruction}],parseInline:[{name:"Strikethrough",parse(e,t,r){if(126!=t||126!=e.char(r+1)||126==e.char(r+2))return-1;let n=e.slice(r-1,r),i=e.slice(r+2,r+3),o=/\s|^$/.test(n),s=/\s|^$/.test(i),a=Punctuation.test(n),l=Punctuation.test(i);return e.addDelimiter(StrikethroughDelim,r,r+2,!s&&(!l||o||a),!o&&(!a||s||l))},after:"Emphasis"}]};function parseRow(e,t,r=0,n,i=0){let o=0,s=!0,a=-1,l=-1,c=!1,u=()=>{n.push(e.elt("TableCell",i+a,i+l,e.parser.parseInline(t.slice(a,l),i+a)))};for(let d=r;d<t.length;d++){let r=t.charCodeAt(d);124!=r||c?(c||32!=r&&9!=r)&&(a<0&&(a=d),l=d+1):((!s||a>-1)&&o++,s=!1,n&&(a>-1&&u(),n.push(e.elt("TableDelimiter",d+i,d+i+1))),a=l=-1),c=!c&&92==r}return a>-1&&(o++,n&&u()),o}function hasPipe(e,t){for(let r=t;r<e.length;r++){let t=e.charCodeAt(r);if(124==t)return!0;92==t&&r++}return!1}const delimiterLine=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;class TableParser{constructor(){this.rows=null}nextLine(e,t,r){if(null==this.rows){let n;if(this.rows=!1,(45==t.next||58==t.next||124==t.next)&&delimiterLine.test(n=t.text.slice(t.pos))){let i=[];parseRow(e,r.content,0,i,r.start)==parseRow(e,n,t.pos)&&(this.rows=[e.elt("TableHeader",r.start,r.start+r.content.length,i),e.elt("TableDelimiter",e.lineStart+t.pos,e.lineStart+t.text.length)])}}else if(this.rows){let r=[];parseRow(e,t.text,t.pos,r,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+t.pos,e.lineStart+t.text.length,r))}return!1}finish(e,t){return!!this.rows&&(e.addLeafElement(t,e.elt("Table",t.start,t.start+t.content.length,this.rows)),!0)}}const Table={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":tags$1.heading}},"TableRow",{name:"TableCell",style:tags$1.content},{name:"TableDelimiter",style:tags$1.processingInstruction}],parseBlock:[{name:"Table",leaf:(e,t)=>hasPipe(t.content,0)?new TableParser:null,endLeaf(e,t,r){if(r.parsers.some(e=>e instanceof TableParser)||!hasPipe(t.text,t.basePos))return!1;let n=e.peekLine();return delimiterLine.test(n)&&parseRow(e,t.text,t.basePos)==parseRow(e,n,t.basePos)},before:"SetextHeading"}]};class TaskParser{nextLine(){return!1}finish(e,t){return e.addLeafElement(t,e.elt("Task",t.start,t.start+t.content.length,[e.elt("TaskMarker",t.start,t.start+3),...e.parser.parseInline(t.content.slice(3),t.start+3)])),!0}}const TaskList={defineNodes:[{name:"Task",block:!0,style:tags$1.list},{name:"TaskMarker",style:tags$1.atom}],parseBlock:[{name:"TaskList",leaf:(e,t)=>/^\[[ xX]\][ \t]/.test(t.content)&&"ListItem"==e.parentType().name?new TaskParser:null,after:"SetextHeading"}]},autolinkRE=/(www\.)|(https?:\/\/)|([\w.+-]{1,100}@)|(mailto:|xmpp:)/gy,urlRE=/[\w-]+(\.[\w-]+)+(\/[^\s<]*)?/gy,lastTwoDomainWords=/[\w-]+\.[\w-]+($|\/)/,emailRE=/[\w.+-]+@[\w-]+(\.[\w.-]+)+/gy,xmppResourceRE=/\/[a-zA-Z\d@.]+/gy;function count(e,t,r,n){let i=0;for(let o=t;o<r;o++)e[o]==n&&i++;return i}function autolinkURLEnd(e,t){urlRE.lastIndex=t;let r=urlRE.exec(e);if(!r||lastTwoDomainWords.exec(r[0])[0].indexOf("_")>-1)return-1;let n=t+r[0].length;for(;;){let r,i=e[n-1];if(/[?!.,:*_~]/.test(i)||")"==i&&count(e,t,n,")")>count(e,t,n,"("))n--;else{if(";"!=i||!(r=/&(?:#\d+|#x[a-f\d]+|\w+);$/.exec(e.slice(t,n))))break;n=t+r.index}}return n}function autolinkEmailEnd(e,t){emailRE.lastIndex=t;let r=emailRE.exec(e);if(!r)return-1;let n=r[0][r[0].length-1];return"_"==n||"-"==n?-1:t+r[0].length-("."==n?1:0)}const Autolink={parseInline:[{name:"Autolink",parse(e,t,r){let n=r-e.offset;if(n&&/\w/.test(e.text[n-1]))return-1;autolinkRE.lastIndex=n;let i=autolinkRE.exec(e.text),o=-1;return i?(i[1]||i[2]?(o=autolinkURLEnd(e.text,n+i[0].length),o>-1&&e.hasOpenLink&&(o=n+/([^\[\]]|\[[^\]]*\])*/.exec(e.text.slice(n,o))[0].length)):i[3]?o=autolinkEmailEnd(e.text,n):(o=autolinkEmailEnd(e.text,n+i[0].length),o>-1&&"xmpp:"==i[0]&&(xmppResourceRE.lastIndex=o,i=xmppResourceRE.exec(e.text),i&&(o=i.index+i[0].length))),o<0?-1:(e.addElement(e.elt("URL",r,o+e.offset)),o+e.offset)):-1}}]},GFM=[Table,TaskList,Strikethrough,Autolink];function parseSubSuper(e,t,r){return(n,i,o)=>{if(i!=e||n.char(o+1)==e)return-1;let s=[n.elt(r,o,o+1)];for(let a=o+1;a<n.end;a++){let i=n.char(a);if(i==e)return n.addElement(n.elt(t,o,a+1,s.concat(n.elt(r,a,a+1))));if(92==i&&s.push(n.elt("Escape",a,2+a++)),space$2(i))break}return-1}}const Superscript={defineNodes:[{name:"Superscript",style:tags$1.special(tags$1.content)},{name:"SuperscriptMark",style:tags$1.processingInstruction}],parseInline:[{name:"Superscript",parse:parseSubSuper(94,"Superscript","SuperscriptMark")}]},Subscript={defineNodes:[{name:"Subscript",style:tags$1.special(tags$1.content)},{name:"SubscriptMark",style:tags$1.processingInstruction}],parseInline:[{name:"Subscript",parse:parseSubSuper(126,"Subscript","SubscriptMark")}]},Emoji={defineNodes:[{name:"Emoji",style:tags$1.character}],parseInline:[{name:"Emoji",parse(e,t,r){let n;return 58==t&&(n=/^[a-zA-Z_0-9]+:/.exec(e.slice(r+1,e.end)))?e.addElement(e.elt("Emoji",r,r+1+n[0].length)):-1}}]};var define_process_env_default={};class Stack{constructor(e,t,r,n,i,o,s,a,l,c=0,u){this.p=e,this.stack=t,this.state=r,this.reducePos=n,this.pos=i,this.score=o,this.buffer=s,this.bufferBase=a,this.curContext=l,this.lookAhead=c,this.parent=u}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let n=e.parser.context;return new Stack(e,[],t,r,r,0,[],0,n?new StackContext(n,n.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,n=65535&e,{parser:i}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let s=i.dynamicPrecedence(n);if(s&&(this.score+=s),0==r)return this.pushState(i.getGoto(this.state,n,!0),this.reducePos),n<i.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,o?8:4,!0),void this.reduceContext(n,this.reducePos);let a=this.stack.length-3*(r-1)-(262144&e?6:0),l=a?this.stack[a-2]:this.p.ranges[0].from,c=this.reducePos-l;c>=2e3&&!(null===(t=this.p.parser.nodeSet.types[n])||void 0===t?void 0:t.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=c));let u=a?this.stack[a-1]:0,d=this.bufferBase+this.buffer.length-u;if(n<i.minRepeatTerm||131072&e){let e=i.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,l,e,d+4,!0)}if(262144&e)this.state=this.stack[a];else{let e=this.stack[a-3];this.state=i.getGoto(e,n,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(n,l)}storeNode(e,t,r,n=4,i=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,n=this.buffer.length;if(0==n&&e.parent&&(n=e.bufferBase-e.parent.bufferBase,e=e.parent),n>0&&0==e.buffer[n-4]&&e.buffer[n-1]>-1){if(t==r)return;if(e.buffer[n-2]>=t)return void(e.buffer[n-2]=r)}}if(i&&this.pos!=r){let i=this.buffer.length;if(i>0&&0!=this.buffer[i-4]){let e=!1;for(let t=i;t>0&&this.buffer[t-2]>r;t-=4)if(this.buffer[t-1]>=0){e=!0;break}if(e)for(;i>0&&this.buffer[i-2]>r;)this.buffer[i]=this.buffer[i-4],this.buffer[i+1]=this.buffer[i-3],this.buffer[i+2]=this.buffer[i-2],this.buffer[i+3]=this.buffer[i-1],i-=4,n>4&&(n-=4)}this.buffer[i]=e,this.buffer[i+1]=t,this.buffer[i+2]=r,this.buffer[i+3]=n}else this.buffer.push(e,t,r,n)}shift(e,t,r,n){if(131072&e)this.pushState(65535&e,this.pos);else if(262144&e)this.pos=n,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,n,4);else{let i=e,{parser:o}=this.p;(n>this.pos||t<=o.maxNode)&&(this.pos=n,o.stateFlag(i,1)||(this.reducePos=n)),this.pushState(i,r),this.shiftContext(t,r),t<=o.maxNode&&this.buffer.push(t,r,n,4)}}apply(e,t,r,n){65536&e?this.reduce(e):this.shift(e,t,r,n)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let n=this.pos;this.reducePos=this.pos=n+e.length,this.pushState(t,n),this.buffer.push(r,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),n=e.bufferBase+t;for(;e&&n==e.bufferBase;)e=e.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,n,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new SimulatedStack(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==r)return!1;if(!(65536&r))return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let n,i=0;i<t.length;i+=2)(n=t[i+1])!=this.state&&this.p.parser.hasAction(n,e)&&r.push(t[i],n);if(this.stack.length<120)for(let e=0;r.length<8&&e<t.length;e+=2){let n=t[e+1];r.some((e,t)=>1&t&&e==n)||r.push(t[e],n)}t=r}let r=[];for(let n=0;n<t.length&&r.length<4;n+=2){let e=t[n+1];if(e==this.state)continue;let i=this.split();i.pushState(e,this.pos),i.storeNode(0,i.pos,i.pos,4,!0),i.shiftContext(t[n],this.pos),i.reducePos=this.pos,i.score-=200,r.push(i)}return r}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(65536&t))return!1;if(!e.validAction(this.state,t)){let r=t>>19,n=65535&t,i=this.stack.length-3*r;if(i<0||e.getGoto(this.stack[i],n,!1)<0){let e=this.findForcedReduction();if(null==e)return!1;t=e}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],r=(n,i)=>{if(!t.includes(n))return t.push(n),e.allActions(n,t=>{if(393216&t);else if(65536&t){let r=(t>>19)-i;if(r>1){let n=65535&t,i=this.stack.length-3*r;if(i>=0&&e.getGoto(this.stack[i],n,!1)>=0)return r<<19|65536|n}}else{let e=r(t,i+1);if(null!=e)return e}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new StackContext(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class SimulatedStack{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,r=e>>19;0==r?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(r-1);let n=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=n}}class StackBufferCursor{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new StackBufferCursor(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(e,t=Uint16Array){if("string"!=typeof e)return e;let r=null;for(let n=0,i=0;n<e.length;){let o=0;for(;;){let t=e.charCodeAt(n++),r=!1;if(126==t){o=65535;break}t>=92&&t--,t>=34&&t--;let i=t-32;if(i>=46&&(i-=46,r=!0),o+=i,r)break;o*=46}r?r[i++]=o:r=new t(o)}return r}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,n=this.rangeIndex,i=this.pos+e;for(;i<r.from;){if(!n)return null;let e=this.ranges[--n];i-=r.from-e.to,r=e}for(;t<0?i>r.to:i>=r.to;){if(n==this.ranges.length-1)return null;let e=this.ranges[++n];i+=e.from-r.to,r=e}return i}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t,r,n=this.chunkOff+e;if(n>=0&&n<this.chunk.length)t=this.pos+e,r=this.chunk.charCodeAt(n);else{let n=this.resolveOffset(e,1);if(null==n)return-1;if(t=n,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,n=this.range;for(;n.to<=t;)n=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>n.to&&(this.chunk2=this.chunk2.slice(0,n.to-t)),r=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),r}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(null==r||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=nullToken,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let n of this.ranges){if(n.from>=t)break;n.to>e&&(r+=this.input.read(Math.max(n.from,e),Math.min(n.to,t)))}return r}}class TokenGroup{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;readToken(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class LocalTokenGroup{constructor(e,t,r){this.precTable=t,this.elseToken=r,this.data="string"==typeof e?decodeArray(e):e}token(e,t){let r=e.pos,n=0;for(;;){let r=e.next<0,i=e.resolveOffset(1,1);if(readToken(this.data,e,t,0,this.data,this.precTable),e.token.value>-1)break;if(null==this.elseToken)return;if(r||n++,null==i)break;e.reset(i,e.token)}n&&(e.reset(r,e.token),e.acceptToken(this.elseToken,n))}}LocalTokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class ExternalTokenizer{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function readToken(e,t,r,n,i,o){let s=0,a=1<<n,{dialect:l}=r.p.parser;e:for(;0!=(a&e[s]);){let r=e[s+1];for(let d=s+3;d<r;d+=2)if((e[d+1]&a)>0){let r=e[d];if(l.allows(r)&&(-1==t.token.value||t.token.value==r||overrides(r,t.token.value,i,o))){t.acceptToken(r);break}}let n=t.next,c=0,u=e[s+2];if(!(t.next<0&&u>c&&65535==e[r+3*u-3])){for(;c<u;){let i=c+u>>1,o=r+i+(i<<1),a=e[o],l=e[o+1]||65536;if(n<a)u=i;else{if(!(n>=l)){s=e[o+2],t.advance();continue e}c=i+1}}break}s=e[r+3*u-1]}}function findOffset(e,t,r){for(let n,i=t;65535!=(n=e[i]);i++)if(n==r)return i-t;return-1}function overrides(e,t,r,n){let i=findOffset(r,n,t);return i<0||findOffset(r,n,e)<i}const verbose="undefined"!=typeof process&&define_process_env_default&&/\bparse\b/.test(define_process_env_default.LOG);let stackIDs=null;function cutAt(e,t,r){let n=e.cursor(IterMode.IncludeAnonymous);for(n.moveTo(t);;)if(!(r<0?n.childBefore(t):n.childAfter(t)))for(;;){if((r<0?n.to<t:n.from>t)&&!n.type.isError)return r<0?Math.max(0,Math.min(n.to-1,t-25)):Math.min(e.length,Math.max(n.from+1,t+25));if(r<0?n.prevSibling():n.nextSibling())break;if(!n.parent())return r<0?0:e.length}}class FragmentCursor{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?cutAt(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?cutAt(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],n=this.index[t];if(n==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let i=r.children[n],o=this.start[t]+r.positions[n];if(o>e)return this.nextStart=o,null;if(i instanceof Tree){if(o==e){if(o<this.safeFrom)return null;let e=o+i.length;if(e<=this.safeTo){let t=i.prop(NodeProp.lookAhead);if(!t||e+t<this.fragment.to)return i}}this.index[t]++,o+i.length>=Math.max(this.safeFrom,e)&&(this.trees.push(i),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+i.length}}}class TokenCache{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(e=>new CachedToken)}getActions(e){let t=0,r=null,{parser:n}=e.p,{tokenizers:i}=n,o=n.stateSlot(e.state,3),s=e.curContext?e.curContext.hash:0,a=0;for(let l=0;l<i.length;l++){if(!(1<<l&o))continue;let n=i[l],c=this.tokens[l];if((!r||n.fallback)&&((n.contextual||c.start!=e.pos||c.mask!=o||c.context!=s)&&(this.updateCachedToken(c,n,e),c.mask=o,c.context=s),c.lookAhead>c.end+25&&(a=Math.max(c.lookAhead,a)),0!=c.value)){let i=t;if(c.extended>-1&&(t=this.addActions(e,c.extended,c.end,t)),t=this.addActions(e,c.value,c.end,t),!n.extend&&(r=c,t>i))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),r||e.pos!=this.stream.end||(r=new CachedToken,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new CachedToken,{pos:r,p:n}=e;return t.start=r,t.end=Math.min(r+1,n.stream.end),t.value=r==n.stream.end?n.parser.eofTerm:0,t}updateCachedToken(e,t,r){let n=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(n,e),r),e.value>-1){let{parser:t}=r.p;for(let n=0;n<t.specialized.length;n++)if(t.specialized[n]==e.value){let i=t.specializers[n](this.stream.read(e.start,e.end),r);if(i>=0&&r.p.parser.dialect.allows(i>>1)){1&i?e.extended=i>>1:e.value=i>>1;break}}}else e.value=0,e.end=this.stream.clipPos(n+1)}putAction(e,t,r,n){for(let i=0;i<n;i+=3)if(this.actions[i]==e)return n;return this.actions[n++]=e,this.actions[n++]=t,this.actions[n++]=r,n}addActions(e,t,r,n){let{state:i}=e,{parser:o}=e.p,{data:s}=o;for(let a=0;a<2;a++)for(let e=o.stateSlot(i,a?2:1);;e+=3){if(65535==s[e]){if(1!=s[e+1]){0==n&&2==s[e+1]&&(n=this.putAction(pair(s,e+2),t,r,n));break}e=pair(s,e+2)}s[e]==t&&(n=this.putAction(pair(s,e+1),t,r,n))}return n}}class Parse{constructor(e,t,r,n){this.parser=e,this.input=t,this.ranges=n,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(t,n),this.tokens=new TokenCache(e,this.stream),this.topTerm=e.top[1];let{from:i}=n[0];this.stacks=[Stack.start(this,e.top[0],i)],this.fragments=r.length&&this.stream.end-i>4*e.bufferLength?new FragmentCursor(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,r=this.stacks,n=this.minStackPos,i=this.stacks=[];if(this.bigReductionCount>300&&1==r.length){let[e]=r;for(;e.forceReduce()&&e.stack.length&&e.stack[e.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<r.length;o++){let s=r[o];for(;;){if(this.tokens.mainToken=null,s.pos>n)i.push(s);else{if(this.advanceStack(s,i,r))continue;{e||(e=[],t=[]),e.push(s);let r=this.tokens.getMainToken(s);t.push(r.value,r.end)}}break}}if(!i.length){let t=e&&findFinished(e);if(t)return this.stackToTree(t);if(this.parser.strict)throw new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&e){let r=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,i);if(r)return this.stackToTree(r.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(i.length>e)for(i.sort((e,t)=>t.score-e.score);i.length>e;)i.pop();i.some(e=>e.reducePos>n)&&this.recovering--}else if(i.length>1){e:for(let e=0;e<i.length-1;e++){let t=i[e];for(let r=e+1;r<i.length;r++){let n=i[r];if(t.sameState(n)||t.buffer.length>500&&n.buffer.length>500){if(!((t.score-n.score||t.buffer.length-n.buffer.length)>0)){i.splice(e--,1);continue e}i.splice(r--,1)}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let n=e.pos,{parser:i}=this;if(verbose&&this.stackID(e),null!=this.stoppedAt&&n>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,r=t?e.curContext.hash:0;for(let o=this.fragments.nodeAt(n);o;){let n=this.parser.nodeSet.types[o.type.id]==o.type?i.getGoto(e.state,o.type.id):-1;if(n>-1&&o.length&&(!t||(o.prop(NodeProp.contextHash)||0)==r))return e.useNode(o,n),!0;if(!(o instanceof Tree)||0==o.children.length||o.positions[0]>0)break;let s=o.children[0];if(!(s instanceof Tree&&0==o.positions[0]))break;o=s}}let o=i.stateSlot(e.state,4);if(o>0)return e.reduce(o),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let s=this.tokens.getActions(e);for(let a=0;a<s.length;){let i=s[a++],o=s[a++],l=s[a++],c=a==s.length||!r,u=c?e:e.split(),d=this.tokens.mainToken;if(u.apply(i,o,d?d.start:u.pos,l),c)return!0;u.pos>n?t.push(u):r.push(u)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return pushStackDedup(e,t),!0}}runRecovery(e,t,r){let n=null,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=t[o<<1],l=t[1+(o<<1)],c=verbose?this.stackID(s)+" -> ":"";if(s.deadEnd){if(i)continue;if(i=!0,s.restart(),this.advanceFully(s,r))continue}let u=s.split(),d=c;for(let e=0;u.forceReduce()&&e<10&&!this.advanceFully(u,r);e++)verbose&&(d=this.stackID(u)+" -> ");for(let e of s.recoverByInsert(a))this.advanceFully(e,r);this.stream.end>s.pos?(l==s.pos&&(l++,a=0),s.recoverByDelete(a,l),pushStackDedup(s,r)):(!n||n.score<s.score)&&(n=s)}return n}stackToTree(e){return e.close(),Tree.build({buffer:StackBufferCursor.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(stackIDs||(stackIDs=new WeakMap)).get(e);return t||stackIDs.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function pushStackDedup(e,t){for(let r=0;r<t.length;r++){let n=t[r];if(n.pos==e.pos&&n.sameState(e))return void(t[r].score<e.score&&(t[r]=e))}t.push(e)}class Dialect{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||0==this.disabled[e]}}const id=e=>e;class ContextTracker{constructor(e){this.start=e.start,this.shift=e.shift||id,this.reduce=e.reduce||id,this.reuse=e.reuse||id,this.hash=e.hash||(()=>0),this.strict=!1!==e.strict}}class LRParser extends Parser{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let s=0;s<e.repeatNodeCount;s++)t.push("");let r=Object.keys(e.topRules).map(t=>e.topRules[t][1]),n=[];for(let s=0;s<t.length;s++)n.push([]);function i(e,t,r){n[e].push([t,t.deserialize(String(r))])}if(e.nodeProps)for(let s of e.nodeProps){let e=s[0];"string"==typeof e&&(e=NodeProp[e]);for(let t=1;t<s.length;){let r=s[t++];if(r>=0)i(r,e,s[t++]);else{let n=s[t+-r];for(let o=-r;o>0;o--)i(s[t++],e,n);t++}}}this.nodeSet=new NodeSet(t.map((t,i)=>NodeType.define({name:i>=this.minRepeatTerm?void 0:t,id:i,props:n[i],top:r.indexOf(i)>-1,error:0==i,skipped:e.skippedNodes&&e.skippedNodes.indexOf(i)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let o=decodeArray(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let s=0;s<this.specializerSpecs.length;s++)this.specialized[s]=this.specializerSpecs[s].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(e.states,Uint32Array),this.data=decodeArray(e.stateData),this.goto=decodeArray(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(e=>"number"==typeof e?new TokenGroup(o,e):e),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let n=new Parse(this,e,t,r);for(let i of this.wrappers)n=i(n,e,t,r);return n}getGoto(e,t,r=!1){let n=this.goto;if(t>=n[0])return-1;for(let i=n[t+1];;){let t=n[i++],o=1&t,s=n[i++];if(o&&r)return s;for(let r=i+(t>>1);i<r;i++)if(n[i]==e)return s;if(o)return-1}}hasAction(e,t){let r=this.data;for(let n=0;n<2;n++)for(let i,o=this.stateSlot(e,n?2:1);;o+=3){if(65535==(i=r[o])){if(1!=r[o+1]){if(2==r[o+1])return pair(r,o+2);break}i=r[o=pair(r,o+2)]}if(i==t||0==i)return pair(r,o+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,e=>e==t||null)}allActions(e,t){let r=this.stateSlot(e,4),n=r?t(r):void 0;for(let i=this.stateSlot(e,1);null==n;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])break;i=pair(this.data,i+2)}n=t(pair(this.data,i+1))}return n}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(65535==this.data[r]){if(1!=this.data[r+1])break;r=pair(this.data,r+2)}if(!(1&this.data[r+2])){let e=this.data[r+1];t.some((t,r)=>1&r&&t==e)||t.push(this.data[r],e)}}return t}configure(e){let t=Object.assign(Object.create(LRParser.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(t=>{let r=e.tokenizers.find(e=>e.from==t);return r?r.to:t})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,n)=>{let i=e.specializers.find(e=>e.from==r.external);if(!i)return r;let o=Object.assign(Object.assign({},r),{external:i.to});return t.specializers[n]=getSpecializer(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let i of e.split(" ")){let e=t.indexOf(i);e>=0&&(r[e]=!0)}let n=null;for(let i=0;i<t.length;i++)if(!r[i])for(let e,r=this.dialects[t[i]];65535!=(e=this.data[r++]);)(n||(n=new Uint8Array(this.maxTerm+1)))[e]=1;return new Dialect(e,r,n)}static deserialize(e){return new LRParser(e)}}function pair(e,t){return e[t]|e[t+1]<<16}function findFinished(e){let t=null;for(let r of e){let e=r.p.stoppedAt;(r.pos==r.p.stream.end||null!=e&&r.pos>e)&&r.p.parser.stateFlag(r.state,2)&&(!t||t.score<r.score)&&(t=r)}return t}function getSpecializer(e){if(e.external){let t=e.extend?1:0;return(r,n)=>e.external(r,n)<<1|t}return e.get}const scriptText=55,StartCloseScriptTag=1,styleText=56,StartCloseStyleTag=2,textareaText=57,StartCloseTextareaTag=3,EndTag=4,SelfClosingEndTag=5,StartTag=6,StartScriptTag=7,StartStyleTag=8,StartTextareaTag=9,StartSelfClosingTag=10,StartCloseTag=11,NoMatchStartCloseTag=12,MismatchedStartCloseTag=13,missingCloseTag=58,IncompleteTag=14,IncompleteCloseTag=15,commentContent$1=59,Element$1=21,TagName=23,Attribute=24,AttributeName=25,AttributeValue=27,UnquotedAttributeValue=28,ScriptText=29,StyleText=32,TextareaText=35,OpenTag=37,CloseTag=38,Dialect_noMatch=0,Dialect_selfClosing=1,selfClosers$1={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},closeOnOpen={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function nameChar(e){return 45==e||46==e||58==e||e>=65&&e<=90||95==e||e>=97&&e<=122||e>=161}let cachedName=null,cachedInput=null,cachedPos=0;function tagNameAfter(e,t){let r=e.pos+t;if(cachedPos==r&&cachedInput==e)return cachedName;let n=e.peek(t),i="";for(;nameChar(n);)i+=String.fromCharCode(n),n=e.peek(++t);return cachedInput=e,cachedPos=r,cachedName=i?i.toLowerCase():n==question$1||n==bang?void 0:null}const lessThan=60,greaterThan=62,slash$1=47,question$1=63,bang=33,dash$1=45;function ElementContext(e,t){this.name=e,this.parent=t}const startTagTerms=[StartTag,StartSelfClosingTag,StartScriptTag,StartStyleTag,StartTextareaTag],elementContext=new ContextTracker({start:null,shift:(e,t,r,n)=>startTagTerms.indexOf(t)>-1?new ElementContext(tagNameAfter(n,1)||"",e):e,reduce:(e,t)=>t==Element$1&&e?e.parent:e,reuse(e,t,r,n){let i=t.type.id;return i==StartTag||i==OpenTag?new ElementContext(tagNameAfter(n,1)||"",e):e},strict:!1}),tagStart=new ExternalTokenizer((e,t)=>{if(e.next!=lessThan)return void(e.next<0&&t.context&&e.acceptToken(missingCloseTag));e.advance();let r=e.next==slash$1;r&&e.advance();let n=tagNameAfter(e,0);if(void 0===n)return;if(!n)return e.acceptToken(r?IncompleteCloseTag:IncompleteTag);let i=t.context?t.context.name:null;if(r){if(n==i)return e.acceptToken(StartCloseTag);if(i&&implicitlyClosed[i])return e.acceptToken(missingCloseTag,-2);if(t.dialectEnabled(Dialect_noMatch))return e.acceptToken(NoMatchStartCloseTag);for(let e=t.context;e;e=e.parent)if(e.name==n)return;e.acceptToken(MismatchedStartCloseTag)}else{if("script"==n)return e.acceptToken(StartScriptTag);if("style"==n)return e.acceptToken(StartStyleTag);if("textarea"==n)return e.acceptToken(StartTextareaTag);if(selfClosers$1.hasOwnProperty(n))return e.acceptToken(StartSelfClosingTag);i&&closeOnOpen[i]&&closeOnOpen[i][n]?e.acceptToken(missingCloseTag,-1):e.acceptToken(StartTag)}},{contextual:!0}),commentContent=new ExternalTokenizer(e=>{for(let t=0,r=0;;r++){if(e.next<0){r&&e.acceptToken(commentContent$1);break}if(e.next==dash$1)t++;else{if(e.next==greaterThan&&t>=2){r>=3&&e.acceptToken(commentContent$1,-2);break}t=0}e.advance()}});function inForeignElement(e){for(;e;e=e.parent)if("svg"==e.name||"math"==e.name)return!0;return!1}const endTag=new ExternalTokenizer((e,t)=>{if(e.next==slash$1&&e.peek(1)==greaterThan){let r=t.dialectEnabled(Dialect_selfClosing)||inForeignElement(t.context);e.acceptToken(r?SelfClosingEndTag:EndTag,2)}else e.next==greaterThan&&e.acceptToken(EndTag,1)});function contentTokenizer(e,t,r){let n=2+e.length;return new ExternalTokenizer(i=>{for(let o=0,s=0,a=0;;a++){if(i.next<0){a&&i.acceptToken(t);break}if(0==o&&i.next==lessThan||1==o&&i.next==slash$1||o>=2&&o<n&&i.next==e.charCodeAt(o-2))o++,s++;else{if(o==n&&i.next==greaterThan){a>s?i.acceptToken(t,-s):i.acceptToken(r,-(s-2));break}if((10==i.next||13==i.next)&&a){i.acceptToken(t,1);break}o=s=0}i.advance()}})}const scriptTokens=contentTokenizer("script",scriptText,StartCloseScriptTag),styleTokens=contentTokenizer("style",styleText,StartCloseStyleTag),textareaTokens=contentTokenizer("textarea",textareaText,StartCloseTextareaTag),htmlHighlighting=styleTags({"Text RawText IncompleteTag IncompleteCloseTag":tags$1.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":tags$1.angleBracket,TagName:tags$1.tagName,"MismatchedCloseTag/TagName":[tags$1.tagName,tags$1.invalid],AttributeName:tags$1.attributeName,"AttributeValue UnquotedAttributeValue":tags$1.attributeValue,Is:tags$1.definitionOperator,"EntityReference CharacterReference":tags$1.character,Comment:tags$1.blockComment,ProcessingInst:tags$1.processingInstruction,DoctypeDecl:tags$1.documentMeta}),parser$2=LRParser.deserialize({version:14,states:",xOVO!rOOO!ZQ#tO'#CrO!`Q#tO'#C{O!eQ#tO'#DOO!jQ#tO'#DRO!oQ#tO'#DTO!tOaO'#CqO#PObO'#CqO#[OdO'#CqO$kO!rO'#CqOOO`'#Cq'#CqO$rO$fO'#DUO$zQ#tO'#DWO%PQ#tO'#DXOOO`'#Dl'#DlOOO`'#DZ'#DZQVO!rOOO%UQ&rO,59^O%aQ&rO,59gO%lQ&rO,59jO%wQ&rO,59mO&SQ&rO,59oOOOa'#D_'#D_O&_OaO'#CyO&jOaO,59]OOOb'#D`'#D`O&rObO'#C|O&}ObO,59]OOOd'#Da'#DaO'VOdO'#DPO'bOdO,59]OOO`'#Db'#DbO'jO!rO,59]O'qQ#tO'#DSOOO`,59],59]OOOp'#Dc'#DcO'vO$fO,59pOOO`,59p,59pO(OQ#|O,59rO(TQ#|O,59sOOO`-E7X-E7XO(YQ&rO'#CtOOQW'#D['#D[O(hQ&rO1G.xOOOa1G.x1G.xOOO`1G/Z1G/ZO(sQ&rO1G/ROOOb1G/R1G/RO)OQ&rO1G/UOOOd1G/U1G/UO)ZQ&rO1G/XOOO`1G/X1G/XO)fQ&rO1G/ZOOOa-E7]-E7]O)qQ#tO'#CzOOO`1G.w1G.wOOOb-E7^-E7^O)vQ#tO'#C}OOOd-E7_-E7_O){Q#tO'#DQOOO`-E7`-E7`O*QQ#|O,59nOOOp-E7a-E7aOOO`1G/[1G/[OOO`1G/^1G/^OOO`1G/_1G/_O*VQ,UO,59`OOQW-E7Y-E7YOOOa7+$d7+$dOOO`7+$u7+$uOOOb7+$m7+$mOOOd7+$p7+$pOOO`7+$s7+$sO*bQ#|O,59fO*gQ#|O,59iO*lQ#|O,59lOOO`1G/Y1G/YO*qO7[O'#CwO+SOMhO'#CwOOQW1G.z1G.zOOO`1G/Q1G/QOOO`1G/T1G/TOOO`1G/W1G/WOOOO'#D]'#D]O+eO7[O,59cOOQW,59c,59cOOOO'#D^'#D^O+vOMhO,59cOOOO-E7Z-E7ZOOQW1G.}1G.}OOOO-E7[-E7[",stateData:",c~O!_OS~OUSOVPOWQOXROYTO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O|_O!eZO~OgaO~OgbO~OgcO~OgdO~OgeO~O!XfOPmP![mP~O!YiOQpP![pP~O!ZlORsP![sP~OUSOVPOWQOXROYTOZqO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O!eZO~O![rO~P#gO!]sO!fuO~OgvO~OgwO~OS|OT}OiyO~OS!POT}OiyO~OS!ROT}OiyO~OS!TOT}OiyO~OS}OT}OiyO~O!XfOPmX![mX~OP!WO![!XO~O!YiOQpX![pX~OQ!ZO![!XO~O!ZlORsX![sX~OR!]O![!XO~O![!XO~P#gOg!_O~O!]sO!f!aO~OS!bO~OS!cO~Oj!dOShXThXihX~OS!fOT!gOiyO~OS!hOT!gOiyO~OS!iOT!gOiyO~OS!jOT!gOiyO~OS!gOT!gOiyO~Og!kO~Og!lO~Og!mO~OS!nO~Ol!qO!a!oO!c!pO~OS!rO~OS!sO~OS!tO~Ob!uOc!uOd!uO!a!wO!b!uO~Ob!xOc!xOd!xO!c!wO!d!xO~Ob!uOc!uOd!uO!a!{O!b!uO~Ob!xOc!xOd!xO!c!{O!d!xO~OT~cbd!ey|!e~",goto:"%q!aPPPPPPPPPPPPPPPPPPPPP!b!hP!nPP!zP!}#Q#T#Z#^#a#g#j#m#s#y!bP!b!bP$P$V$m$s$y%P%V%]%cPPPPPPPP%iX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:" StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:68,context:elementContext,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,22,31,34,37,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,30,33,36,38,"OpenTag"],["group",-10,14,15,18,19,20,21,40,41,42,43,"Entity",17,"Entity TextContent",-3,29,32,35,"TextContent Entity"],["isolate",-11,22,30,31,33,34,36,37,38,39,42,43,"ltr",-3,27,28,40,""]],propSources:[htmlHighlighting],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|caPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bXaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UVaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pTaPOv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!dpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({WaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!b`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!b`!dpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYlWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]`aP!b`!dp!_^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebiSlWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXiSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vciSaP!b`!dpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!ahaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WiiSlWd!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zblWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOb!R!R7tP;=`<%l7S!Z8OYlWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{iiSlWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbiSlWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QciSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXiSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TalWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOc!R!RAwP;=`<%lAY!ZBRYlWc!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbiSlWc!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbiSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXiSc!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!cxaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYliSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_kiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_XaP!b`!dp!fQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZiSgQaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!b`!dpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!b`!dp!ePOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!b`!dpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!b`!dpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!b`!dpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!b`!dpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!b`!dpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!b`!dpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!b`!dpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!dpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO|PP!-nP;=`<%l!-Sq!-xS!dp|POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!b`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!b`|POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!b`!dp|POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!b`!dpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!b`!dpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!b`!dpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!b`!dpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!b`!dpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!b`!dpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!dpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOyPP!7TP;=`<%l!6Vq!7]V!dpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!dpyPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!b`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!b`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!b`yPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!b`!dpyPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXjSaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[scriptTokens,styleTokens,textareaTokens,endTag,tagStart,commentContent,0,1,2,3,4,5],topRules:{Document:[0,16]},dialects:{noMatch:0,selfClosing:515},tokenPrec:517});function getAttrs(e,t){let r=Object.create(null);for(let n of e.getChildren(Attribute)){let e=n.getChild(AttributeName),i=n.getChild(AttributeValue)||n.getChild(UnquotedAttributeValue);e&&(r[t.read(e.from,e.to)]=i?i.type.id==AttributeValue?t.read(i.from+1,i.to-1):t.read(i.from,i.to):"")}return r}function findTagName(e,t){let r=e.getChild(TagName);return r?t.read(r.from,r.to):" "}function maybeNest(e,t,r){let n;for(let i of r)if(!i.attrs||i.attrs(n||(n=getAttrs(e.node.parent.firstChild,t))))return{parser:i.parser};return null}function configureNesting(e=[],t=[]){let r=[],n=[],i=[],o=[];for(let a of e)("script"==a.tag?r:"style"==a.tag?n:"textarea"==a.tag?i:o).push(a);let s=t.length?Object.create(null):null;for(let a of t)(s[a.name]||(s[a.name]=[])).push(a);return parseMixed((e,t)=>{let a=e.type.id;if(a==ScriptText)return maybeNest(e,t,r);if(a==StyleText)return maybeNest(e,t,n);if(a==TextareaText)return maybeNest(e,t,i);if(a==Element$1&&o.length){let r,n=e.node,i=n.firstChild,s=i&&findTagName(i,t);if(s)for(let e of o)if(e.tag==s&&(!e.attrs||e.attrs(r||(r=getAttrs(i,t))))){let t=n.lastChild,r=t.type.id==CloseTag?t.from:n.to;if(r>i.to)return{parser:e.parser,overlay:[{from:i.to,to:r}]}}}if(s&&a==Attribute){let r,n=e.node;if(r=n.firstChild){let e=s[t.read(r.from,r.to)];if(e)for(let r of e){if(r.tagName&&r.tagName!=findTagName(n.parent,t))continue;let e=n.lastChild;if(e.type.id==AttributeValue){let t=e.from+1,n=e.lastChild,i=e.to-(n&&n.isError?0:1);if(i>t)return{parser:r.parser,overlay:[{from:t,to:i}]}}else if(e.type.id==UnquotedAttributeValue)return{parser:r.parser,overlay:[{from:e.from,to:e.to}]}}}}return null})}const descendantOp=122,Unit=1,identifier$2=123,callee=124,VariableName=2,queryIdentifier=125,queryVariableName=3,QueryCallee=4,space$1=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],colon=58,parenL=40,underscore=95,bracketL$1=91,dash=45,period=46,hash=35,percent=37,ampersand=38,backslash=92,newline$1=10,asterisk=42;function isAlpha(e){return e>=65&&e<=90||e>=97&&e<=122||e>=161}function isDigit(e){return e>=48&&e<=57}function isHex(e){return isDigit(e)||e>=97&&e<=102||e>=65&&e<=70}const identifierTokens=(e,t,r)=>(n,i)=>{for(let o=!1,s=0,a=0;;a++){let{next:l}=n;if(isAlpha(l)||l==dash||l==underscore||o&&isDigit(l))!o&&(l!=dash||a>0)&&(o=!0),s===a&&l==dash&&s++,n.advance();else{if(l!=backslash||n.peek(1)==newline$1){o&&n.acceptToken(2==s&&i.canShift(VariableName)?t:l==parenL?r:e);break}if(n.advance(),isHex(n.next)){do{n.advance()}while(isHex(n.next));32==n.next&&n.advance()}else n.next>-1&&n.advance();o=!0}}},identifiers=new ExternalTokenizer(identifierTokens(identifier$2,VariableName,callee)),queryIdentifiers=new ExternalTokenizer(identifierTokens(queryIdentifier,queryVariableName,QueryCallee)),descendant=new ExternalTokenizer(e=>{if(space$1.includes(e.peek(-1))){let{next:t}=e;(isAlpha(t)||t==underscore||t==hash||t==period||t==asterisk||t==bracketL$1||t==colon&&isAlpha(e.peek(1))||t==dash||t==ampersand)&&e.acceptToken(descendantOp)}}),unitToken=new ExternalTokenizer(e=>{if(!space$1.includes(e.peek(-1))){let{next:t}=e;if(t==percent&&(e.advance(),e.acceptToken(Unit)),isAlpha(t)){do{e.advance()}while(isAlpha(e.next)||isDigit(e.next));e.acceptToken(Unit)}}}),cssHighlighting=styleTags({"AtKeyword import charset namespace keyframes media supports":tags$1.definitionKeyword,"from to selector":tags$1.keyword,NamespaceName:tags$1.namespace,KeyframeName:tags$1.labelName,KeyframeRangeName:tags$1.operatorKeyword,TagName:tags$1.tagName,ClassName:tags$1.className,PseudoClassName:tags$1.constant(tags$1.className),IdName:tags$1.labelName,"FeatureName PropertyName":tags$1.propertyName,AttributeName:tags$1.attributeName,NumberLiteral:tags$1.number,KeywordQuery:tags$1.keyword,UnaryQueryOp:tags$1.operatorKeyword,"CallTag ValueName":tags$1.atom,VariableName:tags$1.variableName,Callee:tags$1.operatorKeyword,Unit:tags$1.unit,"UniversalSelector NestingSelector":tags$1.definitionOperator,"MatchOp CompareOp":tags$1.compareOperator,"ChildOp SiblingOp, LogicOp":tags$1.logicOperator,BinOp:tags$1.arithmeticOperator,Important:tags$1.modifier,Comment:tags$1.blockComment,ColorLiteral:tags$1.color,"ParenthesizedContent StringLiteral":tags$1.string,":":tags$1.punctuation,"PseudoOp #":tags$1.derefOperator,"; ,":tags$1.separator,"( )":tags$1.paren,"[ ]":tags$1.squareBracket,"{ }":tags$1.brace}),spec_callee={__proto__:null,lang:38,"nth-child":38,"nth-last-child":38,"nth-of-type":38,"nth-last-of-type":38,dir:38,"host-context":38,if:84,url:124,"url-prefix":124,domain:124,regexp:124},spec_queryIdentifier={__proto__:null,or:98,and:98,not:106,only:106,layer:170},spec_QueryCallee={__proto__:null,selector:112,layer:166},spec_AtKeyword={__proto__:null,"@import":162,"@media":174,"@charset":178,"@namespace":182,"@keyframes":188,"@supports":200,"@scope":204},spec_identifier$1={__proto__:null,to:207},parser$1=LRParser.deserialize({version:14,states:"EbQYQdOOO#qQdOOP#xO`OOOOQP'#Cf'#CfOOQP'#Ce'#CeO#}QdO'#ChO$nQaO'#CcO$xQdO'#CkO%TQdO'#DpO%YQdO'#DrO%_QdO'#DuO%_QdO'#DxOOQP'#FV'#FVO&eQhO'#EhOOQS'#FU'#FUOOQS'#Ek'#EkQYQdOOO&lQdO'#EOO&PQhO'#EUO&lQdO'#EWO'aQdO'#EYO'lQdO'#E]O'tQhO'#EcO(VQdO'#EeO(bQaO'#CfO)VQ`O'#D{O)[Q`O'#F`O)gQdO'#F`QOQ`OOP)qO&jO'#CaPOOO)C@t)C@tOOQP'#Cj'#CjOOQP,59S,59SO#}QdO,59SO)|QdO,59VO%TQdO,5:[O%YQdO,5:^O%_QdO,5:aO%_QdO,5:cO%_QdO,5:dO%_QdO'#ErO*XQ`O,58}O*aQdO'#DzOOQS,58},58}OOQP'#Cn'#CnOOQO'#Dn'#DnOOQP,59V,59VO*hQ`O,59VO*mQ`O,59VOOQP'#Dq'#DqOOQP,5:[,5:[OOQO'#Ds'#DsO*rQpO,5:^O+]QaO,5:aO+sQaO,5:dOOQW'#DZ'#DZO,ZQhO'#DdO,xQhO'#FaO'tQhO'#DbO-WQ`O'#DhOOQW'#F['#F[O-]Q`O,5;SO-eQ`O'#DeOOQS-E8i-E8iOOQ['#Cs'#CsO-jQdO'#CtO.QQdO'#CzO.hQdO'#C}O/OQ!pO'#DPO1RQ!jO,5:jOOQO'#DU'#DUO*mQ`O'#DTO1cQ!nO'#FXO3`Q`O'#DVO3eQ`O'#DkOOQ['#FX'#FXO-`Q`O,5:pO3jQ!bO,5:rOOQS'#E['#E[O3rQ`O,5:tO3wQdO,5:tOOQO'#E_'#E_O4PQ`O,5:wO4UQhO,5:}O%_QdO'#DgOOQS,5;P,5;PO-eQ`O,5;PO4^QdO,5;PO4fQdO,5:gO4vQdO'#EtO5TQ`O,5;zO5TQ`O,5;zPOOO'#Ej'#EjP5`O&jO,58{POOO,58{,58{OOQP1G.n1G.nOOQP1G.q1G.qO*hQ`O1G.qO*mQ`O1G.qOOQP1G/v1G/vO5kQpO1G/xO5sQaO1G/{O6ZQaO1G/}O6qQaO1G0OO7XQaO,5;^OOQO-E8p-E8pOOQS1G.i1G.iO7cQ`O,5:fO7hQdO'#DoO7oQdO'#CrOOQP1G/x1G/xO&lQdO1G/xO7vQ!jO'#DZO8UQ!bO,59vO8^QhO,5:OOOQO'#F]'#F]O8XQ!bO,59zO'tQhO,59xO8fQhO'#EvO8sQ`O,5;{O9OQhO,59|O9uQhO'#DiOOQW,5:S,5:SOOQS1G0n1G0nOOQW,5:P,5:PO9|Q!fO'#FYOOQS'#FY'#FYOOQS'#Em'#EmO;^QdO,59`OOQ[,59`,59`O;tQdO,59fOOQ[,59f,59fO<[QdO,59iOOQ[,59i,59iOOQ[,59k,59kO&lQdO,59mO<rQhO'#EQOOQW'#EQ'#EQO=WQ`O1G0UO1[QhO1G0UOOQ[,59o,59oO'tQhO'#DXOOQ[,59q,59qO=]Q#tO,5:VOOQS1G0[1G0[OOQS1G0^1G0^OOQS1G0`1G0`O=hQ`O1G0`O=mQdO'#E`OOQS1G0c1G0cOOQS1G0i1G0iO=xQaO,5:RO-`Q`O1G0kOOQS1G0k1G0kO-eQ`O1G0kO>PQ!fO1G0ROOQO1G0R1G0ROOQO,5;`,5;`O>gQdO,5;`OOQO-E8r-E8rO>tQ`O1G1fPOOO-E8h-E8hPOOO1G.g1G.gOOQP7+$]7+$]OOQP7+%d7+%dO&lQdO7+%dOOQS1G0Q1G0QO?PQaO'#F_O?ZQ`O,5:ZO?`Q!fO'#ElO@^QdO'#FWO@hQ`O,59^O@mQ!bO7+%dO&lQdO1G/bO@uQhO1G/fOOQW1G/j1G/jOOQW1G/d1G/dOAWQhO,5;bOOQO-E8t-E8tOAfQhO'#DZOAtQhO'#F^OBPQ`O'#F^OBUQ`O,5:TOOQS-E8k-E8kOOQ[1G.z1G.zOOQ[1G/Q1G/QOOQ[1G/T1G/TOOQ[1G/X1G/XOBZQdO,5:lOOQS7+%p7+%pOB`Q`O7+%pOBeQhO'#DYOBmQ`O,59sO'tQhO,59sOOQ[1G/q1G/qOBuQ`O1G/qOOQS7+%z7+%zOBzQbO'#DPOOQO'#Eb'#EbOCYQ`O'#EaOOQO'#Ea'#EaOCeQ`O'#EwOCmQdO,5:zOOQS,5:z,5:zOOQ[1G/m1G/mOOQS7+&V7+&VO-`Q`O7+&VOCxQ!fO'#EsO&lQdO'#EsOEPQdO7+%mOOQO7+%m7+%mOOQO1G0z1G0zOEdQ!bO<<IOOElQdO'#EqOEvQ`O,5;yOOQP1G/u1G/uOOQS-E8j-E8jOFOQdO'#EpOFYQ`O,5;rOOQ]1G.x1G.xOOQP<<IO<<IOOFbQdO7+$|OOQO'#D]'#D]OFiQ!bO7+%QOFqQhO'#EoOF{Q`O,5;xO&lQdO,5;xOOQW1G/o1G/oOOQO'#ES'#ESOGTQ`O1G0WOOQS<<I[<<I[O&lQdO,59tOGnQhO1G/_OOQ[1G/_1G/_OGuQ`O1G/_OOQW-E8l-E8lOOQ[7+%]7+%]OOQO,5:{,5:{O=pQdO'#ExOCeQ`O,5;cOOQS,5;c,5;cOOQS-E8u-E8uOOQS1G0f1G0fOOQS<<Iq<<IqOG}Q!fO,5;_OOQS-E8q-E8qOOQO<<IX<<IXOOQPAN>jAN>jOIUQaO,5;]OOQO-E8o-E8oOI`QdO,5;[OOQO-E8n-E8nOOQW<<Hh<<HhOOQW<<Hl<<HlOIjQhO<<HlOI{QhO,5;ZOJWQ`O,5;ZOOQO-E8m-E8mOJ]QdO1G1dOBZQdO'#EuOJgQ`O7+%rOOQW7+%r7+%rOJoQ!bO1G/`OOQ[7+$y7+$yOJzQhO7+$yPKRQ`O'#EnOOQO,5;d,5;dOOQO-E8v-E8vOOQS1G0}1G0}OKWQ`OAN>WO&lQdO1G0uOK]Q`O7+'OOOQO,5;a,5;aOOQO-E8s-E8sOOQW<<I^<<I^OOQ[<<He<<HePOQW,5;Y,5;YOOQWG23rG23rOKeQdO7+&a",stateData:"Kx~O#sOS#tQQ~OW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#oRO~OQiOW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#ohO~O#m$SP~P!dO#tmO~O#ooO~O]qO`rOarOjsOmtO!juO!mwO#nvO~OpzO!^xO~P$SOc!QO#o|O#p}O~O#o!RO~O#o!TO~OW[OZ[O]TO`VOaVOjWOmXO!jYO!mZO#oRO~OS!]Oe!YO!V![O!Y!`O#q!XOp$TP~Ok$TP~P&POQ!jOe!cOm!dOp!eOr!mOt!mOz!kO!`!lO#o!bO#p!hO#}!fO~Ot!qO!`!lO#o!pO~Ot!sO#o!sO~OS!]Oe!YO!V![O!Y!`O#q!XO~Oe!vOpzO#Z!xO~O]YX`YX`!pXaYXjYXmYXpYX!^YX!jYX!mYX#nYX~O`!zO~Ok!{O#m$SXo$SX~O#m$SXo$SX~P!dO#u#OO#v#OO#w#QO~Oc#UO#o|O#p}O~OpzO!^xO~Oo$SP~P!dOe#`O~Oe#aO~Ol#bO!h#cO~O]qO`rOarOjsOmtO~Op!ia!^!ia!j!ia!m!ia#n!iad!ia~P*zOp!la!^!la!j!la!m!la#n!lad!la~P*zOR#gOS!]Oe!YOr#gOt#gO!V![O!Y!`O#q#dO#}!fO~O!R#iO!^#jOk$TXp$TX~Oe#mO~Ok#oOpzO~Oe!vO~O]#rO`#rOd#uOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl#wO~P&lO]#rO`#rOi#rOj#rOk#rOo#yO~P&lOP#zOSsXesXksXvsX!VsX!YsX!usX!wsX#qsX!TsXQsX]sX`sXdsXisXjsXmsXpsXrsXtsXzsX!`sX#osX#psX#}sXlsXosX!^sX!qsX#msX~Ov#{O!u#|O!w#}Ok$TP~P'tOe#aOS#{Xk#{Xv#{X!V#{X!Y#{X!u#{X!w#{X#q#{XQ#{X]#{X`#{Xd#{Xi#{Xj#{Xm#{Xp#{Xr#{Xt#{Xz#{X!`#{X#o#{X#p#{X#}#{Xl#{Xo#{X!^#{X!q#{X#m#{X~Oe$RO~Oe$TO~Ok$VOv#{O~Ok$WO~Ot$XO!`!lO~Op$YO~OpzO!R#iO~OpzO#Z$`O~O!q$bOk!oa#m!oao!oa~P&lOk#hX#m#hXo#hX~P!dOk!{O#m$Sao$Sa~O#u#OO#v#OO#w$hO~Ol$jO!h$kO~Op!ii!^!ii!j!ii!m!ii#n!iid!ii~P*zOp!ki!^!ki!j!ki!m!ki#n!kid!ki~P*zOp!li!^!li!j!li!m!li#n!lid!li~P*zOp#fa!^#fa~P$SOo$lO~Od$RP~P%_Od#zP~P&lO`!PXd}X!R}X!T!PX~O`$sO!T$tO~Od$uO!R#iO~Ok#jXp#jX!^#jX~P'tO!^#jOk$Tap$Ta~O!R#iOk!Uap!Ua!^!Uad!Ua`!Ua~OS!]Oe!YO!V![O!Y!`O#q$yO~Od$QP~P9dOv#{OQ#|X]#|X`#|Xd#|Xe#|Xi#|Xj#|Xk#|Xm#|Xp#|Xr#|Xt#|Xz#|X!`#|X#o#|X#p#|X#}#|Xl#|Xo#|X~O]#rO`#rOd%OOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl%PO~P&lO]#rO`#rOi#rOj#rOk#rOo%QO~P&lOe%SOS!tXk!tX!V!tX!Y!tX#q!tX~Ok%TO~Od%YOt%ZO!a%ZO~Ok%[O~Oo%cO#o%^O#}%]O~Od%dO~P$SOv#{O!^%hO!q%jOk!oi#m!oio!oi~P&lOk#ha#m#hao#ha~P!dOk!{O#m$Sio$Si~O!^%mOd$RX~P$SOd%oO~Ov#{OQ#`Xd#`Xe#`Xm#`Xp#`Xr#`Xt#`Xz#`X!^#`X!`#`X#o#`X#p#`X#}#`X~O!^%qOd#zX~P&lOd%sO~Ol%tOv#{O~OR#gOr#gOt#gO#q%vO#}!fO~O!R#iOk#jap#ja!^#ja~O`!PXd}X!R}X!^}X~O!R#iO!^%xOd$QX~O`%zO~Od%{O~O#o%|O~Ok&OO~O`&PO!R#iO~Od&ROk&QO~Od&UO~OP#zOpsX!^sXdsX~O#}%]Op#TX!^#TX~OpzO!^&WO~Oo&[O#o%^O#}%]O~Ov#{OQ#gXe#gXk#gXm#gXp#gXr#gXt#gXz#gX!^#gX!`#gX!q#gX#m#gX#o#gX#p#gX#}#gXo#gX~O!^%hO!q&`Ok!oq#m!oqo!oq~P&lOl&aOv#{O~Od#eX!^#eX~P%_O!^%mOd$Ra~Od#dX!^#dX~P&lO!^%qOd#za~Od&fO~P&lOd&gO!T&hO~Od#cX!^#cX~P9dO!^%xOd$Qa~O]&mOd&oO~OS#bae#ba!V#ba!Y#ba#q#ba~Od&qO~PG]Od&qOk&rO~Ov#{OQ#gae#gak#gam#gap#gar#gat#gaz#ga!^#ga!`#ga!q#ga#m#ga#o#ga#p#ga#}#gao#ga~Od#ea!^#ea~P$SOd#da!^#da~P&lOR#gOr#gOt#gO#q%vO#}%]O~O!R#iOd#ca!^#ca~O`&xO~O!^%xOd$Qi~P&lO]&mOd&|O~Ov#{Od|ik|i~Od&}O~PG]Ok'OO~Od'PO~O!^%xOd$Qq~Od#cq!^#cq~P&lO#s!a#t#}]#}v!m~",goto:"2h$UPPPPP$VP$YP$c$uP$cP%X$cPP%_PPP%e%o%oPPPPP%oPP%oP&]P%oP%o'W%oP't'w'}'}(^'}P'}P'}P'}'}P(m'}(yP(|PP)p)v$c)|$c*SP$cP$c$cP*Y*{+YP$YP+aP+dP$YP$YP$YP+j$YP+m+p+s+z$YP$YPP$YP,P,V,f,|-[-b-l-r-x.O.U.`.f.l.rPPPPPPPPPPP.x/R/w/z0|P1U1u2O2R2U2[RnQ_^OP`kz!{$dq[OPYZ`kuvwxz!v!{#`$d%mqSOPYZ`kuvwxz!v!{#`$d%mQpTR#RqQ!OVR#SrQ#S!QS$Q!i!jR$i#U!V!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'Q!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QU#g!Y$t&hU%`$Y%b&WR&V%_!V!iac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QR$S!kQ%W$RR&S%Xk!^]bf!Y![!g#i#j#m$P$R%X%xQ#e!YQ${#mQ%w$tQ&j%xR&w&hQ!ygQ#p!`Q$^!xR%f$`R#n!]!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QQ!qdR$X!rQ!PVR#TrQ#S!PR$i#TQ!SWR#VsQ!UXR#WtQ{UQ!wgQ#^yQ#o!_Q$U!nQ$[!uQ$_!yQ%e$^Q&Y%aQ&]%fR&v&XSjPzQ!}kQ$c!{R%k$dZiPkz!{$dR$P!gQ%}%SR&z&mR!rdR!teR$Z!tS%a$Y%bR&t&WV%_$Y%b&WQ#PmR$g#PQ`OSkPzU!a`k$dR$d!{Q$p#aY%p$p%u&d&l'QQ%u$sQ&d%qQ&l%zR'Q&xQ#t!cQ#v!dQ#x!eV$}#t#v#xQ%X$RR&T%XQ%y$zS&k%y&yR&y&lQ%r$pR&e%rQ%n$mR&c%nQyUR#]yQ%i$aR&_%iQ!|jS$e!|$fR$f!}Q&n%}R&{&nQ#k!ZR$x#kQ%b$YR&Z%bQ&X%aR&u&X__OP`kz!{$d^UOP`kz!{$dQ!VYQ!WZQ#XuQ#YvQ#ZwQ#[xQ$]!vQ$m#`R&b%mR$q#aQ!gaQ!oc[#q!c!d!e#t#v#xQ$a!zd$o#a$p$s%q%u%z&d&l&x'QQ$r#cQ%R#{S%g$a%iQ%l$kQ&^%hR&p&P]#s!c!d!e#t#v#xW!Z]b!g$PQ!ufQ#f!YQ#l![Q$v#iQ$w#jQ$z#mS%V$R%XR&i%xQ#h!YQ%w$tR&w&hR$|#mR$n#`QlPR#_zQ!_]Q!nbQ$O!gR%U$P",nodeNames:" Unit VariableName VariableName QueryCallee Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue AtKeyword # ; ] [ BracketedValue } { BracedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee IfExpression if ArgList IfBranch KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp ComparisonQuery CompareOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector ParenthesizedSelector CallQuery ArgList , CallLiteral CallTag ParenthesizedContent PseudoClassName ArgList IdSelector IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp Block Declaration PropertyName Important ImportStatement import Layer layer LayerName layer MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports ScopeStatement scope to AtRule Styles",maxTerm:143,nodeProps:[["isolate",-2,5,36,""],["openedBy",20,"(",28,"[",31,"{"],["closedBy",21,")",29,"]",32,"}"]],propSources:[cssHighlighting],skippedNodes:[0,5,106],repeatNodeCount:15,tokenData:"JQ~R!YOX$qX^%i^p$qpq%iqr({rs-ust/itu6Wuv$qvw7Qwx7cxy9Qyz9cz{9h{|:R|}>t}!O?V!O!P?t!P!Q@]!Q![AU![!]BP!]!^B{!^!_C^!_!`DY!`!aDm!a!b$q!b!cEn!c!}$q!}#OG{#O#P$q#P#QH^#Q#R6W#R#o$q#o#pHo#p#q6W#q#rIQ#r#sIc#s#y$q#y#z%i#z$f$q$f$g%i$g#BY$q#BY#BZ%i#BZ$IS$q$IS$I_%i$I_$I|$q$I|$JO%i$JO$JT$q$JT$JU%i$JU$KV$q$KV$KW%i$KW&FU$q&FU&FV%i&FV;'S$q;'S;=`Iz<%lO$q`$tSOy%Qz;'S%Q;'S;=`%c<%lO%Q`%VS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q`%fP;=`<%l%Q~%nh#s~OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Q~'ah#s~!a`OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Qj)OUOy%Qz#]%Q#]#^)b#^;'S%Q;'S;=`%c<%lO%Qj)gU!a`Oy%Qz#a%Q#a#b)y#b;'S%Q;'S;=`%c<%lO%Qj*OU!a`Oy%Qz#d%Q#d#e*b#e;'S%Q;'S;=`%c<%lO%Qj*gU!a`Oy%Qz#c%Q#c#d*y#d;'S%Q;'S;=`%c<%lO%Qj+OU!a`Oy%Qz#f%Q#f#g+b#g;'S%Q;'S;=`%c<%lO%Qj+gU!a`Oy%Qz#h%Q#h#i+y#i;'S%Q;'S;=`%c<%lO%Qj,OU!a`Oy%Qz#T%Q#T#U,b#U;'S%Q;'S;=`%c<%lO%Qj,gU!a`Oy%Qz#b%Q#b#c,y#c;'S%Q;'S;=`%c<%lO%Qj-OU!a`Oy%Qz#h%Q#h#i-b#i;'S%Q;'S;=`%c<%lO%Qj-iS!qY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q~-xWOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c<%lO-u~.gOt~~.jRO;'S-u;'S;=`.s;=`O-u~.vXOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c;=`<%l-u<%lO-u~/fP;=`<%l-uj/nYjYOy%Qz!Q%Q!Q![0^![!c%Q!c!i0^!i#T%Q#T#Z0^#Z;'S%Q;'S;=`%c<%lO%Qj0cY!a`Oy%Qz!Q%Q!Q![1R![!c%Q!c!i1R!i#T%Q#T#Z1R#Z;'S%Q;'S;=`%c<%lO%Qj1WY!a`Oy%Qz!Q%Q!Q![1v![!c%Q!c!i1v!i#T%Q#T#Z1v#Z;'S%Q;'S;=`%c<%lO%Qj1}YrY!a`Oy%Qz!Q%Q!Q![2m![!c%Q!c!i2m!i#T%Q#T#Z2m#Z;'S%Q;'S;=`%c<%lO%Qj2tYrY!a`Oy%Qz!Q%Q!Q![3d![!c%Q!c!i3d!i#T%Q#T#Z3d#Z;'S%Q;'S;=`%c<%lO%Qj3iY!a`Oy%Qz!Q%Q!Q![4X![!c%Q!c!i4X!i#T%Q#T#Z4X#Z;'S%Q;'S;=`%c<%lO%Qj4`YrY!a`Oy%Qz!Q%Q!Q![5O![!c%Q!c!i5O!i#T%Q#T#Z5O#Z;'S%Q;'S;=`%c<%lO%Qj5TY!a`Oy%Qz!Q%Q!Q![5s![!c%Q!c!i5s!i#T%Q#T#Z5s#Z;'S%Q;'S;=`%c<%lO%Qj5zSrY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qd6ZUOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qd6tS!hS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qb7VSZQOy%Qz;'S%Q;'S;=`%c<%lO%Q~7fWOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z<%lO7c~8RRO;'S7c;'S;=`8[;=`O7c~8_XOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z;=`<%l7c<%lO7c~8}P;=`<%l7cj9VSeYOy%Qz;'S%Q;'S;=`%c<%lO%Q~9hOd~n9oUWQvWOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qj:YWvW!mQOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj:wU!a`Oy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Qj;bY!a`#}YOy%Qz!Q%Q!Q![;Z![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj<VY!a`Oy%Qz{%Q{|<u|}%Q}!O<u!O!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj<zU!a`Oy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj=eU!a`#}YOy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj>O[!a`#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj>yS!^YOy%Qz;'S%Q;'S;=`%c<%lO%Qj?[WvWOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj?yU]YOy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Q~@bTvWOy%Qz{@q{;'S%Q;'S;=`%c<%lO%Q~@xS!a`#t~Oy%Qz;'S%Q;'S;=`%c<%lO%QjAZ[#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%QjBUU`YOy%Qz![%Q![!]Bh!];'S%Q;'S;=`%c<%lO%QbBoSaQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjCQSkYOy%Qz;'S%Q;'S;=`%c<%lO%QhCcU!TWOy%Qz!_%Q!_!`Cu!`;'S%Q;'S;=`%c<%lO%QhC|S!TW!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QlDaS!TW!hSOy%Qz;'S%Q;'S;=`%c<%lO%QjDtV!jQ!TWOy%Qz!_%Q!_!`Cu!`!aEZ!a;'S%Q;'S;=`%c<%lO%QbEbS!jQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjEqYOy%Qz}%Q}!OFa!O!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjFfW!a`Oy%Qz!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjGV[iY!a`Oy%Qz}%Q}!OGO!O!Q%Q!Q![GO![!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjHQSmYOy%Qz;'S%Q;'S;=`%c<%lO%QnHcSl^Oy%Qz;'S%Q;'S;=`%c<%lO%QjHtSpYOy%Qz;'S%Q;'S;=`%c<%lO%QjIVSoYOy%Qz;'S%Q;'S;=`%c<%lO%QfIhU!mQOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Q`I}P;=`<%l$q",tokenizers:[descendant,unitToken,identifiers,queryIdentifiers,1,2,3,4,new LocalTokenGroup("m~RRYZ[z{a~~g~aO#v~~dP!P!Qg~lO#w~~",28,129)],topRules:{StyleSheet:[0,6],Styles:[1,105]},specialized:[{term:124,get:e=>spec_callee[e]||-1},{term:125,get:e=>spec_queryIdentifier[e]||-1},{term:4,get:e=>spec_QueryCallee[e]||-1},{term:25,get:e=>spec_AtKeyword[e]||-1},{term:123,get:e=>spec_identifier$1[e]||-1}],tokenPrec:1963});let _properties=null;function properties(){if(!_properties&&"object"==typeof document&&document.body){let{style:e}=document.body,t=[],r=new Set;for(let n in e)"cssText"!=n&&"cssFloat"!=n&&"string"==typeof e[n]&&(/[A-Z]/.test(n)&&(n=n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase())),r.has(n)||(t.push(n),r.add(n)));_properties=t.sort().map(e=>({type:"property",label:e,apply:e+": "}))}return _properties||[]}const pseudoClasses=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(e=>({type:"class",label:e})),values=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(e=>({type:"keyword",label:e})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(e=>({type:"constant",label:e}))),tags=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(e=>({type:"type",label:e})),atRules=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(e=>({type:"keyword",label:e})),identifier$1=/^(\w[\w-]*|-\w[\w-]*|)$/,variable=/^-(-[\w-]*)?$/;function isVarArg(e,t){var r;if(("("==e.name||e.type.isError)&&(e=e.parent||e),"ArgList"!=e.name)return!1;let n=null===(r=e.parent)||void 0===r?void 0:r.firstChild;return"Callee"==(null==n?void 0:n.name)&&"var"==t.sliceString(n.from,n.to)}const VariablesByNode=new NodeWeakMap,declSelector=["Declaration"];function astTop(e){for(let t=e;;){if(t.type.isTop)return t;if(!(t=t.parent))return e}}function variableNames(e,t,r){if(t.to-t.from>4096){let n=VariablesByNode.get(t);if(n)return n;let i=[],o=new Set,s=t.cursor(IterMode.IncludeAnonymous);if(s.firstChild())do{for(let t of variableNames(e,s.node,r))o.has(t.label)||(o.add(t.label),i.push(t))}while(s.nextSibling());return VariablesByNode.set(t,i),i}{let n=[],i=new Set;return t.cursor().iterate(t=>{var o;if(r(t)&&t.matchContext(declSelector)&&":"==(null===(o=t.node.nextSibling)||void 0===o?void 0:o.name)){let r=e.sliceString(t.from,t.to);i.has(r)||(i.add(r),n.push({label:r,type:"variable"}))}}),n}}const defineCSSCompletionSource=e=>t=>{let{state:r,pos:n}=t,i=syntaxTree(r).resolveInner(n,-1),o=i.type.isError&&i.from==i.to-1&&"-"==r.doc.sliceString(i.from,i.to);if("PropertyName"==i.name||(o||"TagName"==i.name)&&/^(Block|Styles)$/.test(i.resolve(i.to).name))return{from:i.from,options:properties(),validFor:identifier$1};if("ValueName"==i.name)return{from:i.from,options:values,validFor:identifier$1};if("PseudoClassName"==i.name)return{from:i.from,options:pseudoClasses,validFor:identifier$1};if(e(i)||(t.explicit||o)&&isVarArg(i,r.doc))return{from:e(i)||o?i.from:n,options:variableNames(r.doc,astTop(i),e),validFor:variable};if("TagName"==i.name){for(let{parent:e}=i;e;e=e.parent)if("Block"==e.name)return{from:i.from,options:properties(),validFor:identifier$1};return{from:i.from,options:tags,validFor:identifier$1}}if("AtKeyword"==i.name)return{from:i.from,options:atRules,validFor:identifier$1};if(!t.explicit)return null;let s=i.resolve(n),a=s.childBefore(n);return a&&":"==a.name&&"PseudoClassSelector"==s.name?{from:n,options:pseudoClasses,validFor:identifier$1}:a&&":"==a.name&&"Declaration"==s.name||"ArgList"==s.name?{from:n,options:values,validFor:identifier$1}:"Block"==s.name||"Styles"==s.name?{from:n,options:properties(),validFor:identifier$1}:null},cssCompletionSource=defineCSSCompletionSource(e=>"VariableName"==e.name),cssLanguage=LRLanguage.define({name:"css",parser:parser$1.configure({props:[indentNodeProp.add({Declaration:continuedIndent()}),foldNodeProp.add({"Block KeyframeList":foldInside})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function css(){return new LanguageSupport(cssLanguage,cssLanguage.data.of({autocomplete:cssCompletionSource}))}const noSemi=316,noSemiType=317,incdec=1,incdecPrefix=2,questionDot=3,JSXStartTag=4,insertSemi=318,spaces=320,newline=321,LineComment=5,BlockComment=6,Dialect_jsx=0,space=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],braceR=125,semicolon=59,slash=47,star=42,plus=43,minus=45,lt=60,comma=44,question=63,dot=46,bracketL=91,trackNewline=new ContextTracker({start:!1,shift:(e,t)=>t==LineComment||t==BlockComment||t==spaces?e:t==newline,strict:!1}),insertSemicolon=new ExternalTokenizer((e,t)=>{let{next:r}=e;(r==braceR||-1==r||t.context)&&e.acceptToken(insertSemi)},{contextual:!0,fallback:!0}),noSemicolon=new ExternalTokenizer((e,t)=>{let r,{next:n}=e;space.indexOf(n)>-1||(n!=slash||(r=e.peek(1))!=slash&&r!=star)&&(n==braceR||n==semicolon||-1==n||t.context||e.acceptToken(noSemi))},{contextual:!0}),noSemicolonType=new ExternalTokenizer((e,t)=>{e.next!=bracketL||t.context||e.acceptToken(noSemiType)},{contextual:!0}),operatorToken=new ExternalTokenizer((e,t)=>{let{next:r}=e;if(r==plus||r==minus){if(e.advance(),r==e.next){e.advance();let r=!t.context&&t.canShift(incdec);e.acceptToken(r?incdec:incdecPrefix)}}else r==question&&e.peek(1)==dot&&(e.advance(),e.advance(),(e.next<48||e.next>57)&&e.acceptToken(questionDot))},{contextual:!0});function identifierChar(e,t){return e>=65&&e<=90||e>=97&&e<=122||95==e||e>=192||!t&&e>=48&&e<=57}const jsx=new ExternalTokenizer((e,t)=>{if(e.next!=lt||!t.dialectEnabled(Dialect_jsx))return;if(e.advance(),e.next==slash)return;let r=0;for(;space.indexOf(e.next)>-1;)e.advance(),r++;if(identifierChar(e.next,!0)){for(e.advance(),r++;identifierChar(e.next,!1);)e.advance(),r++;for(;space.indexOf(e.next)>-1;)e.advance(),r++;if(e.next==comma)return;for(let t=0;;t++){if(7==t){if(!identifierChar(e.next,!0))return;break}if(e.next!="extends".charCodeAt(t))break;e.advance(),r++}}e.acceptToken(JSXStartTag,-r)}),jsHighlight=styleTags({"get set async static":tags$1.modifier,"for while do if else switch try catch finally return throw break continue default case defer":tags$1.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":tags$1.operatorKeyword,"let var const using function class extends":tags$1.definitionKeyword,"import export from":tags$1.moduleKeyword,"with debugger new":tags$1.keyword,TemplateString:tags$1.special(tags$1.string),super:tags$1.atom,BooleanLiteral:tags$1.bool,this:tags$1.self,null:tags$1.null,Star:tags$1.modifier,VariableName:tags$1.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":tags$1.function(tags$1.variableName),VariableDefinition:tags$1.definition(tags$1.variableName),Label:tags$1.labelName,PropertyName:tags$1.propertyName,PrivatePropertyName:tags$1.special(tags$1.propertyName),"CallExpression/MemberExpression/PropertyName":tags$1.function(tags$1.propertyName),"FunctionDeclaration/VariableDefinition":tags$1.function(tags$1.definition(tags$1.variableName)),"ClassDeclaration/VariableDefinition":tags$1.definition(tags$1.className),"NewExpression/VariableName":tags$1.className,PropertyDefinition:tags$1.definition(tags$1.propertyName),PrivatePropertyDefinition:tags$1.definition(tags$1.special(tags$1.propertyName)),UpdateOp:tags$1.updateOperator,"LineComment Hashbang":tags$1.lineComment,BlockComment:tags$1.blockComment,Number:tags$1.number,String:tags$1.string,Escape:tags$1.escape,ArithOp:tags$1.arithmeticOperator,LogicOp:tags$1.logicOperator,BitOp:tags$1.bitwiseOperator,CompareOp:tags$1.compareOperator,RegExp:tags$1.regexp,Equals:tags$1.definitionOperator,Arrow:tags$1.function(tags$1.punctuation),": Spread":tags$1.punctuation,"( )":tags$1.paren,"[ ]":tags$1.squareBracket,"{ }":tags$1.brace,"InterpolationStart InterpolationEnd":tags$1.special(tags$1.brace),".":tags$1.derefOperator,", ;":tags$1.separator,"@":tags$1.meta,TypeName:tags$1.typeName,TypeDefinition:tags$1.definition(tags$1.typeName),"type enum interface implements namespace module declare":tags$1.definitionKeyword,"abstract global Privacy readonly override":tags$1.modifier,"is keyof unique infer asserts":tags$1.operatorKeyword,JSXAttributeValue:tags$1.attributeValue,JSXText:tags$1.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":tags$1.angleBracket,"JSXIdentifier JSXNameSpacedName":tags$1.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":tags$1.attributeName,"JSXBuiltin/JSXIdentifier":tags$1.standard(tags$1.tagName)}),spec_identifier={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,defer:471,for:476,of:485,while:488,with:492,do:496,if:500,else:502,switch:506,case:512,try:518,catch:522,finally:526,return:530,throw:534,break:538,continue:542,debugger:546},spec_word={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},spec_LessThan={__proto__:null,"<":193},parser=LRParser.deserialize({version:14,states:"$F|Q%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Il'#IlO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JrO6[Q!0MxO'#JsO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO9XQMhO'#F|O9`Q`O'#F{OOQ!0Lf'#Js'#JsOOQ!0Lb'#Jr'#JrO9eQ`O'#GwOOQ['#K_'#K_O9pQ`O'#IYO9uQ!0LrO'#IZOOQ['#J`'#J`OOQ['#I_'#I_Q`QlOOQ`QlOOO9}Q!L^O'#DvO:UQlO'#EOO:]QlO'#EQO9kQ`O'#GsO:dQMhO'#CoO:rQ`O'#EnO:}Q`O'#EyO;hQMhO'#FeO;xQ`O'#GsOOQO'#K`'#K`O;}Q`O'#K`O<]Q`O'#G{O<]Q`O'#G|O<]Q`O'#HOO9kQ`O'#HRO=SQ`O'#HUO>kQ`O'#CeO>{Q`O'#HcO?TQ`O'#HiO?TQ`O'#HkO`QlO'#HmO?TQ`O'#HoO?TQ`O'#HrO?YQ`O'#HxO?_Q!0LsO'#IOO%[QlO'#IQO?jQ!0LsO'#ISO?uQ!0LsO'#IUO9uQ!0LrO'#IWO@QQ!0MxO'#CiOASQpO'#DlQOQ`OOO%[QlO'#EQOAjQ`O'#ETO:dQMhO'#EnOAuQ`O'#EnOBQQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Jv'#JvO%[QlO'#JvOOQO'#Jy'#JyOOQO'#Ih'#IhOCQQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J}'#J}OC|Q!0MSO'#EgODWQpO'#EWOOQO'#Jx'#JxODlQpO'#JyOEyQpO'#EWODWQpO'#EgPFWO&2DjO'#CbPOOO)CD})CD}OOOO'#I`'#I`OFcO#tO,59UOOQ!0Lh,59U,59UOOOO'#Ia'#IaOFqO&jO,59UOGPQ!L^O'#DcOOOO'#Ic'#IcOGWO#@ItO,59{OOQ!0Lf,59{,59{OGfQlO'#IdOGyQ`O'#JtOIxQ!fO'#JtO+}QlO'#JtOJPQ`O,5:ROJgQ`O'#EpOJtQ`O'#KTOKPQ`O'#KSOKPQ`O'#KSOKXQ`O,5;^OK^Q`O'#KROOQ!0Ln,5:^,5:^OKeQlO,5:^OMcQ!0MxO,5:fONSQ`O,5:nONmQ!0LrO'#KQONtQ`O'#KPO9eQ`O'#KPO! YQ`O'#KPO! bQ`O,5;]O! gQ`O'#KPO!#lQ!fO'#JsOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$[Q!fO,5:sOOQS'#Jz'#JzOOQO-E<j-E<jO9kQ`O,5=_O!$rQ`O,5=_O!$wQlO,5;ZO!&zQMhO'#EkO!(eQ`O,5;ZO!(jQlO'#DyO!(tQpO,5;dO!(|QpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)[QlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IpO!+_Q!0LrO,5<iO%[QlO,5;eO!&zQMhO,5;eO!+|QMhO,5;eO!-nQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-uQ,UO'#FjO!.rQ,UO'#KXO!.^Q,UO'#KXO!.yQ,UO'#KXOOQO'#KX'#KXO!/_Q,UO,5<SOOOW,5<`,5<`O!/pQlO'#FvOOOW'#Io'#IoO7VO7dO,5<QO!/wQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0hQ$IUO'#CyOOQ!0Lh'#C}'#C}O!0{O#@ItO'#DRO!1iQMjO,5<eO!1pQ`O,5<hO!3YQ(CWO'#GXO!3jQ`O'#GYO!3oQ`O'#GYO!5_Q(CWO'#G^O!6dQpO'#GbOOQO'#Gn'#GnO!,TQMhO'#GmOOQO'#Gp'#GpO!,TQMhO'#GoO!7VQ$IUO'#JlOOQ!0Lh'#Jl'#JlO!7aQ`O'#JkO!7oQ`O'#JjO!7wQ`O'#CuOOQ!0Lh'#C{'#C{O!8YQ`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO!8_Q`O,5<eO1SQ`O'#DZO!,TQMhO'#GPO!,TQMhO'#GRO!8gQ`O'#GTO!8lQ`O'#GUO!3oQ`O'#G[O!,TQMhO'#GaO<]Q`O'#JkO!8qQ`O'#EqO!9`Q`O,5<gOOQ!0Lb'#Cr'#CrO!9hQ`O'#ErO!:bQpO'#EsOOQ!0Lb'#KR'#KRO!:iQ!0LrO'#KaO9uQ!0LrO,5=cO`QlO,5>tOOQ['#Jh'#JhOOQ[,5>u,5>uOOQ[-E<]-E<]O!<hQ!0MxO,5:bO!:]QpO,5:`O!?RQ!0MxO,5:jO%[QlO,5:jO!AiQ!0MxO,5:lOOQO,5@z,5@zO!BYQMhO,5=_O!BhQ!0LrO'#JiO9`Q`O'#JiO!ByQ!0LrO,59ZO!CUQpO,59ZO!C^QMhO,59ZO:dQMhO,59ZO!CiQ`O,5;ZO!CqQ`O'#HbO!DVQ`O'#KdO%[QlO,5;}O!:]QpO,5<PO!D_Q`O,5=zO!DdQ`O,5=zO!DiQ`O,5=zO!DwQ`O,5=zO9uQ!0LrO,5=zO<]Q`O,5=jOOQO'#Cy'#CyO!EOQpO,5=gO!EWQMhO,5=hO!EcQ`O,5=jO!EhQ!bO,5=mO!EpQ`O'#K`O?YQ`O'#HWO9kQ`O'#HYO!EuQ`O'#HYO:dQMhO'#H[O!EzQ`O'#H[OOQ[,5=p,5=pO!FPQ`O'#H]O!FbQ`O'#CoO!FgQ`O,59PO!FqQ`O,59PO!HvQlO,59POOQ[,59P,59PO!IWQ!0LrO,59PO%[QlO,59PO!KcQlO'#HeOOQ['#Hf'#HfOOQ['#Hg'#HgO`QlO,5=}O!KyQ`O,5=}O`QlO,5>TO`QlO,5>VO!LOQ`O,5>XO`QlO,5>ZO!LTQ`O,5>^O!LYQlO,5>dOOQ[,5>j,5>jO%[QlO,5>jO9uQ!0LrO,5>lOOQ[,5>n,5>nO#!dQ`O,5>nOOQ[,5>p,5>pO#!dQ`O,5>pOOQ[,5>r,5>rO##QQpO'#D_O%[QlO'#JvO##sQpO'#JvO##}QpO'#DmO#$`QpO'#DmO#&qQlO'#DmO#&xQ`O'#JuO#'QQ`O,5:WO#'VQ`O'#EtO#'eQ`O'#KUO#'mQ`O,5;_O#'rQpO'#DmO#(PQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#(WQ`O,5:oO?YQ`O,5;YO!CUQpO,5;YO!C^QMhO,5;YO:dQMhO,5;YO#(`Q`O,5@bO#(eQ07dO,5:sOOQO-E<f-E<fO#)kQ!0MSO,5;RODWQpO,5:rO#)uQpO,5:rODWQpO,5;RO!ByQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#*SQ!0LrO,5;RO#*_Q!0LrO,5;RO!CUQpO,5:rOOQO,5;X,5;XO#*mQ!0LrO,5;RPOOO'#I^'#I^P#+RO&2DjO,58|POOO,58|,58|OOOO-E<^-E<^OOQ!0Lh1G.p1G.pOOOO-E<_-E<_OOOO,59},59}O#+^Q!bO,59}OOOO-E<a-E<aOOQ!0Lf1G/g1G/gO#+cQ!fO,5?OO+}QlO,5?OOOQO,5?U,5?UO#+mQlO'#IdOOQO-E<b-E<bO#+zQ`O,5@`O#,SQ!fO,5@`O#,ZQ`O,5@nOOQ!0Lf1G/m1G/mO%[QlO,5@oO#,cQ`O'#IjOOQO-E<h-E<hO#,ZQ`O,5@nOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@lO#,wQ!0LrO,5@lO#-YQ!0LrO,5@lO#-aQ`O,5@kO9eQ`O,5@kO#-iQ`O,5@kO#-wQ`O'#ImO#-aQ`O,5@kOOQ!0Lb1G0w1G0wO!(tQpO,5:uO!)PQpO,5:uOOQS,5:w,5:wO#.iQdO,5:wO#.qQMhO1G2yO9kQ`O1G2yOOQ!0Lf1G0u1G0uO#/PQ!0MxO1G0uO#0UQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0rQ!0MzO'#JlO!$wQlO1G0uO#2}Q!fO'#JwO%[QlO'#JwO#3XQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#3^Q`O1G1OO#5rQ!0MxO1G1PO#5yQ!0MxO1G1PO#8aQ!0MxO1G1PO#8hQ!0MxO1G1PO#;OQ!0MxO1G1PO#=fQ!0MxO1G1PO#=mQ!0MxO1G1PO#=tQ!0MxO1G1PO#@[Q!0MxO1G1PO#@cQ!0MxO1G1PO#BpQ?MtO'#CiO#DkQ?MtO1G1`O#DrQ?MtO'#JsO#EVQ!0MxO,5?[OOQ!0Lb-E<n-E<nO#GdQ!0MxO1G1PO#HaQ!0MzO1G1POOQ!0Lf1G1P1G1PO#IdQMjO'#J|O#InQ`O,5:xO#IsQ!0MxO1G1cO#JgQ,UO,5<WO#JoQ,UO,5<XO#JwQ,UO'#FoO#K`Q`O'#FnOOQO'#KY'#KYOOQO'#In'#InO#KeQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#KvQ?MtO'#JrO#LQQ`O,5<bO!)[QlO,5<bOOOW-E<m-E<mOOQ!0Lf1G1l1G1lO#LVQpO'#KXOOQ!0Lf,5<d,5<dO#L_QpO,5<dO#LdQMhO'#DTOOOO'#Ib'#IbO#LkO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8lQ`O'#IrO#LvQ`O,5<zOOQ!0Lh,5<w,5<wO!,TQMhO'#IuO#MdQMjO,5=XO!,TQMhO'#IwO#NVQMjO,5=ZO!&zQMhO,5=]OOQO1G2S1G2SO#NaQ!dO'#CrO#NtQ(CWO'#ErO$ |QpO'#GbO$!dQ!dO,5<sO$!kQ`O'#K[O9eQ`O'#K[O$!yQ`O,5<uO$#aQ!dO'#C{O!,TQMhO,5<tO$#kQ`O'#GZO$$PQ`O,5<tO$$UQ!dO'#GWO$$cQ!dO'#K]O$$mQ`O'#K]O!&zQMhO'#K]O$$rQ`O,5<xO$$wQlO'#JvO$%RQpO'#GcO#$`QpO'#GcO$%dQ`O'#GgO!3oQ`O'#GkO$%iQ!0LrO'#ItO$%tQpO,5<|OOQ!0Lp,5<|,5<|O$%{QpO'#GcO$&YQpO'#GdO$&kQpO'#GdO$&pQMjO,5=XO$'QQMjO,5=ZOOQ!0Lh,5=^,5=^O!,TQMhO,5@VO!,TQMhO,5@VO$'bQ`O'#IyO$'vQ`O,5@UO$(OQ`O,59aOOQ!0Lh,59i,59iO$(TQ`O,5@VO$)TQ$IYO,59uOOQ!0Lh'#Jp'#JpO$)vQMjO,5<kO$*iQMjO,5<mO@zQ`O,5<oOOQ!0Lh,5<p,5<pO$*sQ`O,5<vO$*xQMjO,5<{O$+YQ`O'#KPO!$wQlO1G2RO$+_Q`O1G2RO9eQ`O'#KSO9eQ`O'#EtO%[QlO'#EtO9eQ`O'#I{O$+dQ!0LrO,5@{OOQ[1G2}1G2}OOQ[1G4`1G4`OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$-fQ!0MxO1G0UOOQ[1G2y1G2yO!&zQMhO1G2yO%[QlO1G2yO#.tQ`O1G2yO$/jQMhO'#EkOOQ!0Lb,5@T,5@TO$/wQ!0LrO,5@TOOQ[1G.u1G.uO!ByQ!0LrO1G.uO!CUQpO1G.uO!C^QMhO1G.uO$0YQ`O1G0uO$0_Q`O'#CiO$0jQ`O'#KeO$0rQ`O,5=|O$0wQ`O'#KeO$0|Q`O'#KeO$1[Q`O'#JRO$1jQ`O,5AOO$1rQ!fO1G1iOOQ!0Lf1G1k1G1kO9kQ`O1G3fO@zQ`O1G3fO$1yQ`O1G3fO$2OQ`O1G3fO!DiQ`O1G3fO9uQ!0LrO1G3fOOQ[1G3f1G3fO!EcQ`O1G3UO!&zQMhO1G3RO$2TQ`O1G3ROOQ[1G3S1G3SO!&zQMhO1G3SO$2YQ`O1G3SO$2bQpO'#HQOOQ[1G3U1G3UO!6_QpO'#I}O!EhQ!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$2jQMhO,5=tO9kQ`O,5=tO$%dQ`O,5=vO9`Q`O,5=vO!CUQpO,5=vO!C^QMhO,5=vO:dQMhO,5=vO$2xQ`O'#KcO$3TQ`O,5=wOOQ[1G.k1G.kO$3YQ!0LrO1G.kO@zQ`O1G.kO$3eQ`O1G.kO9uQ!0LrO1G.kO$5mQ!fO,5AQO$5zQ`O,5AQO9eQ`O,5AQO$6VQlO,5>PO$6^Q`O,5>POOQ[1G3i1G3iO`QlO1G3iOOQ[1G3o1G3oOOQ[1G3q1G3qO?TQ`O1G3sO$6cQlO1G3uO$:gQlO'#HtOOQ[1G3x1G3xO$:tQ`O'#HzO?YQ`O'#H|OOQ[1G4O1G4OO$:|QlO1G4OO9uQ!0LrO1G4UOOQ[1G4W1G4WOOQ!0Lb'#G_'#G_O9uQ!0LrO1G4YO9uQ!0LrO1G4[O$?TQ`O,5@bO!)[QlO,5;`O9eQ`O,5;`O?YQ`O,5:XO!)[QlO,5:XO!CUQpO,5:XO$?YQ?MtO,5:XOOQO,5;`,5;`O$?dQpO'#IeO$?zQ`O,5@aOOQ!0Lf1G/r1G/rO$@SQpO'#IkO$@^Q`O,5@pOOQ!0Lb1G0y1G0yO#$`QpO,5:XOOQO'#Ig'#IgO$@fQpO,5:qOOQ!0Ln,5:q,5:qO#(ZQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO?YQ`O1G0tO!CUQpO1G0tO!C^QMhO1G0tOOQ!0Lb1G5|1G5|O!ByQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$@mQ!0LrO1G0mO$@xQ!0LrO1G0mO!CUQpO1G0^ODWQpO1G0^O$AWQ!0LrO1G0mOOQO1G0^1G0^O$AlQ!0MxO1G0mPOOO-E<[-E<[POOO1G.h1G.hOOOO1G/i1G/iO$AvQ!bO,5<iO$BOQ!fO1G4jOOQO1G4p1G4pO%[QlO,5?OO$BYQ`O1G5zO$BbQ`O1G6YO$BjQ!fO1G6ZO9eQ`O,5?UO$BtQ!0MxO1G6WO%[QlO1G6WO$CUQ!0LrO1G6WO$CgQ`O1G6VO$CgQ`O1G6VO9eQ`O1G6VO$CoQ`O,5?XO9eQ`O,5?XOOQO,5?X,5?XO$DTQ`O,5?XO$+YQ`O,5?XOOQO-E<k-E<kOOQS1G0a1G0aOOQS1G0c1G0cO#.lQ`O1G0cOOQ[7+(e7+(eO!&zQMhO7+(eO%[QlO7+(eO$DcQ`O7+(eO$DnQMhO7+(eO$D|Q!0MzO,5=XO$GXQ!0MzO,5=ZO$IdQ!0MzO,5=XO$KuQ!0MzO,5=ZO$NWQ!0MzO,59uO%!]Q!0MzO,5<kO%$hQ!0MzO,5<mO%&sQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%)UQ!0MxO7+&aO%)xQlO'#IfO%*VQ`O,5@cO%*_Q!fO,5@cOOQ!0Lf1G0P1G0PO%*iQ`O7+&jOOQ!0Lf7+&j7+&jO%*nQ?MtO,5:fO%[QlO7+&zO%*xQ?MtO,5:bO%+VQ?MtO,5:jO%+aQ?MtO,5:lO%+kQMhO'#IiO%+uQ`O,5@hOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%+}Q!jO,5<ZO!)[QlO,5<YOOQO-E<l-E<lOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%,YQ`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%,_Q!dO,59oOOOO-E<`-E<`OOQ!0Lh1G/X1G/XO%,fQ!0MxO7+'kOOQ!0Lh,5?^,5?^O%-YQMhO1G2fP%-aQ`O'#IrPOQ!0Lh-E<p-E<pO%-}QMjO,5?aOOQ!0Lh-E<s-E<sO%.pQMjO,5?cOOQ!0Lh-E<u-E<uO%.zQ!dO1G2wO%/RQ!dO'#CrO%/iQMhO'#KSO$$wQlO'#JvOOQ!0Lh1G2_1G2_O%/sQ`O'#IqO%0[Q`O,5@vO%0[Q`O,5@vO%0dQ`O,5@vO%0oQ`O,5@vOOQO1G2a1G2aO%0}QMjO1G2`O$+YQ`O'#K[O!,TQMhO1G2`O%1_Q(CWO'#IsO%1lQ`O,5@wO!&zQMhO,5@wO%1tQ!dO,5@wOOQ!0Lh1G2d1G2dO%4UQ!fO'#CiO%4`Q`O,5=POOQ!0Lb,5<},5<}O%4hQpO,5<}OOQ!0Lb,5=O,5=OOCwQ`O,5<}O%4sQpO,5<}OOQ!0Lb,5=R,5=RO$+YQ`O,5=VOOQO,5?`,5?`OOQO-E<r-E<rOOQ!0Lp1G2h1G2hO#$`QpO,5<}O$$wQlO,5=PO%5RQ`O,5=OO%5^QpO,5=OO!,TQMhO'#IuO%6WQMjO1G2sO!,TQMhO'#IwO%6yQMjO1G2uO%7TQMjO1G5qO%7_QMjO1G5qOOQO,5?e,5?eOOQO-E<w-E<wOOQO1G.{1G.{O!,TQMhO1G5qO!,TQMhO1G5qO!:]QpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%7lQ`O1G2ZO!,TQMhO1G2bO%7qQ!0MxO7+'mOOQ!0Lf7+'m7+'mO!$wQlO7+'mO%8eQ`O,5;`OOQ!0Lb,5?g,5?gOOQ!0Lb-E<y-E<yO%8jQ!dO'#K^O#(ZQ`O7+(eO4UQ!fO7+(eO$DfQ`O7+(eO%8tQ!0MvO'#CiO%9XQ!0MvO,5=SO%9lQ`O,5=SO%9tQ`O,5=SOOQ!0Lb1G5o1G5oOOQ[7+$a7+$aO!ByQ!0LrO7+$aO!CUQpO7+$aO!$wQlO7+&aO%9yQ`O'#JQO%:bQ`O,5APOOQO1G3h1G3hO9kQ`O,5APO%:bQ`O,5APO%:jQ`O,5APOOQO,5?m,5?mOOQO-E=P-E=POOQ!0Lf7+'T7+'TO%:oQ`O7+)QO9uQ!0LrO7+)QO9kQ`O7+)QO@zQ`O7+)QO%:tQ`O7+)QOOQ[7+)Q7+)QOOQ[7+(p7+(pO%:yQ!0MvO7+(mO!&zQMhO7+(mO!E^Q`O7+(nOOQ[7+(n7+(nO!&zQMhO7+(nO%;TQ`O'#KbO%;`Q`O,5=lOOQO,5?i,5?iOOQO-E<{-E<{OOQ[7+(s7+(sO%<rQpO'#HZOOQ[1G3`1G3`O!&zQMhO1G3`O%[QlO1G3`O%<yQ`O1G3`O%=UQMhO1G3`O9uQ!0LrO1G3bO$%dQ`O1G3bO9`Q`O1G3bO!CUQpO1G3bO!C^QMhO1G3bO%=dQ`O'#JPO%=xQ`O,5@}O%>QQpO,5@}OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@zQ`O7+$VO9uQ!0LrO7+$VO%>]Q`O7+$VO%[QlO1G6lO%[QlO1G6mO%>bQ!0LrO1G6lO%>lQlO1G3kO%>sQ`O1G3kO%>xQlO1G3kOOQ[7+)T7+)TO9uQ!0LrO7+)_O`QlO7+)aOOQ['#Kh'#KhOOQ['#JS'#JSO%?PQlO,5>`OOQ[,5>`,5>`O%[QlO'#HuO%?^Q`O'#HwOOQ[,5>f,5>fO9eQ`O,5>fOOQ[,5>h,5>hOOQ[7+)j7+)jOOQ[7+)p7+)pOOQ[7+)t7+)tOOQ[7+)v7+)vO%?cQpO1G5|O%?}Q?MtO1G0zO%@XQ`O1G0zOOQO1G/s1G/sO%@dQ?MtO1G/sO?YQ`O1G/sO!)[QlO'#DmOOQO,5?P,5?POOQO-E<c-E<cOOQO,5?V,5?VOOQO-E<i-E<iO!CUQpO1G/sOOQO-E<e-E<eOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#(ZQ`O7+%uOOQ!0Lf7+&`7+&`O?YQ`O7+&`O!CUQpO7+&`OOQO7+%x7+%xO$AlQ!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%@nQ!0LrO7+&XO!ByQ!0LrO7+%xO!CUQpO7+%xO%@yQ!0LrO7+&XO%AXQ!0MxO7++rO%[QlO7++rO%AiQ`O7++qO%AiQ`O7++qOOQO1G4s1G4sO9eQ`O1G4sO%AqQ`O1G4sOOQS7+%}7+%}O#(ZQ`O<<LPO4UQ!fO<<LPO%BPQ`O<<LPOOQ[<<LP<<LPO!&zQMhO<<LPO%[QlO<<LPO%BXQ`O<<LPO%BdQ!0MzO,5?aO%DoQ!0MzO,5?cO%FzQ!0MzO1G2`O%I]Q!0MzO1G2sO%KhQ!0MzO1G2uO%MsQ!fO,5?QO%[QlO,5?QOOQO-E<d-E<dO%M}Q`O1G5}OOQ!0Lf<<JU<<JUO%NVQ?MtO1G0uO&!^Q?MtO1G1PO&!eQ?MtO1G1PO&$fQ?MtO1G1PO&$mQ?MtO1G1PO&&nQ?MtO1G1PO&(oQ?MtO1G1PO&(vQ?MtO1G1PO&(}Q?MtO1G1PO&+OQ?MtO1G1PO&+VQ?MtO1G1PO&+^Q!0MxO<<JfO&-UQ?MtO1G1PO&.RQ?MvO1G1PO&/UQ?MvO'#JlO&1[Q?MtO1G1cO&1iQ?MtO1G0UO&1sQMjO,5?TOOQO-E<g-E<gO!)[QlO'#FqOOQO'#KZ'#KZOOQO1G1u1G1uO&1}Q`O1G1tO&2SQ?MtO,5?[OOOW7+'h7+'hOOOO1G/Z1G/ZO&2^Q!dO1G4xOOQ!0Lh7+(Q7+(QP!&zQMhO,5?^O!,TQMhO7+(cO&2eQ`O,5?]O9eQ`O,5?]O$+YQ`O,5?]OOQO-E<o-E<oO&2sQ`O1G6bO&2sQ`O1G6bO&2{Q`O1G6bO&3WQMjO7+'zO&3hQ!dO,5?_O&3rQ`O,5?_O!&zQMhO,5?_OOQO-E<q-E<qO&3wQ!dO1G6cO&4RQ`O1G6cO&4ZQ`O1G2kO!&zQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%4hQpO1G2iO!CUQpO1G2iOCwQ`O1G2iOOQ!0Lb1G2q1G2qO&4`QpO1G2iO&4nQ`O1G2kO$+YQ`O1G2jOCwQ`O1G2jO$$wQlO1G2kO&4vQ`O1G2jO&5jQMjO,5?aOOQ!0Lh-E<t-E<tO&6]QMjO,5?cOOQ!0Lh-E<v-E<vO!,TQMhO7++]O&6gQMjO7++]O&6qQMjO7++]OOQ!0Lh1G/c1G/cO&7OQ`O1G/cOOQ!0Lh7+'u7+'uO&7TQMjO7+'|O&7eQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&8XQ`O1G0zO!&zQMhO'#IzO&8^Q`O,5@xO&:`Q!fO<<LPO!&zQMhO1G2nO&:gQ!0LrO1G2nOOQ[<<G{<<G{O!ByQ!0LrO<<G{O&:xQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?l,5?lO&;lQ`O,5?lO&;qQ`O,5?lOOQO-E=O-E=OO&<PQ`O1G6kO&<PQ`O1G6kO9kQ`O1G6kO@zQ`O<<LlOOQ[<<Ll<<LlO&<XQ`O<<LlO9uQ!0LrO<<LlO9kQ`O<<LlOOQ[<<LX<<LXO%:yQ!0MvO<<LXOOQ[<<LY<<LYO!E^Q`O<<LYO&<^QpO'#I|O&<iQ`O,5@|O!)[QlO,5@|OOQ[1G3W1G3WOOQO'#JO'#JOO9uQ!0LrO'#JOO&<qQpO,5=uOOQ[,5=u,5=uO&<xQpO'#EgO&=PQpO'#GeO&=UQ`O7+(zO&=ZQ`O7+(zOOQ[7+(z7+(zO!&zQMhO7+(zO%[QlO7+(zO&=cQ`O7+(zOOQ[7+(|7+(|O9uQ!0LrO7+(|O$%dQ`O7+(|O9`Q`O7+(|O!CUQpO7+(|O&=nQ`O,5?kOOQO-E<}-E<}OOQO'#H^'#H^O&=yQ`O1G6iO9uQ!0LrO<<GqOOQ[<<Gq<<GqO@zQ`O<<GqO&>RQ`O7+,WO&>WQ`O7+,XO%[QlO7+,WO%[QlO7+,XOOQ[7+)V7+)VO&>]Q`O7+)VO&>bQlO7+)VO&>iQ`O7+)VOOQ[<<Ly<<LyOOQ[<<L{<<L{OOQ[-E=Q-E=QOOQ[1G3z1G3zO&>nQ`O,5>aOOQ[,5>c,5>cO&>sQ`O1G4QO9eQ`O7+&fO!)[QlO7+&fOOQO7+%_7+%_O&>xQ?MtO1G6ZO?YQ`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO?YQ`O<<IzOOQO<<Is<<IsO$AlQ!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!ByQ!0LrO<<IdO&?SQ!0LrO<<IsO&?_Q!0MxO<= ^O&?oQ`O<= ]OOQO7+*_7+*_O9eQ`O7+*_OOQ[ANAkANAkO&?wQ!fOANAkO!&zQMhOANAkO#(ZQ`OANAkO4UQ!fOANAkO&@OQ`OANAkO%[QlOANAkO&@WQ!0MzO7+'zO&BiQ!0MzO,5?aO&DtQ!0MzO,5?cO&GPQ!0MzO7+'|O&IbQ!fO1G4lO&IlQ?MtO7+&aO&KpQ?MvO,5=XO&MwQ?MvO,5=ZO&NXQ?MvO,5=XO&NiQ?MvO,5=ZO&NyQ?MvO,59uO'#PQ?MvO,5<kO'%SQ?MvO,5<mO''hQ?MvO,5<{O')^Q?MtO7+'kO')kQ?MtO7+'mO')xQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*d7+*dO')}QMjO<<K}OOQO1G4w1G4wO'*UQ`O1G4wO'*aQ`O1G4wO'*oQ`O7++|O'*oQ`O7++|O!&zQMhO1G4yO'*wQ!dO1G4yO'+RQ`O7++}O'+ZQ`O7+(VO'+fQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!CUQpO7+(TOCwQ`O7+(TO'+pQ`O7+(VO!&zQMhO7+(VO$+YQ`O7+(UO'+uQ`O7+(VOCwQ`O7+(UO'+}QMjO<<NwO!,TQMhO<<NwOOQ!0Lh7+$}7+$}O',XQ!dO,5?fOOQO-E<x-E<xO',cQ!0MvO7+(YO!&zQMhO7+(YOOQ[AN=gAN=gO9kQ`O1G5WOOQO1G5W1G5WO',sQ`O1G5WO',xQ`O7+,VO',xQ`O7+,VO9uQ!0LrOANBWO@zQ`OANBWOOQ[ANBWANBWO'-QQ`OANBWOOQ[ANAsANAsOOQ[ANAtANAtO'-VQ`O,5?hOOQO-E<z-E<zO'-bQ?MtO1G6hOOQO,5?j,5?jOOQO-E<|-E<|OOQ[1G3a1G3aO'-lQ`O,5=POOQ[<<Lf<<LfO!&zQMhO<<LfO&=UQ`O<<LfO'-qQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9uQ!0LrO<<LhO$%dQ`O<<LhO9`Q`O<<LhO'-yQpO1G5VO'.UQ`O7+,TOOQ[AN=]AN=]O9uQ!0LrOAN=]OOQ[<= r<= rOOQ[<= s<= sO'.^Q`O<= rO'.cQ`O<= sOOQ[<<Lq<<LqO'.hQ`O<<LqO'.mQlO<<LqOOQ[1G3{1G3{O?YQ`O7+)lO'.tQ`O<<JQO'/PQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$AlQ!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<My<<MyOOQ[G27VG27VO!&zQMhOG27VO#(ZQ`OG27VO'/ZQ!fOG27VO4UQ!fOG27VO'/bQ`OG27VO'/jQ?MtO<<JfO'/wQ?MvO1G2`O'1mQ?MvO,5?aO'3pQ?MvO,5?cO'5sQ?MvO1G2sO'7vQ?MvO1G2uO'9yQ?MtO<<KXO':WQ?MtO<<I{OOQO1G1w1G1wO!,TQMhOANAiOOQO7+*c7+*cO':eQ`O7+*cO':pQ`O<= hO':xQ!dO7+*eOOQ!0Lb<<Kq<<KqO$+YQ`O<<KqOCwQ`O<<KqO';SQ`O<<KqO!&zQMhO<<KqOOQ!0Lb<<Ko<<KoO!CUQpO<<KoO';_Q!dO<<KqOOQ!0Lb<<Kp<<KpO';iQ`O<<KqO!&zQMhO<<KqO$+YQ`O<<KpO';nQMjOANDcO';xQ!0MvO<<KtOOQO7+*r7+*rO9kQ`O7+*rO'<YQ`O<= qOOQ[G27rG27rO9uQ!0LrOG27rO@zQ`OG27rO!)[QlO1G5SO'<bQ`O7+,SO'<jQ`O1G2kO&=UQ`OANBQOOQ[ANBQANBQO!&zQMhOANBQO'<oQ`OANBQOOQ[ANBSANBSO9uQ!0LrOANBSO$%dQ`OANBSOOQO'#H_'#H_OOQO7+*q7+*qOOQ[G22wG22wOOQ[ANE^ANE^OOQ[ANE_ANE_OOQ[ANB]ANB]O'<wQ`OANB]OOQ[<<MW<<MWO!)[QlOAN?lOOQOG24yG24yO$AlQ!0MxOG24yO#(ZQ`OLD,qOOQ[LD,qLD,qO!&zQMhOLD,qO'<|Q!fOLD,qO'=TQ?MvO7+'zO'>yQ?MvO,5?aO'@|Q?MvO,5?cO'CPQ?MvO7+'|O'DuQMjOG27TOOQO<<M}<<M}OOQ!0LbANA]ANA]O$+YQ`OANA]OCwQ`OANA]O'EVQ!dOANA]OOQ!0LbANAZANAZO'E^Q`OANA]O!&zQMhOANA]O'EiQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N^<<N^OOQ[LD-^LD-^O9uQ!0LrOLD-^O'EsQ?MtO7+*nOOQO'#Gf'#GfOOQ[G27lG27lO&=UQ`OG27lO!&zQMhOG27lOOQ[G27nG27nO9uQ!0LrOG27nOOQ[G27wG27wO'E}Q?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#(ZQ`O!$(!]O!&zQMhO!$(!]O'FXQ!0MzOG27TOOQ!0LbG26wG26wO$+YQ`OG26wO'HjQ`OG26wOCwQ`OG26wO'HuQ!dOG26wO!&zQMhOG26wOOQ[!$(!x!$(!xOOQ[LD-WLD-WO&=UQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#(ZQ`O!)9EwOOQ!0LbLD,cLD,cO$+YQ`OLD,cOCwQ`OLD,cO'H|Q`OLD,cO'IXQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'I`Q?MvOG27TOOQ!0Lb!$( }!$( }O$+YQ`O!$( }OCwQ`O!$( }O'KUQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$+YQ`O!)9EiOCwQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$+YQ`O!.K;TOOQ!0Lb!4/0o!4/0oO!)[QlO'#DzO1PQ`O'#EXO'KaQ!fO'#JrO'KhQ!L^O'#DvO'KoQlO'#EOO'KvQ!fO'#CiO'N^Q!fO'#CiO!)[QlO'#EQO'NnQlO,5;ZO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO'#IpO(!qQ`O,5<iO!)[QlO,5;eO(!yQMhO,5;eO($dQMhO,5;eO!)[QlO,5;wO!&zQMhO'#GmO(!yQMhO'#GmO!&zQMhO'#GoO(!yQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&zQMhO'#GPO(!yQMhO'#GPO!&zQMhO'#GRO(!yQMhO'#GRO!&zQMhO'#GaO(!yQMhO'#GaO!)[QlO,5:jO($kQpO'#D_O($uQpO'#JvO!)[QlO,5@oO'NnQlO1G0uO(%PQ?MtO'#CiO!)[QlO1G2PO!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO(%ZQ!dO'#CrO!&zQMhO,5<tO(!yQMhO,5<tO'NnQlO1G2RO!)[QlO7+&zO!&zQMhO1G2`O(!yQMhO1G2`O!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO!&zQMhO1G2bO(!yQMhO1G2bO'NnQlO7+'mO'NnQlO7+&aO!&zQMhOANAiO(!yQMhOANAiO(%nQ`O'#EoO(%sQ`O'#EoO(%{Q`O'#F]O(&QQ`O'#EyO(&VQ`O'#KTO(&bQ`O'#KRO(&mQ`O,5;ZO(&rQMjO,5<eO(&yQ`O'#GYO('OQ`O'#GYO('TQ`O,5<eO(']Q`O,5<gO('eQ`O,5;ZO('mQ?MtO1G1`O('tQ`O,5<tO('yQ`O,5<tO((OQ`O,5<vO((TQ`O,5<vO((YQ`O1G2RO((_Q`O1G0uO((dQMjO<<K}O((kQMjO<<K}O((rQMhO'#F|O9`Q`O'#F{OAuQ`O'#EnO!)[QlO,5;tO!3oQ`O'#GYO!3oQ`O'#GYO!3oQ`O'#G[O!3oQ`O'#G[O!,TQMhO7+(cO!,TQMhO7+(cO%.zQ!dO1G2wO%.zQ!dO1G2wO!&zQMhO,5=]O!&zQMhO,5=]",stateData:"()x~O'|OS'}OSTOS(ORQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&W!WO&^!XO&`!YO&b!ZO&d![O&g!]O&m!^O&s!_O&u!`O&w!aO&y!bO&{!cO(TSO(VTO(YUO(aVO(o[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O(O!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'z]X(a]X(r]X(y]X(z]X~O!g%RX~P(qO_!}O(V#PO(W!}O(X#PO~O_#QO(X#PO(Y#PO(Z#QO~Ox#SO!U#TO(b#TO(c#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T<ZO(VTO(YUO(aVO(o[O~O![#ZO!]#WO!Y(hP!Y(vP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(VTO(YUO(aVO(o[O~Op#mO![#iO!|]O#i#lO#j#iO(T<[O!k(sP~P.iO!l#oO(T#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa(fX'z(fX'w(fX!k(fX!Y(fX!_(fX%i(fX!g(fX~P1qO#S$dO#`$eO$Q$eOP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX!_(gX%i(gX~Oa(gX'z(gX'w(gX!Y(gX!k(gXv(gX!g(gX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%dOk%dOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T$sO(VTO(YUO(a$uO(y$}O(z%POg(^P~Ol%[O~P7eO!l%eO~O!S%hO!_%iO(T%gO~O!g%mO~Oa%nO'z%nO~O!Q%rO~P%[O(U!lO~P%[O%n%vO~P%[Oh%VO!l%eO(T%gO(U!lO~Oe%}O!l%eO(T%gO~Oj$RO~O!_&PO(T%gO(U!lO(VTO(YUO`)WP~O!Q&SO!l&RO%j&VO&T&WO~P;SO!x#sO~O%s&YO!S)SX!_)SX(T)SX~O(T&ZO~Ol!PO!u&`O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&eOe&dO!x&bO%h&cO%{&aO~P<bOd&hOeyOl!PO!_&gO!u&`O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&kO#`&nO%j&iO(U!lO~P=gO!l&oO!u&sO~O!l#oO~O!_XO~Oa%nO'x&{O'z%nO~Oa%nO'x'OO'z%nO~Oa%nO'x'QO'z%nO~O'w]X!Y]Xv]X!k]X&[]X!_]X%i]X!g]X~P(qO!b'_O!c'WO!d'WO(U!lO(VTO(YUO~Os'UO!S'TO!['XO(e'SO!^(iP!^(xP~P@nOn'bO!_'`O(T%gO~Oe'gO!l%eO(T%gO~O!Q&SO!l&RO~Os!nO!S!oO!|<VO#T!pO#U!pO#W!pO#X!pO(U!lO(VTO(YUO(e!mO(o!sO~O!b'mO!c'lO!d'lO#V!pO#['nO#]'nO~PBYOa%nOh%VO!g#vO!l%eO'z%nO(r'pO~O!p'tO#`'rO~PChOs!nO!S!oO(VTO(YUO(e!mO(o!sO~O!_XOs(mX!S(mX!b(mX!c(mX!d(mX!|(mX#T(mX#U(mX#V(mX#W(mX#X(mX#[(mX#](mX(U(mX(V(mX(Y(mX(e(mX(o(mX~O!c'lO!d'lO(U!lO~PDWO(P'xO(Q'xO(R'zO~O_!}O(V'|O(W!}O(X'|O~O_#QO(X'|O(Y'|O(Z#QO~Ov(OO~P%[Ox#SO!U#TO(b#TO(c(RO~O![(TO!Y'WX!Y'^X!]'WX!]'^X~P+}O!](VO!Y(hX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](VO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~O!Y(hX~PHRO!Y([O~O!Y(uX!](uX!g(uX!k(uX(r(uX~O#`(uX#k#dX!^(uX~PJUO#`(]O!Y(wX!](wX~O!](^O!Y(vX~O!Y(aO~O#`$eO~PJUO!^(bO~P`OR#zO!Q#yO!S#{O!l#xO(aVOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(r!na(y!na(z!na~Oa!na'z!na'w!na!Y!na!k!nav!na!_!na%i!na!g!na~PKlO!k(cO~O!g#vO#`(dO(r'pO!](tXa(tX'z(tX~O!k(tX~PNXO!S%hO!_%iO!|]O#i(iO#j(hO(T%gO~O!](jO!k(sX~O!k(lO~O!S%hO!_%iO#j(hO(T%gO~OP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~O!g#vO!k(gX~P! uOR(nO!Q(mO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(T!{a~P!#vO!x(rO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~O#k(xO~O![(zO!k(kP~P%[O(e(|O(o[O~O!S)OO!l#xO(e(|O(o[O~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]$_Oa$qa'z$qa'w$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)dO~P!&zOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Og(pP~P!,TO!Q)iO!g)hO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)hO!_({X$Z({X$]({X$_({X$f({X~O!Q)iO~P!.^O!Q)iO!_({X$Z({X$]({X$_({X$f({X~O!_)kO$Z)oO$])jO$_)jO$f)pO~O![)sO~P!)[O$]$hO$_$gO$f)wO~On$zX!Q$zX#S$zX'y$zX(y$zX(z$zX~OgmXg$zXnmX!]mX#`mX~P!0SOx)yO(b)zO(c)|O~On*VO!Q*OO'y*PO(y$}O(z%PO~Og)}O~P!1WOg*WO~Oh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S*YO!_*ZO!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op*`O![*^O(T*XO!k)OP~P!1uO#k*aO~O!l*bO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T*dO(VTO(YUO(a$uO(y$}O(z%PO~O![*gO!Y)PP~P!3tOr*sOs!nO!S*iO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO(e!mO~O!^*pO~P!5iO#S$dOn(`X!Q(`X'y(`X(y(`X(z(`X!](`X#`(`X~Og(`X$O(`X~P!6kOn*xO#`*wOg(_X!](_X~O!]*yOg(^X~Oj%dOk%dOl%dO(T&ZOg(^P~Os*|O~Og)}O(T&ZO~O!l+SO~O(T(vO~Op+WO!S%hO![#iO!_%iO!|]O#i#lO#j#iO(T%gO!k(sP~O!g#vO#k+XO~O!S%hO![+ZO!](^O!_%iO(T%gO!Y(vP~Os'[O!S+]O![+[O(VTO(YUO(e(|O~O!^(xP~P!9|O!]+^Oa)TX'z)TX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa!ja!]!ja'z!ja'w!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:tOR#zO!Q#yO!S#{O!l#xO(aVOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(r!ra(y!ra(z!ra~Oa!ra'z!ra'w!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!=[OR#zO!Q#yO!S#{O!l#xO(aVOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(r!ta(y!ta(z!ta~Oa!ta'z!ta'w!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?rOh%VOn+gO!_'`O%i+fO~O!g+iOa(]X!_(]X'z(]X!](]X~Oa%nO!_XO'z%nO~Oh%VO!l%eO~Oh%VO!l%eO(T%gO~O!g#vO#k(xO~Ob+tO%j+uO(T+qO(VTO(YUO!^)XP~O!]+vO`)WX~O[+zO~O`+{O~O!_&PO(T%gO(U!lO`)WP~O%j,OO~P;SOh%VO#`,SO~Oh%VOn,VO!_$|O~O!_,XO~O!Q,ZO!_XO~O%n%vO~O!x,`O~Oe,eO~Ob,fO(T#nO(VTO(YUO!^)VP~Oe%}O~O%j!QO(T&ZO~P=gO[,kO`,jO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(VTO(YUO(aVO(o[O~O!_!eO!u!gO$W!kO(T!dO~P!FyO`,jOa%nO'z%nO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa,pOl!OO!uwO%l!OO%m!OO%n!OO~P!IcO!l&oO~O&^,vO~O!_,xO~O&o,zO&q,{OP&laQ&laS&laY&laa&lad&lae&lal&lap&lar&las&lat&laz&la|&la!O&la!S&la!W&la!X&la!_&la!i&la!l&la!o&la!p&la!q&la!s&la!u&la!x&la!|&la$W&la$n&la%h&la%j&la%l&la%m&la%n&la%q&la%s&la%v&la%w&la%y&la&W&la&^&la&`&la&b&la&d&la&g&la&m&la&s&la&u&la&w&la&y&la&{&la'w&la(T&la(V&la(Y&la(a&la(o&la!^&la&e&lab&la&j&la~O(T-QO~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P#!iO!g-VO#`-UOh(jX!]#hX!^#hX!g(jX!l(jX~O!](jX!^(jX~P##[Oh%VO!g-XO!l%eO!]!aX!^!aX~Os!nO!S!oO(VTO(YUO(e!mO~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(VTO(YUO(aVO(o[O~O(T=QO~P#$qO!]-]O!^(iX~O!^-_O~O!g-VO#`-UO!]#hX!^#hX~O!]-`O!^(xX~O!^-bO~O!c-cO!d-cO(U!lO~P#$`O!^-fO~P'_On-iO!_'`O~O!Y-nO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(U!{a(V!{a(Y!{a(e!{a(o!{a~P!#vO!p-sO#`-qO~PChO!c-uO!d-uO(U!lO~PDWOa%nO#`-qO'z%nO~Oa%nO!g#vO#`-qO'z%nO~Oa%nO!g#vO!p-sO#`-qO'z%nO(r'pO~O(P'xO(Q'xO(R-zO~Ov-{O~O!Y'Wa!]'Wa~P!:tO![.PO!Y'WX!]'WX~P%[O!](VO!Y(ha~O!Y(ha~PHRO!](^O!Y(va~O!S%hO![.TO!_%iO(T%gO!Y'^X!]'^X~O#`.VO!](ta!k(taa(ta'z(ta~O!g#vO~P#,wO!](jO!k(sa~O!S%hO!_%iO#j.ZO(T%gO~Op.`O!S%hO![.]O!_%iO!|]O#i._O#j.]O(T%gO!]'aX!k'aX~OR.dO!l#xO~Oh%VOn.gO!_'`O%i.fO~Oa#ci!]#ci'z#ci'w#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:tOn>]O!Q*OO'y*PO(y$}O(z%PO~O#k#_aa#_a#`#_a'z#_a!]#_a!k#_a!_#_a!Y#_a~P#/sO#k(`XP(`XR(`X[(`Xa(`Xj(`Xr(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X'z(`X(a(`X(r(`X!k(`X!Y(`X'w(`Xv(`X!_(`X%i(`X!g(`X~P!6kO!].tO!k(kX~P!:tO!k.wO~O!Y.yO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#3cO#n$OO~P#3cOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#6QO#r$QO~P#6QOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(aVOa#mi!]#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(aVO(z#}Oa#mi!]#mi#z#mi#{#mi'z#mi(r#mi(y#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#;VO#x#mi~P#;VO#v$SO~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(aVO(y#|O(z#}Oa#mi!]#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#={O#z$WO~P#={OP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X!]]X!^]X~O$O]X~P#@jOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO#z<gO#{<hO(aVO(r$YO(y#|O(z#}O~O$O.{O~P#BwO#S$dO#`<nO$Q<nO$O(gX!^(gX~P! uOa'da!]'da'z'da'w'da!k'da!Y'dav'da!_'da%i'da!g'da~P!:tO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO(y#mi(z#mi~P#EyOn>]O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P#EyO!]/POg(pX~P!1WOg/RO~Oa$Pi!]$Pi'z$Pi'w$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:tO$]/SO$_/SO~O$]/TO$_/TO~O!g)hO#`/UO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/VO~O!_)kO$Z/XO$])jO$_)jO$f/YO~O!]<iO!^(fX~P#BwO!^/ZO~O!g)hO$f({X~O$f/]O~Ov/^O~P!&zOx)yO(b)zO(c/aO~O!S/dO~O(y$}On%aa!Q%aa'y%aa(z%aa!]%aa#`%aa~Og%aa$O%aa~P#L{O(z%POn%ca!Q%ca'y%ca(y%ca!]%ca#`%ca~Og%ca$O%ca~P#MnO!]fX!gfX!kfX!k$zX(rfX~P!0SOp%WO![/mO!](^O(T/lO!Y(vP!Y)PP~P!1uOr*sO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO~Os<}O!S/nO![+[O!^*pO(e<|O!^(xP~P$ [O!k/oO~P#/sO!]/pO!g#vO(r'pO!k)OX~O!k/uO~OnoX!QoX'yoX(yoX(zoX~O!g#vO!koX~P$#OOp/wO!S%hO![*^O!_%iO(T%gO!k)OP~O#k/xO~O!Y$zX!]$zX!g%RX~P!0SO!]/yO!Y)PX~P#/sO!g/{O~O!Y/}O~OpkO(T0OO~P.iOh%VOr0TO!g#vO!l%eO(r'pO~O!g+iO~Oa%nO!]0XO'z%nO~O!^0ZO~P!5iO!c0[O!d0[O(U!lO~P#$`Os!nO!S0]O(VTO(YUO(e!mO~O#[0_O~Og%aa!]%aa#`%aa$O%aa~P!1WOg%ca!]%ca#`%ca$O%ca~P!1WOj%dOk%dOl%dO(T&ZOg'mX!]'mX~O!]*yOg(^a~Og0hO~On0jO#`0iOg(_a!](_a~OR0kO!Q0kO!S0lO#S$dOn}a'y}a(y}a(z}a!]}a#`}a~Og}a$O}a~P$(cO!Q*OO'y*POn$sa(y$sa(z$sa!]$sa#`$sa~Og$sa$O$sa~P$)_O!Q*OO'y*POn$ua(y$ua(z$ua!]$ua#`$ua~Og$ua$O$ua~P$*QO#k0oO~Og%Ta!]%Ta#`%Ta$O%Ta~P!1WO!g#vO~O#k0rO~O!]+^Oa)Ta'z)Ta~OR#zO!Q#yO!S#{O!l#xO(aVOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(r!ri(y!ri(z!ri~Oa!ri'z!ri'w!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$+oOh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op0{O%]0|O(T0zO~P$.VO!g+iOa(]a!_(]a'z(]a!](]a~O#k1SO~O[]X!]fX!^fX~O!]1TO!^)XX~O!^1VO~O[1WO~Ob1YO(T+qO(VTO(YUO~O!_&PO(T%gO`'uX!]'uX~O!]+vO`)Wa~O!k1]O~P!:tO[1`O~O`1aO~O#`1fO~On1iO!_$|O~O(e(|O!^)UP~Oh%VOn1rO!_1oO%i1qO~O[1|O!]1zO!^)VX~O!^1}O~O`2POa%nO'z%nO~O(T#nO(VTO(YUO~O#S$dO#`$eO$Q$eOP(gXR(gX[(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~Oj2SO&[2TOa(gX~P$3pOj2SO#`$eO&[2TO~Oa2VO~P%[Oa2XO~O&e2[OP&ciQ&ciS&ciY&cia&cid&cie&cil&cip&cir&cis&cit&ciz&ci|&ci!O&ci!S&ci!W&ci!X&ci!_&ci!i&ci!l&ci!o&ci!p&ci!q&ci!s&ci!u&ci!x&ci!|&ci$W&ci$n&ci%h&ci%j&ci%l&ci%m&ci%n&ci%q&ci%s&ci%v&ci%w&ci%y&ci&W&ci&^&ci&`&ci&b&ci&d&ci&g&ci&m&ci&s&ci&u&ci&w&ci&y&ci&{&ci'w&ci(T&ci(V&ci(Y&ci(a&ci(o&ci!^&cib&ci&j&ci~Ob2bO!^2`O&j2aO~P`O!_XO!l2dO~O&q,{OP&liQ&liS&liY&lia&lid&lie&lil&lip&lir&lis&lit&liz&li|&li!O&li!S&li!W&li!X&li!_&li!i&li!l&li!o&li!p&li!q&li!s&li!u&li!x&li!|&li$W&li$n&li%h&li%j&li%l&li%m&li%n&li%q&li%s&li%v&li%w&li%y&li&W&li&^&li&`&li&b&li&d&li&g&li&m&li&s&li&u&li&w&li&y&li&{&li'w&li(T&li(V&li(Y&li(a&li(o&li!^&li&e&lib&li&j&li~O!Y2jO~O!]!aa!^!aa~P#BwOs!nO!S!oO![2pO(e!mO!]'XX!^'XX~P@nO!]-]O!^(ia~O!]'_X!^'_X~P!9|O!]-`O!^(xa~O!^2wO~P'_Oa%nO#`3QO'z%nO~Oa%nO!g#vO#`3QO'z%nO~Oa%nO!g#vO!p3UO#`3QO'z%nO(r'pO~Oa%nO'z%nO~P!:tO!]$_Ov$qa~O!Y'Wi!]'Wi~P!:tO!](VO!Y(hi~O!](^O!Y(vi~O!Y(wi!](wi~P!:tO!](ti!k(tia(ti'z(ti~P!:tO#`3WO!](ti!k(tia(ti'z(ti~O!](jO!k(si~O!S%hO!_%iO!|]O#i3]O#j3[O(T%gO~O!S%hO!_%iO#j3[O(T%gO~On3dO!_'`O%i3cO~Oh%VOn3dO!_'`O%i3cO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aav%aa!_%aa%i%aa!g%aa~P#L{O#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%cav%ca!_%ca%i%ca!g%ca~P#MnO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/sO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/sO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'z}a(a}a(r}a!k}a!Y}a'w}av}a!_}a%i}a!g}a~P$(cO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'z$sa(a$sa(r$sa!k$sa!Y$sa'w$sav$sa!_$sa%i$sa!g$sa~P$)_O#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'z$ua(a$ua(r$ua!k$ua!Y$ua'w$uav$ua!_$ua%i$ua!g$ua~P$*QO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'z%Ta(a%Ta(r%Ta!k%Ta!Y%Ta'w%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/sOa#cq!]#cq'z#cq'w#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:tO![3lO!]'YX!k'YX~P%[O!].tO!k(ka~O!].tO!k(ka~P!:tO!Y3oO~O$O!na!^!na~PKlO$O!ja!]!ja!^!ja~P#BwO$O!ra!^!ra~P!=[O$O!ta!^!ta~P!?rOg']X!]']X~P!,TO!]/POg(pa~OSfO!_4TO$d4UO~O!^4YO~Ov4ZO~P#/sOa$mq!]$mq'z$mq'w$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:tO!Y4]O~P!&zO!S4^O~O!Q*OO'y*PO(z%POn'ia(y'ia!]'ia#`'ia~Og'ia$O'ia~P%-fO!Q*OO'y*POn'ka(y'ka(z'ka!]'ka#`'ka~Og'ka$O'ka~P%.XO(r$YO~P#/sO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!0SOp%WO(T=WO~P!1uOp4bO!S%hO![4aO!_%iO(T%gO!]'eX!k'eX~O!]/pO!k)Oa~O!]/pO!g#vO!k)Oa~O!]/pO!g#vO(r'pO!k)Oa~Og$|i!]$|i#`$|i$O$|i~P!1WO![4jO!Y'gX!]'gX~P!3tO!]/yO!Y)Pa~O!]/yO!Y)Pa~P#/sOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~Oj%YX!g%YX~P%2OOj4oO!g#vO~Oh%VO!g#vO!l%eO~Oh%VOr4tO!l%eO(r'pO~Or4yO!g#vO(r'pO~Os!nO!S4zO(VTO(YUO(e!mO~O(y$}On%ai!Q%ai'y%ai(z%ai!]%ai#`%ai~Og%ai$O%ai~P%5oO(z%POn%ci!Q%ci'y%ci(y%ci!]%ci#`%ci~Og%ci$O%ci~P%6bOg(_i!](_i~P!1WO#`5QOg(_i!](_i~P!1WO!k5VO~Oa$oq!]$oq'z$oq'w$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:tO!Y5ZO~O!]5[O!_)QX~P#/sOa$zX!_$zX%^]X'z$zX!]$zX~P!0SO%^5_OaoX!_oX'zoX!]oX~P$#OOp5`O(T#nO~O%^5_O~Ob5fO%j5gO(T+qO(VTO(YUO!]'tX!^'tX~O!]1TO!^)Xa~O[5kO~O`5lO~O[5pO~Oa%nO'z%nO~P#/sO!]5uO#`5wO!^)UX~O!^5xO~Or6OOs!nO!S*iO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!pO#W!pO#X!pO#[5}O#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O!^5|O~P%;eOn6TO!_1oO%i6SO~Oh%VOn6TO!_1oO%i6SO~Ob6[O(T#nO(VTO(YUO!]'sX!^'sX~O!]1zO!^)Va~O(VTO(YUO(e6^O~O`6bO~Oj6eO&[6fO~PNXO!k6gO~P%[Oa6iO~Oa6iO~P%[Ob2bO!^6nO&j2aO~P`O!g6pO~O!g6rOh(ji!](ji!^(ji!g(ji!l(jir(ji(r(ji~O!]#hi!^#hi~P#BwO#`6sO!]#hi!^#hi~O!]!ai!^!ai~P#BwOa%nO#`6|O'z%nO~Oa%nO!g#vO#`6|O'z%nO~O!](tq!k(tqa(tq'z(tq~P!:tO!](jO!k(sq~O!S%hO!_%iO#j7TO(T%gO~O!_'`O%i7WO~On7[O!_'`O%i7WO~O#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'z'ia(a'ia(r'ia!k'ia!Y'ia'w'iav'ia!_'ia%i'ia!g'ia~P%-fO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'z'ka(a'ka(r'ka!k'ka!Y'ka'w'kav'ka!_'ka%i'ka!g'ka~P%.XO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'z$|i(a$|i(r$|i!k$|i!Y$|i'w$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/sO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'z%ai(a%ai(r%ai!k%ai!Y%ai'w%aiv%ai!_%ai%i%ai!g%ai~P%5oO#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'z%ci(a%ci(r%ci!k%ci!Y%ci'w%civ%ci!_%ci%i%ci!g%ci~P%6bO!]'Ya!k'Ya~P!:tO!].tO!k(ki~O$O#ci!]#ci!^#ci~P#BwOP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#n#mi~P%NdO#n<_O~P%NdOP$[OR#zOr<kO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#r#mi~P&!lO#r<aO~P&!lOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO(aVO#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#v#mi~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO(aVO(z#}O#z#mi#{#mi$O#mi(r#mi(y#mi!]#mi!^#mi~O#x<eO~P&&uO#x#mi~P&&uO#v<cO~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO(aVO(y#|O(z#}O#{#mi$O#mi(r#mi!]#mi!^#mi~O#z#mi~P&)UO#z<gO~P&)UOa#|y!]#|y'z#|y'w#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:tO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO(y#mi(z#mi~P&,QOn>^O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P&,QO#S$dOP(`XR(`X[(`Xj(`Xn(`Xr(`X!Q(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X$O(`X'y(`X(a(`X(r(`X(y(`X(z(`X!](`X!^(`X~O$O$Pi!]$Pi!^$Pi~P#BwO$O!ri!^!ri~P$+oOg']a!]']a~P!1WO!^7nO~O!]'da!^'da~P#BwO!Y7oO~P#/sO!g#vO(r'pO!]'ea!k'ea~O!]/pO!k)Oi~O!]/pO!g#vO!k)Oi~Og$|q!]$|q#`$|q$O$|q~P!1WO!Y'ga!]'ga~P#/sO!g7vO~O!]/yO!Y)Pi~P#/sO!]/yO!Y)Pi~O!Y7yO~Oh%VOr8OO!l%eO(r'pO~Oj8QO!g#vO~Or8TO!g#vO(r'pO~O!Q*OO'y*PO(z%POn'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P&5RO!Q*OO'y*POn'la(y'la(z'la!]'la#`'la~Og'la$O'la~P&5tOg(_q!](_q~P!1WO#`8VOg(_q!](_q~P!1WO!Y8WO~Og%Oq!]%Oq#`%Oq$O%Oq~P!1WOa$oy!]$oy'z$oy'w$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:tO!g6rO~O!]5[O!_)Qa~O!_'`OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(a$Ta(r$Ta(y$Ta(z$Ta~O%i7WO~P&8fO%^8[Oa%[i!_%[i'z%[i!]%[i~Oa#cy!]#cy'z#cy'w#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:tO[8^O~Ob8`O(T+qO(VTO(YUO~O!]1TO!^)Xi~O`8dO~O(e(|O!]'pX!^'pX~O!]5uO!^)Ua~O!^8nO~P%;eO(o!sO~P$&YO#[8oO~O!_1oO~O!_1oO%i8qO~On8tO!_1oO%i8qO~O[8yO!]'sa!^'sa~O!]1zO!^)Vi~O!k8}O~O!k9OO~O!k9RO~O!k9RO~P%[Oa9TO~O!g9UO~O!k9VO~O!](wi!^(wi~P#BwOa%nO#`9_O'z%nO~O!](ty!k(tya(ty'z(ty~P!:tO!](jO!k(sy~O%i9bO~P&8fO!_'`O%i9bO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'z$|q(a$|q(r$|q!k$|q!Y$|q'w$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/sO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'z'ja(a'ja(r'ja!k'ja!Y'ja'w'jav'ja!_'ja%i'ja!g'ja~P&5RO#k'laP'laR'la['laa'laj'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la'z'la(a'la(r'la!k'la!Y'la'w'lav'la!_'la%i'la!g'la~P&5tO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'z%Oq(a%Oq(r%Oq!k%Oq!Y%Oq'w%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/sO!]'Yi!k'Yi~P!:tO$O#cq!]#cq!^#cq~P#BwO(y$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(a%aa(r%aa!]%aa!^%aa~On%aa!Q%aa'y%aa(z%aa~P&IyO(z%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(a%ca(r%ca!]%ca!^%ca~On%ca!Q%ca'y%ca(y%ca~P&LQOn>^O!Q*OO'y*PO(z%PO~P&IyOn>^O!Q*OO'y*PO(y$}O~P&LQOR0kO!Q0kO!S0lO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'y}a(a}a(r}a(y}a(z}a!]}a!^}a~O!Q*OO'y*POP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(a$sa(r$sa(y$sa(z$sa!]$sa!^$sa~O!Q*OO'y*POP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(a$ua(r$ua(y$ua(z$ua!]$ua!^$ua~On>^O!Q*OO'y*PO(y$}O(z%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(a%Ta(r%Ta!]%Ta!^%Ta~P''VO$O$mq!]$mq!^$mq~P#BwO$O$oq!]$oq!^$oq~P#BwO!^9oO~O$O9pO~P!1WO!g#vO!]'ei!k'ei~O!g#vO(r'pO!]'ei!k'ei~O!]/pO!k)Oq~O!Y'gi!]'gi~P#/sO!]/yO!Y)Pq~Or9wO!g#vO(r'pO~O[9yO!Y9xO~P#/sO!Y9xO~Oj:PO!g#vO~Og(_y!](_y~P!1WO!]'na!_'na~P#/sOa%[q!_%[q'z%[q!]%[q~P#/sO[:UO~O!]1TO!^)Xq~O`:YO~O#`:ZO!]'pa!^'pa~O!]5uO!^)Ui~P#BwO!S:]O~O!_1oO%i:`O~O(VTO(YUO(e:eO~O!]1zO!^)Vq~O!k:hO~O!k:iO~O!k:jO~O!k:jO~P%[O#`:mO!]#hy!^#hy~O!]#hy!^#hy~P#BwO%i:rO~P&8fO!_'`O%i:rO~O$O#|y!]#|y!^#|y~P#BwOP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(a$|i(r$|i!]$|i!^$|i~P''VO!Q*OO'y*PO(z%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(a'ia(r'ia(y'ia!]'ia!^'ia~O!Q*OO'y*POP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(a'ka(r'ka(y'ka(z'ka!]'ka!^'ka~O(y$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'y%ai(a%ai(r%ai(z%ai!]%ai!^%ai~O(z%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'y%ci(a%ci(r%ci(y%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#BwO$O#cy!]#cy!^#cy~P#BwO!g#vO!]'eq!k'eq~O!]/pO!k)Oy~O!Y'gq!]'gq~P#/sOr:|O!g#vO(r'pO~O[;QO!Y;PO~P#/sO!Y;PO~Og(_!R!](_!R~P!1WOa%[y!_%[y'z%[y!]%[y~P#/sO!]1TO!^)Xy~O!]5uO!^)Uq~O(T;XO~O!_1oO%i;[O~O!k;_O~O%i;dO~P&8fOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(a$|q(r$|q!]$|q!^$|q~P''VO!Q*OO'y*PO(z%POP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(a'ja(r'ja(y'ja!]'ja!^'ja~O!Q*OO'y*POP'laR'la['laj'lan'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la$O'la(a'la(r'la(y'la(z'la!]'la!^'la~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(a%Oq(r%Oq!]%Oq!^%Oq~P''VOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!1WO!Y;hO~P#/sOr;iO!g#vO(r'pO~O[;kO!Y;hO~P#/sO!]'pq!^'pq~P#BwO!]#h!Z!^#h!Z~P#BwO#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'z%e!Z(a%e!Z(r%e!Z!k%e!Z!Y%e!Z'w%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/sOr;tO!g#vO(r'pO~O!Y;uO~P#/sOr;|O!g#vO(r'pO~O!Y;}O~P#/sOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(a%e!Z(r%e!Z!]%e!Z!^%e!Z~P''VOr<QO!g#vO(r'pO~Ov(fX~P1qO!Q%rO~P!)[O(U!lO~P!)[O!YfX!]fX#`fX~P%2OOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~O!gfX!k]X!kfX(rfX~P'LTOP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_XO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]<iO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<tO!S${O!_$|O!i>WO!l$xO#j<zO$W%`O$t<vO$v<xO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Ol)dO~P(!yOr!eX(r!eX~P#!iOr(jX(r(jX~P##[O!^]X!^fX~P'LTO!YfX!Y$zX!]fX!]$zX#`fX~P!0SO#k<^O~O!g#vO#k<^O~O#`<nO~Oj<bO~O#`=OO!](wX!^(wX~O#`<nO!](uX!^(uX~O#k=PO~Og=RO~P!1WO#k=XO~O#k=YO~Og=RO(T&ZO~O!g#vO#k=ZO~O!g#vO#k=PO~O$O=[O~P#BwO#k=]O~O#k=^O~O#k=cO~O#k=dO~O#k=eO~O#k=fO~O$O=gO~P!1WO$O=hO~P!1WOl=sO~P7eOk#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~(OT#o!X'|(U#ps#n#qr!Q'}$]'}(T$_(e~",goto:"$9Y)]PPPPPP)^PP)aP)rP+W/]PPPP6mPP7TPP=QPPP@tPA^PA^PPPA^PCfPA^PA^PA^PCjPCoPD^PIWPPPI[PPPPI[L_PPPLeMVPI[PI[PP! eI[PPPI[PI[P!#lI[P!'S!(X!(bP!)U!)Y!)U!,gPPPPPPP!-W!(XPP!-h!/YP!2iI[I[!2n!5z!:h!:h!>gPPP!>oI[PPPPPPPPP!BOP!C]PPI[!DnPI[PI[I[I[I[I[PI[!FQP!I[P!LbP!Lf!Lp!Lt!LtP!IXP!Lx!LxP#!OP#!SI[PI[#!Y#%_CjA^PA^PA^A^P#&lA^A^#)OA^#+vA^#.SA^A^#.r#1W#1W#1]#1f#1W#1qPP#1WPA^#2ZA^#6YA^A^6mPPP#:_PPP#:x#:xP#:xP#;`#:xPP#;fP#;]P#;]#;y#;]#<e#<k#<n)aP#<q)aP#<z#<z#<zP)aP)aP)aP)aPP)aP#=Q#=TP#=T)aP#=XP#=[P)aP)aP)aP)aP)aP)a)aPP#=b#=h#=s#=y#>P#>V#>]#>k#>q#>{#?R#?]#?c#?s#?y#@k#@}#AT#AZ#Ai#BO#Cs#DR#DY#Et#FS#Gt#HS#HY#H`#Hf#Hp#Hv#H|#IW#Ij#IpPPPPPPPPPPP#IvPPPPPPP#Jk#Mx$ b$ i$ qPPP$']P$'f$*_$0x$0{$1O$1}$2Q$2X$2aP$2g$2jP$3W$3[$4S$5b$5g$5}PP$6S$6Y$6^$6a$6e$6i$7e$7|$8e$8i$8l$8o$8y$8|$9Q$9UR!|RoqOXst!Z#d%m&r&t&u&w,s,x2[2_Y!vQ'`-e1o5{Q%tvQ%|yQ&T|Q&j!VS'W!e-]Q'f!iS'l!r!yU*k$|*Z*oQ+o%}S+|&V&WQ,d&dQ-c'_Q-m'gQ-u'mQ0[*qQ1b,OQ1y,eR<{<Y%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_S#q]<V!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU+P%]<s<tQ+t&PQ,f&gQ,m&oQ0x+gQ0}+iQ1Y+uQ2R,kQ3`.gQ5`0|Q5f1TQ6[1zQ7Y3dQ8`5gR9e7['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S!S!nQ!r!v!y!z$|'W'_'`'l'm'n*k*o*q*r-]-c-e-u0[0_1o5{5}%[$ti#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q&X|Q'U!eS'[%i-`Q+t&PQ,P&WQ,f&gQ0n+SQ1Y+uQ1_+{Q2Q,jQ2R,kQ5f1TQ5o1aQ6[1zQ6_1|Q6`2PQ8`5gQ8c5lQ8|6bQ:X8dQ:f8yQ;V:YR<}*ZrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R,h&k&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'b'r(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>R>S[#]WZ#W#Z'X(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ%wxQ%{yW&Q|&V&W,OQ&_!TQ'c!hQ'e!iQ(q#sS+n%|%}Q+r&PQ,_&bQ,c&dS-l'f'gQ.i(rQ1R+oQ1X+uQ1Z+vQ1^+zQ1t,`S1x,d,eQ2|-mQ5e1TQ5i1WQ5n1`Q6Z1yQ8_5gQ8b5kQ8f5pQ:T8^R;T:U!U$zi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y!^%yy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{Q+h%wQ,T&[Q,W&]Q,b&dQ.h(qQ1s,_U1w,c,d,eQ3e.iQ6U1tS6Y1x1yQ8x6Z#f>T#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o>U<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hW%Ti%V*y>PS&[!Q&iQ&]!RQ&^!SU*}%[%d=sR,R&Y%]%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^T)z$u){V+P%]<s<tW'[!e%i*Z-`S(}#y#zQ+c%rQ+y&SS.b(m(nQ1j,XQ5T0kR8i5u'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S$i$^c#Y#e%q%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.|.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ'Y!eR2q-]!W!nQ!e!r!v!y!z$|'W'_'`'l'm'n*Z*k*o*q*r-]-c-e-u0[0_1o5{5}R1l,ZnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&y!^Q'v!xS(s#u<^Q+l%zQ,]&_Q,^&aQ-j'dQ-w'oS.r(x=PS0q+X=ZQ1P+mQ1n,[Q2c,zQ2e,{Q2m-WQ2z-kQ2}-oS5Y0r=eQ5a1QS5d1S=fQ6t2oQ6x2{Q6}3SQ8]5bQ9Y6vQ9Z6yQ9^7OR:l9V$d$]c#Y#e%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vS(o#p'iQ)P#zS+b%q.|S.c(n(pR3^.d'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS#q]<VQ&t!XQ&u!YQ&w![Q&x!]R2Z,vQ'a!hQ+e%wQ-h'cS.e(q+hQ2x-gW3b.h.i0w0yQ6w2yW7U3_3a3e5^U9a7V7X7ZU:q9c9d9fS;b:p:sQ;p;cR;x;qU!wQ'`-eT5y1o5{!Q_OXZ`st!V!Z#d#h%e%m&i&k&r&t&u&w(j,s,x.[2[2_]!pQ!r'`-e1o5{T#q]<V%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S(}#y#zS.b(m(n!s=l$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU$fd)_,mS(p#p'iU*v%R(w4OU0m+O.n7gQ5^0xQ7V3`Q9d7YR:s9em!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}Q't!uS(f#g2US-s'k'wQ/s*]Q0R*jQ3U-vQ4f/tQ4r0TQ4s0UQ4x0^Q7r4`S7}4t4vS8R4y4{Q9r7sQ9v7yQ9{8OQ:Q8TS:{9w9xS;g:|;PS;s;h;iS;{;t;uS<P;|;}R<S<QQ#wbQ's!uS(e#g2US(g#m+WQ+Y%fQ+j%xQ+p&OU-r'k't'wQ.W(fU/r*]*`/wQ0S*jQ0V*lQ1O+kQ1u,aS3R-s-vQ3Z.`S4e/s/tQ4n0PS4q0R0^Q4u0WQ6W1vQ7P3US7q4`4bQ7u4fU7|4r4x4{Q8P4wQ8v6XS9q7r7sQ9u7yQ9}8RQ:O8SQ:c8wQ:y9rS:z9v9xQ;S:QQ;^:dS;f:{;PS;r;g;hS;z;s;uS<O;{;}Q<R<PQ<T<SQ=o=jQ={=tR=|=uV!wQ'`-e%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S#wz!j!r=i$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=o>R%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Q%fj!^%xy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{S&Oz!jQ+k%yQ,a&dW1v,b,c,d,eU6X1w1x1yS8w6Y6ZQ:d8x!r=j$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ=t>QR=u>R%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Y#bWZ#W#Z(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ,n&o!p=k$Z$n)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=n'XU']!e%i*ZR2s-`%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ,m&oQ0x+gQ3`.gQ7Y3dR9e7[!b$Tc#Y%q(S(Y(t(y)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!P<d)^)q-Z.|2k2n3p3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!f$Vc#Y%q(S(Y(t(y)W)X)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!T<f)^)q-Z.|2k2n3p3v3w3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!^$Zc#Y%q(S(Y(t(y)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<WQ4_/kz>S)^)q-Z.|2k2n3p4P4X6u7b7k7l8k9X9g9m9n;W;`=vQ>X>ZR>Y>['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS$oh$pR4U/U'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$kf$qQ$ifS)j$l)nR)v$qT$jf$qT)l$l)n'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$oh$pQ$rhR)u$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_!s>Q$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S#glOPXZst!Z!`!o#S#d#o#{$n%m&k&n&o&r&t&u&w&{'T'b)O)s*i+]+g,p,s,x-i.g/V/n0]0l1r2S2T2V2X2[2_2a3d4T4z6T6e6f6i7[8t9T!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^Q+T%aQ/c*Oo4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!U$yi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>YQ*c$zU*l$|*Z*oQ+U%bQ0W*m#f=q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n=r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hQ=w>TQ=x>UQ=y>VR=z>W!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hnoOXst!Z#d%m&r&t&u&w,s,x2[2_S*f${*YQ-R'OQ-S'QR4i/y%[%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q,U&]Q1h,WQ5s1gR8h5tV*n$|*Z*oU*n$|*Z*oT5z1o5{S0P*i/nQ4w0]T8S4z:]Q+j%xQ0V*lQ1O+kQ1u,aQ6W1vQ8v6XQ:c8wR;^:d!U%Oi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Yx*R$v)e*S*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>OS0`*t0a#f<o#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<p<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!d=S(u)c*[*e.j.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[`=T3}7c7f7j9h:t:w;yS=_.l3iT=`7e9k!U%Qi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y|*T$v)e*U*t+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>OS0b*u0c#f<q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!h=U(u)c*[*e.k.l.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[d=V3}7d7e7j9h9i:t:u:w;yS=a.m3jT=b7f9lrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q&f!UR,p&ornOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R&f!UQ,Y&^R1d,RsnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q1p,_S6R1s1tU8p6P6Q6US:_8r8sS;Y:^:aQ;m;ZR;w;nQ&m!VR,i&iR6_1|R:f8yW&Q|&V&W,OR1Z+vQ&r!WR,s&sR,y&xT2],x2_R,}&yQ,|&yR2f,}Q'y!{R-y'ySsOtQ#dXT%ps#dQ#OTR'{#OQ#RUR'}#RQ){$uR/`){Q#UVR(Q#UQ#XWU(W#X(X.QQ(X#YR.Q(YQ-^'YR2r-^Q.u(yS3m.u3nR3n.vQ-e'`R2v-eY!rQ'`-e1o5{R'j!rQ/Q)eR4S/QU#_W%h*YU(_#_(`.RQ(`#`R.R(ZQ-a']R2t-at`OXst!V!Z#d%m&i&k&r&t&u&w,s,x2[2_S#hZ%eU#r`#h.[R.[(jQ(k#jQ.X(gW.a(k.X3X7RQ3X.YR7R3YQ)n$lR/W)nQ$phR)t$pQ$`cU)a$`-|<jQ-|<WR<j)qQ/q*]W4c/q4d7t9sU4d/r/s/tS7t4e4fR9s7u$e*Q$v(u)c)e*[*e*t*u+Q+R+V.l.m.o.p.q/_/g/i/k/v/|0d0e0v1e3f3g3h3}4R4[4g4h4l4|5O5R5S5W5r7]7^7_7`7e7f7h7i7j7p7w7z8U8X8Z9h9i9j9t9|:R:S:t:u:v:w:x:};R;e;j;v;y=p=}>O>Z>[Q/z*eU4k/z4m7xQ4m/|R7x4lS*o$|*ZR0Y*ox*S$v)e*t*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>O!d.j(u)c*[*e.l.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/h*S.j7ca7c3}7e7f7j9h:t:w;yQ0a*tQ3i.lU4}0a3i9kR9k7e|*U$v)e*t*u+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>O!h.k(u)c*[*e.l.m.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/j*U.k7de7d3}7e7f7j9h9i:t:u:w;yQ0c*uQ3j.mU5P0c3j9lR9l7fQ*z%UR0g*zQ5]0vR8Y5]Q+_%kR0u+_Q5v1jS8j5v:[R:[8kQ,[&_R1m,[Q5{1oR8m5{Q1{,fS6]1{8zR8z6_Q1U+rW5h1U5j8a:VQ5j1XQ8a5iR:V8bQ+w&QR1[+wQ2_,xR6m2_YrOXst#dQ&v!ZQ+a%mQ,r&rQ,t&tQ,u&uQ,w&wQ2Y,sS2],x2_R6l2[Q%opQ&z!_Q&}!aQ'P!bQ'R!cQ'q!uQ+`%lQ+l%zQ,Q&XQ,h&mQ-P&|W-p'k's't'wQ-w'oQ0X*nQ1P+mQ1c,PS2O,i,lQ2g-OQ2h-RQ2i-SQ2}-oW3P-r-s-v-xQ5a1QQ5m1_Q5q1eQ6V1uQ6a2QQ6k2ZU6z3O3R3UQ6}3SQ8]5bQ8e5oQ8g5rQ8l5zQ8u6WQ8{6`S9[6{7PQ9^7OQ:W8cQ:b8vQ:g8|Q:n9]Q;U:XQ;]:cQ;a:oQ;l;VR;o;^Q%zyQ'd!iQ'o!uU+m%{%|%}Q-W'VU-k'e'f'gS-o'k'uQ0Q*jS1Q+n+oQ2o-YS2{-l-mQ3S-tS4p0R0UQ5b1RQ6v2uQ6y2|Q7O3TU7{4r4s4vQ9z7}R;O9{S$wi>PR*{%VU%Ui%V>PR0f*yQ$viS(u#v+iS)c$b$cQ)e$dQ*[$xS*e${*YQ*t%OQ*u%QQ+Q%^Q+R%_Q+V%cQ.l<oQ.m<qQ.o<uQ.p<wQ.q<yQ/_)yQ/g*RQ/i*TQ/k*VQ/v*aS/|*g/mQ0d*wQ0e*xl0v+f,V.f1i1q3c6S7W8q9b:`:r;[;dQ1e,SQ3f=SQ3g=UQ3h=XS3}<l<mQ4R/PS4[/d4^Q4g/xQ4h/yQ4l/{Q4|0`Q5O0bQ5R0iQ5S0jQ5W0oQ5r1fQ7]=]Q7^=_Q7_=aQ7`=cQ7e<pQ7f<rQ7h<vQ7i<xQ7j<zQ7p4_Q7w4jQ7z4oQ8U5QQ8X5[Q8Z5_Q9h=YQ9i=TQ9j=VQ9t7vQ9|8QQ:R8VQ:S8[Q:t=^Q:u=`Q:v=bQ:w=dQ:x9pQ:}9yQ;R:PQ;e=gQ;j;QQ;v;kQ;y=hQ=p>PQ=}>XQ>O>YQ>Z>]R>[>^Q+O%]Q.n<sR7g<tnpOXst!Z#d%m&r&t&u&w,s,x2[2_Q!fPS#fZ#oQ&|!`W'h!o*i0]4zQ(P#SQ)Q#{Q)r$nS,l&k&nQ,q&oQ-O&{S-T'T/nQ-g'bQ.x)OQ/[)sQ0s+]Q0y+gQ2W,pQ2y-iQ3a.gQ4W/VQ5U0lQ6Q1rQ6c2SQ6d2TQ6h2VQ6j2XQ6o2aQ7Z3dQ7m4TQ8s6TQ9P6eQ9Q6fQ9S6iQ9f7[Q:a8tR:k9T#[cOPXZst!Z!`!o#d#o#{%m&k&n&o&r&t&u&w&{'T'b)O*i+]+g,p,s,x-i.g/n0]0l1r2S2T2V2X2[2_2a3d4z6T6e6f6i7[8t9TQ#YWQ#eYQ%quQ%svS%uw!gS(S#W(VQ(Y#ZQ(t#uQ(y#xQ)R$OQ)S$PQ)T$QQ)U$RQ)V$SQ)W$TQ)X$UQ)Y$VQ)Z$WQ)[$XQ)^$ZQ)`$_Q)b$aQ)g$eW)q$n)s/V4TQ+d%tQ+x&RS-Z'X2pQ-x'rS-}(T.PQ.S(]Q.U(dQ.s(xQ.v(zQ.z<UQ.|<XQ.}<YQ/O<]Q/b)}Q0p+XQ2k-UQ2n-XQ3O-qQ3V.VQ3k.tQ3p<^Q3q<_Q3r<`Q3s<aQ3t<bQ3u<cQ3v<dQ3w<eQ3x<fQ3y<gQ3z<hQ3{.{Q3|<kQ4P<nQ4Q<{Q4X<iQ5X0rQ5c1SQ6u=OQ6{3QQ7Q3WQ7a3lQ7b=PQ7k=RQ7l=ZQ8k5wQ9X6sQ9]6|Q9g=[Q9m=eQ9n=fQ:o9_Q;W:ZQ;`:mQ<W#SR=v>SR#[WR'Z!el!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}S'V!e-]U*j$|*Z*oS-Y'W'_S0U*k*qQ0^*rQ2u-cQ4v0[R4{0_R({#xQ!fQT-d'`-e]!qQ!r'`-e1o5{Q#p]R'i<VR)f$dY!uQ'`-e1o5{Q'k!rS'u!v!yS'w!z5}S-t'l'mQ-v'nR3T-uT#kZ%eS#jZ%eS%km,oU(g#h#i#lS.Y(h(iQ.^(jQ0t+^Q3Y.ZU3Z.[.]._S7S3[3]R9`7Td#^W#W#Z%h(T(^*Y+Z.T/mr#gZm#h#i#l%e(h(i(j+^.Z.[.]._3[3]7TS*]$x*bQ/t*^Q2U,oQ2l-VQ4`/pQ6q2dQ7s4aQ9W6rT=m'X+[V#aW%h*YU#`W%h*YS(U#W(^U(Z#Z+Z/mS-['X+[T.O(T.TV'^!e%i*ZQ$lfR)x$qT)m$l)nR4V/UT*_$x*bT*h${*YQ0w+fQ1g,VQ3_.fQ5t1iQ6P1qQ7X3cQ8r6SQ9c7WQ:^8qQ:p9bQ;Z:`Q;c:rQ;n;[R;q;dnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&l!VR,h&itmOXst!U!V!Z#d%m&i&r&t&u&w,s,x2[2_R,o&oT%lm,oR1k,XR,g&gQ&U|S+}&V&WR1^,OR+s&PT&p!W&sT&q!W&sT2^,x2_",nodeNames:" ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration defer ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:380,context:trackNewline,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,237,243,245,247,249,252,258,264,266,268,270,272,274,275,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[jsHighlight],skippedNodes:[0,5,6,278],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Wp(Z!b'|0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(X#S$i&j'}0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Wp(Z!b'}0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(V':f$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Wp(Z!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Wp(Z!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Z!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Z!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(WpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(WpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Wp(Z!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(o%1l(Wp(Z!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Wp(Z!b$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Wp(Z!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Wp(Z!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(z+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(Y';W$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(WpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Wp(Z!b(U%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Wp(Z!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Wp(Z!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Wp(Z!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Wp(Z!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Z!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Z!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Z!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Z!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Z!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Z!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Wp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Wp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Wp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Wp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(WpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(WpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Wp(Z!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Wp(Z!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Wp(Z!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Wp(Z!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Wp(Z!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Wp(Z!b(O0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Wp(Z!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Z!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Z!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(WpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(WpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Wp(Z!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Wp(Z!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(r(Ct$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Wp(Z!b(a+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Wp(Z!b(T,2j$_#t(e$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Wp(Z!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(y+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Wp(Z!b'|0/l$]#t(T,2j(e$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Wp(Z!b'}0/l$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[noSemicolon,noSemicolonType,operatorToken,jsx,2,3,4,5,6,7,8,9,10,11,12,13,14,insertSemicolon,new LocalTokenGroup("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(c~~",141,340),new LocalTokenGroup("j~RQYZXz{^~^O(Q~~aP!P!Qd~iO(R~~",25,323)],topRules:{Script:[0,7],SingleExpression:[1,276],SingleClassItem:[2,277]},dialects:{jsx:0,ts:15175},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:327,get:e=>spec_identifier[e]||-1},{term:343,get:e=>spec_word[e]||-1},{term:95,get:e=>spec_LessThan[e]||-1}],tokenPrec:15201}),snippets=[snippetCompletion("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),snippetCompletion("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),snippetCompletion("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),snippetCompletion("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),snippetCompletion("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),snippetCompletion('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),snippetCompletion('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],typescriptSnippets=snippets.concat([snippetCompletion("interface ${name} {\n\t${}\n}",{label:"interface",detail:"definition",type:"keyword"}),snippetCompletion("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),snippetCompletion("enum ${name} {\n\t${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),cache=new NodeWeakMap,ScopeNodes=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function defID(e){return(t,r)=>{let n=t.node.getChild("VariableDefinition");return n&&r(n,e),!0}}const functionContext=["FunctionDeclaration"],gatherCompletions={FunctionDeclaration:defID("function"),ClassDeclaration:defID("class"),ClassExpression:()=>!0,EnumDeclaration:defID("constant"),TypeAliasDeclaration:defID("type"),NamespaceDeclaration:defID("namespace"),VariableDefinition(e,t){e.matchContext(functionContext)||t(e,"variable")},TypeDefinition(e,t){t(e,"type")},__proto__:null};function getScope(e,t){let r=cache.get(t);if(r)return r;let n=[],i=!0;function o(t,r){let i=e.sliceString(t.from,t.to);n.push({label:i,type:r})}return t.cursor(IterMode.IncludeAnonymous).iterate(t=>{if(i)i=!1;else if(t.name){let e=gatherCompletions[t.name];if(e&&e(t,o)||ScopeNodes.has(t.name))return!1}else if(t.to-t.from>8192){for(let r of getScope(e,t.node))n.push(r);return!1}}),cache.set(t,n),n}const Identifier=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,dontComplete=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function localCompletionSource(e){let t=syntaxTree(e.state).resolveInner(e.pos,-1);if(dontComplete.indexOf(t.name)>-1)return null;let r="VariableName"==t.name||t.to-t.from<20&&Identifier.test(e.state.sliceDoc(t.from,t.to));if(!r&&!e.explicit)return null;let n=[];for(let i=t;i;i=i.parent)ScopeNodes.has(i.name)&&(n=n.concat(getScope(e.state.doc,i)));return{options:n,from:r?t.from:e.pos,validFor:Identifier}}const javascriptLanguage=LRLanguage.define({name:"javascript",parser:parser.configure({props:[indentNodeProp.add({IfStatement:continuedIndent({except:/^\s*({|else\b)/}),TryStatement:continuedIndent({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:flatIndent,SwitchBody:e=>{let t=e.textAfter,r=/^\s*\}/.test(t),n=/^\s*(case|default)\b/.test(t);return e.baseIndent+(r?0:n?1:2)*e.unit},Block:delimitedIndent({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":continuedIndent({except:/^\s*{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag":e=>e.column(e.node.from)+e.unit}),foldNodeProp.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":foldInside,BlockComment:e=>({from:e.from+2,to:e.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),jsxSublanguage={test:e=>/^JSX/.test(e.name),facet:defineLanguageFacet({commentTokens:{block:{open:"{/*",close:"*/}"}}})},typescriptLanguage=javascriptLanguage.configure({dialect:"ts"},"typescript"),jsxLanguage=javascriptLanguage.configure({dialect:"jsx",props:[sublanguageProp.add(e=>e.isTop?[jsxSublanguage]:void 0)]}),tsxLanguage=javascriptLanguage.configure({dialect:"jsx ts",props:[sublanguageProp.add(e=>e.isTop?[jsxSublanguage]:void 0)]},"typescript");let kwCompletion=e=>({label:e,type:"keyword"});const keywords="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(kwCompletion),typescriptKeywords=keywords.concat(["declare","implements","private","protected","public"].map(kwCompletion));function javascript(e={}){let t=e.jsx?e.typescript?tsxLanguage:jsxLanguage:e.typescript?typescriptLanguage:javascriptLanguage,r=e.typescript?typescriptSnippets.concat(typescriptKeywords):snippets.concat(keywords);return new LanguageSupport(t,[javascriptLanguage.data.of({autocomplete:ifNotIn(dontComplete,completeFromList(r))}),javascriptLanguage.data.of({autocomplete:localCompletionSource}),e.jsx?autoCloseTags$1:[]])}function findOpenTag(e){for(;;){if("JSXOpenTag"==e.name||"JSXSelfClosingTag"==e.name||"JSXFragmentTag"==e.name)return e;if("JSXEscape"==e.name||!e.parent)return null;e=e.parent}}function elementName$1(e,t,r=e.length){for(let n=null==t?void 0:t.firstChild;n;n=n.nextSibling)if("JSXIdentifier"==n.name||"JSXBuiltin"==n.name||"JSXNamespacedName"==n.name||"JSXMemberExpression"==n.name)return e.sliceString(n.from,Math.min(n.to,r));return""}const android="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),autoCloseTags$1=EditorView.inputHandler.of((e,t,r,n,i)=>{if((android?e.composing:e.compositionStarted)||e.state.readOnly||t!=r||">"!=n&&"/"!=n||!javascriptLanguage.isActiveAt(e.state,t,-1))return!1;let o=i(),{state:s}=o,a=s.changeByRange(e=>{var t;let r,{head:i}=e,o=syntaxTree(s).resolveInner(i-1,-1);if("JSXStartTag"==o.name&&(o=o.parent),s.doc.sliceString(i-1,i)!=n||"JSXAttributeValue"==o.name&&o.to>i);else{if(">"==n&&"JSXFragmentTag"==o.name)return{range:e,changes:{from:i,insert:"</>"}};if("/"==n&&"JSXStartCloseTag"==o.name){let e=o.parent,n=e.parent;if(n&&e.from==i-2&&((r=elementName$1(s.doc,n.firstChild,i))||"JSXFragmentTag"==(null===(t=n.firstChild)||void 0===t?void 0:t.name))){let e=`${r}>`;return{range:EditorSelection.cursor(i+e.length,-1),changes:{from:i,insert:e}}}}else if(">"==n){let t=findOpenTag(o);if(t&&"JSXOpenTag"==t.name&&!/^\/?>|^<\//.test(s.doc.sliceString(i,i+2))&&(r=elementName$1(s.doc,t,i)))return{range:e,changes:{from:i,insert:`</${r}>`}}}}return{range:e}});return!a.changes.empty&&(e.dispatch([o,s.update(a,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),Targets=["_blank","_self","_top","_parent"],Charsets=["ascii","utf-8","utf-16","latin1","latin1"],Methods=["get","post","put","delete"],Encs=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],Bool=["true","false"],S={},Tags={a:{attrs:{href:null,ping:null,type:null,media:null,target:Targets,hreflang:null}},abbr:S,address:S,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:S,aside:S,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:S,base:{attrs:{href:null,target:Targets}},bdi:S,bdo:S,blockquote:{attrs:{cite:null}},body:S,br:S,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:Encs,formmethod:Methods,formnovalidate:["novalidate"],formtarget:Targets,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:S,center:S,cite:S,code:S,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:S,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:S,div:S,dl:S,dt:S,em:S,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:S,figure:S,footer:S,form:{attrs:{action:null,name:null,"accept-charset":Charsets,autocomplete:["on","off"],enctype:Encs,method:Methods,novalidate:["novalidate"],target:Targets}},h1:S,h2:S,h3:S,h4:S,h5:S,h6:S,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:S,hgroup:S,hr:S,html:{attrs:{manifest:null}},i:S,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:Encs,formmethod:Methods,formnovalidate:["novalidate"],formtarget:Targets,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:S,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:S,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:S,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:Charsets,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:S,noscript:S,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:S,param:{attrs:{name:null,value:null}},pre:S,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:S,rt:S,ruby:S,samp:S,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:Charsets}},section:S,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:S,source:{attrs:{src:null,type:null,media:null}},span:S,strong:S,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:S,summary:S,sup:S,table:S,tbody:S,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:S,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:S,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:S,time:{attrs:{datetime:null}},title:S,tr:S,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:S,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:S},GlobalAttrs={accesskey:null,class:null,contenteditable:Bool,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:Bool,autocorrect:Bool,autocapitalize:Bool,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":Bool,"aria-autocomplete":["inline","list","both","none"],"aria-busy":Bool,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":Bool,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":Bool,"aria-hidden":Bool,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":Bool,"aria-multiselectable":Bool,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":Bool,"aria-relevant":null,"aria-required":Bool,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},eventAttributes="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(e=>"on"+e);for(let e of eventAttributes)GlobalAttrs[e]=null;class Schema{constructor(e,t){this.tags={...Tags,...e},this.globalAttrs={...GlobalAttrs,...t},this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}function elementName(e,t,r=e.length){if(!t)return"";let n=t.firstChild,i=n&&n.getChild("TagName");return i?e.sliceString(i.from,Math.min(i.to,r)):""}function findParentElement(e,t=!1){for(;e;e=e.parent)if("Element"==e.name){if(!t)return e;t=!1}return null}function allowedChildren(e,t,r){let n=r.tags[elementName(e,findParentElement(t))];return(null==n?void 0:n.children)||r.allTags}function openTags(e,t){let r=[];for(let n=findParentElement(t);n&&!n.type.isTop;n=findParentElement(n.parent)){let i=elementName(e,n);if(i&&"CloseTag"==n.lastChild.name)break;i&&r.indexOf(i)<0&&("EndTag"==t.name||t.from>=n.firstChild.to)&&r.push(i)}return r}Schema.default=new Schema;const identifier=/^[:\-\.\w\u00b7-\uffff]*$/;function completeTag(e,t,r,n,i){let o=/\s*>/.test(e.sliceDoc(i,i+5))?"":">",s=findParentElement(r,"StartTag"==r.name||"TagName"==r.name);return{from:n,to:i,options:allowedChildren(e.doc,s,t).map(e=>({label:e,type:"type"})).concat(openTags(e.doc,r).map((e,t)=>({label:"/"+e,apply:"/"+e+o,type:"type",boost:99-t}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function completeCloseTag(e,t,r,n){let i=/\s*>/.test(e.sliceDoc(n,n+5))?"":">";return{from:r,to:n,options:openTags(e.doc,t).map((e,t)=>({label:e,apply:e+i,type:"type",boost:99-t})),validFor:identifier}}function completeStartTag(e,t,r,n){let i=[],o=0;for(let s of allowedChildren(e.doc,r,t))i.push({label:"<"+s,type:"type"});for(let s of openTags(e.doc,r))i.push({label:"</"+s+">",type:"type",boost:99-o++});return{from:n,to:n,options:i,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}function completeAttrName(e,t,r,n,i){let o=findParentElement(r),s=o?t.tags[elementName(e.doc,o)]:null,a=s&&s.attrs?Object.keys(s.attrs):[];return{from:n,to:i,options:(s&&!1===s.globalAttrs?a:a.length?a.concat(t.globalAttrNames):t.globalAttrNames).map(e=>({label:e,type:"property"})),validFor:identifier}}function completeAttrValue(e,t,r,n,i){var o;let s,a=null===(o=r.parent)||void 0===o?void 0:o.getChild("AttributeName"),l=[];if(a){let o=e.sliceDoc(a.from,a.to),c=t.globalAttrs[o];if(!c){let n=findParentElement(r),i=n?t.tags[elementName(e.doc,n)]:null;c=(null==i?void 0:i.attrs)&&i.attrs[o]}if(c){let t=e.sliceDoc(n,i).toLowerCase(),r='"',o='"';/^['"]/.test(t)?(s='"'==t[0]?/^[^"]*$/:/^[^']*$/,r="",o=e.sliceDoc(i,i+1)==t[0]?"":t[0],t=t.slice(1),n++):s=/^[^\s<>='"]*$/;for(let e of c)l.push({label:e,apply:r+e+o,type:"constant"})}}return{from:n,to:i,options:l,validFor:s}}function htmlCompletionFor(e,t){let{state:r,pos:n}=t,i=syntaxTree(r).resolveInner(n,-1),o=i.resolve(n);for(let s,a=n;o==i&&(s=i.childBefore(a));){let e=s.lastChild;if(!e||!e.type.isError||e.from<e.to)break;o=i=s,a=e.from}return"TagName"==i.name?i.parent&&/CloseTag$/.test(i.parent.name)?completeCloseTag(r,i,i.from,n):completeTag(r,e,i,i.from,n):"StartTag"==i.name||"IncompleteTag"==i.name?completeTag(r,e,i,n,n):"StartCloseTag"==i.name||"IncompleteCloseTag"==i.name?completeCloseTag(r,i,n,n):"OpenTag"==i.name||"SelfClosingTag"==i.name||"AttributeName"==i.name?completeAttrName(r,e,i,"AttributeName"==i.name?i.from:n,n):"Is"==i.name||"AttributeValue"==i.name||"UnquotedAttributeValue"==i.name?completeAttrValue(r,e,i,"Is"==i.name?n:i.from,n):!t.explicit||"Element"!=o.name&&"Text"!=o.name&&"Document"!=o.name?null:completeStartTag(r,e,i,n)}function htmlCompletionSource(e){return htmlCompletionFor(Schema.default,e)}function htmlCompletionSourceWith(e){let{extraTags:t,extraGlobalAttributes:r}=e,n=r||t?new Schema(t,r):Schema.default;return e=>htmlCompletionFor(n,e)}const jsonParser=javascriptLanguage.parser.configure({top:"SingleExpression"}),defaultNesting=[{tag:"script",attrs:e=>"text/typescript"==e.type||"ts"==e.lang,parser:typescriptLanguage.parser},{tag:"script",attrs:e=>"text/babel"==e.type||"text/jsx"==e.type,parser:jsxLanguage.parser},{tag:"script",attrs:e=>"text/typescript-jsx"==e.type,parser:tsxLanguage.parser},{tag:"script",attrs:e=>/^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(e.type),parser:jsonParser},{tag:"script",attrs:e=>!e.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(e.type),parser:javascriptLanguage.parser},{tag:"style",attrs:e=>(!e.lang||"css"==e.lang)&&(!e.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(e.type)),parser:cssLanguage.parser}],defaultAttrs=[{name:"style",parser:cssLanguage.parser.configure({top:"Styles"})}].concat(eventAttributes.map(e=>({name:e,parser:javascriptLanguage.parser}))),htmlPlain=LRLanguage.define({name:"html",parser:parser$2.configure({props:[indentNodeProp.add({Element(e){let t=/^(\s*)(<\/)?/.exec(e.textAfter);return e.node.to<=e.pos+t[0].length?e.continue():e.lineIndent(e.node.from)+(t[2]?0:e.unit)},"OpenTag CloseTag SelfClosingTag":e=>e.column(e.node.from)+e.unit,Document(e){if(e.pos+/\s*/.exec(e.textAfter)[0].length<e.node.to)return e.continue();let t,r=null;for(let n=e.node;;){let e=n.lastChild;if(!e||"Element"!=e.name||e.to!=n.to)break;r=n=e}return r&&(!(t=r.lastChild)||"CloseTag"!=t.name&&"SelfClosingTag"!=t.name)?e.lineIndent(r.from)+e.unit:null}}),foldNodeProp.add({Element(e){let t=e.firstChild,r=e.lastChild;return t&&"OpenTag"==t.name?{from:t.to,to:"CloseTag"==r.name?r.from:e.to}:null}}),bracketMatchingHandle.add({"OpenTag CloseTag":e=>e.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"\x3c!--",close:"--\x3e"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-_"}}),htmlLanguage=htmlPlain.configure({wrap:configureNesting(defaultNesting,defaultAttrs)});function html$2(e={}){let t,r="";!1===e.matchClosingTags&&(r="noMatch"),!0===e.selfClosingTags&&(r=(r?r+" ":"")+"selfClosing"),(e.nestedLanguages&&e.nestedLanguages.length||e.nestedAttributes&&e.nestedAttributes.length)&&(t=configureNesting((e.nestedLanguages||[]).concat(defaultNesting),(e.nestedAttributes||[]).concat(defaultAttrs)));let n=t?htmlPlain.configure({wrap:t,dialect:r}):r?htmlLanguage.configure({dialect:r}):htmlLanguage;return new LanguageSupport(n,[htmlLanguage.data.of({autocomplete:htmlCompletionSourceWith(e)}),!1!==e.autoCloseTags?autoCloseTags:[],javascript().support,css().support])}const selfClosers=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),autoCloseTags=EditorView.inputHandler.of((e,t,r,n,i)=>{if(e.composing||e.state.readOnly||t!=r||">"!=n&&"/"!=n||!htmlLanguage.isActiveAt(e.state,t,-1))return!1;let o=i(),{state:s}=o,a=s.changeByRange(e=>{var t,r,i;let o,a=s.doc.sliceString(e.from-1,e.to)==n,{head:l}=e,c=syntaxTree(s).resolveInner(l,-1);if(a&&">"==n&&"EndTag"==c.name){let n=c.parent;if("CloseTag"!=(null===(r=null===(t=n.parent)||void 0===t?void 0:t.lastChild)||void 0===r?void 0:r.name)&&(o=elementName(s.doc,n.parent,l))&&!selfClosers.has(o))return{range:e,changes:{from:l,to:l+(">"===s.doc.sliceString(l,l+1)?1:0),insert:`</${o}>`}}}else if(a&&"/"==n&&"IncompleteCloseTag"==c.name){let e=c.parent;if(c.from==l-2&&"CloseTag"!=(null===(i=e.lastChild)||void 0===i?void 0:i.name)&&(o=elementName(s.doc,e,l))&&!selfClosers.has(o)){let e=l+(">"===s.doc.sliceString(l,l+1)?1:0),t=`${o}>`;return{range:EditorSelection.cursor(l+t.length,-1),changes:{from:l,to:e,insert:t}}}}return{range:e}});return!a.changes.empty&&(e.dispatch([o,s.update(a,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),data=defineLanguageFacet({commentTokens:{block:{open:"\x3c!--",close:"--\x3e"}}}),headingProp=new NodeProp,commonmark$1=parser$3.configure({props:[foldNodeProp.add(e=>!e.is("Block")||e.is("Document")||null!=isHeading(e)||isList(e)?void 0:(e,t)=>({from:t.doc.lineAt(e.from).to,to:e.to})),headingProp.add(isHeading),indentNodeProp.add({Document:()=>null}),languageDataProp.add({Document:data})]});function isHeading(e){let t=/^(?:ATX|Setext)Heading(\d)$/.exec(e.name);return t?+t[1]:void 0}function isList(e){return"OrderedList"==e.name||"BulletList"==e.name}function findSectionEnd(e,t){let r=e;for(;;){let e,n=r.nextSibling;if(!n||null!=(e=isHeading(n.type))&&e<=t)break;r=n}return r.to}const headerIndent=foldService.of((e,t,r)=>{for(let n=syntaxTree(e).resolveInner(r,-1);n&&!(n.from<t);n=n.parent){let e=n.type.prop(headingProp);if(null==e)continue;let t=findSectionEnd(n,e);if(t>r)return{from:r,to:t}}return null});function mkLang(e){return new Language(data,e,[],"markdown")}const commonmarkLanguage=mkLang(commonmark$1),extended=commonmark$1.configure([GFM,Subscript,Superscript,Emoji,{props:[foldNodeProp.add({Table:(e,t)=>({from:t.doc.lineAt(e.from).to,to:e.to})})]}]),markdownLanguage=mkLang(extended);function getCodeParser(e,t){return r=>{if(r&&e){let t=null;if(r=/\S*/.exec(r)[0],t="function"==typeof e?e(r):LanguageDescription.matchLanguageName(e,r,!0),t instanceof LanguageDescription)return t.support?t.support.language.parser:ParseContext.getSkippingParser(t.load());if(t)return t.parser}return t?t.parser:null}}class Context{constructor(e,t,r,n,i,o,s){this.node=e,this.from=t,this.to=r,this.spaceBefore=n,this.spaceAfter=i,this.type=o,this.item=s}blank(e,t=!0){let r=this.spaceBefore+("Blockquote"==this.node.name?">":"");if(null!=e){for(;r.length<e;)r+=" ";return r}for(let n=this.to-this.from-r.length-this.spaceAfter.length;n>0;n--)r+=" ";return r+(t?this.spaceAfter:"")}marker(e,t){let r="OrderedList"==this.node.name?String(+itemNumber(this.item,e)[2]+t):"";return this.spaceBefore+r+this.type+this.spaceAfter}}function getContext(e,t){let r=[],n=[];for(let i=e;i;i=i.parent){if("FencedCode"==i.name)return n;"ListItem"!=i.name&&"Blockquote"!=i.name||r.push(i)}for(let i=r.length-1;i>=0;i--){let e,o=r[i],s=t.lineAt(o.from),a=o.from-s.from;if("Blockquote"==o.name&&(e=/^ *>( ?)/.exec(s.text.slice(a))))n.push(new Context(o,a,a+e[0].length,"",e[1],">",null));else if("ListItem"==o.name&&"OrderedList"==o.parent.name&&(e=/^( *)\d+([.)])( *)/.exec(s.text.slice(a)))){let t=e[3],r=e[0].length;t.length>=4&&(t=t.slice(0,t.length-4),r-=4),n.push(new Context(o.parent,a,a+r,e[1],t,e[2],o))}else if("ListItem"==o.name&&"BulletList"==o.parent.name&&(e=/^( *)([-+*])( {1,4}\[[ xX]\])?( +)/.exec(s.text.slice(a)))){let t=e[4],r=e[0].length;t.length>4&&(t=t.slice(0,t.length-4),r-=4);let i=e[2];e[3]&&(i+=e[3].replace(/[xX]/," ")),n.push(new Context(o.parent,a,a+r,e[1],t,i,o))}}return n}function itemNumber(e,t){return/^(\s*)(\d+)(?=[.)])/.exec(t.sliceString(e.from,e.from+10))}function renumberList(e,t,r,n=0){for(let i=-1,o=e;;){if("ListItem"==o.name){let e=itemNumber(o,t),s=+e[2];if(i>=0){if(s!=i+1)return;r.push({from:o.from+e[1].length,to:o.from+e[0].length,insert:String(i+2+n)})}i=s}let e=o.nextSibling;if(!e)break;o=e}}function normalizeIndent(e,t){let r=/^[ \t]*/.exec(e)[0].length;if(!r||"\t"!=t.facet(indentUnit))return e;let n="";for(let i=countColumn(e,4,r);i>0;)i>=4?(n+="\t",i-=4):(n+=" ",i--);return n+e.slice(r)}const insertNewlineContinueMarkupCommand=(e={})=>({state:t,dispatch:r})=>{let n=syntaxTree(t),{doc:i}=t,o=null,s=t.changeByRange(r=>{if(!r.empty||!markdownLanguage.isActiveAt(t,r.from,-1)&&!markdownLanguage.isActiveAt(t,r.from,1))return o={range:r};let s=r.from,a=i.lineAt(s),l=getContext(n.resolveInner(s,-1),i);for(;l.length&&l[l.length-1].from>s-a.from;)l.pop();if(!l.length)return o={range:r};let c=l[l.length-1];if(c.to-c.spaceAfter.length>s-a.from)return o={range:r};let u=s>=c.to-c.spaceAfter.length&&!/\S/.test(a.text.slice(c.to));if(c.item&&u){let r=c.node.firstChild,n=c.node.getChild("ListItem","ListItem");if(r.to>=s||n&&n.to<s||a.from>0&&!/[^\s>]/.test(i.lineAt(a.from-1).text)||!1===e.nonTightLists){let e,t=l.length>1?l[l.length-2]:null,r="";t&&t.item?(e=a.from+t.from,r=t.marker(i,1)):e=a.from+(t?t.to:0);let n=[{from:e,to:s,insert:r}];return"OrderedList"==c.node.name&&renumberList(c.item,i,n,-2),t&&"OrderedList"==t.node.name&&renumberList(t.item,i,n),{range:EditorSelection.cursor(e+r.length),changes:n}}{let e=blankLine(l,t,a);return{range:EditorSelection.cursor(s+e.length+1),changes:{from:a.from,insert:e+t.lineBreak}}}}if("Blockquote"==c.node.name&&u&&a.from){let e=i.lineAt(a.from-1),n=/>\s*$/.exec(e.text);if(n&&n.index==c.from){let i=t.changes([{from:e.from+n.index,to:e.to},{from:a.from+c.from,to:a.to}]);return{range:r.map(i),changes:i}}}let d=[];"OrderedList"==c.node.name&&renumberList(c.item,i,d);let p=c.item&&c.item.from<a.from,h="";if(!p||/^[\s\d.)\-+*>]*/.exec(a.text)[0].length>=c.to)for(let e=0,t=l.length-1;e<=t;e++)h+=e!=t||p?l[e].blank(e<t?countColumn(a.text,4,l[e+1].from)-h.length:null):l[e].marker(i,1);let f=s;for(;f>a.from&&/\s/.test(a.text.charAt(f-a.from-1));)f--;return h=normalizeIndent(h,t),nonTightList(c.node,t.doc)&&(h=blankLine(l,t,a)+t.lineBreak+h),d.push({from:f,to:s,insert:t.lineBreak+h}),{range:EditorSelection.cursor(f+h.length+1),changes:d}});return!o&&(r(t.update(s,{scrollIntoView:!0,userEvent:"input"})),!0)},insertNewlineContinueMarkup=insertNewlineContinueMarkupCommand();function isMark(e){return"QuoteMark"==e.name||"ListMark"==e.name}function nonTightList(e,t){if("OrderedList"!=e.name&&"BulletList"!=e.name)return!1;let r=e.firstChild,n=e.getChild("ListItem","ListItem");if(!n)return!1;let i=t.lineAt(r.to),o=t.lineAt(n.from),s=/^[\s>]*$/.test(i.text);return i.number+(s?0:1)<o.number}function blankLine(e,t,r){let n="";for(let i=0,o=e.length-2;i<=o;i++)n+=e[i].blank(i<o?countColumn(r.text,4,e[i+1].from)-n.length:null,i<o);return normalizeIndent(n,t)}function contextNodeForDelete(e,t){let r=e.resolveInner(t,-1),n=t;isMark(r)&&(n=r.from,r=r.parent);for(let i;i=r.childBefore(n);)if(isMark(i))n=i.from;else{if("OrderedList"!=i.name&&"BulletList"!=i.name)break;r=i.lastChild,n=r.to}return r}const deleteMarkupBackward=({state:e,dispatch:t})=>{let r=syntaxTree(e),n=null,i=e.changeByRange(t=>{let i=t.from,{doc:o}=e;if(t.empty&&markdownLanguage.isActiveAt(e,t.from)){let t=o.lineAt(i),n=getContext(contextNodeForDelete(r,i),o);if(n.length){let r=n[n.length-1],o=r.to-r.spaceAfter.length+(r.spaceAfter?1:0);if(i-t.from>o&&!/\S/.test(t.text.slice(o,i-t.from)))return{range:EditorSelection.cursor(t.from+o),changes:{from:t.from+o,to:i}};if(i-t.from==o&&(!r.item||t.from<=r.item.from||!/\S/.test(t.text.slice(0,r.to)))){let n=t.from+r.from;if(r.item&&r.node.from<r.item.from&&/\S/.test(t.text.slice(r.from,r.to))){let i=r.blank(countColumn(t.text,4,r.to)-countColumn(t.text,4,r.from));return n==t.from&&(i=normalizeIndent(i,e)),{range:EditorSelection.cursor(n+i.length),changes:{from:n,to:t.from+r.to,insert:i}}}if(n<i)return{range:EditorSelection.cursor(n),changes:{from:n,to:i}}}}}return n={range:t}});return!n&&(t(e.update(i,{scrollIntoView:!0,userEvent:"delete"})),!0)},markdownKeymap=[{key:"Enter",run:insertNewlineContinueMarkup},{key:"Backspace",run:deleteMarkupBackward}],htmlNoMatch=html$2({matchClosingTags:!1});function markdown(e={}){let{codeLanguages:t,defaultCodeLanguage:r,addKeymap:n=!0,base:{parser:i}=commonmarkLanguage,completeHTMLTags:o=!0,pasteURLAsLink:s=!0,htmlTagLanguage:a=htmlNoMatch}=e;if(!(i instanceof MarkdownParser))throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");let l,c=e.extensions?[e.extensions]:[],u=[a.support,headerIndent];s&&u.push(pasteURLAsLink),r instanceof LanguageSupport?(u.push(r.support),l=r.language):r&&(l=r);let d=t||l?getCodeParser(t,l):void 0;c.push(parseCode({codeParser:d,htmlParser:a.language.parser})),n&&u.push(Prec.high(keymap.of(markdownKeymap)));let p=mkLang(i.configure(c));return o&&u.push(p.data.of({autocomplete:htmlTagCompletion})),new LanguageSupport(p,u)}function htmlTagCompletion(e){let{state:t,pos:r}=e,n=/<[:\-\.\w\u00b7-\uffff]*$/.exec(t.sliceDoc(r-25,r));if(!n)return null;let i=syntaxTree(t).resolveInner(r,-1);for(;i&&!i.type.isTop;){if("CodeBlock"==i.name||"FencedCode"==i.name||"ProcessingInstructionBlock"==i.name||"CommentBlock"==i.name||"Link"==i.name||"Image"==i.name)return null;i=i.parent}return{from:r-n[0].length,to:r,options:htmlTagCompletions(),validFor:/^<[:\-\.\w\u00b7-\uffff]*$/}}let _tagCompletions=null;function htmlTagCompletions(){if(_tagCompletions)return _tagCompletions;let e=htmlCompletionSource(new CompletionContext(EditorState.create({extensions:htmlNoMatch}),0,!0));return _tagCompletions=e?e.options:[]}const nonPlainText=/code|horizontalrule|html|link|comment|processing|escape|entity|image|mark|url/i,pasteURLAsLink=EditorView.domEventHandlers({paste:(e,t)=>{var r;let{main:n}=t.state.selection;if(n.empty)return!1;let i=null===(r=e.clipboardData)||void 0===r?void 0:r.getData("text/plain");if(!i||!/^(https?:\/\/|mailto:|xmpp:|www\.)/.test(i))return!1;if(/^www\./.test(i)&&(i="https://"+i),!markdownLanguage.isActiveAt(t.state,n.from,1))return!1;let o=syntaxTree(t.state),s=!1;return o.iterate({from:n.from,to:n.to,enter:e=>{(e.from>n.from||nonPlainText.test(e.name))&&(s=!0)},leave:e=>{e.to<n.to&&(s=!0)}}),!s&&(t.dispatch({changes:[{from:n.from,insert:"["},{from:n.to,insert:`](${i})`}],userEvent:"input.paste",scrollIntoView:!0}),!0)}}),customTags={underline:Tag.define(),monospace:Tag.define(),marked:Tag.define()};function mdInlineFactory({name:e,char:t,tag:r}){const n=e,i=`${e}Mark`,o={resolve:n,mark:i};return{defineNodes:[{name:n,style:{[`${n}/...`]:r}},{name:i,style:tags$1.processingInstruction}],parseInline:[{name:e,parse:(e,r,n)=>r!==t||e.char(n+1)!==t||e.char(n+2)===t?-1:e.addDelimiter(o,n,n+2,!0,!0),after:"Emphasis"}]}}const UnderlineExtension=mdInlineFactory({name:"Underline",char:"+".charCodeAt(0),tag:customTags.underline}),MonospaceExtension=mdInlineFactory({name:"Monospace",char:"#".charCodeAt(0),tag:customTags.monospace}),MarkedExtension=mdInlineFactory({name:"Marked",char:"=".charCodeAt(0),tag:customTags.marked}),yfmNoteTypes=["info","tip","warning","alert"],yfmNoteSnippetTemplate=e=>`{% note ${e} %}\n\n#{}\n\n{% endnote %}\n\n`,yfmNoteSnippets={info:snippet(yfmNoteSnippetTemplate("info")),tip:snippet(yfmNoteSnippetTemplate("tip")),warning:snippet(yfmNoteSnippetTemplate("warning")),alert:snippet(yfmNoteSnippetTemplate("alert"))},yfmCutSnippetTemplate='{% cut "#{title}" %}\n\n#{}\n\n{% endcut %}\n\n',yfmCutSnippet=snippet(yfmCutSnippetTemplate),yfmCutDirectiveSnippetTemplate=":::cut [#{title}]\n#{}\n:::\n\n",yfmCutDirectiveSnippet=snippet(yfmCutDirectiveSnippetTemplate),mdAutocomplete={autocomplete:e=>{const t=e.state.facet(DirectiveSyntaxFacet),r=e.matchBefore(/^.*/);if("only"!==t.option&&r?.text.startsWith("{%"))return{from:r.from,options:[...yfmNoteTypes.map((e,t)=>({label:`{% note ${e}`,displayLabel:capitalize(e),type:"text",section:"YFM Note",apply:yfmNoteSnippets[e],boost:-t})),{label:"{% cut",displayLabel:"YFM Cut",type:"text",apply:t.shouldInsertDirectiveMarkup("yfmCut")?yfmCutDirectiveSnippet:yfmCutSnippet}]};if("disabled"!==t.option&&r?.text.startsWith(":")){const e=[];if("disabled"!==t.valueFor("yfmCut")&&e.push({label:":::cut",displayLabel:"YFM Cut",type:"text",apply:yfmCutDirectiveSnippet}),e.length)return{from:r.from,options:e}}return null}};function yfmLang({languageData:e=[]}={}){const t=markdown({base:markdownLanguage,addKeymap:!0,completeHTMLTags:!1,extensions:[UnderlineExtension,MonospaceExtension,MarkedExtension]});return[t,t.language.data.of(mdAutocomplete),e.map(e=>t.language.data.of(e))]}const gravityHighlightStyle=HighlightStyle.define(defaultHighlightStyle.specs.concat({tag:tags$1.meta,color:"var(--g-color-text-hint)"},{tag:tags$1.link,color:"var(--g-color-text-link)"},{tag:tags$1.url,color:"var(--g-color-text-link-hover)"},{tag:tags$1.contentSeparator,color:"var(--g-color-text-secondary)"},{tag:[tags$1.string,tags$1.deleted],color:"var(--g-color-text-danger)"},{tag:tags$1.escape,color:"var(--g-color-text-danger-heavy)"},{tag:tags$1.typeName,color:"var(--g-color-text-positive-heavy)"},{tag:tags$1.atom,color:"var(--g-color-text-info-heavy)"},{tag:tags$1.labelName,color:"var(--g-color-text-complementary)"},{tag:tags$1.heading,fontWeight:"bold"},{tag:customTags.underline,textDecoration:"underline"},{tag:customTags.monospace,fontFamily:"monospace"},{tag:customTags.marked,color:"marktext",backgroundColor:"mark"})),gravityTheme=EditorView.baseTheme({"&":{overflow:"hidden",height:"100%"},"&.cm-focused":{outline:"none"},".cm-placeholder":{color:"var(--g-color-text-secondary)"},".cm-content":{color:"var(--g-color-text-primary)",caretColor:"currentColor",fontSize:"var(--g-text-code-2-font-size)",fontWeight:"var(--g-text-code-font-weight)",fontFamily:"var(--g-font-family-monospace)",lineHeight:"var(--g-text-code-2-line-height)"},"&.cm-focused .cm-cursor":{borderLeftColor:"currentColor"},"&.cm-focused .cm-selectionBackground, &.cm-focused ::selection":{background:"var(--g-color-base-misc-medium)"},".cm-tooltip.cm-tooltip-autocomplete":{padding:"4px 0",lineHeight:"24px",color:"var(--g-color-text-primary)",fontFamily:"var(--g-font-family-monospace)",fontSize:"var(--g-text-body-1-font-size)",backgroundColor:"var(--g-color-base-float)",border:"1px solid var(--g-color-line-generic-solid)",borderRadius:"4px","& > ul":{"& > completion-section":{color:"var(--g-color-text-hint)",fontWeight:"var(--g-text-accent-font-weight)",borderBottom:"1px solid var(--g-color-line-generic)"},"& > li:hover":{backgroundColor:"var(--g-color-base-simple-hover)"},"& > li[aria-selected]":{backgroundColor:"var(--g-color-base-selection)",color:"revert"}}}});class NodeHandler{next=null;setNext(e){return this.next=e,e}handleNext(e,t){return this.next?this.next.handle(e,t):""}}class TextNodeHandler extends NodeHandler{handle(e,t){return e.nodeType===Node.TEXT_NODE?t.visitText(e):this.handleNext(e,t)}}class LinkHandler extends NodeHandler{handle(e,t){return e.nodeType===Node.ELEMENT_NODE&&"a"===e.tagName.toLowerCase()?t.visitLink(e):this.handleNext(e,t)}}class HeaderHandler extends NodeHandler{handle(e,t){if(e.nodeType!==Node.ELEMENT_NODE)return this.handleNext(e,t);const r=e.tagName.toLowerCase().match(/^h([1-6])$/);if(r){const n=parseInt(r[1],10);return t.visitHeader(e,n)}return this.handleNext(e,t)}}class ParagraphHandler extends NodeHandler{handle(e,t){return e.nodeType!==Node.ELEMENT_NODE?this.handleNext(e,t):"p"===e.tagName.toLowerCase()?t.visitParagraph(e):this.handleNext(e,t)}}class FormattingHandler extends NodeHandler{handle(e,t){if(e.nodeType!==Node.ELEMENT_NODE)return this.handleNext(e,t);const r=e,n=r.tagName.toLowerCase();return["b","strong","i","em","span"].includes(n)&&!["a","code","pre"].includes(r.parentElement?.tagName.toLowerCase()||"")?t.visitFormatting(r):this.handleNext(e,t)}}class CodeHandler extends NodeHandler{handle(e,t){return e.nodeType!==Node.ELEMENT_NODE?this.handleNext(e,t):"code"===e.tagName.toLowerCase()||"pre"===e.tagName.toLowerCase()?t.visitCode(e):this.handleNext(e,t)}}class GenericHandler extends NodeHandler{handle(e,t){return t.visitGeneric(e)}}class OrderedListHandler extends NodeHandler{handle(e,t){return e.nodeType===Node.ELEMENT_NODE&&"ol"===e.tagName.toLowerCase()?Array.from(e.childNodes).filter(e=>e.nodeType===Node.ELEMENT_NODE&&"li"===e.tagName.toLowerCase()).map((e,r)=>`${r+1}. ${t.visitGeneric(e)}`).join("\n")+"\n":this.handleNext(e,t)}}class UnorderedListHandler extends NodeHandler{handle(e,t){return e.nodeType===Node.ELEMENT_NODE&&"ul"===e.tagName.toLowerCase()?Array.from(e.childNodes).filter(e=>e.nodeType===Node.ELEMENT_NODE&&"li"===e.tagName.toLowerCase()).map(e=>`- ${t.visitGeneric(e)}`).join("\n")+"\n":this.handleNext(e,t)}}class DivHandler extends NodeHandler{handle(e,t){return e.nodeType===Node.ELEMENT_NODE&&"div"===e.tagName.toLowerCase()?t.visitDiv(e):this.handleNext(e,t)}}class BrHandler extends NodeHandler{handle(e,t){return e.nodeType===Node.ELEMENT_NODE&&"br"===e.tagName.toLowerCase()?t.visitBr():this.handleNext(e,t)}}class TableRowHandler extends NodeHandler{handle(e,t){return e.nodeType===Node.ELEMENT_NODE&&"tr"===e.tagName.toLowerCase()?t.visitTableRow(e):this.handleNext(e,t)}}class TableHandler extends NodeHandler{handle(e,t){return e.nodeType===Node.ELEMENT_NODE&&"table"===e.tagName.toLowerCase()?t.visitTable(e):this.handleNext(e,t)}}class ImageHandler extends NodeHandler{handle(e,t){return e.nodeType===Node.ELEMENT_NODE&&"img"===e.tagName.toLowerCase()?t.visitImage(e):this.handleNext(e,t)}}function applyFormatting(e,t){let r=e;return("i"===t.tagName.toLowerCase()||"em"===t.tagName.toLowerCase()||"italic"===t.style.fontStyle)&&(r=`*${r}*`),("b"===t.tagName.toLowerCase()||"strong"===t.tagName.toLowerCase()||parseInt(t.style.fontWeight,10)>=600)&&(r=`**${r}**`),r}class MarkdownConverter{handler;constructor(){this.handler=this.setupHandlerChain()}visitText(e){return(e.textContent||"").replace(/\n+/g,"").replace(/([<>])/g,"\\$1")}visitLink(e){const t=this.collectTextContent(e),r=e.href||"";return`[${1===e.childNodes.length&&e.firstChild?.nodeType===Node.TEXT_NODE?applyFormatting(t,e):Array.from(e.childNodes).map(e=>e.nodeType===Node.ELEMENT_NODE?applyFormatting(e.textContent||"",e):e.textContent||"").join("")}](${r} "${t.replace(/"/g,'\\"')}")`}visitHeader(e,t){const r=this.collectTextContent(e);return"#".repeat(t)+" "+r+"\n"}visitParagraph(e){return this.processChildren(e).trim()+"\n\n"}visitFormatting(e){return 1===e.childNodes.length&&e.firstChild?.nodeType===Node.TEXT_NODE?applyFormatting(this.collectTextContent(e),e):applyFormatting(this.visitGeneric(e),e)}visitCode(e){const t=this.collectCodeContent(e);return t.includes("\n")?"```\n"+t+"\n```\n":t.includes("`")?"`` "+t+" ``":`\`${t}\``}visitGeneric(e){return this.processChildren(e)}visitDiv(e){return this.processChildren(e)+"\n"}visitBr(){return"\n"}visitTableRow(e){return"||\n"+Array.from(e.children).map(e=>this.visitGeneric(e).trim()||"").join("\n|\n")+"\n||"}visitTable(e){const t=[];return Array.from(e.querySelectorAll("tr")).forEach(e=>{t.push(this.visitTableRow(e))}),"\n\n#|\n"+t.join("\n")+"\n|#\n\n"}visitImage(e){const t=e;return`![${t.alt||""}](${t.src||""})`}processNode(e){return this.getHandler().handle(e,this)}setupHandlerChain(){const e=new TextNodeHandler,t=new LinkHandler,r=new HeaderHandler,n=new ParagraphHandler,i=new FormattingHandler,o=new CodeHandler,s=new GenericHandler,a=new OrderedListHandler,l=new UnorderedListHandler,c=new DivHandler,u=new BrHandler,d=new TableRowHandler,p=new TableHandler,h=new ImageHandler;return e.setNext(t).setNext(r).setNext(n).setNext(c).setNext(u).setNext(a).setNext(l).setNext(i).setNext(o).setNext(h).setNext(p).setNext(d).setNext(s),e}collectTextContent(e){return"visually-hidden"===e.className?"":e.nodeType===Node.TEXT_NODE?this.visitText(e):Array.from(e.childNodes).map(e=>this.collectTextContent(e)).join("")}collectCodeContent(e){return e.nodeType===Node.TEXT_NODE?e.textContent||"":Array.from(e.childNodes).map(e=>this.collectCodeContent(e)).join("")}processChildren(e){return Array.from(e.childNodes).map(e=>this.processNode(e)).join("")}getHandler(){return this.handler}}const PAIRING_CHARS=new Map([["(",")"],["{","}"],["[","]"],["<",">"],["*","*"],["~","~"],['"','"'],["'","'"],["`","`"]]),PairingCharactersExtension=EditorView.inputHandler.of((e,t,r,n)=>{if(!PAIRING_CHARS.has(n))return!1;const i=e.state.changeByRange(t=>{const r=[{from:t.from,insert:n}];t.empty||r.push({from:t.to,insert:PAIRING_CHARS.get(n)});const i=ChangeSet.of(r,e.state.doc.length);return{changes:i,range:t.map(i,t.empty?1:0)}});return e.dispatch(i,{scrollIntoView:!0}),!0}),basicNormalize="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class SearchCursor{constructor(e,t,r=0,n=e.length,i,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,n),this.bufferStart=r,this.normalize=i?e=>i(basicNormalize(e)):basicNormalize,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=fromCodePoint(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(e);let n=this.normalize(t);if(n.length)for(let i=0,o=r;;i++){let e=n.charCodeAt(i),s=this.match(e,o,this.bufferPos+this.bufferStart);if(i==n.length-1){if(s)return this.value=s,this;break}o==r&&i<t.length&&t.charCodeAt(i)==e&&o++}}}match(e,t,r){let n=null;for(let i=0;i<this.matches.length;i+=2){let t=this.matches[i],o=!1;this.query.charCodeAt(t)==e&&(t==this.query.length-1?n={from:this.matches[i+1],to:r}:(this.matches[i]++,o=!0)),o||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?n={from:t,to:r}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}"undefined"!=typeof Symbol&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(null==/x/.unicode?"":"u");class RegExpCursor{constructor(e,t,r,n=0,i=e.length){if(this.text=e,this.to=i,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new MultilineRegExpCursor(e,t,r,n,i);this.re=new RegExp(t,baseFlags+((null==r?void 0:r.ignoreCase)?"i":"")),this.test=null==r?void 0:r.test,this.iter=e.iter();let o=e.lineAt(n);this.curLineStart=o.from,this.matchPos=toCharEnd(e,n),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,n=r+t[0].length;if(this.matchPos=toCharEnd(this.text,n+(r==n?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<n||r>this.value.to)&&(!this.test||this.test(r,n,t)))return this.value={from:r,to:n,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const flattened=new WeakMap;class FlattenedDoc{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let n=flattened.get(e);if(!n||n.from>=r||n.to<=t){let n=new FlattenedDoc(t,e.sliceString(t,r));return flattened.set(e,n),n}if(n.from==t&&n.to==r)return n;let{text:i,from:o}=n;return o>t&&(i=e.sliceString(t,o)+i,o=t),n.to<r&&(i+=e.sliceString(n.to,r)),flattened.set(e,new FlattenedDoc(o,i)),new FlattenedDoc(t,i.slice(t-o,r-o))}}class MultilineRegExpCursor{constructor(e,t,r,n,i){this.text=e,this.to=i,this.done=!1,this.value=empty,this.matchPos=toCharEnd(e,n),this.re=new RegExp(t,baseFlags+((null==r?void 0:r.ignoreCase)?"i":"")),this.test=null==r?void 0:r.test,this.flat=FlattenedDoc.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let e=this.flat.from+t.index,r=e+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(e,r,t)))return this.value={from:e,to:r,match:t},this.matchPos=toCharEnd(this.text,r+(e==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function validRegExp(e){try{return new RegExp(e,baseFlags),!0}catch(t){return!1}}function toCharEnd(e,t){if(t>=e.length)return t;let r,n=e.lineAt(t);for(;t<n.to&&(r=n.text.charCodeAt(t-n.from))>=56320&&r<57344;)t++;return t}function createLineDialog(e){let t=crelt("input",{class:"cm-textfield",name:"line",value:String(e.state.doc.lineAt(e.state.selection.main.head).number)});function r(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!r)return;let{state:n}=e,i=n.doc.lineAt(n.selection.main.head),[,o,s,a,l]=r,c=a?+a.slice(1):0,u=s?+s:i.number;if(s&&l){let e=u/100;o&&(e=e*("-"==o?-1:1)+i.number/n.doc.lines),u=Math.round(n.doc.lines*e)}else s&&o&&(u=u*("-"==o?-1:1)+i.number);let d=n.doc.line(Math.max(1,Math.min(n.doc.lines,u))),p=EditorSelection.cursor(d.from+Math.max(0,Math.min(c,d.length)));e.dispatch({effects:[dialogEffect.of(!1),EditorView.scrollIntoView(p.from,{y:"center"})],selection:p}),e.focus()}return{dom:crelt("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:dialogEffect.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),r())},onsubmit:e=>{e.preventDefault(),r()}},crelt("label",e.state.phrase("Go to line"),": ",t)," ",crelt("button",{class:"cm-button",type:"submit"},e.state.phrase("go")),crelt("button",{name:"close",onclick:()=>{e.dispatch({effects:dialogEffect.of(!1)}),e.focus()},"aria-label":e.state.phrase("close"),type:"button"},[""]))}}"undefined"!=typeof Symbol&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});const dialogEffect=StateEffect.define(),dialogField=StateField.define({create:()=>!0,update(e,t){for(let r of t.effects)r.is(dialogEffect)&&(e=r.value);return e},provide:e=>showPanel.from(e,e=>e?createLineDialog:null)}),gotoLine=e=>{let t=getPanel(e,createLineDialog);if(!t){let r=[dialogEffect.of(!0)];null==e.state.field(dialogField,!1)&&r.push(StateEffect.appendConfig.of([dialogField,baseTheme$1])),e.dispatch({effects:r}),t=getPanel(e,createLineDialog)}return t&&t.dom.querySelector("input").select(),!0},baseTheme$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),selectWord=({state:e,dispatch:t})=>{let{selection:r}=e,n=EditorSelection.create(r.ranges.map(t=>e.wordAt(t.head)||EditorSelection.cursor(t.head)),r.mainIndex);return!n.eq(r)&&(t(e.update({selection:n})),!0)};function findNextOccurrence(e,t){let{main:r,ranges:n}=e.selection,i=e.wordAt(r.head),o=i&&i.from==r.from&&i.to==r.to;for(let s=!1,a=new SearchCursor(e.doc,t,n[n.length-1].to);;){if(a.next(),!a.done){if(s&&n.some(e=>e.from==a.value.from))continue;if(o){let t=e.wordAt(a.value.from);if(!t||t.from!=a.value.from||t.to!=a.value.to)continue}return a.value}if(s)return null;a=new SearchCursor(e.doc,t,0,Math.max(0,n[n.length-1].from-1)),s=!0}}const selectNextOccurrence=({state:e,dispatch:t})=>{let{ranges:r}=e.selection;if(r.some(e=>e.from===e.to))return selectWord({state:e,dispatch:t});let n=e.sliceDoc(r[0].from,r[0].to);if(e.selection.ranges.some(t=>e.sliceDoc(t.from,t.to)!=n))return!1;let i=findNextOccurrence(e,n);return!!i&&(t(e.update({selection:e.selection.addRange(EditorSelection.range(i.from,i.to),!1),effects:EditorView.scrollIntoView(i.to)})),!0)},searchConfigFacet=Facet.define({combine:e=>combineConfig(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new SearchPanel(e),scrollToMatch:e=>EditorView.scrollIntoView(e)})});function search(e){return e?[searchConfigFacet.of(e),searchExtensions]:searchExtensions}class SearchQuery{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(e,t=0,r){let n=e.doc?e:EditorState.create({doc:e});return null==r&&(r=n.doc.length),this.regexp?regexpCursor(this,n,t,r):stringCursor(this,n,t,r)}}class QueryType{constructor(e){this.spec=e}}function stringCursor(e,t,r,n){return new SearchCursor(t.doc,e.unquoted,r,n,e.caseSensitive?void 0:e=>e.toLowerCase(),e.wholeWord?stringWordTest(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}function stringWordTest(e,t){return(r,n,i,o)=>((o>r||o+i.length<n)&&(o=Math.max(0,r-2),i=e.sliceString(o,Math.min(e.length,n+2))),!(t(charBefore(i,r-o))==CharCategory.Word&&t(charAfter(i,r-o))==CharCategory.Word||t(charAfter(i,n-o))==CharCategory.Word&&t(charBefore(i,n-o))==CharCategory.Word))}class StringQuery extends QueryType{constructor(e){super(e)}nextMatch(e,t,r){let n=stringCursor(this.spec,e,r,e.doc.length).nextOverlapping();if(n.done){let r=Math.min(e.doc.length,t+this.spec.unquoted.length);n=stringCursor(this.spec,e,0,r).nextOverlapping()}return n.done||n.value.from==t&&n.value.to==r?null:n.value}prevMatchInRange(e,t,r){for(let n=r;;){let r=Math.max(t,n-1e4-this.spec.unquoted.length),i=stringCursor(this.spec,e,r,n),o=null;for(;!i.nextOverlapping().done;)o=i.value;if(o)return o;if(r==t)return null;n-=1e4}}prevMatch(e,t,r){let n=this.prevMatchInRange(e,0,t);return n||(n=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),!n||n.from==t&&n.to==r?null:n}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let r=stringCursor(this.spec,e,0,e.doc.length),n=[];for(;!r.next().done;){if(n.length>=t)return null;n.push(r.value)}return n}highlight(e,t,r,n){let i=stringCursor(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!i.next().done;)n(i.value.from,i.value.to)}}function regexpCursor(e,t,r,n){return new RegExpCursor(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?regexpWordTest(t.charCategorizer(t.selection.main.head)):void 0},r,n)}function charBefore(e,t){return e.slice(findClusterBreak(e,t,!1),t)}function charAfter(e,t){return e.slice(t,findClusterBreak(e,t))}function regexpWordTest(e){return(t,r,n)=>!n[0].length||(e(charBefore(n.input,n.index))!=CharCategory.Word||e(charAfter(n.input,n.index))!=CharCategory.Word)&&(e(charAfter(n.input,n.index+n[0].length))!=CharCategory.Word||e(charBefore(n.input,n.index+n[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(e,t,r){let n=regexpCursor(this.spec,e,r,e.doc.length).next();return n.done&&(n=regexpCursor(this.spec,e,0,t).next()),n.done?null:n.value}prevMatchInRange(e,t,r){for(let n=1;;n++){let i=Math.max(t,r-1e4*n),o=regexpCursor(this.spec,e,i,r),s=null;for(;!o.next().done;)s=o.value;if(s&&(i==t||s.from>i+10))return s;if(i==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,r)=>{if("&"==r)return e.match[0];if("$"==r)return"$";for(let n=r.length;n>0;n--){let t=+r.slice(0,n);if(t>0&&t<e.match.length)return e.match[t]+r.slice(n)}return t})}matchAll(e,t){let r=regexpCursor(this.spec,e,0,e.doc.length),n=[];for(;!r.next().done;){if(n.length>=t)return null;n.push(r.value)}return n}highlight(e,t,r,n){let i=regexpCursor(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.doc.length));for(;!i.next().done;)n(i.value.from,i.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel=StateEffect.define(),searchState=StateField.define({create:e=>new SearchState(defaultQuery(e).create(),null),update(e,t){for(let r of t.effects)r.is(setSearchQuery)?e=new SearchState(r.value.create(),e.panel):r.is(togglePanel)&&(e=new SearchState(e.query,r.value?createSearchPanel:null));return e},provide:e=>showPanel.from(e,e=>e.panel)});function getSearchQuery(e){let t=e.field(searchState,!1);return t?t.query.spec:defaultQuery(e)}function searchPanelOpen(e){var t;return null!=(null===(t=e.field(searchState,!1))||void 0===t?void 0:t.panel)}class SearchState{constructor(e,t){this.query=e,this.panel=t}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(searchState))}update(e){let t=e.state.field(searchState);(t!=e.startState.field(searchState)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return Decoration.none;let{view:r}=this,n=new RangeSetBuilder;for(let i=0,o=r.visibleRanges,s=o.length;i<s;i++){let{from:t,to:a}=o[i];for(;i<s-1&&a>o[i+1].from-500;)a=o[++i].to;e.highlight(r.state,t,a,(e,t)=>{let i=r.state.selection.ranges.some(r=>r.from==e&&r.to==t);n.add(e,t,i?selectedMatchMark:matchMark)})}return n.finish()}},{decorations:e=>e.decorations});function searchCommand(e){return t=>{let r=t.state.field(searchState,!1);return r&&r.query.spec.valid?e(t,r):openSearchPanel(t)}}const findNext=searchCommand((e,{query:t})=>{let{to:r}=e.state.selection.main,n=t.nextMatch(e.state,r,r);if(!n)return!1;let i=EditorSelection.single(n.from,n.to),o=e.state.facet(searchConfigFacet);return e.dispatch({selection:i,effects:[announceMatch(e,n),o.scrollToMatch(i.main,e)],userEvent:"select.search"}),selectSearchInput(e),!0}),findPrevious=searchCommand((e,{query:t})=>{let{state:r}=e,{from:n}=r.selection.main,i=t.prevMatch(r,n,n);if(!i)return!1;let o=EditorSelection.single(i.from,i.to),s=e.state.facet(searchConfigFacet);return e.dispatch({selection:o,effects:[announceMatch(e,i),s.scrollToMatch(o.main,e)],userEvent:"select.search"}),selectSearchInput(e),!0}),selectMatches=searchCommand((e,{query:t})=>{let r=t.matchAll(e.state,1e3);return!(!r||!r.length||(e.dispatch({selection:EditorSelection.create(r.map(e=>EditorSelection.range(e.from,e.to))),userEvent:"select.search.matches"}),0))}),selectSelectionMatches=({state:e,dispatch:t})=>{let r=e.selection;if(r.ranges.length>1||r.main.empty)return!1;let{from:n,to:i}=r.main,o=[],s=0;for(let a=new SearchCursor(e.doc,e.sliceDoc(n,i));!a.next().done;){if(o.length>1e3)return!1;a.value.from==n&&(s=o.length),o.push(EditorSelection.range(a.value.from,a.value.to))}return t(e.update({selection:EditorSelection.create(o,s),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((e,{query:t})=>{let{state:r}=e,{from:n,to:i}=r.selection.main;if(r.readOnly)return!1;let o=t.nextMatch(r,n,n);if(!o)return!1;let s,a,l=o,c=[],u=[];l.from==n&&l.to==i&&(a=r.toText(t.getReplacement(l)),c.push({from:l.from,to:l.to,insert:a}),l=t.nextMatch(r,l.from,l.to),u.push(EditorView.announce.of(r.phrase("replaced match on line $",r.doc.lineAt(n).number)+".")));let d=e.state.changes(c);return l&&(s=EditorSelection.single(l.from,l.to).map(d),u.push(announceMatch(e,l)),u.push(r.facet(searchConfigFacet).scrollToMatch(s.main,e))),e.dispatch({changes:d,selection:s,effects:u,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((e,{query:t})=>{if(e.state.readOnly)return!1;let r=t.matchAll(e.state,1e9).map(e=>{let{from:r,to:n}=e;return{from:r,to:n,insert:t.getReplacement(e)}});if(!r.length)return!1;let n=e.state.phrase("replaced $ matches",r.length)+".";return e.dispatch({changes:r,effects:EditorView.announce.of(n),userEvent:"input.replace.all"}),!0});function createSearchPanel(e){return e.state.facet(searchConfigFacet).createPanel(e)}function defaultQuery(e,t){var r,n,i,o,s;let a=e.selection.main,l=a.empty||a.to>a.from+100?"":e.sliceDoc(a.from,a.to);if(t&&!l)return t;let c=e.facet(searchConfigFacet);return new SearchQuery({search:(null!==(r=null==t?void 0:t.literal)&&void 0!==r?r:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!==(n=null==t?void 0:t.caseSensitive)&&void 0!==n?n:c.caseSensitive,literal:null!==(i=null==t?void 0:t.literal)&&void 0!==i?i:c.literal,regexp:null!==(o=null==t?void 0:t.regexp)&&void 0!==o?o:c.regexp,wholeWord:null!==(s=null==t?void 0:t.wholeWord)&&void 0!==s?s:c.wholeWord})}function getSearchInput(e){let t=getPanel(e,createSearchPanel);return t&&t.dom.querySelector("[main-field]")}function selectSearchInput(e){let t=getSearchInput(e);t&&t==e.root.activeElement&&t.select()}const openSearchPanel=e=>{let t=e.state.field(searchState,!1);if(t&&t.panel){let r=getSearchInput(e);if(r&&r!=e.root.activeElement){let n=defaultQuery(e.state,t.query.spec);n.valid&&e.dispatch({effects:setSearchQuery.of(n)}),r.focus(),r.select()}}else e.dispatch({effects:[togglePanel.of(!0),t?setSearchQuery.of(defaultQuery(e.state,t.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=e=>{let t=e.state.field(searchState,!1);if(!t||!t.panel)return!1;let r=getPanel(e,createSearchPanel);return r&&r.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:togglePanel.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Mod-Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor(e){this.view=e;let t=this.query=e.state.field(searchState).query.spec;function r(e,t,r){return crelt("button",{class:"cm-button",name:e,onclick:t,type:"button"},r)}this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:t.search,placeholder:phrase(e,"Find"),"aria-label":phrase(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:t.replace,placeholder:phrase(e,"Replace"),"aria-label":phrase(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit}),this.dom=crelt("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,r("next",()=>findNext(e),[phrase(e,"next")]),r("prev",()=>findPrevious(e),[phrase(e,"previous")]),r("select",()=>selectMatches(e),[phrase(e,"all")]),crelt("label",null,[this.caseField,phrase(e,"match case")]),crelt("label",null,[this.reField,phrase(e,"regexp")]),crelt("label",null,[this.wordField,phrase(e,"by word")]),...e.state.readOnly?[]:[crelt("br"),this.replaceField,r("replace",()=>replaceNext(e),[phrase(e,"replace")]),r("replaceAll",()=>replaceAll(e),[phrase(e,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(e),"aria-label":phrase(e,"close"),type:"button"},[""])])}commit(){let e=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:setSearchQuery.of(e)}))}keydown(e){runScopeHandlers(this.view,e,"search-panel")?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?findPrevious:findNext)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),replaceNext(this.view))}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(setSearchQuery)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(e,t){return e.state.phrase(t)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(e,{from:t,to:r}){let n=e.state.doc.lineAt(t),i=e.state.doc.lineAt(r).to,o=Math.max(n.from,t-AnnounceMargin),s=Math.min(i,r+AnnounceMargin),a=e.state.sliceDoc(o,s);if(o!=n.from)for(let l=0;l<AnnounceMargin;l++)if(!Break.test(a[l+1])&&Break.test(a[l])){a=a.slice(l);break}if(s!=i)for(let l=a.length-1;l>a.length-AnnounceMargin;l--)if(!Break.test(a[l-1])&&Break.test(a[l])){a=a.slice(0,l);break}return EditorView.announce.of(`${e.state.phrase("current match")}. ${a} ${e.state.phrase("on line")} ${n.number}.`)}const baseTheme=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.low(searchHighlighter),baseTheme],title$1="Search in code",action_replace$1="Replace",action_replace_all$1="Replace all",replace_placeholder$1="Replacement text",en$7={"label_case-sensitive":"Case sensitive","label_whole-word":"Whole word",title:title$1,action_replace:action_replace$1,action_replace_all:action_replace_all$1,replace_placeholder:replace_placeholder$1},title="  ",action_replace="",action_replace_all=" ",replace_placeholder=" ",ru$7={"label_case-sensitive":"  ","label_whole-word":" ",title:title,action_replace:action_replace,action_replace_all:action_replace_all,replace_placeholder:replace_placeholder},KEYSET$7="search",i18n$6=registerKeyset(KEYSET$7,{en:en$7,ru:ru$7}),ReplaceIcon=e=>jsxRuntimeExports.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",width:14,height:14,...e,children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.221 3.739l2.261 2.269L7.7 3.784l-.7-.7-1.012 1.007-.008-1.6a.523.523 0 0 1 .5-.526H8V1H6.48A1.482 1.482 0 0 0 5 2.489V4.1L3.927 3.033l-.706.706zm6.67 1.794h.01c.183.311.451.467.806.467.393 0 .706-.168.94-.503.236-.335.353-.78.353-1.333 0-.511-.1-.913-.301-1.207-.201-.295-.488-.442-.86-.442-.405 0-.718.194-.938.581h-.01V1H9v4.919h.89v-.386zm-.015-1.061v-.34c0-.248.058-.448.175-.601a.54.54 0 0 1 .445-.23.49.49 0 0 1 .436.233c.104.154.155.368.155.643 0 .33-.056.587-.169.768a.524.524 0 0 1-.47.27.495.495 0 0 1-.411-.211.853.853 0 0 1-.16-.532zM9 12.769c-.256.154-.625.231-1.108.231-.563 0-1.02-.178-1.369-.533-.349-.355-.523-.813-.523-1.374 0-.648.186-1.158.56-1.53.374-.376.875-.563 1.5-.563.433 0 .746.06.94.179v.998a1.26 1.26 0 0 0-.792-.276c-.325 0-.583.1-.774.298-.19.196-.283.468-.283.816 0 .338.09.603.272.797.182.191.431.287.749.287.282 0 .558-.092.828-.276v.946zM4 7L3 8v6l1 1h7l1-1V8l-1-1H4zm0 1h7v6H4V8z"})}),ReplaceAllIcon=e=>jsxRuntimeExports.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",width:14,height:14,...e,children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.6 2.677c.147-.31.356-.465.626-.465.248 0 .44.118.573.353.134.236.201.557.201.966 0 .443-.078.798-.235 1.067-.156.268-.365.402-.627.402-.237 0-.416-.125-.537-.374h-.008v.31H11V1h.593v1.677h.008zm-.016 1.1a.78.78 0 0 0 .107.426c.071.113.163.169.274.169.136 0 .24-.072.314-.216.075-.145.113-.35.113-.615 0-.22-.035-.39-.104-.514-.067-.124-.164-.187-.29-.187-.12 0-.219.062-.297.185a.886.886 0 0 0-.117.48v.272zM4.12 7.695L2 5.568l.662-.662 1.006 1v-1.51A1.39 1.39 0 0 1 5.055 3H7.4v.905H5.055a.49.49 0 0 0-.468.493l.007 1.5.949-.944.656.656-2.08 2.085zM9.356 4.93H10V3.22C10 2.408 9.685 2 9.056 2c-.135 0-.285.024-.45.073a1.444 1.444 0 0 0-.388.167v.665c.237-.203.487-.304.75-.304.261 0 .392.156.392.469l-.6.103c-.506.086-.76.406-.76.961 0 .263.061.473.183.631A.61.61 0 0 0 8.69 5c.29 0 .509-.16.657-.48h.009v.41zm.004-1.355v.193a.75.75 0 0 1-.12.436.368.368 0 0 1-.313.17.276.276 0 0 1-.22-.095.38.38 0 0 1-.08-.248c0-.222.11-.351.332-.389l.4-.067zM7 12.93h-.644v-.41h-.009c-.148.32-.367.48-.657.48a.61.61 0 0 1-.507-.235c-.122-.158-.183-.368-.183-.63 0-.556.254-.876.76-.962l.6-.103c0-.313-.13-.47-.392-.47-.263 0-.513.102-.75.305v-.665c.095-.063.224-.119.388-.167.165-.049.315-.073.45-.073.63 0 .944.407.944 1.22v1.71zm-.64-1.162v-.193l-.4.068c-.222.037-.333.166-.333.388 0 .1.027.183.08.248a.276.276 0 0 0 .22.095.368.368 0 0 0 .312-.17c.08-.116.12-.26.12-.436zM9.262 13c.321 0 .568-.058.738-.173v-.71a.9.9 0 0 1-.552.207.619.619 0 0 1-.5-.215c-.12-.145-.181-.345-.181-.598 0-.26.063-.464.189-.612a.644.644 0 0 1 .516-.223c.194 0 .37.069.528.207v-.749c-.129-.09-.338-.134-.626-.134-.417 0-.751.14-1.001.422-.249.28-.373.662-.373 1.148 0 .42.116.764.349 1.03.232.267.537.4.913.4zM2 9l1-1h9l1 1v5l-1 1H3l-1-1V9zm1 0v5h9V9H3zm3-2l1-1h7l1 1v5l-1 1V7H6z"})}),b$e=cn("search-card"),noop$3=()=>{},inverse=e=>!e,SearchCard=({initial:e,onChange:t=noop$3,onClose:r=noop$3,onSearchPrev:n=noop$3,onSearchNext:i=noop$3,onReplaceNext:o=noop$3,onReplaceAll:s=noop$3,onConfigChange:a=noop$3})=>{const[l,c]=reactExports.useState(e.search),[u,d]=reactExports.useState(e.caseSensitive),[p,h]=reactExports.useState(e.wholeWord),[f,m]=reactExports.useState(""),g=reactExports.useRef(null),b=()=>{g.current?.focus()},y=()=>{i(l),b()},T=enterKeyHandler(y);return jsxRuntimeExports.jsxs(Card,{className:b$e(),children:[jsxRuntimeExports.jsxs("div",{className:b$e("header"),children:[jsxRuntimeExports.jsxs("span",{className:b$e("title"),children:[" ",i18n$6("title")]}),jsxRuntimeExports.jsx(Button,{onClick:()=>{c(""),r(l),b()},size:"s",view:"flat",children:jsxRuntimeExports.jsx(Icon,{data:Xmark,size:14})})]}),jsxRuntimeExports.jsx(TextInput,{controlRef:g,className:sp({mb:2}),size:"s",autoFocus:!0,onKeyPress:T,onUpdate:e=>{c(e),t(e)},value:l,endContent:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{onClick:()=>{n(l),b()},pin:"round-brick",children:jsxRuntimeExports.jsx(Icon,{data:ChevronUp,size:12})}),jsxRuntimeExports.jsx(Button,{onClick:y,pin:"brick-round",children:jsxRuntimeExports.jsx(Icon,{data:ChevronDown,size:12})})]})}),jsxRuntimeExports.jsx(TextInput,{placeholder:i18n$6("replace_placeholder"),className:sp({mb:2}),size:"s",onUpdate:m,value:f,endContent:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{size:"s",onClick:()=>{o(l,f),b()},pin:"round-brick",disabled:!l,title:i18n$6("action_replace"),children:jsxRuntimeExports.jsx(ReplaceIcon,{width:12,height:12})}),jsxRuntimeExports.jsx(Button,{size:"s",onClick:()=>{s(l,f),b()},pin:"brick-round",disabled:!l,title:i18n$6("action_replace_all"),children:jsxRuntimeExports.jsx(ReplaceAllIcon,{width:12,height:12})})]})}),jsxRuntimeExports.jsx(Checkbox$1,{size:"m",onUpdate:()=>{a({caseSensitive:!u,wholeWord:p}),d(inverse),b()},checked:u,className:sp({mr:4}),children:i18n$6("label_case-sensitive")}),jsxRuntimeExports.jsx(Checkbox$1,{size:"m",onUpdate:()=>{a({caseSensitive:u,wholeWord:!p}),h(inverse),b()},checked:p,children:i18n$6("label_whole-word")})]})},SearchPopup=({open:e,anchor:t,...r})=>jsxRuntimeExports.jsx(Popup,{open:e,anchorElement:t,placement:"bottom-end",onOpenChange:(e,t,n)=>{"escape-key"===n&&r.onClose()},children:jsxRuntimeExports.jsx(SearchCard,{...r})});function renderSearchPopup({anchor:e,...t}){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e&&jsxRuntimeExports.jsx(SearchPopup,{anchor:e,...t})})}SearchPopup.displayName="SearchPopup";const INPUT_DELAY=200,SearchPanelPlugin=e=>ViewPlugin.fromClass(class{view;params;anchor;renderer;searchConfig={search:"",caseSensitive:!1,wholeWord:!1,replace:""};receiver;setViewSearchWithDelay;constructor(t){this.view=t,this.anchor=null,this.renderer=null,this.params=e,this.receiver=e.receiver,this.handleClose=this.handleClose.bind(this),this.handleChange=this.handleChange.bind(this),this.handleSearchNext=this.handleSearchNext.bind(this),this.handleSearchPrev=this.handleSearchPrev.bind(this),this.handleReplaceNext=this.handleReplaceNext.bind(this),this.handleReplaceAll=this.handleReplaceAll.bind(this),this.handleSearchConfigChange=this.handleSearchConfigChange.bind(this),this.handleEditorModeChange=this.handleEditorModeChange.bind(this),this.setViewSearchWithDelay=debounce(this.setViewSearch,this.params.inputDelay??INPUT_DELAY),this.receiver?.on("change-editor-mode",this.handleEditorModeChange)}update(e){const t=searchPanelOpen(e.state);if(t&&!this.renderer){const t=getSearchQuery(e.state);this.anchor=document.querySelector(this.params.anchorSelector),this.renderer=this.view.state.facet(ReactRendererFacet).createItem("cm-search",()=>renderSearchPopup({initial:t,open:!0,anchor:this.anchor,onChange:this.handleChange,onClose:this.handleClose,onSearchNext:this.handleSearchNext,onSearchPrev:this.handleSearchPrev,onReplaceNext:this.handleReplaceNext,onReplaceAll:this.handleReplaceAll,onConfigChange:this.handleSearchConfigChange}))}else!t&&this.renderer&&(this.renderer?.remove(),this.renderer=null)}destroy(){this.renderer?.remove(),this.renderer=null,this.receiver?.off("change-editor-mode",this.handleEditorModeChange)}setViewSearch(e){this.searchConfig={...this.searchConfig,...e};const t=new SearchQuery({...this.searchConfig});this.view.dispatch({effects:setSearchQuery.of(t)})}handleEditorModeChange({mode:e}){"wysiwyg"===e&&closeSearchPanel(this.view)}handleChange(e){this.setViewSearchWithDelay({search:e})}handleClose(){this.setViewSearch({search:""}),closeSearchPanel(this.view)}handleSearchNext(){findNext(this.view)}handleSearchPrev(){findPrevious(this.view)}handleSearchConfigChange(e){this.setViewSearch(e)}handleReplaceNext(e,t){this.setViewSearch({search:e,replace:t}),replaceNext(this.view)}handleReplaceAll(e,t){this.setViewSearch({search:e,replace:t}),replaceAll(this.view)}},{provide:()=>[keymap.of(searchKeymap),search({createPanel:()=>({dom:document.createElement("div")})})]});function parseMarkers(e){const t=[];let r=0;for(;r<e.length;)if(r+3<e.length&&" "===e[r]&&" "===e[r+1]&&" "===e[r+2]&&" "===e[r+3])t.push("    "),r+=4;else{if(/^\d{1,6}\. /.test(e.slice(r))){const n=e.slice(r).match(/^(\d{1,6}\. )/);if(n){t.push(n[1]),r+=n[1].length;continue}}if((">"===e[r]||"-"===e[r]||"*"===e[r]||"+"===e[r])&&r+1<e.length&&" "===e[r+1])t.push(e[r]+" "),r+=2;else{if(" "!==e[r])break;t.push(" "),r+=1}}return t}function smartReindent(e,t){if(0===t.length)return e;const r=parseMarkers(t);if(0===r.length)return e;const n=r.map(e=>e.match(/^\d{1,6}\. |-|\*|\+/)?" ".repeat(e.length):e).join("");return e.split("\n").map((e,t)=>0===t?e:n+e).join("\n")}const linkRegex=/\[[\s\S]*?]\([\s\S]*?\)/g;function createCodemirror(e){const{logger:t,doc:r,reactRenderer:n,onCancel:i,onScroll:o,onSubmit:s,onChange:a,onDocChange:l,disabledExtensions:c={},keymaps:u=[],receiver:d,yfmLangOptions:p,extensions:h,placeholder:f,autocompletion:m,parseHtmlOnPaste:g,parseInsertedUrlAsImage:b,directiveSyntax:y,preserveEmptyRows:T,searchPanel:E=!0}=e,O=[gravityTheme,placeholder(f)];c.history||O.push(history$2());const S=new InputState$1;return O.push(syntaxHighlighting(gravityHighlightStyle),LoggerFacet.of(t),keymap.of([{key:formatter.toCM(Action.Bold),run:withLogger(ActionName.bold,toggleBold)},{key:formatter.toCM(Action.Italic),run:withLogger(ActionName.italic,toggleItalic)},{key:formatter.toCM(Action.Strike),run:withLogger(ActionName.strike,toggleStrikethrough)},{key:formatter.toCM(Action.Underline),run:withLogger(ActionName.underline,toggleUnderline)},{key:formatter.toCM(Action.Link),run:withLogger(ActionName.link,insertLink)},{key:formatter.toCM(Action.Heading1),run:withLogger(ActionName.heading1,toH1)},{key:formatter.toCM(Action.Heading2),run:withLogger(ActionName.heading2,toH2)},{key:formatter.toCM(Action.Heading3),run:withLogger(ActionName.heading3,toH3)},{key:formatter.toCM(Action.Heading4),run:withLogger(ActionName.heading4,toH4)},{key:formatter.toCM(Action.Heading5),run:withLogger(ActionName.heading5,toH5)},{key:formatter.toCM(Action.Heading6),run:withLogger(ActionName.heading6,toH6)},{key:formatter.toCM(Action.Code),run:withLogger(ActionName.code_inline,wrapToInlineCode)},{key:formatter.toCM(Action.CodeBlock),run:withLogger(ActionName.code_block,wrapToCodeBlock)},{key:formatter.toCM(Action.Cut),run:withLogger(ActionName.yfm_cut,wrapToYfmCut)},{key:formatter.toCM(Action.Note),run:withLogger(ActionName.yfm_note,wrapToYfmNote)},{key:formatter.toCM(Action.Cancel),preventDefault:!0,run:()=>(i(),!0)},{key:formatter.toCM(Action.Submit),preventDefault:!0,run:()=>(s(),!0)},{key:"Tab",preventDefault:!0,run:insertTab},{key:"Enter",shift:insertNewlineKeepIndent},indentWithTab,...defaultKeymap,...c.history?[]:historyKeymap,...u]),autocompletion(m),yfmLang(p),ReactRendererFacet.of(n),DirectiveSyntaxFacet.of(y),PairingCharactersExtension,EditorView.lineWrapping,EditorView.contentAttributes.of({spellcheck:"true"}),EditorView.domEventHandlers({scroll(e){o(e)},keydown(e){S.keydown(e)},keyup(e){S.keyup(e)},paste(e,r){if(!e.clipboardData)return!1;const n=t.nested({domEvent:"paste",dataTypes:e.clipboardData.types}),{from:i}=r.state.selection.main,o=r.state.doc.lineAt(i),s=o.text,a=e.clipboardData.getData(DataTransferType$1.Yfm);if(a){e.preventDefault(),t.event({event:"paste-markup"});const n=smartReindent(a,s);return r.dispatch(r.state.replaceSelection(n)),!0}const l=shouldSkipHtmlConversion(e.clipboardData),c=e.clipboardData.getData(DataTransferType$1.Html);if(c&&g&&!l){let i;try{const e=(new DOMParser).parseFromString(c,"text/html");i=(new MarkdownConverter).processNode(e.body).trim()}catch(p){n.error(p,{event:"parse-html-to-md"}),globalLogger.error(p)}if(void 0!==i){e.preventDefault(),t.event({event:"paste-parsed-html"});const n=smartReindent(i,s);return r.dispatch(r.state.replaceSelection(n)),!0}}if(!S.shiftKey&&b){const n=s.matchAll(linkRegex),a=i-o.from;if(!n.some(e=>a>=e.index&&a<=e.index+(e[0]?.length??0))){const{imageUrl:n,title:i}=b(e.clipboardData.getData(DataTransferType$1.Text)??"")||{};if(n)return e.preventDefault(),t.event({event:"paste-url-as-image"}),insertImages([{url:n,alt:i,title:i}])(r),!0}}const u=e.clipboardData.getData(DataTransferType$1.Text),d=smartReindent(u,s);return u!==d&&(r.dispatch(r.state.replaceSelection(d)),e.preventDefault(),!0)}})),E&&O.push(SearchPanelPlugin({anchorSelector:".g-md-search-anchor",receiver:d})),T&&O.push(keymap.of([{key:formatter.toCM(Action.EmptyRow),run:withLogger(ActionName.emptyRow,insertEmptyRow)}])),e.uploadHandler&&O.push(FileUploadHandlerFacet.of({fn:e.uploadHandler,imageWithDimensions:e.needImageDimensions,enableNewImageSizeCalculation:e.enableNewImageSizeCalculation})),h&&O.push(...h),new EditorView({doc:r,extensions:O,dispatchTransactions:(e,t)=>{t.update(e),a(),e.some(e=>e.docChanged)&&l()}})}function withLogger(e,t){return(...r)=>{const{state:n}=r[0];return n.facet(LoggerFacet).action({source:"keymap",action:e}),globalLogger.action({mode:"markup",source:"keymap",action:e}),t(...r)}}class Editor{#H;get cm(){return this.#H}get codemirror(){return this.#H}constructor(e){this.#H=e}focus(){return this.#H.focus()}hasFocus(){return this.#H.hasFocus}getValue(){return this.#H.state.doc.toString()}isEmpty(){return 1===this.#H.state.doc.lines&&0===this.#H.state.doc.line(1).text.trim().length}clear(){this.replace("")}replace(e){this.#H.dispatch({changes:{from:0,to:this.#H.state.doc.length,insert:e}})}prepend(e){const t=this.#H.state.changes({from:0,insert:this._fixMarkupBeforeInsert(e)});this.#H.dispatch({changes:t,selection:this.#H.state.selection.map(t,1)})}append(e){if(this.isEmpty())return this.#H.dispatch({changes:{from:0,insert:this._fixMarkupBeforeInsert(e)}}),void this.moveCursor("end");const{lineBreak:t}=this.#H.state;let r;const{doc:n,doc:{lines:i}}=this.#H.state;r=i>=2&&0===n.lineAt(i).length?0===n.lineAt(i-1).length?e:t+e:t+t+e,this.#H.dispatch({changes:{from:n.length,insert:r}})}moveCursor(e){let t;switch(e){case"start":t=0;break;case"end":t=this.#H.state.doc.length;break;default:throw new Error('The "position" argument must be "start" or "end"')}this.#H.dispatch({selection:{anchor:t}})}_fixMarkupBeforeInsert(e){return e.endsWith("\n\n")?e:e.endsWith("\n")?e+"\n":e+"\n\n"}}ToolbarDataType.SingleButton;const DecoClassName="pm-command-input",en$6={"error-title":"Error","error-desc":"Error loading","empty-msg":"Not found"},ru$6={"error-title":"","error-desc":"  ","empty-msg":" "},KEYSET$6="suggest",i18n$5=registerKeyset(KEYSET$6,{en:en$6,ru:ru$6}),b$d=cn("command-menu"),placement$3=["bottom-start","top-start","bottom-end","top-end"],ITEM_HEIGHT=28,VISIBLE_ITEMS_COUNT=10,MAX_LIST_HEIGHT=ITEM_HEIGHT*VISIBLE_ITEMS_COUNT;function calcListHeight(e){if(!(e<=0))return Math.min(MAX_LIST_HEIGHT,e*ITEM_HEIGHT)}const CommandMenuComponent=({anchorElement:e,currentIndex:t,items:r,onItemClick:n,onOpenChange:i})=>e?jsxRuntimeExports.jsx(Popup,{open:!0,anchorElement:e,placement:placement$3,onOpenChange:i,qa:"g-md-toolbar-command-menu",children:jsxRuntimeExports.jsx("div",{className:b$d(),children:jsxRuntimeExports.jsx(List,{virtualized:!0,items:r,sortable:!1,filterable:!1,emptyPlaceholder:i18n$5("empty-msg"),itemHeight:ITEM_HEIGHT,itemsHeight:calcListHeight(r.length),renderItem:renderItem,deactivateOnLeave:!1,activeItemIndex:t,onItemClick:(e,t)=>n(t),className:b$d("list"),itemClassName:b$d("list-item")})})}):null;function renderItem({id:e,title:t,icon:r,hotkey:n,hint:i,preview:o}){const s=isFunction$1(t)?t():t,a=isFunction$1(i)?i():i;return jsxRuntimeExports.jsx(PreviewTooltip,{preview:o,children:jsxRuntimeExports.jsxs("div",{className:b$d("item",{id:e}),children:[jsxRuntimeExports.jsx(Icon,{data:r.data,size:20,className:b$d("item-icon")}),jsxRuntimeExports.jsxs("div",{className:b$d("item-body"),children:[jsxRuntimeExports.jsx("span",{className:b$d("item-title"),children:s}),jsxRuntimeExports.jsxs("div",{className:b$d("item-extra"),children:[n&&jsxRuntimeExports.jsx(Hotkey,{value:n,className:b$d("item-hotkey")}),a&&jsxRuntimeExports.jsx(HelpMark,{className:b$d("item-hint"),children:a})]})]})]},e)})}function render(e){return jsxRuntimeExports.jsx(ErrorLoggerBoundary,{children:jsxRuntimeExports.jsx(CommandMenuComponent,{...e})})}function findDecoElem(e){const t=e??document;return t.getElementsByClassName(DecoClassName).item(0)??t.getElementsByClassName(AutocompleteDecoClassName).item(0)}class CommandHandler{#t;#i;#Q;#z;#V;#r;#U=null;#W;#Y;#X;#Z;constructor({logger:e,actions:t,storage:r,nodesIgnoreList:n=[]}){this.#t=e,this.#i=t,this.#Q=r,this.#z=n}onOpen(e){return this.findAnchor(),!this.#U||this.shouldIgnore(e)?(this.closeAutocomplete(e.view),!0):(this.#Y=new AutocompletePopupCloser(e.view),this.updateState(e),this.filterActions(),this.render(),!0)}onFilter(e){if(this.shouldIgnore(e)||e.filter?.endsWith("  "))return this.closeAutocomplete(e.view),!0;this.updateState(e),this.#W=e.filter?.trim().toLowerCase();const t=this.filterActions();return this.render(),t&&this.closeAutocomplete(e.view),!0}onArrow(e){if(this.shouldIgnore(e))return closeAutocomplete(e.view),!0;if(this.updateState(e),!this.#V)return!1;switch(e.kind){case ActionKind.up:this.#V.prev();break;case ActionKind.down:this.#V.next();break;default:return!1}return this.render(),!0}onEnter(e){return this.shouldIgnore(e)?(closeAutocomplete(e.view),!0):(this.updateState(e),this.select(),!0)}onClose(e){return this.updateState(e),this.clear(),!0}onDestroy(){this.clear()}closeAutocomplete(e){setTimeout(()=>{closeAutocomplete(e)})}shouldIgnore(e){const t=e.view.state.doc.resolve(e.range.from).parent.type;return!1===t.spec.commandMenu||this.#z.includes(t.name)}select(){if(!this.#r)return;const e=this.#V?.currentItem;if(!e)return;const t=getAutocompleteState(this.#r.state);if(!t||!t.active)return;const r=this.#r,{range:n}=t;r.dispatch(r.state.tr.deleteRange(n.from,n.to).scrollIntoView()),e.exec(this.#Q),r.focus(),globalLogger.action({mode:"wysiwyg",source:"command-menu",action:e.id}),this.#t.action({source:"command-menu",action:e.id})}filterActions(){const e=this.#V?.currentItem,t=this.#W,r=this.#i.filter(e=>e.isEnable(this.#Q));let n=r,i=!1;if(t&&(n=filterActions(r,t),i=!n.length&&needToHide(r,t)),this.#V=new ArrayCarousel(n),e){const t=this.#V.array.findIndex(t=>t===e);-1!==t&&(this.#V.currentIndex=t)}return i}render(){this.findAnchor();const e=this.#V?.array??[];this.#X={anchorElement:this.#U,currentIndex:this.#V?.currentIndex,items:e,onItemClick:this.onItemClick,onOpenChange:this.#Y?.popupOpenChangeHandler},this.#Z=this.#Z??this.createMenuRenderItem(),this.#Z.rerender()}onItemClick=e=>{this.#V&&(this.#V.currentIndex=e,this.select()),this.#r?.focus()};updateState({view:e}){this.#r=e}clear(){this.#r=void 0,this.#U=null,this.#W=void 0,this.#V=void 0,this.#Y?.cancelTimer(),this.#Y=void 0,this.#X=void 0,this.#Z?.remove(),this.#Z=void 0}createMenuRenderItem(){return getReactRendererFromState(this.#r.state).createItem("command_menu",()=>this.#X?render(this.#X):null)}findAnchor(){this.#U=findDecoElem(this.#r?.dom)}}function filterActions(e,t){return e.filter(e=>{const r=t.toLowerCase(),n=e.id.toLowerCase().includes(r),i=(isFunction$1(e.title)?e.title():e.title).toLowerCase().includes(r),o=e.aliases?.some(e=>e.toLowerCase().includes(r))??!1;return n||i||o})}const CHARS_TO_HIDE=4;function needToHide(e,t){let r=1;do{if(filterActions(e,t.slice(0,t.length-r)).length)break;r++}while(r<t.length&&r<CHARS_TO_HIDE);return r>=CHARS_TO_HIDE}const getCommandMenuAutocompleteItem=(e,t)=>({actions:r})=>({trigger:{name:"command",trigger:/(?:^|\s)(\/)$/,allArrowKeys:!1,cancelOnFirstSpace:!0,decorationAttrs:{class:DecoClassName}},handler:new CommandHandler({logger:t,storage:r,actions:e.actions,nodesIgnoreList:(e.nodesIgnoreList??[]).concat([DeflistNode.Term,TableNode.HeaderCell,TableNode.DataCell,CheckboxNode.Label,NoteNode.NoteTitle,CutNode.CutTitle,TabsNode.Tab])})}),CommandMenu=(e,t)=>{if(!Array.isArray(t.actions)||0===t.actions.length)return globalLogger.log("[CommandMenu extension]: Skip because 'actions' is not an array or is empty"),void e.logger.log("[CommandMenu extension]: Skip because 'actions' is not an array or is empty");e.context.has("autocomplete")||e.use(Autocomplete),e.context.get("autocomplete").add(getCommandMenuAutocompleteItem(t,e.logger))};function dropCursor(e={}){return new Plugin({view:t=>new DropCursorView(t,e)})}class DropCursorView{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(r=t.width)&&void 0!==r?r:1,this.color=!1===t.color?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(t=>{let r=e=>{this[t](e)};return e.dom.addEventListener(t,r),{name:t,handler:r}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e,t=this.editorView.state.doc.resolve(this.cursorPos),r=!t.parent.inlineContent,n=this.editorView.dom,i=n.getBoundingClientRect(),o=i.width/n.offsetWidth,s=i.height/n.offsetHeight;if(r){let r=t.nodeBefore,n=t.nodeAfter;if(r||n){let t=this.editorView.nodeDOM(this.cursorPos-(r?r.nodeSize:0));if(t){let i=t.getBoundingClientRect(),o=r?i.bottom:i.top;r&&n&&(o=(o+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let a=this.width/2*s;e={left:i.left,right:i.right,top:o-a,bottom:o+a}}}}if(!e){let t=this.editorView.coordsAtPos(this.cursorPos),r=this.width/2*o;e={left:t.left-r,right:t.left+r,top:t.top,bottom:t.bottom}}let a,l,c=this.editorView.dom.offsetParent;if(this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r),!c||c==document.body&&"static"==getComputedStyle(c).position)a=-pageXOffset,l=-pageYOffset;else{let e=c.getBoundingClientRect(),t=e.width/c.offsetWidth,r=e.height/c.offsetHeight;a=e.left-c.scrollLeft*t,l=e.top-c.scrollTop*r}this.element.style.left=(e.left-a)/o+"px",this.element.style.top=(e.top-l)/s+"px",this.element.style.width=(e.right-e.left)/o+"px",this.element.style.height=(e.bottom-e.top)/s+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),n=r&&r.type.spec.disableDropCursor,i="function"==typeof n?n(this.editorView,t,e):n;if(t&&!i){let e=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let t=dropPoint(this.editorView.state.doc,e,this.editorView.dragging.slice);null!=t&&(e=t)}this.setCursor(e),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const getPlaceholderPluginKeys=e=>{const t=[];for(const r in e.nodes)if(e.nodes[r]){const n=e.nodes[r].spec;n.placeholder?.customPlugin&&t.push(n.placeholder.customPlugin)}return t},b$c=cn("placeholder"),createPlaceholder=(e,t,r)=>{const n=getPlaceholderContent(e,t);if(!n)return null;const i=document.createElement("div");i.className=b$c({focus:r});const o=document.createElement("span");o.className=b$c("cursor");const s=document.createElement("span");return s.className=b$c("text"),s.textContent=n,i.append(o,s),i},placeholderNeeded=e=>{const t=findChildren(e,e=>Boolean(e.type.spec.placeholder?.alwaysVisible));return isNodeEmpty(e)&&!t.length},addDecoration=(e,t,r,n,i,o)=>{const s=t.type.spec.placeholder,a=r+t.childCount+1;if(!s||e[a])return;if(s.customPlugin)return void(e[a]=s.customPlugin);const l=a===i,c=createPlaceholder(t,n,l);c&&(l&&(o.hasFocus=!0),e[a]={pos:a,toDOM:c,spec:{focus:l}})},pluginKey$1=new PluginKey("placeholder_plugin"),Placeholder=(e,t)=>{e.context.set("placeholder",t),e.addPlugin(()=>new Plugin({key:pluginKey$1,props:{attributes(e){const t={};return pluginKey$1.getState(e).hasFocus&&(t.class="g-md-editor-hidecursor"),t},decorations:e=>pluginKey$1.getState(e)?.decorationSet},state:{init:(e,t)=>initState(t),apply:applyState}}),e.Priority.VeryHigh)};function getPlaceholderWidgetSpecs(e){const t={hasFocus:!1},r={},{selection:n}=e,i=isTextSelection(n)?n.$cursor?.pos:null;getPlaceholderPluginKeys(e.schema).forEach(t=>{t.getState(e)?.find(void 0,void 0,e=>(r[e.pos]=t,!1))}),e.doc.descendants((e,n,o)=>{const s=e.type.spec.placeholder;s&&s.alwaysVisible&&placeholderNeeded(e)&&addDecoration(r,e,n,o,i,t)});const o=findParentNodeClosestToPos(e.selection.$from,e=>Boolean(e.type.spec.placeholder)),s=o?.node.type.spec.placeholder;if(o&&placeholderNeeded(o.node)&&s&&!s.alwaysVisible){const{node:n,pos:s,depth:a}=o,l=a>0?e.selection.$from.node(a-1):null;addDecoration(r,n,s,l,i,t)}return{widgetSpecs:Object.values(r).filter(e=>!(e instanceof PluginKey)),hasFocus:t.hasFocus}}function initState(e){const{widgetSpecs:t,hasFocus:r}=getPlaceholderWidgetSpecs(e);return{decorationSet:DecorationSet.create(e.doc,t.map(e=>Decoration$1.widget(e.pos,e.toDOM,e.spec))),hasFocus:r}}function applyState(e,t,r,n){const{widgetSpecs:i,hasFocus:o}=getPlaceholderWidgetSpecs(n),{decorationSet:s}=t,a=s.map(e.mapping,e.doc),l=i.reduce((e,{pos:t,spec:r})=>{const n=a.find(t,t);return n.length&&isEqual$4(n[0].spec,r)&&e.push(...n),e},[]),c=i.filter(({pos:e})=>!l.map(({from:e})=>e).includes(e)),u=a.remove(l);let d=a;return u.find().length&&(d=d.remove(u.find())),c.length&&(d=d.add(e.doc,c.map(e=>Decoration$1.widget(e.pos,e.toDOM,e.spec)))),{decorationSet:d,hasFocus:o}}const key=new PluginKey("gapCursorPlugin"),gapCursor=()=>new Plugin({key:key,state:{init:()=>!1,apply:(e,t,r,n)=>{const i=n.selection;return isGapCursorSelection(i)||isNodeSelection(i)}},view:()=>({update(e){const t=key.getState(e.state);e.dom.classList.toggle("Prosemirror-hide-cursor",t)}}),props:{handleKeyPress(e){const{state:t,state:{selection:r}}=e;if(isGapCursorSelection(r)){const n=t.tr.replaceSelectionWith(pType(t.schema).create());n.setSelection(TextSelection.create(n.doc,r.pos+1)),e.dispatch(n.scrollIntoView())}return!1},decorations:({doc:e,selection:t})=>{if(isGapCursorSelection(t)){const r=t.head;return DecorationSet.create(e,[Decoration$1.widget(r,toDOM,{key:"gapcursor",side:-1})])}return null}}}),toDOM=(e,t)=>{const r=pType(e.state.schema).create(),n=DOMSerializer.fromSchema(e.state.schema).serializeNode(r),i=createPlaceholder(r,null,!0);return i&&n.appendChild(i),n.classList.add("g-md-gapcursor"),n.addEventListener("mousedown",()=>{void 0!==t()&&e.dispatch(e.state.tr.replaceSelectionWith(r))}),n},Cursor=(e,t)=>{e.addPlugin(()=>gapCursor(),e.Priority.Highest),e.addPlugin(()=>dropCursor(t.dropOptions))},FilePaste=e=>{e.addPlugin(()=>new Plugin({props:{handlePaste(e,t){const r=getFiles(t.clipboardData);return!!r&&(getLoggerFromState(e.state).event({event:"paste-files",plugin:"file-paste",prop:"handlePaste"}),e.dispatch(e.state.tr.replaceSelection(createFilesSlice(e.state.schema,r)).scrollIntoView()),!0)},handleDrop(e,t){if(e.dragging)return!1;const r=getFiles(t.dataTransfer);if(!r)return!1;const n=createFilesSlice(e.state.schema,r),i=e.posAtCoords({left:t.clientX,top:t.clientY})?.pos??-1;if(-1===i)return!1;const o=dropPoint(e.state.doc,i,n);return getLoggerFromState(e.state).event({event:"drop-files",plugin:"file-paste",prop:"handleDrop",dispatch:null!==o}),null!==o&&(e.dispatch(e.state.tr.insert(o,n.content)),!0)}}}),e.Priority.Lowest)};function getFiles(e){return e&&isFilesOnly$2(e)?Array.from(e.files):null}function createFilesSlice(e,t){const r=[];for(const n of t)r.push(pType(e).create(null,e.text(n.name)));return new Slice(Fragment.from(r),0,0)}var GOOD_LEAF_SIZE=200,RopeSequence=function(){};RopeSequence.prototype.append=function(e){return e.length?(e=RopeSequence.from(e),!this.length&&e||e.length<GOOD_LEAF_SIZE&&this.leafAppend(e)||this.length<GOOD_LEAF_SIZE&&e.leafPrepend(this)||this.appendInner(e)):this},RopeSequence.prototype.prepend=function(e){return e.length?RopeSequence.from(e).append(this):this},RopeSequence.prototype.appendInner=function(e){return new Append(this,e)},RopeSequence.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?RopeSequence.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},RopeSequence.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},RopeSequence.prototype.forEach=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)},RopeSequence.prototype.map=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=this.length);var n=[];return this.forEach(function(t,r){return n.push(e(t,r))},t,r),n},RopeSequence.from=function(e){return e instanceof RopeSequence?e:e&&e.length?new Leaf(e):RopeSequence.empty};var Leaf=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,r){return 0==e&&r==this.length?this:new t(this.values.slice(e,r))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,r,n){for(var i=t;i<r;i++)if(!1===e(this.values[i],n+i))return!1},t.prototype.forEachInvertedInner=function(e,t,r,n){for(var i=t-1;i>=r;i--)if(!1===e(this.values[i],n+i))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=GOOD_LEAF_SIZE)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=GOOD_LEAF_SIZE)return new t(e.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(t.prototype,r),t}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(e){function t(t,r){e.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,r,n){var i=this.left.length;return!(t<i&&!1===this.left.forEachInner(e,t,Math.min(r,i),n))&&!(r>i&&!1===this.right.forEachInner(e,Math.max(t-i,0),Math.min(this.length,r)-i,n+i))&&void 0},t.prototype.forEachInvertedInner=function(e,t,r,n){var i=this.left.length;return!(t>i&&!1===this.right.forEachInvertedInner(e,t-i,Math.max(r,i)-i,n+i))&&!(r<i&&!1===this.left.forEachInvertedInner(e,Math.min(t,i),r,n))&&void 0},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var r=this.left.length;return t<=r?this.left.slice(e,t):e>=r?this.right.slice(e-r,t-r):this.left.slice(e,r).append(this.right.slice(0,t-r))},t.prototype.leafAppend=function(e){var r=this.right.leafAppend(e);if(r)return new t(this.left,r)},t.prototype.leafPrepend=function(e){var r=this.left.leafPrepend(e);if(r)return new t(r,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(RopeSequence);const max_empty_items=500;class Branch{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let r,n,i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}t&&(r=this.remapping(i,this.items.length),n=r.maps.length);let o,s,a=e.tr,l=[],c=[];return this.items.forEach((e,t)=>{if(!e.step)return r||(r=this.remapping(i,t+1),n=r.maps.length),n--,void c.push(e);if(r){c.push(new Item(e.map));let t,i=e.step.map(r.slice(n));i&&a.maybeStep(i).doc&&(t=a.mapping.maps[a.mapping.maps.length-1],l.push(new Item(t,void 0,void 0,l.length+c.length))),n--,t&&r.appendMap(t,n)}else a.maybeStep(e.step);return e.selection?(o=r?e.selection.map(r.slice(n)):e.selection,s=new Branch(this.items.slice(0,i).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:s,transform:a,selection:o}}addTransform(e,t,r,n){let i=[],o=this.eventCount,s=this.items,a=!n&&s.length?s.get(s.length-1):null;for(let c=0;c<e.steps.length;c++){let r,l=e.steps[c].invert(e.docs[c]),u=new Item(e.mapping.maps[c],l,t);(r=a&&a.merge(u))&&(u=r,c?i.pop():s=s.slice(0,s.length-1)),i.push(u),t&&(o++,t=void 0),n||(a=u)}let l=o-r.depth;return l>DEPTH_OVERFLOW&&(s=cutOffEvents(s,l),o-=l),new Branch(s.append(i),o)}remapping(e,t){let r=new Mapping;return this.items.forEach((t,n)=>{let i=null!=t.mirrorOffset&&n-t.mirrorOffset>=e?r.maps.length-t.mirrorOffset:void 0;r.appendMap(t.map,i)},e,t),r}addMaps(e){return 0==this.eventCount?this:new Branch(this.items.append(e.map(e=>new Item(e))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],n=Math.max(0,this.items.length-t),i=e.mapping,o=e.steps.length,s=this.eventCount;this.items.forEach(e=>{e.selection&&s--},n);let a=t;this.items.forEach(t=>{let n=i.getMirror(--a);if(null==n)return;o=Math.min(o,n);let l=i.maps[n];if(t.step){let o=e.steps[n].invert(e.docs[n]),c=t.selection&&t.selection.map(i.slice(a+1,n));c&&s++,r.push(new Item(l,o,c))}else r.push(new Item(l))},n);let l=[];for(let d=t;d<o;d++)l.push(new Item(i.maps[d]));let c=this.items.slice(0,n).append(l).append(r),u=new Branch(c,s);return u.emptyItemCount()>max_empty_items&&(u=u.compress(this.items.length-r.length)),u}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,n=[],i=0;return this.items.forEach((o,s)=>{if(s>=e)n.push(o),o.selection&&i++;else if(o.step){let e=o.step.map(t.slice(r)),s=e&&e.getMap();if(r--,s&&t.appendMap(s,r),e){let a=o.selection&&o.selection.map(t.slice(r));a&&i++;let l,c=new Item(s.invert(),e,a),u=n.length-1;(l=n.length&&n[u].merge(c))?n[u]=l:n.push(c)}}else o.map&&r--},this.items.length,0),new Branch(RopeSequence.from(n.reverse()),i)}}function cutOffEvents(e,t){let r;return e.forEach((e,n)=>{if(e.selection&&0==t--)return r=n,!1}),e.slice(r)}Branch.empty=new Branch(RopeSequence.empty,0);class Item{constructor(e,t,r,n){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=n}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Item(t.getMap().invert(),t,this.selection)}}}class HistoryState{constructor(e,t,r,n,i){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=n,this.prevComposition=i}}const DEPTH_OVERFLOW=20;function applyTransaction(e,t,r,n){let i,o=r.getMeta(historyKey);if(o)return o.historyState;r.getMeta(closeHistoryKey)&&(e=new HistoryState(e.done,e.undone,null,0,-1));let s=r.getMeta("appendedTransaction");if(0==r.steps.length)return e;if(s&&s.getMeta(historyKey))return s.getMeta(historyKey).redo?new HistoryState(e.done.addTransform(r,void 0,n,mustPreserveItems(t)),e.undone,rangesFor(r.mapping.maps),e.prevTime,e.prevComposition):new HistoryState(e.done,e.undone.addTransform(r,void 0,n,mustPreserveItems(t)),null,e.prevTime,e.prevComposition);if(!1===r.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(i=r.getMeta("rebased"))?new HistoryState(e.done.rebased(r,i),e.undone.rebased(r,i),mapRanges(e.prevRanges,r.mapping),e.prevTime,e.prevComposition):new HistoryState(e.done.addMaps(r.mapping.maps),e.undone.addMaps(r.mapping.maps),mapRanges(e.prevRanges,r.mapping),e.prevTime,e.prevComposition);{let i=r.getMeta("composition"),o=0==e.prevTime||!s&&e.prevComposition!=i&&(e.prevTime<(r.time||0)-n.newGroupDelay||!isAdjacentTo(r,e.prevRanges)),a=s?mapRanges(e.prevRanges,r.mapping):rangesFor(r.mapping.maps);return new HistoryState(e.done.addTransform(r,o?t.selection.getBookmark():void 0,n,mustPreserveItems(t)),Branch.empty,a,r.time,null==i?e.prevComposition:i)}}function isAdjacentTo(e,t){if(!t)return!1;if(!e.docChanged)return!0;let r=!1;return e.mapping.maps[0].forEach((e,n)=>{for(let i=0;i<t.length;i+=2)e<=t[i+1]&&n>=t[i]&&(r=!0)}),r}function rangesFor(e){let t=[];for(let r=e.length-1;r>=0&&0==t.length;r--)e[r].forEach((e,r,n,i)=>t.push(n,i));return t}function mapRanges(e,t){if(!e)return null;let r=[];for(let n=0;n<e.length;n+=2){let i=t.map(e[n],1),o=t.map(e[n+1],-1);i<=o&&r.push(i,o)}return r}function histTransaction(e,t,r){let n=mustPreserveItems(t),i=historyKey.get(t).spec.config,o=(r?e.undone:e.done).popEvent(t,n);if(!o)return null;let s=o.selection.resolve(o.transform.doc),a=(r?e.done:e.undone).addTransform(o.transform,t.selection.getBookmark(),i,n),l=new HistoryState(r?a:o.remaining,r?o.remaining:a,null,0,-1);return o.transform.setSelection(s).setMeta(historyKey,{redo:r,historyState:l})}let cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(e){let t=e.plugins;if(cachedPreserveItemsPlugins!=t){cachedPreserveItems=!1,cachedPreserveItemsPlugins=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}const historyKey=new PluginKey("history"),closeHistoryKey=new PluginKey("closeHistory");function history$1(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Plugin({key:historyKey,state:{init:()=>new HistoryState(Branch.empty,Branch.empty,null,0,-1),apply:(t,r,n)=>applyTransaction(r,n,t,e)},config:e,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,n="historyUndo"==r?undo$2:"historyRedo"==r?redo$2:null;return!!n&&(t.preventDefault(),n(e.state,e.dispatch))}}}})}function buildCommand(e,t){return(r,n)=>{let i=historyKey.getState(r);if(!i||0==(e?i.undone:i.done).eventCount)return!1;if(n){let o=histTransaction(i,r,e);o&&n(t?o.scrollIntoView():o)}return!0}}const undo$2=buildCommand(!1,!0),redo$2=buildCommand(!0,!0);var HistoryAction,HistoryAction2;HistoryAction2=HistoryAction||(HistoryAction={}),HistoryAction2.Undo="undo",HistoryAction2.Redo="redo";const History=(e,t)=>{e.addPlugin(()=>history$1(t?.config)),e.addKeymap(()=>{const{undoKey:e,redoKey:r}=t??{},n={};return e&&(n[e]=withLogAction("undo",undo$2)),r&&(n[r]=withLogAction("redo",redo$2)),n}),e.addAction(HistoryAction.Undo,createHistoryAction(undo$2)).addAction(HistoryAction.Redo,createHistoryAction(redo$2))};function createHistoryAction(e){return()=>({isEnable:e,run:e})}const SelectionTooltip$1=({show:e,poppupProps:t,...r})=>e?jsxRuntimeExports.jsx(Popup,{open:!0,...t,style:{padding:"4px 8px"},children:jsxRuntimeExports.jsx(Toolbar,{...r})}):null;class TooltipView{#K=!1;logger;actions;menuConfig;placement;view;baseProps={show:!1,poppupProps:{}};_tooltipRenderItem=null;constructor(e,t,r,n){this.logger=r,this.actions=e,this.menuConfig=t;const{flip:i,placement:o="bottom"}=n;this.placement=i?o:[o]}get isTooltipOpen(){return this.#K}show(e,t){this.view=e,this.#K=!0,this.baseProps={show:!0,poppupProps:{...t,...this.calcPosition(e)}},this.renderPopup()}hide(e){this.view=e,this.#K=!1,this.baseProps={show:!1,poppupProps:{}},this.renderPopup()}destroy(){this._tooltipRenderItem?.remove(),this._tooltipRenderItem=null}getSelectionTooltipProps(){return{...this.baseProps,qa:"g-md-toolbar-selection",focus:()=>this.view.focus(),data:this.getFilteredConfig(),editor:this.actions,onClick:e=>{globalLogger.action({mode:"wysiwyg",source:"context-menu",action:e}),this.logger.action({source:"context-menu",action:e})}}}getFilteredConfig(){return this.baseProps.show?this.menuConfig.map(e=>e.filter(e=>{const{condition:t}=e;return"enabled"===t?e.isEnable(this.actions):!isFunction$1(t)||t(this.view.state)})).filter(e=>Boolean(e.length)):[]}renderPopup(){this.tooltipRenderItem.rerender()}get tooltipRenderItem(){if(!this._tooltipRenderItem){const e=getReactRendererFromState(this.view.state);this._tooltipRenderItem=e.createItem("selection_context",()=>jsxRuntimeExports.jsx(ErrorLoggerBoundary,{children:jsxRuntimeExports.jsx(SelectionTooltip$1,{...this.getSelectionTooltipProps()})}))}return this._tooltipRenderItem}calcPosition(e){const t={getBoundingClientRect(){const t=e.coordsAtPos(e.state.selection.from),r=e.coordsAtPos(e.state.selection.to),n=Math.max((t.left+r.left)/2,t.left+3),i=t.top,o=n-1,s=r.bottom-t.top;return{top:i,left:o,right:o+2,bottom:i+s,y:i,x:o,height:s,width:2}}};return{placement:this.placement,anchorElement:t}}}const SelectionContext=(e,t)=>{const{config:r}=t;Array.isArray(r)&&r.length>0&&e.addPlugin(({actions:n})=>new Plugin(new SelectionTooltip(n,r,e.logger,t)))};class SelectionTooltip{destroyed=!1;tooltip;hideTimeoutRef=null;_isMousePressed=!1;constructor(e,t,r,n){this.tooltip=new TooltipView(e,t,r,n)}get props(){return{handleKeyDown:keydownHandler({Escape:(e,t,r)=>!!this.tooltip.isTooltipOpen&&(this.tooltip.hide(r),!0)}),handleDOMEvents:{mousedown:e=>{const t={doc:e.state.doc,selection:e.state.selection};this._isMousePressed=!0,this.cancelTooltipHiding(),this.tooltip.hide(e),document.addEventListener("mouseup",()=>{this.destroyed||(this._isMousePressed=!1,this.update(e,t))},{once:!0})}}}}view(e){return this.update(e),{update:this.update.bind(this),destroy:()=>{this.destroyed=!0,this.cancelTooltipHiding(),this.tooltip.destroy()}}}update(e,t){if(this._isMousePressed)return;if(this.cancelTooltipHiding(),!e.dom.parentNode||!e.hasFocus())return void this.tooltip.hide(e);const{state:r}=e;if(t&&t.doc.eq(r.doc)&&t.selection.eq(r.selection))return;const{selection:n}=r;!n.empty&&(n instanceof TextSelection||n instanceof AllSelection)?isCodeBlock(n.$from.parent)||isCodeBlock(n.$to.parent)||hasParentNode(e=>!1===e.type.spec.selectionContext)(n)?this.tooltip.hide(e):this.tooltip.show(e,{onOpenChange:(t,r,n)=>{"escape-key"!==n&&this.scheduleTooltipHiding(e)}}):this.tooltip.hide(e)}scheduleTooltipHiding(e){this.hideTimeoutRef=setTimeout(()=>{e.hasFocus()||this.tooltip.hide(e)},30)}cancelTooltipHiding(){null!==this.hideTimeoutRef&&(clearTimeout(this.hideTimeoutRef),this.hideTimeoutRef=null)}}const pluginKey=new PluginKey("shared-state"),pluginSpec={key:pluginKey,state:{init:()=>({map:new Map,changedKeys:null,notifyBus:new EventEmitter$1}),apply(e,{map:t,notifyBus:r}){const n=e.getMeta(pluginKey);if(!n||!n.actions.length)return{changedKeys:null,map:t,notifyBus:r};const i=new Set;for(const o of n.actions){switch(o.type){case"delete":t.delete(o.key);break;case"update":{let e=t.get(o.key);e={...e,...o.data},t.set(o.key,e);break}case"set":t.set(o.key,o.data);break;default:continue}i.add(o.key)}return{changedKeys:i,map:t,notifyBus:r}}},view:()=>({update(e){const t=pluginKey.getState(e.state);if(t&&t.changedKeys&&t.changedKeys.size)for(const r of t.changedKeys){const e=t.map.get(r);t.notifyBus.emit(r,e)}}})},SharedState=e=>{e.addPlugin(()=>new Plugin(pluginSpec))},BehaviorPreset=(e,t)=>{e.use(Selection).use(SharedState).use(Placeholder,t.placeholder??{}).use(Cursor,t.cursor??{}).use(History,t.history??{}).use(Clipboard,t.clipboard??{}).use(ReactRendererExtension,t.reactRenderer).use(WidgetDecoration),t.mobile||(e.use(SelectionContext,t.selectionContext??{}),t.commandMenu&&e.use(CommandMenu,t.commandMenu)),e.use(FilePaste),e.use(ClicksOnEdges)},EditorContext=reactExports.createContext(null);function useMarkdownEditorContext(){return reactExports.useContext(EditorContext)}EditorContext.Provider;const transformEmptyParagraph=e=>{"paragraph"===e.type&&1===e.content?.length&&"text"===e.content[0]?.type&&e.content[0].text===String.fromCharCode(160)&&delete e.content},getPMTransformers=({emptyRowTransformer:e})=>{const t=[];return e&&t.push(transformEmptyParagraph),t},DIRECTIVE_SYNTAX_DEFAULT="disabled";class DirectiveSyntaxContext{#J;set option(e){this.#J=e??DIRECTIVE_SYNTAX_DEFAULT}get option(){return this.#J}constructor(e){this.option=e,this.#J=this.option}valueFor(e){let t;return"object"==typeof this.option&&(t=this.option[e]),"string"==typeof this.option&&(t=this.option),t??DIRECTIVE_SYNTAX_DEFAULT}mdPluginValueFor(e){const t=this.valueFor(e);return"preserve"===t||"overwrite"===t?"enabled":t}shouldSerializeToDirective(e,t){const r=this.valueFor(e);if("overwrite"===r||"only"===r)return!0;if("string"==typeof t){if(t.startsWith(":"))return!0;if(t.startsWith("{"))return!1}return"preserve"===r}shouldInsertDirectiveMarkup(e){const t=this.valueFor(e);return"disabled"!==t&&"enabled"!==t}}const settings_wysiwyg$1="Visual Editor (wysiwyg)",settings_markup$1="Markdown markup",settings_menubar$1="Toolbar",settings_hint$1="You can disable the top menu and invoke all commands with / or the + button.",markup_placeholder$1="Add your markup here",preview_hint$1="Preview",en$5={"error-title":"Error in YFM editor",settings_wysiwyg:settings_wysiwyg$1,settings_markup:settings_markup$1,settings_menubar:settings_menubar$1,settings_hint:settings_hint$1,"settings_split-mode":"Split mode","split-mode-text":"Preview","settings_split-mode-hint":"Splitting the editor into two windows: preview and editing",markup_placeholder:markup_placeholder$1,preview_hint:preview_hint$1},settings_wysiwyg="  (wysiwyg)",settings_markup=" Markdown",settings_menubar=" ",settings_hint="        /   +",markup_placeholder="  ",preview_hint="",ru$5={"error-title":"   YFM",settings_wysiwyg:settings_wysiwyg,settings_markup:settings_markup,settings_menubar:settings_menubar,settings_hint:settings_hint,"settings_split-mode":"-","settings_split-mode-hint":"    :   ","split-mode-text":"",markup_placeholder:markup_placeholder,preview_hint:preview_hint},KEYSET$5="bundle",i18n$4=registerKeyset(KEYSET$5,{en:en$5,ru:ru$5}),en$4={"snippet.text":"Empty row"},ru$4={"snippet.text":" "},KEYSET$4="empty-row",i18n$3=registerKeyset(KEYSET$4,{en:en$4,ru:ru$4}),emptyRowSnippetTemplate="&nbsp;\n\n",emptyRowSnippet=snippet(emptyRowSnippetTemplate),emptyRowAutocomplete={autocomplete:e=>{const t=e.matchBefore(/^.*/);return t?.text.startsWith("&")?{from:t.from,options:[{label:"&nbsp;",displayLabel:i18n$3("snippet.text"),type:"text",apply:emptyRowSnippet}]}:null}},getAutocompleteConfig=({preserveEmptyRows:e})=>{const t=[];return e&&t.push(emptyRowAutocomplete),t.push(mdAutocomplete),t};class MarkupManager extends SafeEventEmitter{_markups=new Map;_nodes=new Map;_namespace;logger;constructor(e){super(),this.logger=e,this._namespace=v4()}setMarkup(e,t){"string"==typeof t?(this._markups.set(e,t),this.emit("markupChanged",{id:e,rawMarkup:t}),this.logger.log(`[MarkupManager] Raw markup for ID ${e} set successfully`)):this.logger.warn("[MarkupManager] rawMarkup must be a string")}setNode(e,t){t?(this._nodes.set(e,t),this.emit("nodeChanged",{id:e,node:t}),this.logger.log(`[MarkupManager] Node for ID ${e} set successfully`)):this.logger.warn("[MarkupManager] Node must be a valid ProseMirror Node")}getMarkup(e){return this._markups.get(e)??null}getNode(e){return this._nodes.get(e)??null}getNamespace(){return this._namespace}reset(){this._markups.clear(),this._nodes.clear(),this.emit("reset",{}),this.logger.log("[MarkupManager] MarkupManager has been reset")}}const YFM_TABLE_TOKEN_ATTR="data-token-id",YFM_TABLE_NODE_ATTR="data-node-id";function createDynamicModifiers(e){return[{type:"parserToken",tokenName:"yfm_table",process:(t,r,n)=>{const{map:i}=t;if(i&&null!==n){const r=n.split("\n").slice(i[0],i[1]).join("\n").trim(),o=v5(r,e.getNamespace());/^\s*#\|/.test(r)&&(t.attrSet(YFM_TABLE_TOKEN_ATTR,o),e.setMarkup(o,dedent(r)))}return t}},{type:"parserNodeAttrs",tokenName:"yfm_table",process:(e,t)=>({...t,[YFM_TABLE_NODE_ATTR]:e.attrGet(YFM_TABLE_TOKEN_ATTR)})},{type:"parserNode",nodeName:"yfm_table",process:t=>{const r=t.attrs[YFM_TABLE_NODE_ATTR];return r&&e.setNode(r,t),t}},{type:"serializerNode",nodeName:"yfm_table",process:(t,r,n,i,o)=>{const s=r.attrs[YFM_TABLE_NODE_ATTR],a=e.getNode(s);if(a?.eq(r)){const r=e.getMarkup(s)||"";return t.ensureNewLine(),t.text(r,!1),t.ensureNewLine(),t.closeBlock(),void t.write("\n")}o?.(t,r,n,i)}},{type:"schemaNodeSpec",nodeName:"yfm_table",allowedAttrs:[YFM_TABLE_NODE_ATTR]}]}class EditorImpl extends SafeEventEmitter{#t;#ee;#te;#re;#ne;#ie;#oe;#se;#ae;#le;#I;#ce;#T=[];#ue;#de;#pe;#S;#he;#fe;#me;#ge;#be;#ye;#Te;#Ee;#Oe;get _wysiwygView(){return this.#se?.view}get logger(){return this.#t}get currentMode(){return this.#te}set currentMode(e){switch(e){case"markup":if(this.#te=e,this.#se){const e=this.#ae?.getValue(),t=this.#se.getValue();!e||this.shouldReplaceMarkupEditorValue(e,t)?this.#ee=t:this.#ee=e}this.#ae&&this.#ae.replace(this.#ee);break;case"wysiwyg":if(this.#te=e,this.#ae){const e=this.#ae.getValue();this.#ee=this.#Te?.(e)??e}else this.#Te&&(this.#ee=this.#Te(this.#ee));this.#se&&this.#se.replace(this.#ee);break;default:throw new Error("Unknown editor mode: "+e)}setTimeout(()=>{this.currentEditor.focus()},30)}get toolbarVisible(){return this.#re}get splitModeEnabled(){return this.#ne}get splitMode(){return this.#ie}get preset(){return this.#pe}get mdOptions(){return this.#ce}get directiveSyntax(){return this.#ye}get renderPreview(){return this.#oe}get currentEditor(){const e=this.currentMode;switch(e){case"markup":return this.markupEditor;case"wysiwyg":return this.wysiwygEditor;default:throw new Error("Unknown editor mode: "+e)}}get wysiwygEditor(){if(!this.#se){const e="zero"===this.#pe||"commonmark"===this.#pe?this.#pe:"default";this.#se=new WysiwygEditor({mdPreset:e,logger:this.logger.nested({mode:"wysiwyg"}),initialContent:this.#ee,extensions:this.#S,pmTransformers:this.#T,modifiers:this.#de,allowHTML:this.#ce.html,linkify:this.#ce.linkify,linkifyTlds:this.#ce.linkifyTlds,escapeConfig:this.#I,onChange:()=>this.emit("rerender-toolbar",null),onDocChange:()=>this.emit("change",null)})}return this.#se}get markupEditor(){return this.#ae||(this.#ae=new Editor(createCodemirror({doc:this.#ee,logger:this.logger.nested({mode:"markup"}),placeholder:this.#le.placeholder??i18n$4("markup_placeholder"),onCancel:()=>this.emit("cancel",null),onSubmit:()=>this.emit("submit",null),onChange:()=>this.emit("rerender-toolbar",null),onDocChange:()=>this.emit("change",null),onScroll:e=>this.emit("cm-scroll",{event:e}),reactRenderer:this.#he,uploadHandler:this.fileUploadHandler,parseInsertedUrlAsImage:this.parseInsertedUrlAsImage,needImageDimensions:this.needToSetDimensionsForUploadedImages,parseHtmlOnPaste:this.#le.parseHtmlOnPaste,enableNewImageSizeCalculation:this.enableNewImageSizeCalculation,extensions:this.#le.extensions,disabledExtensions:this.#le.disabledExtensions,keymaps:this.#le.keymaps,preserveEmptyRows:this.#ue,yfmLangOptions:{languageData:getAutocompleteConfig({preserveEmptyRows:this.#ue}).concat(this.#le?.languageData||[])},autocompletion:this.#le.autocompletion,directiveSyntax:this.directiveSyntax,receiver:this,searchPanel:this.#le.searchPanel}))),this.#ae}get renderStorage(){return this.#he}get fileUploadHandler(){return this.#fe}get parseInsertedUrlAsImage(){return this.#me}get needToSetDimensionsForUploadedImages(){return this.#ge}get enableNewImageSizeCalculation(){return this.#be}get mobile(){return this.#Oe}constructor(e){const{logger:t}=e;super({onError:e=>{t.error(e),globalLogger.error(e)}});const{md:r={},initial:n={},handlers:i={},experimental:o={},markupConfig:s={},wysiwygConfig:a={},mobile:l=!1}=e;this.#t=t,this.#de=o.preserveMarkupFormatting?createDynamicModifiers(new MarkupManager(this.logger.nested({module:"markup-manager"}))):void 0,this.#te=n.mode??"wysiwyg",this.#re=n.toolbarVisible??!0,this.#ie=(s.renderPreview&&s.splitMode)??!1,this.#ne=(this.#ie&&n.splitModeEnabled)??!1,this.#oe=s.renderPreview,this.#ee=n.markup??"",this.#pe=e.preset??"full",this.#T=e.pmTransformers,this.#ce=r,this.#S=a.extensions,this.#le={...e.markupConfig},this.#he=e.renderStorage,this.#fe=i.uploadFile,this.#me=s.parseInsertedUrlAsImage,this.#ge=Boolean(o.needToSetDimensionsForUploadedImages),this.#ye=e.directiveSyntax,this.#be=Boolean(o.enableNewImageSizeCalculation),this.#ue=o.preserveEmptyRows||!1,this.#Te=o.prepareRawMarkup,this.#I=a.escapeConfig,this.#Ee=o.beforeEditorModeChange,this.#Oe=l}get cm(){return this.markupEditor.cm}get actions(){return this.wysiwygEditor.actions}action(e){return this.wysiwygEditor.action(e)}destroy(){this.#se?.destroy(),this.#ae?.codemirror.destroy(),this.#ae=void 0,this.#ae=void 0,this.#se=void 0}setEditorMode(e,t){this.changeEditorMode({mode:e,reason:"manually",emit:t?.emit})}changeEditorMode({emit:e=!0,...t}){this.#te!==t.mode&&!1!==this.#Ee?.({mode:t.mode,reason:t.reason})&&(this.logger.event({event:"mode-change",prevMode:this.#te,nextMode:t.mode,reason:t.reason}),this.currentMode=t.mode,this.emit("rerender",null),e&&this.emit("change-editor-mode",t))}changeToolbarVisibility(e){this.#re=e.visible,this.emit("rerender",null),this.emit("change-toolbar-visibility",e)}changeSplitModeEnabled(e){this.#ne!==e.splitModeEnabled&&(this.#ne=e.splitModeEnabled,this.emit("rerender",null),this.emit("change-split-mode-enabled",e))}focus(){return this.currentEditor.focus()}hasFocus(){return this.currentEditor.hasFocus()}getValue=()=>this.currentEditor.getValue();isEmpty(){return this.currentEditor.isEmpty()}clear(){return this.currentEditor.clear()}replace(e){return this.currentEditor.replace(e)}prepend(e){return this.currentEditor.prepend(e)}append(e){return this.currentEditor.append(e)}moveCursor(e){return"object"==typeof e?this.moveCursorToLine(e.line):this.currentEditor.moveCursor(e)}moveCursorToLine(e){const t=this.currentMode;switch(t){case"markup":{const t=this.markupEditor.cm;let r=e+1;r=Math.max(r,1),r=Math.min(r,t.state.doc.lines);const n=getTopOffset(t.dom),i=t.state.doc.line(r).from;t.dispatch({scrollIntoView:!0,selection:{anchor:i},effects:[EditorView.scrollIntoView(i,{y:"start",x:"start",yMargin:n})]});break}case"wysiwyg":{const t=this.wysiwygEditor.dom.querySelector(`[data-line="${e}"]`);if(t){const e=t.getBoundingClientRect().top,r=getTopOffset(this.wysiwygEditor.dom);window.scrollTo({top:e+window.scrollY-r});const n=this._wysiwygView.posAtDOM(t,0),{tr:i}=this._wysiwygView.state;this._wysiwygView.dispatch(i.setSelection(TextSelection.create(i.doc,n)))}break}default:throw new Error("Unknown editor mode: "+t)}}shouldReplaceMarkupEditorValue(e,t){const r=this.#se?.serializer.serialize(this.#se.parser.parse(e),this.#I);return r?.trim()!==t.trim()}}function getTopOffset(e){return calculateCSSNumberValue(window.getComputedStyle(e).getPropertyValue("--g-md-toolbar-sticky-offset"))+8+36+8}function calculateCSSNumberValue(e){const t=document.createElement("div");t.style.position="absolute",t.style.top="-99999px",t.style.left="-99999px",t.style.width=`calc(${e})`,document.body.appendChild(t);const r=t.getBoundingClientRect().width;return t.remove(),r}const VERSION="15.24.0",EditorModeKeymap=(e,t)=>{if(e.addKeymap(()=>{const r={},{onCancel:n,onSubmit:i}=t,o=e.logger.nested({source:"keymap"});return n&&(r[formatter.toPM(Action.Cancel)]=()=>{const e=n();return o.event({event:"cancel",result:e}),e}),i&&(r[formatter.toPM(Action.Submit)]=()=>{const e=i();return o.event({event:"submit",result:e}),e}),r[formatter.toPM(Action.__debug)]=()=>(debug(),!0),r}),t.ignoreKeysList?.length){const r=()=>!0,n={};for(const e of t.ignoreKeysList)n[e]=r;e.addKeymap(()=>n,e.Priority.Lowest)}};function debug(){["YFM-Editor Debug info",`Version: ${VERSION}`].join("\n")}const ZeroPreset=(e,t)=>{e.use(BaseSchema,t.baseSchema??{}).use(BaseKeymap).use(BaseInputRules).use(BaseStyles,t.baseStyles??{})},CommonMarkPreset=(e,t)=>{e.use(ZeroPreset,t),e.use(Html).use(HorizontalRule).use(Code,t.code??{}).use(Bold,t.bold??{}).use(Link,t.link??{}).use(Lists,t.lists??{}).use(Italic,t.italic??{}).use(Breaks,t.breaks??{}).use(CodeBlock,t.codeBlock??{}).use(Blockquote,t.blockquote??{}),!1!==t.image&&(isFunction$1(t.image)?e.use(t.image):e.use(Image$1,t.image??{})),!1!==t.heading&&(isFunction$1(t.heading)?e.use(t.heading):e.use(Heading,t.heading??{}))},DefaultPreset=(e,t)=>{e.use(CommonMarkPreset,t),e.use(Strike,t.strike??{}),e.use(Table$1)},YfmPreset=(e,t)=>{e.use(DefaultPreset,{...t,image:!1,heading:!1}),e.use(Deflist,t.deflist??{}).use(Subscript$1).use(Superscript$1).use(Underline,t.underline??{}).use(Checkbox,t.checkbox??{}).use(ImgSize,t.imgSize??{}).use(Monospace).use(Video,t.video??{}).use(YfmConfigs,t.yfmConfigs??{}).use(YfmCut,t.yfmCut??{}).use(YfmNote,t.yfmNote??{}).use(YfmFile,t.yfmFile??{}).use(YfmHeading,t.yfmHeading??{}).use(YfmTable,t.yfmTable??{}).use(YfmTabs)},FullPreset=(e,t)=>{e.use(YfmPreset,t),e.use(Mark).use(Color),t.emoji&&e.use(Emoji$1,t.emoji)},math_hint$1="Math uses",math_hint_katex$1="Katex syntax",en$3={math_hint:math_hint$1,math_hint_katex:math_hint_katex$1},math_hint="   ",math_hint_katex=" Katex",ru$3={math_hint:math_hint,math_hint_katex:math_hint_katex},KEYSET$3="hints";registerKeyset(KEYSET$3,{en:en$3,ru:ru$3});const bold$1="Bold",checkbox$1="Checkbox",code$1="Code",code_inline$1="Inline code",codeblock$1="Code block",colorify$1="Text color",colorify__color_blue$1="Blue",colorify__color_default$1="Default",colorify__color_gray$1="Gray",colorify__color_green$1="Green",colorify__color_orange$1="Orange",colorify__color_red$1="Red",colorify__color_violet$1="Violet",colorify__color_yellow$1="Yellow",colorify__group_text$1="Text",cut$1="Cut",emoji$1="Emoji",emoji__hint$1="Emojis can be added in WYSIWYG or manually with markup",file$1="File",gpt$1="GPT widget",heading$3="Heading",heading1$1="Heading 1",heading2$1="Heading 2",heading3$1="Heading 3",heading4$1="Heading 4",heading5$1="Heading 5",heading6$1="Heading 6",hrule$1="Separator",html$1="HTML",image$1="Image",italic$1="Italic",link$1="Link",list$1="List",list__action_lift$1="Lift item",list__action_sink$1="Sink item",list_action_disabled$1="Contradicts the logic of the list",mark$1="Marked",math$1="Math",math_block$1="Math block",math_inline$1="Inline math",mermaid$1="Mermaid",mono$1="Monospace",more_action$1="More action",move_list$1="Move list item",note$1="Note",olist$1="Ordered list",quote$1="Quote",quotelink$1="Quote link",redo$1="Redo",strike$1="Strikethrough",table$1="Table",tabs$1="Tabs",text$3="Text",ulist$1="Bullet list",underline$1="Underline",undo$1="Undo",en$2={bold:bold$1,checkbox:checkbox$1,code:code$1,code_inline:code_inline$1,codeblock:codeblock$1,colorify:colorify$1,colorify__color_blue:colorify__color_blue$1,colorify__color_default:colorify__color_default$1,colorify__color_gray:colorify__color_gray$1,colorify__color_green:colorify__color_green$1,colorify__color_orange:colorify__color_orange$1,colorify__color_red:colorify__color_red$1,colorify__color_violet:colorify__color_violet$1,colorify__color_yellow:colorify__color_yellow$1,colorify__group_text:colorify__group_text$1,cut:cut$1,emoji:emoji$1,emoji__hint:emoji__hint$1,file:file$1,"folding-heading":"Collapsed section","folding-heading__hint":"The text under the heading can be collapsed or expanded",gpt:gpt$1,heading:heading$3,heading1:heading1$1,heading2:heading2$1,heading3:heading3$1,heading4:heading4$1,heading5:heading5$1,heading6:heading6$1,hrule:hrule$1,html:html$1,image:image$1,italic:italic$1,link:link$1,list:list$1,list__action_lift:list__action_lift$1,list__action_sink:list__action_sink$1,list_action_disabled:list_action_disabled$1,mark:mark$1,math:math$1,math_block:math_block$1,math_inline:math_inline$1,mermaid:mermaid$1,mono:mono$1,more_action:more_action$1,move_list:move_list$1,note:note$1,olist:olist$1,quote:quote$1,quotelink:quotelink$1,redo:redo$1,strike:strike$1,table:table$1,tabs:tabs$1,text:text$3,ulist:ulist$1,underline:underline$1,undo:undo$1},bold="",checkbox=" ",code="",code_inline="  ",codeblock=" ",colorify=" ",colorify__color_blue="",colorify__color_default="",colorify__color_gray="",colorify__color_green="",colorify__color_orange="",colorify__color_red="",colorify__color_violet="",colorify__color_yellow="",colorify__group_text="",cut="",emoji="",emoji__hint="    WYSIWYG      ",file="",gpt="GPT-",heading$2="",heading1=" 1",heading2=" 2",heading3=" 3",heading4=" 4",heading5=" 5",heading6=" 6",hrule="",html="HTML",image="",italic="",link="",list="",list__action_lift=" ",list__action_sink=" ",list_action_disabled="  ",mark="",math="",math_block="  ",math_inline="  ",mermaid="Mermaid",mono="",more_action=" ",move_list="  ",note="",olist=" ",quote="",quotelink="-",redo="",strike="",table="",tabs="",text$2="",ulist=" ",underline="",undo="",ru$2={bold:bold,checkbox:checkbox,code:code,code_inline:code_inline,codeblock:codeblock,colorify:colorify,colorify__color_blue:colorify__color_blue,colorify__color_default:colorify__color_default,colorify__color_gray:colorify__color_gray,colorify__color_green:colorify__color_green,colorify__color_orange:colorify__color_orange,colorify__color_red:colorify__color_red,colorify__color_violet:colorify__color_violet,colorify__color_yellow:colorify__color_yellow,colorify__group_text:colorify__group_text,cut:cut,emoji:emoji,emoji__hint:emoji__hint,file:file,"folding-heading":" ","folding-heading__hint":"      ",gpt:gpt,heading:heading$2,heading1:heading1,heading2:heading2,heading3:heading3,heading4:heading4,heading5:heading5,heading6:heading6,hrule:hrule,html:html,image:image,italic:italic,link:link,list:list,list__action_lift:list__action_lift,list__action_sink:list__action_sink,list_action_disabled:list_action_disabled,mark:mark,math:math,math_block:math_block,math_inline:math_inline,mermaid:mermaid,mono:mono,more_action:more_action,move_list:move_list,note:note,olist:olist,quote:quote,quotelink:quotelink,redo:redo,strike:strike,table:table,tabs:tabs,text:text$2,ulist:ulist,underline:underline,undo:undo},KEYSET$2="menubar",i18n$2=registerKeyset(KEYSET$2,{en:en$2,ru:ru$2}),b$b=cn("toolbar-button-with-popup-menu"),ToolbarButtonWithPopupMenu=({disablePortal:e,className:t,focus:r,onClick:n,icon:i,iconClassName:o,chevronIconClassName:s,title:a,menuItems:l,_selectionType:c,qa:u,qaMenu:d,...p})=>{const[h,f]=useElementState(),[m,,g,b]=useBooleanState(!1),y=useTargetZIndex(LAYOUT.STICKY_TOOLBAR),T=reactExports.useMemo(()=>groupBy(l.map(e=>({...e,group:e.group||""})),"group"),[l]),E=l.some(e=>!e.ignoreActive&&!0===e.action.isActive()),O=l.every(e=>!1===e.action.isEnable()),S=!O&&m,x=m&&!S;reactExports.useEffect(()=>{x&&g()},[g,x]);const[v,_]="light"===c?[S?"normal":E?"flat-action":"flat",S&&E]:[E||S?"normal":"flat",E],A=isFunction$1(a)?a():a;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ActionTooltip,{disabled:S,openDelay:ToolbarTooltipDelay.Open,closeDelay:ToolbarTooltipDelay.Close,title:A,children:jsxRuntimeExports.jsxs(Button,{size:"m",ref:f,view:v,selected:_,disabled:O,className:b$b(null,[t]),onClick:b,"aria-label":A,qa:u,...p,children:[jsxRuntimeExports.jsx(Icon,{data:i.data,size:i.size,className:o}),"",jsxRuntimeExports.jsx(Icon,{data:ChevronDown,className:s})]})}),jsxRuntimeExports.jsx(Popup,{open:S,disablePortal:e,anchorElement:h,onOpenChange:e=>{e||g()},zIndex:"number"==typeof y?y:void 0,children:jsxRuntimeExports.jsx(Menu,{size:"l",qa:d,"data-toolbar-menu-for":A,children:Object.entries(T).map(([e,t],i)=>jsxRuntimeExports.jsx(Menu.Group,{label:e,className:b$b("menu-group"),children:t.map(({id:e,icon:t,iconSize:i=16,action:o,text:s,iconClassname:a})=>jsxRuntimeExports.jsx(Menu.Item,{iconStart:jsxRuntimeExports.jsx(Icon,{data:t,size:i,className:a}),active:o.isActive(),disabled:!o.isEnable(),onClick:()=>{g(),r(),o.run(),n?.(e)},extraProps:{"aria-label":s},children:s},e))},i))})})]})},b$a=cn("toolbar-colors"),textColorIcon=icons.textColor,ToolbarColors=e=>{const{exec:t,onClick:r,enable:n,currentColor:i,withDefault:o}=e,s=void 0===i,a=e=>()=>{s&&""===e||t(e),r?.("colorify",{color:""===e?"default":e})},l=[Colors.Gray,Colors.Yellow,Colors.Orange,Colors.Red,Colors.Green,Colors.Blue,Colors.Violet].map(e=>({id:e,icon:textColorIcon.data,iconSize:textColorIcon.size??16,text:i18n$2(`colorify__color_${e}`),iconClassname:b$a("item-icon",{color:e}),action:{run:a(e),isEnable:()=>Boolean(n),isActive:()=>e===i,meta(){}},group:i18n$2("colorify__group_text")}));return o&&l.unshift({id:"default",icon:textColorIcon.data,iconSize:textColorIcon.size??16,text:i18n$2("colorify__color_default"),iconClassname:b$a("item-icon",{color:"default"}),group:i18n$2("colorify__group_text"),ignoreActive:!0,action:{run:a(""),isEnable:()=>Boolean(n),isActive:()=>s,meta(){}}}),jsxRuntimeExports.jsx(ToolbarButtonWithPopupMenu,{qa:e.qa,focus:e.focus,onClick:e.onClick,className:e.className,qaMenu:"g-md-toolbar-menu",title:i18n$2("colorify"),menuItems:l,icon:textColorIcon,_selectionType:"light",iconClassName:b$a("menu-icon",{color:i}),chevronIconClassName:b$a("chevron-icon",{color:i}),"data-selected-color":i??"default"})},WToolbarColors=({disablePortal:e,className:t,editor:r,focus:n,onClick:i})=>{const o=r.actions.colorify,s=o.meta();return jsxRuntimeExports.jsx(ToolbarColors,{active:o.isActive(),enable:o.isEnable(),currentColor:s,exec:e=>{o.run({color:e===s?"":e})},disablePortal:e,className:t,focus:n,onClick:i,withDefault:!0})},text$1="This is a text without a title. \nBoth the title and the text \nbelow it can be highlighted in bold, italics, color, \nstrikethrough, and underline. You can also add lists, \ntables, links, formulas, anchors, \nand code blocks.",heading$1="Text",en$1={text:text$1,"text-with-head":"This is the text with the title. \nBoth the title and the text \nbelow it can be highlighted in bold, italics, color, \nstrikethrough, and underline. You can also add lists, \ntables, links, formulas, anchors, \nand code blocks.",heading:heading$1},text="   .  ,  \n     \n, , , \n  .    \n , , , \n,    ",heading=" ",ru$1={text:text,"text-with-head":"   .  ,  \n     \n, , , \n  .    \n , , , \n,    .",heading:heading},KEYSET$1="action-previews",i18n$1=registerKeyset(KEYSET$1,{en:en$1,ru:ru$1}),b$9=cn("action-preview"),ActionPreview=({children:e})=>jsxRuntimeExports.jsx("div",{className:b$9(null,["yfm"]),children:e}),b$8=cn("action-preview"),HeadingPreview=({level:e})=>{const t=`h${e}`;return jsxRuntimeExports.jsxs(ActionPreview,{children:[jsxRuntimeExports.jsx(t,{children:i18n$1("heading")}),jsxRuntimeExports.jsx("p",{className:b$8("text-with-head"),children:i18n$1("text-with-head")})]})},b$7=cn("action-preview"),TextPreview=()=>jsxRuntimeExports.jsx(ActionPreview,{children:jsxRuntimeExports.jsx("p",{className:b$7("text"),children:i18n$1("text")})}),wTextItemData={id:ActionName.paragraph,title:i18n$2.bind(null,"text"),icon:icons.text,hotkey:formatter.toView(Action.Text),exec:e=>e.actions.toParagraph.run(),isActive:e=>e.actions.toParagraph.isActive(),isEnable:e=>e.actions.toParagraph.isEnable(),doNotActivateList:!0,preview:jsxRuntimeExports.jsx(TextPreview,{})},wHeading1ItemData={id:ActionName.heading1,title:i18n$2.bind(null,"heading1"),icon:icons.h1,hotkey:formatter.toView(Action.Heading1),exec:e=>e.actions.toH1.run(),isActive:e=>e.actions.toH1.isActive(),isEnable:e=>e.actions.toH1.isEnable(),aliases:["h1"],preview:jsxRuntimeExports.jsx(HeadingPreview,{level:1})},wHeading2ItemData={id:ActionName.heading2,title:i18n$2.bind(null,"heading2"),icon:icons.h2,hotkey:formatter.toView(Action.Heading2),exec:e=>e.actions.toH2.run(),isActive:e=>e.actions.toH2.isActive(),isEnable:e=>e.actions.toH2.isEnable(),aliases:["h2"],preview:jsxRuntimeExports.jsx(HeadingPreview,{level:2})},wHeading3ItemData={id:ActionName.heading3,title:i18n$2.bind(null,"heading3"),icon:icons.h3,hotkey:formatter.toView(Action.Heading3),exec:e=>e.actions.toH3.run(),isActive:e=>e.actions.toH3.isActive(),isEnable:e=>e.actions.toH3.isEnable(),aliases:["h3"],preview:jsxRuntimeExports.jsx(HeadingPreview,{level:3})},wHeading4ItemData={id:ActionName.heading4,title:i18n$2.bind(null,"heading4"),icon:icons.h4,hotkey:formatter.toView(Action.Heading4),exec:e=>e.actions.toH4.run(),isActive:e=>e.actions.toH4.isActive(),isEnable:e=>e.actions.toH4.isEnable(),aliases:["h4"],preview:jsxRuntimeExports.jsx(HeadingPreview,{level:4})},wHeading5ItemData={id:ActionName.heading5,title:i18n$2.bind(null,"heading5"),icon:icons.h5,hotkey:formatter.toView(Action.Heading5),exec:e=>e.actions.toH5.run(),isActive:e=>e.actions.toH5.isActive(),isEnable:e=>e.actions.toH5.isEnable(),aliases:["h5"],preview:jsxRuntimeExports.jsx(HeadingPreview,{level:5})},wHeading6ItemData={id:ActionName.heading6,title:i18n$2.bind(null,"heading6"),icon:icons.h6,hotkey:formatter.toView(Action.Heading6),exec:e=>e.actions.toH6.run(),isActive:e=>e.actions.toH6.isActive(),isEnable:e=>e.actions.toH6.isEnable(),aliases:["h6"],preview:jsxRuntimeExports.jsx(HeadingPreview,{level:6})},wHeadingListConfig={title:i18n$2.bind(null,"heading"),data:[wTextItemData,wHeading1ItemData,wHeading2ItemData,wHeading3ItemData,wHeading4ItemData,wHeading5ItemData,wHeading6ItemData]},b$6=cn("toolbar-select"),ToolbarSelect=({disablePortal:e,className:t,editor:r,focus:n,onClick:i,items:o,qa:s})=>{const a=o.find(e=>e.isActive(r));return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Select,{qa:s,size:"m",view:"clear",className:t,disablePortal:e,onOpenChange:n,value:a?[a.id]:void 0,options:o.map(e=>({data:e,value:e.id,text:isFunction$1(e.title)?e.title():e.title})),renderOption:({text:e,data:t})=>{const{icon:r,hotkey:n,hint:i,preview:o}=t,s=isFunction$1(i)?i():i;return jsxRuntimeExports.jsx(PreviewTooltip,{preview:o,children:jsxRuntimeExports.jsxs("div",{"aria-label":e,className:b$6("item"),children:[jsxRuntimeExports.jsx("div",{className:b$6("item-icon"),children:jsxRuntimeExports.jsx(Icon,{data:r.data,size:Number(r.size??16)+2})}),jsxRuntimeExports.jsxs("div",{className:b$6("item-content"),children:[e,jsxRuntimeExports.jsxs("div",{className:b$6("item-extra"),children:[n&&jsxRuntimeExports.jsx(Hotkey,{value:n}),s&&jsxRuntimeExports.jsx(HelpMark,{popoverProps:{modal:!1},className:b$6("item-hint"),children:s})]})]})]})})},onUpdate:([e])=>{o.find(t=>t.id===e)?.exec(r),i?.(e),n()}})})},WToolbarTextSelect=({focus:e,onClick:t,editor:r,className:n,disablePortal:i})=>jsxRuntimeExports.jsx(ToolbarSelect,{qa:"g-md-toolbar-text-select",items:wHeadingListConfig.data,focus:e,editor:r,onClick:t,className:n,disablePortal:i}),wUndoItemData={id:ActionName.undo,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"undo"),icon:icons.undo,hotkey:formatter.toView(Action.Undo),hintWhenDisabled:!1,exec:e=>e.actions.undo.run(),isActive:e=>e.actions.undo.isActive(),isEnable:e=>e.actions.undo.isEnable()},wRedoItemData={id:ActionName.redo,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"redo"),icon:icons.redo,hotkey:formatter.toView(Action.Redo),hintWhenDisabled:!1,exec:e=>e.actions.redo.run(),isActive:e=>e.actions.redo.isActive(),isEnable:e=>e.actions.redo.isEnable()},wBoldItemData={id:ActionName.bold,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"bold"),icon:icons.bold,hotkey:formatter.toView(Action.Bold),exec:e=>e.actions.bold.run(),isActive:e=>e.actions.bold.isActive(),isEnable:e=>e.actions.bold.isEnable()},wItalicItemData={id:ActionName.italic,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"italic"),icon:icons.italic,hotkey:formatter.toView(Action.Italic),exec:e=>e.actions.italic.run(),isActive:e=>e.actions.italic.isActive(),isEnable:e=>e.actions.italic.isEnable()},wUnderlineItemData={id:ActionName.underline,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"underline"),icon:icons.underline,hotkey:formatter.toView(Action.Underline),exec:e=>e.actions.underline.run(),isActive:e=>e.actions.underline.isActive(),isEnable:e=>e.actions.underline.isEnable()},wStrikethroughItemData={id:ActionName.strike,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"strike"),icon:icons.strikethrough,hotkey:formatter.toView(Action.Strike),exec:e=>e.actions.strike.run(),isActive:e=>e.actions.strike.isActive(),isEnable:e=>e.actions.strike.isEnable()},wMonospaceItemData={id:ActionName.mono,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"mono"),icon:icons.mono,exec:e=>e.actions.mono.run(),isActive:e=>e.actions.mono.isActive(),isEnable:e=>e.actions.mono.isEnable()},wMarkedItemData={id:ActionName.mark,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"mark"),icon:icons.mark,exec:e=>e.actions.mark.run(),isActive:e=>e.actions.mark.isActive(),isEnable:e=>e.actions.mark.isEnable()},wCheckboxItemData={id:ActionName.checkbox,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"checkbox"),icon:icons.checklist,exec:e=>e.actions.addCheckbox.run(),isActive:e=>e.actions.addCheckbox.isActive(),isEnable:e=>e.actions.addCheckbox.isEnable()},wLinkItemData={id:ActionName.link,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"link"),icon:icons.link,hotkey:formatter.toView(Action.Link),exec:e=>e.actions.addLink.run(),isActive:e=>e.actions.addLink.isActive(),isEnable:e=>e.actions.addLink.isEnable()},wQuoteItemData={id:ActionName.quote,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"quote"),icon:icons.quote,hotkey:formatter.toView(Action.Quote),exec:e=>e.actions.quote.run(),isActive:e=>e.actions.quote.isActive(),isEnable:e=>e.actions.quote.isEnable()},wCutItemData={id:ActionName.yfm_cut,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"cut"),icon:icons.cut,hotkey:formatter.toView(Action.Cut),exec:e=>e.actions.toYfmCut.run(),isActive:e=>e.actions.toYfmCut.isActive(),isEnable:e=>e.actions.toYfmCut.isEnable()},wNoteItemData={id:ActionName.yfm_note,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"note"),icon:icons.note,hotkey:formatter.toView(Action.Note),exec:e=>e.actions.toYfmNote.run(),isActive:e=>e.actions.toYfmNote.isActive(),isEnable:e=>e.actions.toYfmNote.isEnable()},wTableItemData={id:ActionName.table,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"table"),icon:icons.table,exec:e=>e.actions.createYfmTable.run(),isActive:e=>e.actions.createYfmTable.isActive(),isEnable:e=>e.actions.createYfmTable.isEnable()},wCodeItemData={id:ActionName.code_inline,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"code_inline"),icon:icons.code,hotkey:formatter.toView(Action.Code),exec:e=>e.actions.code.run(),isActive:e=>e.actions.code.isActive(),isEnable:e=>e.actions.code.isEnable()},wImageItemData={id:ActionName.image,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"image"),icon:icons.image,exec:e=>e.actions.addImageWidget.run(),isActive:e=>e.actions.addImageWidget.isActive(),isEnable:e=>e.actions.addImageWidget.isEnable()},wFileItemData={id:ActionName.file,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"file"),icon:icons.file,exec:e=>e.actions.addFile.run(),isActive:e=>e.actions.addFile.isActive(),isEnable:e=>e.actions.addFile.isEnable()},wTabsItemData={id:ActionName.tabs,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"tabs"),icon:icons.tabs,exec:e=>e.actions.toYfmTabs.run(),isActive:e=>e.actions.toYfmTabs.isActive(),isEnable:e=>e.actions.toYfmTabs.isEnable()};ActionName.math_inline,ToolbarDataType.SingleButton,i18n$2.bind(null,"math_inline"),ActionName.math_block,ToolbarDataType.SingleButton,i18n$2.bind(null,"math_block"),ActionName.yfm_html_block,ToolbarDataType.SingleButton,i18n$2.bind(null,"html"),ActionName.mermaid,ToolbarDataType.SingleButton,i18n$2.bind(null,"mermaid");const wCodeBlockItemData={id:ActionName.code_block,title:i18n$2.bind(null,"codeblock"),icon:icons.codeBlock,hotkey:formatter.toView(Action.CodeBlock),exec:e=>e.actions.toCodeBlock.run(),isActive:e=>e.actions.toCodeBlock.isActive(),isEnable:e=>e.actions.toCodeBlock.isEnable()},wHruleItemData={id:ActionName.horizontalrule,title:i18n$2.bind(null,"hrule"),icon:icons.horizontalRule,exec:e=>e.actions.hRule.run(),isActive:e=>e.actions.hRule.isActive(),isEnable:e=>e.actions.hRule.isEnable()},wEmojiItemData={id:ActionName.emoji,title:i18n$2.bind(null,"emoji"),icon:icons.emoji,exec:e=>e.actions.openEmojiSuggest.run({}),isActive:e=>e.actions.openEmojiSuggest.isActive(),isEnable:e=>e.actions.openEmojiSuggest.isEnable()},wToggleHeadingFoldingItemData={id:"folding-heading",type:ToolbarDataType.SingleButton,icon:icons.foldingHeading,title:()=>i18n$2("folding-heading"),hint:()=>i18n$2("folding-heading__hint"),isActive:e=>e.actions.toggleHeadingFolding?.isActive()??!1,isEnable:e=>e.actions.toggleHeadingFolding?.isEnable()??!1,exec:e=>e.actions.toggleHeadingFolding.run(),condition:"enabled"},textContextItemData={id:"text",type:ToolbarDataType.ReactComponent,component:WToolbarTextSelect,props:{disablePortal:!0},width:0,condition:({selection:{$from:e,$to:t},schema:r})=>{if(!e.sameParent(t))return!1;const{parent:n}=e;return n.type===pType(r)||n.type===headingType(r)}};ToolbarDataType.ListButton,i18n$2.bind(null,"math");const wBulletListItemData={id:ActionName.bulletList,title:i18n$2.bind(null,"ulist"),icon:icons.bulletList,hotkey:formatter.toView(Action.BulletList),exec:e=>e.actions.toBulletList.run(),isActive:e=>e.actions.toBulletList.isActive(),isEnable:e=>e.actions.toBulletList.isEnable()},wOrderedListItemData={id:ActionName.orderedList,title:i18n$2.bind(null,"olist"),icon:icons.orderedList,hotkey:formatter.toView(Action.OrderedList),exec:e=>e.actions.toOrderedList.run(),isActive:e=>e.actions.toOrderedList.isActive(),isEnable:e=>e.actions.toOrderedList.isEnable()},wSinkListItemData={id:ActionName.sinkListItem,title:i18n$2.bind(null,"list__action_sink"),hintWhenDisabled:()=>i18n$2("list_action_disabled"),icon:icons.sink,hotkey:formatter.toView(Action.SinkListItem),exec:e=>e.actions.sinkListItem.run(),isActive:e=>e.actions.sinkListItem.isActive(),isEnable:e=>e.actions.sinkListItem.isEnable()},wLiftListItemData={id:ActionName.liftListItem,title:i18n$2.bind(null,"list__action_lift"),hintWhenDisabled:()=>i18n$2("list_action_disabled"),icon:icons.lift,hotkey:formatter.toView(Action.LiftListItem),exec:e=>e.actions.liftListItem.run(),isActive:e=>e.actions.liftListItem.isActive(),isEnable:e=>e.actions.liftListItem.isEnable()};i18n$2.bind(null,"list"),ActionName.sinkListItem,icons.sink,ActionName.liftListItem,icons.lift,i18n$2.bind(null,"code"),i18n$2.bind(null,"math"),ToolbarDataType.ListButton,icons.headline,i18n$2.bind(null,"heading"),ToolbarDataType.ListButton,icons.bulletList,i18n$2.bind(null,"list"),ToolbarDataType.ReactComponent,ToolbarDataType.ListButton,icons.code,i18n$2.bind(null,"code");const wSelectionMenuConfig=[[wToggleHeadingFoldingItemData,textContextItemData],[wBoldItemData,wItalicItemData,wUnderlineItemData,wStrikethroughItemData,wMonospaceItemData,wMarkedItemData,wCodeItemData],[{id:"colorify",type:ToolbarDataType.ReactComponent,component:WToolbarColors,props:{disablePortal:!0},width:42},wLinkItemData]];ToolbarDataType.ListButton,icons.headline,i18n$2.bind(null,"heading"),ToolbarDataType.ListButton,icons.bulletList,i18n$2.bind(null,"list"),ToolbarDataType.ListButton,icons.code,i18n$2.bind(null,"code"),ToolbarDataType.ListButton,icons.headline,i18n$2.bind(null,"heading"),ToolbarDataType.ListButton,icons.bulletList,i18n$2.bind(null,"list"),ToolbarDataType.ListButton,icons.code,i18n$2.bind(null,"code"),ToolbarDataType.ListButton,icons.headline,i18n$2.bind(null,"heading"),ToolbarDataType.ListButton,icons.bulletList,i18n$2.bind(null,"list"),ToolbarDataType.ListButton,icons.code,i18n$2.bind(null,"code");const wCommandMenuConfigByPreset={zero:[],commonmark:[wTextItemData,wHeading1ItemData,wHeading2ItemData,wHeading3ItemData,wHeading4ItemData,wHeading5ItemData,wHeading6ItemData,wBulletListItemData,wOrderedListItemData,wSinkListItemData,wLiftListItemData,wLinkItemData,wQuoteItemData,wCodeBlockItemData,wHruleItemData],default:[wTextItemData,wHeading1ItemData,wHeading2ItemData,wHeading3ItemData,wHeading4ItemData,wHeading5ItemData,wHeading6ItemData,wBulletListItemData,wOrderedListItemData,wSinkListItemData,wLiftListItemData,wLinkItemData,wQuoteItemData,wCodeBlockItemData,wHruleItemData],yfm:[wTextItemData,wHeading1ItemData,wHeading2ItemData,wHeading3ItemData,wHeading4ItemData,wHeading5ItemData,wHeading6ItemData,wBulletListItemData,wOrderedListItemData,wSinkListItemData,wLiftListItemData,wLinkItemData,wQuoteItemData,wNoteItemData,wCutItemData,wCodeBlockItemData,wCheckboxItemData,wTableItemData,wImageItemData,wHruleItemData,wFileItemData,wTabsItemData],full:[wTextItemData,wHeading1ItemData,wHeading2ItemData,wHeading3ItemData,wHeading4ItemData,wHeading5ItemData,wHeading6ItemData,wBulletListItemData,wOrderedListItemData,wSinkListItemData,wLiftListItemData,wLinkItemData,wQuoteItemData,wNoteItemData,wCutItemData,wCodeBlockItemData,wCheckboxItemData,wTableItemData,wImageItemData,wHruleItemData,wEmojiItemData,wFileItemData,wTabsItemData]};wCommandMenuConfigByPreset.zero.slice(),wCommandMenuConfigByPreset.commonmark.slice(),wCommandMenuConfigByPreset.default.slice(),wCommandMenuConfigByPreset.yfm.slice(),wCommandMenuConfigByPreset.full.slice();const wSelectionMenuConfigByPreset={zero:[],commonmark:[[textContextItemData],[wBoldItemData,wItalicItemData,wCodeItemData],[wLinkItemData]],default:[[textContextItemData],[wBoldItemData,wItalicItemData,wStrikethroughItemData,wCodeItemData],[wLinkItemData]],yfm:[[textContextItemData],[wBoldItemData,wItalicItemData,wStrikethroughItemData,wMonospaceItemData,wCodeItemData],[wLinkItemData]],full:wSelectionMenuConfig.slice()},emojiDefs={grinning:"",smiley:"",smile:"",grin:"",laughing:"",satisfied:"",sweat_smile:"",rofl:"",joy:"",slightly_smiling_face:"",upside_down_face:"",wink:"",blush:"",innocent:"",smiling_face_with_three_hearts:"",heart_eyes:"",star_struck:"",kissing_heart:"",kissing:"",kissing_closed_eyes:"",kissing_smiling_eyes:"",smiling_face_with_tear:"",yum:"",stuck_out_tongue:"",stuck_out_tongue_winking_eye:"",zany_face:"",stuck_out_tongue_closed_eyes:"",money_mouth_face:"",hugs:"",hand_over_mouth:"",shushing_face:"",thinking:"",zipper_mouth_face:"",raised_eyebrow:"",neutral_face:"",expressionless:"",no_mouth:"",smirk:"",unamused:"",roll_eyes:"",grimacing:"",lying_face:"",relieved:"",pensive:"",sleepy:"",drooling_face:"",sleeping:"",mask:"",face_with_thermometer:"",face_with_head_bandage:"",nauseated_face:"",vomiting_face:"",sneezing_face:"",hot_face:"",cold_face:"",woozy_face:"",dizzy_face:"",exploding_head:"",cowboy_hat_face:"",partying_face:"",disguised_face:"",sunglasses:"",nerd_face:"",monocle_face:"",confused:"",worried:"",slightly_frowning_face:"",open_mouth:"",hushed:"",astonished:"",flushed:"",pleading_face:"",frowning:"",anguished:"",fearful:"",cold_sweat:"",disappointed_relieved:"",cry:"",sob:"",scream:"",confounded:"",persevere:"",disappointed:"",sweat:"",weary:"",tired_face:"",yawning_face:"",triumph:"",rage:"",pout:"",angry:"",cursing_face:"",smiling_imp:"",imp:"",skull:"",skull_and_crossbones:"",shit:"",clown_face:"",japanese_ogre:"",japanese_goblin:"",ghost:"",alien:"",space_invader:"",robot:"",smiley_cat:"",smile_cat:"",joy_cat:"",heart_eyes_cat:"",smirk_cat:"",kissing_cat:"",scream_cat:"",crying_cat_face:"",pouting_cat:"",see_no_evil:"",hear_no_evil:"",speak_no_evil:"",kiss:"",broken_heart:"",heart:"",zzz:"",wave:"",raised_back_of_hand:"",raised_hand_with_fingers_splayed:"",hand:"",raised_hand:"",vulcan_salute:"",ok_hand:"",pinched_fingers:"",pinching_hand:"",v:"",crossed_fingers:"",love_you_gesture:"",metal:"",call_me_hand:"",point_left:"",point_right:"",point_up_2:"",middle_finger:"",fu:"",point_down:"",point_up:"","+1":"",thumbsup:"","-1":"",thumbsdown:"",fist:"",punch:"",fist_left:"",fist_right:"",clap:"",raised_hands:"",open_hands:"",palms_up_together:"",handshake:"",pray:"",writing_hand:"",nail_care:"",selfie:"",muscle:"",mechanical_arm:"",eyes:"",eye:"",footprints:"",monkey_face:"",monkey:"",dog:"",wolf:"",fox_face:"",cat:"",horse:"",unicorn:"",cow:"",pig:"",mouse:"",chicken:"",rooster:"",bird:"",four_leaf_clover:"",egg:"",cake:"",coffee:"",wine_glass:"",beer:"",beers:"",clinking_glasses:"",house:"",bank:"",sunrise:"",taxi:"",car:"",stop_sign:"",construction:"",anchor:"",rocket:"",hourglass:"",alarm_clock:"",moon:"",zap:"",fire:"",tada:"",gift:"",trophy:"","8ball":"",video_game:"",spades:"",hearts:"",diamonds:"",clubs:"",chess_pawn:"",art:"",crown:"",mega:"",bell:"",no_bell:"",mag:"",lock:"",unlock:"",key:"",gun:"",link:"",drop_of_blood:"",pill:"",bed:"",moyai:"",warning:"",children_crossing:"",no_entry:"",no_entry_sign:"",no_bicycles:"",no_smoking:"",do_not_litter:"","non-potable_water":"",no_pedestrians:"",no_mobile_phones:"",underage:"",radioactive:"",biohazard:"",back:"",end:"",on:"",soon:"",top:"",cinema:"",infinity:"",bangbang:"",interrobang:"",question:"",exclamation:"",o:"",x:"",copyright:"",registered:"",tm:"",new:"",ok:"",sos:"",up:"",vs:"",radio_button:"",checkered_flag:""},DEFAULT_IGNORED_KEYS=["Tab","Shift-Tab"],BundlePreset=(e,t)=>{e.context.set("directiveSyntax",t.directiveSyntax);const r={...t,baseStyles:{attributes:{"aria-live":"",...t.baseStyles?.attributes}},cursor:{dropOptions:{color:"var(--g-color-line-brand)",width:2}},clipboard:{pasteFileHandler:t.fileUploadHandler,...t.clipboard},selectionContext:{config:wSelectionMenuConfigByPreset.zero,...t.selectionContext},commandMenu:{actions:wCommandMenuConfigByPreset.zero,...t.commandMenu},history:{undoKey:formatter.toPM(Action.Undo),redoKey:formatter.toPM(Action.Redo),...t.history},baseSchema:{paragraphKey:formatter.toPM(Action.Text),paragraphPlaceholder:(e,r)=>{const{value:n,behavior:i}=t.placeholderOptions||{};return{"empty-row":!e.text,"empty-row-top-level":!e.text&&r?.type.name===BaseNode$1.Doc,"empty-doc":!e.text&&r?.type.name===BaseNode$1.Doc&&1===r.childCount}[i||"empty-doc"]?"function"==typeof n?n():n??i18n$9(t.mobile?"doc_empty_mobile":"doc_empty"):null},preserveEmptyRows:t.preserveEmptyRows,...t.baseSchema}},n={...r,selectionContext:{config:wSelectionMenuConfigByPreset.commonmark,...t.selectionContext},commandMenu:{actions:wCommandMenuConfigByPreset.commonmark,...t.commandMenu},breaks:{preferredBreak:t.mdBreaks?"soft":"hard",...t.breaks},bold:{boldKey:formatter.toPM(Action.Bold),...t.bold},italic:{italicKey:formatter.toPM(Action.Italic),...t.italic},code:{codeKey:formatter.toPM(Action.Code),...t.code},codeBlock:{codeBlockKey:formatter.toPM(Action.CodeBlock),...t.codeBlock},blockquote:{qouteKey:formatter.toPM(Action.Quote),...t.blockquote},link:{linkKey:formatter.toPM(Action.Link),...t.link},lists:{ulKey:formatter.toPM(Action.BulletList),olKey:formatter.toPM(Action.OrderedList),ulInputRules:{plus:!1},...t.lists},image:{parseInsertedUrlAsImage:t.imgSize?.parseInsertedUrlAsImage}},i={...n,selectionContext:{config:wSelectionMenuConfigByPreset.default,...t.selectionContext},commandMenu:{actions:wCommandMenuConfigByPreset.default,...t.commandMenu},strike:{strikeKey:formatter.toPM(Action.Strike),...t.strike}},o={...i,yfmConfigs:{disableAttrs:t.disableMdAttrs,...t.yfmConfigs},selectionContext:{config:wSelectionMenuConfigByPreset.yfm,...t.selectionContext},commandMenu:{actions:wCommandMenuConfigByPreset.yfm,...t.commandMenu},underline:{underlineKey:formatter.toPM(Action.Underline),...t.underline},imgSize:{imageUploadHandler:t.fileUploadHandler,needToSetDimensionsForUploadedImages:t.needToSetDimensionsForUploadedImages,enableNewImageSizeCalculation:t.enableNewImageSizeCalculation,...t.imgSize},checkbox:{checkboxLabelPlaceholder:()=>i18n$9("checkbox"),...t.checkbox},deflist:{deflistTermPlaceholder:()=>i18n$9("deflist_term"),deflistDescPlaceholder:()=>i18n$9("deflist_desc")},yfmCut:{yfmCutKey:formatter.toPM(Action.Cut),yfmCutTitlePlaceholder:()=>i18n$9("cut_title"),yfmCutContentPlaceholder:()=>i18n$9("cut_content"),...t.yfmCut},yfmNote:{yfmNoteKey:formatter.toPM(Action.Note),yfmNoteTitlePlaceholder:()=>i18n$9("note_title"),...t.yfmNote},yfmTable:{yfmTableCellPlaceholder:()=>i18n$9("table_cell"),...t.yfmTable,controls:!t.mobile&&t.yfmTable?.controls},yfmFile:{fileUploadHandler:t.fileUploadHandler,needToSetDimensionsForUploadedImages:t.needToSetDimensionsForUploadedImages,...t.yfmFile},yfmHeading:{h1Key:formatter.toPM(Action.Heading1),h2Key:formatter.toPM(Action.Heading2),h3Key:formatter.toPM(Action.Heading3),h4Key:formatter.toPM(Action.Heading4),h5Key:formatter.toPM(Action.Heading5),h6Key:formatter.toPM(Action.Heading6),headingPlaceholder:e=>`${i18n$9("heading")} ${e.attrs[YfmHeadingAttr.Level]}`,...t.yfmHeading},placeholder:{[NoteNode.NoteContent]:()=>i18n$9("note_content")}},s={...o,selectionContext:{config:wSelectionMenuConfigByPreset.full,...t.selectionContext},commandMenu:{actions:wCommandMenuConfigByPreset.full,...t.commandMenu},emoji:{defs:emojiDefs,...t.emoji}},a=[Action.Undo,Action.Redo],l=a.concat(Action.Bold,Action.Italic,Action.Code,Action.Link,Action.Text,Action.Heading1,Action.Heading2,Action.Heading3,Action.Heading4,Action.Heading5,Action.Heading6,Action.BulletList,Action.OrderedList,Action.Quote,Action.CodeBlock),c=l.concat(Action.Strike),u=c.concat(Action.Underline,Action.Note,Action.Cut),d=u.concat();let p;switch(t.preset){case"zero":p=a,e.use(BehaviorPreset,r).use(ZeroPreset,r);break;case"commonmark":p=l,e.use(BehaviorPreset,n).use(CommonMarkPreset,n);break;case"default":p=c,e.use(BehaviorPreset,i).use(DefaultPreset,i);break;case"yfm":p=u,e.use(BehaviorPreset,o).use(YfmPreset,o);break;default:p=d,e.use(BehaviorPreset,s).use(FullPreset,s)}const h=t.ignoreKeysList?.slice()??[];h.push(...DEFAULT_IGNORED_KEYS);for(const f of p){const e=formatter.toPM(f);e&&h.push(e)}e.use(EditorModeKeymap,{onSubmit:t.onSubmit,onCancel:t.onCancel,ignoreKeysList:h})};function useMarkdownEditor(e,t=[]){const r=reactExports.useMemo(()=>{const{md:t={},initial:n={},handlers:i={},experimental:o={},markupConfig:s={},wysiwygConfig:a={},logger:l=new Logger2,mobile:c}=e,u=e.preset??"full",d=new ReactRenderStorage,p=getPMTransformers({emptyRowTransformer:o.preserveEmptyRows}),h=new DirectiveSyntaxContext(o.directiveSyntax);return new EditorImpl({...e,logger:l,preset:u,renderStorage:d,directiveSyntax:h,pmTransformers:p,md:t,initial:n,handlers:i,experimental:o,markupConfig:s,wysiwygConfig:{...a,extensions:n=>{const s=a.extensionOptions;n.use(BundlePreset,{...s,directiveSyntax:h,preset:u,reactRenderer:d,onCancel:()=>(r.emit("cancel",null),!0),onSubmit:()=>(r.emit("submit",null),!0),disableMdAttrs:a.disableMarkdownAttrs,preserveEmptyRows:o.preserveEmptyRows,placeholderOptions:a.placeholderOptions,mdBreaks:t.breaks,fileUploadHandler:i.uploadFile,needToSetDimensionsForUploadedImages:o.needToSetDimensionsForUploadedImages,enableNewImageSizeCalculation:o.enableNewImageSizeCalculation,mobile:c});{const t=a.extensions;t&&n.use(t,e.wysiwygConfig?.extensionOptions)}}}})},t);return reactExports.useLayoutEffect(()=>{function e({editorMode:e,id:t}){globalLogger.action({mode:e,source:"toolbar",action:t}),r.logger.action({mode:e,source:"toolbar",action:t})}return r.on("toolbar-action",e),()=>{r.off("toolbar-action",e),r.destroy()}},[r]),r}const IN_RESIZE_CLASSNAME="in-resize",useColResize=({onStart:e,onMove:t,onEnd:r})=>{const n=reactExports.useRef(0),i=reactExports.useRef(0),o=reactExports.useCallback(e=>{const r="touches"in e?e.touches[0]?.clientX??0:e.clientX;if(i.current===r)return;i.current=r;const o=n.current-r;t(o)},[t]),s=reactExports.useCallback(e=>{window.removeEventListener("mousemove",o),window.removeEventListener("touchmove",o),document.body.style.removeProperty("user-select");const t="touches"in e?e.touches[0]?.clientX??0:e.clientX,i=n.current-t;r(i)},[o,r]),a=reactExports.useCallback(t=>{const r="touches"in t?t.touches[0]?.clientX??0:t.clientX;n.current=r,i.current=r,window.addEventListener("mouseup",s,{once:!0}),window.addEventListener("touchend",s,{once:!0}),window.addEventListener("touchcancel",s,{once:!0}),window.addEventListener("mousemove",o),window.addEventListener("touchmove",o),document.body.style.setProperty("user-select","none"),e()},[s,o,e]);return{listeners:{onMouseDown:a,onTouchStart:a}}},HorizontalDrag=({leftElRef:e,rightElRef:t,wrapperRef:r,editor:n,onEndMove:i})=>{const o=n.cm,[s,a]=reactExports.useState((r.current?.clientWidth??0)/2),[l,c]=reactExports.useState((r.current?.clientWidth??0)/2),u=reactExports.useCallback((r,n)=>{e.current?.style?.setProperty("width",`${r}px`),t.current?.style?.setProperty("width",`${n}px`)},[e,t]),d=reactExports.useCallback(e=>[clamp(s-e,(r.current?.clientWidth??0)/8,3*(r.current?.clientWidth??0)/4),clamp(l+e,(r.current?.clientWidth??0)/8,3*(r.current?.clientWidth??0)/4)],[s,l,r]);reactExports.useEffect(()=>{u(s,l),o.requestMeasure()},[]),reactExports.useEffect(()=>{const[r,n]=[e.current,t.current];return()=>{r?.classList.remove(IN_RESIZE_CLASSNAME),n?.classList.remove(IN_RESIZE_CLASSNAME),r?.style?.removeProperty("width"),n?.style?.removeProperty("width")}},[e,t]);const p=reactExports.useCallback(()=>{r.current?.style.setProperty("user-select","none"),e.current?.classList.add(IN_RESIZE_CLASSNAME),t.current?.classList.add(IN_RESIZE_CLASSNAME)},[e,t,r]),h=reactExports.useCallback(e=>{const[t,r]=d(e);u(t,r)},[d,s,l,u]),f=reactExports.useCallback(n=>{const[s,l]=d(n);a(s),c(l),u(s,l),r.current?.style.removeProperty("user-select"),o.requestMeasure(),t.current?.classList.remove(IN_RESIZE_CLASSNAME),e.current?.classList.remove(IN_RESIZE_CLASSNAME),i?.(t.current,e.current)},[d,o,e,t,u,r]),{listeners:m}=useColResize({onStart:p,onMove:h,onEnd:f});return jsxRuntimeExports.jsx("div",{className:cnEditorComponent("resizer",{horizontal:!0}),...m,children:jsxRuntimeExports.jsx("div",{className:cnEditorComponent("gutter")})})},HorizontalDragWrapper=e=>e.isMounted?jsxRuntimeExports.jsx(HorizontalDrag,{...e}):jsxRuntimeExports.jsx("div",{className:cnEditorComponent("resizer",{horizontal:!0}),children:jsxRuntimeExports.jsx("div",{className:cnEditorComponent("gutter")})}),MarkupEditorComponent=function({editor:e,autofocus:t,className:r,children:n,qa:i}){const o=reactExports.useRef(null);return reactExports.useLayoutEffect(()=>{const t=e.markupEditor.cm.dom;return o.current&&o.current.appendChild(t),()=>{t.remove()}},[e.markupEditor]),reactExports.useEffect(()=>{e.markupEditor.cm.requestMeasure(),t&&e.markupEditor.focus()},[e.markupEditor]),jsxRuntimeExports.jsx("div",{"data-qa":i,ref:o,className:r,onClick:t=>{const r=t.target;r instanceof Element&&r.classList.contains("cm-editor")&&e.markupEditor.focus()},children:n})},b$5=cn("editor-sticky"),stickyCn={toolbar:({withSettings:e,stickyActive:t,isSticky:r},n)=>b$5({part:!!e&&"left","sticky-active":t,sticky:r},n),settings:({withToolbar:e,stickyActive:t},r)=>b$5({part:!!e&&"right","sticky-active":t,clear:!e,sticky:!0},r)};function ToolbarView({editor:e,editorMode:t,toolbarEditor:r,toolbarFocus:n,toolbarConfig:i,toolbarDisplay:o,hiddenActionsConfig:s,settingsVisible:a,className:l,children:c,stickyToolbar:u,qa:d}){const p=useUpdate();reactExports.useLayoutEffect(()=>(e.on("rerender-toolbar",p),()=>{e.off("rerender-toolbar",p)}),[e,p]);const h=reactExports.useRef(null),f=useSticky(h)&&u,m=e.mobile;return jsxRuntimeExports.jsxs("div",{"data-qa":d,ref:h,className:stickyCn.toolbar({withSettings:a,stickyActive:f,isSticky:u},[l]),"data-layout":LAYOUT.STICKY_TOOLBAR,children:[jsxRuntimeExports.jsx(FlexToolbar,{data:i,hiddenActions:s,editor:r,focus:n,dotsTitle:i18n$2("more_action"),onClick:(r,n)=>e.emit("toolbar-action",{id:r,attrs:n,editorMode:t}),display:o,disableTooltip:m,disableHotkey:m,disablePreview:m}),c]})}const defaultValue={},MarkupToolbarContext=reactExports.createContext(defaultValue),MarkupToolbarContextProvider=MarkupToolbarContext.Provider;function useMarkupToolbarContext(){return reactExports.useContext(MarkupToolbarContext)}const b$4=cn("markup-editor"),MarkupEditorView=reactExports.memo(e=>{const{editor:t,autofocus:r,settingsVisible:n,toolbarVisible:i,toolbarConfig:o,hiddenActionsConfig:s,qa:a,className:l,toolbarClassName:c,children:u,stickyToolbar:d=!0,toolbarDisplay:p}=e;return useRenderTime(e=>{globalLogger.metrics({component:"markup-editor",event:"render",duration:e}),t.logger.metrics({component:"markup-editor",event:"render",duration:e})}),jsxRuntimeExports.jsxs("div",{className:b$4({toolbar:i},[l]),"data-qa":a,children:[i?jsxRuntimeExports.jsx(MarkupToolbarContextProvider,{value:{uploadHandler:t.fileUploadHandler,needToSetDimensionsForUploadedImages:t.needToSetDimensionsForUploadedImages},children:jsxRuntimeExports.jsx(ToolbarView,{qa:"g-md-toolbar-main",editor:t,editorMode:"markup",toolbarEditor:t,hiddenActionsConfig:s,stickyToolbar:d,toolbarConfig:o,toolbarFocus:()=>t.focus(),settingsVisible:n,className:b$4("toolbar",[c]),toolbarDisplay:p,children:u})}):null,jsxRuntimeExports.jsx(MarkupEditorComponent,{autofocus:r,editor:t,className:b$4("editor",{"toolbar-visible":i}),children:jsxRuntimeExports.jsx(Renderer,{storage:t.renderStorage})})]})});MarkupEditorView.displayName="MarkdownMarkupEditorView";const b$3=cn("markup-preview"),SplitModeView=reactExports.forwardRef(({editor:e},t)=>{const r=e.cm,[,n]=reactExports.useReducer(e=>e+1,0),i=reactExports.useRef(null),o=reactExports.useRef([]),s=()=>{if(!i.current)return;const e=Array.from(i.current.querySelectorAll(".line"));o.current=e.filter(e=>e instanceof HTMLElement&&0!==e.parentElement?.offsetHeight).map(e=>({el:e,line:Number(e.getAttribute("data-line"))}))},a=reactExports.useMemo(()=>throttle(()=>{if(!i.current)return;if(!r.dom.matches(":hover"))return;const{range:e}=r.scrollSnapshot().value,t=r.state.doc.lineAt(e.from).number-1;s(),scrollToRevealSourceLine(t,o.current,i)},30),[r]),l=reactExports.useMemo(()=>throttle(()=>{if(!i.current)return;if(!i.current.matches(":hover"))return;s();let e=getEditorLineNumberForOffset(i.current.scrollTop,o.current,i);if(null===e||isNaN(e))return;e=Math.max(Math.floor(e),0)+1;const t=r.state.doc.line(e),{top:n}=r.lineBlockAt(t.from);r.scrollDOM.scrollTo({top:n})},30),[r]);return reactExports.useEffect(()=>{const t=i.current;return e.on("change",n),e.on("cm-scroll",a),t?.addEventListener("scroll",l),e.cm.requestMeasure(),()=>{e.off("change",n),e.off("cm-scroll",a),t?.removeEventListener("scroll",l)}},[e,a,l]),reactExports.useImperativeHandle(t,()=>i.current),jsxRuntimeExports.jsxs("div",{className:b$3("outer",{vertical:"vertical"===e.splitMode}),ref:i,children:[jsxRuntimeExports.jsx(Label$2,{icon:jsxRuntimeExports.jsx(Eye,{}),className:b$3("preview-sign"),size:"m",children:i18n$4("split-mode-text")}),e.renderPreview?.({getValue:e.getValue,mode:"split",md:e.mdOptions,directiveSyntax:e.directiveSyntax})]})});SplitModeView.displayName="SplitModeView";const WysiwygEditorComponent=function({className:e,autofocus:t,editor:r,children:n,qa:i}){const o=reactExports.useRef(null);return reactExports.useEffect(()=>{const{current:e}=o;e&&(e.appendChild(r.wysiwygEditor.dom),t&&r.focus())},[r]),jsxRuntimeExports.jsx("div",{"data-qa":i,ref:o,className:e,children:n})},b$2=cn("wysiwyg-editor"),WysiwygEditorView=reactExports.memo(e=>{const{editor:t,autofocus:r,settingsVisible:n,toolbarVisible:i,toolbarConfig:o,hiddenActionsConfig:s,qa:a,className:l,toolbarClassName:c,children:u,stickyToolbar:d=!0,toolbarDisplay:p}=e;return useRenderTime(e=>{globalLogger.metrics({component:"wysiwyg-editor",event:"render",duration:e}),t.logger.metrics({component:"wysiwyg-editor",event:"render",duration:e})}),jsxRuntimeExports.jsxs("div",{className:b$2({toolbar:i},[l]),"data-qa":a,children:[i?jsxRuntimeExports.jsx(ToolbarView,{qa:"g-md-toolbar-main",editor:t,editorMode:"wysiwyg",toolbarEditor:t,stickyToolbar:d,toolbarConfig:o,toolbarFocus:()=>t.focus(),hiddenActionsConfig:s,settingsVisible:n,className:b$2("toolbar",[c]),toolbarDisplay:p,children:u}):null,jsxRuntimeExports.jsx(WysiwygEditorComponent,{autofocus:r,editor:t,className:b$2("editor"),children:jsxRuntimeExports.jsx(Renderer,{storage:t.renderStorage})})]})});WysiwygEditorView.displayName="MarkdownWysiwgEditorView";const WysiwygMode=e=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16",...e,children:[jsxRuntimeExports.jsx("path",{d:"M5.25002 4.75L5.25002 11.25M5.25002 4.75L8.5 4.75M5.25002 4.75L2.00004 4.75",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"currentColor"}),jsxRuntimeExports.jsx("path",{d:"M12.5 3C12.5 3 12.5 9.57107 12.5 12.5M12.5 3L14 2M12.5 3L11 2M12.5 12.5L14 13.5M12.5 12.5L11 13.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"currentColor"})]}),header_title$1="Header",header_hint$1="# Your text",italic_title$1="Italic",italic_hint$1="_Your text_",bold_title$1="Bold",bold_hint$1="**Your text**",strikethrough_title$1="Strikethrough",strikethrough_hint$1="~~Your text~~",blockquote_title$1="Blockquote",blockquote_hint$1="> Your text",code_title$1="Code",code_hint$1="```Your text```",link_title$1="Link",link_hint$1="[Your text](url)",image_title$1="Image",image_hint$1="![Your text](url)",list_title$1="List item",list_hint$1="- Your text",documentation$1="Documentation",documentation_link$1=" https://diplodoc.com/docs/en/syntax/",en={header_title:header_title$1,header_hint:header_hint$1,italic_title:italic_title$1,italic_hint:italic_hint$1,bold_title:bold_title$1,bold_hint:bold_hint$1,strikethrough_title:strikethrough_title$1,strikethrough_hint:strikethrough_hint$1,blockquote_title:blockquote_title$1,blockquote_hint:blockquote_hint$1,code_title:code_title$1,code_hint:code_hint$1,link_title:link_title$1,link_hint:link_hint$1,image_title:image_title$1,image_hint:image_hint$1,list_title:list_title$1,list_hint:list_hint$1,"numbered-list_title":"Numbered list","numbered-list_hint":"1. Your text",documentation:documentation$1,documentation_link:documentation_link$1},header_title="",header_hint="#  ",italic_title="",italic_hint="_ _",bold_title="",bold_hint="** **",strikethrough_title="",strikethrough_hint="~~ ~~",blockquote_title="",blockquote_hint=">  ",code_title="",code_hint="``` ```",link_title="",link_hint="[ ](-)",image_title="",image_hint="![ ](-)",list_title="",list_hint="-  ",documentation="",documentation_link=" https://diplodoc.com/docs/ru/syntax/",ru={header_title:header_title,header_hint:header_hint,italic_title:italic_title,italic_hint:italic_hint,bold_title:bold_title,bold_hint:bold_hint,strikethrough_title:strikethrough_title,strikethrough_hint:strikethrough_hint,blockquote_title:blockquote_title,blockquote_hint:blockquote_hint,code_title:code_title,code_hint:code_hint,link_title:link_title,link_hint:link_hint,image_title:image_title,image_hint:image_hint,list_title:list_title,list_hint:list_hint,"numbered-list_title":" ","numbered-list_hint":"1.  ",documentation:documentation,documentation_link:documentation_link},KEYSET="md-hints",i18n=registerKeyset(KEYSET,{en:en,ru:ru}),b$1=cn("markdown-hints"),MarkdownHints=reactExports.memo(function(){const e=[{title:i18n("header_title"),hint:i18n("header_hint")},{title:i18n("italic_title"),hint:i18n("italic_hint")},{title:i18n("bold_title"),hint:i18n("bold_hint")},{title:i18n("strikethrough_title"),hint:i18n("strikethrough_hint")},{title:i18n("blockquote_title"),hint:i18n("blockquote_hint")},{title:i18n("code_title"),hint:i18n("code_hint")},{title:i18n("link_title"),hint:i18n("link_hint")},{title:i18n("image_title"),hint:i18n("image_hint")},{title:i18n("list_title"),hint:i18n("list_hint")},{title:i18n("numbered-list_title"),hint:i18n("numbered-list_hint")}];return jsxRuntimeExports.jsxs("div",{className:b$1(),children:[jsxRuntimeExports.jsx("div",{className:b$1("grid"),children:e.map((e,t)=>jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:b$1("title"),children:e.title}),jsxRuntimeExports.jsx("span",{className:b$1("hint"),children:e.hint})]},`md-hint-${t}`))}),jsxRuntimeExports.jsx(Link$1,{href:i18n("documentation_link"),target:"_blank",className:b$1("docs-link"),children:i18n("documentation")})]})});MarkdownHints.displayName="MarkdownHints";const placement$2=["bottom-end","top-end"],bSettings=cn("editor-settings"),bContent=cn("settings-content"),EditorSettings=reactExports.memo(function(e){const{className:t,onShowPreviewChange:r,showPreview:n,renderPreviewButton:i,settingsVisible:o}=e,[s,a]=reactExports.useState(null),[l,,c,u]=useBooleanState(!1),d=useTargetZIndex(LAYOUT.STICKY_TOOLBAR),p=!0===o||Array.isArray(o)&&o.length>0;return jsxRuntimeExports.jsxs("div",{className:bSettings(null,[t]),children:[i&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ActionTooltip,{openDelay:ToolbarTooltipDelay.Open,closeDelay:ToolbarTooltipDelay.Close,title:i18n$4("preview_hint"),hotkey:"mod+shift+p",children:jsxRuntimeExports.jsx(Button,{qa:"g-md-markup-preview-button",size:"m",view:"flat",pin:"round-round",className:bSettings("preview-button"),onClick:()=>r?.(!n),selected:n,children:jsxRuntimeExports.jsx(Icon,{data:Eye})})}),o&&jsxRuntimeExports.jsx("div",{className:bSettings("separator")})]}),p&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{size:"m",view:"flat",pin:"round-round",onClick:u,ref:a,qa:"g-md-settings-button",className:bSettings("dropdown-button"),children:jsxRuntimeExports.jsx(Icon,{data:Gear})}),jsxRuntimeExports.jsx(Popup,{open:l,anchorElement:s,placement:placement$2,onOpenChange:c,zIndex:d,children:jsxRuntimeExports.jsx(SettingsContent,{...e,qa:"g-md-settings-content",onClose:c,className:bSettings("content"),zIndex:d})})]})]})}),mdHelpPlacement=["bottom","bottom-end","right-start","right","left"],SettingsContent=function({mode:e,onClose:t,onModeChange:r,toolbarVisibility:n,onToolbarVisibilityChange:i,onSplitModeChange:o,splitMode:s=!1,splitModeEnabled:a,className:l,showPreview:c,settingsVisible:u,qa:d,disableMark:p,zIndex:h}){const f=Array.isArray(u),m=!f||u?.includes("mode"),g=!f||u?.includes("toolbar"),b=!f||u?.includes("split");return jsxRuntimeExports.jsxs("div",{className:bContent(null,[l]),"data-qa":d,children:[m&&jsxRuntimeExports.jsxs(Menu,{size:"l",className:bContent("mode"),children:[jsxRuntimeExports.jsx(Menu.Item,{qa:"g-md-settings-mode-wysiwyg",active:"wysiwyg"===e,onClick:()=>{r("wysiwyg"),t()},iconStart:jsxRuntimeExports.jsx(Icon,{data:WysiwygMode}),children:i18n$4("settings_wysiwyg")}),jsxRuntimeExports.jsxs(Menu.Item,{qa:"g-md-settings-mode-markup",active:"markup"===e,onClick:()=>{r("markup"),t()},iconStart:jsxRuntimeExports.jsx(Icon,{data:LogoMarkdown}),children:[i18n$4("settings_markup"),!p&&jsxRuntimeExports.jsx(HelpMark,{popoverProps:{placement:mdHelpPlacement,modal:!1,zIndex:h},className:bContent("mode-help"),children:jsxRuntimeExports.jsx("div",{onClick:e=>{e.stopPropagation()},children:jsxRuntimeExports.jsx(MarkdownHints,{})})})]})]}),m&&(b||g)&&jsxRuntimeExports.jsx("div",{className:bContent("separator")}),g&&!c&&jsxRuntimeExports.jsxs("div",{className:bContent("toolbar"),children:[jsxRuntimeExports.jsx(Checkbox$1,{size:"m",checked:n,onUpdate:i,children:i18n$4("settings_menubar")}),jsxRuntimeExports.jsx("div",{className:bContent("toolbar-hint"),children:i18n$4("settings_hint")})]}),b&&s&&jsxRuntimeExports.jsxs("div",{className:bContent("split-mode"),children:[jsxRuntimeExports.jsx(Checkbox$1,{size:"m",disabled:"markup"!==e,checked:a,onUpdate:o??noop$8,children:i18n$4("settings_split-mode")}),jsxRuntimeExports.jsx("div",{className:bContent("toolbar-hint"),children:i18n$4("settings_split-mode-hint")})]}),jsxRuntimeExports.jsx("span",{className:bContent("version"),children:VERSION})]})};var ListName,ListName2,ToolbarName,ToolbarName2;ListName2=ListName||(ListName={}),ListName2.code="code",ListName2.heading="heading",ListName2.lists="lists",ListName2.math="math",ToolbarName2=ToolbarName||(ToolbarName={}),ToolbarName2.markupHidden="markupHidden",ToolbarName2.markupMain="markupMain",ToolbarName2.wysiwygHidden="wysiwygHidden",ToolbarName2.wysiwygMain="wysiwygMain",ToolbarName2.wysiwygSelection="wysiwygSelection",ToolbarName2.wysiwygSlash="wysiwygSlash";const MToolbarColors=({className:e,editor:t,focus:r,onClick:n})=>jsxRuntimeExports.jsx(ToolbarColors,{enable:!0,exec:e=>{colorify$2(e)(t.cm)},className:e,focus:r,onClick:n}),placement$1=["bottom-start","top-start","bottom-end","top-end"],ToolbarFilePopup=({className:e,hide:t,anchorElement:r,onSubmit:n,focus:i,onClick:o,uploadHandler:s,onSuccessUpload:a,uploadHint:l})=>{const c=useToaster(),[u,d,p]=useBooleanState(!1),h=reactExports.useCallback(()=>{t(),i()},[i,t]);return jsxRuntimeExports.jsx(Popup,{open:!0,modal:!0,onOpenChange:h,anchorElement:r,placement:placement$1,className:e,children:jsxRuntimeExports.jsx(FileForm,{autoFocus:!0,onAttach:s&&(e=>{d(),batchUploadFiles(e,s).then(e=>{p(),t(),a?.(e)},e=>{p(),c.add({theme:"danger",name:"toolbar_file_upload",title:i18n$c("file_upload_failed"),content:String(e)})})}),onCancel:h,onSubmit:e=>{t(),i(),n(e),o?.("addFile")},loading:u,uploadHint:l})})},MToolbarFilePopup=({focus:e,onClick:t,hide:r,anchorElement:n,editor:i,className:o})=>{const{uploadHandler:s}=useMarkupToolbarContext();return jsxRuntimeExports.jsx(ToolbarFilePopup,{hide:r,focus:e,onClick:t,anchorElement:n,className:o,onSubmit:e=>insertFiles([e])(i.cm),uploadHandler:s,onSuccessUpload:e=>{insertFiles(e.success.map(({result:e,file:t})=>({src:e.url,name:e.name??t.name,type:e.type??t.type})))(i.cm)}})},placement=["bottom-start","top-start","bottom-end","top-end"],ToolbarImagePopup=({className:e,anchorElement:t,hide:r,onSubmit:n,focus:i,onClick:o,uploadImages:s,onSuccessUpload:a,imageTitle:l,uploadHint:c})=>{const u=useToaster(),[d,p,h]=useBooleanState(!1),f=reactExports.useCallback(()=>{r(),i()},[i,r]);return jsxRuntimeExports.jsx(Popup,{open:!0,anchorElement:t,onOpenChange:f,placement:placement,className:e,children:jsxRuntimeExports.jsx(ImageForm$1,{autoFocus:!0,onAttach:s&&(e=>{p(),batchUploadFiles(e,s).then(e=>{h(),r(),a?.(e)},e=>{h(),u.add({theme:"danger",name:"toolbar_image_upload",title:i18n$c("image_upload_failed"),content:String(e)})})}),onCancel:f,onSubmit:e=>{r(),i(),n(e),o?.("addImage")},loading:d,imageTitle:l,uploadHint:c})})},noop$2=e=>{},MToolbarImagePopup=({focus:e,onClick:t,hide:r,anchorElement:n,editor:i,className:o})=>{const{uploadHandler:s,needToSetDimensionsForUploadedImages:a}=useMarkupToolbarContext(),l=reactExports.useMemo(()=>{const{from:e,to:t}=i.cm.state.selection.main;return i.cm.state.doc.sliceString(e,t)},[]);return jsxRuntimeExports.jsx(ToolbarImagePopup,{imageTitle:l,hide:r,anchorElement:n,focus:e,onClick:t,className:o,onSubmit:({url:e,name:t,alt:r,width:n,height:o})=>{insertImages([{url:e,alt:r,title:t,width:isNumber(n)?String(n):"",height:isNumber(o)?String(o):""}])(i.cm)},uploadImages:s,onSuccessUpload:async e=>{insertImages(await toImageItems(e.success,Boolean(a)))(i.cm)}})};async function toImageItems(e,t){const r=[];return await Promise.all(e.map(({result:e,file:n})=>{const i={url:e.url,alt:e.name??n.name};return r.push(i),t?getImageDimensions(n).then(({height:e})=>{i.height=String(Math.min(e,IMG_MAX_HEIGHT))},noop$2):Promise.resolve()})),r}const noop$1=()=>{},inactive$1=()=>!1,enable$1=()=>!0,disable=()=>!1,undoItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"undo"),icon:icons.undo,hotkey:formatter.toView(Action.Undo)},undoItemWysiwyg={hintWhenDisabled:!1,exec:e=>e.actions.undo.run(),isActive:e=>e.actions.undo.isActive(),isEnable:e=>e.actions.undo.isEnable()},undoItemMarkup={hintWhenDisabled:!1,exec:e=>undo$3(e.cm),isActive:inactive$1,isEnable:e=>undoDepth(e.cm.state)>0},redoItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"redo"),icon:icons.redo,hotkey:formatter.toView(Action.Redo)},redoItemWysiwyg={hintWhenDisabled:!1,exec:e=>e.actions.redo.run(),isActive:e=>e.actions.redo.isActive(),isEnable:e=>e.actions.redo.isEnable()},redoItemMarkup={hintWhenDisabled:!1,exec:e=>redo$3(e.cm),isActive:inactive$1,isEnable:e=>redoDepth(e.cm.state)>0},boldItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"bold"),icon:icons.bold,hotkey:formatter.toView(Action.Bold)},boldItemWysiwyg={exec:e=>e.actions.bold.run(),isActive:e=>e.actions.bold.isActive(),isEnable:e=>e.actions.bold.isEnable()},boldItemMarkup={exec:e=>toggleBold(e.cm),isActive:inactive$1,isEnable:enable$1},italicItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"italic"),icon:icons.italic,hotkey:formatter.toView(Action.Italic)},italicItemWysiwyg={exec:e=>e.actions.italic.run(),isActive:e=>e.actions.italic.isActive(),isEnable:e=>e.actions.italic.isEnable()},italicItemMarkup={exec:e=>toggleItalic(e.cm),isActive:inactive$1,isEnable:enable$1},underlineItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"underline"),icon:icons.underline,hotkey:formatter.toView(Action.Underline)},underlineItemWysiwyg={exec:e=>e.actions.underline.run(),isActive:e=>e.actions.underline.isActive(),isEnable:e=>e.actions.underline.isEnable()},underlineItemMarkup={exec:e=>toggleUnderline(e.cm),isActive:inactive$1,isEnable:enable$1},strikethroughItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"strike"),icon:icons.strikethrough,hotkey:formatter.toView(Action.Strike)},strikethroughItemWysiwyg={exec:e=>e.actions.strike.run(),isActive:e=>e.actions.strike.isActive(),isEnable:e=>e.actions.strike.isEnable()},strikethroughItemMarkup={exec:e=>toggleStrikethrough(e.cm),isActive:inactive$1,isEnable:enable$1},monospaceItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"mono"),icon:icons.mono},monospaceItemWysiwyg={exec:e=>e.actions.mono.run(),isActive:e=>e.actions.mono.isActive(),isEnable:e=>e.actions.mono.isEnable()},monospaceItemMarkup={exec:e=>toggleMonospace(e.cm),isActive:inactive$1,isEnable:enable$1},markedItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"mark"),icon:icons.mark},markedItemWysiwyg={exec:e=>e.actions.mark.run(),isActive:e=>e.actions.mark.isActive(),isEnable:e=>e.actions.mark.isEnable()},markedItemMarkup={exec:e=>toggleMarked(e.cm),isActive:inactive$1,isEnable:enable$1},checkboxItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"checkbox"),icon:icons.checklist},checkboxItemWysiwyg={exec:e=>e.actions.addCheckbox.run(),isActive:e=>e.actions.addCheckbox.isActive(),isEnable:e=>e.actions.addCheckbox.isEnable()},checkboxItemMarkup={exec:e=>wrapToCheckbox(e.cm),isActive:inactive$1,isEnable:enable$1},linkItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"link"),icon:icons.link,hotkey:formatter.toView(Action.Link)},linkItemWysiwyg={exec:e=>e.actions.addLink.run(),isActive:e=>e.actions.addLink.isActive(),isEnable:e=>e.actions.addLink.isEnable()},linkItemMarkup={exec:e=>insertLink(e.cm),isActive:inactive$1,isEnable:enable$1},quoteItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"quote"),icon:icons.quote,hotkey:formatter.toView(Action.Quote)},quoteItemWysiwyg={exec:e=>e.actions.quote.run(),isActive:e=>e.actions.quote.isActive(),isEnable:e=>e.actions.quote.isEnable()},quoteItemMarkup={exec:e=>wrapToBlockquote(e.cm),isActive:inactive$1,isEnable:enable$1};ToolbarDataType.SingleButton,i18n$2.bind(null,"quotelink");const cutItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"cut"),icon:icons.cut,hotkey:formatter.toView(Action.Cut)},cutItemWysiwyg={exec:e=>e.actions.toYfmCut.run(),isActive:e=>e.actions.toYfmCut.isActive(),isEnable:e=>e.actions.toYfmCut.isEnable()},cutItemMarkup={exec:e=>wrapToYfmCut(e.cm),isActive:inactive$1,isEnable:enable$1},noteItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"note"),icon:icons.note,hotkey:formatter.toView(Action.Note)},noteItemWysiwyg={exec:e=>e.actions.toYfmNote.run(),isActive:e=>e.actions.toYfmNote.isActive(),isEnable:e=>e.actions.toYfmNote.isEnable()},noteItemMarkup={exec:e=>wrapToYfmNote(e.cm),isActive:inactive$1,isEnable:enable$1},tableItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"table"),icon:icons.table},tableItemWysiwyg={exec:e=>e.actions.createYfmTable.run(),isActive:e=>e.actions.createYfmTable.isActive(),isEnable:e=>e.actions.createYfmTable.isEnable()},tableItemMarkup={exec:e=>insertYfmTable(e.cm),isActive:inactive$1,isEnable:enable$1},codeItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"code_inline"),icon:icons.code,hotkey:formatter.toView(Action.Code)},codeItemWysiwyg={exec:e=>e.actions.code.run(),isActive:e=>e.actions.code.isActive(),isEnable:e=>e.actions.code.isEnable()},codeItemMarkup={exec:e=>wrapToInlineCode(e.cm),isActive:inactive$1,isEnable:enable$1},imageItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"image"),icon:icons.image},imagePopupItemView={type:ToolbarDataType.ButtonPopup,title:i18n$2.bind(null,"image"),icon:icons.image},imageItemWysiwyg={exec:e=>e.actions.addImageWidget.run(),isActive:e=>e.actions.addImageWidget.isActive(),isEnable:e=>e.actions.addImageWidget.isEnable()},imageItemMarkup={exec:noop$1,isActive:inactive$1,isEnable:enable$1,renderPopup:e=>jsxRuntimeExports.jsx(MToolbarImagePopup,{...e})},fileItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"file"),icon:icons.file},filePopupItemView={type:ToolbarDataType.ButtonPopup,title:i18n$2.bind(null,"file"),icon:icons.file},fileItemWysiwyg={exec:e=>e.actions.addFile.run(),isActive:e=>e.actions.addFile.isActive(),isEnable:e=>e.actions.addFile.isEnable()},fileItemMarkup={exec:noop$1,isActive:inactive$1,isEnable:enable$1,renderPopup:e=>jsxRuntimeExports.jsx(MToolbarFilePopup,{...e})},tabsItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"tabs"),icon:icons.tabs},tabsItemWysiwyg={exec:e=>e.actions.toYfmTabs.run(),isActive:e=>e.actions.toYfmTabs.isActive(),isEnable:e=>e.actions.toYfmTabs.isEnable()},tabsItemMarkup={exec:e=>insertYfmTabs(e.cm),isActive:inactive$1,isEnable:enable$1};ToolbarDataType.SingleButton,i18n$2.bind(null,"math_inline"),ToolbarDataType.SingleButton,i18n$2.bind(null,"math_block"),ToolbarDataType.SingleButton,i18n$2.bind(null,"html"),ToolbarDataType.SingleButton,i18n$2.bind(null,"mermaid");const codeBlockItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"codeblock"),icon:icons.codeBlock,hotkey:formatter.toView(Action.CodeBlock)},codeBlockItemWysiwyg={exec:e=>e.actions.toCodeBlock.run(),isActive:e=>e.actions.toCodeBlock.isActive(),isEnable:e=>e.actions.toCodeBlock.isEnable()},codeBlockItemMarkup={exec:e=>wrapToCodeBlock(e.cm),isActive:inactive$1,isEnable:enable$1},hruleItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"hrule"),icon:icons.horizontalRule},hruleItemWysiwyg={exec:e=>e.actions.hRule.run(),isActive:e=>e.actions.hRule.isActive(),isEnable:e=>e.actions.hRule.isEnable()},hruleItemMarkup={exec:e=>insertHRule(e.cm),isActive:inactive$1,isEnable:enable$1},emojiItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"emoji"),icon:icons.emoji},emojiItemWysiwyg={exec:e=>e.actions.openEmojiSuggest.run({}),isActive:e=>e.actions.openEmojiSuggest.isActive(),isEnable:e=>e.actions.openEmojiSuggest.isEnable()},emojiItemMarkup={exec:noop$1,hintWhenDisabled:i18n$2.bind(null,"emoji__hint"),isActive:inactive$1,isEnable:disable},heading1ItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"heading1"),icon:icons.h1,hotkey:formatter.toView(Action.Heading1),preview:jsxRuntimeExports.jsx(HeadingPreview,{level:1})},heading1ItemWysiwyg={exec:e=>e.actions.toH1.run(),isActive:e=>e.actions.toH1.isActive(),isEnable:e=>e.actions.toH1.isEnable()},heading1ItemMarkup={exec:e=>toH1(e.cm),isActive:inactive$1,isEnable:enable$1},heading2ItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"heading2"),icon:icons.h2,hotkey:formatter.toView(Action.Heading2),preview:jsxRuntimeExports.jsx(HeadingPreview,{level:2})},heading2ItemWysiwyg={exec:e=>e.actions.toH2.run(),isActive:e=>e.actions.toH2.isActive(),isEnable:e=>e.actions.toH2.isEnable()},heading2ItemMarkup={exec:e=>toH2(e.cm),isActive:inactive$1,isEnable:enable$1},heading3ItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"heading3"),icon:icons.h3,hotkey:formatter.toView(Action.Heading3),preview:jsxRuntimeExports.jsx(HeadingPreview,{level:3})},heading3ItemWysiwyg={exec:e=>e.actions.toH3.run(),isActive:e=>e.actions.toH3.isActive(),isEnable:e=>e.actions.toH3.isEnable()},heading3ItemMarkup={exec:e=>toH3(e.cm),isActive:inactive$1,isEnable:enable$1},heading4ItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"heading4"),icon:icons.h4,hotkey:formatter.toView(Action.Heading4),preview:jsxRuntimeExports.jsx(HeadingPreview,{level:4})},heading4ItemWysiwyg={exec:e=>e.actions.toH4.run(),isActive:e=>e.actions.toH4.isActive(),isEnable:e=>e.actions.toH4.isEnable()},heading4ItemMarkup={exec:e=>toH4(e.cm),isActive:inactive$1,isEnable:enable$1},heading5ItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"heading5"),icon:icons.h5,hotkey:formatter.toView(Action.Heading5),preview:jsxRuntimeExports.jsx(HeadingPreview,{level:5})},heading5ItemWysiwyg={exec:e=>e.actions.toH5.run(),isActive:e=>e.actions.toH5.isActive(),isEnable:e=>e.actions.toH5.isEnable()},heading5ItemMarkup={exec:e=>toH5(e.cm),isActive:inactive$1,isEnable:enable$1},heading6ItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"heading6"),icon:icons.h6,hotkey:formatter.toView(Action.Heading6),preview:jsxRuntimeExports.jsx(HeadingPreview,{level:6})},heading6ItemWysiwyg={exec:e=>e.actions.toH6.run(),isActive:e=>e.actions.toH6.isActive(),isEnable:e=>e.actions.toH6.isEnable()},heading6ItemMarkup={exec:e=>toH6(e.cm),isActive:inactive$1,isEnable:enable$1},bulletListItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"ulist"),icon:icons.bulletList,hotkey:formatter.toView(Action.BulletList)},bulletListItemWysiwyg={exec:e=>e.actions.toBulletList.run(),isActive:e=>e.actions.toBulletList.isActive(),isEnable:e=>e.actions.toBulletList.isEnable()},bulletListItemMarkup={exec:e=>toBulletList(e.cm),isActive:inactive$1,isEnable:enable$1},orderedListItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"olist"),icon:icons.orderedList,hotkey:formatter.toView(Action.OrderedList)},orderedListItemWysiwyg={exec:e=>e.actions.toOrderedList.run(),isActive:e=>e.actions.toOrderedList.isActive(),isEnable:e=>e.actions.toOrderedList.isEnable()},orderedListItemMarkup={exec:e=>toOrderedList(e.cm),isActive:inactive$1,isEnable:enable$1},sinkListItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"list__action_sink"),icon:icons.sink,hotkey:formatter.toView(Action.SinkListItem)},sinkListItemWysiwyg={exec:e=>e.actions.sinkListItem.run(),hintWhenDisabled:()=>i18n$2("list_action_disabled"),isActive:e=>e.actions.sinkListItem.isActive(),isEnable:e=>e.actions.sinkListItem.isEnable()},sinkListItemMarkup={exec:e=>sinkListItem(e.cm),isActive:inactive$1,isEnable:enable$1},liftListItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"list__action_lift"),icon:icons.lift,hotkey:formatter.toView(Action.LiftListItem)},liftListItemWysiwyg={exec:e=>e.actions.liftListItem.run(),hintWhenDisabled:()=>i18n$2("list_action_disabled"),isActive:e=>e.actions.liftListItem.isActive(),isEnable:e=>e.actions.liftListItem.isEnable()},liftListItemMarkup={exec:e=>liftListItem(e.cm),isActive:inactive$1,isEnable:enable$1};ToolbarDataType.SingleButton,ToolbarDataType.ReactComponent;const paragraphItemView={type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"text"),icon:icons.text,hotkey:formatter.toView(Action.Text),doNotActivateList:!0,preview:jsxRuntimeExports.jsx(TextPreview,{})},paragraphItemWisywig={exec:e=>e.actions.toParagraph.run(),isActive:e=>e.actions.toParagraph.isActive(),isEnable:e=>e.actions.toParagraph.isEnable()},paragraphItemMarkup={exec:noop$1,isActive:inactive$1,isEnable:enable$1},colorifyItemView={type:ToolbarDataType.ReactComponent},colorifyItemWysiwyg={component:WToolbarColors,width:42},colorifyItemMarkup={component:MToolbarColors,width:42};ToolbarDataType.SingleButton,i18n$2.bind(null,"gpt");const headingListItemView={type:ToolbarDataType.ListButton,icon:icons.headline,title:i18n$2.bind(null,"heading"),withArrow:!0,replaceActiveIcon:!0},listsListItemView={type:ToolbarDataType.ListButton,icon:icons.bulletList,withArrow:!0,title:i18n$2.bind(null,"list")};ToolbarDataType.ListButton,i18n$2.bind(null,"move_list");const codeBlocksListItemView={type:ToolbarDataType.ListButton,icon:icons.code,title:i18n$2.bind(null,"code"),withArrow:!0};ToolbarDataType.ListButton,i18n$2.bind(null,"math");const zero={items:{[ActionName.undo]:{view:undoItemView,wysiwyg:undoItemWysiwyg,markup:undoItemMarkup},[ActionName.redo]:{view:redoItemView,wysiwyg:redoItemWysiwyg,markup:redoItemMarkup}},orders:{[ToolbarName.wysiwygMain]:[[ActionName.undo,ActionName.redo]],[ToolbarName.markupMain]:[[ActionName.undo,ActionName.redo]]}},commonmark={items:{...zero.items,[ActionName.bold]:{view:boldItemView,wysiwyg:boldItemWysiwyg,markup:boldItemMarkup},[ActionName.italic]:{view:italicItemView,wysiwyg:italicItemWysiwyg,markup:italicItemMarkup},[ListName.heading]:{view:headingListItemView},[ActionName.paragraph]:{view:paragraphItemView,wysiwyg:paragraphItemWisywig,markup:paragraphItemMarkup},[ActionName.heading1]:{view:heading1ItemView,wysiwyg:heading1ItemWysiwyg,markup:heading1ItemMarkup},[ActionName.heading2]:{view:heading2ItemView,wysiwyg:heading2ItemWysiwyg,markup:heading2ItemMarkup},[ActionName.heading3]:{view:heading3ItemView,wysiwyg:heading3ItemWysiwyg,markup:heading3ItemMarkup},[ActionName.heading4]:{view:heading4ItemView,wysiwyg:heading4ItemWysiwyg,markup:heading4ItemMarkup},[ActionName.heading5]:{view:heading5ItemView,wysiwyg:heading5ItemWysiwyg,markup:heading5ItemMarkup},[ActionName.heading6]:{view:heading6ItemView,wysiwyg:heading6ItemWysiwyg,markup:heading6ItemMarkup},[ListName.lists]:{view:listsListItemView},[ActionName.bulletList]:{view:bulletListItemView,wysiwyg:bulletListItemWysiwyg,markup:bulletListItemMarkup},[ActionName.orderedList]:{view:orderedListItemView,wysiwyg:orderedListItemWysiwyg,markup:orderedListItemMarkup},[ActionName.sinkListItem]:{view:sinkListItemView,wysiwyg:sinkListItemWysiwyg,markup:sinkListItemMarkup},[ActionName.liftListItem]:{view:liftListItemView,wysiwyg:liftListItemWysiwyg,markup:liftListItemMarkup},[ActionName.link]:{view:linkItemView,wysiwyg:linkItemWysiwyg,markup:linkItemMarkup},[ActionName.quote]:{view:quoteItemView,wysiwyg:quoteItemWysiwyg,markup:quoteItemMarkup},[ListName.code]:{view:codeBlocksListItemView},[ActionName.codeInline]:{view:codeItemView,wysiwyg:codeItemWysiwyg,markup:codeItemMarkup},[ActionName.codeBlock]:{view:codeBlockItemView,wysiwyg:codeBlockItemWysiwyg,markup:codeBlockItemMarkup},[ActionName.horizontalRule]:{view:hruleItemView,wysiwyg:hruleItemWysiwyg,markup:hruleItemMarkup}},orders:{[ToolbarName.wysiwygMain]:[[ActionName.undo,ActionName.redo],[ActionName.bold,ActionName.italic],[{id:ListName.heading,items:[ActionName.paragraph,ActionName.heading1,ActionName.heading2,ActionName.heading3,ActionName.heading4,ActionName.heading5,ActionName.heading6]},{id:ListName.lists,items:[ActionName.bulletList,ActionName.orderedList,ActionName.sinkListItem,ActionName.liftListItem]},ActionName.link,ActionName.quote,{id:ListName.code,items:[ActionName.codeInline,ActionName.codeBlock]}]],[ToolbarName.markupMain]:[[ActionName.undo,ActionName.redo],[ActionName.bold,ActionName.italic],[{id:ListName.heading,items:[ActionName.paragraph,ActionName.heading1,ActionName.heading2,ActionName.heading3,ActionName.heading4,ActionName.heading5,ActionName.heading6]},{id:ListName.lists,items:[ActionName.bulletList,ActionName.orderedList,ActionName.sinkListItem,ActionName.liftListItem]},ActionName.link,ActionName.quote,{id:ListName.code,items:[ActionName.codeInline,ActionName.codeBlock]}]],[ToolbarName.wysiwygHidden]:[[ActionName.horizontalRule]],[ToolbarName.markupHidden]:[[ActionName.horizontalRule]]}},defaultPreset={items:{...commonmark.items,[ActionName.strike]:{view:strikethroughItemView,wysiwyg:strikethroughItemWysiwyg,markup:strikethroughItemMarkup}},orders:{[ToolbarName.wysiwygMain]:[[ActionName.undo,ActionName.redo],[ActionName.bold,ActionName.italic,ActionName.strike],[{id:ListName.heading,items:[ActionName.paragraph,ActionName.heading1,ActionName.heading2,ActionName.heading3,ActionName.heading4,ActionName.heading5,ActionName.heading6]},{id:ListName.lists,items:[ActionName.bulletList,ActionName.orderedList,ActionName.sinkListItem,ActionName.liftListItem]},ActionName.link,ActionName.quote,{id:ListName.code,items:[ActionName.codeInline,ActionName.codeBlock]}]],[ToolbarName.markupMain]:[[ActionName.undo,ActionName.redo],[ActionName.bold,ActionName.italic,ActionName.strike],[{id:ListName.heading,items:[ActionName.paragraph,ActionName.heading1,ActionName.heading2,ActionName.heading3,ActionName.heading4,ActionName.heading5,ActionName.heading6]},{id:ListName.lists,items:[ActionName.bulletList,ActionName.orderedList,ActionName.sinkListItem,ActionName.liftListItem]},ActionName.link,ActionName.quote,{id:ListName.code,items:[ActionName.codeInline,ActionName.codeBlock]}]],[ToolbarName.wysiwygHidden]:[[ActionName.horizontalRule]],[ToolbarName.markupHidden]:[[ActionName.horizontalRule]]}},yfm={items:{...defaultPreset.items,[ActionName.underline]:{view:underlineItemView,wysiwyg:underlineItemWysiwyg,markup:underlineItemMarkup},[ActionName.mono]:{view:monospaceItemView,wysiwyg:monospaceItemWysiwyg,markup:monospaceItemMarkup},[ActionName.note]:{view:noteItemView,wysiwyg:noteItemWysiwyg,markup:noteItemMarkup},[ActionName.cut]:{view:cutItemView,wysiwyg:cutItemWysiwyg,markup:cutItemMarkup},[ActionName.image]:{view:imageItemView,wysiwyg:imageItemWysiwyg},[ActionName.imagePopup]:{view:imagePopupItemView,markup:imageItemMarkup},[ActionName.file]:{view:fileItemView,wysiwyg:fileItemWysiwyg},[ActionName.filePopup]:{view:filePopupItemView,markup:fileItemMarkup},[ActionName.table]:{view:tableItemView,wysiwyg:tableItemWysiwyg,markup:tableItemMarkup},[ActionName.checkbox]:{view:checkboxItemView,wysiwyg:checkboxItemWysiwyg,markup:checkboxItemMarkup},[ActionName.tabs]:{view:tabsItemView,wysiwyg:tabsItemWysiwyg,markup:tabsItemMarkup}},orders:{[ToolbarName.wysiwygMain]:[[ActionName.undo,ActionName.redo],[ActionName.bold,ActionName.italic,ActionName.underline,ActionName.strike,ActionName.mono],[{id:ListName.heading,items:[ActionName.paragraph,ActionName.heading1,ActionName.heading2,ActionName.heading3,ActionName.heading4,ActionName.heading5,ActionName.heading6]},{id:ListName.lists,items:[ActionName.bulletList,ActionName.orderedList,ActionName.sinkListItem,ActionName.liftListItem]},ActionName.link,ActionName.note,ActionName.cut,ActionName.quote,{id:ListName.code,items:[ActionName.codeInline,ActionName.codeBlock]}],[ActionName.image,ActionName.file,ActionName.table,ActionName.checkbox]],[ToolbarName.markupMain]:[[ActionName.undo,ActionName.redo],[ActionName.bold,ActionName.italic,ActionName.underline,ActionName.strike,ActionName.mono],[{id:ListName.heading,items:[ActionName.paragraph,ActionName.heading1,ActionName.heading2,ActionName.heading3,ActionName.heading4,ActionName.heading5,ActionName.heading6]},{id:ListName.lists,items:[ActionName.bulletList,ActionName.orderedList,ActionName.sinkListItem,ActionName.liftListItem]},ActionName.link,ActionName.note,ActionName.cut,ActionName.quote,{id:ListName.code,items:[ActionName.codeInline,ActionName.codeBlock]}],[ActionName.imagePopup,ActionName.filePopup,ActionName.table,ActionName.checkbox]],[ToolbarName.wysiwygHidden]:[[ActionName.horizontalRule,ActionName.tabs]],[ToolbarName.markupHidden]:[[ActionName.horizontalRule,ActionName.tabs]]}},full={items:{...yfm.items,[ActionName.mark]:{view:markedItemView,wysiwyg:markedItemWysiwyg,markup:markedItemMarkup},[ActionName.colorify]:{view:colorifyItemView,wysiwyg:colorifyItemWysiwyg,markup:colorifyItemMarkup},[ActionName.emoji]:{view:emojiItemView,wysiwyg:emojiItemWysiwyg,markup:emojiItemMarkup}},orders:{[ToolbarName.wysiwygMain]:[[ActionName.undo,ActionName.redo],[ActionName.bold,ActionName.italic,ActionName.underline,ActionName.strike,ActionName.mono,ActionName.mark],[{id:ListName.heading,items:[ActionName.paragraph,ActionName.heading1,ActionName.heading2,ActionName.heading3,ActionName.heading4,ActionName.heading5,ActionName.heading6]},{id:ListName.lists,items:[ActionName.bulletList,ActionName.orderedList,ActionName.sinkListItem,ActionName.liftListItem]},ActionName.colorify,ActionName.link,ActionName.note,ActionName.cut,ActionName.quote,{id:ListName.code,items:[ActionName.codeInline,ActionName.codeBlock]}],[ActionName.image,ActionName.file,ActionName.table,ActionName.checkbox]],[ToolbarName.markupMain]:[[ActionName.undo,ActionName.redo],[ActionName.bold,ActionName.italic,ActionName.underline,ActionName.strike,ActionName.mono,ActionName.mark],[{id:ListName.heading,items:[ActionName.paragraph,ActionName.heading1,ActionName.heading2,ActionName.heading3,ActionName.heading4,ActionName.heading5,ActionName.heading6]},{id:ListName.lists,items:[ActionName.bulletList,ActionName.orderedList,ActionName.sinkListItem,ActionName.liftListItem]},ActionName.colorify,ActionName.link,ActionName.note,ActionName.cut,ActionName.quote,{id:ListName.code,items:[ActionName.codeInline,ActionName.codeBlock]}],[ActionName.imagePopup,ActionName.filePopup,ActionName.table,ActionName.checkbox]],[ToolbarName.wysiwygHidden]:[[ActionName.horizontalRule,ActionName.emoji,ActionName.tabs]],[ToolbarName.markupHidden]:[[ActionName.horizontalRule,ActionName.emoji,ActionName.tabs]]}},flattenPreset=e=>e.flat().reduce((e,t)=>t.type===ToolbarDataType.ListButton&&Array.isArray(t.data)?e.concat(t.data):(e.push(t),e),[]),defaultPresets={zero:zero,commonmark:commonmark,default:defaultPreset,yfm:yfm,full:full},transformItem=(e,t,r="unknown")=>{if(!t)return{};const n=t.view.type===ToolbarDataType.ListButton,i=t.view.type===ToolbarDataType.SingleButton;return{type:t.view.type??ToolbarDataType.SingleButton,id:r,title:t.view.title,hint:t.view.hint,icon:t.view.icon,hotkey:t.view.hotkey,doNotActivateList:t.view.doNotActivateList,...i&&{preview:t.view.preview},...n&&{withArrow:t.view.withArrow,replaceActiveIcon:t.view.replaceActiveIcon},..."wysiwyg"===e&&t.wysiwyg&&{...t.wysiwyg},..."markup"===e&&t.markup&&{...t.markup}}},createToolbarConfig=(e,t,r)=>{const n="string"==typeof t?defaultPresets[t]||defaultPresets.default:t,i=n.orders[r]??[[]],{items:o}=n;return i.map(t=>t.map(t=>"string"==typeof t?transformItem(e,o[t],t):{...transformItem(e,o[t.id],t.id),data:t.items.map(t=>transformItem(e,o[t],t))}))},getToolbarsConfigs=({toolbarsPreset:e,props:t,preset:r})=>({wysiwygToolbarConfig:e?createToolbarConfig("wysiwyg",e,ToolbarName.wysiwygMain):t.wysiwygToolbarConfig??createToolbarConfig("wysiwyg",r,ToolbarName.wysiwygMain),markupToolbarConfig:e?createToolbarConfig("markup",e,ToolbarName.markupMain):t.markupToolbarConfig??createToolbarConfig("markup",r,ToolbarName.markupMain),wysiwygHiddenActionsConfig:e?flattenPreset(createToolbarConfig("wysiwyg",e,ToolbarName.wysiwygHidden)):t.wysiwygHiddenActionsConfig??flattenPreset(createToolbarConfig("wysiwyg",r,ToolbarName.wysiwygHidden)),markupHiddenActionsConfig:e?flattenPreset(createToolbarConfig("markup",e,ToolbarName.markupHidden)):t.markupHiddenActionsConfig??flattenPreset(createToolbarConfig("markup",r,ToolbarName.markupHidden))}),cnEditorComponent=cn("editor-component"),b=cnEditorComponent,EditorWrapper=reactExports.forwardRef(({autofocus:e,editor:t,editorMode:r,enableSubmitInPreview:n,hidePreviewAfterSubmit:i,isFocused:o,markupHiddenActionsConfig:s,markupToolbarConfig:a,qa:l,settingsVisible:c,showPreview:u,stickyToolbar:d,toggleShowPreview:p,toolbarsPreset:h,unsetShowPreview:f,wysiwygHiddenActionsConfig:m,wysiwygToolbarConfig:g},y)=>{const{wysiwygToolbarConfig:T,markupToolbarConfig:E,wysiwygHiddenActionsConfig:O,markupHiddenActionsConfig:S}=reactExports.useMemo(()=>getToolbarsConfigs({toolbarsPreset:h,props:{wysiwygToolbarConfig:g,markupToolbarConfig:a,wysiwygHiddenActionsConfig:m,markupHiddenActionsConfig:s},preset:t.preset}),[h,g,a,m,s,t.preset]),x=reactExports.useCallback(e=>{t.changeEditorMode({mode:e,reason:"settings"}),f()},[t,f]),v=reactExports.useCallback(e=>{t.changeToolbarVisibility({visible:e})},[t]),_=reactExports.useCallback(e=>{f(),t.changeSplitModeEnabled({splitModeEnabled:e})},[t,f]),A=reactExports.useCallback(e=>{t.changeSplitModeEnabled({splitModeEnabled:!1}),e!==u&&p()},[t,u,p]),C=Boolean(t.renderPreview&&"markup"===r&&!t.splitModeEnabled);useKey(e=>C&&isPreviewKeyDown(e),e=>{e.preventDefault(),A(!u)},{event:"keydown"},[u,r,A,C]),useKey(e=>Boolean(n&&u&&o&&isSubmitKeyDown(e)),()=>{t.emit("submit",null),i&&A(!1)},{event:"keydown"},[i,n,u,u]);const w={mode:r,onModeChange:x,onShowPreviewChange:A,onSplitModeChange:_,onToolbarVisibilityChange:v,renderPreviewButton:C,showPreview:u,splitMode:t.splitMode,splitModeEnabled:t.splitModeEnabled,stickyToolbar:d,toolbarVisibility:t.toolbarVisible&&!u,disableMark:t.mobile},k=!0===c||Array.isArray(c)&&c.length>0,D=t.mobile?"scroll":"shrink";return jsxRuntimeExports.jsx("div",{className:b("editor-wrapper"),ref:y,"data-qa":l,"data-mode":t.currentMode,children:u?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:b("preview-wrapper"),children:t.renderPreview?.({getValue:t.getValue,mode:"preview",md:t.mdOptions,directiveSyntax:t.directiveSyntax})}),jsxRuntimeExports.jsx(Settings,{...w,settingsVisible:c})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["wysiwyg"===r&&jsxRuntimeExports.jsx(WysiwygEditorView,{editor:t,autofocus:e,settingsVisible:k,toolbarConfig:T,toolbarVisible:t.toolbarVisible,hiddenActionsConfig:O,className:b("editor",{mode:r}),toolbarClassName:b("toolbar"),stickyToolbar:d,toolbarDisplay:D,children:jsxRuntimeExports.jsx(Settings,{...w,settingsVisible:t.toolbarVisible&&c})}),"markup"===r&&jsxRuntimeExports.jsx(MarkupEditorView,{editor:t,autofocus:e,settingsVisible:k,toolbarConfig:E,toolbarVisible:t.toolbarVisible,splitMode:t.splitMode,splitModeEnabled:t.splitModeEnabled,hiddenActionsConfig:S,className:b("editor",{mode:r}),toolbarClassName:b("toolbar"),stickyToolbar:d,toolbarDisplay:D,children:jsxRuntimeExports.jsx(Settings,{...w,settingsVisible:t.toolbarVisible&&c})}),jsxRuntimeExports.jsx(Settings,{...w,settingsVisible:!t.toolbarVisible&&c,renderPreviewButton:!t.toolbarVisible&&C})]})})});EditorWrapper.displayName="EditorWrapper";const MarkdownEditorView=reactExports.forwardRef((e,t)=>{const r=useEnsuredForwardedRef(t),n=reactExports.useRef(null),[i,,o,s]=useBooleanState(!1),[a,l]=reactExports.useState(!1);reactExports.useEffect(()=>{l(!0)},[]);const c=useMarkdownEditorContext(),u=e.editor??c;if(!u)throw new Error("[MarkdownEditorView]: an instance of the editor must be passed through the props or context");const{autofocus:d,className:p,enableSubmitInPreview:h=!0,hidePreviewAfterSubmit:f=!1,markupHiddenActionsConfig:m,markupToolbarConfig:g,qa:y,settingsVisible:T=!0,stickyToolbar:E,toolbarsPreset:O,wysiwygHiddenActionsConfig:S,wysiwygToolbarConfig:x}=e,v=useUpdate();reactExports.useLayoutEffect(()=>(u.on("rerender",v),()=>{u.off("rerender",v)}),[u,v]);const _=u.currentMode,A=u.splitModeEnabled&&u.splitMode&&"markup"===_,C=reactExports.useRef(null),w=useToaster();reactExports.useEffect(()=>{i&&r.current.focus()},[r,i]);const k=!0===T||Array.isArray(T)&&T.length>0;return jsxRuntimeExports.jsx(ErrorBoundary,{onError:e=>{globalLogger.error(e),u.logger.error(e)},fallbackRender:({error:e,resetErrorBoundary:t})=>(w.add({theme:"danger",name:"g-md-editor-error",title:i18n$4("error-title"),content:e.message}),setTimeout(()=>{t(),u.changeEditorMode({mode:"markup",reason:"error-boundary",emit:!1})}),null),children:jsxRuntimeExports.jsxs("div",{ref:r,"data-qa":y,className:b({settings:k,split:A&&u.splitMode},[p]),role:"button",tabIndex:0,children:[jsxRuntimeExports.jsx(EditorWrapper,{autofocus:d,editor:u,editorMode:_,enableSubmitInPreview:h,hidePreviewAfterSubmit:f,isFocused:isWrapperFocused(r),markupHiddenActionsConfig:m,markupToolbarConfig:g,qa:"g-md-editor-mode",ref:n,settingsVisible:T,showPreview:i,stickyToolbar:E,toggleShowPreview:s,toolbarsPreset:O,unsetShowPreview:o,wysiwygHiddenActionsConfig:S,wysiwygToolbarConfig:x}),A&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["horizontal"===u.splitMode?jsxRuntimeExports.jsx(HorizontalDragWrapper,{editor:u,isMounted:a,leftElRef:n,rightElRef:C,wrapperRef:r}):jsxRuntimeExports.jsx("div",{className:b("resizer")}),jsxRuntimeExports.jsx(SplitModeView,{editor:u,ref:C})]})]})})});MarkdownEditorView.displayName="MarkdownEditorView";const MarkupSearchAnchor=({mode:e})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"markup"===e&&jsxRuntimeExports.jsx("div",{className:"g-md-search-anchor"})});function Settings(e){const t=reactExports.useRef(null),r=useSticky(t)&&e.toolbarVisibility&&e.stickyToolbar;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:(e.renderPreviewButton||e.settingsVisible)&&jsxRuntimeExports.jsx("div",{className:b("settings-wrapper"),children:jsxRuntimeExports.jsxs("div",{ref:t,className:stickyCn.settings({withToolbar:e.toolbarVisibility,stickyActive:r}),children:[jsxRuntimeExports.jsx(EditorSettings,{...e}),jsxRuntimeExports.jsx(MarkupSearchAnchor,{...e})]})})})}function isPreviewKeyDown(e){return(isMac()?e.metaKey:e.ctrlKey)&&e.shiftKey&&"KeyP"===e.code}function isWrapperFocused(e){return document.activeElement===e.current}function isSubmitKeyDown(e){return(isMac()?e.metaKey:e.ctrlKey)&&"Enter"===e.code}const noop=()=>{},inactive=()=>!1,enable=()=>!0,mUndoItemData={id:ActionName.undo,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"undo"),icon:icons.undo,hotkey:formatter.toView(Action.Undo),exec:e=>undo$3(e.cm),isActive:inactive,isEnable:e=>undoDepth(e.cm.state)>0},mRedoItemData={id:ActionName.redo,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"redo"),icon:icons.redo,hotkey:formatter.toView(Action.Redo),exec:e=>redo$3(e.cm),isActive:inactive,isEnable:e=>redoDepth(e.cm.state)>0},mBoldItemData={id:ActionName.bold,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"bold"),icon:icons.bold,hotkey:formatter.toView(Action.Bold),exec:e=>toggleBold(e.cm),isActive:inactive,isEnable:enable},mItalicItemData={id:ActionName.italic,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"italic"),icon:icons.italic,hotkey:formatter.toView(Action.Italic),exec:e=>toggleItalic(e.cm),isActive:inactive,isEnable:enable},mUnderlineItemData={id:ActionName.underline,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"underline"),icon:icons.underline,hotkey:formatter.toView(Action.Underline),exec:e=>toggleUnderline(e.cm),isActive:inactive,isEnable:enable},mStrikethroughItemData={id:ActionName.strike,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"strike"),icon:icons.strikethrough,hotkey:formatter.toView(Action.Strike),exec:e=>toggleStrikethrough(e.cm),isActive:inactive,isEnable:enable},mMonospaceItemData={id:ActionName.mono,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"mono"),icon:icons.mono,exec:e=>toggleMonospace(e.cm),isActive:inactive,isEnable:enable},mMarkedItemData={id:ActionName.mark,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"mark"),icon:icons.mark,exec:e=>toggleMarked(e.cm),isActive:inactive,isEnable:enable},mCheckboxButton={id:ActionName.checkbox,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"checkbox"),icon:icons.checklist,exec:e=>wrapToCheckbox(e.cm),isActive:inactive,isEnable:enable},mLinkButton={id:ActionName.link,type:ToolbarDataType.SingleButton,icon:icons.link,title:i18n$2("link"),exec:e=>insertLink(e.cm),isActive:inactive,isEnable:enable},mQuoteButton={id:ActionName.quote,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"quote"),icon:icons.quote,exec:e=>wrapToBlockquote(e.cm),isActive:inactive,isEnable:enable},mCutButton={id:ActionName.yfm_cut,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"cut"),icon:icons.cut,hotkey:formatter.toView(Action.Cut),exec:e=>wrapToYfmCut(e.cm),isActive:inactive,isEnable:enable},mNoteButton={id:ActionName.yfm_note,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"note"),icon:icons.note,hotkey:formatter.toView(Action.Note),exec:e=>wrapToYfmNote(e.cm),isActive:inactive,isEnable:enable},mTableButton={id:ActionName.table,type:ToolbarDataType.SingleButton,title:i18n$2.bind(null,"table"),icon:icons.table,exec:e=>insertYfmTable(e.cm),isActive:inactive,isEnable:enable},mCodeItemData={id:ActionName.code_inline,title:i18n$2.bind(null,"code_inline"),icon:icons.code,hotkey:formatter.toView(Action.Code),exec:e=>wrapToInlineCode(e.cm),isActive:inactive,isEnable:enable},mImagePopupData={id:"image",type:ToolbarDataType.ButtonPopup,icon:icons.image,title:i18n$2("image"),exec:noop,isActive:inactive,isEnable:enable,renderPopup:e=>jsxRuntimeExports.jsx(MToolbarImagePopup,{...e})},mFilePopupData={id:"file",type:ToolbarDataType.ButtonPopup,icon:icons.file,title:i18n$2("file"),exec:noop,isActive:inactive,isEnable:enable,renderPopup:e=>jsxRuntimeExports.jsx(MToolbarFilePopup,{...e})};i18n$2.bind(null,"tabs"),ToolbarDataType.SingleButton,ActionName.math_inline,i18n$2.bind(null,"math_inline"),ActionName.math_block,i18n$2.bind(null,"math_block"),ActionName.yfm_html_block,ToolbarDataType.SingleButton,i18n$2.bind(null,"html"),ActionName.mermaid,ToolbarDataType.SingleButton,i18n$2.bind(null,"mermaid");const mCodeblockItemData={id:ActionName.code_block,title:i18n$2.bind(null,"codeblock"),icon:icons.codeBlock,hotkey:formatter.toView(Action.CodeBlock),exec:e=>wrapToCodeBlock(e.cm),isActive:inactive,isEnable:enable};i18n$2.bind(null,"hrule"),ToolbarDataType.SingleButton,i18n$2.bind(null,"emoji"),ToolbarDataType.SingleButton,i18n$2.bind(null,"emoji__hint"),ToolbarDataType.ListButton,i18n$2.bind(null,"math");const mHeading1ItemData={id:ActionName.heading1,title:i18n$2.bind(null,"heading1"),icon:icons.h1,hotkey:formatter.toView(Action.Heading1),exec:e=>toH1(e.cm),isActive:inactive,isEnable:enable,preview:jsxRuntimeExports.jsx(HeadingPreview,{level:1})},mHeading2ItemData={id:ActionName.heading2,title:i18n$2.bind(null,"heading2"),icon:icons.h2,hotkey:formatter.toView(Action.Heading2),exec:e=>toH2(e.cm),isActive:inactive,isEnable:enable,preview:jsxRuntimeExports.jsx(HeadingPreview,{level:2})},mHeading3ItemData={id:ActionName.heading3,title:i18n$2.bind(null,"heading3"),icon:icons.h3,hotkey:formatter.toView(Action.Heading3),exec:e=>toH3(e.cm),isActive:inactive,isEnable:enable,preview:jsxRuntimeExports.jsx(HeadingPreview,{level:3})},mHeading4ItemData={id:ActionName.heading4,title:i18n$2.bind(null,"heading4"),icon:icons.h4,hotkey:formatter.toView(Action.Heading4),exec:e=>toH4(e.cm),isActive:inactive,isEnable:enable,preview:jsxRuntimeExports.jsx(HeadingPreview,{level:4})},mHeading5ItemData={id:ActionName.heading5,title:i18n$2.bind(null,"heading5"),icon:icons.h5,hotkey:formatter.toView(Action.Heading5),exec:e=>toH5(e.cm),isActive:inactive,isEnable:enable,preview:jsxRuntimeExports.jsx(HeadingPreview,{level:5})},mHeading6ItemData={id:ActionName.heading6,title:i18n$2.bind(null,"heading6"),icon:icons.h6,hotkey:formatter.toView(Action.Heading6),exec:e=>toH6(e.cm),isActive:inactive,isEnable:enable,preview:jsxRuntimeExports.jsx(HeadingPreview,{level:6})},mBulletListItemData={id:ActionName.bulletList,title:i18n$2.bind(null,"ulist"),icon:icons.bulletList,exec:e=>toBulletList(e.cm),isActive:inactive,isEnable:enable},mOrderedListItemData={id:ActionName.orderedList,title:i18n$2.bind(null,"olist"),icon:icons.orderedList,exec:e=>toOrderedList(e.cm),isActive:inactive,isEnable:enable};ActionName.sinkListItem,i18n$2.bind(null,"list__action_sink"),ActionName.liftListItem,i18n$2.bind(null,"list__action_lift"),i18n$2.bind(null,"heading"),i18n$2.bind(null,"list"),i18n$2.bind(null,"code"),i18n$2.bind(null,"math");const mBiusGroupConfig=[mBoldItemData,mItalicItemData,mUnderlineItemData,mStrikethroughItemData,mMonospaceItemData,mMarkedItemData];ToolbarDataType.ListButton,icons.headline,i18n$2.bind(null,"heading"),ToolbarDataType.ListButton,icons.bulletList,i18n$2.bind(null,"list"),ToolbarDataType.ReactComponent,ToolbarDataType.ListButton,icons.code,i18n$2.bind(null,"code"),ToolbarDataType.ListButton,icons.headline,i18n$2.bind(null,"heading"),ToolbarDataType.ListButton,icons.bulletList,i18n$2.bind(null,"list"),ToolbarDataType.ListButton,icons.code,i18n$2.bind(null,"code"),ToolbarDataType.ListButton,icons.headline,i18n$2.bind(null,"heading"),ToolbarDataType.ListButton,icons.bulletList,i18n$2.bind(null,"list"),ToolbarDataType.ListButton,icons.code,i18n$2.bind(null,"code"),ToolbarDataType.ListButton,icons.headline,i18n$2.bind(null,"heading"),ToolbarDataType.ListButton,icons.bulletList,i18n$2.bind(null,"list"),ToolbarDataType.ListButton,icons.code,i18n$2.bind(null,"code");const toaster=new Toaster;function useAppTheme(){const[e,t]=React.useState(()=>"undefined"!=typeof document&&document.documentElement.classList.contains("dark")?"dark":"light");return React.useEffect(()=>{const e=new MutationObserver(()=>{const e=document.documentElement.classList.contains("dark");t(e?"dark":"light")});return e.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>e.disconnect()},[]),e}const GravityMarkdownEditor=({value:e,onChange:t,onImageUpload:r})=>{const n=useAppTheme(),i=useMarkdownEditor({initial:{markup:e||"",mode:"wysiwyg"},md:{html:!1,breaks:!0},preset:"full",...r&&{handlers:{uploadFile:async e=>{try{return{url:await r(e)}}catch(t){throw t}}}}});return React.useEffect(()=>{const r=i.getValue();e&&e!==r&&(i.replace(e),t(e))},[e,i,t]),React.useEffect(()=>{function e(){const e=i.getValue();t(e)}function r(){const e=i.getValue();t(e)}function n(){const e=i.getValue();t(e)}return i.on("change",e),i.on("update",r),i.on("reloaded",n),()=>{i.off("change",e),i.off("update",r),i.off("reloaded",n)}},[i,t]),jsxDevRuntimeExports.jsxDEV(ThemeProvider,{theme:n,children:jsxDevRuntimeExports.jsxDEV(ToasterProvider,{toaster:toaster,children:[jsxDevRuntimeExports.jsxDEV(ToasterComponent,{},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/GravityMarkdownEditor.tsx",lineNumber:125,columnNumber:9},void 0),jsxDevRuntimeExports.jsxDEV("div",{className:"gravity-markdown-editor-wrapper",children:jsxDevRuntimeExports.jsxDEV(MarkdownEditorView,{stickyToolbar:!0,autofocus:!0,editor:i,className:"min-h-[500px]"},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/GravityMarkdownEditor.tsx",lineNumber:127,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/GravityMarkdownEditor.tsx",lineNumber:126,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/frontend/src/components/blog/editor/GravityMarkdownEditor.tsx",lineNumber:124,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/GravityMarkdownEditor.tsx",lineNumber:123,columnNumber:5},void 0)};function MediaLibrary({onSelect:e,onClose:t}){const[r,n]=reactExports.useState([]),[i,o]=reactExports.useState(!1),{toast:s}=useToast(),a=reactExports.useRef(null);return jsxDevRuntimeExports.jsxDEV("div",{className:"flex flex-col h-full",children:[jsxDevRuntimeExports.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b",children:[jsxDevRuntimeExports.jsxDEV("h2",{className:"text-lg font-semibold",children:"Media Library"},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:129,columnNumber:9},this),t&&jsxDevRuntimeExports.jsxDEV(Button$1,{variant:"ghost",size:"sm",onClick:t,children:jsxDevRuntimeExports.jsxDEV(Icon$1,{name:"X",className:"h-4 w-4"},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:132,columnNumber:13},this)},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:131,columnNumber:11},this)]},void 0,!0,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:128,columnNumber:7},this),jsxDevRuntimeExports.jsxDEV("div",{className:"p-4",children:jsxDevRuntimeExports.jsxDEV("div",{className:"border-2 border-dashed rounded-lg p-8 text-center hover:border-primary transition-colors cursor-pointer",onDrop:async e=>{e.preventDefault();const t=e.dataTransfer.files;if(0!==t.length){o(!0);try{for(const e of Array.from(t)){if(!e.type.startsWith("image/"))continue;const t=await uploadBlogImage(e);n(e=>[{url:t.url,filename:t.filename,size:t.size,uploadedAt:new Date},...e])}s({title:"Images uploaded",description:`${t.length} image(s) uploaded successfully`})}catch(r){s({title:"Upload failed",description:r instanceof Error?r.message:"Failed to upload images",variant:"destructive"})}finally{o(!1)}}},onDragOver:e=>{e.preventDefault()},onClick:()=>a.current?.click(),children:[jsxDevRuntimeExports.jsxDEV(Icon$1,{name:"Upload",className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:144,columnNumber:11},this),jsxDevRuntimeExports.jsxDEV("p",{className:"text-sm text-muted-foreground mb-2",children:"Drag and drop images here, or click to browse"},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:145,columnNumber:11},this),jsxDevRuntimeExports.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Supports JPG, PNG, GIF, WebP (max 10MB)"},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:148,columnNumber:11},this),jsxDevRuntimeExports.jsxDEV("input",{ref:a,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:async e=>{const t=e.target.files;if(t&&0!==t.length){o(!0);try{for(const e of Array.from(t)){const t=await uploadBlogImage(e);n(e=>[{url:t.url,filename:t.filename,size:t.size,uploadedAt:new Date},...e]),s({title:"Image uploaded",description:`${e.name} uploaded successfully`})}}catch(r){s({title:"Upload failed",description:r instanceof Error?r.message:"Failed to upload image",variant:"destructive"})}finally{o(!1),a.current&&(a.current.value="")}}}},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:151,columnNumber:11},this)]},void 0,!0,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:138,columnNumber:9},this)},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:137,columnNumber:7},this),i&&jsxDevRuntimeExports.jsxDEV("div",{className:"px-4 py-2 bg-muted",children:jsxDevRuntimeExports.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Uploading..."},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:164,columnNumber:11},this)},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:163,columnNumber:9},this),jsxDevRuntimeExports.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4",children:0===r.length?jsxDevRuntimeExports.jsxDEV("div",{className:"text-center py-12 text-muted-foreground",children:[jsxDevRuntimeExports.jsxDEV(Icon$1,{name:"ImageOff",className:"h-12 w-12 mx-auto mb-4"},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:171,columnNumber:13},this),jsxDevRuntimeExports.jsxDEV("p",{children:"No images uploaded yet"},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:172,columnNumber:13},this)]},void 0,!0,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:170,columnNumber:11},this):jsxDevRuntimeExports.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:r.map((t,r)=>{return jsxDevRuntimeExports.jsxDEV("div",{className:"border rounded-lg overflow-hidden group bg-card",children:[jsxDevRuntimeExports.jsxDEV("div",{className:"aspect-square bg-muted relative",children:[jsxDevRuntimeExports.jsxDEV("img",{src:t.url,alt:t.filename,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:179,columnNumber:19},this),jsxDevRuntimeExports.jsxDEV("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[jsxDevRuntimeExports.jsxDEV(Button$1,{size:"sm",variant:"secondary",onClick:()=>{return r=t.url,void(e&&e(r));var r},children:jsxDevRuntimeExports.jsxDEV(Icon$1,{name:"Check",className:"h-4 w-4"},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:190,columnNumber:23},this)},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:185,columnNumber:21},this),jsxDevRuntimeExports.jsxDEV(Button$1,{size:"sm",variant:"secondary",onClick:()=>{return e=t.url,navigator.clipboard.writeText(e),void s({title:"Copied",description:"Image URL copied to clipboard"});var e},children:jsxDevRuntimeExports.jsxDEV(Icon$1,{name:"Copy",className:"h-4 w-4"},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:197,columnNumber:23},this)},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:192,columnNumber:21},this)]},void 0,!0,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:184,columnNumber:19},this)]},void 0,!0,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:178,columnNumber:17},this),jsxDevRuntimeExports.jsxDEV("div",{className:"p-2",children:[jsxDevRuntimeExports.jsxDEV("p",{className:"text-xs font-medium truncate",children:t.filename},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:202,columnNumber:19},this),jsxDevRuntimeExports.jsxDEV("p",{className:"text-xs text-muted-foreground",children:(n=t.size,n<1024?`${n} B`:n<1048576?`${(n/1024).toFixed(1)} KB`:`${(n/1048576).toFixed(1)} MB`)},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:203,columnNumber:19},this)]},void 0,!0,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:201,columnNumber:17},this)]},r,!0,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:177,columnNumber:15},this);var n})},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:175,columnNumber:11},this)},void 0,!1,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:168,columnNumber:7},this)]},void 0,!0,{fileName:"/app/frontend/src/components/blog/editor/MediaLibrary.tsx",lineNumber:127,columnNumber:5},this)}var NAME="Label",Label$1=reactExports.forwardRef((e,t)=>jsxRuntimeExports.jsx(Primitive.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Label$1.displayName=NAME;var Root$1=Label$1;const labelVariants=cva("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Label=reactExports.forwardRef(({className:e,...t},r)=>jsxDevRuntimeExports.jsxDEV(Root$1,{ref:r,className:cn$2(labelVariants(),e),...t},void 0,!1,{fileName:"/app/frontend/src/components/ui/label.tsx",lineNumber:16,columnNumber:3},void 0));Label.displayName=Root$1.displayName;var U=1,Y$1=.9,H=.8,J=.17,p=.1,u=.999,$=.9999,k$1=.99,m=/[\\\/_+.#"@\[\(\{&]/,B$1=/[\\\/_+.#"@\[\(\{&]/g,K$1=/[\s-]/,X=/[\s-]/g;function G(e,t,r,n,i,o,s){if(o===t.length)return i===e.length?U:k$1;var a=`${i},${o}`;if(void 0!==s[a])return s[a];for(var l,c,d,h,f=n.charAt(o),g=r.indexOf(f,i),b=0;g>=0;)(l=G(e,t,r,n,g+1,o+1,s))>b&&(g===i?l*=U:m.test(e.charAt(g-1))?(l*=H,(d=e.slice(i,g-1).match(B$1))&&i>0&&(l*=Math.pow(u,d.length))):K$1.test(e.charAt(g-1))?(l*=Y$1,(h=e.slice(i,g-1).match(X))&&i>0&&(l*=Math.pow(u,h.length))):(l*=J,i>0&&(l*=Math.pow(u,g-i))),e.charAt(g)!==t.charAt(o)&&(l*=$)),(l<p&&r.charAt(g-1)===n.charAt(o+1)||n.charAt(o+1)===n.charAt(o)&&r.charAt(g-1)!==n.charAt(o))&&(c=G(e,t,r,n,g+1,o+2,s))*p>l&&(l=c*p),l>b&&(b=l),g=r.indexOf(f,g+1);return s[a]=b,b}function D(e){return e.toLowerCase().replace(X," ")}function W(e,t,r){return G(e=r&&r.length>0?e+" "+r.join(" "):e,t,D(e),D(t),0,0,{})}var DIALOG_NAME="Dialog",[createDialogContext]=createContextScope(DIALOG_NAME),[DialogProvider,useDialogContext]=createDialogContext(DIALOG_NAME),Dialog$1=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:i,onOpenChange:o,modal:s=!0}=e,a=reactExports.useRef(null),l=reactExports.useRef(null),[c,u]=useControllableState({prop:n,defaultProp:i??!1,onChange:o,caller:DIALOG_NAME});return jsxRuntimeExports.jsx(DialogProvider,{scope:t,triggerRef:a,contentRef:l,contentId:useId$1(),titleId:useId$1(),descriptionId:useId$1(),open:c,onOpenChange:u,onOpenToggle:reactExports.useCallback(()=>u(e=>!e),[u]),modal:s,children:r})};Dialog$1.displayName=DIALOG_NAME;var TRIGGER_NAME$1="DialogTrigger",DialogTrigger=reactExports.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=useDialogContext(TRIGGER_NAME$1,r),o=useComposedRefs(t,i.triggerRef);return jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":getState$1(i.open),...n,ref:o,onClick:composeEventHandlers(e.onClick,i.onOpenToggle)})});DialogTrigger.displayName=TRIGGER_NAME$1;var PORTAL_NAME$1="DialogPortal",[PortalProvider$1,usePortalContext$1]=createDialogContext(PORTAL_NAME$1,{forceMount:void 0}),DialogPortal$1=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:i}=e,o=useDialogContext(PORTAL_NAME$1,t);return jsxRuntimeExports.jsx(PortalProvider$1,{scope:t,forceMount:r,children:reactExports.Children.map(n,e=>jsxRuntimeExports.jsx(Presence,{present:r||o.open,children:jsxRuntimeExports.jsx(Portal$3,{asChild:!0,container:i,children:e})}))})};DialogPortal$1.displayName=PORTAL_NAME$1;var OVERLAY_NAME="DialogOverlay",DialogOverlay$1=reactExports.forwardRef((e,t)=>{const r=usePortalContext$1(OVERLAY_NAME,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,o=useDialogContext(OVERLAY_NAME,e.__scopeDialog);return o.modal?jsxRuntimeExports.jsx(Presence,{present:n||o.open,children:jsxRuntimeExports.jsx(DialogOverlayImpl,{...i,ref:t})}):null});DialogOverlay$1.displayName=OVERLAY_NAME;var Slot$1=createSlot("DialogOverlay.RemoveScroll"),DialogOverlayImpl=reactExports.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=useDialogContext(OVERLAY_NAME,r);return jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot$1,allowPinchZoom:!0,shards:[i.contentRef],children:jsxRuntimeExports.jsx(Primitive.div,{"data-state":getState$1(i.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),CONTENT_NAME$1="DialogContent",DialogContent$1=reactExports.forwardRef((e,t)=>{const r=usePortalContext$1(CONTENT_NAME$1,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,o=useDialogContext(CONTENT_NAME$1,e.__scopeDialog);return jsxRuntimeExports.jsx(Presence,{present:n||o.open,children:o.modal?jsxRuntimeExports.jsx(DialogContentModal,{...i,ref:t}):jsxRuntimeExports.jsx(DialogContentNonModal,{...i,ref:t})})});DialogContent$1.displayName=CONTENT_NAME$1;var DialogContentModal=reactExports.forwardRef((e,t)=>{const r=useDialogContext(CONTENT_NAME$1,e.__scopeDialog),n=reactExports.useRef(null),i=useComposedRefs(t,r.contentRef,n);return reactExports.useEffect(()=>{const e=n.current;if(e)return hideOthers(e)},[]),jsxRuntimeExports.jsx(DialogContentImpl,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers(e.onCloseAutoFocus,e=>{e.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:composeEventHandlers(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:composeEventHandlers(e.onFocusOutside,e=>e.preventDefault())})}),DialogContentNonModal=reactExports.forwardRef((e,t)=>{const r=useDialogContext(CONTENT_NAME$1,e.__scopeDialog),n=reactExports.useRef(!1),i=reactExports.useRef(!1);return jsxRuntimeExports.jsx(DialogContentImpl,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(n.current||r.triggerRef.current?.focus(),t.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));const o=t.target,s=r.triggerRef.current?.contains(o);s&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),DialogContentImpl=reactExports.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:o,...s}=e,a=useDialogContext(CONTENT_NAME$1,r),l=reactExports.useRef(null),c=useComposedRefs(t,l);return useFocusGuards(),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FocusScope,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:o,children:jsxRuntimeExports.jsx(DismissableLayer,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":getState$1(a.open),...s,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TitleWarning,{titleId:a.titleId}),jsxRuntimeExports.jsx(DescriptionWarning,{contentRef:l,descriptionId:a.descriptionId})]})]})}),TITLE_NAME="DialogTitle",DialogTitle$1=reactExports.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=useDialogContext(TITLE_NAME,r);return jsxRuntimeExports.jsx(Primitive.h2,{id:i.titleId,...n,ref:t})});DialogTitle$1.displayName=TITLE_NAME;var DESCRIPTION_NAME="DialogDescription",DialogDescription$1=reactExports.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=useDialogContext(DESCRIPTION_NAME,r);return jsxRuntimeExports.jsx(Primitive.p,{id:i.descriptionId,...n,ref:t})});DialogDescription$1.displayName=DESCRIPTION_NAME;var CLOSE_NAME$1="DialogClose",DialogClose=reactExports.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=useDialogContext(CLOSE_NAME$1,r);return jsxRuntimeExports.jsx(Primitive.button,{type:"button",...n,ref:t,onClick:composeEventHandlers(e.onClick,()=>i.onOpenChange(!1))})});function getState$1(e){return e?"open":"closed"}DialogClose.displayName=CLOSE_NAME$1;var TITLE_WARNING_NAME="DialogTitleWarning",[WarningProvider,useWarningContext]=createContext2(TITLE_WARNING_NAME,{contentName:CONTENT_NAME$1,titleName:TITLE_NAME,docsSlug:"dialog"}),TitleWarning=({titleId:e})=>{const t=useWarningContext(TITLE_WARNING_NAME),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return reactExports.useEffect(()=>{e&&document.getElementById(e)},[r,e]),null},DESCRIPTION_WARNING_NAME="DialogDescriptionWarning",DescriptionWarning=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${useWarningContext(DESCRIPTION_WARNING_NAME).contentName}}.`;return reactExports.useEffect(()=>{const r=e.current?.getAttribute("aria-describedby");t&&r&&document.getElementById(t)},[r,e,t]),null},Root=Dialog$1,Portal$1=DialogPortal$1,Overlay=DialogOverlay$1,Content=DialogContent$1,Title=DialogTitle$1,Description=DialogDescription$1,Close=DialogClose,N='[cmdk-group=""]',Y='[cmdk-group-items=""]',be='[cmdk-group-heading=""]',le='[cmdk-item=""]',ce=`${le}:not([aria-disabled="true"])`,Z="cmdk-item-select",T="data-value",Re=(e,t,r)=>W(e,t,r),ue=reactExports.createContext(void 0),K=()=>reactExports.useContext(ue),de=reactExports.createContext(void 0),ee=()=>reactExports.useContext(de),fe=reactExports.createContext(void 0),me=reactExports.forwardRef((e,t)=>{let r=L(()=>{var t,r;return{search:"",value:null!=(r=null!=(t=e.value)?t:e.defaultValue)?r:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=L(()=>new Set),i=L(()=>new Map),o=L(()=>new Map),s=L(()=>new Set),a=pe(e),{label:l,children:c,value:u,onValueChange:d,filter:p,shouldFilter:h,loop:f,disablePointerSelection:m=!1,vimBindings:g=!0,...b}=e,y=useId$1(),E=useId$1(),O=useId$1(),S=reactExports.useRef(null),x=ke();k(()=>{if(void 0!==u){let e=u.trim();r.current.value=e,v.emit()}},[u]),k(()=>{x(6,I)},[]);let v=reactExports.useMemo(()=>({subscribe:e=>(s.current.add(e),()=>s.current.delete(e)),snapshot:()=>r.current,setState:(e,t,n)=>{var i,o,s,l;if(!Object.is(r.current[e],t)){if(r.current[e]=t,"search"===e)D(),C(),x(1,w);else if("value"===e){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let e=document.getElementById(O);e?e.focus():null==(i=document.getElementById(y))||i.focus()}if(x(7,()=>{var e;r.current.selectedItemId=null==(e=R())?void 0:e.id,v.emit()}),n||x(5,I),void 0!==(null==(o=a.current)?void 0:o.value)){let e=null!=t?t:"";return void(null==(l=(s=a.current).onValueChange)||l.call(s,e))}}v.emit()}},emit:()=>{s.current.forEach(e=>e())}}),[]),_=reactExports.useMemo(()=>({value:(e,t,n)=>{var i;t!==(null==(i=o.current.get(e))?void 0:i.value)&&(o.current.set(e,{value:t,keywords:n}),r.current.filtered.items.set(e,A(t,n)),x(2,()=>{C(),v.emit()}))},item:(e,t)=>(n.current.add(e),t&&(i.current.has(t)?i.current.get(t).add(e):i.current.set(t,new Set([e]))),x(3,()=>{D(),C(),r.current.value||w(),v.emit()}),()=>{o.current.delete(e),n.current.delete(e),r.current.filtered.items.delete(e);let t=R();x(4,()=>{D(),(null==t?void 0:t.getAttribute("id"))===e&&w(),v.emit()})}),group:e=>(i.current.has(e)||i.current.set(e,new Set),()=>{o.current.delete(e),i.current.delete(e)}),filter:()=>a.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>a.current.disablePointerSelection,listId:y,inputId:O,labelId:E,listInnerRef:S}),[]);function A(e,t){var n,i;let o=null!=(i=null==(n=a.current)?void 0:n.filter)?i:Re;return e?o(e,r.current.search,t):0}function C(){if(!r.current.search||!1===a.current.shouldFilter)return;let e=r.current.filtered.items,t=[];r.current.filtered.groups.forEach(r=>{let n=i.current.get(r),o=0;n.forEach(t=>{let r=e.get(t);o=Math.max(r,o)}),t.push([r,o])});let n=S.current;P().sort((t,r)=>{var n,i;let o=t.getAttribute("id"),s=r.getAttribute("id");return(null!=(n=e.get(s))?n:0)-(null!=(i=e.get(o))?i:0)}).forEach(e=>{let t=e.closest(Y);t?t.appendChild(e.parentElement===t?e:e.closest(`${Y} > *`)):n.appendChild(e.parentElement===n?e:e.closest(`${Y} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{var t;let r=null==(t=S.current)?void 0:t.querySelector(`${N}[${T}="${encodeURIComponent(e[0])}"]`);null==r||r.parentElement.appendChild(r)})}function w(){let e=P().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(T);v.setState("value",t||void 0)}function D(){var e,t,s,l;if(!r.current.search||!1===a.current.shouldFilter)return void(r.current.filtered.count=n.current.size);r.current.filtered.groups=new Set;let c=0;for(let i of n.current){let n=A(null!=(t=null==(e=o.current.get(i))?void 0:e.value)?t:"",null!=(l=null==(s=o.current.get(i))?void 0:s.keywords)?l:[]);r.current.filtered.items.set(i,n),n>0&&c++}for(let[n,o]of i.current)for(let e of o)if(r.current.filtered.items.get(e)>0){r.current.filtered.groups.add(n);break}r.current.filtered.count=c}function I(){var e,t,r;let n=R();n&&((null==(e=n.parentElement)?void 0:e.firstChild)===n&&(null==(r=null==(t=n.closest(N))?void 0:t.querySelector(be))||r.scrollIntoView({block:"nearest"})),n.scrollIntoView({block:"nearest"}))}function R(){var e;return null==(e=S.current)?void 0:e.querySelector(`${le}[aria-selected="true"]`)}function P(){var e;return Array.from((null==(e=S.current)?void 0:e.querySelectorAll(ce))||[])}function M(e){let t=P()[e];t&&v.setState("value",t.getAttribute(T))}function $(e){var t;let r=R(),n=P(),i=n.findIndex(e=>e===r),o=n[i+e];null!=(t=a.current)&&t.loop&&(o=i+e<0?n[n.length-1]:i+e===n.length?n[0]:n[i+e]),o&&v.setState("value",o.getAttribute(T))}function F(e){let t,r=R(),n=null==r?void 0:r.closest(N);for(;n&&!t;)n=e>0?we(n,N):De(n,N),t=null==n?void 0:n.querySelector(ce);t?v.setState("value",t.getAttribute(T)):$(e)}let q=()=>M(P().length-1),j=e=>{e.preventDefault(),e.metaKey?q():e.altKey?F(1):$(1)},G=e=>{e.preventDefault(),e.metaKey?M(0):e.altKey?F(-1):$(-1)};return reactExports.createElement(Primitive.div,{ref:t,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:e=>{var t;null==(t=b.onKeyDown)||t.call(b,e);let r=e.nativeEvent.isComposing||229===e.keyCode;if(!e.defaultPrevented&&!r)switch(e.key){case"n":case"j":g&&e.ctrlKey&&j(e);break;case"ArrowDown":j(e);break;case"p":case"k":g&&e.ctrlKey&&G(e);break;case"ArrowUp":G(e);break;case"Home":e.preventDefault(),M(0);break;case"End":e.preventDefault(),q();break;case"Enter":{e.preventDefault();let t=R();if(t){let e=new Event(Z);t.dispatchEvent(e)}}}}},reactExports.createElement("label",{"cmdk-label":"",htmlFor:_.inputId,id:_.labelId,style:Te},l),B(e,e=>reactExports.createElement(de.Provider,{value:v},reactExports.createElement(ue.Provider,{value:_},e))))}),he=reactExports.forwardRef((e,t)=>{var r,n;let i=useId$1(),o=reactExports.useRef(null),s=reactExports.useContext(fe),a=K(),l=pe(e),c=null!=(n=null==(r=l.current)?void 0:r.forceMount)?n:null==s?void 0:s.forceMount;k(()=>{if(!c)return a.item(i,null==s?void 0:s.id)},[c]);let u=ve(i,o,[e.value,e.children,o],e.keywords),d=ee(),p=P(e=>e.value&&e.value===u.current),h=P(e=>!(!c&&!1!==a.filter())||!e.search||e.filtered.items.get(i)>0);function f(){var e,t;m(),null==(t=(e=l.current).onSelect)||t.call(e,u.current)}function m(){d.setState("value",u.current,!0)}if(reactExports.useEffect(()=>{let t=o.current;if(t&&!e.disabled)return t.addEventListener(Z,f),()=>t.removeEventListener(Z,f)},[h,e.onSelect,e.disabled]),!h)return null;let{disabled:g,value:b,onSelect:y,forceMount:T,keywords:E,...O}=e;return reactExports.createElement(Primitive.div,{ref:composeRefs(o,t),...O,id:i,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!p,"data-disabled":!!g,"data-selected":!!p,onPointerMove:g||a.getDisablePointerSelection()?void 0:m,onClick:g?void 0:f},e.children)}),Ee=reactExports.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:i,...o}=e,s=useId$1(),a=reactExports.useRef(null),l=reactExports.useRef(null),c=useId$1(),u=K(),d=P(e=>!(!i&&!1!==u.filter())||!e.search||e.filtered.groups.has(s));k(()=>u.group(s),[]),ve(s,a,[e.value,e.heading,l]);let p=reactExports.useMemo(()=>({id:s,forceMount:i}),[i]);return reactExports.createElement(Primitive.div,{ref:composeRefs(a,t),...o,"cmdk-group":"",role:"presentation",hidden:!d||void 0},r&&reactExports.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},r),B(e,e=>reactExports.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?c:void 0},reactExports.createElement(fe.Provider,{value:p},e))))}),ye=reactExports.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,i=reactExports.useRef(null),o=P(e=>!e.search);return r||o?reactExports.createElement(Primitive.div,{ref:composeRefs(i,t),...n,"cmdk-separator":"",role:"separator"}):null}),Se=reactExports.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,i=null!=e.value,o=ee(),s=P(e=>e.search),a=P(e=>e.selectedItemId),l=K();return reactExports.useEffect(()=>{null!=e.value&&o.setState("search",e.value)},[e.value]),reactExports.createElement(Primitive.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":a,id:l.inputId,type:"text",value:i?e.value:s,onChange:e=>{i||o.setState("search",e.target.value),null==r||r(e.target.value)}})}),Ce=reactExports.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...i}=e,o=reactExports.useRef(null),s=reactExports.useRef(null),a=P(e=>e.selectedItemId),l=K();return reactExports.useEffect(()=>{if(s.current&&o.current){let e,t=s.current,r=o.current,n=new ResizeObserver(()=>{e=requestAnimationFrame(()=>{let e=t.offsetHeight;r.style.setProperty("--cmdk-list-height",e.toFixed(1)+"px")})});return n.observe(t),()=>{cancelAnimationFrame(e),n.unobserve(t)}}},[]),reactExports.createElement(Primitive.div,{ref:composeRefs(o,t),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":a,"aria-label":n,id:l.listId},B(e,e=>reactExports.createElement("div",{ref:composeRefs(s,l.listInnerRef),"cmdk-list-sizer":""},e)))}),xe=reactExports.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:i,contentClassName:o,container:s,...a}=e;return reactExports.createElement(Root,{open:r,onOpenChange:n},reactExports.createElement(Portal$1,{container:s},reactExports.createElement(Overlay,{"cmdk-overlay":"",className:i}),reactExports.createElement(Content,{"aria-label":e.label,"cmdk-dialog":"",className:o},reactExports.createElement(me,{ref:t,...a}))))}),Ie=reactExports.forwardRef((e,t)=>P(e=>0===e.filtered.count)?reactExports.createElement(Primitive.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Pe=reactExports.forwardRef((e,t)=>{let{progress:r,children:n,label:i="Loading...",...o}=e;return reactExports.createElement(Primitive.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},B(e,e=>reactExports.createElement("div",{"aria-hidden":!0},e)))}),_e=Object.assign(me,{List:Ce,Item:he,Input:Se,Group:Ee,Separator:ye,Dialog:xe,Empty:Ie,Loading:Pe});function we(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function De(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function pe(e){let t=reactExports.useRef(e);return k(()=>{t.current=e}),t}var k="undefined"==typeof window?reactExports.useEffect:reactExports.useLayoutEffect;function L(e){let t=reactExports.useRef();return void 0===t.current&&(t.current=e()),t}function P(e){let t=ee(),r=()=>e(t.snapshot());return reactExports.useSyncExternalStore(t.subscribe,r,r)}function ve(e,t,r,n=[]){let i=reactExports.useRef(),o=K();return k(()=>{var s;let a=(()=>{var e;for(let t of r){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():i.current}})(),l=n.map(e=>e.trim());o.value(e,a,l),null==(s=t.current)||s.setAttribute(T,a),i.current=a}),i}var ke=()=>{let[e,t]=reactExports.useState(),r=L(()=>new Map);return k(()=>{r.current.forEach(e=>e()),r.current=new Map},[e]),(e,n)=>{r.current.set(e,n),t({})}};function Me(e){let t=e.type;return"function"==typeof t?t(e.props):"render"in t?t.render(e.props):e}function B({asChild:e,children:t},r){return e&&reactExports.isValidElement(t)?reactExports.cloneElement(Me(t),{ref:t.ref},r(t.props.children)):r(t)}var Te={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Dialog=Root,DialogPortal=Portal$1,DialogOverlay=reactExports.forwardRef(({className:e,...t},r)=>jsxDevRuntimeExports.jsxDEV(Overlay,{ref:r,className:cn$2("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t},void 0,!1,{fileName:"/app/frontend/src/components/ui/dialog.tsx",lineNumber:19,columnNumber:3},void 0));DialogOverlay.displayName=Overlay.displayName;const DialogContent=reactExports.forwardRef(({className:e,children:t,...r},n)=>jsxDevRuntimeExports.jsxDEV(DialogPortal,{children:[jsxDevRuntimeExports.jsxDEV(DialogOverlay,{},void 0,!1,{fileName:"/app/frontend/src/components/ui/dialog.tsx",lineNumber:35,columnNumber:5},void 0),jsxDevRuntimeExports.jsxDEV(Content,{ref:n,className:cn$2("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,jsxDevRuntimeExports.jsxDEV(Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[jsxDevRuntimeExports.jsxDEV(X$1,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/frontend/src/components/ui/dialog.tsx",lineNumber:46,columnNumber:9},void 0),jsxDevRuntimeExports.jsxDEV("span",{className:"sr-only",children:"Close"},void 0,!1,{fileName:"/app/frontend/src/components/ui/dialog.tsx",lineNumber:47,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/frontend/src/components/ui/dialog.tsx",lineNumber:45,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/frontend/src/components/ui/dialog.tsx",lineNumber:36,columnNumber:5},void 0)]},void 0,!0,{fileName:"/app/frontend/src/components/ui/dialog.tsx",lineNumber:34,columnNumber:3},void 0));DialogContent.displayName=Content.displayName;const DialogHeader=({className:e,...t})=>jsxDevRuntimeExports.jsxDEV("div",{className:cn$2("flex flex-col space-y-1.5 text-center sm:text-left",e),...t},void 0,!1,{fileName:"/app/frontend/src/components/ui/dialog.tsx",lineNumber:58,columnNumber:3},void 0);DialogHeader.displayName="DialogHeader";const DialogTitle=reactExports.forwardRef(({className:e,...t},r)=>jsxDevRuntimeExports.jsxDEV(Title,{ref:r,className:cn$2("text-lg font-semibold leading-none tracking-tight",e),...t},void 0,!1,{fileName:"/app/frontend/src/components/ui/dialog.tsx",lineNumber:86,columnNumber:3},void 0));DialogTitle.displayName=Title.displayName;const DialogDescription=reactExports.forwardRef(({className:e,...t},r)=>jsxDevRuntimeExports.jsxDEV(Description,{ref:r,className:cn$2("text-sm text-muted-foreground",e),...t},void 0,!1,{fileName:"/app/frontend/src/components/ui/dialog.tsx",lineNumber:101,columnNumber:3},void 0));DialogDescription.displayName=Description.displayName;const Command=reactExports.forwardRef(({className:e,...t},r)=>jsxDevRuntimeExports.jsxDEV(_e,{ref:r,className:cn$2("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t},void 0,!1,{fileName:"/app/frontend/src/components/ui/command.tsx",lineNumber:13,columnNumber:3},void 0));Command.displayName=_e.displayName;const CommandInput=reactExports.forwardRef(({className:e,...t},r)=>jsxDevRuntimeExports.jsxDEV("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[jsxDevRuntimeExports.jsxDEV(Search,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"},void 0,!1,{fileName:"/app/frontend/src/components/ui/command.tsx",lineNumber:41,columnNumber:5},void 0),jsxDevRuntimeExports.jsxDEV(_e.Input,{ref:r,className:cn$2("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t},void 0,!1,{fileName:"/app/frontend/src/components/ui/command.tsx",lineNumber:42,columnNumber:5},void 0)]},void 0,!0,{fileName:"/app/frontend/src/components/ui/command.tsx",lineNumber:40,columnNumber:3},void 0));CommandInput.displayName=_e.Input.displayName;const CommandList=reactExports.forwardRef(({className:e,...t},r)=>jsxDevRuntimeExports.jsxDEV(_e.List,{ref:r,className:cn$2("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t},void 0,!1,{fileName:"/app/frontend/src/components/ui/command.tsx",lineNumber:59,columnNumber:3},void 0));CommandList.displayName=_e.List.displayName;const CommandEmpty=reactExports.forwardRef((e,t)=>jsxDevRuntimeExports.jsxDEV(_e.Empty,{ref:t,className:"py-6 text-center text-sm",...e},void 0,!1,{fileName:"/app/frontend/src/components/ui/command.tsx",lineNumber:72,columnNumber:3},void 0));CommandEmpty.displayName=_e.Empty.displayName;const CommandGroup=reactExports.forwardRef(({className:e,...t},r)=>jsxDevRuntimeExports.jsxDEV(_e.Group,{ref:r,className:cn$2("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t},void 0,!1,{fileName:"/app/frontend/src/components/ui/command.tsx",lineNumber:85,columnNumber:3},void 0));CommandGroup.displayName=_e.Group.displayName;const CommandSeparator=reactExports.forwardRef(({className:e,...t},r)=>jsxDevRuntimeExports.jsxDEV(_e.Separator,{ref:r,className:cn$2("-mx-1 h-px bg-border",e),...t},void 0,!1,{fileName:"/app/frontend/src/components/ui/command.tsx",lineNumber:101,columnNumber:3},void 0));CommandSeparator.displayName=_e.Separator.displayName;const CommandItem=reactExports.forwardRef(({className:e,...t},r)=>jsxDevRuntimeExports.jsxDEV(_e.Item,{ref:r,className:cn$2("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...t},void 0,!1,{fileName:"/app/frontend/src/components/ui/command.tsx",lineNumber:113,columnNumber:3},void 0));CommandItem.displayName=_e.Item.displayName;var POPOVER_NAME="Popover",[createPopoverContext]=createContextScope(POPOVER_NAME,[createPopperScope]),usePopperScope=createPopperScope(),[PopoverProvider,usePopoverContext]=createPopoverContext(POPOVER_NAME),Popover$1=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:i,onOpenChange:o,modal:s=!1}=e,a=usePopperScope(t),l=reactExports.useRef(null),[c,u]=reactExports.useState(!1),[d,p]=useControllableState({prop:n,defaultProp:i??!1,onChange:o,caller:POPOVER_NAME});return jsxRuntimeExports.jsx(Root2$1,{...a,children:jsxRuntimeExports.jsx(PopoverProvider,{scope:t,contentId:useId$1(),triggerRef:l,open:d,onOpenChange:p,onOpenToggle:reactExports.useCallback(()=>p(e=>!e),[p]),hasCustomAnchor:c,onCustomAnchorAdd:reactExports.useCallback(()=>u(!0),[]),onCustomAnchorRemove:reactExports.useCallback(()=>u(!1),[]),modal:s,children:r})})};Popover$1.displayName=POPOVER_NAME;var ANCHOR_NAME="PopoverAnchor",PopoverAnchor=reactExports.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=usePopoverContext(ANCHOR_NAME,r),o=usePopperScope(r),{onCustomAnchorAdd:s,onCustomAnchorRemove:a}=i;return reactExports.useEffect(()=>(s(),()=>a()),[s,a]),jsxRuntimeExports.jsx(Anchor,{...o,...n,ref:t})});PopoverAnchor.displayName=ANCHOR_NAME;var TRIGGER_NAME="PopoverTrigger",PopoverTrigger$1=reactExports.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=usePopoverContext(TRIGGER_NAME,r),o=usePopperScope(r),s=useComposedRefs(t,i.triggerRef),a=jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":getState(i.open),...n,ref:s,onClick:composeEventHandlers(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:jsxRuntimeExports.jsx(Anchor,{asChild:!0,...o,children:a})});PopoverTrigger$1.displayName=TRIGGER_NAME;var PORTAL_NAME="PopoverPortal",[PortalProvider,usePortalContext]=createPopoverContext(PORTAL_NAME,{forceMount:void 0}),PopoverPortal=e=>{const{__scopePopover:t,forceMount:r,children:n,container:i}=e,o=usePopoverContext(PORTAL_NAME,t);return jsxRuntimeExports.jsx(PortalProvider,{scope:t,forceMount:r,children:jsxRuntimeExports.jsx(Presence,{present:r||o.open,children:jsxRuntimeExports.jsx(Portal$3,{asChild:!0,container:i,children:n})})})};PopoverPortal.displayName=PORTAL_NAME;var CONTENT_NAME="PopoverContent",PopoverContent$1=reactExports.forwardRef((e,t)=>{const r=usePortalContext(CONTENT_NAME,e.__scopePopover),{forceMount:n=r.forceMount,...i}=e,o=usePopoverContext(CONTENT_NAME,e.__scopePopover);return jsxRuntimeExports.jsx(Presence,{present:n||o.open,children:o.modal?jsxRuntimeExports.jsx(PopoverContentModal,{...i,ref:t}):jsxRuntimeExports.jsx(PopoverContentNonModal,{...i,ref:t})})});PopoverContent$1.displayName=CONTENT_NAME;var Slot=createSlot("PopoverContent.RemoveScroll"),PopoverContentModal=reactExports.forwardRef((e,t)=>{const r=usePopoverContext(CONTENT_NAME,e.__scopePopover),n=reactExports.useRef(null),i=useComposedRefs(t,n),o=reactExports.useRef(!1);return reactExports.useEffect(()=>{const e=n.current;if(e)return hideOthers(e)},[]),jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(PopoverContentImpl,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers(e.onCloseAutoFocus,e=>{e.preventDefault(),o.current||r.triggerRef.current?.focus()}),onPointerDownOutside:composeEventHandlers(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,n=2===t.button||r;o.current=n},{checkForDefaultPrevented:!1}),onFocusOutside:composeEventHandlers(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),PopoverContentNonModal=reactExports.forwardRef((e,t)=>{const r=usePopoverContext(CONTENT_NAME,e.__scopePopover),n=reactExports.useRef(!1),i=reactExports.useRef(!1);return jsxRuntimeExports.jsx(PopoverContentImpl,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(n.current||r.triggerRef.current?.focus(),t.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));const o=t.target,s=r.triggerRef.current?.contains(o);s&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),PopoverContentImpl=reactExports.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=e,p=usePopoverContext(CONTENT_NAME,r),h=usePopperScope(r);return useFocusGuards(),jsxRuntimeExports.jsx(FocusScope,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:o,children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>p.onOpenChange(!1),children:jsxRuntimeExports.jsx(Content$2,{"data-state":getState(p.open),role:"dialog",id:p.contentId,...h,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),CLOSE_NAME="PopoverClose",PopoverClose=reactExports.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=usePopoverContext(CLOSE_NAME,r);return jsxRuntimeExports.jsx(Primitive.button,{type:"button",...n,ref:t,onClick:composeEventHandlers(e.onClick,()=>i.onOpenChange(!1))})});PopoverClose.displayName=CLOSE_NAME;var ARROW_NAME="PopoverArrow",PopoverArrow=reactExports.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=usePopperScope(r);return jsxRuntimeExports.jsx(Arrow,{...i,...n,ref:t})});function getState(e){return e?"open":"closed"}PopoverArrow.displayName=ARROW_NAME;var Root2=Popover$1,Trigger=PopoverTrigger$1,Portal=PopoverPortal,Content2=PopoverContent$1;const Popover=Root2,PopoverTrigger=Trigger,PopoverContent=reactExports.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},i)=>jsxDevRuntimeExports.jsxDEV(Portal,{children:jsxDevRuntimeExports.jsxDEV(Content2,{ref:i,align:t,sideOffset:r,className:cn$2("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...n},void 0,!1,{fileName:"/app/frontend/src/components/ui/popover.tsx",lineNumber:17,columnNumber:5},void 0)},void 0,!1,{fileName:"/app/frontend/src/components/ui/popover.tsx",lineNumber:16,columnNumber:3},void 0));PopoverContent.displayName=Content2.displayName;const badgeVariants=cva("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Badge({className:e,variant:t,...r}){return jsxDevRuntimeExports.jsxDEV("div",{className:cn$2(badgeVariants({variant:t}),e),...r},void 0,!1,{fileName:"/app/frontend/src/components/ui/badge.tsx",lineNumber:32,columnNumber:5},this)}function MultiSelect({options:e,selected:t,onChange:r,placeholder:n="Select items...",className:i}){const[o,s]=reactExports.useState(!1);return jsxDevRuntimeExports.jsxDEV(Popover,{open:o,onOpenChange:s,children:[jsxDevRuntimeExports.jsxDEV(PopoverTrigger,{asChild:!0,children:jsxDevRuntimeExports.jsxDEV(Button$1,{variant:"outline",role:"combobox","aria-expanded":o,className:cn$2("w-full justify-between hover:bg-accent",!t.length&&"text-muted-foreground",i),children:jsxDevRuntimeExports.jsxDEV("div",{className:"flex gap-1 flex-wrap",children:[0===t.length&&n,t.length>0&&t.slice(0,2).map(n=>{const i=e.find(e=>e.value===n);return i?jsxDevRuntimeExports.jsxDEV(Badge,{variant:"secondary",className:"mr-1",onClick:e=>{e.stopPropagation(),(e=>{r(t.filter(t=>t!==e))})(n)},children:[i.label,jsxDevRuntimeExports.jsxDEV(X$1,{className:"ml-1 h-3 w-3"},void 0,!1,{fileName:"/app/frontend/src/components/ui/multi-select.tsx",lineNumber:82,columnNumber:21},this)]},n,!0,{fileName:"/app/frontend/src/components/ui/multi-select.tsx",lineNumber:72,columnNumber:19},this):null}),t.length>2&&jsxDevRuntimeExports.jsxDEV(Badge,{variant:"secondary",className:"mr-1",children:["+",t.length-2," more"]},void 0,!0,{fileName:"/app/frontend/src/components/ui/multi-select.tsx",lineNumber:87,columnNumber:15},this)]},void 0,!0,{fileName:"/app/frontend/src/components/ui/multi-select.tsx",lineNumber:66,columnNumber:11},this)},void 0,!1,{fileName:"/app/frontend/src/components/ui/multi-select.tsx",lineNumber:56,columnNumber:9},this)},void 0,!1,{fileName:"/app/frontend/src/components/ui/multi-select.tsx",lineNumber:55,columnNumber:7},this),jsxDevRuntimeExports.jsxDEV(PopoverContent,{className:"w-full p-0",align:"start",children:jsxDevRuntimeExports.jsxDEV(Command,{children:[jsxDevRuntimeExports.jsxDEV(CommandInput,{placeholder:"Search..."},void 0,!1,{fileName:"/app/frontend/src/components/ui/multi-select.tsx",lineNumber:96,columnNumber:11},this),jsxDevRuntimeExports.jsxDEV(CommandEmpty,{children:"No results found."},void 0,!1,{fileName:"/app/frontend/src/components/ui/multi-select.tsx",lineNumber:97,columnNumber:11},this),jsxDevRuntimeExports.jsxDEV(CommandGroup,{className:"max-h-64 overflow-auto",children:e.map(e=>jsxDevRuntimeExports.jsxDEV(CommandItem,{onSelect:()=>{return n=e.value,void(t.includes(n)?r(t.filter(e=>e!==n)):r([...t,n]));var n},children:[jsxDevRuntimeExports.jsxDEV(Check$1,{className:cn$2("mr-2 h-4 w-4",t.includes(e.value)?"opacity-100":"opacity-0")},void 0,!1,{fileName:"/app/frontend/src/components/ui/multi-select.tsx",lineNumber:104,columnNumber:17},this),e.label]},e.value,!0,{fileName:"/app/frontend/src/components/ui/multi-select.tsx",lineNumber:100,columnNumber:15},this))},void 0,!1,{fileName:"/app/frontend/src/components/ui/multi-select.tsx",lineNumber:98,columnNumber:11},this)]},void 0,!0,{fileName:"/app/frontend/src/components/ui/multi-select.tsx",lineNumber:95,columnNumber:9},this)},void 0,!1,{fileName:"/app/frontend/src/components/ui/multi-select.tsx",lineNumber:94,columnNumber:7},this)]},void 0,!0,{fileName:"/app/frontend/src/components/ui/multi-select.tsx",lineNumber:54,columnNumber:5},this)}function BlogEditor({slug:e,initialData:t}){const r=useNavigate(),{toast:n}=useToast(),[i,o]=reactExports.useState(t?.title||""),[s,a]=reactExports.useState(t?.content||""),[l,c]=reactExports.useState(t?.excerpt||""),u=reactExports.useCallback(e=>{a(e)},[]),[d,p]=reactExports.useState(t?.status||"draft"),[h,f]=reactExports.useState(t?.categories?.map(e=>e.id)||[]),[m,g]=reactExports.useState(t?.tags?.map(e=>e.id)||[]),[b,y]=reactExports.useState(t?.meta_title||""),[T,E]=reactExports.useState(t?.meta_description||""),[O,S]=reactExports.useState(t?.meta_keywords||""),[x,v]=reactExports.useState(t?.featured||!1),[_,A]=reactExports.useState(t?.allow_comments??!0),[C,w]=reactExports.useState([]),[k,D]=reactExports.useState([]),[I,R]=reactExports.useState(!1),[N,P]=reactExports.useState(null),[M,$]=reactExports.useState(!1),[L,B]=reactExports.useState(!1),[F,q]=reactExports.useState(!0);reactExports.useEffect(()=>{(async()=>{try{const[e,t]=await Promise.all([fetchCategories(),fetchTags()]);w(e),D(t)}catch(e){n({title:"Error",description:"Failed to load categories and tags",variant:"destructive"})}})()},[n]),reactExports.useEffect(()=>{(i||s||l)&&$(!0)},[i,s,l,h,m,d]),reactExports.useEffect(()=>{if(!M||!e)return;const t=setTimeout(async()=>{await j(!0)},6e4);return()=>clearTimeout(t)},[M,e,i,s,l,h,m]);const j=async(t=!1)=>{if(i.trim()){R(!0);try{const o={title:i.trim(),content:s,excerpt:l||void 0,status:d,category_ids:h,tag_ids:m,featured:x,allow_comments:_,meta_title:b||void 0,meta_description:T||void 0,meta_keywords:O||void 0};if(e)await updatePost(e,o);else{const e=await createPost(o);r({to:`/blog/edit/${e.slug}`})}P(new Date),$(!1),t||n({title:"Success",description:`Post ${e?"updated":"created"} successfully`})}catch(o){n({title:"Error",description:o instanceof Error?o.message:"Failed to save post",variant:"destructive"})}finally{R(!1)}}else n({title:"Error",description:"Title is required",variant:"destructive"})};return jsxDevRuntimeExports.jsxDEV("div",{className:"min-h-screen bg-background",children:[jsxDevRuntimeExports.jsxDEV("header",{className:"border-b sticky top-0 bg-background z-10",children:jsxDevRuntimeExports.jsxDEV("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[jsxDevRuntimeExports.jsxDEV("div",{className:"flex items-center gap-4",children:[jsxDevRuntimeExports.jsxDEV(Button$1,{variant:"ghost",size:"sm",onClick:()=>r({to:"/blog/dashboard"}),children:[jsxDevRuntimeExports.jsxDEV(Icon$1,{name:"ArrowLeft",className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:233,columnNumber:15},this),"Back"]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:228,columnNumber:13},this),jsxDevRuntimeExports.jsxDEV("div",{className:"flex items-center gap-2",children:[jsxDevRuntimeExports.jsxDEV(Icon$1,{name:"FileEdit",className:"h-5 w-5 text-muted-foreground"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:237,columnNumber:15},this),jsxDevRuntimeExports.jsxDEV("h1",{className:"text-lg font-semibold",children:e?"Edit Post":"New Post"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:238,columnNumber:15},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:236,columnNumber:13},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:227,columnNumber:11},this),jsxDevRuntimeExports.jsxDEV("div",{className:"flex items-center gap-2",children:[jsxDevRuntimeExports.jsxDEV("span",{className:"text-sm text-muted-foreground",children:I?jsxDevRuntimeExports.jsxDEV("span",{className:"flex items-center gap-1",children:[jsxDevRuntimeExports.jsxDEV(Icon$1,{name:"Loader2",className:"h-3 w-3 animate-spin"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:249,columnNumber:19},this),"Saving..."]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:248,columnNumber:17},this):N?`Saved ${N.toLocaleTimeString()}`:M?"Unsaved changes":"All changes saved"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:246,columnNumber:13},this),e&&jsxDevRuntimeExports.jsxDEV(Button$1,{variant:"ghost",size:"sm",onClick:()=>window.open(`/blog/${e}`,"_blank"),title:"View post in new window",children:[jsxDevRuntimeExports.jsxDEV(Icon$1,{name:"ExternalLink",className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:269,columnNumber:17},this),"View Post"]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:263,columnNumber:15},this),jsxDevRuntimeExports.jsxDEV(Button$1,{variant:"outline",size:"sm",onClick:()=>j(),children:[jsxDevRuntimeExports.jsxDEV(Icon$1,{name:"Save",className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:274,columnNumber:15},this),"Save Draft"]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:273,columnNumber:13},this),jsxDevRuntimeExports.jsxDEV(Button$1,{size:"sm",onClick:async()=>{p("published"),setTimeout(()=>j(),100)},disabled:I,children:[jsxDevRuntimeExports.jsxDEV(Icon$1,{name:"Send",className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:278,columnNumber:15},this),"Publish"]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:277,columnNumber:13},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:244,columnNumber:11},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:226,columnNumber:9},this)},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:225,columnNumber:7},this),jsxDevRuntimeExports.jsxDEV("div",{className:"container mx-auto p-6",children:jsxDevRuntimeExports.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[jsxDevRuntimeExports.jsxDEV("div",{className:"lg:col-span-2 space-y-6",children:[jsxDevRuntimeExports.jsxDEV("div",{className:"border rounded-lg p-6 bg-card space-y-6",children:[jsxDevRuntimeExports.jsxDEV("div",{children:[jsxDevRuntimeExports.jsxDEV(Input,{type:"text",value:i,onChange:e=>o(e.target.value),placeholder:"Post title...",className:"text-3xl font-bold h-auto py-3"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:293,columnNumber:17},this),i&&jsxDevRuntimeExports.jsxDEV("p",{className:"text-sm text-muted-foreground mt-2",children:["Slug: ",(G=i,G.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""))]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:301,columnNumber:19},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:292,columnNumber:15},this),jsxDevRuntimeExports.jsxDEV("div",{children:[jsxDevRuntimeExports.jsxDEV(Label,{htmlFor:"excerpt",children:"Excerpt (optional)"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:309,columnNumber:17},this),jsxDevRuntimeExports.jsxDEV("textarea",{id:"excerpt",value:l,onChange:e=>c(e.target.value),placeholder:"Brief description of the post (max 300 characters)",maxLength:300,className:"w-full mt-2 p-3 border rounded-md resize-none h-24 text-sm bg-background"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:310,columnNumber:17},this),jsxDevRuntimeExports.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:[l.length,"/300 characters"]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:318,columnNumber:17},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:308,columnNumber:15},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:290,columnNumber:13},this),jsxDevRuntimeExports.jsxDEV("div",{className:"border rounded-lg p-6 bg-card",children:[jsxDevRuntimeExports.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[jsxDevRuntimeExports.jsxDEV(Label,{children:"Content"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:327,columnNumber:17},this),jsxDevRuntimeExports.jsxDEV(Button$1,{type:"button",variant:"outline",size:"sm",onClick:()=>B(!L),children:[jsxDevRuntimeExports.jsxDEV(Icon$1,{name:"Image",className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:334,columnNumber:19},this),"Media Library"]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:328,columnNumber:17},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:326,columnNumber:15},this),jsxDevRuntimeExports.jsxDEV(GravityMarkdownEditor,{value:s,onChange:u,onImageUpload:async e=>{try{return(await uploadBlogImage(e)).url}catch(t){throw new Error("Failed to upload image")}}},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:338,columnNumber:15},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:325,columnNumber:13},this),jsxDevRuntimeExports.jsxDEV(Dialog,{open:L,onOpenChange:B,children:jsxDevRuntimeExports.jsxDEV(DialogContent,{className:"max-w-4xl max-h-[80vh]",children:[jsxDevRuntimeExports.jsxDEV(DialogHeader,{children:jsxDevRuntimeExports.jsxDEV(DialogTitle,{children:"Media Library"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:349,columnNumber:19},this)},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:348,columnNumber:17},this),jsxDevRuntimeExports.jsxDEV(MediaLibrary,{onSelect:e=>{a(s+`\n\n![Image](${e})`),B(!1)},onClose:()=>B(!1)},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:351,columnNumber:17},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:347,columnNumber:15},this)},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:346,columnNumber:13},this),jsxDevRuntimeExports.jsxDEV("div",{className:"border rounded-lg p-4 bg-card",children:[jsxDevRuntimeExports.jsxDEV("button",{type:"button",onClick:()=>q(!F),className:"flex items-center justify-between w-full",children:[jsxDevRuntimeExports.jsxDEV(Label,{children:"SEO Settings"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:368,columnNumber:17},this),jsxDevRuntimeExports.jsxDEV(Icon$1,{name:F?"ChevronUp":"ChevronDown",className:"h-4 w-4"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:369,columnNumber:17},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:363,columnNumber:15},this),F&&jsxDevRuntimeExports.jsxDEV("div",{className:"mt-4 space-y-3",children:[jsxDevRuntimeExports.jsxDEV("div",{children:[jsxDevRuntimeExports.jsxDEV(Label,{htmlFor:"meta-title",className:"text-xs",children:"Meta Title"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:378,columnNumber:21},this),jsxDevRuntimeExports.jsxDEV(Input,{id:"meta-title",value:b,onChange:e=>y(e.target.value),placeholder:"Leave empty to use post title",className:"mt-1",maxLength:70},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:381,columnNumber:21},this),jsxDevRuntimeExports.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:[b.length,"/70"]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:389,columnNumber:21},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:377,columnNumber:19},this),jsxDevRuntimeExports.jsxDEV("div",{children:[jsxDevRuntimeExports.jsxDEV(Label,{htmlFor:"meta-description",className:"text-xs",children:"Meta Description"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:395,columnNumber:21},this),jsxDevRuntimeExports.jsxDEV("textarea",{id:"meta-description",value:T,onChange:e=>E(e.target.value),placeholder:"Leave empty to use excerpt",maxLength:160,className:"w-full mt-1 p-2 border rounded-md resize-none h-20 text-sm bg-background"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:398,columnNumber:21},this),jsxDevRuntimeExports.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:[T.length,"/160"]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:406,columnNumber:21},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:394,columnNumber:19},this),jsxDevRuntimeExports.jsxDEV("div",{children:[jsxDevRuntimeExports.jsxDEV(Label,{htmlFor:"meta-keywords",className:"text-xs",children:"Meta Keywords"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:412,columnNumber:21},this),jsxDevRuntimeExports.jsxDEV(Input,{id:"meta-keywords",value:O,onChange:e=>S(e.target.value),placeholder:"keyword1, keyword2, keyword3",className:"mt-1"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:415,columnNumber:21},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:411,columnNumber:19},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:376,columnNumber:17},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:362,columnNumber:13},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:288,columnNumber:11},this),jsxDevRuntimeExports.jsxDEV("div",{className:"space-y-6",children:[jsxDevRuntimeExports.jsxDEV("div",{className:"border rounded-lg p-4 bg-card",children:[jsxDevRuntimeExports.jsxDEV(Label,{htmlFor:"status",children:"Status"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:432,columnNumber:15},this),jsxDevRuntimeExports.jsxDEV("select",{id:"status",value:d,onChange:e=>p(e.target.value),className:"w-full mt-2 p-2 border rounded-md bg-background",children:[jsxDevRuntimeExports.jsxDEV("option",{value:"draft",children:"Draft"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:439,columnNumber:17},this),jsxDevRuntimeExports.jsxDEV("option",{value:"published",children:"Published"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:440,columnNumber:17},this),jsxDevRuntimeExports.jsxDEV("option",{value:"scheduled",children:"Scheduled"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:441,columnNumber:17},this),jsxDevRuntimeExports.jsxDEV("option",{value:"archived",children:"Archived"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:442,columnNumber:17},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:433,columnNumber:15},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:431,columnNumber:13},this),jsxDevRuntimeExports.jsxDEV("div",{className:"border rounded-lg p-4 bg-card",children:[jsxDevRuntimeExports.jsxDEV(Label,{children:"Categories"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:448,columnNumber:15},this),jsxDevRuntimeExports.jsxDEV("div",{className:"mt-2",children:jsxDevRuntimeExports.jsxDEV(MultiSelect,{options:C.map(e=>({label:e.name,value:e.id})),selected:h,onChange:f,placeholder:"Select categories..."},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:450,columnNumber:17},this)},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:449,columnNumber:15},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:447,columnNumber:13},this),jsxDevRuntimeExports.jsxDEV("div",{className:"border rounded-lg p-4 bg-card",children:[jsxDevRuntimeExports.jsxDEV(Label,{children:"Tags"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:461,columnNumber:15},this),jsxDevRuntimeExports.jsxDEV("div",{className:"mt-2",children:jsxDevRuntimeExports.jsxDEV(MultiSelect,{options:k.map(e=>({label:e.name,value:e.id})),selected:m,onChange:g,placeholder:"Select tags..."},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:463,columnNumber:17},this)},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:462,columnNumber:15},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:460,columnNumber:13},this),jsxDevRuntimeExports.jsxDEV("div",{className:"border rounded-lg p-4 space-y-3 bg-card",children:[jsxDevRuntimeExports.jsxDEV(Label,{children:"Options"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:474,columnNumber:15},this),jsxDevRuntimeExports.jsxDEV("label",{className:"flex items-center gap-2 cursor-pointer",children:[jsxDevRuntimeExports.jsxDEV("input",{type:"checkbox",checked:x,onChange:e=>v(e.target.checked),className:"rounded"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:476,columnNumber:17},this),jsxDevRuntimeExports.jsxDEV("span",{className:"text-sm",children:"Featured post"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:482,columnNumber:17},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:475,columnNumber:15},this),jsxDevRuntimeExports.jsxDEV("label",{className:"flex items-center gap-2 cursor-pointer",children:[jsxDevRuntimeExports.jsxDEV("input",{type:"checkbox",checked:_,onChange:e=>A(e.target.checked),className:"rounded"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:485,columnNumber:17},this),jsxDevRuntimeExports.jsxDEV("span",{className:"text-sm",children:"Allow comments"},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:491,columnNumber:17},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:484,columnNumber:15},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:473,columnNumber:13},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:429,columnNumber:11},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:286,columnNumber:9},this)},void 0,!1,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:285,columnNumber:7},this)]},void 0,!0,{fileName:"/app/frontend/src/pages/blog/BlogEditor.tsx",lineNumber:223,columnNumber:5},this);var G}export{BlogEditor as default};
